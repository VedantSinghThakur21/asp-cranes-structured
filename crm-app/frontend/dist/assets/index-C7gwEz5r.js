var ZE=Object.defineProperty;var eD=(e,t,n)=>t in e?ZE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var le=(e,t,n)=>eD(e,typeof t!="symbol"?t+"":t,n);function tD(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Fp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y1={exports:{}},xd={},v1={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=Symbol.for("react.element"),nD=Symbol.for("react.portal"),sD=Symbol.for("react.fragment"),rD=Symbol.for("react.strict_mode"),iD=Symbol.for("react.profiler"),aD=Symbol.for("react.provider"),oD=Symbol.for("react.context"),lD=Symbol.for("react.forward_ref"),cD=Symbol.for("react.suspense"),uD=Symbol.for("react.memo"),dD=Symbol.for("react.lazy"),cy=Symbol.iterator;function hD(e){return e===null||typeof e!="object"?null:(e=cy&&e[cy]||e["@@iterator"],typeof e=="function"?e:null)}var b1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w1=Object.assign,j1={};function xa(e,t,n){this.props=e,this.context=t,this.refs=j1,this.updater=n||b1}xa.prototype.isReactComponent={};xa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N1(){}N1.prototype=xa.prototype;function $p(e,t,n){this.props=e,this.context=t,this.refs=j1,this.updater=n||b1}var Bp=$p.prototype=new N1;Bp.constructor=$p;w1(Bp,xa.prototype);Bp.isPureReactComponent=!0;var uy=Array.isArray,S1=Object.prototype.hasOwnProperty,zp={current:null},C1={key:!0,ref:!0,__self:!0,__source:!0};function k1(e,t,n){var s,r={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)S1.call(t,s)&&!C1.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Cl,type:e,key:i,ref:a,props:r,_owner:zp.current}}function fD(e,t){return{$$typeof:Cl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cl}function mD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dy=/\/+/g;function mh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mD(""+e.key):t.toString(36)}function Fc(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Cl:case nD:a=!0}}if(a)return a=e,r=r(a),e=s===""?"."+mh(a,0):s,uy(r)?(n="",e!=null&&(n=e.replace(dy,"$&/")+"/"),Fc(r,t,n,"",function(u){return u})):r!=null&&(Vp(r)&&(r=fD(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(dy,"$&/")+"/")+e)),t.push(r)),1;if(a=0,s=s===""?".":s+":",uy(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+mh(i,l);a+=Fc(i,t,n,c,r)}else if(c=hD(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+mh(i,l++),a+=Fc(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ql(e,t,n){if(e==null)return e;var s=[],r=0;return Fc(e,s,"","",function(i){return t.call(n,i,r++)}),s}function pD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wt={current:null},$c={transition:null},gD={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:$c,ReactCurrentOwner:zp};function E1(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:ql,forEach:function(e,t,n){ql(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ql(e,function(){t++}),t},toArray:function(e){return ql(e,function(t){return t})||[]},only:function(e){if(!Vp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=xa;Ne.Fragment=sD;Ne.Profiler=iD;Ne.PureComponent=$p;Ne.StrictMode=rD;Ne.Suspense=cD;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gD;Ne.act=E1;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=w1({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=zp.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S1.call(t,c)&&!C1.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Cl,type:e.type,key:r,ref:i,props:s,_owner:a}};Ne.createContext=function(e){return e={$$typeof:oD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aD,_context:e},e.Consumer=e};Ne.createElement=k1;Ne.createFactory=function(e){var t=k1.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:lD,render:e}};Ne.isValidElement=Vp;Ne.lazy=function(e){return{$$typeof:dD,_payload:{_status:-1,_result:e},_init:pD}};Ne.memo=function(e,t){return{$$typeof:uD,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=$c.transition;$c.transition={};try{e()}finally{$c.transition=t}};Ne.unstable_act=E1;Ne.useCallback=function(e,t){return Wt.current.useCallback(e,t)};Ne.useContext=function(e){return Wt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Wt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Wt.current.useEffect(e,t)};Ne.useId=function(){return Wt.current.useId()};Ne.useImperativeHandle=function(e,t,n){return Wt.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Wt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Wt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Wt.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return Wt.current.useReducer(e,t,n)};Ne.useRef=function(e){return Wt.current.useRef(e)};Ne.useState=function(e){return Wt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Wt.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Wt.current.useTransition()};Ne.version="18.3.1";v1.exports=Ne;var x=v1.exports;const ee=Fp(x),Up=tD({__proto__:null,default:ee},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xD=x,yD=Symbol.for("react.element"),vD=Symbol.for("react.fragment"),bD=Object.prototype.hasOwnProperty,wD=xD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jD={key:!0,ref:!0,__self:!0,__source:!0};function D1(e,t,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)bD.call(t,s)&&!jD.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:yD,type:e,key:i,ref:a,props:r,_owner:wD.current}}xd.Fragment=vD;xd.jsx=D1;xd.jsxs=D1;y1.exports=xd;var o=y1.exports,T1={exports:{}},fn={},P1={exports:{}},_1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,R){var V=A.length;A.push(R);e:for(;0<V;){var H=V-1>>>1,J=A[H];if(0<r(J,R))A[H]=R,A[V]=J,V=H;else break e}}function n(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var R=A[0],V=A.pop();if(V!==R){A[0]=V;e:for(var H=0,J=A.length,re=J>>>1;H<re;){var oe=2*(H+1)-1,ge=A[oe],we=oe+1,M=A[we];if(0>r(ge,V))we<J&&0>r(M,ge)?(A[H]=M,A[we]=V,H=we):(A[H]=ge,A[oe]=V,H=oe);else if(we<J&&0>r(M,V))A[H]=M,A[we]=V,H=we;else break e}}return R}function r(A,R){var V=A.sortIndex-R.sortIndex;return V!==0?V:A.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var R=n(u);R!==null;){if(R.callback===null)s(u);else if(R.startTime<=A)s(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=n(u)}}function S(A){if(g=!1,w(A),!p)if(n(c)!==null)p=!0,W(N);else{var R=n(u);R!==null&&I(S,R.startTime-A)}}function N(A,R){p=!1,g&&(g=!1,b(C),C=-1),m=!0;var V=f;try{for(w(R),h=n(c);h!==null&&(!(h.expirationTime>R)||A&&!O());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var J=H(h.expirationTime<=R);R=e.unstable_now(),typeof J=="function"?h.callback=J:h===n(c)&&s(c),w(R)}else s(c);h=n(c)}if(h!==null)var re=!0;else{var oe=n(u);oe!==null&&I(S,oe.startTime-R),re=!1}return re}finally{h=null,f=V,m=!1}}var j=!1,k=null,C=-1,P=5,T=-1;function O(){return!(e.unstable_now()-T<P)}function L(){if(k!==null){var A=e.unstable_now();T=A;var R=!0;try{R=k(!0,A)}finally{R?F():(j=!1,k=null)}}else j=!1}var F;if(typeof y=="function")F=function(){y(L)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,B=_.port2;_.port1.onmessage=L,F=function(){B.postMessage(null)}}else F=function(){v(L,0)};function W(A){k=A,j||(j=!0,F())}function I(A,R){C=v(function(){A(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,W(N))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var V=f;f=R;try{return A()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=f;f=A;try{return R()}finally{f=V}},e.unstable_scheduleCallback=function(A,R,V){var H=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?H+V:H):V=H,A){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,A={id:d++,callback:R,priorityLevel:A,startTime:V,expirationTime:J,sortIndex:-1},V>H?(A.sortIndex=V,t(u,A),n(c)===null&&A===n(u)&&(g?(b(C),C=-1):g=!0,I(S,V-H))):(A.sortIndex=J,t(c,A),p||m||(p=!0,W(N))),A},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(A){var R=f;return function(){var V=f;f=R;try{return A.apply(this,arguments)}finally{f=V}}}})(_1);P1.exports=_1;var ND=P1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD=x,dn=ND;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A1=new Set,Fo={};function pi(e,t){ea(e,t),ea(e+"Capture",t)}function ea(e,t){for(Fo[e]=t,e=0;e<t.length;e++)A1.add(t[e])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=Object.prototype.hasOwnProperty,CD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hy={},fy={};function kD(e){return Kf.call(fy,e)?!0:Kf.call(hy,e)?!1:CD.test(e)?fy[e]=!0:(hy[e]=!0,!1)}function ED(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DD(e,t,n,s){if(t===null||typeof t>"u"||ED(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qt(e,t,n,s,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){St[e]=new qt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];St[t]=new qt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){St[e]=new qt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){St[e]=new qt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){St[e]=new qt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){St[e]=new qt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){St[e]=new qt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){St[e]=new qt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){St[e]=new qt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wp=/[\-:]([a-z])/g;function qp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wp,qp);St[t]=new qt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wp,qp);St[t]=new qt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wp,qp);St[t]=new qt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){St[e]=new qt(e,1,!1,e.toLowerCase(),null,!1,!1)});St.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){St[e]=new qt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hp(e,t,n,s){var r=St.hasOwnProperty(t)?St[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DD(t,n,r,s)&&(n=null),s||r===null?kD(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Is=SD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hl=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),Xf=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Jf=Symbol.for("react.suspense"),Zf=Symbol.for("react.suspense_list"),Qp=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),I1=Symbol.for("react.offscreen"),my=Symbol.iterator;function Oa(e){return e===null||typeof e!="object"?null:(e=my&&e[my]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Object.assign,ph;function oo(e){if(ph===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ph=t&&t[1]||""}return`
`+ph+e}var gh=!1;function xh(e,t){if(!e||gh)return"";gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{gh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?oo(e):""}function TD(e){switch(e.tag){case 5:return oo(e.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return e=xh(e.type,!1),e;case 11:return e=xh(e.type.render,!1),e;case 1:return e=xh(e.type,!0),e;default:return""}}function em(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _i:return"Fragment";case Pi:return"Portal";case Xf:return"Profiler";case Gp:return"StrictMode";case Jf:return"Suspense";case Zf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R1:return(e.displayName||"Context")+".Consumer";case M1:return(e._context.displayName||"Context")+".Provider";case Yp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qp:return t=e.displayName||null,t!==null?t:em(e.type)||"Memo";case qs:t=e._payload,e=e._init;try{return em(e(t))}catch{}}return null}function PD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return em(t);case 8:return t===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function O1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _D(e){var t=O1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gl(e){e._valueTracker||(e._valueTracker=_D(e))}function L1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=O1(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function lu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tm(e,t){var n=t.checked;return Je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function py(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=br(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F1(e,t){t=t.checked,t!=null&&Hp(e,"checked",t,!1)}function nm(e,t){F1(e,t);var n=br(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sm(e,t.type,n):t.hasOwnProperty("defaultValue")&&sm(e,t.type,br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function gy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function sm(e,t,n){(t!=="number"||lu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var lo=Array.isArray;function Hi(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+br(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function rm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(lo(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:br(n)}}function $1(e,t){var n=br(t.value),s=br(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function yy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function B1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function im(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?B1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yl,z1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yl=Yl||document.createElement("div"),Yl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $o(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AD=["Webkit","ms","Moz","O"];Object.keys(vo).forEach(function(e){AD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vo[t]=vo[e]})});function V1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vo.hasOwnProperty(e)&&vo[e]?(""+t).trim():t+"px"}function U1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=V1(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var MD=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(e,t){if(t){if(MD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function om(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lm=null;function Kp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cm=null,Gi=null,Yi=null;function vy(e){if(e=Dl(e)){if(typeof cm!="function")throw Error(K(280));var t=e.stateNode;t&&(t=jd(t),cm(e.stateNode,e.type,t))}}function W1(e){Gi?Yi?Yi.push(e):Yi=[e]:Gi=e}function q1(){if(Gi){var e=Gi,t=Yi;if(Yi=Gi=null,vy(e),t)for(e=0;e<t.length;e++)vy(t[e])}}function H1(e,t){return e(t)}function G1(){}var yh=!1;function Y1(e,t,n){if(yh)return e(t,n);yh=!0;try{return H1(e,t,n)}finally{yh=!1,(Gi!==null||Yi!==null)&&(G1(),q1())}}function Bo(e,t){var n=e.stateNode;if(n===null)return null;var s=jd(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var um=!1;if(Ps)try{var La={};Object.defineProperty(La,"passive",{get:function(){um=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{um=!1}function RD(e,t,n,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var bo=!1,cu=null,uu=!1,dm=null,ID={onError:function(e){bo=!0,cu=e}};function OD(e,t,n,s,r,i,a,l,c){bo=!1,cu=null,RD.apply(ID,arguments)}function LD(e,t,n,s,r,i,a,l,c){if(OD.apply(this,arguments),bo){if(bo){var u=cu;bo=!1,cu=null}else throw Error(K(198));uu||(uu=!0,dm=u)}}function gi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Q1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function by(e){if(gi(e)!==e)throw Error(K(188))}function FD(e){var t=e.alternate;if(!t){if(t=gi(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return by(r),e;if(i===s)return by(r),t;i=i.sibling}throw Error(K(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==s)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function K1(e){return e=FD(e),e!==null?X1(e):null}function X1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=X1(e);if(t!==null)return t;e=e.sibling}return null}var J1=dn.unstable_scheduleCallback,wy=dn.unstable_cancelCallback,$D=dn.unstable_shouldYield,BD=dn.unstable_requestPaint,nt=dn.unstable_now,zD=dn.unstable_getCurrentPriorityLevel,Xp=dn.unstable_ImmediatePriority,Z1=dn.unstable_UserBlockingPriority,du=dn.unstable_NormalPriority,VD=dn.unstable_LowPriority,ej=dn.unstable_IdlePriority,yd=null,ns=null;function UD(e){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(yd,e,void 0,(e.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:HD,WD=Math.log,qD=Math.LN2;function HD(e){return e>>>=0,e===0?32:31-(WD(e)/qD|0)|0}var Ql=64,Kl=4194304;function co(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=co(l):(i&=a,i!==0&&(s=co(i)))}else a=n&~r,a!==0?s=co(a):i!==0&&(s=co(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Vn(t),r=1<<n,s|=e[n],t&=~r;return s}function GD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YD(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Vn(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=GD(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function hm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tj(){var e=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),e}function vh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vn(t),e[t]=n}function QD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Vn(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function Jp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Vn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var Oe=0;function nj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sj,Zp,rj,ij,aj,fm=!1,Xl=[],ar=null,or=null,lr=null,zo=new Map,Vo=new Map,Ys=[],KD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jy(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":zo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(t.pointerId)}}function Fa(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Dl(t),t!==null&&Zp(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function XD(e,t,n,s,r){switch(t){case"focusin":return ar=Fa(ar,e,t,n,s,r),!0;case"dragenter":return or=Fa(or,e,t,n,s,r),!0;case"mouseover":return lr=Fa(lr,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return zo.set(i,Fa(zo.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Vo.set(i,Fa(Vo.get(i)||null,e,t,n,s,r)),!0}return!1}function oj(e){var t=Qr(e.target);if(t!==null){var n=gi(t);if(n!==null){if(t=n.tag,t===13){if(t=Q1(n),t!==null){e.blockedOn=t,aj(e.priority,function(){rj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);lm=s,n.target.dispatchEvent(s),lm=null}else return t=Dl(n),t!==null&&Zp(t),e.blockedOn=n,!1;t.shift()}return!0}function Ny(e,t,n){Bc(e)&&n.delete(t)}function JD(){fm=!1,ar!==null&&Bc(ar)&&(ar=null),or!==null&&Bc(or)&&(or=null),lr!==null&&Bc(lr)&&(lr=null),zo.forEach(Ny),Vo.forEach(Ny)}function $a(e,t){e.blockedOn===t&&(e.blockedOn=null,fm||(fm=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,JD)))}function Uo(e){function t(r){return $a(r,e)}if(0<Xl.length){$a(Xl[0],e);for(var n=1;n<Xl.length;n++){var s=Xl[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ar!==null&&$a(ar,e),or!==null&&$a(or,e),lr!==null&&$a(lr,e),zo.forEach(t),Vo.forEach(t),n=0;n<Ys.length;n++)s=Ys[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ys.length&&(n=Ys[0],n.blockedOn===null);)oj(n),n.blockedOn===null&&Ys.shift()}var Qi=Is.ReactCurrentBatchConfig,fu=!0;function ZD(e,t,n,s){var r=Oe,i=Qi.transition;Qi.transition=null;try{Oe=1,eg(e,t,n,s)}finally{Oe=r,Qi.transition=i}}function eT(e,t,n,s){var r=Oe,i=Qi.transition;Qi.transition=null;try{Oe=4,eg(e,t,n,s)}finally{Oe=r,Qi.transition=i}}function eg(e,t,n,s){if(fu){var r=mm(e,t,n,s);if(r===null)Th(e,t,s,mu,n),jy(e,s);else if(XD(r,e,t,n,s))s.stopPropagation();else if(jy(e,s),t&4&&-1<KD.indexOf(e)){for(;r!==null;){var i=Dl(r);if(i!==null&&sj(i),i=mm(e,t,n,s),i===null&&Th(e,t,s,mu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Th(e,t,s,null,n)}}var mu=null;function mm(e,t,n,s){if(mu=null,e=Kp(s),e=Qr(e),e!==null)if(t=gi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Q1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mu=e,null}function lj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zD()){case Xp:return 1;case Z1:return 4;case du:case VD:return 16;case ej:return 536870912;default:return 16}default:return 16}}var Js=null,tg=null,zc=null;function cj(){if(zc)return zc;var e,t=tg,n=t.length,s,r="value"in Js?Js.value:Js.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(s=1;s<=a&&t[n-s]===r[i-s];s++);return zc=r.slice(e,1<s?1-s:void 0)}function Vc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Jl(){return!0}function Sy(){return!1}function mn(e){function t(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jl:Sy,this.isPropagationStopped=Sy,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jl)},persist:function(){},isPersistent:Jl}),t}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ng=mn(ya),El=Je({},ya,{view:0,detail:0}),tT=mn(El),bh,wh,Ba,vd=Je({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ba&&(Ba&&e.type==="mousemove"?(bh=e.screenX-Ba.screenX,wh=e.screenY-Ba.screenY):wh=bh=0,Ba=e),bh)},movementY:function(e){return"movementY"in e?e.movementY:wh}}),Cy=mn(vd),nT=Je({},vd,{dataTransfer:0}),sT=mn(nT),rT=Je({},El,{relatedTarget:0}),jh=mn(rT),iT=Je({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=mn(iT),oT=Je({},ya,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lT=mn(oT),cT=Je({},ya,{data:0}),ky=mn(cT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hT[e])?!!t[e]:!1}function sg(){return fT}var mT=Je({},El,{key:function(e){if(e.key){var t=uT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sg,charCode:function(e){return e.type==="keypress"?Vc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pT=mn(mT),gT=Je({},vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=mn(gT),xT=Je({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sg}),yT=mn(xT),vT=Je({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),bT=mn(vT),wT=Je({},vd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jT=mn(wT),NT=[9,13,27,32],rg=Ps&&"CompositionEvent"in window,wo=null;Ps&&"documentMode"in document&&(wo=document.documentMode);var ST=Ps&&"TextEvent"in window&&!wo,uj=Ps&&(!rg||wo&&8<wo&&11>=wo),Dy=" ",Ty=!1;function dj(e,t){switch(e){case"keyup":return NT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ai=!1;function CT(e,t){switch(e){case"compositionend":return hj(t);case"keypress":return t.which!==32?null:(Ty=!0,Dy);case"textInput":return e=t.data,e===Dy&&Ty?null:e;default:return null}}function kT(e,t){if(Ai)return e==="compositionend"||!rg&&dj(e,t)?(e=cj(),zc=tg=Js=null,Ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uj&&t.locale!=="ko"?null:t.data;default:return null}}var ET={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ET[e.type]:t==="textarea"}function fj(e,t,n,s){W1(s),t=pu(t,"onChange"),0<t.length&&(n=new ng("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var jo=null,Wo=null;function DT(e){Sj(e,0)}function bd(e){var t=Ii(e);if(L1(t))return e}function TT(e,t){if(e==="change")return t}var mj=!1;if(Ps){var Nh;if(Ps){var Sh="oninput"in document;if(!Sh){var _y=document.createElement("div");_y.setAttribute("oninput","return;"),Sh=typeof _y.oninput=="function"}Nh=Sh}else Nh=!1;mj=Nh&&(!document.documentMode||9<document.documentMode)}function Ay(){jo&&(jo.detachEvent("onpropertychange",pj),Wo=jo=null)}function pj(e){if(e.propertyName==="value"&&bd(Wo)){var t=[];fj(t,Wo,e,Kp(e)),Y1(DT,t)}}function PT(e,t,n){e==="focusin"?(Ay(),jo=t,Wo=n,jo.attachEvent("onpropertychange",pj)):e==="focusout"&&Ay()}function _T(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bd(Wo)}function AT(e,t){if(e==="click")return bd(t)}function MT(e,t){if(e==="input"||e==="change")return bd(t)}function RT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:RT;function qo(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Kf.call(t,r)||!qn(e[r],t[r]))return!1}return!0}function My(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ry(e,t){var n=My(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=My(n)}}function gj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xj(){for(var e=window,t=lu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=lu(e.document)}return t}function ig(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IT(e){var t=xj(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&gj(n.ownerDocument.documentElement,n)){if(s!==null&&ig(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=Ry(n,i);var a=Ry(n,s);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OT=Ps&&"documentMode"in document&&11>=document.documentMode,Mi=null,pm=null,No=null,gm=!1;function Iy(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gm||Mi==null||Mi!==lu(s)||(s=Mi,"selectionStart"in s&&ig(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),No&&qo(No,s)||(No=s,s=pu(pm,"onSelect"),0<s.length&&(t=new ng("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Mi)))}function Zl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ri={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},Ch={},yj={};Ps&&(yj=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function wd(e){if(Ch[e])return Ch[e];if(!Ri[e])return e;var t=Ri[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yj)return Ch[e]=t[n];return e}var vj=wd("animationend"),bj=wd("animationiteration"),wj=wd("animationstart"),jj=wd("transitionend"),Nj=new Map,Oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Nj.set(e,t),pi(t,[e])}for(var kh=0;kh<Oy.length;kh++){var Eh=Oy[kh],LT=Eh.toLowerCase(),FT=Eh[0].toUpperCase()+Eh.slice(1);Er(LT,"on"+FT)}Er(vj,"onAnimationEnd");Er(bj,"onAnimationIteration");Er(wj,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(jj,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function Ly(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,LD(s,t,void 0,e),e.currentTarget=null}function Sj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Ly(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Ly(r,l,u),i=c}}}if(uu)throw e=dm,uu=!1,dm=null,e}function Be(e,t){var n=t[wm];n===void 0&&(n=t[wm]=new Set);var s=e+"__bubble";n.has(s)||(Cj(t,e,2,!1),n.add(s))}function Dh(e,t,n){var s=0;t&&(s|=4),Cj(n,e,s,t)}var ec="_reactListening"+Math.random().toString(36).slice(2);function Ho(e){if(!e[ec]){e[ec]=!0,A1.forEach(function(n){n!=="selectionchange"&&($T.has(n)||Dh(n,!1,e),Dh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ec]||(t[ec]=!0,Dh("selectionchange",!1,t))}}function Cj(e,t,n,s){switch(lj(t)){case 1:var r=ZD;break;case 4:r=eT;break;default:r=eg}n=r.bind(null,t,n,e),r=void 0,!um||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Th(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Qr(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}Y1(function(){var u=i,d=Kp(n),h=[];e:{var f=Nj.get(e);if(f!==void 0){var m=ng,p=e;switch(e){case"keypress":if(Vc(n)===0)break e;case"keydown":case"keyup":m=pT;break;case"focusin":p="focus",m=jh;break;case"focusout":p="blur",m=jh;break;case"beforeblur":case"afterblur":m=jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Cy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=yT;break;case vj:case bj:case wj:m=aT;break;case jj:m=bT;break;case"scroll":m=tT;break;case"wheel":m=jT;break;case"copy":case"cut":case"paste":m=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ey}var g=(t&4)!==0,v=!g&&e==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Bo(y,b),S!=null&&g.push(Go(y,S,w)))),v)break;y=y.return}0<g.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==lm&&(p=n.relatedTarget||n.fromElement)&&(Qr(p)||p[_s]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Qr(p):null,p!==null&&(v=gi(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(g=Cy,S="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=Ey,S="onPointerLeave",b="onPointerEnter",y="pointer"),v=m==null?f:Ii(m),w=p==null?f:Ii(p),f=new g(S,y+"leave",m,n,d),f.target=v,f.relatedTarget=w,S=null,Qr(d)===u&&(g=new g(b,y+"enter",p,n,d),g.target=w,g.relatedTarget=v,S=g),v=S,m&&p)t:{for(g=m,b=p,y=0,w=g;w;w=Si(w))y++;for(w=0,S=b;S;S=Si(S))w++;for(;0<y-w;)g=Si(g),y--;for(;0<w-y;)b=Si(b),w--;for(;y--;){if(g===b||b!==null&&g===b.alternate)break t;g=Si(g),b=Si(b)}g=null}else g=null;m!==null&&Fy(h,f,m,g,!1),p!==null&&v!==null&&Fy(h,v,p,g,!0)}}e:{if(f=u?Ii(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=TT;else if(Py(f))if(mj)N=MT;else{N=_T;var j=PT}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=AT);if(N&&(N=N(e,u))){fj(h,N,n,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&sm(f,"number",f.value)}switch(j=u?Ii(u):window,e){case"focusin":(Py(j)||j.contentEditable==="true")&&(Mi=j,pm=u,No=null);break;case"focusout":No=pm=Mi=null;break;case"mousedown":gm=!0;break;case"contextmenu":case"mouseup":case"dragend":gm=!1,Iy(h,n,d);break;case"selectionchange":if(OT)break;case"keydown":case"keyup":Iy(h,n,d)}var k;if(rg)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ai?dj(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(uj&&n.locale!=="ko"&&(Ai||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ai&&(k=cj()):(Js=d,tg="value"in Js?Js.value:Js.textContent,Ai=!0)),j=pu(u,C),0<j.length&&(C=new ky(C,e,null,n,d),h.push({event:C,listeners:j}),k?C.data=k:(k=hj(n),k!==null&&(C.data=k)))),(k=ST?CT(e,n):kT(e,n))&&(u=pu(u,"onBeforeInput"),0<u.length&&(d=new ky("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=k))}Sj(h,t)})}function Go(e,t,n){return{instance:e,listener:t,currentTarget:n}}function pu(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Bo(e,n),i!=null&&s.unshift(Go(e,i,r)),i=Bo(e,t),i!=null&&s.push(Go(e,i,r))),e=e.return}return s}function Si(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fy(e,t,n,s,r){for(var i=t._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Bo(n,i),c!=null&&a.unshift(Go(n,c,l))):r||(c=Bo(n,i),c!=null&&a.push(Go(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var BT=/\r\n?/g,zT=/\u0000|\uFFFD/g;function $y(e){return(typeof e=="string"?e:""+e).replace(BT,`
`).replace(zT,"")}function tc(e,t,n){if(t=$y(t),$y(e)!==t&&n)throw Error(K(425))}function gu(){}var xm=null,ym=null;function vm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,VT=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,UT=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(e){return By.resolve(null).then(e).catch(WT)}:bm;function WT(e){setTimeout(function(){throw e})}function Ph(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),Uo(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Uo(t)}function cr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function zy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var va=Math.random().toString(36).slice(2),ts="__reactFiber$"+va,Yo="__reactProps$"+va,_s="__reactContainer$"+va,wm="__reactEvents$"+va,qT="__reactListeners$"+va,HT="__reactHandles$"+va;function Qr(e){var t=e[ts];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_s]||n[ts]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zy(e);e!==null;){if(n=e[ts])return n;e=zy(e)}return t}e=n,n=e.parentNode}return null}function Dl(e){return e=e[ts]||e[_s],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ii(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function jd(e){return e[Yo]||null}var jm=[],Oi=-1;function Dr(e){return{current:e}}function Ue(e){0>Oi||(e.current=jm[Oi],jm[Oi]=null,Oi--)}function Fe(e,t){Oi++,jm[Oi]=e.current,e.current=t}var wr={},It=Dr(wr),Kt=Dr(!1),oi=wr;function ta(e,t){var n=e.type.contextTypes;if(!n)return wr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Xt(e){return e=e.childContextTypes,e!=null}function xu(){Ue(Kt),Ue(It)}function Vy(e,t,n){if(It.current!==wr)throw Error(K(168));Fe(It,t),Fe(Kt,n)}function kj(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(K(108,PD(e)||"Unknown",r));return Je({},n,s)}function yu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,oi=It.current,Fe(It,e),Fe(Kt,Kt.current),!0}function Uy(e,t,n){var s=e.stateNode;if(!s)throw Error(K(169));n?(e=kj(e,t,oi),s.__reactInternalMemoizedMergedChildContext=e,Ue(Kt),Ue(It),Fe(It,e)):Ue(Kt),Fe(Kt,n)}var ys=null,Nd=!1,_h=!1;function Ej(e){ys===null?ys=[e]:ys.push(e)}function GT(e){Nd=!0,Ej(e)}function Tr(){if(!_h&&ys!==null){_h=!0;var e=0,t=Oe;try{var n=ys;for(Oe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}ys=null,Nd=!1}catch(r){throw ys!==null&&(ys=ys.slice(e+1)),J1(Xp,Tr),r}finally{Oe=t,_h=!1}}return null}var Li=[],Fi=0,vu=null,bu=0,bn=[],wn=0,li=null,bs=1,ws="";function $r(e,t){Li[Fi++]=bu,Li[Fi++]=vu,vu=e,bu=t}function Dj(e,t,n){bn[wn++]=bs,bn[wn++]=ws,bn[wn++]=li,li=e;var s=bs;e=ws;var r=32-Vn(s)-1;s&=~(1<<r),n+=1;var i=32-Vn(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,bs=1<<32-Vn(t)+r|n<<r|s,ws=i+e}else bs=1<<i|n<<r|s,ws=e}function ag(e){e.return!==null&&($r(e,1),Dj(e,1,0))}function og(e){for(;e===vu;)vu=Li[--Fi],Li[Fi]=null,bu=Li[--Fi],Li[Fi]=null;for(;e===li;)li=bn[--wn],bn[wn]=null,ws=bn[--wn],bn[wn]=null,bs=bn[--wn],bn[wn]=null}var on=null,rn=null,qe=!1,$n=null;function Tj(e,t){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Wy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,on=e,rn=cr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,on=e,rn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=li!==null?{id:bs,overflow:ws}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,on=e,rn=null,!0):!1;default:return!1}}function Nm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sm(e){if(qe){var t=rn;if(t){var n=t;if(!Wy(e,t)){if(Nm(e))throw Error(K(418));t=cr(n.nextSibling);var s=on;t&&Wy(e,t)?Tj(s,n):(e.flags=e.flags&-4097|2,qe=!1,on=e)}}else{if(Nm(e))throw Error(K(418));e.flags=e.flags&-4097|2,qe=!1,on=e}}}function qy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;on=e}function nc(e){if(e!==on)return!1;if(!qe)return qy(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vm(e.type,e.memoizedProps)),t&&(t=rn)){if(Nm(e))throw Pj(),Error(K(418));for(;t;)Tj(e,t),t=cr(t.nextSibling)}if(qy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rn=cr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rn=null}}else rn=on?cr(e.stateNode.nextSibling):null;return!0}function Pj(){for(var e=rn;e;)e=cr(e.nextSibling)}function na(){rn=on=null,qe=!1}function lg(e){$n===null?$n=[e]:$n.push(e)}var YT=Is.ReactCurrentBatchConfig;function za(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var s=n.stateNode}if(!s)throw Error(K(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function sc(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hy(e){var t=e._init;return t(e._payload)}function _j(e){function t(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function s(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function r(b,y){return b=fr(b,y),b.index=0,b.sibling=null,b}function i(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,w,S){return y===null||y.tag!==6?(y=Fh(w,b.mode,S),y.return=b,y):(y=r(y,w),y.return=b,y)}function c(b,y,w,S){var N=w.type;return N===_i?d(b,y,w.props.children,S,w.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qs&&Hy(N)===y.type)?(S=r(y,w.props),S.ref=za(b,y,w),S.return=b,S):(S=Qc(w.type,w.key,w.props,null,b.mode,S),S.ref=za(b,y,w),S.return=b,S)}function u(b,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=$h(w,b.mode,S),y.return=b,y):(y=r(y,w.children||[]),y.return=b,y)}function d(b,y,w,S,N){return y===null||y.tag!==7?(y=ni(w,b.mode,S,N),y.return=b,y):(y=r(y,w),y.return=b,y)}function h(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fh(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hl:return w=Qc(y.type,y.key,y.props,null,b.mode,w),w.ref=za(b,null,y),w.return=b,w;case Pi:return y=$h(y,b.mode,w),y.return=b,y;case qs:var S=y._init;return h(b,S(y._payload),w)}if(lo(y)||Oa(y))return y=ni(y,b.mode,w,null),y.return=b,y;sc(b,y)}return null}function f(b,y,w,S){var N=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(b,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Hl:return w.key===N?c(b,y,w,S):null;case Pi:return w.key===N?u(b,y,w,S):null;case qs:return N=w._init,f(b,y,N(w._payload),S)}if(lo(w)||Oa(w))return N!==null?null:d(b,y,w,S,null);sc(b,w)}return null}function m(b,y,w,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,l(y,b,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Hl:return b=b.get(S.key===null?w:S.key)||null,c(y,b,S,N);case Pi:return b=b.get(S.key===null?w:S.key)||null,u(y,b,S,N);case qs:var j=S._init;return m(b,y,w,j(S._payload),N)}if(lo(S)||Oa(S))return b=b.get(w)||null,d(y,b,S,N,null);sc(y,S)}return null}function p(b,y,w,S){for(var N=null,j=null,k=y,C=y=0,P=null;k!==null&&C<w.length;C++){k.index>C?(P=k,k=null):P=k.sibling;var T=f(b,k,w[C],S);if(T===null){k===null&&(k=P);break}e&&k&&T.alternate===null&&t(b,k),y=i(T,y,C),j===null?N=T:j.sibling=T,j=T,k=P}if(C===w.length)return n(b,k),qe&&$r(b,C),N;if(k===null){for(;C<w.length;C++)k=h(b,w[C],S),k!==null&&(y=i(k,y,C),j===null?N=k:j.sibling=k,j=k);return qe&&$r(b,C),N}for(k=s(b,k);C<w.length;C++)P=m(k,b,C,w[C],S),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),y=i(P,y,C),j===null?N=P:j.sibling=P,j=P);return e&&k.forEach(function(O){return t(b,O)}),qe&&$r(b,C),N}function g(b,y,w,S){var N=Oa(w);if(typeof N!="function")throw Error(K(150));if(w=N.call(w),w==null)throw Error(K(151));for(var j=N=null,k=y,C=y=0,P=null,T=w.next();k!==null&&!T.done;C++,T=w.next()){k.index>C?(P=k,k=null):P=k.sibling;var O=f(b,k,T.value,S);if(O===null){k===null&&(k=P);break}e&&k&&O.alternate===null&&t(b,k),y=i(O,y,C),j===null?N=O:j.sibling=O,j=O,k=P}if(T.done)return n(b,k),qe&&$r(b,C),N;if(k===null){for(;!T.done;C++,T=w.next())T=h(b,T.value,S),T!==null&&(y=i(T,y,C),j===null?N=T:j.sibling=T,j=T);return qe&&$r(b,C),N}for(k=s(b,k);!T.done;C++,T=w.next())T=m(k,b,C,T.value,S),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?C:T.key),y=i(T,y,C),j===null?N=T:j.sibling=T,j=T);return e&&k.forEach(function(L){return t(b,L)}),qe&&$r(b,C),N}function v(b,y,w,S){if(typeof w=="object"&&w!==null&&w.type===_i&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Hl:e:{for(var N=w.key,j=y;j!==null;){if(j.key===N){if(N=w.type,N===_i){if(j.tag===7){n(b,j.sibling),y=r(j,w.props.children),y.return=b,b=y;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qs&&Hy(N)===j.type){n(b,j.sibling),y=r(j,w.props),y.ref=za(b,j,w),y.return=b,b=y;break e}n(b,j);break}else t(b,j);j=j.sibling}w.type===_i?(y=ni(w.props.children,b.mode,S,w.key),y.return=b,b=y):(S=Qc(w.type,w.key,w.props,null,b.mode,S),S.ref=za(b,y,w),S.return=b,b=S)}return a(b);case Pi:e:{for(j=w.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),y=r(y,w.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=$h(w,b.mode,S),y.return=b,b=y}return a(b);case qs:return j=w._init,v(b,y,j(w._payload),S)}if(lo(w))return p(b,y,w,S);if(Oa(w))return g(b,y,w,S);sc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),y=r(y,w),y.return=b,b=y):(n(b,y),y=Fh(w,b.mode,S),y.return=b,b=y),a(b)):n(b,y)}return v}var sa=_j(!0),Aj=_j(!1),wu=Dr(null),ju=null,$i=null,cg=null;function ug(){cg=$i=ju=null}function dg(e){var t=wu.current;Ue(wu),e._currentValue=t}function Cm(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ki(e,t){ju=e,cg=$i=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qt=!0),e.firstContext=null)}function Tn(e){var t=e._currentValue;if(cg!==e)if(e={context:e,memoizedValue:t,next:null},$i===null){if(ju===null)throw Error(K(308));$i=e,ju.dependencies={lanes:0,firstContext:e}}else $i=$i.next=e;return t}var Kr=null;function hg(e){Kr===null?Kr=[e]:Kr.push(e)}function Mj(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,hg(t)):(n.next=r.next,r.next=n),t.interleaved=n,As(e,s)}function As(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hs=!1;function fg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ur(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Te&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,As(e,n)}return r=s.interleaved,r===null?(t.next=t,hg(s)):(t.next=r.next,r.next=t),s.interleaved=t,As(e,n)}function Uc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Jp(e,n)}}function Gy(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Nu(e,t,n,s){var r=e.updateQueue;Hs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Je({},h,f);break e;case 2:Hs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);ui|=a,e.lanes=a,e.memoizedState=h}}function Yy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(K(191,r));r.call(s)}}}var Tl={},ss=Dr(Tl),Qo=Dr(Tl),Ko=Dr(Tl);function Xr(e){if(e===Tl)throw Error(K(174));return e}function mg(e,t){switch(Fe(Ko,t),Fe(Qo,e),Fe(ss,Tl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:im(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=im(t,e)}Ue(ss),Fe(ss,t)}function ra(){Ue(ss),Ue(Qo),Ue(Ko)}function Ij(e){Xr(Ko.current);var t=Xr(ss.current),n=im(t,e.type);t!==n&&(Fe(Qo,e),Fe(ss,n))}function pg(e){Qo.current===e&&(Ue(ss),Ue(Qo))}var Ye=Dr(0);function Su(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ah=[];function gg(){for(var e=0;e<Ah.length;e++)Ah[e]._workInProgressVersionPrimary=null;Ah.length=0}var Wc=Is.ReactCurrentDispatcher,Mh=Is.ReactCurrentBatchConfig,ci=0,Xe=null,mt=null,xt=null,Cu=!1,So=!1,Xo=0,QT=0;function Ct(){throw Error(K(321))}function xg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qn(e[n],t[n]))return!1;return!0}function yg(e,t,n,s,r,i){if(ci=i,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wc.current=e===null||e.memoizedState===null?ZT:eP,e=n(s,r),So){i=0;do{if(So=!1,Xo=0,25<=i)throw Error(K(301));i+=1,xt=mt=null,t.updateQueue=null,Wc.current=tP,e=n(s,r)}while(So)}if(Wc.current=ku,t=mt!==null&&mt.next!==null,ci=0,xt=mt=Xe=null,Cu=!1,t)throw Error(K(300));return e}function vg(){var e=Xo!==0;return Xo=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Xe.memoizedState=xt=e:xt=xt.next=e,xt}function Pn(){if(mt===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=mt.next;var t=xt===null?Xe.memoizedState:xt.next;if(t!==null)xt=t,mt=e;else{if(e===null)throw Error(K(310));mt=e,e={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},xt===null?Xe.memoizedState=xt=e:xt=xt.next=e}return xt}function Jo(e,t){return typeof t=="function"?t(e):t}function Rh(e){var t=Pn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var s=mt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ci&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,Xe.lanes|=d,ui|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,qn(s,t.memoizedState)||(Qt=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Xe.lanes|=i,ui|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ih(e){var t=Pn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);qn(i,t.memoizedState)||(Qt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Oj(){}function Lj(e,t){var n=Xe,s=Pn(),r=t(),i=!qn(s.memoizedState,r);if(i&&(s.memoizedState=r,Qt=!0),s=s.queue,bg(Bj.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Zo(9,$j.bind(null,n,s,r,t),void 0,null),yt===null)throw Error(K(349));ci&30||Fj(n,t,r)}return r}function Fj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $j(e,t,n,s){t.value=n,t.getSnapshot=s,zj(t)&&Vj(e)}function Bj(e,t,n){return n(function(){zj(t)&&Vj(e)})}function zj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qn(e,n)}catch{return!0}}function Vj(e){var t=As(e,1);t!==null&&Un(t,e,1,-1)}function Qy(e){var t=Jn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e},t.queue=e,e=e.dispatch=JT.bind(null,Xe,e),[t.memoizedState,e]}function Zo(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Uj(){return Pn().memoizedState}function qc(e,t,n,s){var r=Jn();Xe.flags|=e,r.memoizedState=Zo(1|t,n,void 0,s===void 0?null:s)}function Sd(e,t,n,s){var r=Pn();s=s===void 0?null:s;var i=void 0;if(mt!==null){var a=mt.memoizedState;if(i=a.destroy,s!==null&&xg(s,a.deps)){r.memoizedState=Zo(t,n,i,s);return}}Xe.flags|=e,r.memoizedState=Zo(1|t,n,i,s)}function Ky(e,t){return qc(8390656,8,e,t)}function bg(e,t){return Sd(2048,8,e,t)}function Wj(e,t){return Sd(4,2,e,t)}function qj(e,t){return Sd(4,4,e,t)}function Hj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gj(e,t,n){return n=n!=null?n.concat([e]):null,Sd(4,4,Hj.bind(null,t,e),n)}function wg(){}function Yj(e,t){var n=Pn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&xg(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Qj(e,t){var n=Pn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&xg(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Kj(e,t,n){return ci&21?(qn(n,t)||(n=tj(),Xe.lanes|=n,ui|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qt=!0),e.memoizedState=n)}function KT(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var s=Mh.transition;Mh.transition={};try{e(!1),t()}finally{Oe=n,Mh.transition=s}}function Xj(){return Pn().memoizedState}function XT(e,t,n){var s=hr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Jj(e))Zj(t,n);else if(n=Mj(e,t,n,s),n!==null){var r=Vt();Un(n,e,s,r),eN(n,t,s)}}function JT(e,t,n){var s=hr(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jj(e))Zj(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,qn(l,a)){var c=t.interleaved;c===null?(r.next=r,hg(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Mj(e,t,r,s),n!==null&&(r=Vt(),Un(n,e,s,r),eN(n,t,s))}}function Jj(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function Zj(e,t){So=Cu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eN(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Jp(e,n)}}var ku={readContext:Tn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},ZT={readContext:Tn,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:Tn,useEffect:Ky,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qc(4194308,4,Hj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qc(4194308,4,e,t)},useInsertionEffect:function(e,t){return qc(4,2,e,t)},useMemo:function(e,t){var n=Jn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Jn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=XT.bind(null,Xe,e),[s.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:Qy,useDebugValue:wg,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=Qy(!1),t=e[0];return e=KT.bind(null,e[1]),Jn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Xe,r=Jn();if(qe){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),yt===null)throw Error(K(349));ci&30||Fj(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Ky(Bj.bind(null,s,i,e),[e]),s.flags|=2048,Zo(9,$j.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Jn(),t=yt.identifierPrefix;if(qe){var n=ws,s=bs;n=(s&~(1<<32-Vn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Xo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=QT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eP={readContext:Tn,useCallback:Yj,useContext:Tn,useEffect:bg,useImperativeHandle:Gj,useInsertionEffect:Wj,useLayoutEffect:qj,useMemo:Qj,useReducer:Rh,useRef:Uj,useState:function(){return Rh(Jo)},useDebugValue:wg,useDeferredValue:function(e){var t=Pn();return Kj(t,mt.memoizedState,e)},useTransition:function(){var e=Rh(Jo)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:Oj,useSyncExternalStore:Lj,useId:Xj,unstable_isNewReconciler:!1},tP={readContext:Tn,useCallback:Yj,useContext:Tn,useEffect:bg,useImperativeHandle:Gj,useInsertionEffect:Wj,useLayoutEffect:qj,useMemo:Qj,useReducer:Ih,useRef:Uj,useState:function(){return Ih(Jo)},useDebugValue:wg,useDeferredValue:function(e){var t=Pn();return mt===null?t.memoizedState=e:Kj(t,mt.memoizedState,e)},useTransition:function(){var e=Ih(Jo)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:Oj,useSyncExternalStore:Lj,useId:Xj,unstable_isNewReconciler:!1};function Ln(e,t){if(e&&e.defaultProps){t=Je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function km(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Cd={isMounted:function(e){return(e=e._reactInternals)?gi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Vt(),r=hr(e),i=Cs(s,r);i.payload=t,n!=null&&(i.callback=n),t=ur(e,i,r),t!==null&&(Un(t,e,r,s),Uc(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Vt(),r=hr(e),i=Cs(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ur(e,i,r),t!==null&&(Un(t,e,r,s),Uc(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vt(),s=hr(e),r=Cs(n,s);r.tag=2,t!=null&&(r.callback=t),t=ur(e,r,s),t!==null&&(Un(t,e,s,n),Uc(t,e,s))}};function Xy(e,t,n,s,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!qo(n,s)||!qo(r,i):!0}function tN(e,t,n){var s=!1,r=wr,i=t.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(r=Xt(t)?oi:It.current,s=t.contextTypes,i=(s=s!=null)?ta(e,r):wr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cd,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function Jy(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Cd.enqueueReplaceState(t,t.state,null)}function Em(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},fg(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Tn(i):(i=Xt(t)?oi:It.current,r.context=ta(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(km(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Cd.enqueueReplaceState(r,r.state,null),Nu(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function ia(e,t){try{var n="",s=t;do n+=TD(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Oh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var nP=typeof WeakMap=="function"?WeakMap:Map;function nN(e,t,n){n=Cs(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Du||(Du=!0,Fm=s),Dm(e,t)},n}function sN(e,t,n){n=Cs(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){Dm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Dm(e,t),typeof s!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Zy(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new nP;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=gP.bind(null,e,t,n),t.then(e,e))}function e0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function t0(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cs(-1,1),t.tag=2,ur(n,t,1))),n.lanes|=1),e)}var sP=Is.ReactCurrentOwner,Qt=!1;function Bt(e,t,n,s){t.child=e===null?Aj(t,null,n,s):sa(t,e.child,n,s)}function n0(e,t,n,s,r){n=n.render;var i=t.ref;return Ki(t,r),s=yg(e,t,n,s,i,r),n=vg(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ms(e,t,r)):(qe&&n&&ag(t),t.flags|=1,Bt(e,t,s,r),t.child)}function s0(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!Tg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,rN(e,t,i,s,r)):(e=Qc(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(a,s)&&e.ref===t.ref)return Ms(e,t,r)}return t.flags|=1,e=fr(i,s),e.ref=t.ref,e.return=t,t.child=e}function rN(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(qo(i,s)&&e.ref===t.ref)if(Qt=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(Qt=!0);else return t.lanes=e.lanes,Ms(e,t,r)}return Tm(e,t,n,s,r)}function iN(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(zi,tn),tn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(zi,tn),tn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Fe(zi,tn),tn|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Fe(zi,tn),tn|=s;return Bt(e,t,r,n),t.child}function aN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tm(e,t,n,s,r){var i=Xt(n)?oi:It.current;return i=ta(t,i),Ki(t,r),n=yg(e,t,n,s,i,r),s=vg(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ms(e,t,r)):(qe&&s&&ag(t),t.flags|=1,Bt(e,t,n,r),t.child)}function r0(e,t,n,s,r){if(Xt(n)){var i=!0;yu(t)}else i=!1;if(Ki(t,r),t.stateNode===null)Hc(e,t),tN(t,n,s),Em(t,n,s,r),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Tn(u):(u=Xt(n)?oi:It.current,u=ta(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&Jy(t,a,s,u),Hs=!1;var f=t.memoizedState;a.state=f,Nu(t,s,a,r),c=t.memoizedState,l!==s||f!==c||Kt.current||Hs?(typeof d=="function"&&(km(t,n,d,s),c=t.memoizedState),(l=Hs||Xy(t,n,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Rj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ln(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Xt(n)?oi:It.current,c=ta(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Jy(t,a,s,c),Hs=!1,f=t.memoizedState,a.state=f,Nu(t,s,a,r);var p=t.memoizedState;l!==h||f!==p||Kt.current||Hs?(typeof m=="function"&&(km(t,n,m,s),p=t.memoizedState),(u=Hs||Xy(t,n,u,s,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Pm(e,t,n,s,i,r)}function Pm(e,t,n,s,r,i){aN(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return r&&Uy(t,n,!1),Ms(e,t,i);s=t.stateNode,sP.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=sa(t,e.child,null,i),t.child=sa(t,null,l,i)):Bt(e,t,l,i),t.memoizedState=s.state,r&&Uy(t,n,!0),t.child}function oN(e){var t=e.stateNode;t.pendingContext?Vy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vy(e,t.context,!1),mg(e,t.containerInfo)}function i0(e,t,n,s,r){return na(),lg(r),t.flags|=256,Bt(e,t,n,s),t.child}var _m={dehydrated:null,treeContext:null,retryLane:0};function Am(e){return{baseLanes:e,cachePool:null,transitions:null}}function lN(e,t,n){var s=t.pendingProps,r=Ye.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Fe(Ye,r&1),e===null)return Sm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Dd(a,s,0,null),e=ni(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Am(n),t.memoizedState=_m,e):jg(t,a));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return rP(e,t,a,s,l,r,n);if(i){i=s.fallback,a=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=fr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=fr(l,i):(i=ni(i,a,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?Am(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=_m,s}return i=e.child,e=i.sibling,s=fr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function jg(e,t){return t=Dd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rc(e,t,n,s){return s!==null&&lg(s),sa(t,e.child,null,n),e=jg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rP(e,t,n,s,r,i,a){if(n)return t.flags&256?(t.flags&=-257,s=Oh(Error(K(422))),rc(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Dd({mode:"visible",children:s.children},r,0,null),i=ni(i,r,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&sa(t,e.child,null,a),t.child.memoizedState=Am(a),t.memoizedState=_m,i);if(!(t.mode&1))return rc(e,t,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(K(419)),s=Oh(i,s,void 0),rc(e,t,a,s)}if(l=(a&e.childLanes)!==0,Qt||l){if(s=yt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,As(e,r),Un(s,e,r,-1))}return Dg(),s=Oh(Error(K(421))),rc(e,t,a,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=xP.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,rn=cr(r.nextSibling),on=t,qe=!0,$n=null,e!==null&&(bn[wn++]=bs,bn[wn++]=ws,bn[wn++]=li,bs=e.id,ws=e.overflow,li=t),t=jg(t,s.children),t.flags|=4096,t)}function a0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Cm(e.return,t,n)}function Lh(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function cN(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Bt(e,t,s.children,n),s=Ye.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&a0(e,n,t);else if(e.tag===19)a0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Fe(Ye,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Su(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Lh(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Su(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Lh(t,!0,n,null,i);break;case"together":Lh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ms(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ui|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=fr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iP(e,t,n){switch(t.tag){case 3:oN(t),na();break;case 5:Ij(t);break;case 1:Xt(t.type)&&yu(t);break;case 4:mg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Fe(wu,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Fe(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?lN(e,t,n):(Fe(Ye,Ye.current&1),e=Ms(e,t,n),e!==null?e.sibling:null);Fe(Ye,Ye.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return cN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Fe(Ye,Ye.current),s)break;return null;case 22:case 23:return t.lanes=0,iN(e,t,n)}return Ms(e,t,n)}var uN,Mm,dN,hN;uN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mm=function(){};dN=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Xr(ss.current);var i=null;switch(n){case"input":r=tm(e,r),s=tm(e,s),i=[];break;case"select":r=Je({},r,{value:void 0}),s=Je({},s,{value:void 0}),i=[];break;case"textarea":r=rm(e,r),s=rm(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=gu)}am(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Fo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Fo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};hN=function(e,t,n,s){n!==s&&(t.flags|=4)};function Va(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function aP(e,t,n){var s=t.pendingProps;switch(og(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return Xt(t.type)&&xu(),kt(t),null;case 3:return s=t.stateNode,ra(),Ue(Kt),Ue(It),gg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(nc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$n!==null&&(zm($n),$n=null))),Mm(e,t),kt(t),null;case 5:pg(t);var r=Xr(Ko.current);if(n=t.type,e!==null&&t.stateNode!=null)dN(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(K(166));return kt(t),null}if(e=Xr(ss.current),nc(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[ts]=t,s[Yo]=i,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(r=0;r<uo.length;r++)Be(uo[r],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":py(s,i),Be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Be("invalid",s);break;case"textarea":xy(s,i),Be("invalid",s)}am(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&tc(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&tc(s.textContent,l,e),r=["children",""+l]):Fo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Be("scroll",s)}switch(n){case"input":Gl(s),gy(s,i,!0);break;case"textarea":Gl(s),yy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=gu)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=B1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=a.createElement(n,{is:s.is}):(e=a.createElement(n),n==="select"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,n),e[ts]=t,e[Yo]=s,uN(e,t,!1,!1),t.stateNode=e;e:{switch(a=om(n,s),n){case"dialog":Be("cancel",e),Be("close",e),r=s;break;case"iframe":case"object":case"embed":Be("load",e),r=s;break;case"video":case"audio":for(r=0;r<uo.length;r++)Be(uo[r],e);r=s;break;case"source":Be("error",e),r=s;break;case"img":case"image":case"link":Be("error",e),Be("load",e),r=s;break;case"details":Be("toggle",e),r=s;break;case"input":py(e,s),r=tm(e,s),Be("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=Je({},s,{value:void 0}),Be("invalid",e);break;case"textarea":xy(e,s),r=rm(e,s),Be("invalid",e);break;default:r=s}am(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?U1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&z1(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$o(e,c):typeof c=="number"&&$o(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",e):c!=null&&Hp(e,i,c,a))}switch(n){case"input":Gl(e),gy(e,s,!1);break;case"textarea":Gl(e),yy(e);break;case"option":s.value!=null&&e.setAttribute("value",""+br(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Hi(e,!!s.multiple,i,!1):s.defaultValue!=null&&Hi(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=gu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)hN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(K(166));if(n=Xr(Ko.current),Xr(ss.current),nc(t)){if(s=t.stateNode,n=t.memoizedProps,s[ts]=t,(i=s.nodeValue!==n)&&(e=on,e!==null))switch(e.tag){case 3:tc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tc(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ts]=t,t.stateNode=s}return kt(t),null;case 13:if(Ue(Ye),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&rn!==null&&t.mode&1&&!(t.flags&128))Pj(),na(),t.flags|=98560,i=!1;else if(i=nc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[ts]=t}else na(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),i=!1}else $n!==null&&(zm($n),$n=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?pt===0&&(pt=3):Dg())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return ra(),Mm(e,t),e===null&&Ho(t.stateNode.containerInfo),kt(t),null;case 10:return dg(t.type._context),kt(t),null;case 17:return Xt(t.type)&&xu(),kt(t),null;case 19:if(Ue(Ye),i=t.memoizedState,i===null)return kt(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)Va(i,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Su(e),a!==null){for(t.flags|=128,Va(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Ye,Ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&nt()>aa&&(t.flags|=128,s=!0,Va(i,!1),t.lanes=4194304)}else{if(!s)if(e=Su(a),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Va(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!qe)return kt(t),null}else 2*nt()-i.renderingStartTime>aa&&n!==1073741824&&(t.flags|=128,s=!0,Va(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nt(),t.sibling=null,n=Ye.current,Fe(Ye,s?n&1|2:n&1),t):(kt(t),null);case 22:case 23:return Eg(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?tn&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function oP(e,t){switch(og(t),t.tag){case 1:return Xt(t.type)&&xu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(),Ue(Kt),Ue(It),gg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pg(t),null;case 13:if(Ue(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));na()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ye),null;case 4:return ra(),null;case 10:return dg(t.type._context),null;case 22:case 23:return Eg(),null;case 24:return null;default:return null}}var ic=!1,Pt=!1,lP=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Bi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){et(e,t,s)}else n.current=null}function Rm(e,t,n){try{n()}catch(s){et(e,t,s)}}var o0=!1;function cP(e,t){if(xm=fu,e=xj(),ig(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(l=a+r),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===i&&++d===s&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ym={focusedElem:e,selectionRange:n},fu=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ln(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(S){et(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return p=o0,o0=!1,p}function Co(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&Rm(t,n,i)}r=r.next}while(r!==s)}}function kd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Im(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function fN(e){var t=e.alternate;t!==null&&(e.alternate=null,fN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ts],delete t[Yo],delete t[wm],delete t[qT],delete t[HT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mN(e){return e.tag===5||e.tag===3||e.tag===4}function l0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Om(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=gu));else if(s!==4&&(e=e.child,e!==null))for(Om(e,t,n),e=e.sibling;e!==null;)Om(e,t,n),e=e.sibling}function Lm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Lm(e,t,n),e=e.sibling;e!==null;)Lm(e,t,n),e=e.sibling}var wt=null,Fn=!1;function Fs(e,t,n){for(n=n.child;n!==null;)pN(e,t,n),n=n.sibling}function pN(e,t,n){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(yd,n)}catch{}switch(n.tag){case 5:Pt||Bi(n,t);case 6:var s=wt,r=Fn;wt=null,Fs(e,t,n),wt=s,Fn=r,wt!==null&&(Fn?(e=wt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Fn?(e=wt,n=n.stateNode,e.nodeType===8?Ph(e.parentNode,n):e.nodeType===1&&Ph(e,n),Uo(e)):Ph(wt,n.stateNode));break;case 4:s=wt,r=Fn,wt=n.stateNode.containerInfo,Fn=!0,Fs(e,t,n),wt=s,Fn=r;break;case 0:case 11:case 14:case 15:if(!Pt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Rm(n,t,a),r=r.next}while(r!==s)}Fs(e,t,n);break;case 1:if(!Pt&&(Bi(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){et(n,t,l)}Fs(e,t,n);break;case 21:Fs(e,t,n);break;case 22:n.mode&1?(Pt=(s=Pt)||n.memoizedState!==null,Fs(e,t,n),Pt=s):Fs(e,t,n);break;default:Fs(e,t,n)}}function c0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lP),t.forEach(function(s){var r=yP.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function On(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Fn=!1;break e;case 3:wt=l.stateNode.containerInfo,Fn=!0;break e;case 4:wt=l.stateNode.containerInfo,Fn=!0;break e}l=l.return}if(wt===null)throw Error(K(160));pN(i,a,r),wt=null,Fn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){et(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gN(t,e),t=t.sibling}function gN(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(On(t,e),Qn(e),s&4){try{Co(3,e,e.return),kd(3,e)}catch(g){et(e,e.return,g)}try{Co(5,e,e.return)}catch(g){et(e,e.return,g)}}break;case 1:On(t,e),Qn(e),s&512&&n!==null&&Bi(n,n.return);break;case 5:if(On(t,e),Qn(e),s&512&&n!==null&&Bi(n,n.return),e.flags&32){var r=e.stateNode;try{$o(r,"")}catch(g){et(e,e.return,g)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&F1(r,i),om(l,a);var u=om(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?U1(r,h):d==="dangerouslySetInnerHTML"?z1(r,h):d==="children"?$o(r,h):Hp(r,d,h,u)}switch(l){case"input":nm(r,i);break;case"textarea":$1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Hi(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Hi(r,!!i.multiple,i.defaultValue,!0):Hi(r,!!i.multiple,i.multiple?[]:"",!1))}r[Yo]=i}catch(g){et(e,e.return,g)}}break;case 6:if(On(t,e),Qn(e),s&4){if(e.stateNode===null)throw Error(K(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){et(e,e.return,g)}}break;case 3:if(On(t,e),Qn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Uo(t.containerInfo)}catch(g){et(e,e.return,g)}break;case 4:On(t,e),Qn(e);break;case 13:On(t,e),Qn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Cg=nt())),s&4&&c0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Pt=(u=Pt)||d,On(t,e),Pt=u):On(t,e),Qn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ae=e,d=e.child;d!==null;){for(h=ae=d;ae!==null;){switch(f=ae,m=f.child,f.tag){case 0:case 11:case 14:case 15:Co(4,f,f.return);break;case 1:Bi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){et(s,n,g)}}break;case 5:Bi(f,f.return);break;case 22:if(f.memoizedState!==null){d0(h);continue}}m!==null?(m.return=f,ae=m):d0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=V1("display",a))}catch(g){et(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){et(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:On(t,e),Qn(e),s&4&&c0(e);break;case 21:break;default:On(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mN(n)){var s=n;break e}n=n.return}throw Error(K(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&($o(r,""),s.flags&=-33);var i=l0(e);Lm(e,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=l0(e);Om(e,l,a);break;default:throw Error(K(161))}}catch(c){et(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uP(e,t,n){ae=e,xN(e)}function xN(e,t,n){for(var s=(e.mode&1)!==0;ae!==null;){var r=ae,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||ic;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Pt;l=ic;var u=Pt;if(ic=a,(Pt=c)&&!u)for(ae=r;ae!==null;)a=ae,c=a.child,a.tag===22&&a.memoizedState!==null?h0(r):c!==null?(c.return=a,ae=c):h0(r);for(;i!==null;)ae=i,xN(i),i=i.sibling;ae=r,ic=l,Pt=u}u0(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ae=i):u0(e)}}function u0(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||kd(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Pt)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Ln(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Yy(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Yy(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Uo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Pt||t.flags&512&&Im(t)}catch(f){et(t,t.return,f)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function d0(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function h0(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{kd(4,t)}catch(c){et(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){et(t,r,c)}}var i=t.return;try{Im(t)}catch(c){et(t,i,c)}break;case 5:var a=t.return;try{Im(t)}catch(c){et(t,a,c)}}}catch(c){et(t,t.return,c)}if(t===e){ae=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ae=l;break}ae=t.return}}var dP=Math.ceil,Eu=Is.ReactCurrentDispatcher,Ng=Is.ReactCurrentOwner,En=Is.ReactCurrentBatchConfig,Te=0,yt=null,lt=null,Nt=0,tn=0,zi=Dr(0),pt=0,el=null,ui=0,Ed=0,Sg=0,ko=null,Gt=null,Cg=0,aa=1/0,gs=null,Du=!1,Fm=null,dr=null,ac=!1,Zs=null,Tu=0,Eo=0,$m=null,Gc=-1,Yc=0;function Vt(){return Te&6?nt():Gc!==-1?Gc:Gc=nt()}function hr(e){return e.mode&1?Te&2&&Nt!==0?Nt&-Nt:YT.transition!==null?(Yc===0&&(Yc=tj()),Yc):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:lj(e.type)),e):1}function Un(e,t,n,s){if(50<Eo)throw Eo=0,$m=null,Error(K(185));kl(e,n,s),(!(Te&2)||e!==yt)&&(e===yt&&(!(Te&2)&&(Ed|=n),pt===4&&Qs(e,Nt)),Jt(e,s),n===1&&Te===0&&!(t.mode&1)&&(aa=nt()+500,Nd&&Tr()))}function Jt(e,t){var n=e.callbackNode;YD(e,t);var s=hu(e,e===yt?Nt:0);if(s===0)n!==null&&wy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&wy(n),t===1)e.tag===0?GT(f0.bind(null,e)):Ej(f0.bind(null,e)),UT(function(){!(Te&6)&&Tr()}),n=null;else{switch(nj(s)){case 1:n=Xp;break;case 4:n=Z1;break;case 16:n=du;break;case 536870912:n=ej;break;default:n=du}n=CN(n,yN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yN(e,t){if(Gc=-1,Yc=0,Te&6)throw Error(K(327));var n=e.callbackNode;if(Xi()&&e.callbackNode!==n)return null;var s=hu(e,e===yt?Nt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Pu(e,s);else{t=s;var r=Te;Te|=2;var i=bN();(yt!==e||Nt!==t)&&(gs=null,aa=nt()+500,ti(e,t));do try{mP();break}catch(l){vN(e,l)}while(!0);ug(),Eu.current=i,Te=r,lt!==null?t=0:(yt=null,Nt=0,t=pt)}if(t!==0){if(t===2&&(r=hm(e),r!==0&&(s=r,t=Bm(e,r))),t===1)throw n=el,ti(e,0),Qs(e,s),Jt(e,nt()),n;if(t===6)Qs(e,s);else{if(r=e.current.alternate,!(s&30)&&!hP(r)&&(t=Pu(e,s),t===2&&(i=hm(e),i!==0&&(s=i,t=Bm(e,i))),t===1))throw n=el,ti(e,0),Qs(e,s),Jt(e,nt()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(K(345));case 2:Br(e,Gt,gs);break;case 3:if(Qs(e,s),(s&130023424)===s&&(t=Cg+500-nt(),10<t)){if(hu(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Vt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=bm(Br.bind(null,e,Gt,gs),t);break}Br(e,Gt,gs);break;case 4:if(Qs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var a=31-Vn(s);i=1<<a,a=t[a],a>r&&(r=a),s&=~i}if(s=r,s=nt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*dP(s/1960))-s,10<s){e.timeoutHandle=bm(Br.bind(null,e,Gt,gs),s);break}Br(e,Gt,gs);break;case 5:Br(e,Gt,gs);break;default:throw Error(K(329))}}}return Jt(e,nt()),e.callbackNode===n?yN.bind(null,e):null}function Bm(e,t){var n=ko;return e.current.memoizedState.isDehydrated&&(ti(e,t).flags|=256),e=Pu(e,t),e!==2&&(t=Gt,Gt=n,t!==null&&zm(t)),e}function zm(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function hP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!qn(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qs(e,t){for(t&=~Sg,t&=~Ed,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),s=1<<n;e[n]=-1,t&=~s}}function f0(e){if(Te&6)throw Error(K(327));Xi();var t=hu(e,0);if(!(t&1))return Jt(e,nt()),null;var n=Pu(e,t);if(e.tag!==0&&n===2){var s=hm(e);s!==0&&(t=s,n=Bm(e,s))}if(n===1)throw n=el,ti(e,0),Qs(e,t),Jt(e,nt()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,Gt,gs),Jt(e,nt()),null}function kg(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(aa=nt()+500,Nd&&Tr())}}function di(e){Zs!==null&&Zs.tag===0&&!(Te&6)&&Xi();var t=Te;Te|=1;var n=En.transition,s=Oe;try{if(En.transition=null,Oe=1,e)return e()}finally{Oe=s,En.transition=n,Te=t,!(Te&6)&&Tr()}}function Eg(){tn=zi.current,Ue(zi)}function ti(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,VT(n)),lt!==null)for(n=lt.return;n!==null;){var s=n;switch(og(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&xu();break;case 3:ra(),Ue(Kt),Ue(It),gg();break;case 5:pg(s);break;case 4:ra();break;case 13:Ue(Ye);break;case 19:Ue(Ye);break;case 10:dg(s.type._context);break;case 22:case 23:Eg()}n=n.return}if(yt=e,lt=e=fr(e.current,null),Nt=tn=t,pt=0,el=null,Sg=Ed=ui=0,Gt=ko=null,Kr!==null){for(t=0;t<Kr.length;t++)if(n=Kr[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}Kr=null}return e}function vN(e,t){do{var n=lt;try{if(ug(),Wc.current=ku,Cu){for(var s=Xe.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Cu=!1}if(ci=0,xt=mt=Xe=null,So=!1,Xo=0,Ng.current=null,n===null||n.return===null){pt=1,el=t,lt=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=e0(a);if(m!==null){m.flags&=-257,t0(m,a,l,i,t),m.mode&1&&Zy(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){Zy(i,u,t),Dg();break e}c=Error(K(426))}}else if(qe&&l.mode&1){var v=e0(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),t0(v,a,l,i,t),lg(ia(c,l));break e}}i=c=ia(c,l),pt!==4&&(pt=2),ko===null?ko=[i]:ko.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=nN(i,c,t);Gy(i,b);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(dr===null||!dr.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=sN(i,l,t);Gy(i,S);break e}}i=i.return}while(i!==null)}jN(n)}catch(N){t=N,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function bN(){var e=Eu.current;return Eu.current=ku,e===null?ku:e}function Dg(){(pt===0||pt===3||pt===2)&&(pt=4),yt===null||!(ui&268435455)&&!(Ed&268435455)||Qs(yt,Nt)}function Pu(e,t){var n=Te;Te|=2;var s=bN();(yt!==e||Nt!==t)&&(gs=null,ti(e,t));do try{fP();break}catch(r){vN(e,r)}while(!0);if(ug(),Te=n,Eu.current=s,lt!==null)throw Error(K(261));return yt=null,Nt=0,pt}function fP(){for(;lt!==null;)wN(lt)}function mP(){for(;lt!==null&&!$D();)wN(lt)}function wN(e){var t=SN(e.alternate,e,tn);e.memoizedProps=e.pendingProps,t===null?jN(e):lt=t,Ng.current=null}function jN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=oP(n,t),n!==null){n.flags&=32767,lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,lt=null;return}}else if(n=aP(n,t,tn),n!==null){lt=n;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);pt===0&&(pt=5)}function Br(e,t,n){var s=Oe,r=En.transition;try{En.transition=null,Oe=1,pP(e,t,n,s)}finally{En.transition=r,Oe=s}return null}function pP(e,t,n,s){do Xi();while(Zs!==null);if(Te&6)throw Error(K(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(QD(e,i),e===yt&&(lt=yt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ac||(ac=!0,CN(du,function(){return Xi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=En.transition,En.transition=null;var a=Oe;Oe=1;var l=Te;Te|=4,Ng.current=null,cP(e,n),gN(n,e),IT(ym),fu=!!xm,ym=xm=null,e.current=n,uP(n),BD(),Te=l,Oe=a,En.transition=i}else e.current=n;if(ac&&(ac=!1,Zs=e,Tu=r),i=e.pendingLanes,i===0&&(dr=null),UD(n.stateNode),Jt(e,nt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Du)throw Du=!1,e=Fm,Fm=null,e;return Tu&1&&e.tag!==0&&Xi(),i=e.pendingLanes,i&1?e===$m?Eo++:(Eo=0,$m=e):Eo=0,Tr(),null}function Xi(){if(Zs!==null){var e=nj(Tu),t=En.transition,n=Oe;try{if(En.transition=null,Oe=16>e?16:e,Zs===null)var s=!1;else{if(e=Zs,Zs=null,Tu=0,Te&6)throw Error(K(331));var r=Te;for(Te|=4,ae=e.current;ae!==null;){var i=ae,a=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ae=u;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:Co(8,d,i)}var h=d.child;if(h!==null)h.return=d,ae=h;else for(;ae!==null;){d=ae;var f=d.sibling,m=d.return;if(fN(d),d===u){ae=null;break}if(f!==null){f.return=m,ae=f;break}ae=m}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ae=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ae=a;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Co(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ae=b;break e}ae=i.return}}var y=e.current;for(ae=y;ae!==null;){a=ae;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,ae=w;else e:for(a=y;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kd(9,l)}}catch(N){et(l,l.return,N)}if(l===a){ae=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ae=S;break e}ae=l.return}}if(Te=r,Tr(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(yd,e)}catch{}s=!0}return s}finally{Oe=n,En.transition=t}}return!1}function m0(e,t,n){t=ia(n,t),t=nN(e,t,1),e=ur(e,t,1),t=Vt(),e!==null&&(kl(e,1,t),Jt(e,t))}function et(e,t,n){if(e.tag===3)m0(e,e,n);else for(;t!==null;){if(t.tag===3){m0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(dr===null||!dr.has(s))){e=ia(n,e),e=sN(t,e,1),t=ur(t,e,1),e=Vt(),t!==null&&(kl(t,1,e),Jt(t,e));break}}t=t.return}}function gP(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Vt(),e.pingedLanes|=e.suspendedLanes&n,yt===e&&(Nt&n)===n&&(pt===4||pt===3&&(Nt&130023424)===Nt&&500>nt()-Cg?ti(e,0):Sg|=n),Jt(e,t)}function NN(e,t){t===0&&(e.mode&1?(t=Kl,Kl<<=1,!(Kl&130023424)&&(Kl=4194304)):t=1);var n=Vt();e=As(e,t),e!==null&&(kl(e,t,n),Jt(e,n))}function xP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),NN(e,n)}function yP(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(K(314))}s!==null&&s.delete(t),NN(e,n)}var SN;SN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Qt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qt=!1,iP(e,t,n);Qt=!!(e.flags&131072)}else Qt=!1,qe&&t.flags&1048576&&Dj(t,bu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Hc(e,t),e=t.pendingProps;var r=ta(t,It.current);Ki(t,n),r=yg(null,t,s,e,r,n);var i=vg();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(s)?(i=!0,yu(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,fg(t),r.updater=Cd,t.stateNode=r,r._reactInternals=t,Em(t,s,e,n),t=Pm(null,t,s,!0,i,n)):(t.tag=0,qe&&i&&ag(t),Bt(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Hc(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=bP(s),e=Ln(s,e),r){case 0:t=Tm(null,t,s,e,n);break e;case 1:t=r0(null,t,s,e,n);break e;case 11:t=n0(null,t,s,e,n);break e;case 14:t=s0(null,t,s,Ln(s.type,e),n);break e}throw Error(K(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ln(s,r),Tm(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ln(s,r),r0(e,t,s,r,n);case 3:e:{if(oN(t),e===null)throw Error(K(387));s=t.pendingProps,i=t.memoizedState,r=i.element,Rj(e,t),Nu(t,s,null,n);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=ia(Error(K(423)),t),t=i0(e,t,s,n,r);break e}else if(s!==r){r=ia(Error(K(424)),t),t=i0(e,t,s,n,r);break e}else for(rn=cr(t.stateNode.containerInfo.firstChild),on=t,qe=!0,$n=null,n=Aj(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),s===r){t=Ms(e,t,n);break e}Bt(e,t,s,n)}t=t.child}return t;case 5:return Ij(t),e===null&&Sm(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,vm(s,r)?a=null:i!==null&&vm(s,i)&&(t.flags|=32),aN(e,t),Bt(e,t,a,n),t.child;case 6:return e===null&&Sm(t),null;case 13:return lN(e,t,n);case 4:return mg(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=sa(t,null,s,n):Bt(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ln(s,r),n0(e,t,s,r,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,Fe(wu,s._currentValue),s._currentValue=a,i!==null)if(qn(i.value,a)){if(i.children===r.children&&!Kt.current){t=Ms(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Cs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Cm(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(K(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Cm(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Bt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ki(t,n),r=Tn(r),s=s(r),t.flags|=1,Bt(e,t,s,n),t.child;case 14:return s=t.type,r=Ln(s,t.pendingProps),r=Ln(s.type,r),s0(e,t,s,r,n);case 15:return rN(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Ln(s,r),Hc(e,t),t.tag=1,Xt(s)?(e=!0,yu(t)):e=!1,Ki(t,n),tN(t,s,r),Em(t,s,r,n),Pm(null,t,s,!0,e,n);case 19:return cN(e,t,n);case 22:return iN(e,t,n)}throw Error(K(156,t.tag))};function CN(e,t){return J1(e,t)}function vP(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,n,s){return new vP(e,t,n,s)}function Tg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bP(e){if(typeof e=="function")return Tg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yp)return 11;if(e===Qp)return 14}return 2}function fr(e,t){var n=e.alternate;return n===null?(n=jn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qc(e,t,n,s,r,i){var a=2;if(s=e,typeof e=="function")Tg(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case _i:return ni(n.children,r,i,t);case Gp:a=8,r|=8;break;case Xf:return e=jn(12,n,t,r|2),e.elementType=Xf,e.lanes=i,e;case Jf:return e=jn(13,n,t,r),e.elementType=Jf,e.lanes=i,e;case Zf:return e=jn(19,n,t,r),e.elementType=Zf,e.lanes=i,e;case I1:return Dd(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M1:a=10;break e;case R1:a=9;break e;case Yp:a=11;break e;case Qp:a=14;break e;case qs:a=16,s=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=jn(a,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function ni(e,t,n,s){return e=jn(7,e,s,t),e.lanes=n,e}function Dd(e,t,n,s){return e=jn(22,e,s,t),e.elementType=I1,e.lanes=n,e.stateNode={isHidden:!1},e}function Fh(e,t,n){return e=jn(6,e,null,t),e.lanes=n,e}function $h(e,t,n){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wP(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vh(0),this.expirationTimes=vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Pg(e,t,n,s,r,i,a,l,c){return e=new wP(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=jn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fg(i),e}function jP(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function kN(e){if(!e)return wr;e=e._reactInternals;e:{if(gi(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Xt(n))return kj(e,n,t)}return t}function EN(e,t,n,s,r,i,a,l,c){return e=Pg(n,s,!0,e,r,i,a,l,c),e.context=kN(null),n=e.current,s=Vt(),r=hr(n),i=Cs(s,r),i.callback=t??null,ur(n,i,r),e.current.lanes=r,kl(e,r,s),Jt(e,s),e}function Td(e,t,n,s){var r=t.current,i=Vt(),a=hr(r);return n=kN(n),t.context===null?t.context=n:t.pendingContext=n,t=Cs(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ur(r,t,a),e!==null&&(Un(e,r,a,i),Uc(e,r,a)),a}function _u(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function p0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _g(e,t){p0(e,t),(e=e.alternate)&&p0(e,t)}function NP(){return null}var DN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ag(e){this._internalRoot=e}Pd.prototype.render=Ag.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Td(e,t,null,null)};Pd.prototype.unmount=Ag.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;di(function(){Td(null,e,null,null)}),t[_s]=null}};function Pd(e){this._internalRoot=e}Pd.prototype.unstable_scheduleHydration=function(e){if(e){var t=ij();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ys.length&&t!==0&&t<Ys[n].priority;n++);Ys.splice(n,0,e),n===0&&oj(e)}};function Mg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function g0(){}function SP(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=_u(a);i.call(u)}}var a=EN(t,s,e,0,null,!1,!1,"",g0);return e._reactRootContainer=a,e[_s]=a.current,Ho(e.nodeType===8?e.parentNode:e),di(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=_u(c);l.call(u)}}var c=Pg(e,0,!1,null,null,!1,!1,"",g0);return e._reactRootContainer=c,e[_s]=c.current,Ho(e.nodeType===8?e.parentNode:e),di(function(){Td(t,c,n,s)}),c}function Ad(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=_u(a);l.call(c)}}Td(t,a,e,r)}else a=SP(n,t,e,r,s);return _u(a)}sj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=co(t.pendingLanes);n!==0&&(Jp(t,n|1),Jt(t,nt()),!(Te&6)&&(aa=nt()+500,Tr()))}break;case 13:di(function(){var s=As(e,1);if(s!==null){var r=Vt();Un(s,e,1,r)}}),_g(e,1)}};Zp=function(e){if(e.tag===13){var t=As(e,134217728);if(t!==null){var n=Vt();Un(t,e,134217728,n)}_g(e,134217728)}};rj=function(e){if(e.tag===13){var t=hr(e),n=As(e,t);if(n!==null){var s=Vt();Un(n,e,t,s)}_g(e,t)}};ij=function(){return Oe};aj=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}};cm=function(e,t,n){switch(t){case"input":if(nm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=jd(s);if(!r)throw Error(K(90));L1(s),nm(s,r)}}}break;case"textarea":$1(e,n);break;case"select":t=n.value,t!=null&&Hi(e,!!n.multiple,t,!1)}};H1=kg;G1=di;var CP={usingClientEntryPoint:!1,Events:[Dl,Ii,jd,W1,q1,kg]},Ua={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kP={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Is.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=K1(e),e===null?null:e.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||NP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{yd=oc.inject(kP),ns=oc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CP;fn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mg(t))throw Error(K(200));return jP(e,t,null,n)};fn.createRoot=function(e,t){if(!Mg(e))throw Error(K(299));var n=!1,s="",r=DN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Pg(e,1,!1,null,null,n,!1,s,r),e[_s]=t.current,Ho(e.nodeType===8?e.parentNode:e),new Ag(t)};fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=K1(t),e=e===null?null:e.stateNode,e};fn.flushSync=function(e){return di(e)};fn.hydrate=function(e,t,n){if(!_d(t))throw Error(K(200));return Ad(null,e,t,!0,n)};fn.hydrateRoot=function(e,t,n){if(!Mg(e))throw Error(K(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=DN;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=EN(t,null,e,1,n??null,r,!1,i,a),e[_s]=t.current,Ho(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Pd(t)};fn.render=function(e,t,n){if(!_d(t))throw Error(K(200));return Ad(null,e,t,!1,n)};fn.unmountComponentAtNode=function(e){if(!_d(e))throw Error(K(40));return e._reactRootContainer?(di(function(){Ad(null,null,e,!1,function(){e._reactRootContainer=null,e[_s]=null})}),!0):!1};fn.unstable_batchedUpdates=kg;fn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!_d(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Ad(e,t,n,!1,s)};fn.version="18.3.1-next-f1338f8080-20240426";function TN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TN)}catch(e){console.error(e)}}TN(),T1.exports=fn;var Pl=T1.exports;const EP=Fp(Pl);var PN,x0=Pl;PN=x0.createRoot,x0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tl.apply(this,arguments)}var er;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(er||(er={}));const y0="popstate";function DP(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:a,hash:l}=s.location;return Vm("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Au(r)}return PP(t,n,null,e)}function at(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _N(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TP(){return Math.random().toString(36).substr(2,8)}function v0(e,t){return{usr:e.state,key:e.key,idx:t}}function Vm(e,t,n,s){return n===void 0&&(n=null),tl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ba(t):t,{state:n,key:t&&t.key||s||TP()})}function Au(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ba(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function PP(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=er.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(tl({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=er.Pop;let v=d(),b=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:b})}function f(v,b){l=er.Push;let y=Vm(g.location,v,b);u=d()+1;let w=v0(y,u),S=g.createHref(y);try{a.pushState(w,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function m(v,b){l=er.Replace;let y=Vm(g.location,v,b);u=d();let w=v0(y,u),S=g.createHref(y);a.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function p(v){let b=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof v=="string"?v:Au(v);return y=y.replace(/ $/,"%20"),at(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let g={get action(){return l},get location(){return e(r,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(y0,h),c=v,()=>{r.removeEventListener(y0,h),c=null}},createHref(v){return t(r,v)},createURL:p,encodeLocation(v){let b=p(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(v){return a.go(v)}};return g}var b0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(b0||(b0={}));function _P(e,t,n){return n===void 0&&(n="/"),AP(e,t,n)}function AP(e,t,n,s){let r=typeof t=="string"?ba(t):t,i=Rg(r.pathname||"/",n);if(i==null)return null;let a=AN(e);MP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=qP(i);l=VP(a[c],u)}return l}function AN(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(at(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=mr([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(at(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),AN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:BP(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of MN(i.path))r(i,a,c)}),t}function MN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=MN(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function MP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zP(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const RP=/^:[\w-]+$/,IP=3,OP=2,LP=1,FP=10,$P=-2,w0=e=>e==="*";function BP(e,t){let n=e.split("/"),s=n.length;return n.some(w0)&&(s+=$P),t&&(s+=OP),n.filter(r=>!w0(r)).reduce((r,i)=>r+(RP.test(i)?IP:i===""?LP:FP),s)}function zP(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function VP(e,t,n){let{routesMeta:s}=e,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=UP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:mr([i,h.pathname]),pathnameBase:QP(mr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=mr([i,h.pathnameBase]))}return a}function UP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=WP(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function WP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),_N(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function qP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _N(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Rg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function HP(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?ba(e):e;return{pathname:n?n.startsWith("/")?n:GP(n,t):t,search:KP(s),hash:XP(r)}}function GP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Bh(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ig(e,t){let n=YP(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Og(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=ba(e):(r=tl({},e),at(!r.pathname||!r.pathname.includes("?"),Bh("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),Bh("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),Bh("#","search","hash",r)));let i=e===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=HP(r,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const mr=e=>e.join("/").replace(/\/\/+/g,"/"),QP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,XP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function JP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const RN=["post","put","patch","delete"];new Set(RN);const ZP=["get",...RN];new Set(ZP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nl.apply(this,arguments)}const Lg=x.createContext(null),e_=x.createContext(null),Pr=x.createContext(null),Md=x.createContext(null),cs=x.createContext({outlet:null,matches:[],isDataRoute:!1}),IN=x.createContext(null);function t_(e,t){let{relative:n}=t===void 0?{}:t;wa()||at(!1);let{basename:s,navigator:r}=x.useContext(Pr),{hash:i,pathname:a,search:l}=FN(e,{relative:n}),c=a;return s!=="/"&&(c=a==="/"?s:mr([s,a])),r.createHref({pathname:c,search:l,hash:i})}function wa(){return x.useContext(Md)!=null}function Os(){return wa()||at(!1),x.useContext(Md).location}function ON(e){x.useContext(Pr).static||x.useLayoutEffect(e)}function Mn(){let{isDataRoute:e}=x.useContext(cs);return e?g_():n_()}function n_(){wa()||at(!1);let e=x.useContext(Lg),{basename:t,future:n,navigator:s}=x.useContext(Pr),{matches:r}=x.useContext(cs),{pathname:i}=Os(),a=JSON.stringify(Ig(r,n.v7_relativeSplatPath)),l=x.useRef(!1);return ON(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=Og(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:mr([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,a,i,e])}const s_=x.createContext(null);function r_(e){let t=x.useContext(cs).outlet;return t&&x.createElement(s_.Provider,{value:e},t)}function LN(){let{matches:e}=x.useContext(cs),t=e[e.length-1];return t?t.params:{}}function FN(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=x.useContext(Pr),{matches:r}=x.useContext(cs),{pathname:i}=Os(),a=JSON.stringify(Ig(r,s.v7_relativeSplatPath));return x.useMemo(()=>Og(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function i_(e,t){return a_(e,t)}function a_(e,t,n,s){wa()||at(!1);let{navigator:r}=x.useContext(Pr),{matches:i}=x.useContext(cs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Os(),d;if(t){var h;let v=typeof t=="string"?ba(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||at(!1),d=v}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=_P(e,{pathname:m}),g=d_(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:mr([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:mr([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,s);return t&&g?x.createElement(Md.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:er.Pop}},g):g}function o_(){let e=p_(),t=JP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:r},n):null,null)}const l_=x.createElement(o_,null);class c_ extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(cs.Provider,{value:this.props.routeContext},x.createElement(IN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function u_(e){let{routeContext:t,match:n,children:s}=e,r=x.useContext(Lg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(cs.Provider,{value:t},s)}function d_(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||at(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,p=!1,g=null,v=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||l_,c&&(u<0&&f===0?(x_("route-fallback"),p=!0,v=null):u===f&&(p=!0,v=h.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,f+1)),y=()=>{let w;return m?w=g:p?w=v:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,x.createElement(u_,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?x.createElement(c_,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var $N=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($N||{}),BN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(BN||{});function h_(e){let t=x.useContext(Lg);return t||at(!1),t}function f_(e){let t=x.useContext(e_);return t||at(!1),t}function m_(e){let t=x.useContext(cs);return t||at(!1),t}function zN(e){let t=m_(),n=t.matches[t.matches.length-1];return n.route.id||at(!1),n.route.id}function p_(){var e;let t=x.useContext(IN),n=f_(),s=zN();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function g_(){let{router:e}=h_($N.UseNavigateStable),t=zN(BN.UseNavigateStable),n=x.useRef(!1);return ON(()=>{n.current=!0}),x.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,nl({fromRouteId:t},i)))},[e,t])}const j0={};function x_(e,t,n){j0[e]||(j0[e]=!0)}function y_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Bn(e){let{to:t,replace:n,state:s,relative:r}=e;wa()||at(!1);let{future:i,static:a}=x.useContext(Pr),{matches:l}=x.useContext(cs),{pathname:c}=Os(),u=Mn(),d=Og(t,Ig(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function VN(e){return r_(e.context)}function We(e){at(!1)}function v_(e){let{basename:t="/",children:n=null,location:s,navigationType:r=er.Pop,navigator:i,static:a=!1,future:l}=e;wa()&&at(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:i,static:a,future:nl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=ba(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=s,g=x.useMemo(()=>{let v=Rg(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:p},navigationType:r}},[c,d,h,f,m,p,r]);return g==null?null:x.createElement(Pr.Provider,{value:u},x.createElement(Md.Provider,{children:n,value:g}))}function b_(e){let{children:t,location:n}=e;return i_(Um(t),n)}new Promise(()=>{});function Um(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(s,r)=>{if(!x.isValidElement(s))return;let i=[...t,r];if(s.type===x.Fragment){n.push.apply(n,Um(s.props.children,i));return}s.type!==We&&at(!1),!s.props.index||!s.props.children||at(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Um(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wm.apply(this,arguments)}function w_(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function j_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function N_(e,t){return e.button===0&&(!t||t==="_self")&&!j_(e)}function qm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function S_(e,t){let n=qm(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}const C_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],k_="6";try{window.__reactRouterVersion=k_}catch{}const E_="startTransition",N0=Up[E_];function D_(e){let{basename:t,children:n,future:s,window:r}=e,i=x.useRef();i.current==null&&(i.current=DP({window:r,v5Compat:!0}));let a=i.current,[l,c]=x.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},d=x.useCallback(h=>{u&&N0?N0(()=>c(h)):c(h)},[c,u]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.useEffect(()=>y_(s),[s]),x.createElement(v_,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const T_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,es=x.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=w_(t,C_),{basename:m}=x.useContext(Pr),p,g=!1;if(typeof u=="string"&&P_.test(u)&&(p=u,T_))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),N=Rg(S.pathname,m);S.origin===w.origin&&N!=null?u=N+S.search+S.hash:g=!0}catch{}let v=t_(u,{relative:r}),b=__(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function y(w){s&&s(w),w.defaultPrevented||b(w)}return x.createElement("a",Wm({},f,{href:p||v,onClick:g||i?s:y,ref:n,target:c}))});var S0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(S0||(S0={}));var C0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(C0||(C0={}));function __(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Mn(),u=Os(),d=FN(e,{relative:a});return x.useCallback(h=>{if(N_(h,n)){h.preventDefault();let f=s!==void 0?s:Au(u)===Au(d);c(e,{replace:f,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,s,r,n,e,i,a,l])}function A_(e){let t=x.useRef(qm(e)),n=x.useRef(!1),s=Os(),r=x.useMemo(()=>S_(s.search,n.current?null:t.current),[s.search]),i=Mn(),a=x.useCallback((l,c)=>{const u=qm(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,a]}class M_ extends x.Component{constructor(n){super(n);le(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});le(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?o.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:o.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),o.jsxs("div",{className:"flex flex-col space-y-3",children:[o.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),o.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function R_({children:e}){return o.jsx(M_,{children:e})}const I_={},k0=e=>{let t;const n=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(I_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},O_=e=>e?k0(e):k0;var UN={exports:{}},WN={},qN={exports:{}},HN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=x;function L_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var F_=typeof Object.is=="function"?Object.is:L_,$_=oa.useState,B_=oa.useEffect,z_=oa.useLayoutEffect,V_=oa.useDebugValue;function U_(e,t){var n=t(),s=$_({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return z_(function(){r.value=n,r.getSnapshot=t,zh(r)&&i({inst:r})},[e,n,t]),B_(function(){return zh(r)&&i({inst:r}),e(function(){zh(r)&&i({inst:r})})},[e]),V_(n),n}function zh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!F_(e,n)}catch{return!0}}function W_(e,t){return t()}var q_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?W_:U_;HN.useSyncExternalStore=oa.useSyncExternalStore!==void 0?oa.useSyncExternalStore:q_;qN.exports=HN;var H_=qN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd=x,G_=H_;function Y_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Q_=typeof Object.is=="function"?Object.is:Y_,K_=G_.useSyncExternalStore,X_=Rd.useRef,J_=Rd.useEffect,Z_=Rd.useMemo,eA=Rd.useDebugValue;WN.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=X_(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=Z_(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,Q_(d,m))return p;var g=s(m);return r!==void 0&&r(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=K_(e,i[0],i[1]);return J_(function(){a.hasValue=!0,a.value=l},[l]),eA(l),l};UN.exports=WN;var tA=UN.exports;const nA=Fp(tA),GN={},{useDebugValue:sA}=ee,{useSyncExternalStoreWithSelector:rA}=nA;let E0=!1;const iA=e=>e;function aA(e,t=iA,n){(GN?"production":void 0)!=="production"&&n&&!E0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),E0=!0);const s=rA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return sA(s),s}const D0=e=>{(GN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?O_(e):e,n=(s,r)=>aA(t,s,r);return Object.assign(n,t),n},YN=e=>e?D0(e):D0;function oA(e){try{const t=e.split(".")[1];return JSON.parse(atob(t.replace(/-/g,"+").replace(/_/g,"/")))}catch{return{}}}const QN=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("jwt-token");return t&&(e.Authorization=`Bearer ${t}`),e},lA=async(e,t)=>{try{console.log("🔑 Starting sign in process for:",e);const n="http://103.224.243.242:3001/api",s=`${n}/auth/login`;console.log("Login URL:",s);const r=await fetch(s,{method:"POST",headers:QN(),body:JSON.stringify({email:e,password:t})});if(!r.ok){let c="Authentication failed";try{const u=await r.json();u&&u.message&&(c=u.message)}catch{}throw new Error(c)}let i;try{i=await r.json()}catch{throw new Error("Invalid response from server.")}const{token:a,user:l}=i;if(!l||!l.id||!l.email||!a)throw new Error("Invalid user data received from server");return(!l.role||!["admin","sales_agent","operations_manager","operator","support"].includes(l.role))&&(console.warn("⚠️ User role missing or invalid, assigning default role"),l.role="admin"),localStorage.setItem("jwt-token",a),console.log("✅ Authentication successful"),l}catch(n){throw console.error("Error signing in:",n),n}},cA=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:QN()}),localStorage.removeItem("jwt-token")}catch(e){console.error("Error signing out:",e),localStorage.removeItem("jwt-token")}},KN=async()=>{try{const e=localStorage.getItem("jwt-token");if(!e)return null;const t=oA(e);if(t.exp&&t.exp*1e3<Date.now())return localStorage.removeItem("jwt-token"),null;console.log("🔍 getCurrentUser: Decoding JWT token directly");const n={id:t.id,email:t.email,name:t.name,role:t.role};return console.log("✅ getCurrentUser: User from JWT:",JSON.stringify(n,null,2)),!n.id||!n.email||!n.role?(console.error("❌ getCurrentUser: Invalid user data in JWT"),localStorage.removeItem("jwt-token"),null):n}catch(e){return console.error("Error getting current user:",e),localStorage.removeItem("jwt-token"),null}},uA=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},dA=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")},Ge=YN()(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const s=await lA(t,n);if(console.log("🔐 Login successful - User data received:",JSON.stringify(s,null,2)),console.log("🏷️ User role check:",s==null?void 0:s.role),!s||!s.role)throw console.error("❌ User object missing or role undefined:",s),new Error("Invalid user data - role missing");if(!["admin","sales_agent","operations_manager","operator","support"].includes(s.role))throw console.error("❌ Invalid user role:",s.role),new Error(`Invalid user role: ${s.role}`);console.log("✅ User role validation passed:",s.role);const r=localStorage.getItem("jwt-token")||"";e({user:s,token:r,isAuthenticated:!0,error:null}),uA(s,r),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(s){throw e({error:s.message}),s}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await cA(),e({user:null,token:null,isAuthenticated:!1,error:null}),dA(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(e,t)=>{const n=x.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>x.createElement("svg",{ref:d,...hA,width:r,height:r,stroke:s,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${fA(e)}`,l].join(" "),...u},[...t.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Z("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Z("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Z("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=Z("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Z("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=Z("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=Z("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=Z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=Z("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=Z("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=Z("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Z("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=Z("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Z("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=Z("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=Z("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=Z("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=Z("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=Z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=Z("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=Z("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=Z("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=Z("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=Z("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=Z("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=Z("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function GA(){var y,w;const[e,t]=x.useState(""),[n,s]=x.useState(""),[r,i]=x.useState(!1),[a,l]=x.useState(null),[c,u]=x.useState("loading"),{login:d,error:h,isAuthenticated:f,user:m}=Ge();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),x.useEffect(()=>{console.log("LoginForm mounted");const S="http://103.224.243.242:3001/api";fetch(`${S}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(N=>(console.log("API health check response:",N.status),u(N.ok?"available":"error"),N.text())).then(N=>{console.log("API health check data:",N)}).catch(N=>{console.error("API health check failed:",N),u("error"),l(`API connection error: ${N.message}. Make sure the API server is running at ${S}`)}),console.log("Environment variables check:",{apiUrl:"http://103.224.243.242:3001/api",dbHost:"crm-db"})},[]);const p=Mn(),g=Os(),v=((w=(y=g.state)==null?void 0:y.from)==null?void 0:w.pathname)||"/dashboard";x.useEffect(()=>{console.log("🔍 LoginForm useEffect - Authentication check:",{isAuthenticated:f,user:m==null?void 0:m.name}),f&&m&&(console.log("✅ User is authenticated, navigating to:",v),p(v,{replace:!0}))},[f,m,p,v]),x.useEffect(()=>{g.pathname==="/login"&&localStorage.removeItem("jwt-token")},[g.pathname]);const b=async S=>{if(S.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log("🔑 Login attempt for:",e);try{const N="http://103.224.243.242:3001/api";try{const j=await fetch(`${N}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!j.ok)throw console.error("API health check failed before login attempt:",await j.text()),u("error"),new Error(`API server is not responding correctly. Status: ${j.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(j){throw console.error("Failed to connect to API:",j),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}console.log("🔐 Calling auth store login..."),await d(e,n),console.log("✅ Login attempt successful, auth state should be updated"),setTimeout(()=>{var k,C;const j=Ge.getState();console.log("🔍 Current auth state after login:",{isAuthenticated:j.isAuthenticated,user:(k=j.user)==null?void 0:k.name,userRole:(C=j.user)==null?void 0:C.role,token:j.token?"Present":"Missing",fullUser:j.user}),j.isAuthenticated&&j.user?(console.log("🚀 Forcing navigation to dashboard..."),console.log("👤 User object before navigation:",JSON.stringify(j.user,null,2)),p("/dashboard",{replace:!0})):console.log("❌ Auth state not updated properly, user may need to refresh")},500)}catch(N){console.error("Login error:",N),N instanceof Error&&(N.message.includes("<!DOCTYPE")||N.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://103.224.243.242:3001/api.`):(N.message.includes("NetworkError")||N.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),s("")}finally{i(!1)}};if(a)return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),o.jsx("p",{className:"text-gray-700 mb-4",children:a}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",o.jsx("br",{}),"API URL: ","http://103.224.243.242:3001/api"]}),o.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[o.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Make sure the API server is running"}),o.jsx("li",{children:"Check your .env file configuration"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsx("li",{children:"Check browser console for network errors"})]})]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsx("div",{children:o.jsx("input",{id:"email",name:"email",type:"email",value:e,onChange:S=>t(S.target.value),required:!0,autoComplete:"email",placeholder:"Email address",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})}),o.jsx("div",{children:o.jsx("input",{id:"password",name:"password",type:"password",value:n,onChange:S=>s(S.target.value),required:!0,autoComplete:"current-password",placeholder:"Password",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})})]}),o.jsx("div",{className:"flex justify-end text-xs mt-1",children:o.jsxs("a",{href:"#",className:"text-blue-700 hover:underline",children:["Forget password ",o.jsx("span",{className:"font-bold",children:"Click here"})]})}),o.jsx("button",{type:"submit",disabled:r,className:"w-full h-12 bg-black text-white rounded-md text-lg font-semibold mt-2 transition-colors duration-150 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-50",children:r?"Logging in...":"Login Now"}),h&&o.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[o.jsx(xi,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:h})]})]})}catch(S){return console.error("Error rendering login form:",S),l(`Error rendering login form: ${S instanceof Error?S.message:String(S)}`),null}}function YA({error:e,resetError:t}){return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:o.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),o.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),o.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:o.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),o.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class QA extends x.Component{constructor(n){super(n);le(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?o.jsx(YA,{error:this.state.error,resetError:this.resetError}):this.props.children}}function KA(){const{isAuthenticated:e}=Ge();return e?o.jsx(Bn,{to:"/dashboard"}):o.jsxs("div",{className:"h-screen overflow-hidden flex flex-col lg:flex-row bg-[#F2EEE7]",children:[o.jsxs("div",{className:"relative flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-[#385197] to-[#404040] text-white px-8 py-12 overflow-hidden",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M0 800 Q400 400 800 800",stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M0 600 Q400 200 800 600",stroke:"white",strokeWidth:"1.5"}),o.jsx("path",{d:"M0 400 Q400 0 800 400",stroke:"white",strokeWidth:"1"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-start max-w-lg w-full",children:[o.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight flex items-center gap-2",children:[o.jsx("span",{className:"text-white drop-shadow-lg",children:"Hello,"}),o.jsx("span",{className:"text-[#FFCC3F] drop-shadow-[0_2px_8px_rgba(255,204,63,0.7)]",children:"ASP Cranes!"}),o.jsx("span",{className:"inline-block text-5xl ml-2 align-middle",children:"👋"})]}),o.jsx("p",{className:"text-xl md:text-2xl font-bold mb-8 text-white drop-shadow-lg tracking-wide",children:"The all-in-one platform to supercharge your heavy equipment rental business."}),o.jsxs("p",{className:"text-xs opacity-60 mt-12",children:["© ",new Date().getFullYear()," ASP Cranes. All rights reserved."]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center items-center bg-[#F2EEE7] px-6",children:o.jsxs("div",{className:"w-full max-w-md mx-auto relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/10 backdrop-blur-xl border border-[#CAC0B0]/60 shadow-2xl",style:{zIndex:1}}),o.jsxs("div",{className:"relative z-10 p-10 flex flex-col",children:[o.jsxs("h2",{className:"text-2xl font-bold text-[#404040] mb-2 flex items-center gap-2",children:["Welcome Back! ",o.jsx("span",{className:"text-[#FFCC3F]",children:"●"})]}),o.jsxs("p",{className:"text-[#385197] mb-6 text-sm",children:["Don't have an account? ",o.jsx("a",{href:"#",className:"text-[#FFCC3F] font-medium hover:underline",children:"Create a new account now"}),".",o.jsx("br",{}),"It's FREE! Takes less than a minute."]}),o.jsx(GA,{})]}),o.jsxs("svg",{className:"absolute -top-8 -right-8 w-32 h-32 opacity-30",viewBox:"0 0 100 100",fill:"none",children:[o.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"#FFCC3F",strokeWidth:"2"}),o.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#385197",strokeWidth:"1"})]}),o.jsx("svg",{className:"absolute -bottom-8 -left-8 w-24 h-24 opacity-20",viewBox:"0 0 100 100",fill:"none",children:o.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"20",stroke:"#404040",strokeWidth:"2"})})]})})]})}function XA(){return x.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://103.224.243.242:3001/api")},[]),o.jsx(QA,{children:o.jsx(KA,{})})}const oS=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$d=x.createContext({}),Bd=x.createContext(null),zd=typeof document<"u",Vg=zd?x.useLayoutEffect:x.useEffect,lS=x.createContext({strict:!1}),Ug=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),JA="framerAppearId",cS="data-"+Ug(JA);function ZA(e,t,n,s){const{visualElement:r}=x.useContext($d),i=x.useContext(lS),a=x.useContext(Bd),l=x.useContext(oS).reducedMotion,c=x.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(n,a)});const d=x.useRef(!!(n[cS]&&!window.HandoffComplete));return Vg(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Vi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function eM(e,t,n){return x.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Vi(n)&&(n.current=s))},[t])}function il(e){return typeof e=="string"||Array.isArray(e)}function Vd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Wg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qg=["initial",...Wg];function Ud(e){return Vd(e.animate)||qg.some(t=>il(e[t]))}function uS(e){return!!(Ud(e)||e.variants)}function tM(e,t){if(Ud(e)){const{initial:n,animate:s}=e;return{initial:n===!1||il(n)?n:void 0,animate:il(s)?s:void 0}}return e.inherit!==!1?t:{}}function nM(e){const{initial:t,animate:n}=tM(e,x.useContext($d));return x.useMemo(()=>({initial:t,animate:n}),[I0(t),I0(n)])}function I0(e){return Array.isArray(e)?e.join(" "):e}const O0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},al={};for(const e in O0)al[e]={isEnabled:t=>O0[e].some(n=>!!t[n])};function sM(e){for(const t in e)al[t]={...al[t],...e[t]}}const Hg=x.createContext({}),dS=x.createContext({}),rM=Symbol.for("motionComponentSymbol");function iM({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){e&&sM(e);function i(l,c){let u;const d={...x.useContext(oS),...l,layoutId:aM(l)},{isStatic:h}=d,f=nM(l),m=s(l,h);if(!h&&zd){f.visualElement=ZA(r,m,d,t);const p=x.useContext(dS),g=x.useContext(lS).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,e,p))}return x.createElement($d.Provider,{value:f},u&&f.visualElement?x.createElement(u,{visualElement:f.visualElement,...d}):null,n(r,l,eM(m,f.visualElement,c),m,h,f.visualElement))}const a=x.forwardRef(i);return a[rM]=r,a}function aM({layoutId:e}){const t=x.useContext(Hg).id;return t&&e!==void 0?t+"-"+e:e}function oM(e){function t(s,r={}){return iM(e(s,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const lM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gg(e){return typeof e!="string"||e.includes("-")?!1:!!(lM.indexOf(e)>-1||/[A-Z]/.test(e))}const Ru={};function cM(e){Object.assign(Ru,e)}const _l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vi=new Set(_l);function hS(e,{layout:t,layoutId:n}){return vi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ru[e]||e==="opacity")}const Zt=e=>!!(e&&e.getVelocity),uM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dM=_l.length;function hM(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,r){let i="";for(let a=0;a<dM;a++){const l=_l[a];if(e[l]!==void 0){const c=uM[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,s?"":i):n&&s&&(i="none"),i}const fS=e=>t=>typeof t=="string"&&t.startsWith(e),mS=fS("--"),Ym=fS("var(--"),fM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,mM=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Nr=(e,t,n)=>Math.min(Math.max(n,e),t),bi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Do={...bi,transform:e=>Nr(0,1,e)},lc={...bi,default:1},To=e=>Math.round(e*1e5)/1e5,Wd=/(-)?([\d]*\.?[\d])+/g,pS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,pM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Al(e){return typeof e=="string"}const Ml=e=>({test:t=>Al(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ws=Ml("deg"),rs=Ml("%"),ye=Ml("px"),gM=Ml("vh"),xM=Ml("vw"),L0={...rs,parse:e=>rs.parse(e)/100,transform:e=>rs.transform(e*100)},F0={...bi,transform:Math.round},gS={borderWidth:ye,borderTopWidth:ye,borderRightWidth:ye,borderBottomWidth:ye,borderLeftWidth:ye,borderRadius:ye,radius:ye,borderTopLeftRadius:ye,borderTopRightRadius:ye,borderBottomRightRadius:ye,borderBottomLeftRadius:ye,width:ye,maxWidth:ye,height:ye,maxHeight:ye,size:ye,top:ye,right:ye,bottom:ye,left:ye,padding:ye,paddingTop:ye,paddingRight:ye,paddingBottom:ye,paddingLeft:ye,margin:ye,marginTop:ye,marginRight:ye,marginBottom:ye,marginLeft:ye,rotate:Ws,rotateX:Ws,rotateY:Ws,rotateZ:Ws,scale:lc,scaleX:lc,scaleY:lc,scaleZ:lc,skew:Ws,skewX:Ws,skewY:Ws,distance:ye,translateX:ye,translateY:ye,translateZ:ye,x:ye,y:ye,z:ye,perspective:ye,transformPerspective:ye,opacity:Do,originX:L0,originY:L0,originZ:ye,zIndex:F0,fillOpacity:Do,strokeOpacity:Do,numOctaves:F0};function Yg(e,t,n,s){const{style:r,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(mS(h)){i[h]=f;continue}const m=gS[h],p=mM(f,m);if(vi.has(h)){if(c=!0,a[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):r[h]=p}if(t.transform||(c||s?r.transform=hM(e.transform,n,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;r.transformOrigin=`${h} ${f} ${m}`}}const Qg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xS(e,t,n){for(const s in t)!Zt(t[s])&&!hS(s,n)&&(e[s]=t[s])}function yM({transformTemplate:e},t,n){return x.useMemo(()=>{const s=Qg();return Yg(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function vM(e,t,n){const s=e.style||{},r={};return xS(r,s,e),Object.assign(r,yM(e,t,n)),e.transformValues?e.transformValues(r):r}function bM(e,t,n){const s={},r=vM(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const wM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Iu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wM.has(e)}let yS=e=>!Iu(e);function jM(e){e&&(yS=t=>t.startsWith("on")?!Iu(t):e(t))}try{jM(require("@emotion/is-prop-valid").default)}catch{}function NM(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(yS(r)||n===!0&&Iu(r)||!t&&!Iu(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function $0(e,t,n){return typeof e=="string"?e:ye.transform(t+n*e)}function SM(e,t,n){const s=$0(t,e.x,e.width),r=$0(n,e.y,e.height);return`${s} ${r}`}const CM={offset:"stroke-dashoffset",array:"stroke-dasharray"},kM={offset:"strokeDashoffset",array:"strokeDasharray"};function EM(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?CM:kM;e[i.offset]=ye.transform(-s);const a=ye.transform(t),l=ye.transform(n);e[i.array]=`${a} ${l}`}function Kg(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(Yg(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:g}=e;m.transform&&(g&&(p.transform=m.transform),delete m.transform),g&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=SM(g,r!==void 0?r:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),a!==void 0&&EM(m,a,l,c,!1)}const vS=()=>({...Qg(),attrs:{}}),Xg=e=>typeof e=="string"&&e.toLowerCase()==="svg";function DM(e,t,n,s){const r=x.useMemo(()=>{const i=vS();return Kg(i,t,{enableHardwareAcceleration:!1},Xg(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};xS(i,e.style,e),r.style={...i,...r.style}}return r}function TM(e=!1){return(n,s,r,{latestValues:i},a)=>{const c=(Gg(n)?DM:bM)(s,i,a,n),d={...NM(s,typeof n=="string",e),...c,ref:r},{children:h}=s,f=x.useMemo(()=>Zt(h)?h.get():h,[h]);return x.createElement(n,{...d,children:f})}}function bS(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const wS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jS(e,t,n,s){bS(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(wS.has(r)?r:Ug(r),t.attrs[r])}function Jg(e,t){const{style:n}=e,s={};for(const r in n)(Zt(n[r])||t.style&&Zt(t.style[r])||hS(r,e))&&(s[r]=n[r]);return s}function NS(e,t){const n=Jg(e,t);for(const s in e)if(Zt(e[s])||Zt(t[s])){const r=_l.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=e[s]}return n}function Zg(e,t,n,s={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),t}function SS(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ou=e=>Array.isArray(e),PM=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),_M=e=>Ou(e)?e[e.length-1]||0:e;function Kc(e){const t=Zt(e)?e.get():e;return PM(t)?t.toValue():t}function AM({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,r,i){const a={latestValues:MM(s,r,i,e),renderState:t()};return n&&(a.mount=l=>n(s,l,a)),a}const CS=e=>(t,n)=>{const s=x.useContext($d),r=x.useContext(Bd),i=()=>AM(e,t,s,r);return n?i():SS(i)};function MM(e,t,n,s){const r={},i=s(e,{});for(const f in i)r[f]=Kc(i[f]);let{initial:a,animate:l}=e;const c=Ud(e),u=uS(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Vd(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=Zg(e,m);if(!p)return;const{transitionEnd:g,transition:v,...b}=p;for(const y in b){let w=b[y];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(r[y]=w)}for(const y in g)r[y]=g[y]}),r}const rt=e=>e;class B0{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function RM(e){let t=new B0,n=new B0,s=0,r=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?t:n;return u&&a.add(c),f.add(c)&&h&&r&&(s=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}r=!1,i&&(i=!1,l.process(c))}};return l}const cc=["prepare","read","update","preRender","render","postRender"],IM=40;function OM(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=cc.reduce((h,f)=>(h[f]=RM(()=>n=!0),h),{}),a=h=>i[h].process(r),l=()=>{const h=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,IM),1),r.timestamp=h,r.isProcessing=!0,cc.forEach(a),r.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,r.isProcessing||e(l)};return{schedule:cc.reduce((h,f)=>{const m=i[f];return h[f]=(p,g=!1,v=!1)=>(n||c(),m.schedule(p,g,v)),h},{}),cancel:h=>cc.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:$e,cancel:Rs,state:Dt,steps:Vh}=OM(typeof requestAnimationFrame<"u"?requestAnimationFrame:rt,!0),LM={useVisualState:CS({scrapeMotionValuesFromProps:NS,createRenderState:vS,onMount:(e,t,{renderState:n,latestValues:s})=>{$e.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),$e.render(()=>{Kg(n,s,{enableHardwareAcceleration:!1},Xg(t.tagName),e.transformTemplate),jS(t,n)})}})},FM={useVisualState:CS({scrapeMotionValuesFromProps:Jg,createRenderState:Qg})};function $M(e,{forwardMotionProps:t=!1},n,s){return{...Gg(e)?LM:FM,preloadedFeatures:n,useRender:TM(t),createVisualElement:s,Component:e}}function js(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const kS=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function qd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const BM=e=>t=>kS(t)&&e(t,qd(t));function ks(e,t,n,s){return js(e,t,BM(n),s)}const zM=(e,t)=>n=>t(e(n)),gr=(...e)=>e.reduce(zM);function ES(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const z0=ES("dragHorizontal"),V0=ES("dragVertical");function DS(e){let t=!1;if(e==="y")t=V0();else if(e==="x")t=z0();else{const n=z0(),s=V0();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function TS(){const e=DS(!0);return e?(e(),!1):!0}class _r{constructor(t){this.isMounted=!1,this.node=t}update(){}}function U0(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),r=(i,a)=>{if(i.pointerType==="touch"||TS())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&$e.update(()=>l[s](i,a))};return ks(e.current,n,r,{passive:!e.getProps()[s]})}class VM extends _r{mount(){this.unmount=gr(U0(this.node,!0),U0(this.node,!1))}unmount(){}}class UM extends _r{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gr(js(this.node.current,"focus",()=>this.onFocus()),js(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const PS=(e,t)=>t?e===t?!0:PS(e,t.parentElement):!1;function Uh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,qd(n))}class WM extends _r{constructor(){super(...arguments),this.removeStartListeners=rt,this.removeEndListeners=rt,this.removeAccessibleListeners=rt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=ks(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();$e.update(()=>{!h&&!PS(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),a=ks(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=gr(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Uh("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&$e.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=js(this.node.current,"keyup",a),Uh("down",(l,c)=>{this.startPress(l,c)})},n=js(this.node.current,"keydown",t),s=()=>{this.isPressing&&Uh("cancel",(i,a)=>this.cancelPress(i,a))},r=js(this.node.current,"blur",s);this.removeAccessibleListeners=gr(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&$e.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!TS()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&$e.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=ks(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=js(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=gr(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Qm=new WeakMap,Wh=new WeakMap,qM=e=>{const t=Qm.get(e.target);t&&t(e)},HM=e=>{e.forEach(qM)};function GM({root:e,...t}){const n=e||document;Wh.has(n)||Wh.set(n,{});const s=Wh.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(HM,{root:e,...t})),s[r]}function YM(e,t,n){const s=GM(t);return Qm.set(e,n),s.observe(e),()=>{Qm.delete(e),s.unobserve(e)}}const QM={some:0,all:1};class KM extends _r{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:QM[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return YM(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(XM(t,n))&&this.startObserver()}unmount(){}}function XM({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const JM={inView:{Feature:KM},tap:{Feature:WM},focus:{Feature:UM},hover:{Feature:VM}};function _S(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function ZM(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function eR(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function Hd(e,t,n){const s=e.getProps();return Zg(s,t,n!==void 0?n:s.custom,ZM(e),eR(e))}let ex=rt;const si=e=>e*1e3,Es=e=>e/1e3,tR={current:!1},AS=e=>Array.isArray(e)&&typeof e[0]=="number";function MS(e){return!!(!e||typeof e=="string"&&RS[e]||AS(e)||Array.isArray(e)&&e.every(MS))}const ho=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,RS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ho([0,.65,.55,1]),circOut:ho([.55,0,1,.45]),backIn:ho([.31,.01,.66,-.59]),backOut:ho([.33,1.53,.69,.99])};function IS(e){if(e)return AS(e)?ho(e):Array.isArray(e)?e.map(IS):RS[e]}function nR(e,t,n,{delay:s=0,duration:r,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=IS(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function sR(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const OS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,rR=1e-7,iR=12;function aR(e,t,n,s,r){let i,a,l=0;do a=t+(n-t)/2,i=OS(a,s,r)-e,i>0?n=a:t=a;while(Math.abs(i)>rR&&++l<iR);return a}function Rl(e,t,n,s){if(e===t&&n===s)return rt;const r=i=>aR(i,0,1,e,n);return i=>i===0||i===1?i:OS(r(i),t,s)}const oR=Rl(.42,0,1,1),lR=Rl(0,0,.58,1),LS=Rl(.42,0,.58,1),cR=e=>Array.isArray(e)&&typeof e[0]!="number",FS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$S=e=>t=>1-e(1-t),tx=e=>1-Math.sin(Math.acos(e)),BS=$S(tx),uR=FS(tx),zS=Rl(.33,1.53,.69,.99),nx=$S(zS),dR=FS(nx),hR=e=>(e*=2)<1?.5*nx(e):.5*(2-Math.pow(2,-10*(e-1))),fR={linear:rt,easeIn:oR,easeInOut:LS,easeOut:lR,circIn:tx,circInOut:uR,circOut:BS,backIn:nx,backInOut:dR,backOut:zS,anticipate:hR},W0=e=>{if(Array.isArray(e)){ex(e.length===4);const[t,n,s,r]=e;return Rl(t,n,s,r)}else if(typeof e=="string")return fR[e];return e},sx=(e,t)=>n=>!!(Al(n)&&pM.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),VS=(e,t,n)=>s=>{if(!Al(s))return s;const[r,i,a,l]=s.match(Wd);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},mR=e=>Nr(0,255,e),qh={...bi,transform:e=>Math.round(mR(e))},Jr={test:sx("rgb","red"),parse:VS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+qh.transform(e)+", "+qh.transform(t)+", "+qh.transform(n)+", "+To(Do.transform(s))+")"};function pR(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Km={test:sx("#"),parse:pR,transform:Jr.transform},Ui={test:sx("hsl","hue"),parse:VS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+rs.transform(To(t))+", "+rs.transform(To(n))+", "+To(Do.transform(s))+")"},$t={test:e=>Jr.test(e)||Km.test(e)||Ui.test(e),parse:e=>Jr.test(e)?Jr.parse(e):Ui.test(e)?Ui.parse(e):Km.parse(e),transform:e=>Al(e)?e:e.hasOwnProperty("red")?Jr.transform(e):Ui.transform(e)},Qe=(e,t,n)=>-n*e+n*t+e;function Hh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function gR({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,i=0,a=0;if(!t)r=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=Hh(c,l,e+1/3),i=Hh(c,l,e),a=Hh(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}const Gh=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},xR=[Km,Jr,Ui],yR=e=>xR.find(t=>t.test(e));function q0(e){const t=yR(e);let n=t.parse(e);return t===Ui&&(n=gR(n)),n}const US=(e,t)=>{const n=q0(e),s=q0(t),r={...n};return i=>(r.red=Gh(n.red,s.red,i),r.green=Gh(n.green,s.green,i),r.blue=Gh(n.blue,s.blue,i),r.alpha=Qe(n.alpha,s.alpha,i),Jr.transform(r))};function vR(e){var t,n;return isNaN(e)&&Al(e)&&(((t=e.match(Wd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(pS))===null||n===void 0?void 0:n.length)||0)>0}const WS={regex:fM,countKey:"Vars",token:"${v}",parse:rt},qS={regex:pS,countKey:"Colors",token:"${c}",parse:$t.parse},HS={regex:Wd,countKey:"Numbers",token:"${n}",parse:bi.parse};function Yh(e,{regex:t,countKey:n,token:s,parse:r}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...i.map(r)))}function Lu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Yh(n,WS),Yh(n,qS),Yh(n,HS),n}function GS(e){return Lu(e).values}function YS(e){const{values:t,numColors:n,numVars:s,tokenised:r}=Lu(e),i=t.length;return a=>{let l=r;for(let c=0;c<i;c++)c<s?l=l.replace(WS.token,a[c]):c<s+n?l=l.replace(qS.token,$t.transform(a[c])):l=l.replace(HS.token,To(a[c]));return l}}const bR=e=>typeof e=="number"?0:e;function wR(e){const t=GS(e);return YS(e)(t.map(bR))}const Sr={test:vR,parse:GS,createTransformer:YS,getAnimatableNone:wR},QS=(e,t)=>n=>`${n>0?t:e}`;function KS(e,t){return typeof e=="number"?n=>Qe(e,t,n):$t.test(e)?US(e,t):e.startsWith("var(")?QS(e,t):JS(e,t)}const XS=(e,t)=>{const n=[...e],s=n.length,r=e.map((i,a)=>KS(i,t[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}},jR=(e,t)=>{const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=KS(e[r],t[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}},JS=(e,t)=>{const n=Sr.createTransformer(t),s=Lu(e),r=Lu(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?gr(XS(s.values,r.values),n):QS(e,t)},ol=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},H0=(e,t)=>n=>Qe(e,t,n);function NR(e){return typeof e=="number"?H0:typeof e=="string"?$t.test(e)?US:JS:Array.isArray(e)?XS:typeof e=="object"?jR:H0}function SR(e,t,n){const s=[],r=n||NR(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=r(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||rt:t;l=gr(c,l)}s.push(l)}return s}function ZS(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(ex(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=SR(t,s,r),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=ol(e[d],e[d+1],u);return a[d](h)};return n?u=>c(Nr(e[0],e[i-1],u)):c}function CR(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=ol(0,t,s);e.push(Qe(n,1,r))}}function kR(e){const t=[0];return CR(t,e.length-1),t}function ER(e,t){return e.map(n=>n*t)}function DR(e,t){return e.map(()=>t||LS).splice(0,e.length-1)}function Fu({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=cR(s)?s.map(W0):W0(s),i={done:!1,value:t[0]},a=ER(n&&n.length===t.length?n:kR(t),e),l=ZS(a,t,{ease:Array.isArray(r)?r:DR(t,r)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function eC(e,t){return t?e*(1e3/t):0}const TR=5;function tC(e,t,n){const s=Math.max(t-TR,0);return eC(n-e(s),t-s)}const Qh=.001,PR=.01,_R=10,AR=.05,MR=1;function RR({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let r,i,a=1-t;a=Nr(AR,MR,a),e=Nr(PR,_R,Es(e)),a<1?(r=u=>{const d=u*a,h=d*e,f=d-n,m=Xm(u,a),p=Math.exp(-h);return Qh-f/m*p},i=u=>{const h=u*a*e,f=h*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-h),g=Xm(Math.pow(u,2),a);return(-r(u)+Qh>0?-1:1)*((f-m)*p)/g}):(r=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-Qh+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=OR(r,i,l);if(e=si(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:e}}}const IR=12;function OR(e,t,n){let s=n;for(let r=1;r<IR;r++)s=s-e(s)/t(s);return s}function Xm(e,t){return e*Math.sqrt(1-t*t)}const LR=["duration","bounce"],FR=["stiffness","damping","mass"];function G0(e,t){return t.some(n=>e[n]!==void 0)}function $R(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!G0(e,FR)&&G0(e,LR)){const n=RR(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function nC({keyframes:e,restDelta:t,restSpeed:n,...s}){const r=e[0],i=e[e.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=$R({...s,velocity:-Es(s.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-r,v=Es(Math.sqrt(l/u)),b=Math.abs(g)<5;n||(n=b?.01:2),t||(t=b?.005:.5);let y;if(p<1){const w=Xm(v,p);y=S=>{const N=Math.exp(-p*v*S);return i-N*((m+p*v*g)/w*Math.sin(w*S)+g*Math.cos(w*S))}}else if(p===1)y=w=>i-Math.exp(-v*w)*(g+(m+v*g)*w);else{const w=v*Math.sqrt(p*p-1);y=S=>{const N=Math.exp(-p*v*S),j=Math.min(w*S,300);return i-N*((m+p*v*g)*Math.sinh(j)+w*g*Math.cosh(j))/w}}return{calculatedDuration:f&&d||null,next:w=>{const S=y(w);if(f)a.done=w>=d;else{let N=m;w!==0&&(p<1?N=tC(y,w,S):N=0);const j=Math.abs(N)<=n,k=Math.abs(i-S)<=t;a.done=j&&k}return a.value=a.done?i:S,a}}}function Y0({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=n*t;const v=h+g,b=a===void 0?v:a(v);b!==v&&(g=b-h);const y=C=>-g*Math.exp(-C/s),w=C=>b+y(C),S=C=>{const P=y(C),T=w(C);f.done=Math.abs(P)<=u,f.value=f.done?b:T};let N,j;const k=C=>{m(f.value)&&(N=C,j=nC({keyframes:[f.value,p(f.value)],velocity:tC(w,C,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:C=>{let P=!1;return!j&&N===void 0&&(P=!0,S(C),k(C)),N!==void 0&&C>N?j.next(C-N):(!P&&S(C),f)}}}const BR=e=>{const t=({timestamp:n})=>e(n);return{start:()=>$e.update(t,!0),stop:()=>Rs(t),now:()=>Dt.isProcessing?Dt.timestamp:performance.now()}},Q0=2e4;function K0(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Q0;)t+=n,s=e.next(t);return t>=Q0?1/0:t}const zR={decay:Y0,inertia:Y0,tween:Fu,keyframes:Fu,spring:nC};function $u({autoplay:e=!0,delay:t=0,driver:n=BR,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,g,v;const b=()=>{v=new Promise(H=>{g=H})};b();let y;const w=zR[r]||Fu;let S;w!==Fu&&typeof s[0]!="number"&&(S=ZS([0,100],s,{clamp:!1}),s=[0,100]);const N=w({...f,keyframes:s});let j;l==="mirror"&&(j=w({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let k="idle",C=null,P=null,T=null;N.calculatedDuration===null&&i&&(N.calculatedDuration=K0(N));const{calculatedDuration:O}=N;let L=1/0,F=1/0;O!==null&&(L=O+a,F=L*(i+1)-a);let _=0;const B=H=>{if(P===null)return;m>0&&(P=Math.min(P,H)),m<0&&(P=Math.min(H-F/m,P)),C!==null?_=C:_=Math.round(H-P)*m;const J=_-t*(m>=0?1:-1),re=m>=0?J<0:J>F;_=Math.max(J,0),k==="finished"&&C===null&&(_=F);let oe=_,ge=N;if(i){const Q=Math.min(_,F)/L;let se=Math.floor(Q),E=Q%1;!E&&Q>=1&&(E=1),E===1&&se--,se=Math.min(se,i+1),!!(se%2)&&(l==="reverse"?(E=1-E,a&&(E-=a/L)):l==="mirror"&&(ge=j)),oe=Nr(0,1,E)*L}const we=re?{done:!1,value:s[0]}:ge.next(oe);S&&(we.value=S(we.value));let{done:M}=we;!re&&O!==null&&(M=m>=0?_>=F:_<=0);const G=C===null&&(k==="finished"||k==="running"&&M);return h&&h(we.value),G&&A(),we},W=()=>{y&&y.stop(),y=void 0},I=()=>{k="idle",W(),g(),b(),P=T=null},A=()=>{k="finished",d&&d(),W(),g()},R=()=>{if(p)return;y||(y=n(B));const H=y.now();c&&c(),C!==null?P=H-C:(!P||k==="finished")&&(P=H),k==="finished"&&b(),T=P,C=null,k="running",y.start()};e&&R();const V={then(H,J){return v.then(H,J)},get time(){return Es(_)},set time(H){H=si(H),_=H,C!==null||!y||m===0?C=H:P=y.now()-H/m},get duration(){const H=N.calculatedDuration===null?K0(N):N.calculatedDuration;return Es(H)},get speed(){return m},set speed(H){H===m||!y||(m=H,V.time=Es(_))},get state(){return k},play:R,pause:()=>{k="paused",C=_},stop:()=>{p=!0,k!=="idle"&&(k="idle",u&&u(),I())},cancel:()=>{T!==null&&B(T),I()},complete:()=>{k="finished"},sample:H=>(P=0,B(H))};return V}function VR(e){let t;return()=>(t===void 0&&(t=e()),t)}const UR=VR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),WR=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),uc=10,qR=2e4,HR=(e,t)=>t.type==="spring"||e==="backgroundColor"||!MS(t.ease);function GR(e,t,{onUpdate:n,onComplete:s,...r}){if(!(UR()&&WR.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=r;if(HR(t,r)){const w=$u({...r,repeat:0,delay:0});let S={done:!1,value:h[0]};const N=[];let j=0;for(;!S.done&&j<qR;)S=w.sample(j),N.push(S.value),j+=uc;p=void 0,h=N,f=j-uc,m="linear"}const g=nR(e.owner.current,t,h,{...r,duration:f,ease:m,times:p}),v=()=>{u=!1,g.cancel()},b=()=>{u=!0,$e.update(v),l(),d()};return g.onfinish=()=>{u||(e.set(sR(h,r)),s&&s(),b())},{then(w,S){return c.then(w,S)},attachTimeline(w){return g.timeline=w,g.onfinish=null,rt},get time(){return Es(g.currentTime||0)},set time(w){g.currentTime=si(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return Es(f)},play:()=>{a||(g.play(),Rs(v))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const S=$u({...r,autoplay:!1});e.setWithVelocity(S.sample(w-uc).value,S.sample(w).value,uc)}b()},complete:()=>{u||g.finish()},cancel:b}}function YR({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const r=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:rt,pause:rt,stop:rt,then:i=>(i(),Promise.resolve()),cancel:rt,complete:rt});return t?$u({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const QR={type:"spring",stiffness:500,damping:25,restSpeed:10},KR=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),XR={type:"keyframes",duration:.8},JR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZR=(e,{keyframes:t})=>t.length>2?XR:vi.has(e)?e.startsWith("scale")?KR(t[1]):QR:JR,Jm=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sr.test(t)||t==="0")&&!t.startsWith("url(")),eI=new Set(["brightness","contrast","saturate","opacity"]);function tI(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(Wd)||[];if(!s)return e;const r=n.replace(s,"");let i=eI.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const nI=/([a-z-]*)\(.*?\)/g,Zm={...Sr,getAnimatableNone:e=>{const t=e.match(nI);return t?t.map(tI).join(" "):e}},sI={...gS,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:Zm,WebkitFilter:Zm},rx=e=>sI[e];function sC(e,t){let n=rx(e);return n!==Zm&&(n=Sr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const rC=e=>/^0[^.\s]+$/.test(e);function rI(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||rC(e)}function iI(e,t,n,s){const r=Jm(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),rI(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=sC(t,l)}return i}function aI({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function ix(e,t){return e[t]||e.default||e}const oI={skipAnimations:!1},ax=(e,t,n,s={})=>r=>{const i=ix(s,e)||{},a=i.delay||s.delay||0;let{elapsed:l=0}=s;l=l-si(a);const c=iI(t,e,n,i),u=c[0],d=c[c.length-1],h=Jm(e,u),f=Jm(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(aI(i)||(m={...m,...ZR(e,m)}),m.duration&&(m.duration=si(m.duration)),m.repeatDelay&&(m.repeatDelay=si(m.repeatDelay)),!h||!f||tR.current||i.type===!1||oI.skipAnimations)return YR(m);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=GR(t,e,m);if(p)return p}return $u(m)};function Bu(e){return!!(Zt(e)&&e.add)}const iC=e=>/^\-?\d*\.?\d+$/.test(e);function ox(e,t){e.indexOf(t)===-1&&e.push(t)}function lx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class cx{constructor(){this.subscriptions=[]}add(t){return ox(this.subscriptions,t),()=>lx(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lI=e=>!isNaN(parseFloat(e));class cI{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:a}=Dt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,$e.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>$e.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=lI(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new cx);const s=this.events[t].add(n);return t==="change"?()=>{s(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?eC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ca(e,t){return new cI(e,t)}const aC=e=>t=>t.test(e),uI={test:e=>e==="auto",parse:e=>e},oC=[bi,ye,rs,Ws,xM,gM,uI],Wa=e=>oC.find(aC(e)),dI=[...oC,$t,Sr],hI=e=>dI.find(aC(e));function fI(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ca(n))}function mI(e,t){const n=Hd(e,t);let{transitionEnd:s={},transition:r={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...s};for(const a in i){const l=_M(i[a]);fI(e,a,l)}}function pI(e,t,n){var s,r;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(iC(d)||rC(d))?d=parseFloat(d):!hI(d)&&Sr.test(u)&&(d=sC(c,u)),e.addValue(c,ca(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function gI(e,t){return t?(t[e]||t.default||t).from:void 0}function xI(e,t,n){const s={};for(const r in e){const i=gI(r,t);if(i!==void 0)s[r]=i;else{const a=n.getValue(r);a&&(s[r]=a.get())}}return s}function yI({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function vI(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function lC(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(i=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&yI(d,h))continue;const p={delay:n,elapsed:0,...ix(i||{},h)};if(window.HandoffAppearAnimations){const b=e.getProps()[cS];if(b){const y=window.HandoffAppearAnimations(b,h,f,$e);y!==null&&(p.elapsed=y,p.isHandoff=!0)}}let g=!p.isHandoff&&!vI(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(ax(h,f,m,e.shouldReduceMotion&&vi.has(h)?{type:!1}:p));const v=f.animation;Bu(c)&&(c.add(h),v.then(()=>c.remove(h))),u.push(v)}return a&&Promise.all(u).then(()=>{a&&mI(e,a)}),u}function ep(e,t,n={}){const s=Hd(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(lC(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return bI(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function bI(e,t,n=0,s=0,r=1,i){const a=[],l=(e.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(wI).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(ep(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function wI(e,t){return e.sortNodePosition(t)}function jI(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(i=>ep(e,i,n));s=Promise.all(r)}else if(typeof t=="string")s=ep(e,t,n);else{const r=typeof t=="function"?Hd(e,t,n.custom):t;s=Promise.all(lC(e,r,n))}return s.then(()=>e.notify("AnimationComplete",t))}const NI=[...Wg].reverse(),SI=Wg.length;function CI(e){return t=>Promise.all(t.map(({animation:n,options:s})=>jI(e,n,s)))}function kI(e){let t=CI(e);const n=DI();let s=!0;const r=(c,u)=>{const d=Hd(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},g=1/0;for(let b=0;b<SI;b++){const y=NI[b],w=n[y],S=d[y]!==void 0?d[y]:h[y],N=il(S),j=y===u?w.isActive:null;j===!1&&(g=b);let k=S===h[y]&&S!==d[y]&&N;if(k&&s&&e.manuallyAnimateOnMount&&(k=!1),w.protectedKeys={...p},!w.isActive&&j===null||!S&&!w.prevProp||Vd(S)||typeof S=="boolean")continue;let P=EI(w.prevProp,S)||y===u&&w.isActive&&!k&&N||b>g&&N,T=!1;const O=Array.isArray(S)?S:[S];let L=O.reduce(r,{});j===!1&&(L={});const{prevResolvedValues:F={}}=w,_={...F,...L},B=W=>{P=!0,m.has(W)&&(T=!0,m.delete(W)),w.needsAnimating[W]=!0};for(const W in _){const I=L[W],A=F[W];if(p.hasOwnProperty(W))continue;let R=!1;Ou(I)&&Ou(A)?R=!_S(I,A):R=I!==A,R?I!==void 0?B(W):m.add(W):I!==void 0&&m.has(W)?B(W):w.protectedKeys[W]=!0}w.prevProp=S,w.prevResolvedValues=L,w.isActive&&(p={...p,...L}),s&&e.blockInitialAnimation&&(P=!1),P&&(!k||T)&&f.push(...O.map(W=>({animation:W,options:{type:y,...c}})))}if(m.size){const b={};m.forEach(y=>{const w=e.getBaseTarget(y);w!==void 0&&(b[y]=w)}),f.push({animation:b})}let v=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),s=!1,v?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function EI(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!_S(t,e):!1}function Mr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function DI(){return{animate:Mr(!0),whileInView:Mr(),whileHover:Mr(),whileTap:Mr(),whileDrag:Mr(),whileFocus:Mr(),exit:Mr()}}class TI extends _r{constructor(t){super(t),t.animationState||(t.animationState=kI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Vd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let PI=0;class _I extends _r{constructor(){super(...arguments),this.id=PI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const AI={animation:{Feature:TI},exit:{Feature:_I}},X0=(e,t)=>Math.abs(e-t);function MI(e,t){const n=X0(e.x,t.x),s=X0(e.y,t.y);return Math.sqrt(n**2+s**2)}class cC{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Xh(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=MI(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=Dt;this.history.push({...p,timestamp:g});const{onStart:v,onMove:b}=this.handlers;f||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Kh(f,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Xh(h.type==="pointercancel"?this.lastMoveEventInfo:Kh(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,v),p&&p(h,v)},!kS(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=qd(t),l=Kh(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Dt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,Xh(l,this.history)),this.removeListeners=gr(ks(this.contextWindow,"pointermove",this.handlePointerMove),ks(this.contextWindow,"pointerup",this.handlePointerUp),ks(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Rs(this.updatePoint)}}function Kh(e,t){return t?{point:t(e.point)}:e}function J0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xh({point:e},t){return{point:e,delta:J0(e,uC(t)),offset:J0(e,RI(t)),velocity:II(t,.1)}}function RI(e){return e[0]}function uC(e){return e[e.length-1]}function II(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=uC(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>si(t)));)n--;if(!s)return{x:0,y:0};const i=Es(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function hn(e){return e.max-e.min}function tp(e,t=0,n=.01){return Math.abs(e-t)<=n}function Z0(e,t,n,s=.5){e.origin=s,e.originPoint=Qe(t.min,t.max,e.origin),e.scale=hn(n)/hn(t),(tp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Qe(n.min,n.max,e.origin)-e.originPoint,(tp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Po(e,t,n,s){Z0(e.x,t.x,n.x,s?s.originX:void 0),Z0(e.y,t.y,n.y,s?s.originY:void 0)}function ev(e,t,n){e.min=n.min+t.min,e.max=e.min+hn(t)}function OI(e,t,n){ev(e.x,t.x,n.x),ev(e.y,t.y,n.y)}function tv(e,t,n){e.min=t.min-n.min,e.max=e.min+hn(t)}function _o(e,t,n){tv(e.x,t.x,n.x),tv(e.y,t.y,n.y)}function LI(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Qe(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Qe(n,e,s.max):Math.min(e,n)),e}function nv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function FI(e,{top:t,left:n,bottom:s,right:r}){return{x:nv(e.x,n,r),y:nv(e.y,t,s)}}function sv(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function $I(e,t){return{x:sv(e.x,t.x),y:sv(e.y,t.y)}}function BI(e,t){let n=.5;const s=hn(e),r=hn(t);return r>s?n=ol(t.min,t.max-s,e.min):s>r&&(n=ol(e.min,e.max-r,t.min)),Nr(0,1,n)}function zI(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const np=.35;function VI(e=np){return e===!1?e=0:e===!0&&(e=np),{x:rv(e,"left","right"),y:rv(e,"top","bottom")}}function rv(e,t,n){return{min:iv(e,t),max:iv(e,n)}}function iv(e,t){return typeof e=="number"?e:e[t]||0}const av=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wi=()=>({x:av(),y:av()}),ov=()=>({min:0,max:0}),ot=()=>({x:ov(),y:ov()});function vn(e){return[e("x"),e("y")]}function dC({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function UI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function WI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Jh(e){return e===void 0||e===1}function sp({scale:e,scaleX:t,scaleY:n}){return!Jh(e)||!Jh(t)||!Jh(n)}function zr(e){return sp(e)||hC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function hC(e){return lv(e.x)||lv(e.y)}function lv(e){return e&&e!=="0%"}function zu(e,t,n){const s=e-n,r=t*s;return n+r}function cv(e,t,n,s,r){return r!==void 0&&(e=zu(e,r,s)),zu(e,n,s)+t}function rp(e,t=0,n=1,s,r){e.min=cv(e.min,t,n,s,r),e.max=cv(e.max,t,n,s,r)}function fC(e,{x:t,y:n}){rp(e.x,t.translate,t.scale,t.originPoint),rp(e.y,n.translate,n.scale,n.originPoint)}function qI(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let i,a;for(let l=0;l<r;l++){i=n[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&qi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,fC(e,a)),s&&zr(i.latestValues)&&qi(e,i.latestValues))}t.x=uv(t.x),t.y=uv(t.y)}function uv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Gs(e,t){e.min=e.min+t,e.max=e.max+t}function dv(e,t,[n,s,r]){const i=t[r]!==void 0?t[r]:.5,a=Qe(e.min,e.max,i);rp(e,t[n],t[s],a,t.scale)}const HI=["x","scaleX","originX"],GI=["y","scaleY","originY"];function qi(e,t){dv(e.x,t,HI),dv(e.y,t,GI)}function mC(e,t){return dC(WI(e.getBoundingClientRect(),t))}function YI(e,t,n){const s=mC(e,n),{scroll:r}=t;return r&&(Gs(s.x,r.offset.x),Gs(s.y,r.offset.y)),s}const pC=({current:e})=>e?e.ownerDocument.defaultView:null,QI=new WeakMap;class KI{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qd(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=DS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vn(v=>{let b=this.getAxisMotionValue(v).get()||0;if(rs.test(b)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[v];w&&(b=hn(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),p&&$e.update(()=>p(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:v}=h;if(m&&this.currentDirection===null){this.currentDirection=XI(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>vn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new cC(t,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:pC(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&$e.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!dc(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=LI(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Vi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=FI(r.layoutBox,n):this.constraints=!1,this.elastic=VI(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=zI(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Vi(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=YI(s,r.root,this.visualElement.getTransformPagePoint());let a=$I(r.layout.layoutBox,i);if(n){const l=n(UI(a));this.hasMutatedConstraints=!!l,l&&(a=dC(l))}return a}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=vn(d=>{if(!dc(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,p={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(ax(t,s,0,n))}stopAnimation(){vn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){vn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){vn(n=>{const{drag:s}=this.getProps();if(!dc(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n];i.set(t[n]-Qe(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Vi(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};vn(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();r[a]=BI({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),vn(a=>{if(!dc(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Qe(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;QI.set(this.visualElement,this);const t=this.visualElement.current,n=ks(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Vi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const a=js(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(vn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=np,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function dc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function XI(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class JI extends _r{constructor(t){super(t),this.removeGroupControls=rt,this.removeListeners=rt,this.controls=new KI(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rt}unmount(){this.removeGroupControls(),this.removeListeners()}}const hv=e=>(t,n)=>{e&&$e.update(()=>e(t,n))};class ZI extends _r{constructor(){super(...arguments),this.removePointerDownListener=rt}onPointerDown(t){this.session=new cC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:hv(t),onStart:hv(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&$e.update(()=>r(i,a))}}}mount(){this.removePointerDownListener=ks(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function e4(){const e=x.useContext(Bd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=x.useId();return x.useEffect(()=>s(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const Xc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const qa={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ye.test(e))e=parseFloat(e);else return e;const n=fv(e,t.target.x),s=fv(e,t.target.y);return`${n}% ${s}%`}},t4={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=Sr.parse(e);if(r.length>5)return s;const i=Sr.createTransformer(e),a=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+a]/=l,r[1+a]/=c;const u=Qe(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class n4 extends ee.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=t;cM(s4),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Xc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||$e.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function gC(e){const[t,n]=e4(),s=x.useContext(Hg);return ee.createElement(n4,{...e,layoutGroup:s,switchLayoutGroup:x.useContext(dS),isPresent:t,safeToRemove:n})}const s4={borderRadius:{...qa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qa,borderTopRightRadius:qa,borderBottomLeftRadius:qa,borderBottomRightRadius:qa,boxShadow:t4},xC=["TopLeft","TopRight","BottomLeft","BottomRight"],r4=xC.length,mv=e=>typeof e=="string"?parseFloat(e):e,pv=e=>typeof e=="number"||ye.test(e);function i4(e,t,n,s,r,i){r?(e.opacity=Qe(0,n.opacity!==void 0?n.opacity:1,a4(s)),e.opacityExit=Qe(t.opacity!==void 0?t.opacity:1,0,o4(s))):i&&(e.opacity=Qe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let a=0;a<r4;a++){const l=`border${xC[a]}Radius`;let c=gv(t,l),u=gv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||pv(c)===pv(u)?(e[l]=Math.max(Qe(mv(c),mv(u),s),0),(rs.test(u)||rs.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Qe(t.rotate||0,n.rotate||0,s))}function gv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const a4=yC(0,.5,BS),o4=yC(.5,.95,rt);function yC(e,t,n){return s=>s<e?0:s>t?1:n(ol(e,t,s))}function xv(e,t){e.min=t.min,e.max=t.max}function gn(e,t){xv(e.x,t.x),xv(e.y,t.y)}function yv(e,t,n,s,r){return e-=t,e=zu(e,1/n,s),r!==void 0&&(e=zu(e,1/r,s)),e}function l4(e,t=0,n=1,s=.5,r,i=e,a=e){if(rs.test(t)&&(t=parseFloat(t),t=Qe(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Qe(i.min,i.max,s);e===i&&(l-=t),e.min=yv(e.min,t,n,l,r),e.max=yv(e.max,t,n,l,r)}function vv(e,t,[n,s,r],i,a){l4(e,t[n],t[s],t[r],t.scale,i,a)}const c4=["x","scaleX","originX"],u4=["y","scaleY","originY"];function bv(e,t,n,s){vv(e.x,t,c4,n?n.x:void 0,s?s.x:void 0),vv(e.y,t,u4,n?n.y:void 0,s?s.y:void 0)}function wv(e){return e.translate===0&&e.scale===1}function vC(e){return wv(e.x)&&wv(e.y)}function d4(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function bC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function jv(e){return hn(e.x)/hn(e.y)}class h4{constructor(){this.members=[]}add(t){ox(this.members,t),t.scheduleRender()}remove(t){if(lx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Nv(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const f4=(e,t)=>e.depth-t.depth;class m4{constructor(){this.children=[],this.isDirty=!1}add(t){ox(this.children,t),this.isDirty=!0}remove(t){lx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(f4),this.isDirty=!1,this.children.forEach(t)}}function p4(e,t){const n=performance.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(Rs(s),e(i-t))};return $e.read(s,!0),()=>Rs(s)}function g4(e){window.MotionDebug&&window.MotionDebug.record(e)}function x4(e){return e instanceof SVGElement&&e.tagName!=="svg"}function y4(e,t,n){const s=Zt(e)?e:ca(e);return s.start(ax("",s,t,n)),s.animation}const Sv=["","X","Y","Z"],v4={visibility:"hidden"},Cv=1e3;let b4=0;const Vr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function wC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},l=t==null?void 0:t()){this.id=b4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vr.totalNodes=Vr.resolvedTargetDeltas=Vr.recalculatedProjection=0,this.nodes.forEach(N4),this.nodes.forEach(D4),this.nodes.forEach(T4),this.nodes.forEach(S4),g4(Vr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new m4)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new cx),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=x4(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=p4(f,250),Xc.hasAnimatedSinceResize&&(Xc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ev))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||R4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=d.getProps(),y=!this.targetLayout||!bC(this.targetLayout,p)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const S={...ix(g,"layout"),onPlay:v,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||Ev(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Rs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kv);return}this.isUpdating||this.nodes.forEach(k4),this.isUpdating=!1,this.nodes.forEach(E4),this.nodes.forEach(w4),this.nodes.forEach(j4),this.clearAllSnapshots();const l=performance.now();Dt.delta=Nr(0,1e3/60,l-Dt.timestamp),Dt.timestamp=l,Dt.isProcessing=!0,Vh.update.process(Dt),Vh.preRender.process(Dt),Vh.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(C4),this.sharedNodes.forEach(_4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!vC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||zr(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),I4(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ot();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Gs(l.x,c.offset.x),Gs(l.y,c.offset.y)),l}removeElementScroll(a){const l=ot();gn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){gn(l,a);const{scroll:f}=this.root;f&&(Gs(l.x,-f.offset.x),Gs(l.y,-f.offset.y))}Gs(l.x,d.offset.x),Gs(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=ot();gn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&qi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zr(d.latestValues)&&qi(c,d.latestValues)}return zr(this.latestValues)&&qi(c,this.latestValues),c}removeTransform(a){const l=ot();gn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zr(u.latestValues))continue;sp(u.latestValues)&&u.updateSnapshot();const d=ot(),h=u.measurePageBox();gn(d,h),bv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zr(this.latestValues)&&bv(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),_o(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gn(this.target,this.layout.layoutBox),fC(this.target,this.targetDelta)):gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),_o(this.relativeTargetOrigin,this.target,m.target),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||sp(this.parent.latestValues)||hC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;gn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;qI(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=Wi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Wi(),this.projectionDeltaWithTransform=Wi());const g=this.projectionTransform;Po(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Nv(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Vr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Wi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ot(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,v=this.getStack(),b=!v||v.members.length<=1,y=!!(g&&!b&&this.options.crossfade===!0&&!this.path.some(M4));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const N=S/1e3;Dv(h.x,a.x,N),Dv(h.y,a.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_o(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),A4(this.relativeTarget,this.relativeTargetOrigin,f,N),w&&d4(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ot()),gn(w,this.relativeTarget)),g&&(this.animationValues=d,i4(d,u,this.latestValues,N,y,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Rs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{Xc.hasAnimatedSinceResize=!0,this.currentAnimation=y4(0,Cv,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Cv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&jC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ot();const h=hn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=hn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}gn(l,c),qi(l,d),Po(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new h4),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Sv.length;d++){const h="rotate"+Sv[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return v4;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Kc(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Kc(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!zr(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Nv(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Ru){if(f[g]===void 0)continue;const{correct:v,applyTo:b}=Ru[g],y=u.transform==="none"?f[g]:v(f[g],h);if(b){const w=b.length;for(let S=0;S<w;S++)u[b[S]]=y}else u[g]=y}return this.options.layoutId&&(u.pointerEvents=h===this?Kc(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(kv),this.root.sharedNodes.clear()}}}function w4(e){e.updateLayout()}function j4(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?vn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=hn(f);f.min=s[h].min,f.max=f.min+m}):jC(i,n.layoutBox,s)&&vn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=hn(s[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Wi();Po(l,s,n.layoutBox);const c=Wi();a?Po(c,e.applyTransform(r,!0),n.measuredBox):Po(c,s,n.layoutBox);const u=!vC(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=ot();_o(p,n.layoutBox,f.layoutBox);const g=ot();_o(g,s,m.layoutBox),bC(p,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function N4(e){Vr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function S4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function C4(e){e.clearSnapshot()}function kv(e){e.clearMeasurements()}function k4(e){e.isLayoutDirty=!1}function E4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ev(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D4(e){e.resolveTargetDelta()}function T4(e){e.calcProjection()}function P4(e){e.resetRotation()}function _4(e){e.removeLeadSnapshot()}function Dv(e,t,n){e.translate=Qe(t.translate,0,n),e.scale=Qe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Tv(e,t,n,s){e.min=Qe(t.min,n.min,s),e.max=Qe(t.max,n.max,s)}function A4(e,t,n,s){Tv(e.x,t.x,n.x,s),Tv(e.y,t.y,n.y,s)}function M4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const R4={duration:.45,ease:[.4,0,.1,1]},Pv=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),_v=Pv("applewebkit/")&&!Pv("chrome/")?Math.round:rt;function Av(e){e.min=_v(e.min),e.max=_v(e.max)}function I4(e){Av(e.x),Av(e.y)}function jC(e,t,n){return e==="position"||e==="preserve-aspect"&&!tp(jv(t),jv(n),.2)}const O4=wC({attachResizeListener:(e,t)=>js(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zh={current:void 0},NC=wC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zh.current){const e=new O4({});e.mount(window),e.setOptions({layoutScroll:!0}),Zh.current=e}return Zh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),L4={pan:{Feature:ZI},drag:{Feature:JI,ProjectionNode:NC,MeasureLayout:gC}},F4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function $4(e){const t=F4.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function ip(e,t,n=1){const[s,r]=$4(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const a=i.trim();return iC(a)?parseFloat(a):a}else return Ym(r)?ip(r,t,n+1):r}function B4(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const i=r.get();if(!Ym(i))return;const a=ip(i,s);a&&r.set(a)});for(const r in t){const i=t[r];if(!Ym(i))continue;const a=ip(i,s);a&&(t[r]=a,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:t,transitionEnd:n}}const z4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),SC=e=>z4.has(e),V4=e=>Object.keys(e).some(SC),Mv=e=>e===bi||e===ye,Rv=(e,t)=>parseFloat(e.split(", ")[t]),Iv=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return Rv(r[1],t);{const i=s.match(/^matrix\((.+)\)$/);return i?Rv(i[1],e):0}},U4=new Set(["x","y","z"]),W4=_l.filter(e=>!U4.has(e));function q4(e){const t=[];return W4.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const ua={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Iv(4,13),y:Iv(5,14)};ua.translateX=ua.x;ua.translateY=ua.y;const H4=(e,t,n)=>{const s=t.measureViewportBox(),r=t.current,i=getComputedStyle(r),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=ua[u](s,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=ua[u](c,i)}),e},G4=(e,t,n={},s={})=>{t={...t},s={...s};const r=Object.keys(t).filter(SC);let i=[],a=!1;const l=[];if(r.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Wa(d);const f=t[c];let m;if(Ou(f)){const p=f.length,g=f[0]===null?1:0;d=f[g],h=Wa(d);for(let v=g;v<p&&f[v]!==null;v++)m?ex(Wa(f[v])===m):m=Wa(f[v])}else m=Wa(f);if(h!==m)if(Mv(h)&&Mv(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===ye&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(a||(i=q4(e),a=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=H4(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),zd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function Y4(e,t,n,s){return V4(t)?G4(e,t,n,s):{target:t,transitionEnd:s}}const Q4=(e,t,n,s)=>{const r=B4(e,t,s);return t=r.target,s=r.transitionEnd,Y4(e,t,n,s)},ap={current:null},CC={current:!1};function K4(){if(CC.current=!0,!!zd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ap.current=e.matches;e.addListener(t),t()}else ap.current=!1}function X4(e,t,n){const{willChange:s}=t;for(const r in t){const i=t[r],a=n[r];if(Zt(i))e.addValue(r,i),Bu(s)&&s.add(r);else if(Zt(a))e.addValue(r,ca(i,{owner:e})),Bu(s)&&s.remove(r);else if(a!==i)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(r);e.addValue(r,ca(l!==void 0?l:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ov=new WeakMap,kC=Object.keys(al),J4=kC.length,Lv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Z4=qg.length;class eO{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$e.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Ud(n),this.isVariantNode=uS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&Zt(f)&&(f.set(l[h],!1),Bu(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Ov.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),CC.current||K4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ap.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ov.delete(this.current),this.projection&&this.projection.unmount(),Rs(this.notifyUpdate),Rs(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=vi.has(t),r=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&$e.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,r,i){let a,l;for(let c=0;c<J4;c++){const u=kC[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=al[u];f&&(a=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Vi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Lv.length;s++){const r=Lv[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=X4(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<Z4;s++){const r=qg[s],i=this.props[r];(il(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=ca(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=Zg(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Zt(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new cx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class EC extends eO{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:r},i){let a=xI(s,t||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),a&&(a=r(a))),i){pI(this,s,a);const l=Q4(this,s,a,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function tO(e){return window.getComputedStyle(e)}class nO extends EC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(vi.has(n)){const s=rx(n);return s&&s.default||0}else{const s=tO(t),r=(mS(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return mC(t,n)}build(t,n,s,r){Yg(t,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Jg(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,r){bS(t,n,s,r)}}class sO extends EC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(vi.has(n)){const s=rx(n);return s&&s.default||0}return n=wS.has(n)?n:Ug(n),t.getAttribute(n)}measureInstanceViewportBox(){return ot()}scrapeMotionValuesFromProps(t,n){return NS(t,n)}build(t,n,s,r){Kg(t,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,s,r){jS(t,n,s,r)}mount(t){this.isSVGTag=Xg(t.tagName),super.mount(t)}}const rO=(e,t)=>Gg(e)?new sO(t,{enableHardwareAcceleration:!1}):new nO(t,{enableHardwareAcceleration:!0}),iO={layout:{ProjectionNode:NC,MeasureLayout:gC}},aO={...AI,...JM,...L4,...iO},Ks=oM((e,t)=>$M(e,t,aO,rO));function DC(){const e=x.useRef(!1);return Vg(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function oO(){const e=DC(),[t,n]=x.useState(0),s=x.useCallback(()=>{e.current&&n(t+1)},[t]);return[x.useCallback(()=>$e.postRender(s),[s]),t]}class lO extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cO({children:e,isPresent:t}){const n=x.useId(),s=x.useRef(null),r=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=r.current;if(t||!s.current||!i||!a)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement(lO,{isPresent:t,childRef:s,sizeRef:r},x.cloneElement(e,{ref:s}))}const ef=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const l=SS(uO),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return x.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),x.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),a==="popLayout"&&(e=x.createElement(cO,{isPresent:n},e)),x.createElement(Bd.Provider,{value:u},e)};function uO(){return new Map}function dO(e){return x.useEffect(()=>()=>e(),[])}const Ur=e=>e.key||"";function hO(e,t){e.forEach(n=>{const s=Ur(n);t.set(s,n)})}function fO(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const ux=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=x.useContext(Hg).forceRender||oO()[0],c=DC(),u=fO(e);let d=u;const h=x.useRef(new Map).current,f=x.useRef(d),m=x.useRef(new Map).current,p=x.useRef(!0);if(Vg(()=>{p.current=!1,hO(u,m),f.current=d}),dO(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return x.createElement(x.Fragment,null,d.map(y=>x.createElement(ef,{key:Ur(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},y)));d=[...d];const g=f.current.map(Ur),v=u.map(Ur),b=g.length;for(let y=0;y<b;y++){const w=g[y];v.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((y,w)=>{if(v.indexOf(w)!==-1)return;const S=m.get(w);if(!S)return;const N=g.indexOf(w);let j=y;if(!j){const k=()=>{h.delete(w);const C=Array.from(m.keys()).filter(P=>!v.includes(P));if(C.forEach(P=>m.delete(P)),f.current=u.filter(P=>{const T=Ur(P);return T===w||C.includes(T)}),!h.size){if(c.current===!1)return;l(),s&&s()}};j=x.createElement(ef,{key:Ur(S),isPresent:!1,onExitComplete:k,custom:t,presenceAffectsLayout:i,mode:a},S),h.set(w,j)}d.splice(N,0,j)}),d=d.map(y=>{const w=y.key;return h.has(w)?y:x.createElement(ef,{key:Ur(y),isPresent:!0,presenceAffectsLayout:i,mode:a},y)}),x.createElement(x.Fragment,null,h.size?d:d.map(y=>x.cloneElement(y)))},mO="/assets/asp-logo-Cq2CSw-i.jpg",pO="/crane-icon.svg",gO=[{label:"Dashboard",icon:o.jsx(TA,{size:18}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:o.jsx(SA,{size:18}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:o.jsx(DA,{size:18}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:o.jsx(eS,{size:18}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:o.jsx(Id,{size:18}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:o.jsx(as,{size:18}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:o.jsx($g,{size:18}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:o.jsx(ZN,{size:18}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:o.jsx(Wn,{size:18}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:o.jsx(rl,{size:18}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:o.jsx(Ut,{size:18}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:o.jsx(MA,{size:18}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Template Builder",icon:o.jsx(Ut,{size:18}),href:"/admin/templates",roles:["admin","sales_agent"]}];function xO({isMobileOpen:e=!1,onMobileClose:t,isCollapsed:n,onCollapseToggle:s}){const{user:r}=Ge(),i=Os(),[a,l]=x.useState(!1),c=n!==void 0,u=c?n:a;if(x.useEffect(()=>{const v=()=>{window.innerWidth<1024&&l(!0)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),!r)return null;const d=gO.filter(v=>v.roles.includes(r.role)),h=(v,b)=>b?i.pathname===v:v==="/dashboard"&&i.pathname==="/"?!0:i.pathname.startsWith(v),f=()=>{c&&s?s(!u):l(v=>!v)},m=o.jsx(ux,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(Ks.div,{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),o.jsx(Ks.aside,{className:"fixed inset-y-0 left-0 z-50 w-72 max-w-[85%] bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-2xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},role:"navigation","aria-label":"Mobile navigation",children:g(!1)})]})}),p=o.jsx("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${u?"w-16":"w-72"} bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-xl`,role:"navigation","aria-label":"Main navigation",children:g(u)});return o.jsxs(o.Fragment,{children:[m,p]});function g(v){return o.jsxs("div",{className:"flex flex-col h-full text-white",children:[o.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-white/10",children:[o.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors duration-200 focus:outline-none","aria-label":v?"Expand sidebar":"Collapse sidebar",children:o.jsx(sS,{className:"h-6 w-6 text-white"})}),o.jsxs(es,{to:"/dashboard",className:"flex items-center group","aria-label":"Go to dashboard",children:[o.jsx("img",{src:mO,alt:"ASP Cranes",className:`object-contain transition-all duration-300 group-hover:scale-105 ${v?"h-8 w-8":"h-10 w-auto"}`,onError:b=>{b.currentTarget.src=pO,b.currentTarget.onerror=null}}),!v&&o.jsx(Ks.span,{className:"ml-3 text-xl font-bold bg-gradient-to-r from-white to-brand-gold bg-clip-text text-transparent",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"ASP CRM"})]})]}),o.jsx("nav",{className:"flex-1 py-6",role:"navigation",children:o.jsx("ul",{className:"space-y-1 px-3",role:"list",children:d.map(b=>{const y=h(b.href,b.end);return o.jsx("li",{role:"listitem",children:o.jsxs(es,{to:b.href,className:`group flex items-center rounded-lg transition-all duration-200 ${v?"justify-center p-3":"p-3"} ${y?"bg-brand-gold text-brand-blue font-semibold shadow-lg scale-105":"text-white/90 hover:bg-white/10 hover:text-white hover:scale-[1.02]"}`,onClick:t,"aria-current":y?"page":void 0,children:[o.jsx("span",{className:`flex-shrink-0 transition-transform group-hover:scale-110 ${y?"text-brand-blue":""}`,children:b.icon}),!v&&o.jsx(Ks.span,{className:"ml-3 text-sm font-medium",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05},children:b.label}),v&&o.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50 whitespace-nowrap",children:[b.label,o.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},b.href)})})}),o.jsx("div",{className:"p-4 border-t border-white/10",children:o.jsxs("div",{className:`flex items-center ${v?"justify-center":"space-x-3"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:(r==null?void 0:r.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(r==null?void 0:r.name)||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-brand-gold/50 hover:border-brand-gold transition-colors"})}),!v&&r&&o.jsxs(Ks.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[o.jsx("p",{className:"text-sm font-semibold text-white truncate",children:r.name||"User"}),o.jsx("p",{className:"text-xs text-white/70 truncate capitalize",children:r.role?r.role.replace("_"," "):"User"}),o.jsxs("button",{onClick:()=>{t&&t();const b=new CustomEvent("sidebar-logout");document.dispatchEvent(b)},className:"mt-2 flex items-center text-xs text-white/80 hover:text-brand-gold px-2 py-1 rounded-md hover:bg-white/10 transition-all duration-200","aria-label":"Logout",children:[o.jsx(nS,{className:"h-3 w-3 mr-2"}),"Logout"]})]})]})})]})}}const te=async()=>null,dt=async()=>[],op=async()=>({success:!0}),lp=async()=>({success:!1,error:"Service disabled in production"}),Sn=()=>{},yO=Sn,vO=Sn,bO=Sn,wO=Sn,jO=Sn,NO=Sn,SO=()=>!1,CO=Sn,kO=lp,EO=op,DO=te,TO=te,PO=te,_O=te,AO=te,MO=te,cp=te,RO=te,TC=dt,IO=te,PC=te,OO=te,LO=te,FO=te,$O=dt,BO=te,zO=te,VO=te,UO=te,_C=te,WO=te,qO=te,HO=dt,GO=te,AC=dt,MC=te,YO=dt,QO=dt,KO=te,XO=te,JO=te,ZO=dt,eL=te,tL=dt,nL=te,sL=te,rL=te,iL=te,aL=dt,oL=te,lL=te,cL=dt,uL=te,dL=te,hL=te,fL=te,mL=dt,pL=te,gL=te,xL=dt,yL=dt,vL=te,bL=te,wL=te,jL=te,NL=te,RC=te,IC=te,OC=te,LC=te,FC=te,$C=te,BC=te,SL=te,zC=dt,VC=te,CL=te,kL=te,EL=Sn,UC=dt,DL=te,TL=te,PL=te,WC=dt,qC=te,_L=te,AL=te,HC=dt,GC=te,YC=te,QC=te,KC=te,ML=te,XC=(e,t)=>(t==null?void 0:t.content)||"",JC=()=>[],Jc=()=>({}),RL=e=>`$${e||0}`,IL=e=>e?new Date(e).toLocaleDateString():"",OL=()=>!0,LL=()=>!0,FL=e=>e||{},$L=e=>(e==null?void 0:e.id)||"",Zc={get:te,post:te,put:te,delete:te,create:te,update:te,list:dt},BL={},zL={},VL={},UL={},WL={},qL={},HL={},GL={},YL={},QL={},KL={},XL={},JL={signIn:lp,signOutUser:op,getCurrentUser:te,create:te,read:te,update:te,delete:te,list:dt,createDevToken:Sn,initAuthDebug:Sn,logAuthState:Sn,noop:Sn,asyncNull:te,asyncEmptyArray:dt,asyncSuccess:op,asyncError:lp},Fv=Object.freeze(Object.defineProperty({__proto__:null,Activity:BL,Customer:WL,Deal:HL,Equipment:GL,Job:UL,Lead:VL,Notification:XL,Quotation:qL,Service:QL,SiteAssessment:KL,Template:YL,User:zL,checkAuthStatus:jO,checkForDevTokens:SO,cleanupDevArtifacts:NO,createActivity:DL,createCustomer:JO,createDeal:fL,createDevToken:yO,createEquipment:bL,createJob:qO,createLead:FO,createNotification:CL,createQuotation:iL,createService:GC,createSiteAssessment:qC,createTemplate:RO,createUser:_O,debugAuth:wO,default:JL,deleteActivity:PL,deleteContact:nL,deleteCustomer:eL,deleteDeal:pL,deleteEquipment:wL,deleteJob:GO,deleteLead:BO,deleteNotification:kL,deleteQuotation:oL,deleteService:QC,deleteSiteAssessment:AL,deleteTemplate:IO,deleteUser:AO,extractDataFromApiResponse:FL,formatCurrency:RL,formatDate:IL,getAdditionalParamsConfig:FC,getAllEquipment:YO,getAllOperators:QO,getAvailablePlaceholders:JC,getConfig:jL,getContactsByCustomer:tL,getCurrentUser:DO,getCustomer:KO,getCustomerIdentifier:$L,getCustomers:ZO,getDeal:uL,getDealById:gL,getDeals:mL,getDefaultTemplateConfig:BC,getEquipment:xL,getEquipmentByCategory:yL,getEquipmentById:MC,getHeaders:Jc,getJob:UO,getJobById:_C,getJobs:HO,getJobsByOperator:AC,getLead:OO,getLeads:$O,getQuotation:sL,getQuotationById:lL,getQuotationConfig:RC,getQuotations:aL,getQuotationsForLead:cL,getRecentActivities:UC,getResourceRatesConfig:OC,getServices:HC,getSiteAssessments:WC,getTemplate:MO,getTemplateById:PC,getTemplates:TC,getUserById:TO,getUserNotifications:zC,initAuthDebug:vO,jobApiClient:Zc,logAuthState:bO,markNotificationAsRead:VC,mergeQuotationWithTemplate:XC,mergeTemplate:ML,monitorOperation:EL,removeDevTokens:CO,signIn:kO,signOutUser:EO,toggleServiceStatus:KC,updateActivity:TL,updateAdditionalParamsConfig:$C,updateConfig:NL,updateCustomer:XO,updateDeal:dL,updateDealStage:hL,updateDefaultTemplateConfig:SL,updateEquipment:vL,updateJob:WO,updateLead:LO,updateLeadAssignment:VO,updateLeadStatus:zO,updateQuotation:rL,updateQuotationConfig:IC,updateResourceRatesConfig:LC,updateService:YC,updateSiteAssessment:_L,updateTemplate:cp,updateUser:PO,validateEmail:OL,validatePhone:LL},Symbol.toStringTag,{value:"Module"}));function ZC(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=ZC(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function e2(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=ZC(e))&&(s&&(s+=" "),s+=t);return s}const $v=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Bv=e2,Na=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Bv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=$v(d)||$v(h);return r[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[g,v]=p;return Array.isArray(v)?v.includes({...i,...l}[g]):{...i,...l}[g]===v})?[...u,h,f]:u},[]);return Bv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},ZL=Na("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function ll({className:e,variant:t,size:n,...s}){return o.jsx("div",{className:ZL({variant:t,size:n,className:e}),...s})}const t2=x.memo(({notification:e,onClick:t})=>o.jsx("button",{onClick:()=>t(e),className:`w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors ${e.read?"":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-brand-blue"}`,"aria-describedby":`notification-${e.id}`,children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${e.read?"bg-gray-300":"bg-brand-blue"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),e.message&&o.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt||Date.now()).toLocaleDateString()})]})]})}));t2.displayName="NotificationItem";const e5=x.memo(function({onMobileMenuClick:t}){const{user:n,logout:s}=Ge(),r=Mn(),[i,a]=x.useState([]),[l,c]=x.useState(!1),[u,d]=x.useState(!1);x.useEffect(()=>{n&&h()},[n]),x.useEffect(()=>{const g=v=>{v.target.closest("[data-dropdown]")||(c(!1),d(!1))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=async()=>{if(n)try{const g=await zC(n.id);a(g)}catch(g){console.error("Failed to fetch notifications:",g)}},f=async()=>{try{await s(),r("/login")}catch(g){console.error("Logout error:",g),r("/login")}},m=async g=>{if(!g.read)try{await VC(g.id),await h()}catch(v){console.error("Failed to mark notification as read:",v)}g.link&&r(g.link),c(!1)},p=i.filter(g=>!g.read).length;return o.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm border-b border-gray-200/60 h-16 flex items-center justify-between px-4 lg:px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[t&&o.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Toggle navigation menu",children:o.jsx(sS,{className:"h-5 w-5 text-gray-700"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-brand-blue to-brand-blue/80 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:"ASP CRM"}),o.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Crane Management System"})]})]})]}),o.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search projects, customers, equipment...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all","aria-label":"Search"})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Quick settings",children:o.jsx(rl,{className:"h-5 w-5 text-gray-600"})}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":`Notifications ${p>0?`(${p} unread)`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[o.jsx(T0,{className:"h-5 w-5 text-gray-600"}),p>0&&o.jsx(ll,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center animate-pulse",children:p>99?"99+":p})]}),l&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[p," unread"]})]})}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(T0,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):o.jsx("div",{className:"p-2 space-y-1",children:i.map(g=>o.jsx(t2,{notification:g,onClick:m},g.id))})}),i.length>0&&o.jsx("div",{className:"p-3 border-t border-gray-100",children:o.jsx("button",{className:"w-full text-sm text-brand-blue hover:text-brand-blue/80 font-medium",children:"View all notifications"})})]})]}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"User menu","aria-expanded":u,"aria-haspopup":"true",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-200 hover:border-brand-blue/30 transition-colors"}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-400 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"hidden sm:block text-left",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 leading-tight",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 capitalize leading-tight",children:n!=null&&n.role?n.role.replace("_"," "):"User"})]})]}),u&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-3 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-10 w-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:(n==null?void 0:n.email)||"user@example.com"})]})]})}),o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(la,{className:"h-4 w-4 mr-3 text-gray-400"}),"View Profile"]}),o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(rl,{className:"h-4 w-4 mr-3 text-gray-400"}),"Account Settings"]})]}),o.jsx("div",{className:"border-t border-gray-100 py-2",children:o.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[o.jsx(nS,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]})]})]})]})}),t5=x.memo(function({requiredRole:t,children:n}){const{isAuthenticated:s,user:r,logout:i}=Ge(),a=Mn(),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[h,f]=x.useState(!1),m=x.useRef(!1);if(x.useEffect(()=>{const g=()=>{i().then(()=>{a("/login")}).catch(v=>{console.error("Logout error:",v),a("/login")})};return document.addEventListener("sidebar-logout",g),()=>{document.removeEventListener("sidebar-logout",g)}},[i,a]),x.useEffect(()=>{m.current},[a,s,r,t]),x.useEffect(()=>{const g=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),l)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-brand-gold rounded-full animate-spin",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Application"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please wait..."})]})});if(!s)return o.jsx(Bn,{to:"/login"});if(t&&(r==null?void 0:r.role)!==t)return o.jsx(Bn,{to:"/dashboard"});const p=()=>{d(!u)};return o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 overflow-hidden",children:[o.jsx(xO,{isMobileOpen:u,onMobileClose:()=>d(!1),isCollapsed:h,onCollapseToggle:f}),o.jsxs("div",{className:`flex flex-col flex-1 overflow-hidden transition-all duration-300 ${h?"lg:ml-16":"lg:ml-72"}`,children:[o.jsx(e5,{onMobileMenuClick:p}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-transparent",children:o.jsx("div",{className:"min-h-full",children:n||o.jsx(VN,{})})})]})]})});let tf=null;const da=()=>{if(tf!==null)return tf;const e={viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return tf=n,n},Vu=()=>!da(),n5=(e=!1)=>{const t={"Content-Type":"application/json"};if(e)return t["x-bypass-auth"]="development-only-123",console.log("🔓 Development bypass header added, skipping JWT token"),t;const n=localStorage.getItem("auth-token")||localStorage.getItem("jwt-token")||localStorage.getItem("token");return n?(t.Authorization=`Bearer ${n}`,Vu()&&console.log("🔑 Auth token found and added to headers")):Vu()&&console.warn("⚠️ No auth token found in localStorage - API requests may fail with 403"),t},s5=e=>{da()&&e()},r5=(e,...t)=>{Vu()&&console.log(`[DEBUG] ${e}`,...t)},zv=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},hc=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},i5=()=>{if(da()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){hc("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),zv("Removed development authentication token from storage")}catch(t){hc("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(hc("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&zv("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&hc("SECURITY RISK: Development flags found in production build!")}},a5=()=>{if(da()){i5(),console.log("%c🔒 PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{if(typeof window<"u"&&da()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};s5(()=>{a5()});const Le=(e=!0)=>{e=!0;const n=n5(e);if(da()&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),Vu()){const s=!!n.Authorization;r5(`API headers prepared: Auth token ${s?"present":"missing"}${e?", dev bypass enabled":""}`)}return n};async function Vv(e,t){const s=await fetch(`http://103.224.243.242:3001/api/leads/${e}/status`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify({status:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead status");const r=await s.json();return r.data||r}async function Uv(e,t,n){const r=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}/assign`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify({salesAgentId:t,salesAgentName:n}),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead assignment");const i=await r.json();return i.data||i}async function o5(e,t){const s=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead");const r=await s.json();return r.data||r}async function l5(e){const n=await fetch("http://103.224.243.242:3001/api/leads",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create lead");const s=await n.json();return s.data||s}async function Il(){const t=await fetch("http://103.224.243.242:3001/api/leads",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch leads");const n=await t.json();return n.data||n}const Wv={getJobsByOperator:c5,getEquipmentById:s2,getAllEquipment:r2,getJobs:Gd,getAllOperators:Ol,createJob:n2,getJobEquipment:u5,getJobOperators:d5};async function n2(e){const n=await fetch("http://103.224.243.242:3001/api/jobs",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create job");return n.json()}async function c5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs?operatorId=${encodeURIComponent(e)}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch jobs by operator");return await n.json()}async function s2(e){const n=await fetch(`http://103.224.243.242:3001/api/equipment/${encodeURIComponent(e)}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch equipment by id");return await n.json()}async function r2(){const t=await fetch("http://103.224.243.242:3001/api/equipment",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch equipment");return await t.json()}async function Gd(){const t=await fetch("http://103.224.243.242:3001/api/jobs",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch jobs");return await t.json()}async function Ol(){const t=await fetch("http://103.224.243.242:3001/api/operators",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch operators");return await t.json()}async function u5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/equipment`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job equipment");return await n.json()}async function d5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/operators`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job operators");return await n.json()}async function qv(e){const n=`http://103.224.243.242:3001/api/equipment?category=${encodeURIComponent(e)}`;console.log("🔍 Fetching equipment by category:",e),console.log("🔗 API URL:",n);const s=await fetch(n,{method:"GET",headers:Le(!0),credentials:"include"});if(console.log("📡 Response status:",s.status),console.log("📡 Response ok:",s.ok),!s.ok)throw console.error("❌ Failed to fetch equipment:",s.status,s.statusText),new Error("Failed to fetch equipment by category");const r=await s.json();return console.log("📦 Equipment data received:",r),r}async function dx(){return[{id:"1",equipmentId:"EQ0001",name:"Demo Crane",category:"mobile_crane",manufacturingDate:"2022-01",registrationDate:"2022-02",maxLiftingCapacity:50,unladenWeight:20,baseRates:{micro:100,small:200,monthly:3e3,yearly:35e3},runningCostPerKm:10,description:"Sample equipment",status:"available",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),runningCost:0,_source:"client",_mockFlag:!0}]}async function Yd(){const t=await fetch("http://103.224.243.242:3001/api/deals",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch deals");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function cl(e){const n=await fetch(`http://103.224.243.242:3001/api/deals/${e}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch deal by ID");return n.json()}async function h5(e){const n=await fetch("http://103.224.243.242:3001/api/deals",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create deal");return await n.json()}async function i2(e,t){const s=await fetch(`http://103.224.243.242:3001/api/deals/${e}/stage`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify({stage:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update deal stage");const r=await s.json();return r.data||r}const De=e=>isNaN(e)||e==null?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),f5=Na("relative bg-white/80 backdrop-blur-sm border border-gray-200/60 transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5",{variants:{variant:{default:"rounded-xl shadow-sm",bordered:"rounded-xl border-2",flat:"rounded-lg",glass:"rounded-xl bg-white/60 backdrop-blur-md border-white/20 shadow-xl",gradient:"rounded-xl bg-gradient-to-br from-white to-gray-50/50 shadow-md"},padding:{none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-5",lg:"p-5 sm:p-6",xl:"p-6 sm:p-8"},size:{default:"",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"w-full"}},defaultVariants:{variant:"default",padding:"md",size:"default"}}),ne=x.memo(ee.forwardRef(({className:e="",variant:t,padding:n,size:s,as:r="div",children:i,hover:a=!0,loading:l=!1,...c},u)=>{const d=f5({variant:t,padding:n,size:s}),h=a?"hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5":"",f=l?"animate-pulse":"";return o.jsxs(r,{className:`${d} ${h} ${f} ${e}`,ref:u,role:r==="div"?"article":void 0,...c,children:[l&&o.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin"})}),i]})}));ne.displayName="Card";const me=x.memo(ee.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pb-4 border-b border-gray-200/60 ${e}`,...n,children:t})));me.displayName="CardHeader";const pe=x.memo(ee.forwardRef(({className:e="",gradient:t=!1,level:n=2,children:s,...r},i)=>{const a=`h${n}`,l=t?"bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent":"";return o.jsx(a,{ref:i,className:`text-lg font-semibold text-gray-900 leading-tight ${l} ${e}`,...r,children:s})}));pe.displayName="CardTitle";const m5=x.memo(ee.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("p",{ref:s,className:`text-sm text-gray-600 leading-relaxed ${e}`,...n,children:t})));m5.displayName="CardDescription";const ie=x.memo(ee.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 ${e}`,...n,children:t})));ie.displayName="CardContent";const p5=x.memo(ee.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 mt-4 border-t border-gray-200/60 ${e}`,...n,children:t})));p5.displayName="CardFooter";const g5=Na("group relative overflow-hidden",{variants:{variant:{default:"bg-white/90 backdrop-blur-sm",primary:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",secondary:"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200",accent:"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",warning:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200",error:"bg-gradient-to-br from-red-50 to-rose-50 border-red-200",glass:"bg-white/60 backdrop-blur-md border-white/20"},size:{sm:"min-h-[100px]",default:"min-h-[120px]",lg:"min-h-[140px]"}},defaultVariants:{variant:"default",size:"default"}}),zt=x.memo(ee.forwardRef(({className:e="",variant:t,size:n,title:s,value:r,icon:i,trend:a,subtitle:l,footer:c,loading:u=!1,gradient:d=!1,...h},f)=>{const p={primary:"bg-gradient-to-br from-blue-500 to-indigo-600",secondary:"bg-gradient-to-br from-gray-500 to-slate-600",accent:"bg-gradient-to-br from-amber-500 to-yellow-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-orange-500 to-red-600",error:"bg-gradient-to-br from-red-500 to-rose-600",glass:"bg-gradient-to-br from-brand-blue to-brand-blue/80",default:"bg-gradient-to-br from-brand-blue to-brand-blue/80"}[t||"default"],g=()=>a?a.value>0?o.jsx(Gm,{className:"w-3 h-3"}):a.value<0?o.jsx(VA,{className:"w-3 h-3"}):o.jsx(rS,{className:"w-3 h-3"}):null,v=()=>a?a.isPositive?"text-green-600":"text-red-600":"";return o.jsxs(ne,{ref:f,className:`${g5({variant:t,size:n})} ${e}`,variant:d?"gradient":"default",padding:"lg",hover:!u,loading:u,...h,children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-full transform translate-x-8 -translate-y-8 group-hover:scale-110 transition-transform duration-300"}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1 leading-tight",children:s}),l&&o.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:l})]}),i&&o.jsx("div",{className:`p-2.5 rounded-xl ${p} shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300`,children:o.jsx("div",{className:"text-white w-5 h-5 flex items-center justify-center",children:i})})]}),o.jsx("div",{className:"flex-1 flex items-center",children:o.jsx("div",{className:"text-2xl font-bold text-gray-900 group-hover:text-brand-blue transition-colors duration-300",children:u?o.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}):r})}),a&&o.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[o.jsxs("div",{className:`flex items-center space-x-1 ${v()}`,children:[g(),o.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.value),"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),c&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/60",children:c})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-blue/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})}));zt.displayName="StatCard";const x5=x.memo(()=>o.jsxs(ne,{className:"min-h-[120px] animate-pulse",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"})]}),o.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}));x5.displayName="StatCardSkeleton";const y5=e=>{switch(e){case"lead":return o.jsx(la,{className:"h-4 w-4"});case"deal":return o.jsx(CA,{className:"h-4 w-4"});case"job":return o.jsx(Ut,{className:"h-4 w-4"});case"equipment":return o.jsx(ln,{className:"h-4 w-4"});case"user":return o.jsx(la,{className:"h-4 w-4"});default:return o.jsx(xi,{className:"h-4 w-4"})}},v5=e=>{switch(e){case"success":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"info":default:return"text-blue-600 bg-blue-50"}},b5=e=>{const n=new Date().getTime()-e.getTime(),s=Math.floor(n/(1e3*60)),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s}m ago`:r<24?`${r}h ago`:i<7?`${i}d ago`:e.toLocaleDateString()},w5=[{id:"1",type:"lead",title:"New lead created",description:"John Doe submitted a crane rental inquiry",timestamp:new Date(Date.now()-1e3*60*15),status:"info",user:"System"},{id:"2",type:"deal",title:"Deal closed",description:"Construction project deal worth ₹2,50,000 closed successfully",timestamp:new Date(Date.now()-1e3*60*60*2),status:"success",user:"Sales Agent"},{id:"3",type:"job",title:"Job scheduled",description:"Crane deployment for Site A scheduled for tomorrow",timestamp:new Date(Date.now()-1e3*60*60*4),status:"info",user:"Operations Manager"},{id:"4",type:"equipment",title:"Maintenance alert",description:"Crane CR-001 requires scheduled maintenance",timestamp:new Date(Date.now()-1e3*60*60*6),status:"warning",user:"System"},{id:"5",type:"user",title:"New user registered",description:"New operator account created for Mike Johnson",timestamp:new Date(Date.now()-1e3*60*60*24),status:"info",user:"Admin"}];function j5({activities:e,className:t}){const[n,s]=x.useState([]),[r,i]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{if(e)s(e);else{const l=await UC(5);s(l)}}catch(l){console.error("Error fetching activities:",l),s(w5)}finally{i(!1)}})()},[e]),r?o.jsxs(ne,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(Nn,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),o.jsx("p",{children:"Loading activities..."})]})})]}):o.jsxs(ne,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(Nn,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(xi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"No recent activities"})]}):n.map(a=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${v5(a.status)}`,children:y5(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:b5(a.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),a.user&&o.jsx("div",{className:"flex items-center mt-2",children:o.jsx(ll,{variant:"secondary",className:"text-xs",children:a.user})})]})]},a.id))}),n.length>0&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all activities →"})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ll(e){return e+.5|0}const nr=(e,t,n)=>Math.max(Math.min(e,n),t);function fo(e){return nr(Ll(e*2.55),0,255)}function xr(e){return nr(Ll(e*255),0,255)}function vs(e){return nr(Ll(e/2.55)/100,0,1)}function Hv(e){return nr(Ll(e*100),0,100)}const xn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},up=[..."0123456789ABCDEF"],N5=e=>up[e&15],S5=e=>up[(e&240)>>4]+up[e&15],fc=e=>(e&240)>>4===(e&15),C5=e=>fc(e.r)&&fc(e.g)&&fc(e.b)&&fc(e.a);function k5(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&xn[e[1]]*17,g:255&xn[e[2]]*17,b:255&xn[e[3]]*17,a:t===5?xn[e[4]]*17:255}:(t===7||t===9)&&(n={r:xn[e[1]]<<4|xn[e[2]],g:xn[e[3]]<<4|xn[e[4]],b:xn[e[5]]<<4|xn[e[6]],a:t===9?xn[e[7]]<<4|xn[e[8]]:255})),n}const E5=(e,t)=>e<255?t(e):"";function D5(e){var t=C5(e)?N5:S5;return e?"#"+t(e.r)+t(e.g)+t(e.b)+E5(e.a,t):void 0}const T5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function a2(e,t,n){const s=t*Math.min(n,1-n),r=(i,a=(i+e/30)%12)=>n-s*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function P5(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function _5(e,t,n){const s=a2(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function A5(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function hx(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),a=Math.min(n,s,r),l=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=l>.5?d/(2-i-a):d/(i+a),c=A5(n,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function fx(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(xr)}function mx(e,t,n){return fx(a2,e,t,n)}function M5(e,t,n){return fx(_5,e,t,n)}function R5(e,t,n){return fx(P5,e,t,n)}function o2(e){return(e%360+360)%360}function I5(e){const t=T5.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?fo(+t[5]):xr(+t[5]));const r=o2(+t[2]),i=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?s=M5(r,i,a):t[1]==="hsv"?s=R5(r,i,a):s=mx(r,i,a),{r:s[0],g:s[1],b:s[2],a:n}}function O5(e,t){var n=hx(e);n[0]=o2(n[0]+t),n=mx(n),e.r=n[0],e.g=n[1],e.b=n[2]}function L5(e){if(!e)return;const t=hx(e),n=t[0],s=Hv(t[1]),r=Hv(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${vs(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const Gv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Yv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function F5(){const e={},t=Object.keys(Yv),n=Object.keys(Gv);let s,r,i,a,l;for(s=0;s<t.length;s++){for(a=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,Gv[i]);i=parseInt(Yv[a],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let mc;function $5(e){mc||(mc=F5(),mc.transparent=[0,0,0,0]);const t=mc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const B5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function z5(e){const t=B5.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const a=+t[7];n=t[8]?fo(a):nr(a*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?fo(s):nr(s,0,255)),r=255&(t[4]?fo(r):nr(r,0,255)),i=255&(t[6]?fo(i):nr(i,0,255)),{r:s,g:r,b:i,a:n}}}function V5(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${vs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const nf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ci=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function U5(e,t,n){const s=Ci(vs(e.r)),r=Ci(vs(e.g)),i=Ci(vs(e.b));return{r:xr(nf(s+n*(Ci(vs(t.r))-s))),g:xr(nf(r+n*(Ci(vs(t.g))-r))),b:xr(nf(i+n*(Ci(vs(t.b))-i))),a:e.a+n*(t.a-e.a)}}function pc(e,t,n){if(e){let s=hx(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=mx(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function l2(e,t){return e&&Object.assign(t||{},e)}function Qv(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=xr(e[3]))):(t=l2(e,{r:0,g:0,b:0,a:1}),t.a=xr(t.a)),t}function W5(e){return e.charAt(0)==="r"?z5(e):I5(e)}class ul{constructor(t){if(t instanceof ul)return t;const n=typeof t;let s;n==="object"?s=Qv(t):n==="string"&&(s=k5(t)||$5(t)||W5(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=l2(this._rgb);return t&&(t.a=vs(t.a)),t}set rgb(t){this._rgb=Qv(t)}rgbString(){return this._valid?V5(this._rgb):void 0}hexString(){return this._valid?D5(this._rgb):void 0}hslString(){return this._valid?L5(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=a*s.a+(1-a)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=U5(this._rgb,t._rgb,n)),this}clone(){return new ul(this.rgb)}alpha(t){return this._rgb.a=xr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Ll(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return pc(this._rgb,2,t),this}darken(t){return pc(this._rgb,2,-t),this}saturate(t){return pc(this._rgb,1,t),this}desaturate(t){return pc(this._rgb,1,-t),this}rotate(t){return O5(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function hs(){}const q5=(()=>{let e=0;return()=>e++})();function _e(e){return e==null}function ct(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ce(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ot(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Kn(e,t){return Ot(e)?e:t}function be(e,t){return typeof e>"u"?t:e}const H5=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,c2=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ze(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Re(e,t,n,s){let r,i,a;if(ct(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(Ce(e))for(a=Object.keys(e),i=a.length,r=0;r<i;r++)t.call(n,e[a[r]],a[r])}function Uu(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Wu(e){if(ct(e))return e.map(Wu);if(Ce(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Wu(e[n[r]]);return t}return e}function u2(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function G5(e,t,n,s){if(!u2(e))return;const r=t[e],i=n[e];Ce(r)&&Ce(i)?dl(r,i,s):t[e]=Wu(i)}function dl(e,t,n){const s=ct(t)?t:[t],r=s.length;if(!Ce(e))return e;n=n||{};const i=n.merger||G5;let a;for(let l=0;l<r;++l){if(a=s[l],!Ce(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],e,a,n)}return e}function Ao(e,t){return dl(e,t,{merger:Y5})}function Y5(e,t,n){if(!u2(e))return;const s=t[e],r=n[e];Ce(s)&&Ce(r)?Ao(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Wu(r))}const Kv={"":e=>e,x:e=>e.x,y:e=>e.y};function Q5(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function K5(e){const t=Q5(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function hi(e,t){return(Kv[t]||(Kv[t]=K5(t)))(e)}function px(e){return e.charAt(0).toUpperCase()+e.slice(1)}const hl=e=>typeof e<"u",Cr=e=>typeof e=="function",Xv=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function X5(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ie=Math.PI,Ke=2*Ie,J5=Ke+Ie,qu=Number.POSITIVE_INFINITY,Z5=Ie/180,gt=Ie/2,Rr=Ie/4,Jv=Ie*2/3,d2=Math.log10,is=Math.sign;function Mo(e,t,n){return Math.abs(e-t)<n}function Zv(e){const t=Math.round(e);e=Mo(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(d2(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function e3(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function t3(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function fl(e){return!t3(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function n3(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function s3(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Ns(e){return e*(Ie/180)}function r3(e){return e*(180/Ie)}function eb(e){if(!Ot(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function h2(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Ie&&(i+=Ke),{angle:i,distance:r}}function dp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function i3(e,t){return(e-t+J5)%Ke-Ie}function nn(e){return(e%Ke+Ke)%Ke}function ml(e,t,n,s){const r=nn(e),i=nn(t),a=nn(n),l=nn(i-r),c=nn(a-r),u=nn(r-i),d=nn(r-a);return r===i||r===a||s&&i===a||l>c&&u<d}function _t(e,t,n){return Math.max(t,Math.min(n,e))}function a3(e){return _t(e,-32768,32767)}function Ss(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function gx(e,t,n){n=n||(a=>e[a]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Zr=(e,t,n,s)=>gx(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),o3=(e,t,n)=>gx(e,n,s=>e[s][t]>=n);function l3(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const f2=["push","pop","shift","splice","unshift"];function c3(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),f2.forEach(n=>{const s="_onData"+px(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const a=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),a}})})}function tb(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(f2.forEach(i=>{delete e[i]}),delete e._chartjs)}function m2(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const p2=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function g2(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,p2.call(window,()=>{s=!1,e.apply(t,n)}))}}function u3(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const xx=e=>e==="start"?"left":e==="end"?"right":"center",Tt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,d3=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function h3(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:a,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:h,max:f,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(r=Math.min(Zr(c,d,h).lo,n?s:Zr(t,d,a.getPixelForValue(h)).lo),u){const g=c.slice(0,r+1).reverse().findIndex(v=>!_e(v[l.axis]));r-=Math.max(0,g)}r=_t(r,0,s-1)}if(p){let g=Math.max(Zr(c,a.axis,f,!0).hi+1,n?0:Zr(t,d,a.getPixelForValue(f),!0).hi+1);if(u){const v=c.slice(g-1).findIndex(b=>!_e(b[l.axis]));g+=Math.max(0,v)}i=_t(g,r,s)-r}else i=s-r}return{start:r,count:i}}function f3(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const gc=e=>e===0||e===1,nb=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ke/n)),sb=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ke/n)+1,Ro={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*gt)+1,easeOutSine:e=>Math.sin(e*gt),easeInOutSine:e=>-.5*(Math.cos(Ie*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>gc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>gc(e)?e:nb(e,.075,.3),easeOutElastic:e=>gc(e)?e:sb(e,.075,.3),easeInOutElastic(e){return gc(e)?e:e<.5?.5*nb(e*2,.1125,.45):.5+.5*sb(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ro.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ro.easeInBounce(e*2)*.5:Ro.easeOutBounce(e*2-1)*.5+.5};function yx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function rb(e){return yx(e)?e:new ul(e)}function sf(e){return yx(e)?e:new ul(e).saturate(.5).darken(.1).hexString()}const m3=["x","y","borderWidth","radius","tension"],p3=["color","borderColor","backgroundColor"];function g3(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:p3},numbers:{type:"number",properties:m3}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function x3(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ib=new Map;function y3(e,t){t=t||{};const n=e+JSON.stringify(t);let s=ib.get(n);return s||(s=new Intl.NumberFormat(e,t),ib.set(n,s)),s}function vx(e,t,n){return y3(t,n).format(e)}const v3={values(e){return ct(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=b3(e,n)}const a=d2(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),vx(e,s,c)}};function b3(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var x2={formatters:v3};function w3(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:x2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const fi=Object.create(null),hp=Object.create(null);function Io(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function rf(e,t,n){return typeof t=="string"?dl(Io(e,t),n):dl(Io(e,""),t)}class j3{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>sf(r.backgroundColor),this.hoverBorderColor=(s,r)=>sf(r.borderColor),this.hoverColor=(s,r)=>sf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return rf(this,t,n)}get(t){return Io(this,t)}describe(t,n){return rf(hp,t,n)}override(t,n){return rf(fi,t,n)}route(t,n,s,r){const i=Io(this,t),a=Io(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[r];return Ce(c)?Object.assign({},u,c):be(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var it=new j3({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[g3,x3,w3]);function N3(e){return!e||_e(e.size)||_e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function ab(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ir(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function ob(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function fp(e,t,n,s){y2(e,t,n,s,null)}function y2(e,t,n,s,r){let i,a,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,g=t.radius;let v=(p||0)*Z5;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(v),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),m){default:r?e.ellipse(n,s,r/2,g,0,0,Ke):e.arc(n,s,g,0,Ke),e.closePath();break;case"triangle":d=r?r/2:g,e.moveTo(n+Math.sin(v)*d,s-Math.cos(v)*g),v+=Jv,e.lineTo(n+Math.sin(v)*d,s-Math.cos(v)*g),v+=Jv,e.lineTo(n+Math.sin(v)*d,s-Math.cos(v)*g),e.closePath();break;case"rectRounded":u=g*.516,c=g-u,a=Math.cos(v+Rr)*c,h=Math.cos(v+Rr)*(r?r/2-u:c),l=Math.sin(v+Rr)*c,f=Math.sin(v+Rr)*(r?r/2-u:c),e.arc(n-h,s-l,u,v-Ie,v-gt),e.arc(n+f,s-a,u,v-gt,v),e.arc(n+h,s+l,u,v,v+gt),e.arc(n-f,s+a,u,v+gt,v+Ie),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,d=r?r/2:c,e.rect(n-d,s-c,2*d,2*c);break}v+=Rr;case"rectRot":h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+f,s-a),e.lineTo(n+h,s+l),e.lineTo(n-f,s+a),e.closePath();break;case"crossRot":v+=Rr;case"cross":h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"star":h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a),v+=Rr,h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"line":a=r?r/2:Math.cos(v)*g,l=Math.sin(v)*g,e.moveTo(n-a,s-l),e.lineTo(n+a,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(v)*(r?r/2:g),s+Math.sin(v)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function pl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Qd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Kd(e){e.restore()}function S3(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function C3(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function k3(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function E3(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),a=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function D3(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function gl(e,t,n,s,r,i={}){const a=ct(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,k3(e,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&D3(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),_e(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,s,i.maxWidth)),e.fillText(u,n,s,i.maxWidth),E3(e,n,s,u,i),s+=Number(r.lineHeight);e.restore()}function Hu(e,t){const{x:n,y:s,w:r,h:i,radius:a}=t;e.arc(n+a.topLeft,s+a.topLeft,a.topLeft,1.5*Ie,Ie,!0),e.lineTo(n,s+i-a.bottomLeft),e.arc(n+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,Ie,gt,!0),e.lineTo(n+r-a.bottomRight,s+i),e.arc(n+r-a.bottomRight,s+i-a.bottomRight,a.bottomRight,gt,0,!0),e.lineTo(n+r,s+a.topRight),e.arc(n+r-a.topRight,s+a.topRight,a.topRight,0,-gt,!0),e.lineTo(n+a.topLeft,s)}const T3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,P3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _3(e,t){const n=(""+e).match(T3);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const A3=e=>+e||0;function bx(e,t){const n={},s=Ce(t),r=s?Object.keys(t):t,i=Ce(e)?s?a=>be(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of r)n[a]=A3(i(a));return n}function v2(e){return bx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ji(e){return bx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function _n(e){const t=v2(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function At(e,t){e=e||{},t=t||it.font;let n=be(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=be(e.style,t.style);s&&!(""+s).match(P3)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:be(e.family,t.family),lineHeight:_3(be(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:be(e.weight,t.weight),string:""};return r.string=N3(r),r}function xc(e,t,n,s){let r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&a!==void 0)return a}function M3(e,t,n){const{min:s,max:r}=e,i=c2(t,(r-s)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(s,-Math.abs(i)),max:a(r,i)}}function wi(e,t){return Object.assign(Object.create(e),t)}function wx(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=N2("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>wx([l,...e],t,i,s)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return w2(l,c,()=>z3(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return cb(l).includes(c)},ownKeys(l){return cb(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function ha(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:b2(e,s),setContext:i=>ha(e,i,n,s),override:i=>ha(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete e[a],!0},get(i,a,l){return w2(i,a,()=>I3(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(i,a,l){return e[a]=l,delete i[a],!0}})}function b2(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Cr(n)?n:()=>n,isIndexable:Cr(s)?s:()=>s}}const R3=(e,t)=>e?e+px(t):t,jx=(e,t)=>Ce(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function w2(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function I3(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:a}=e;let l=s[t];return Cr(l)&&a.isScriptable(t)&&(l=O3(t,l,e,n)),ct(l)&&l.length&&(l=L3(t,l,e,a.isIndexable)),jx(t,l)&&(l=ha(l,r,i&&i[t],a)),l}function O3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,a||s);return l.delete(e),jx(e,c)&&(c=Nx(r._scopes,r,e,c)),c}function L3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(Ce(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Nx(u,r,e,d);t.push(ha(h,i,a&&a[e],l))}}return t}function j2(e,t,n){return Cr(e)?e(t,n):e}const F3=(e,t)=>e===!0?t:typeof e=="string"?hi(t,e):void 0;function $3(e,t,n,s,r){for(const i of t){const a=F3(n,i);if(a){e.add(a);const l=j2(a._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(a===!1&&typeof s<"u"&&n!==s)return null}return!1}function Nx(e,t,n,s){const r=t._rootScopes,i=j2(t._fallback,n,s),a=[...e,...r],l=new Set;l.add(s);let c=lb(l,a,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=lb(l,a,i,c,s),c===null)?!1:wx(Array.from(l),[""],r,i,()=>B3(t,n,s))}function lb(e,t,n,s,r){for(;n;)n=$3(e,t,n,s,r);return n}function B3(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ct(r)&&Ce(n)?n:r||{}}function z3(e,t,n,s){let r;for(const i of t)if(r=N2(R3(i,e),n),typeof r<"u")return jx(e,r)?Nx(n,s,e,r):r}function N2(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function cb(e){let t=e._keys;return t||(t=e._keys=V3(e._scopes)),t}function V3(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const U3=Number.EPSILON||1e-14,fa=(e,t)=>t<e.length&&!e[t].skip&&e[t],S2=e=>e==="x"?"y":"x";function W3(e,t,n,s){const r=e.skip?t:e,i=t,a=n.skip?t:n,l=dp(i,r),c=dp(a,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=s*u,f=s*d;return{previous:{x:i.x-h*(a.x-r.x),y:i.y-h*(a.y-r.y)},next:{x:i.x+f*(a.x-r.x),y:i.y+f*(a.y-r.y)}}}function q3(e,t,n){const s=e.length;let r,i,a,l,c,u=fa(e,0);for(let d=0;d<s-1;++d)if(c=u,u=fa(e,d+1),!(!c||!u)){if(Mo(t[d],0,U3)){n[d]=n[d+1]=0;continue}r=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),n[d]=r*a*t[d],n[d+1]=i*a*t[d])}}function H3(e,t,n="x"){const s=S2(n),r=e.length;let i,a,l,c=fa(e,0);for(let u=0;u<r;++u){if(a=l,l=c,c=fa(e,u+1),!l)continue;const d=l[n],h=l[s];a&&(i=(d-a[n])/3,l[`cp1${n}`]=d-i,l[`cp1${s}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${s}`]=h+i*t[u])}}function G3(e,t="x"){const n=S2(t),s=e.length,r=Array(s).fill(0),i=Array(s);let a,l,c,u=fa(e,0);for(a=0;a<s;++a)if(l=c,c=u,u=fa(e,a+1),!!c){if(u){const d=u[t]-c[t];r[a]=d!==0?(u[n]-c[n])/d:0}i[a]=l?u?is(r[a-1])!==is(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}q3(e,r,i),H3(e,i,t)}function yc(e,t,n){return Math.max(Math.min(e,n),t)}function Y3(e,t){let n,s,r,i,a,l=pl(e[0],t);for(n=0,s=e.length;n<s;++n)a=i,i=l,l=n<s-1&&pl(e[n+1],t),i&&(r=e[n],a&&(r.cp1x=yc(r.cp1x,t.left,t.right),r.cp1y=yc(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=yc(r.cp2x,t.left,t.right),r.cp2y=yc(r.cp2y,t.top,t.bottom)))}function Q3(e,t,n,s,r){let i,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")G3(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)l=e[i],c=W3(u,l,e[Math.min(i+1,a-(s?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&Y3(e,n)}function Sx(){return typeof window<"u"&&typeof document<"u"}function Cx(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Gu(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const Xd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function K3(e,t){return Xd(e).getPropertyValue(t)}const X3=["top","right","bottom","left"];function ri(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=X3[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const J3=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function Z3(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let a=!1,l,c;if(J3(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function Wr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=Xd(n),i=r.boxSizing==="border-box",a=ri(r,"padding"),l=ri(r,"border","width"),{x:c,y:u,box:d}=Z3(e,n),h=a.left+(d&&l.left),f=a.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function eF(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&Cx(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const a=i.getBoundingClientRect(),l=Xd(i),c=ri(l,"border","width"),u=ri(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,s=Gu(l.maxWidth,i,"clientWidth"),r=Gu(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||qu,maxHeight:r||qu}}const vc=e=>Math.round(e*10)/10;function tF(e,t,n,s){const r=Xd(e),i=ri(r,"margin"),a=Gu(r.maxWidth,e,"clientWidth")||qu,l=Gu(r.maxHeight,e,"clientHeight")||qu,c=eF(e,t,n);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=ri(r,"border","width"),m=ri(r,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=vc(Math.min(u,a,c.maxWidth)),d=vc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=vc(u/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=vc(Math.floor(d*s))),{width:u,height:d}}function ub(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||a.height!==r||a.width!==i?(e.currentDevicePixelRatio=s,a.height=r,a.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const nF=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Sx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function db(e,t){const n=K3(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function qr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function sF(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function rF(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=qr(e,r,n),l=qr(r,i,n),c=qr(i,t,n),u=qr(a,l,n),d=qr(l,c,n);return qr(u,d,n)}const iF=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},aF=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Zi(e,t,n){return e?iF(t,n):aF()}function C2(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function k2(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function E2(e){return e==="angle"?{between:ml,compare:i3,normalize:nn}:{between:Ss,compare:(t,n)=>t-n,normalize:t=>t}}function hb({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function oF(e,t,n){const{property:s,start:r,end:i}=n,{between:a,normalize:l}=E2(s),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&a(l(t[u%c][s]),r,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function D2(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,a=t.length,{compare:l,between:c,normalize:u}=E2(s),{start:d,end:h,loop:f,style:m}=oF(e,t,n),p=[];let g=!1,v=null,b,y,w;const S=()=>c(r,w,b)&&l(r,w)!==0,N=()=>l(i,b)===0||c(i,w,b),j=()=>g||S(),k=()=>!g||N();for(let C=d,P=d;C<=h;++C)y=t[C%a],!y.skip&&(b=u(y[s]),b!==w&&(g=c(b,r,i),v===null&&j()&&(v=l(b,r)===0?C:P),v!==null&&k()&&(p.push(hb({start:v,end:C,loop:f,count:a,style:m})),v=null),P=C,w=b));return v!==null&&p.push(hb({start:v,end:h,loop:f,count:a,style:m})),p}function T2(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=D2(s[r],e.points,t);i.length&&n.push(...i)}return n}function lF(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function cF(e,t,n,s){const r=e.length,i=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&i.push({start:t%r,end:a%r,loop:s}),i}function uF(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:a,end:l}=lF(n,r,i,s);if(s===!0)return fb(e,[{start:a,end:l,loop:i}],n,t);const c=l<a?l+r:l,u=!!e._fullLoop&&a===0&&l===r-1;return fb(e,cF(n,a,c,u),n,t)}function fb(e,t,n,s){return!s||!s.setContext||!n?t:dF(e,t,n,s)}function dF(e,t,n,s){const r=e._chart.getContext(),i=mb(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,g,v,b){const y=l?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=y;for(;n[g%c].skip;)g+=y;p%c!==g%c&&(u.push({start:p%c,end:g%c,loop:v,style:b}),d=b,h=g%c)}}for(const p of t){h=l?h:p.start;let g=n[h%c],v;for(f=h+1;f<=p.end;f++){const b=n[f%c];v=mb(s.setContext(wi(r,{type:"segment",p0:g,p1:b,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),hF(v,d)&&m(h,f-1,p.loop,d),g=b,d=v}h<f-1&&m(h,f-1,p.loop,d)}return u}function mb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function hF(e,t){if(!t)return!1;const n=[],s=function(r,i){return yx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function bc(e,t,n){return e.options.clip?e[n]:t[n]}function fF(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:bc(n,t,"left"),right:bc(n,t,"right"),top:bc(s,t,"top"),bottom:bc(s,t,"bottom")}:t}function P2(e,t){const n=t._clip;if(n.disabled)return!1;const s=fF(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],a=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(s-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=p2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[a]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ms=new mF;const pb="transparent",pF={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=rb(e||pb),r=s.valid&&rb(t||pb);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class gF{constructor(t,n,s,r){const i=n[s];r=xc([t.to,r,i,t.from]);const a=xc([t.from,i,r]);this._active=!0,this._fn=t.fn||pF[t.type||typeof a],this._easing=Ro[t.easing]||Ro.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,a=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=xc([t.to,n,r,t.from]),this._from=xc([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class _2{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ce(t))return;const n=Object.keys(it.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Ce(i))return;const a={};for(const l of n)a[l]=i[l];(ct(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,a)})})}_animateOptions(t,n){const s=n.options,r=yF(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&xF(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new gF(f,t,u,d),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return ms.add(this._chart,s),!0}}function xF(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function yF(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gb(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function vF(e,t,n){if(n===!1)return!1;const s=gb(e,n),r=gb(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function bF(e){let t,n,s,r;return Ce(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function A2(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function xb(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===n){if(d=!0,s.all)continue;break}u=e.values[c],Ot(u)&&(i||t===0||is(t)===is(u))&&(t+=u)}return!d&&!s.all?0:t}function wF(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[r]:d,[i]:e[d]};return l}function af(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function jF(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function NF(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function SF(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function yb(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function vb(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:l}=s,c=i.axis,u=a.axis,d=jF(i,a,s),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:g,[u]:v}=p,b=p._stacks||(p._stacks={});f=b[u]=SF(r,d,g),f[l]=v,f._top=yb(f,a,!0,s.type),f._bottom=yb(f,a,!1,s.type);const y=f._visualValues||(f._visualValues={});y[l]=v}}function of(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function CF(e,t){return wi(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function kF(e,t,n){return wi(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ha(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const lf=e=>e==="reset"||e==="none",bb=(e,t)=>t?e:Object.assign({},e),EF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:A2(n,!0),values:null};class ii{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=af(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ha(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=be(s.xAxisID,of(t,"x")),a=n.yAxisID=be(s.yAxisID,of(t,"y")),l=n.rAxisID=be(s.rAxisID,of(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,i,a,l),d=n.vAxisID=r(c,a,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&tb(this._data,this),t._stacked&&Ha(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Ce(n)){const r=this._cachedMeta;this._data=wF(n,r)}else if(s!==n){if(s){tb(s,this);const r=this._cachedMeta;Ha(r),r._parsed=[]}n&&Object.isExtensible(n)&&c3(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=af(n.vScale,n),n.stack!==s.stack&&(r=!0,Ha(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(vb(this,n._parsed),n._stacked=af(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:a}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{ct(r[t])?f=this.parseArrayData(s,r,t,n):Ce(r[t])?f=this.parseObjectData(s,r,t,n):f=this.parsePrimitiveData(s,r,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);s._sorted=c}a&&vb(this,f)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:a}=t,l=i.axis,c=a.axis,u=i.getLabels(),d=i===a,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+s,h[f]={[l]:d||i.parse(u[p],p),[c]:a.parse(n[p],p)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:a}=t,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:i.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,m;for(d=0,h=r;d<h;++d)f=d+s,m=n[f],u[d]={x:i.parse(hi(m,l),f),y:a.parse(hi(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,a=n[t.axis],l={keys:A2(r,!0),values:n._stacks[t.axis]._visualValues};return xb(l,a,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let a=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,a=xb(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,a=r.length,l=this._getOtherScale(t),c=EF(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=NF(l);let f,m;function p(){m=r[f];const g=m[l.axis];return!Ot(m[t.axis])||d>g||h<g}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,a;for(r=0,i=n.length;r<i;++r)a=n[r][t.axis],Ot(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=bF(be(this.options.clip,vF(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,i))}for(d=0;d<a.length;++d)a[d].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];i=a.$context||(a.$context=kF(this.getContext(),t,a)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=CF(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,a=t+"-"+n,l=i[a],c=this.enableOptionSharing&&hl(s);if(l)return bb(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(it.elements[t]),p=()=>this.getContext(s,r,n),g=u.resolveNamedOptions(f,m,p,h);return g.$shared&&(g.$shared=c,i[a]=Object.freeze(bb(g,c))),g}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,l=i[a];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,s,n))}const u=new _2(r,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||lf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),a=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:a}}updateElement(t,n,s,r){lf(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!lf(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=n.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(i),l=t;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&Ha(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}le(ii,"defaults",{}),le(ii,"datasetElementType",null),le(ii,"dataElementType",null);function DF(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=m2(s.sort((r,i)=>r-i))}return e._cache.$bar}function TF(e){const t=e.iScale,n=DF(t,e.type);let s=t._length,r,i,a,l;const c=()=>{a===32767||a===-32768||(hl(l)&&(s=Math.min(s,Math.abs(a-l)||s)),l=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),c();return s}function PF(e,t,n,s){const r=n.barThickness;let i,a;return _e(r)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=r*s,a=1),{chunk:i/s,ratio:a,start:t.pixels[e]-i/2}}function _F(e,t,n,s){const r=t.pixels,i=r[e];let a=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;a===null&&(a=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-a);const u=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/s,ratio:n.barPercentage,start:u}}function AF(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),a=Math.min(r,i),l=Math.max(r,i);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:a,max:l}}function M2(e,t,n,s){return ct(e)?AF(e,t,n,s):t[n.axis]=n.parse(e,s),t}function wb(e,t,n,s){const r=e.iScale,i=e.vScale,a=r.getLabels(),l=r===i,c=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=t[u],h={},h[r.axis]=l||r.parse(a[u],u),c.push(M2(f,h,i,u));return c}function cf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function MF(e,t,n){return e!==0?is(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function RF(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function IF(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:d}=RF(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[jb(d,a,l,c)]=!0,r=u)),i[jb(r,a,l,c)]=!0,e.borderSkipped=i}function jb(e,t,n,s){return s?(e=OF(e,t,n),e=Nb(e,n,t)):e=Nb(e,t,n),e}function OF(e,t,n){return e===t?n:e===n?t:e}function Nb(e,t,n){return e==="start"?t:e==="end"?n:e}function LF(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class eu extends ii{parsePrimitiveData(t,n,s,r){return wb(t,n,s,r)}parseArrayData(t,n,s,r){return wb(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[];let f,m,p,g;for(f=s,m=s+r;f<m;++f)g=n[f],p={},p[i.axis]=i.parse(hi(g,u),f),h.push(M2(hi(g,d),p,a,f));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),a=i._custom,l=cf(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let m=n;m<n+s;m++){const p=this.getParsed(m),g=i||_e(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),v=this._calculateBarIndexPixels(m,d),b=(p._stacks||{})[l.axis],y={horizontal:u,base:g.base,enableBorderRadius:!b||cf(p._custom)||a===b._top||a===b._bottom,x:u?g.head:v.center,y:u?v.center:g.head,height:u?v.size:Math.abs(g.size),width:u?Math.abs(g.size):v.size};f&&(y.options=h||this.resolveDataElementOptions(m,t[m].active?"active":r));const w=y.options||t[m].options;IF(y,w,b,a),LF(y,w,d.ratio),this.updateElement(t[m],m,y,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{const h=d._parsed.find(m=>m[s.axis]===c),f=h&&h[d.vScale.axis];if(_e(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||a.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[be(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,a;for(i=0,a=n.data.length;i<a;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||TF(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=cf(u);let h=c[n.axis],f=0,m=s?this.applyStack(n,c,s):h,p,g;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&is(h)!==is(u.barEnd)&&(f=0),f+=h);const v=!_e(i)&&!d?i:f;let b=n.getPixelForValue(v);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=b,g=p-b,Math.abs(g)<a){g=MF(g,n,l)*a,h===l&&(b-=g/2);const y=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(y,w),N=Math.max(y,w);b=Math.max(Math.min(b,N),S),p=b+g,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(b))}if(b===n.getPixelForValue(l)){const y=is(g)*n.getLineWidthForValue(l)/2;b+=y,g-=y}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,a=be(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?_F(t,n,r,d*u):PF(t,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(be(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}le(eu,"id","bar"),le(eu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),le(eu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function FF(e,t,n){let s=1,r=1,i=0,a=0;if(t<Ke){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(w,S,N)=>ml(w,l,c,!0)?1:Math.max(S,S*n,N,N*n),p=(w,S,N)=>ml(w,l,c,!0)?-1:Math.min(S,S*n,N,N*n),g=m(0,u,h),v=m(gt,d,f),b=p(Ie,u,h),y=p(Ie+gt,d,f);s=(g-b)/2,r=(v-y)/2,i=-(g+b)/2,a=-(v+y)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:a}}class mo extends ii{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(Ce(s[t])){const{key:c="value"}=this._parsing;i=u=>+hi(s[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)r._parsed[a]=i(a)}}_getRotation(){return Ns(this.options.rotation-90)}_getCircumference(){return Ns(this.options.circumference)}_getRotationExtents(){let t=Ke,n=-Ke;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),a=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(H5(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=FF(h,d,c),v=(s.width-a)/f,b=(s.height-a)/m,y=Math.max(Math.min(v,b)/2,0),w=c2(this.options.radius,y),S=Math.max(w*c,0),N=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,r.total=this.calculateTotal(),this.outerRadius=w-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Ke)}updateElements(t,n,s,r){const i=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(n,r);let b=this._getRotation(),y;for(y=0;y<n;++y)b+=this._circumference(y,i);for(y=n;y<n+s;++y){const w=this._circumference(y,i),S=t[y],N={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:p,innerRadius:m};v&&(N.options=g||this.resolveDataElementOptions(y,S.active?"active":r)),b+=w,this.updateElement(S,y,N,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ke*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=vx(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,a,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),t=a.data,l=a.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(be(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}le(mo,"id","doughnut"),le(mo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),le(mo,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),le(mo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=t.legend.options;return n.labels.map((i,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class tu extends ii{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=h3(n,r,a);this._drawStart=l,this._drawCount=c,f3(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),f=a.axis,m=l.axis,{spanGaps:p,segment:g}=this.options,v=fl(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||r==="none",y=n+s,w=t.length;let S=n>0&&this.getParsed(n-1);for(let N=0;N<w;++N){const j=t[N],k=b?j:{};if(N<n||N>=y){k.skip=!0;continue}const C=this.getParsed(N),P=_e(C[m]),T=k[f]=a.getPixelForValue(C[f],N),O=k[m]=i||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[m],N);k.skip=isNaN(T)||isNaN(O)||P,k.stop=N>0&&Math.abs(C[f]-S[f])>v,g&&(k.parsed=C,k.raw=u.data[N]),h&&(k.options=d||this.resolveDataElementOptions(N,j.active?"active":r)),b||this.updateElement(j,N,k,r),S=C}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}le(tu,"id","line"),le(tu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),le(tu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Or(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class kx{constructor(t){le(this,"options");this.options=t||{}}static override(t){Object.assign(kx.prototype,t)}init(){}formats(){return Or()}parse(){return Or()}format(){return Or()}add(){return Or()}diff(){return Or()}startOf(){return Or()}endOf(){return Or()}}var $F={_date:kx};function BF(e,t,n,s){const{controller:r,data:i,_sorted:a}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&i.length){const u=l._reversePixels?o3:Zr;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(g=>!_e(g[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(g=>!_e(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function Jd(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=BF(i[l],t,a,r);for(let m=h;m<=f;++m){const p=d[m];p.skip||s(p,u,m)}}}function zF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,a=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function uf(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||Jd(e,n,t,function(l,c,u){!r&&!pl(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function VF(e,t,n,s){let r=[];function i(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],s),{angle:h}=h2(a,{x:t.x,y:t.y});ml(h,u,d)&&r.push({element:a,datasetIndex:l,index:c})}return Jd(e,n,t,i),r}function UF(e,t,n,s,r,i){let a=[];const l=zF(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,r);if(s&&!m)return;const p=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(p))&&!m)return;const v=l(t,p);v<c?(a=[{element:d,datasetIndex:h,index:f}],c=v):v===c&&a.push({element:d,datasetIndex:h,index:f})}return Jd(e,n,t,u),a}function df(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?VF(e,t,n,r):UF(e,t,n,s,r,i)}function Sb(e,t,n,s,r){const i=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return Jd(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var WF={modes:{index(e,t,n,s){const r=Wr(t,e),i=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?uf(e,r,i,s,a):df(e,r,i,!1,s,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?uf(e,r,i,s,a):df(e,r,i,!1,s,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return uf(e,r,i,s,a)},nearest(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return df(e,r,i,n.intersect,s,a)},x(e,t,n,s){const r=Wr(t,e);return Sb(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=Wr(t,e);return Sb(e,r,"y",n.intersect,s)}}};const R2=["left","top","right","bottom"];function Ga(e,t){return e.filter(n=>n.pos===t)}function Cb(e,t){return e.filter(n=>R2.indexOf(n.pos)===-1&&n.box.axis===t)}function Ya(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function qF(e){const t=[];let n,s,r,i,a,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:a,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:l});return t}function HF(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!R2.includes(r))continue;const a=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}function GF(e,t){const n=HF(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,a,l;for(i=0,a=e.length;i<a;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return n}function YF(e){const t=qF(e),n=Ya(t.filter(u=>u.box.fullSize),!0),s=Ya(Ga(t,"left"),!0),r=Ya(Ga(t,"right")),i=Ya(Ga(t,"top"),!0),a=Ya(Ga(t,"bottom")),l=Cb(t,"x"),c=Cb(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:Ga(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(a).concat(l)}}function kb(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function I2(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function QF(e,t,n,s){const{pos:r,box:i}=n,a=e.maxPadding;if(!Ce(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&I2(a,i.getPadding());const l=Math.max(0,t.outerWidth-kb(a,e,"left","right")),c=Math.max(0,t.outerHeight-kb(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function KF(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function XF(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{i[a]=Math.max(t[a],n[a])}),i}return s(e?["left","right"]:["top","bottom"])}function po(e,t,n,s){const r=[];let i,a,l,c,u,d;for(i=0,a=e.length,u=0;i<a;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,XF(l.horizontal,t));const{same:h,other:f}=QF(t,n,l,s);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&po(r,t,n,s)||d}function wc(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Eb(e,t,n,s){const r=n.padding;let{x:i,y:a}=t;for(const l of e){const c=l.box,u=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;hl(u.start)&&(a=u.start),c.fullSize?wc(c,r.left,a,n.outerWidth-r.right-r.left,f):wc(c,t.left+u.placed,a,h,f),u.start=a,u.placed+=h,a=c.bottom}else{const h=t.h*d,f=u.size||c.width;hl(u.start)&&(i=u.start),c.fullSize?wc(c,i,r.top,f,n.outerHeight-r.bottom-r.top):wc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=a}var Cn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=_n(e.options.layout.padding),i=Math.max(t-r.width,0),a=Math.max(n-r.height,0),l=YF(e.boxes),c=l.vertical,u=l.horizontal;Re(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},r);I2(f,_n(s));const m=Object.assign({maxPadding:f,w:i,h:a,x:r.left,y:r.top},r),p=GF(c.concat(u),h);po(l.fullSize,m,h,p),po(c,m,h,p),po(u,m,h,p)&&po(c,m,h,p),KF(m),Eb(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Eb(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Re(l.chartArea,g=>{const v=g.box;Object.assign(v,e.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class O2{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class JF extends O2{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const nu="$chartjs",ZF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Db=e=>e===null||e==="";function e6(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[nu]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Db(r)){const i=db(e,"width");i!==void 0&&(e.width=i)}if(Db(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=db(e,"height");i!==void 0&&(e.height=i)}return e}const L2=nF?{passive:!0}:!1;function t6(e,t,n){e&&e.addEventListener(t,n,L2)}function n6(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,L2)}function s6(e,t){const n=ZF[e.type]||e.type,{x:s,y:r}=Wr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Yu(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function r6(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Yu(l.addedNodes,s),a=a&&!Yu(l.removedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function i6(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Yu(l.removedNodes,s),a=a&&!Yu(l.addedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const xl=new Map;let Tb=0;function F2(){const e=window.devicePixelRatio;e!==Tb&&(Tb=e,xl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function a6(e,t){xl.size||window.addEventListener("resize",F2),xl.set(e,t)}function o6(e){xl.delete(e),xl.size||window.removeEventListener("resize",F2)}function l6(e,t,n){const s=e.canvas,r=s&&Cx(s);if(!r)return;const i=g2((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(r),a6(e,i),a}function hf(e,t,n){n&&n.disconnect(),t==="resize"&&o6(e)}function c6(e,t,n){const s=e.canvas,r=g2(i=>{e.ctx!==null&&n(s6(i,e))},e);return t6(s,t,r),r}class u6 extends O2{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(e6(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[nu])return!1;const s=n[nu].initial;["height","width"].forEach(i=>{const a=s[i];_e(a)?n.removeAttribute(i):n.setAttribute(i,a)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[nu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),a={attach:r6,detach:i6,resize:l6}[n]||c6;r[n]=a(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:hf,detach:hf,resize:hf}[n]||n6)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return tF(t,n,s,r)}isAttached(t){const n=t&&Cx(t);return!!(n&&n.isConnected)}}function d6(e){return!Sx()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?JF:u6}var Lc;let Ls=(Lc=class{constructor(){le(this,"x");le(this,"y");le(this,"active",!1);le(this,"options");le(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return fl(this.x)&&fl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},le(Lc,"defaults",{}),le(Lc,"defaultRoutes"),Lc);function h6(e,t){const n=e.options.ticks,s=f6(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?p6(t):[],a=i.length,l=i[0],c=i[a-1],u=[];if(a>r)return g6(t,u,i,a/r),u;const d=m6(i,t,r);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(jc(t,u,d,_e(m)?0:l-m,l),h=0,f=a-1;h<f;h++)jc(t,u,d,i[h],i[h+1]);return jc(t,u,d,c,_e(m)?t.length:c+m),u}return jc(t,u,d),u}function f6(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function m6(e,t,n){const s=x6(e),r=t.length/n;if(!s)return Math.max(r,1);const i=e3(s);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>r)return c}return Math.max(r,1)}function p6(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function g6(e,t,n,s){let r=0,i=n[0],a;for(s=Math.ceil(s),a=0;a<e.length;a++)a===i&&(t.push(e[a]),r++,i=n[r*s])}function jc(e,t,n,s,r){const i=be(s,0),a=Math.min(be(r,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function x6(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const y6=e=>e==="left"?"right":e==="right"?"left":e,Pb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,_b=(e,t)=>Math.min(t||e,e);function Ab(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function v6(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(c-i,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>a+l)))return c}function b6(e,t){Re(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Qa(e){return e.drawTicks?e.tickLength:0}function Mb(e,t){if(!e.display)return 0;const n=At(e.font,t),s=_n(e.padding);return(ct(e.text)?e.text.length:1)*n.lineHeight+s.height}function w6(e,t){return wi(e,{scale:t,type:"scale"})}function j6(e,t,n){return wi(e,{tick:n,index:t,type:"tick"})}function N6(e,t,n){let s=xx(e);return(n&&t!=="right"||!n&&t==="right")&&(s=y6(s)),s}function S6(e,t,n,s){const{top:r,left:i,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const g=a-r,v=l-i;if(e.isHorizontal()){if(m=Tt(s,i,l),Ce(n)){const b=Object.keys(n)[0],y=n[b];p=d[b].getPixelForValue(y)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=Pb(e,n,t);f=l-i}else{if(Ce(n)){const b=Object.keys(n)[0],y=n[b];m=d[b].getPixelForValue(y)-v+t}else n==="center"?m=(u.left+u.right)/2-v+t:m=Pb(e,n,t);p=Tt(s,a,r),h=n==="left"?-gt:gt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class Sa extends Ls{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=Kn(t,Number.POSITIVE_INFINITY),n=Kn(n,Number.NEGATIVE_INFINITY),s=Kn(s,Number.POSITIVE_INFINITY),r=Kn(r,Number.NEGATIVE_INFINITY),{min:Kn(t,s),max:Kn(n,r),minDefined:Ot(t),maxDefined:Ot(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),a;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,a.min)),i||(s=Math.max(s,a.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Kn(n,Kn(s,n)),max:Kn(s,Kn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ze(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=M3(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Ab(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=h6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ze(this.options.afterUpdate,[this])}beforeSetDimensions(){ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ze(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ze(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=ze(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=_b(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let a=r,l,c,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=_t(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(t.offset?.5:1)),c=this.maxHeight-Qa(t.grid)-n.padding-Mb(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),a=r3(Math.min(Math.asin(_t((d.highest.height+6)/l,-1,1)),Math.asin(_t(c/u,-1,1))-Math.asin(_t(f/u,-1,1)))),a=Math.max(r,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ze(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Mb(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=Qa(i)+c):(t.height=this.maxHeight,t.width=Qa(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,p=Ns(this.labelRotation),g=Math.cos(p),v=Math.sin(p);if(l){const b=s.mirror?0:v*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+b+m)}else{const b=s.mirror?0:g*h.width+v*f.height;t.width=Math.min(this.maxWidth,t.width+b+m)}this._calculatePadding(u,d,v,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=r*t.width,m=s*n.height):(f=s*t.height,m=r*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ze(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)_e(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Ab(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(n/_b(n,s));let u=0,d=0,h,f,m,p,g,v,b,y,w,S,N;for(h=0;h<n;h+=c){if(p=t[h].label,g=this._resolveTickFontOptions(h),r.font=v=g.string,b=i[v]=i[v]||{data:{},gc:[]},y=g.lineHeight,w=S=0,!_e(p)&&!ct(p))w=ab(r,b.data,b.gc,w,p),S=y;else if(ct(p))for(f=0,m=p.length;f<m;++f)N=p[f],!_e(N)&&!ct(N)&&(w=ab(r,b.data,b.gc,w,N),S+=y);a.push(w),l.push(S),u=Math.max(w,u),d=Math.max(S,d)}b6(i,n);const j=a.indexOf(u),k=l.indexOf(d),C=P=>({width:a[P]||0,height:l[P]||0});return{first:C(0),last:C(n-1),widest:C(j),highest:C(k),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return a3(this._alignToPixels?Ir(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=j6(this.getContext(),t,s))}return this.$context||(this.$context=w6(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ns(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:a,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Qa(i),m=[],p=l.setContext(this.getContext()),g=p.display?p.width:0,v=g/2,b=function(W){return Ir(s,W,g)};let y,w,S,N,j,k,C,P,T,O,L,F;if(a==="top")y=b(this.bottom),k=this.bottom-f,P=y-v,O=b(t.top)+v,F=t.bottom;else if(a==="bottom")y=b(this.top),O=t.top,F=b(t.bottom)-v,k=y+v,P=this.top+f;else if(a==="left")y=b(this.right),j=this.right-f,C=y-v,T=b(t.left)+v,L=t.right;else if(a==="right")y=b(this.left),T=t.left,L=b(t.right)-v,j=y+v,C=this.left+f;else if(n==="x"){if(a==="center")y=b((t.top+t.bottom)/2+.5);else if(Ce(a)){const W=Object.keys(a)[0],I=a[W];y=b(this.chart.scales[W].getPixelForValue(I))}O=t.top,F=t.bottom,k=y+v,P=k+f}else if(n==="y"){if(a==="center")y=b((t.left+t.right)/2);else if(Ce(a)){const W=Object.keys(a)[0],I=a[W];y=b(this.chart.scales[W].getPixelForValue(I))}j=y-v,C=j-f,T=t.left,L=t.right}const _=be(r.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/_));for(w=0;w<h;w+=B){const W=this.getContext(w),I=i.setContext(W),A=l.setContext(W),R=I.lineWidth,V=I.color,H=A.dash||[],J=A.dashOffset,re=I.tickWidth,oe=I.tickColor,ge=I.tickBorderDash||[],we=I.tickBorderDashOffset;S=v6(this,w,c),S!==void 0&&(N=Ir(s,S,R),u?j=C=T=L=N:k=P=O=F=N,m.push({tx1:j,ty1:k,tx2:C,ty2:P,x1:T,y1:O,x2:L,y2:F,width:R,color:V,borderDash:H,borderDashOffset:J,tickWidth:re,tickColor:oe,tickBorderDash:ge,tickBorderDashOffset:we}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=Qa(s.grid),m=f+d,p=h?-d:m,g=-Ns(this.labelRotation),v=[];let b,y,w,S,N,j,k,C,P,T,O,L,F="middle";if(r==="top")j=this.bottom-p,k=this._getXAxisLabelAlignment();else if(r==="bottom")j=this.top+p,k=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);k=B.textAlign,N=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);k=B.textAlign,N=B.x}else if(n==="x"){if(r==="center")j=(t.top+t.bottom)/2+m;else if(Ce(r)){const B=Object.keys(r)[0],W=r[B];j=this.chart.scales[B].getPixelForValue(W)+m}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")N=(t.left+t.right)/2-m;else if(Ce(r)){const B=Object.keys(r)[0],W=r[B];N=this.chart.scales[B].getPixelForValue(W)}k=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?F="top":c==="end"&&(F="bottom"));const _=this._getLabelSizes();for(b=0,y=l.length;b<y;++b){w=l[b],S=w.label;const B=i.setContext(this.getContext(b));C=this.getPixelForTick(b)+i.labelOffset,P=this._resolveTickFontOptions(b),T=P.lineHeight,O=ct(S)?S.length:1;const W=O/2,I=B.color,A=B.textStrokeColor,R=B.textStrokeWidth;let V=k;a?(N=C,k==="inner"&&(b===y-1?V=this.options.reverse?"left":"right":b===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?u==="near"||g!==0?L=-O*T+T/2:u==="center"?L=-_.highest.height/2-W*T+T:L=-_.highest.height+T/2:u==="near"||g!==0?L=T/2:u==="center"?L=_.highest.height/2-W*T:L=_.highest.height-O*T,h&&(L*=-1),g!==0&&!B.showLabelBackdrop&&(N+=T/2*Math.sin(g))):(j=C,L=(1-O)*T/2);let H;if(B.showLabelBackdrop){const J=_n(B.backdropPadding),re=_.heights[b],oe=_.widths[b];let ge=L-J.top,we=0-J.left;switch(F){case"middle":ge-=re/2;break;case"bottom":ge-=re;break}switch(k){case"center":we-=oe/2;break;case"right":we-=oe;break;case"inner":b===y-1?we-=oe:b>0&&(we-=oe/2);break}H={left:we,top:ge,width:oe+J.width,height:re+J.height,color:B.backdropColor}}v.push({label:S,font:P,textOffset:L,options:{rotation:g,color:I,strokeColor:A,strokeWidth:R,textAlign:V,textBaseline:F,translation:[N,j],backdrop:H}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ns(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,a=this._getLabelSizes(),l=t+i,c=a.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,a;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,a=r.length;i<a;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),a=s.display?i.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Ir(t,this.left,a)-a/2,d=Ir(t,this.right,l)+l/2,h=f=c):(h=Ir(t,this.top,a)-a/2,f=Ir(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Qd(s,r);const i=this.getLabelItems(t);for(const a of i){const l=a.options,c=a.font,u=a.label,d=a.textOffset;gl(s,u,0,d,c,l)}r&&Kd(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=At(s.font),a=_n(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Ce(n)?(c+=a.bottom,ct(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=S6(this,c,n,l);gl(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:N6(l,n,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=be(t.grid&&t.grid.z,-1),r=be(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Sa.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,a;for(i=0,a=n.length;i<a;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return At(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Nc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;E6(n)&&(s=this.register(n));const r=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,C6(t,a,s),this.override&&it.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in it[r]&&(delete it[r][s],this.override&&delete fi[s])}}function C6(e,t,n){const s=dl(Object.create(null),[n?it.get(n):{},it.get(t),e.defaults]);it.set(t,s),e.defaultRoutes&&k6(t,e.defaultRoutes),e.descriptors&&it.describe(t,e.descriptors)}function k6(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");it.route(i,r,c,l)})}function E6(e){return"id"in e&&"defaults"in e}class D6{constructor(){this.controllers=new Nc(ii,"datasets",!0),this.elements=new Nc(Ls,"elements"),this.plugins=new Nc(Object,"plugins"),this.scales=new Nc(Sa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Re(r,a=>{const l=s||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,s){const r=px(t);ze(s["before"+r],[],s),n[t](s),ze(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var Zn=new D6;class T6{constructor(){this._init=[]}notify(t,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,s,r){r=r||{};for(const i of t){const a=i.plugin,l=a[s],c=[n,r,i.options];if(ze(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=be(s.options&&s.options.plugins,{}),i=P6(s);return r===!1&&!n?[]:A6(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function P6(e){const t={},n=[],s=Object.keys(Zn.plugins.items);for(let i=0;i<s.length;i++)n.push(Zn.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const a=r[i];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function _6(e,t){return!t&&e===!1?null:e===!0?{}:e}function A6(e,{plugins:t,localIds:n},s,r){const i=[],a=e.getContext();for(const l of t){const c=l.id,u=_6(s[c],r);u!==null&&i.push({plugin:l,options:M6(e.config,{plugin:l,local:n[c]},u,a)})}return i}function M6(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(s,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function mp(e,t){const n=it.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function R6(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function I6(e,t){return e===t?"_index_":"_value_"}function Rb(e){if(e==="x"||e==="y"||e==="r")return e}function O6(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function pp(e,...t){if(Rb(e))return e;for(const n of t){const s=n.axis||O6(n.position)||e.length>1&&Rb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Ib(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function L6(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Ib(e,"x",n[0])||Ib(e,"y",n[0])}return{}}function F6(e,t){const n=fi[e.type]||{scales:{}},s=t.scales||{},r=mp(e.type,t),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!Ce(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=pp(a,l,L6(a,e),it.scales[l.type]),u=I6(c,r),d=n.scales||{};i[a]=Ao(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||mp(l,t),d=(fi[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=R6(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Ao(i[m],[{axis:f},s[m],d[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];Ao(l,[it.scales[l.type],it.scale])}),i}function $2(e){const t=e.options||(e.options={});t.plugins=be(t.plugins,{}),t.scales=F6(e,t)}function B2(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function $6(e){return e=e||{},e.data=B2(e.data),$2(e),e}const Ob=new Map,z2=new Set;function Sc(e,t){let n=Ob.get(e);return n||(n=t(),Ob.set(e,n),z2.add(n)),n}const Ka=(e,t,n)=>{const s=hi(t,n);s!==void 0&&e.add(s)};let B6=class{constructor(t){this._config=$6(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=B2(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$2(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Sc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Sc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Sc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Sc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,a=this._cachedScopes(t,s),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>Ka(c,t,h))),d.forEach(h=>Ka(c,r,h)),d.forEach(h=>Ka(c,fi[i]||{},h)),d.forEach(h=>Ka(c,it,h)),d.forEach(h=>Ka(c,hp,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),z2.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,fi[n]||{},it.datasets[n]||{},{type:n},it,hp]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=Lb(this._resolverCache,t,r);let c=a;if(V6(a,n)){i.$shared=!1,s=Cr(s)?s():s;const u=this.createResolver(t,s,l);c=ha(a,s,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,s=[""],r){const{resolver:i}=Lb(this._resolverCache,t,s);return Ce(n)?ha(i,n,void 0,r):i}};function Lb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:wx(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const z6=e=>Ce(e)&&Object.getOwnPropertyNames(e).some(t=>Cr(e[t]));function V6(e,t){const{isScriptable:n,isIndexable:s}=b2(e);for(const r of t){const i=n(r),a=s(r),l=(a||i)&&e[r];if(i&&(Cr(l)||z6(l))||a&&ct(l))return!0}return!1}var U6="4.5.0";const W6=["top","bottom","left","right","chartArea"];function Fb(e,t){return e==="top"||e==="bottom"||W6.indexOf(e)===-1&&t==="x"}function $b(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Bb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),ze(n&&n.onComplete,[e],t)}function q6(e){const t=e.chart,n=t.options.animation;ze(n&&n.onProgress,[e],t)}function V2(e){return Sx()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const su={},zb=e=>{const t=V2(e);return Object.values(su).filter(n=>n.canvas===t).pop()};function H6(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const a=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=a)}}}function G6(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var Vs;let Ca=(Vs=class{static register(...t){Zn.add(...t),Vb()}static unregister(...t){Zn.remove(...t),Vb()}constructor(t,n){const s=this.config=new B6(n),r=V2(t),i=zb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||d6(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=q5(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new T6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=u3(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],su[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}ms.listen(this,"complete",Bb),ms.listen(this,"progress",q6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return _e(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Zn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ub(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ob(this.canvas,this.ctx),this}stop(){return ms.stop(this),this}resize(t,n){ms.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ub(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),ze(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Re(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const l=n[a],c=pp(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Re(i,a=>{const l=a.options,c=l.id,u=pp(c,l),d=be(l.type,a.dtype);(l.position===void 0||Fb(l.position,u)!==Fb(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{const f=Zn.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),Re(r,(a,l)=>{a||delete s[l]}),Re(s,a=>{Cn.configure(this,a,a.options),Cn.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort($b("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let a=this.getDatasetMeta(s);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=i.indexAxis||mp(l,this.options),a.order=i.order||0,a.index=s,a.label=""+i.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=Zn.getController(l),{datasetElementType:u,dataElementType:d}=it.datasets[l];Object.assign(c,{dataElementType:Zn.getElement(d),datasetElementType:u&&Zn.getElement(u)}),a.controller=new c(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Re(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),r||Re(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort($b("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Re(this.scales,t=>{Cn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Xv(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const a=s==="_removeElements"?-i:i;H6(t,r,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!Xv(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Cn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Re(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ms.has(this)?this.attached&&!ms.running(this)&&ms.start(this):(this.draw(),Bb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=P2(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Qd(n,r),t.controller.draw(),r&&Kd(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return pl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=WF.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,r);hl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ms.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ob(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete su[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,a)=>{n.addEventListener(this,i,a),t[i]=a},r=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};Re(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Re(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Re(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,a,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Uu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=i(n,t),l=s?t:i(t,n);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,a=n,l=this._getActiveElements(t,r,s,a),c=X5(t),u=G6(t,this._lastEvent,s,c);s&&(this._lastEvent=null,ze(i.onHover,[t,l,this],this),c&&ze(i.onClick,[t,l,this],this));const d=!Uu(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},le(Vs,"defaults",it),le(Vs,"instances",su),le(Vs,"overrides",fi),le(Vs,"registry",Zn),le(Vs,"version",U6),le(Vs,"getChart",zb),Vs);function Vb(){return Re(Ca.instances,e=>e._plugins.invalidate())}function Y6(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:a,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/a,nn(s-n));if(e.beginPath(),e.arc(r,i,a-u/2,s+h/2,n-h/2),l>0){const f=Math.min(u/l,nn(s-n));e.arc(r,i,l+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,a*nn(s-n));if(d==="round")e.arc(r,i,f,n-Ie/2,s+Ie/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Ie/2)+r,g=-m*Math.sin(n+Ie/2)+i,v=m*Math.cos(s+Ie/2)+r,b=m*Math.sin(s+Ie/2)+i;e.lineTo(p,g),e.lineTo(v,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Q6(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:a,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,a,l,s-u,n+u),c>r?(u=r/c,e.arc(i,a,c,n+u,s-u,!0)):e.arc(i,a,r,n+gt,s-gt),e.closePath(),e.clip()}function K6(e){return bx(e,["outerStart","outerEnd","innerStart","innerEnd"])}function X6(e,t,n,s){const r=K6(e.options.borderRadius),i=(n-t)/2,a=Math.min(i,s*t/2),l=c=>{const u=(n-Math.min(i,c))*s/2;return _t(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:_t(r.innerStart,0,a),innerEnd:_t(r.innerEnd,0,a)}}function ki(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Qu(e,t,n,s,r,i){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let m=0;const p=r-c;if(s){const B=d>0?d-s:0,W=h>0?h-s:0,I=(B+W)/2,A=I!==0?p*I/(I+s):p;m=(p-A)/2}const g=Math.max(.001,p*h-n/Ie)/h,v=(p-g)/2,b=c+v+m,y=r-v-m,{outerStart:w,outerEnd:S,innerStart:N,innerEnd:j}=X6(t,f,h,y-b),k=h-w,C=h-S,P=b+w/k,T=y-S/C,O=f+N,L=f+j,F=b+N/O,_=y-j/L;if(e.beginPath(),i){const B=(P+T)/2;if(e.arc(a,l,h,P,B),e.arc(a,l,h,B,T),S>0){const R=ki(C,T,a,l);e.arc(R.x,R.y,S,T,y+gt)}const W=ki(L,y,a,l);if(e.lineTo(W.x,W.y),j>0){const R=ki(L,_,a,l);e.arc(R.x,R.y,j,y+gt,_+Math.PI)}const I=(y-j/f+(b+N/f))/2;if(e.arc(a,l,f,y-j/f,I,!0),e.arc(a,l,f,I,b+N/f,!0),N>0){const R=ki(O,F,a,l);e.arc(R.x,R.y,N,F+Math.PI,b-gt)}const A=ki(k,b,a,l);if(e.lineTo(A.x,A.y),w>0){const R=ki(k,P,a,l);e.arc(R.x,R.y,w,b-gt,P)}}else{e.moveTo(a,l);const B=Math.cos(P)*h+a,W=Math.sin(P)*h+l;e.lineTo(B,W);const I=Math.cos(T)*h+a,A=Math.sin(T)*h+l;e.lineTo(I,A)}e.closePath()}function J6(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l}=t;let c=t.endAngle;if(i){Qu(e,t,n,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=a+(l%Ke||Ke))}return Qu(e,t,n,s,c,r),e.fill(),c}function Z6(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let g=t.endAngle;if(i){Qu(e,t,n,s,g,r);for(let v=0;v<i;++v)e.stroke();isNaN(l)||(g=a+(l%Ke||Ke))}p&&Q6(e,t,g),c.selfJoin&&g-a>=Ie&&m===0&&d!=="miter"&&Y6(e,t,g),i||(Qu(e,t,n,s,g,r),e.stroke())}class go extends Ls{constructor(n){super();le(this,"circumference");le(this,"endAngle");le(this,"fullCircles");le(this,"innerRadius");le(this,"outerRadius");le(this,"pixelMargin");le(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:a,distance:l}=h2(i,{x:n,y:s}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,p=be(f,u-c),g=ml(a,c,u)&&c!==u,v=p>=Ke||g,b=Ss(l,d+m,h+m);return v&&b}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+a)/2,f=(l+c+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,a=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Ke?Math.floor(r/Ke):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Ie,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,J6(n,this,d,a,l),Z6(n,this,d,a,l),n.restore()}}le(go,"id","arc"),le(go,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),le(go,"defaultRoutes",{backgroundColor:"backgroundColor"}),le(go,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function U2(e,t,n=t){e.lineCap=be(n.borderCapStyle,t.borderCapStyle),e.setLineDash(be(n.borderDash,t.borderDash)),e.lineDashOffset=be(n.borderDashOffset,t.borderDashOffset),e.lineJoin=be(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=be(n.borderWidth,t.borderWidth),e.strokeStyle=be(n.borderColor,t.borderColor)}function e$(e,t,n){e.lineTo(n.x,n.y)}function t$(e){return e.stepped?S3:e.tension||e.cubicInterpolationMode==="monotone"?C3:e$}function W2(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:a,end:l}=t,c=Math.max(r,a),u=Math.min(i,l),d=r<a&&i<a||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function n$(e,t,n,s){const{points:r,options:i}=t,{count:a,start:l,loop:c,ilen:u}=W2(r,n,s),d=t$(i);let{move:h=!0,reverse:f}=s||{},m,p,g;for(m=0;m<=u;++m)p=r[(l+(f?u-m:m))%a],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,g,p,f,i.stepped),g=p);return c&&(p=r[(l+(f?u:0))%a],d(e,g,p,f,i.stepped)),!!c}function s$(e,t,n,s){const r=t.points,{count:i,start:a,ilen:l}=W2(r,n,s),{move:c=!0,reverse:u}=s||{};let d=0,h=0,f,m,p,g,v,b;const y=S=>(a+(u?l-S:S))%i,w=()=>{g!==v&&(e.lineTo(d,v),e.lineTo(d,g),e.lineTo(d,b))};for(c&&(m=r[y(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[y(f)],m.skip)continue;const S=m.x,N=m.y,j=S|0;j===p?(N<g?g=N:N>v&&(v=N),d=(h*d+S)/++h):(w(),e.lineTo(S,N),p=j,h=0,g=v=N),b=N}w()}function gp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?s$:n$}function r$(e){return e.stepped?sF:e.tension||e.cubicInterpolationMode==="monotone"?rF:qr}function i$(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),U2(e,t.options),e.stroke(r)}function a$(e,t,n,s){const{segments:r,options:i}=t,a=gp(t);for(const l of r)U2(e,i,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const o$=typeof Path2D=="function";function l$(e,t,n,s){o$&&!t.options.segment?i$(e,t,n,s):a$(e,t,n,s)}class sr extends Ls{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;Q3(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uF(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,a=T2(this,{property:n,start:r,end:r});if(!a.length)return;const l=[],c=r$(s);let u,d;for(u=0,d=a.length;u<d;++u){const{start:h,end:f}=a[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const g=Math.abs((r-m[n])/(p[n]-m[n])),v=c(m,p,g,s.stepped);v[n]=t[n],l.push(v)}return l.length===1?l[0]:l}pathSegment(t,n,s){return gp(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=gp(this);let a=this._loop;n=n||0,s=s||this.points.length-n;for(const l of r)a&=i(t,this,l,{start:n,end:n+s-1});return!!a}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),l$(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}le(sr,"id","line"),le(sr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),le(sr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),le(sr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Ub(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class ru extends Ls{constructor(n){super();le(this,"parsed");le(this,"skip");le(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(n-a,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return Ub(this,n,"x",s)}inYRange(n,s){return Ub(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!pl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,fp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}le(ru,"id","point"),le(ru,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),le(ru,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function q2(e,t){const{x:n,y:s,base:r,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=a/2,l=Math.min(n,r),c=Math.max(n,r),u=s-h,d=s+h):(h=i/2,l=n-h,c=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function rr(e,t,n,s){return e?0:_t(t,n,s)}function c$(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=v2(s);return{t:rr(r.top,i.top,0,n),r:rr(r.right,i.right,0,t),b:rr(r.bottom,i.bottom,0,n),l:rr(r.left,i.left,0,t)}}function u$(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Ji(r),a=Math.min(t,n),l=e.borderSkipped,c=s||Ce(r);return{topLeft:rr(!c||l.top||l.left,i.topLeft,0,a),topRight:rr(!c||l.top||l.right,i.topRight,0,a),bottomLeft:rr(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:rr(!c||l.bottom||l.right,i.bottomRight,0,a)}}function d$(e){const t=q2(e),n=t.right-t.left,s=t.bottom-t.top,r=c$(e,n/2,s/2),i=u$(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function ff(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&q2(e,s);return l&&(r||Ss(t,l.left,l.right))&&(i||Ss(n,l.top,l.bottom))}function h$(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function f$(e,t){e.rect(t.x,t.y,t.w,t.h)}function mf(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+a,radius:e.radius}}class iu extends Ls{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:a}=d$(this),l=h$(a.radius)?Hu:f$;t.save(),(a.w!==i.w||a.h!==i.h)&&(t.beginPath(),l(t,mf(a,n,i)),t.clip(),l(t,mf(i,-n,a)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,mf(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return ff(this,t,n,s)}inXRange(t,n){return ff(this,t,null,n)}inYRange(t,n){return ff(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}le(iu,"id","bar"),le(iu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),le(iu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function m$(e,t,n){const s=e.segments,r=e.points,i=t.points,a=[];for(const l of s){let{start:c,end:u}=l;u=Zd(c,u,r);const d=xp(n,r[c],r[u],l.loop);if(!t.segments){a.push({source:l,target:d,start:r[c],end:r[u]});continue}const h=T2(t,d);for(const f of h){const m=xp(n,i[f.start],i[f.end],f.loop),p=D2(l,r,m);for(const g of p)a.push({source:g,target:f,start:{[n]:Wb(d,m,"start",Math.max)},end:{[n]:Wb(d,m,"end",Math.min)}})}}return a}function xp(e,t,n,s){if(s)return;let r=t[e],i=n[e];return e==="angle"&&(r=nn(r),i=nn(i)),{property:e,start:r,end:i}}function p$(e,t){const{x:n=null,y:s=null}=e||{},r=t.points,i=[];return t.segments.forEach(({start:a,end:l})=>{l=Zd(a,l,r);const c=r[a],u=r[l];s!==null?(i.push({x:c.x,y:s}),i.push({x:u.x,y:s})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function Zd(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Wb(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function H2(e,t){let n=[],s=!1;return ct(e)?(s=!0,n=e):n=p$(e,t),n.length?new sr({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function qb(e){return e&&e.fill!==!1}function g$(e,t,n){let r=e[t].fill;const i=[t];let a;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Ot(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function x$(e,t,n){const s=w$(e);if(Ce(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return Ot(r)&&Math.floor(r)===r?y$(s[0],t,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function y$(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function v$(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Ce(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function b$(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:Ce(e)?s=e.value:s=t.getBaseValue(),s}function w$(e){const t=e.options,n=t.fill;let s=be(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function j$(e){const{scale:t,index:n,line:s}=e,r=[],i=s.segments,a=s.points,l=N$(t,n);l.push(H2({x:null,y:t.bottom},s));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)S$(r,a[d],l)}return new sr({points:r,options:{}})}function N$(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function S$(e,t,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:a,last:l,point:c}=C$(i,t,"x");if(!(!c||a&&l)){if(a)s.unshift(c);else if(e.push(c),!l)break}}e.push(...s)}function C$(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const r=s[n],i=e.segments,a=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=a[d.start][n],f=a[d.end][n];if(Ss(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:s}}class G2{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:r,y:i,radius:a}=this;return n=n||{start:0,end:Ke},t.arc(r,i,a,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:r}=this,i=t.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function k$(e){const{chart:t,fill:n,line:s}=e;if(Ot(n))return E$(t,n);if(n==="stack")return j$(e);if(n==="shape")return!0;const r=D$(e);return r instanceof G2?r:H2(r,s)}function E$(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function D$(e){return(e.scale||{}).getPointPositionForValue?P$(e):T$(e)}function T$(e){const{scale:t={},fill:n}=e,s=v$(n,t);if(Ot(s)){const r=t.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function P$(e){const{scale:t,fill:n}=e,s=t.options,r=t.getLabels().length,i=s.reverse?t.max:t.min,a=b$(n,t,i),l=[];if(s.grid.circular){const c=t.getPointPositionForValue(0,i);return new G2({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,a));return l}function pf(e,t,n){const s=k$(t),{chart:r,index:i,line:a,scale:l,axis:c}=t,u=a.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=r.getDatasetMeta(i),g=P2(r,p);s&&a.points.length&&(Qd(e,n),_$(e,{line:a,target:s,above:f,below:m,area:n,scale:l,axis:c,clip:g}),Kd(e))}function _$(e,t){const{line:n,target:s,above:r,below:i,area:a,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==r&&(u==="x"?(Hb(e,s,a.top),gf(e,{line:n,target:s,color:r,scale:l,property:u,clip:c}),e.restore(),e.save(),Hb(e,s,a.bottom)):u==="y"&&(Gb(e,s,a.left),gf(e,{line:n,target:s,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),Gb(e,s,a.right),d=r)),gf(e,{line:n,target:s,color:d,scale:l,property:u,clip:c}),e.restore()}function Hb(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[Zd(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Gb(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[Zd(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function gf(e,t){const{line:n,target:s,property:r,color:i,scale:a,clip:l}=t,c=m$(n,s,r);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=s!==!0;e.save(),e.fillStyle=m,A$(e,a,l,p&&xp(r,h,f)),e.beginPath();const g=!!n.pathSegment(e,u);let v;if(p){g?e.closePath():Yb(e,s,f,r);const b=!!s.pathSegment(e,d,{move:g,reverse:!0});v=g&&b,v||Yb(e,s,h,r)}e.closePath(),e.fill(v?"evenodd":"nonzero"),e.restore()}}function A$(e,t,n,s){const r=t.chart.chartArea,{property:i,start:a,end:l}=s||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=a,u=r.top,d=l,h=r.bottom):(c=r.left,u=a,d=r.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function Yb(e,t,n,s){const r=t.interpolate(n,s);r&&e.lineTo(r.x,r.y)}var Ex={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,r=[];let i,a,l,c;for(a=0;a<s;++a)i=e.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof sr&&(c={visible:e.isDatasetVisible(a),index:a,fill:x$(l,a,s),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(a=0;a<s;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=g$(r,a,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),s&&l.fill&&pf(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;qb(i)&&pf(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!qb(s)||n.drawTime!=="beforeDatasetDraw"||pf(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Qb=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},M$=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Kb extends Ls{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=ze(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=At(s.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Qb(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,g)=>{const v=s+n/2+i.measureText(p.text).width;(g===0||u[u.length-1]+v+2*l>a)&&(h+=d,u[u.length-(g>0?0:1)]=0,m+=d,f++),c[g]={left:0,top:m,row:f,width:v,height:r},u[u.length-1]+=v+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let h=l,f=0,m=0,p=0,g=0;return this.legendItems.forEach((v,b)=>{const{itemWidth:y,itemHeight:w}=R$(s,n,i,v,r);b>0&&m+w+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,g++,f=m=0),c[b]={left:p,top:m,col:g,width:y,height:w},f=Math.max(f,y),m+=w+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,a=Zi(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Tt(s,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=Tt(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+r}else{let l=0,c=Tt(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=Tt(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Qd(t,this),this._draw(),Kd(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:a}=t,l=it.color,c=Zi(t.rtl,this.left,this.width),u=At(a.font),{padding:d}=a,h=u.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:v}=Qb(a,h),b=function(j,k,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();const P=be(C.lineWidth,1);if(r.fillStyle=be(C.fillStyle,l),r.lineCap=be(C.lineCap,"butt"),r.lineDashOffset=be(C.lineDashOffset,0),r.lineJoin=be(C.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=be(C.strokeStyle,l),r.setLineDash(be(C.lineDash,[])),a.usePointStyle){const T={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:P},O=c.xPlus(j,p/2),L=k+f;y2(r,T,O,L,a.pointStyleWidth&&p)}else{const T=k+Math.max((h-g)/2,0),O=c.leftForLtr(j,p),L=Ji(C.borderRadius);r.beginPath(),Object.values(L).some(F=>F!==0)?Hu(r,{x:O,y:T,w:p,h:g,radius:L}):r.rect(O,T,p,g),r.fill(),P!==0&&r.stroke()}r.restore()},y=function(j,k,C){gl(r,C.text,j,k+v/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?m={x:Tt(i,this.left+d,this.right-s[0]),y:this.top+d+S,line:0}:m={x:this.left+d,y:Tt(i,this.top+S+d,this.bottom-n[0].height),line:0},C2(this.ctx,t.textDirection);const N=v+d;this.legendItems.forEach((j,k)=>{r.strokeStyle=j.fontColor,r.fillStyle=j.fontColor;const C=r.measureText(j.text).width,P=c.textAlign(j.textAlign||(j.textAlign=a.textAlign)),T=p+f+C;let O=m.x,L=m.y;c.setWidth(this.width),w?k>0&&O+T+d>this.right&&(L=m.y+=N,m.line++,O=m.x=Tt(i,this.left+d,this.right-s[m.line])):k>0&&L+N>this.bottom&&(O=m.x=O+n[m.line].width+d,m.line++,L=m.y=Tt(i,this.top+S+d,this.bottom-n[m.line].height));const F=c.x(O);if(b(F,L,j),O=d3(P,O+p+f,w?O+T:this.right,t.rtl),y(c.x(O),L,j),w)m.x+=T+d;else if(typeof j.text!="string"){const _=u.lineHeight;m.y+=Y2(j,_)+d}else m.y+=N}),k2(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=At(n.font),r=_n(n.padding);if(!n.display)return;const i=Zi(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=s.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=Tt(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);d=u+Tt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=Tt(l,h,h+f);a.textAlign=i.textAlign(xx(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=s.string,gl(a,n.text,m,d,s)}_computeTitleHeight(){const t=this.options.title,n=At(t.font),s=_n(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(Ss(t,this.left,this.right)&&Ss(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Ss(t,r.left,r.left+r.width)&&Ss(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!L$(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=M$(r,s);r&&!i&&ze(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&ze(n.onHover,[t,s,this],this)}else s&&ze(n.onClick,[t,s,this],this)}}function R$(e,t,n,s,r){const i=I$(s,e,t,n),a=O$(r,s,t.lineHeight);return{itemWidth:i,itemHeight:a}}function I$(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,a)=>i.length>a.length?i:a)),t+n.size/2+s.measureText(r).width}function O$(e,t,n){let s=e;return typeof t.text!="string"&&(s=Y2(t,n)),s}function Y2(e,t){const n=e.text?e.text.length:0;return t*n}function L$(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Dx={id:"legend",_element:Kb,start(e,t,n){const s=e.legend=new Kb({ctx:e.ctx,options:n,chart:e});Cn.configure(e,s,n),Cn.addBox(e,s)},stop(e){Cn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Cn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=_n(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Q2 extends Ls{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=ct(s.text)?s.text.length:1;this._padding=_n(s.padding);const i=r*At(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:a}=this,l=a.align;let c=0,u,d,h;return this.isHorizontal()?(d=Tt(l,s,i),h=n+t,u=i-s):(a.position==="left"?(d=s+t,h=Tt(l,r,n),c=Ie*-.5):(d=i-t,h=Tt(l,n,r),c=Ie*.5),u=r-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=At(n.font),i=s.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);gl(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:xx(n.align),textBaseline:"middle",translation:[a,l]})}}function F$(e,t){const n=new Q2({ctx:e.ctx,options:t,chart:e});Cn.configure(e,n,t),Cn.addBox(e,n),e.titleBlock=n}var K2={id:"title",_element:Q2,start(e,t,n){F$(e,n)},stop(e){const t=e.titleBlock;Cn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Cn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xo={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=e.length;i<a;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=dp(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function Xn(e,t){return t&&(ct(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ps(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function $$(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:a,value:l}=i.getLabelAndValue(r);return{chart:e,label:a,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function Xb(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:a,boxHeight:l}=t,c=At(t.bodyFont),u=At(t.titleFont),d=At(t.footerFont),h=i.length,f=r.length,m=s.length,p=_n(t.padding);let g=p.height,v=0,b=s.reduce((S,N)=>S+N.before.length+N.lines.length+N.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const S=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=m*S+(b-m)*c.lineHeight+(b-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let y=0;const w=function(S){v=Math.max(v,n.measureText(S).width+y)};return n.save(),n.font=u.string,Re(e.title,w),n.font=c.string,Re(e.beforeBody.concat(e.afterBody),w),y=t.displayColors?a+2+t.boxPadding:0,Re(s,S=>{Re(S.before,w),Re(S.lines,w),Re(S.after,w)}),y=0,n.font=d.string,Re(e.footer,w),n.restore(),v+=p.width,{width:v,height:g}}function B$(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function z$(e,t,n,s){const{x:r,width:i}=s,a=n.caretSize+n.caretPadding;if(e==="left"&&r+i+a>t.width||e==="right"&&r-i-a<0)return!0}function V$(e,t,n,s){const{x:r,width:i}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=a-i/2&&(u="right"),z$(u,e,t,n)&&(u="center"),u}function Jb(e,t,n){const s=n.yAlign||t.yAlign||B$(e,n);return{xAlign:n.xAlign||t.xAlign||V$(e,t,n,s),yAlign:s}}function U$(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function W$(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function Zb(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=Ji(a);let p=U$(t,l);const g=W$(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:_t(p,0,s.width-t.width),y:_t(g,0,s.height-t.height)}}function Cc(e,t,n){const s=_n(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function ew(e){return Xn([],ps(e))}function q$(e,t,n){return wi(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function tw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const X2={beforeTitle:hs,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:hs,beforeBody:hs,beforeLabel:hs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return _e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:hs,afterBody:hs,beforeFooter:hs,footer:hs,afterFooter:hs};function Ht(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?X2[t].call(n,s):r}class yp extends Ls{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new _2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=q$(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=Ht(s,"beforeTitle",this,t),i=Ht(s,"title",this,t),a=Ht(s,"afterTitle",this,t);let l=[];return l=Xn(l,ps(r)),l=Xn(l,ps(i)),l=Xn(l,ps(a)),l}getBeforeBody(t,n){return ew(Ht(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Re(t,i=>{const a={before:[],lines:[],after:[]},l=tw(s,i);Xn(a.before,ps(Ht(l,"beforeLabel",this,i))),Xn(a.lines,Ht(l,"label",this,i)),Xn(a.after,ps(Ht(l,"afterLabel",this,i))),r.push(a)}),r}getAfterBody(t,n){return ew(Ht(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=Ht(s,"beforeFooter",this,t),i=Ht(s,"footer",this,t),a=Ht(s,"afterFooter",this,t);let l=[];return l=Xn(l,ps(r)),l=Xn(l,ps(i)),l=Xn(l,ps(a)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push($$(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,s))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,s))),Re(l,d=>{const h=tw(t.callbacks,d);r.push(Ht(h,"labelColor",this,d)),i.push(Ht(h,"labelPointStyle",this,d)),a.push(Ht(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=xo[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=Xb(this,s),u=Object.assign({},l,c),d=Jb(this.chart,s,u),h=Zb(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Ji(l),{x:f,y:m}=t,{width:p,height:g}=n;let v,b,y,w,S,N;return i==="center"?(S=m+g/2,r==="left"?(v=f,b=v-a,w=S+a,N=S-a):(v=f+p,b=v+a,w=S-a,N=S+a),y=v):(r==="left"?b=f+Math.max(c,d)+a:r==="right"?b=f+p-Math.max(u,h)-a:b=this.caretX,i==="top"?(w=m,S=w-a,v=b-a,y=b+a):(w=m+g,S=w+a,v=b+a,y=b-a),N=w),{x1:v,x2:b,x3:y,y1:w,y2:S,y3:N}}drawTitle(t,n,s){const r=this.title,i=r.length;let a,l,c;if(i){const u=Zi(s.rtl,this.x,this.width);for(t.x=Cc(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",a=At(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=a.string,c=0;c<i;++c)n.fillText(r[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=At(i.bodyFont),h=Cc(this,"left",i),f=r.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(f,u)+u/2,b=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,fp(t,g,v,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,fp(t,g,v,b)}else{t.lineWidth=Ce(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=r.leftForLtr(f,u),v=r.leftForLtr(r.xPlus(f,1),u-2),b=Ji(a.borderRadius);Object.values(b).some(y=>y!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Hu(t,{x:g,y:p,w:u,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Hu(t,{x:v,y:p+1,w:u-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,p,u,c),t.strokeRect(g,p,u,c),t.fillStyle=a.backgroundColor,t.fillRect(v,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=At(s.bodyFont);let f=h.lineHeight,m=0;const p=Zi(s.rtl,this.x,this.width),g=function(C){n.fillText(C,p.x(t.x+m),t.y+f/2),t.y+=f+i},v=p.textAlign(a);let b,y,w,S,N,j,k;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,t.x=Cc(this,v,s),n.fillStyle=s.bodyColor,Re(this.beforeBody,g),m=l&&v!=="right"?a==="center"?u/2+d:u+2+d:0,S=0,j=r.length;S<j;++S){for(b=r[S],y=this.labelTextColors[S],n.fillStyle=y,Re(b.before,g),w=b.lines,l&&w.length&&(this._drawColorBox(n,t,S,p,s),f=Math.max(h.lineHeight,c)),N=0,k=w.length;N<k;++N)g(w[N]),f=h.lineHeight;Re(b.after,g)}m=0,f=h.lineHeight,Re(this.afterBody,g),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let a,l;if(i){const c=Zi(s.rtl,this.x,this.width);for(t.x=Cc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",a=At(s.footerFont),n.fillStyle=s.footerColor,n.font=a.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=Ji(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),a==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),a==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const a=xo[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=Xb(this,t),c=Object.assign({},a,this._size),u=Jb(n,t,c),d=Zb(t,c,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=_n(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),C2(t,n.textDirection),i.y+=a.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),k2(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Uu(s,r),a=this._positionChanged(r,n);(i||a)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(t,i,n,s),l=this._positionChanged(a,t),c=n||!Uu(a,i)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,a=xo[i.position].call(this,t,n);return a!==!1&&(s!==a.x||r!==a.y)}}le(yp,"positioners",xo);var Tx={id:"tooltip",_element:yp,positioners:xo,afterInit(e,t,n){n&&(e.tooltip=new yp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:X2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const H$=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function G$(e,t,n,s){const r=e.indexOf(t);if(r===-1)return H$(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const Y$=(e,t)=>e===null?null:_t(Math.round(e),0,t);function nw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Ku extends Sa{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(_e(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:G$(s,t,be(n,t),this._addedLabels),Y$(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=t;a<=n;a++)r.push({value:a});return r}getLabelForValue(t){return nw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}le(Ku,"id","category"),le(Ku,"defaults",{ticks:{callback:nw}});function Q$(e,t){const n=[],{bounds:r,step:i,min:a,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:g,max:v}=t,b=!_e(a),y=!_e(l),w=!_e(u),S=(v-g)/(h+1);let N=Zv((v-g)/p/m)*m,j,k,C,P;if(N<1e-14&&!b&&!y)return[{value:g},{value:v}];P=Math.ceil(v/N)-Math.floor(g/N),P>p&&(N=Zv(P*N/p/m)*m),_e(c)||(j=Math.pow(10,c),N=Math.ceil(N*j)/j),r==="ticks"?(k=Math.floor(g/N)*N,C=Math.ceil(v/N)*N):(k=g,C=v),b&&y&&i&&n3((l-a)/i,N/1e3)?(P=Math.round(Math.min((l-a)/N,d)),N=(l-a)/P,k=a,C=l):w?(k=b?a:k,C=y?l:C,P=u-1,N=(C-k)/P):(P=(C-k)/N,Mo(P,Math.round(P),N/1e3)?P=Math.round(P):P=Math.ceil(P));const T=Math.max(eb(N),eb(k));j=Math.pow(10,_e(c)?T:c),k=Math.round(k*j)/j,C=Math.round(C*j)/j;let O=0;for(b&&(f&&k!==a?(n.push({value:a}),k<a&&O++,Mo(Math.round((k+O*N)*j)/j,a,sw(a,S,e))&&O++):k<a&&O++);O<P;++O){const L=Math.round((k+O*N)*j)/j;if(y&&L>l)break;n.push({value:L})}return y&&f&&C!==l?n.length&&Mo(n[n.length-1].value,l,sw(l,S,e))?n[n.length-1].value=l:n.push({value:l}):(!y||C===l)&&n.push({value:C}),n}function sw(e,t,{horizontal:n,minRotation:s}){const r=Ns(s),i=(n?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+e).length;return Math.min(t/i,a)}class K$ extends Sa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return _e(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const a=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=is(r),u=is(i);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||a(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=Q$(r,i);return t.bounds==="ticks"&&s3(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return vx(t,this.chart.options.locale,this.options.ticks.format)}}class Xu extends K${determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ot(t)?t:0,this.max=Ot(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Ns(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}le(Xu,"id","linear"),le(Xu,"defaults",{ticks:{callback:x2.formatters.numeric}});const eh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(eh);function rw(e,t){return e-t}function iw(e,t){if(_e(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let a=t;return typeof s=="function"&&(a=s(a)),Ot(a)||(a=typeof s=="string"?n.parse(a,s):n.parse(a)),a===null?null:(r&&(a=r==="week"&&(fl(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,r)),+a)}function aw(e,t,n,s){const r=Yt.length;for(let i=Yt.indexOf(e);i<r-1;++i){const a=eh[Yt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=s)return Yt[i]}return Yt[r-1]}function X$(e,t,n,s,r){for(let i=Yt.length-1;i>=Yt.indexOf(n);i--){const a=Yt[i];if(eh[a].common&&e._adapter.diff(r,s,a)>=t-1)return a}return Yt[n?Yt.indexOf(n):0]}function J$(e){for(let t=Yt.indexOf(e)+1,n=Yt.length;t<n;++t)if(eh[Yt[t]].common)return Yt[t]}function ow(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=gx(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function Z$(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),a=t[t.length-1].value;let l,c;for(l=i;l<=a;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function lw(e,t,n){const s=[],r={},i=t.length;let a,l;for(a=0;a<i;++a)l=t[a],r[l]=a,s.push({value:l,major:!1});return i===0||!n?s:Z$(e,s,r,n)}class Ju extends Sa{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new $F._date(t.adapters.date);r.init(n),Ao(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:iw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ot(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Ot(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=this.max,l=l3(r,i,a);return this._unit=n.unit||(s.autoSkip?aw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):X$(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:J$(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),lw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=_t(n,0,a),s=_t(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,a=i.unit||aw(i.minUnit,n,s,this._getLabelCapacity(n)),l=be(r.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=fl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(s,n,a)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+a);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+t.add(f,l,a),m++)ow(d,f,p);return(f===s||r.bounds==="ticks"||m===1)&&ow(d,f,p),Object.keys(d).sort(rw).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,a=n||r[i];return this._adapter.format(t,a)}_tickFormatFunction(t,n,s,r){const i=this.options,a=i.ticks.callback;if(a)return ze(a,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=s[n],m=u&&h&&f&&f.major;return this._adapter.format(t,r||(m?h:d))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=Ns(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*a,h:s*a+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,lw(this,[t],this._majorUnit),r),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(iw(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return m2(t.sort(rw))}}le(Ju,"id","time"),le(Ju,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function kc(e,t,n){let s=0,r=e.length-1,i,a,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Zr(e,"pos",t)),{pos:i,time:l}=e[s],{pos:a,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Zr(e,"time",t)),{time:i,pos:l}=e[s],{time:a,pos:c}=e[r]);const u=a-i;return u?l+(c-l)*(t-i)/u:l}class cw extends Ju{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=kc(n,this.min),this._tableRange=kc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(a=0,l=r.length;a<l;++a)d=r[a+1],c=r[a-1],u=r[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(kc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return kc(this._table,s*this._tableRange+this._minPos,!0)}}le(cw,"id","timeseries"),le(cw,"defaults",Ju.defaults);const J2="label";function uw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function eB(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Z2(e,t){e.labels=t}function ek(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J2;const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(a=>a[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function tB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J2;const n={labels:[],datasets:[]};return Z2(n,e.labels),ek(n,e.datasets,t),n}function nB(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=x.useRef(null),p=x.useRef(null),g=()=>{m.current&&(p.current=new Ca(m.current,{type:a,data:tB(l,i),options:c&&{...c},plugins:u}),uw(t,p.current))},v=()=>{uw(t,null),p.current&&(p.current.destroy(),p.current=null)};return x.useEffect(()=>{!r&&p.current&&c&&eB(p.current,c)},[r,c]),x.useEffect(()=>{!r&&p.current&&Z2(p.current.config.data,l.labels)},[r,l.labels]),x.useEffect(()=>{!r&&p.current&&l.datasets&&ek(p.current.config.data,l.datasets,i)},[r,l.datasets]),x.useEffect(()=>{p.current&&(r?(v(),setTimeout(g)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),x.useEffect(()=>{p.current&&(v(),setTimeout(g))},[a]),x.useEffect(()=>(g(),()=>v()),[]),ee.createElement("canvas",{ref:m,role:"img",height:n,width:s,...f},d)}const sB=x.forwardRef(nB);function Px(e,t){return Ca.register(t),x.forwardRef((n,s)=>ee.createElement(sB,{...n,ref:s,type:e}))}const rB=Px("line",tu),iB=Px("bar",eu),aB=Px("doughnut",mo);Ca.register(Ku,Xu,iu,K2,Tx,Dx,Ex);function tk({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(iB,{data:e,options:r})})}Ca.register(Ku,Xu,ru,sr,K2,Tx,Dx,Ex);function oB({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(rB,{data:e,options:r})})}Ca.register(go,Tx,Dx,Ex);function lB({data:e,options:t,height:n=250}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const a=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${a}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(aB,{data:e,options:r})})}const cB=x.memo(oB),uB=x.memo(tk),dB=x.memo(lB);function xf(){const{user:e,isAuthenticated:t}=Ge(),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(0),[c,u]=x.useState(0),[d,h]=x.useState(!0),[f,m]=x.useState([]),[p,g]=x.useState([]),[v,b]=x.useState(null);x.useEffect(()=>{(async()=>{if(!t||!e){console.log("⏸️ Skipping data fetch - user not authenticated"),h(!1);return}try{console.log("🔄 AdminDashboard: Starting data fetch..."),b(null);const[C,P,T,O,L]=await Promise.all([Il().catch(R=>(console.error("Leads error:",R),[])),Gd().catch(R=>(console.error("Jobs error:",R),[])),dx().catch(R=>(console.error("Equipment error:",R),[])),Ol().catch(R=>(console.error("Operators error:",R),[])),Yd().catch(R=>(console.error("Deals error:",R),[]))]),F=R=>Array.isArray(R)?R:R&&typeof R=="object"&&R.data&&Array.isArray(R.data)||R&&typeof R=="object"&&R.success&&Array.isArray(R.data)?R.data:[],_=F(C),B=F(P),W=F(T),I=F(O),A=F(L);s(_),i(B),l(W.length),u(I.length),m(W),g(A)}catch(C){console.error("❌ Error fetching dashboard data:",C),b(`Failed to load dashboard data: ${(C==null?void 0:C.message)||C}`)}finally{h(!1)}})()},[t,e]);const y=x.useMemo(()=>{try{if(Array.isArray(p)&&p.length>0)return p.filter(k=>k&&k.stage==="won").reduce((k,C)=>k+(C.value||0),0)}catch(k){console.error("Error calculating revenue:",k)}return 0},[p]),w=x.useMemo(()=>Array.isArray(r)?r.filter(k=>k.status==="in_progress"||k.status==="scheduled").length/(a||1)*100:0,[r,a]),S=x.useMemo(()=>({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[15e4,2e5,18e4,22e4,25e4,y>0?y:3e5],backgroundColor:"rgba(56, 81, 159, 0.1)",borderColor:"#38519F",pointBackgroundColor:"#FFCC3F",pointBorderColor:"#38519F",pointHoverBackgroundColor:"#38519F",pointHoverBorderColor:"#FFCC3F",borderWidth:3,tension:.4,fill:!0}]}),[y]),N=x.useMemo(()=>({labels:["Available","In Use","Maintenance"],datasets:[{data:[Array.isArray(f)?f.filter(k=>k.status==="available").length:0,Array.isArray(f)?f.filter(k=>k.status==="in_use").length:0,Array.isArray(f)?f.filter(k=>k.status==="maintenance").length:0],backgroundColor:["#22C55E","#38519F","#FFCC3F"],borderColor:["#16A34A","#38519F","#FFCC3F"],borderWidth:2,hoverBorderWidth:4}]}),[f]),j=x.useMemo(()=>({labels:["Scheduled","In Progress","Completed","Cancelled"],datasets:[{label:"Jobs by Status",data:[Array.isArray(r)?r.filter(k=>k.status==="scheduled").length:0,Array.isArray(r)?r.filter(k=>k.status==="in_progress").length:0,Array.isArray(r)?r.filter(k=>k.status==="completed").length:0,Array.isArray(r)?r.filter(k=>k.status==="cancelled").length:0],backgroundColor:["rgba(56, 81, 159, 0.8)","rgba(34, 197, 94, 0.8)","rgba(64, 64, 64, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#38519F","#22C55E","#404040","#EF4444"],borderWidth:2,borderRadius:8}]}),[r]);return d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-20 w-20 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 h-20 w-20 border-4 border-transparent border-t-brand-gold rounded-full animate-spin animate-reverse",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Dashboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fetching your data..."})]})]})}):v?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(ne,{variant:"bordered",className:"max-w-md bg-red-50 border-red-200",children:o.jsxs(ie,{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(HA,{className:"w-8 h-8 text-red-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),o.jsx("p",{className:"text-red-600 mb-6",children:v}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20",children:o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin"]}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your business today."})]}),o.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Last updated"}),o.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleTimeString()})]})})]})}),o.jsxs("section",{className:"grid gap-6 auto-fit-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},role:"region","aria-label":"Key Performance Indicators",children:[o.jsx(zt,{title:"Total Revenue",value:De(y),icon:o.jsx(Od,{className:"h-5 w-5"}),variant:"primary",trend:{value:12.5,isPositive:!0},loading:d}),o.jsx(zt,{title:"Equipment Fleet",value:a,subtitle:"Active units",icon:o.jsx(ln,{className:"h-5 w-5"}),variant:"success",trend:{value:8.2,isPositive:!0},loading:d}),o.jsx(zt,{title:"Active Jobs",value:r.length,subtitle:"In progress",icon:o.jsx(mA,{className:"h-5 w-5"}),variant:"warning",trend:{value:3.1,isPositive:!1},loading:d}),o.jsx(zt,{title:"Operators",value:c,subtitle:"Available staff",icon:o.jsx(Wn,{className:"h-5 w-5"}),variant:"accent",trend:{value:5.7,isPositive:!0},loading:d})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",role:"region","aria-label":"Analytics Charts",children:[o.jsxs(ne,{variant:"glass",className:"col-span-1",children:[o.jsx(me,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx($A,{className:"h-4 w-4 text-green-600"})}),o.jsx(pe,{className:"text-lg",children:"Equipment Status"})]})}),o.jsx(ie,{children:o.jsx("div",{className:"h-64",children:o.jsx(dB,{data:N,height:240})})})]}),o.jsxs(ne,{variant:"glass",className:"col-span-1",children:[o.jsx(me,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(Gm,{className:"h-4 w-4 text-blue-600"})}),o.jsx(pe,{className:"text-lg",children:"Monthly Revenue"})]})}),o.jsx(ie,{children:o.jsx("div",{className:"h-64",children:o.jsx(cB,{data:S,height:240})})})]}),o.jsxs(ne,{variant:"glass",className:"col-span-1",children:[o.jsx(me,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(JN,{className:"h-4 w-4 text-purple-600"})}),o.jsx(pe,{className:"text-lg",children:"Jobs by Status"})]})}),o.jsx(ie,{children:o.jsx("div",{className:"h-64",children:o.jsx(uB,{data:j,height:240})})})]})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx(j5,{className:"h-full"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ne,{variant:"gradient",className:"h-fit",children:[o.jsx(me,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-blue/10 rounded-lg",children:o.jsx(ln,{className:"h-4 w-4 text-brand-blue"})}),o.jsx(pe,{className:"text-lg",children:"Equipment Summary"})]})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Available Equipment:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(f)?f.filter(k=>k.status==="available").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"In Use:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Array.isArray(f)?f.filter(k=>k.status==="in_use").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Under Maintenance:"}),o.jsx("span",{className:"text-sm font-semibold text-orange-600",children:Array.isArray(f)?f.filter(k=>k.status==="maintenance").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Utilization Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[a>0?Math.round(w):0,"%"]})]})})]})})]}),o.jsxs(ne,{variant:"gradient",className:"h-fit",children:[o.jsx(me,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-gold/10 rounded-lg",children:o.jsx(Gm,{className:"h-4 w-4 text-brand-gold"})}),o.jsx(pe,{className:"text-lg",children:"Business Overview"})]})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:n.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Active Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Won Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.filter(k=>k.stage==="won").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[n.length>0?Math.round((Array.isArray(p)?p.length:0)/n.length*100):0,"%"]})]})})]})})]})]})]})]})})}const _x="-",hB=e=>{const t=mB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(_x);return l[0]===""&&l.length!==1&&l.shift(),nk(l,t)||fB(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},nk=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?nk(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(_x);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},dw=/^\[(.+)\]$/,fB=e=>{if(dw.test(e)){const t=dw.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},mB=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)vp(n[r],s,r,t);return s},vp=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:hw(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(pB(r)){vp(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{vp(a,hw(t,i),n,s)})})},hw=(e,t)=>{let n=e;return t.split(_x).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},pB=e=>e.isThemeGetter,gB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},bp="!",wp=":",xB=wp.length,yB=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let a=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let g=r[p];if(a===0&&l===0){if(g===wp){i.push(r.slice(c,p)),c=p+xB;continue}if(g==="/"){u=p;continue}}g==="["?a++:g==="]"?a--:g==="("?l++:g===")"&&l--}const d=i.length===0?r:r.substring(c),h=vB(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const r=t+wp,i=s;s=a=>a.startsWith(r)?i(a.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},vB=e=>e.endsWith(bp)?e.substring(0,e.length-1):e.startsWith(bp)?e.substring(1):e,bB=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(a=>{a[0]==="["||t[a]?(r.push(...i.sort(),a),i=[]):i.push(a)}),r.push(...i.sort()),r}},wB=e=>({cache:gB(e.cacheSize),parseClassName:yB(e),sortModifiers:bB(e),...hB(e)}),jB=/\s+/,NB=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,a=[],l=e.trim().split(jB);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let v=!!g,b=s(v?p.substring(0,g):p);if(!b){if(!v){c=d+(c.length>0?" "+c:c);continue}if(b=s(p),!b){c=d+(c.length>0?" "+c:c);continue}v=!1}const y=i(f).join(":"),w=m?y+bp:y,S=w+b;if(a.includes(S))continue;a.push(S);const N=r(b,v);for(let j=0;j<N.length;++j){const k=N[j];a.push(w+k)}c=d+(c.length>0?" "+c:c)}return c};function SB(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=sk(t))&&(s&&(s+=" "),s+=n);return s}const sk=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=sk(e[s]))&&(n&&(n+=" "),n+=t);return n};function CB(e,...t){let n,s,r,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=wB(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=NB(c,n);return r(c,d),d}return function(){return i(SB.apply(null,arguments))}}const ft=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},rk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ik=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kB=/^\d+\/\d+$/,EB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,PB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_B=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ei=e=>kB.test(e),je=e=>!!e&&!Number.isNaN(Number(e)),$s=e=>!!e&&Number.isInteger(Number(e)),yf=e=>e.endsWith("%")&&je(e.slice(0,-1)),fs=e=>EB.test(e),AB=()=>!0,MB=e=>DB.test(e)&&!TB.test(e),ak=()=>!1,RB=e=>PB.test(e),IB=e=>_B.test(e),OB=e=>!ce(e)&&!ue(e),LB=e=>ka(e,ck,ak),ce=e=>rk.test(e),Lr=e=>ka(e,uk,MB),vf=e=>ka(e,VB,je),fw=e=>ka(e,ok,ak),FB=e=>ka(e,lk,IB),Ec=e=>ka(e,dk,RB),ue=e=>ik.test(e),Xa=e=>Ea(e,uk),$B=e=>Ea(e,UB),mw=e=>Ea(e,ok),BB=e=>Ea(e,ck),zB=e=>Ea(e,lk),Dc=e=>Ea(e,dk,!0),ka=(e,t,n)=>{const s=rk.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Ea=(e,t,n=!1)=>{const s=ik.exec(e);return s?s[1]?t(s[1]):n:!1},ok=e=>e==="position"||e==="percentage",lk=e=>e==="image"||e==="url",ck=e=>e==="length"||e==="size"||e==="bg-size",uk=e=>e==="length",VB=e=>e==="number",UB=e=>e==="family-name",dk=e=>e==="shadow",WB=()=>{const e=ft("color"),t=ft("font"),n=ft("text"),s=ft("font-weight"),r=ft("tracking"),i=ft("leading"),a=ft("breakpoint"),l=ft("container"),c=ft("spacing"),u=ft("radius"),d=ft("shadow"),h=ft("inset-shadow"),f=ft("text-shadow"),m=ft("drop-shadow"),p=ft("blur"),g=ft("perspective"),v=ft("aspect"),b=ft("ease"),y=ft("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...S(),ue,ce],j=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],C=()=>[ue,ce,c],P=()=>[Ei,"full","auto",...C()],T=()=>[$s,"none","subgrid",ue,ce],O=()=>["auto",{span:["full",$s,ue,ce]},$s,ue,ce],L=()=>[$s,"auto",ue,ce],F=()=>["auto","min","max","fr",ue,ce],_=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],W=()=>["auto",...C()],I=()=>[Ei,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],A=()=>[e,ue,ce],R=()=>[...S(),mw,fw,{position:[ue,ce]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",BB,LB,{size:[ue,ce]}],J=()=>[yf,Xa,Lr],re=()=>["","none","full",u,ue,ce],oe=()=>["",je,Xa,Lr],ge=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>[je,yf,mw,fw],G=()=>["","none",p,ue,ce],Q=()=>["none",je,ue,ce],se=()=>["none",je,ue,ce],E=()=>[je,ue,ce],D=()=>[Ei,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fs],breakpoint:[fs],color:[AB],container:[fs],"drop-shadow":[fs],ease:["in","out","in-out"],font:[OB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fs],shadow:[fs],spacing:["px",je],text:[fs],"text-shadow":[fs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ei,ce,ue,v]}],container:["container"],columns:[{columns:[je,ce,ue,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[$s,"auto",ue,ce]}],basis:[{basis:[Ei,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,Ei,"auto","initial","none",ce]}],grow:[{grow:["",je,ue,ce]}],shrink:[{shrink:["",je,ue,ce]}],order:[{order:[$s,"first","last","none",ue,ce]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[..._(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",..._()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":_()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:W()}],mx:[{mx:W()}],my:[{my:W()}],ms:[{ms:W()}],me:[{me:W()}],mt:[{mt:W()}],mr:[{mr:W()}],mb:[{mb:W()}],ml:[{ml:W()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[l,"screen",...I()]}],"min-w":[{"min-w":[l,"screen","none",...I()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",n,Xa,Lr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ue,vf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yf,ce]}],"font-family":[{font:[$B,ce,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,ue,ce]}],"line-clamp":[{"line-clamp":[je,"none",ue,vf]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",ue,ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ue,ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ue,Lr]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[je,"auto",ue,ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ue,ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ue,ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$s,ue,ce],radial:["",ue,ce],conic:[$s,ue,ce]},zB,FB]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ue,ce]}],"outline-w":[{outline:["",je,Xa,Lr]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",d,Dc,Ec]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",h,Dc,Ec]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[je,Lr]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",f,Dc,Ec]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[je,ue,ce]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":M()}],"mask-image-linear-to-pos":[{"mask-linear-to":M()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":M()}],"mask-image-t-to-pos":[{"mask-t-to":M()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":M()}],"mask-image-r-to-pos":[{"mask-r-to":M()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":M()}],"mask-image-b-to-pos":[{"mask-b-to":M()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":M()}],"mask-image-l-to-pos":[{"mask-l-to":M()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":M()}],"mask-image-x-to-pos":[{"mask-x-to":M()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":M()}],"mask-image-y-to-pos":[{"mask-y-to":M()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[ue,ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":M()}],"mask-image-radial-to-pos":[{"mask-radial-to":M()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":M()}],"mask-image-conic-to-pos":[{"mask-conic-to":M()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ue,ce]}],filter:[{filter:["","none",ue,ce]}],blur:[{blur:G()}],brightness:[{brightness:[je,ue,ce]}],contrast:[{contrast:[je,ue,ce]}],"drop-shadow":[{"drop-shadow":["","none",m,Dc,Ec]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",je,ue,ce]}],"hue-rotate":[{"hue-rotate":[je,ue,ce]}],invert:[{invert:["",je,ue,ce]}],saturate:[{saturate:[je,ue,ce]}],sepia:[{sepia:["",je,ue,ce]}],"backdrop-filter":[{"backdrop-filter":["","none",ue,ce]}],"backdrop-blur":[{"backdrop-blur":G()}],"backdrop-brightness":[{"backdrop-brightness":[je,ue,ce]}],"backdrop-contrast":[{"backdrop-contrast":[je,ue,ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ue,ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ue,ce]}],"backdrop-invert":[{"backdrop-invert":["",je,ue,ce]}],"backdrop-opacity":[{"backdrop-opacity":[je,ue,ce]}],"backdrop-saturate":[{"backdrop-saturate":[je,ue,ce]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ue,ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ue,ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ue,ce]}],ease:[{ease:["linear","initial",b,ue,ce]}],delay:[{delay:[je,ue,ce]}],animate:[{animate:["none",y,ue,ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,ue,ce]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:se()}],"scale-x":[{"scale-x":se()}],"scale-y":[{"scale-y":se()}],"scale-z":[{"scale-z":se()}],"scale-3d":["scale-3d"],skew:[{skew:E()}],"skew-x":[{"skew-x":E()}],"skew-y":[{"skew-y":E()}],transform:[{transform:[ue,ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:D()}],"translate-x":[{"translate-x":D()}],"translate-y":[{"translate-y":D()}],"translate-z":[{"translate-z":D()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ue,ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ue,ce]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[je,Xa,Lr,vf]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},qB=CB(WB);function HB(...e){return qB(e2(e))}function Fl({status:e,className:t}){const n=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("span",{className:HB("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}async function GB(e,t){const s=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update quotation");return s.json()}async function YB(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotation by ID");return n.json()}async function QB(e){const n=await fetch("http://103.224.243.242:3001/api/quotations",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create quotation");return n.json()}async function KB(){const t=await fetch("http://103.224.243.242:3001/api/quotations",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quotations");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function Zu(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations?leadId=${encodeURIComponent(e)}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotations");return await n.json()}const XB=Na("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function JB({stages:e,height:t=250}){const n=Math.max(...e.map(r=>r.value)),s=e.reduce((r,i)=>r+i.value,0);return o.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((r,i)=>{const a=n===0?40:Math.max(40,Math.min(100,r.value/n*100)),l=s===0?0:Math.round(r.value/s*100),c=i===0?"first":i===e.length-1?"last":"middle";return o.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${a}%`},children:[o.jsx("div",{className:XB({position:c}),style:{backgroundColor:r.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:o.jsx("span",{className:"text-white text-xs font-medium",children:r.value})}),o.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[o.jsx("span",{className:"font-medium text-gray-800",children:r.label}),o.jsxs("span",{children:[l,"%"]})]})]},r.label)})})}function ZB(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const g=await Il(),b=(w=>Array.isArray(w)?w:w&&typeof w=="object"&&w.data&&Array.isArray(w.data)||w&&typeof w=="object"&&w.success&&Array.isArray(w.data)?w.data:[])(g);t(b);const y=b.filter(w=>w.status==="converted");if(y.length>0){const w=y[0],S=await Zu(w.id);s(S)}}catch(g){console.error("Error fetching dashboard data:",g),t([]),s([])}finally{i(!1)}})()},[]);const a=Array.isArray(e)?e.filter(p=>p.status==="new").length:0,l=Array.isArray(e)?e.filter(p=>p.status==="in_process").length:0,c=Array.isArray(e)?e.filter(p=>p.status==="qualified").length:0,u=Array.isArray(e)?e.filter(p=>p.status==="converted").length:0,d=Array.isArray(n)?n.reduce((p,g)=>p+g.totalRent,0):0,h=Array.isArray(e)?[...e].sort((p,g)=>new Date(g.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5):[],f=[{label:"New",value:a,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return r?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(zt,{title:"New Leads",value:a,icon:o.jsx(P0,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(zt,{title:"In Process",value:l,icon:o.jsx(Wn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(zt,{title:"Qualified Leads",value:c,icon:o.jsx(P0,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(zt,{title:"Quotation Value",value:De(d),icon:o.jsx(Od,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Lead Conversion Funnel"})}),o.jsx(ie,{className:"flex justify-center",children:o.jsx(JB,{stages:f,height:250})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Weekly Lead Generation"})}),o.jsx(ie,{children:o.jsx(tk,{data:m,height:250})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(pe,{children:"Recent Leads"}),o.jsx(es,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),o.jsx(ie,{children:h.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Fl,{status:p.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ne,{className:"h-full",children:[o.jsx(me,{children:o.jsx(pe,{children:"Upcoming Tasks"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(eS,{className:"h-5 w-5 text-primary-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(xA,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(JN,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}const ez=Na("inline-flex items-center justify-center font-medium transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden",{variants:{variant:{default:"bg-gradient-to-r from-brand-blue to-brand-blue/90 text-white shadow-lg hover:shadow-xl hover:shadow-brand-blue/25 hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:scale-[1.02] focus:ring-red-500/30 active:scale-[0.98]",outline:"border-2 border-brand-blue text-brand-blue bg-transparent hover:bg-brand-blue hover:text-white hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:shadow-md hover:from-gray-200 hover:to-gray-300 hover:scale-[1.02] focus:ring-gray-400/30 active:scale-[0.98]",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-400/30 hover:scale-[1.02] active:scale-[0.98]",link:"text-brand-blue underline-offset-4 hover:underline hover:text-brand-blue/80 focus:ring-brand-blue/30",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:shadow-green-500/25 hover:scale-[1.02] focus:ring-green-500/30 active:scale-[0.98]",warning:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:shadow-amber-500/25 hover:scale-[1.02] focus:ring-amber-500/30 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-blue via-purple-600 to-brand-blue text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 hover:scale-[1.02] focus:ring-purple-500/30 active:scale-[0.98]",accent:"bg-gradient-to-r from-brand-gold via-brand-gold to-brand-gold/95 text-brand-dark shadow-xl hover:shadow-2xl hover:shadow-brand-gold/40 hover:scale-[1.05] hover:from-brand-gold/90 hover:to-brand-gold hover:brightness-110 focus:ring-brand-gold/50 active:scale-[0.98] font-semibold transform"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-lg",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-6 text-base rounded-xl",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-xs":"h-7 w-7 rounded-md","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),U=x.memo(ee.forwardRef(({className:e="",variant:t,size:n,leftIcon:s,rightIcon:r,isLoading:i=!1,loadingText:a,fullWidth:l=!1,disabled:c,children:u,asChild:d=!1,...h},f)=>{const m=ez({variant:t,size:n}),p=l?"w-full":"",g=c||i,v=o.jsxs(o.Fragment,{children:[(t==="default"||t==="gradient")&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 ease-in-out"}),i?o.jsxs(o.Fragment,{children:[o.jsx(_A,{className:"w-4 h-4 animate-spin mr-2"}),a||"Loading..."]}):o.jsxs(o.Fragment,{children:[s&&o.jsx("span",{className:"mr-2 flex-shrink-0",children:s}),u,r&&o.jsx("span",{className:"ml-2 flex-shrink-0",children:r})]})]});return d?o.jsx("span",{className:`${m} ${p} ${e}`,children:v}):o.jsx("button",{className:`${m} ${p} ${e}`,ref:f,disabled:g,"aria-busy":i,...h,children:v})}));U.displayName="Button";const tz=x.memo(ee.forwardRef(({icon:e,className:t="",size:n="icon",...s},r)=>o.jsx(U,{ref:r,size:n,className:t,...s,children:e})));tz.displayName="IconButton";const nz=x.memo(({children:e,className:t="",orientation:n="horizontal",size:s="default"})=>{const r=n==="horizontal"?"flex-row":"flex-col",i={sm:"space-x-2 space-y-0",default:"space-x-3 space-y-0",lg:"space-x-4 space-y-0"}[s];return o.jsx("div",{className:`flex ${r} ${i} ${t}`,role:"group",children:e})});nz.displayName="ButtonGroup";function sz(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState(0),[a,l]=x.useState(0),[c,u]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const[f,m,p,g]=await Promise.all([Il(),Gd(),dx(),Ol()]);t(f),s(m),i(p.length),l(g.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return c?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(zt,{title:"Scheduled Jobs",value:d,icon:o.jsx(as,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(zt,{title:"Equipment",value:r,icon:o.jsx(ln,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),o.jsx(zt,{title:"Operators",value:a,icon:o.jsx(Wn,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(pe,{children:"Recent Won Leads"}),o.jsx(es,{to:"/jobs",children:o.jsx(U,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),o.jsx(ie,{children:e.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(U,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ne,{className:"h-full",children:[o.jsx(me,{children:o.jsx(pe,{children:"Quick Actions"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(es,{to:"/config/equipment",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(ln,{size:16}),children:"Manage Equipment"})}),o.jsx(es,{to:"/config/operators",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(Wn,{size:16}),children:"Manage Operators"})}),o.jsx(es,{to:"/jobs",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(as,{size:16}),children:"View Job Calendar"})}),o.jsx(es,{to:"/feedback",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(pr,{size:16}),children:"Review Completed Jobs"})}),o.jsx(es,{to:"/config",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(ZN,{size:16}),children:"System Configuration"})}),o.jsx(es,{to:"/config/maintenance",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(zg,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Recent Job Activity"})}),o.jsx(ie,{children:n.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.scheduledStartDate).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Fl,{status:h.status==="scheduled"?"pending":h.status})})]},h.id))})]})})})]})]})}const rz=Na("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function ht({className:e,variant:t,title:n,description:s,onClose:r,duration:i=5e3,isVisible:a=!0,...l}){const[c,u]=x.useState(a);x.useEffect(()=>{u(a)},[a]),x.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),r==null||r()},i);return()=>clearTimeout(f)}},[c,i,r]);const d=()=>{u(!1),r==null||r()},h=()=>{switch(t){case"success":return o.jsx(pr,{className:"h-5 w-5 text-success-500"});case"error":return o.jsx(Ld,{className:"h-5 w-5 text-error-500"});case"warning":return o.jsx(xi,{className:"h-5 w-5 text-warning-500"});case"info":return o.jsx(tr,{className:"h-5 w-5 text-primary-500"});default:return null}};return o.jsx(ux,{children:c&&o.jsx(Ks.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:`pointer-events-auto ${rz({variant:t,className:e})}`,...l,children:o.jsxs("div",{className:"flex items-start",children:[t&&o.jsx("div",{className:"flex-shrink-0",children:h()}),o.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[o.jsx("p",{className:"text-sm font-medium",children:n}),s&&o.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:s})]}),o.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:o.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Fd,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function iz(){const{user:e}=Ge(),[t,n]=x.useState([]),[s,r]=x.useState({}),[i,a]=x.useState(!0),[l,c]=x.useState({show:!1,title:""});x.useEffect(()=>{(async()=>{if(e)try{const g=await AC(e.id);n(g);const v={};for(const b of g)if(!v[b.equipmentId]){const y=await MC(b.equipmentId);y&&(v[b.equipmentId]=y)}r(v)}catch(g){console.error("Error fetching operator data:",g)}finally{a(!1)}})()},[e]);const u=(p,g)=>{var v;n(b=>b.map(y=>y.id===p?{...y,status:g==="accept"?"accepted":g==="reject"?"rejected":"completed"}:y)),c({show:!0,title:g==="accept"?"Job Accepted":g==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(v=t.find(b=>b.id===p))==null?void 0:v.customerName} has been ${g}ed.`,variant:g==="reject"?"warning":"success"}),setTimeout(()=>{c(b=>({...b,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,g)=>new Date(p.startDate).getTime()-new Date(g.startDate).getTime());return i?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(zt,{title:"Scheduled Jobs",value:d,icon:o.jsx(as,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(zt,{title:"Accepted Jobs",value:h,icon:o.jsx(pr,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(zt,{title:"Completed Jobs",value:f,icon:o.jsx(Nn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Upcoming Jobs"})}),o.jsx(ie,{children:m.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):o.jsx("div",{className:"space-y-4",children:m.map(p=>{var g;return o.jsx(ne,{variant:"bordered",className:"overflow-hidden",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),o.jsx(Fl,{status:p.status})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(ln,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:((g=s[p.equipmentId])==null?void 0:g.name)||"Equipment"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Bg,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:p.location})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(as,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Nn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),o.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&o.jsxs(o.Fragment,{children:[o.jsx(U,{variant:"success",size:"sm",leftIcon:o.jsx(pr,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),o.jsx(U,{variant:"destructive",size:"sm",leftIcon:o.jsx(Ld,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&o.jsx(U,{variant:"secondary",size:"sm",leftIcon:o.jsx(pr,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Equipment Assignment"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[Object.values(s).map(p=>o.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[o.jsx(ln,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(s).length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Operator Information"})}),o.jsxs(ie,{children:[o.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[o.jsx("div",{className:"mr-4",children:o.jsx(NA,{className:"h-16 w-16 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),o.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),o.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx(U,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&o.jsx(ht,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function Ve({label:e,error:t,className:n="",leftIcon:s,rightIcon:r,name:i,id:a,...l}){var d;const c={...l},u=i||a||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return o.jsxs("div",{className:"space-y-1.5",children:[e&&o.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[s&&o.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s}),o.jsx("input",{name:u,id:a||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-[#222] placeholder:text-[#888]
            text-base
            py-2 px-3 border border-[#CAC0B0] bg-white
            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${s?"pl-8 sm:pl-10":""}
            ${r?"pr-8 sm:pr-10":""}
            ${n}
          `,style:{color:"#222",WebkitTextFillColor:"#222",background:"#fff",borderColor:"#CAC0B0",fontWeight:600,letterSpacing:"0.08em"},placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),r&&o.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r})]}),t&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}function de({label:e,helperText:t,error:n,fullWidth:s=!0,className:r="",type:i="text",id:a,name:l,...c}){const u=a||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return o.jsxs("div",{className:`${s?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&o.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx(Ve,{id:u,name:l||u,type:i,className:`${s?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${r}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&o.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function Se({options:e,value:t,onChange:n,label:s,error:r,leftIcon:i,className:a="",...l}){return o.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[s&&o.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[s,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[i&&o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",o.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${r?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${a}
          `,...l,children:e.map(c=>o.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:o.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:r})]})}function ls({label:e,error:t,helperText:n,className:s="",...r}){const i=r.id||`textarea-${r.name||Math.random().toString(36).substring(2,9)}`;return o.jsxs("div",{className:"space-y-2",children:[e&&o.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${r.required?"text-blue-700":"text-green-700"}`,children:[e,r.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!r.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${r.required?"bg-blue-50 border-blue-200 focus:bg-white":r.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${s}`,placeholder:r.placeholder?`${r.placeholder}${r.required?" *":""}`:"",...r}),t&&o.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}ls.displayName="TextArea";var az=Object.defineProperty,oz=(e,t,n)=>t in e?az(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bf=(e,t,n)=>(oz(e,typeof t!="symbol"?t+"":t,n),n);let lz=class{constructor(){bf(this,"current",this.detect()),bf(this,"handoffState","pending"),bf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ds=new lz,An=(e,t)=>{Ds.isServer?x.useEffect(e,t):x.useLayoutEffect(e,t)};function Ts(e){let t=x.useRef(e);return An(()=>{t.current=e},[e]),t}let He=function(e){let t=Ts(e);return ee.useCallback((...n)=>t.current(...n),[t])};function th(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ji(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return th(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=ji();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ax(){let[e]=x.useState(ji);return x.useEffect(()=>()=>e.dispose(),[e]),e}function cz(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(Up)(()=>()=>{},()=>!1,()=>!e)}function Da(){let e=cz(),[t,n]=x.useState(Ds.isHandoffComplete);return t&&Ds.isHandoffComplete===!1&&n(!1),x.useEffect(()=>{t!==!0&&n(!0)},[t]),x.useEffect(()=>Ds.handoff(),[]),e?!1:t}var pw;let Ta=(pw=ee.useId)!=null?pw:function(){let e=Da(),[t,n]=ee.useState(e?()=>Ds.nextId():null);return An(()=>{t===null&&n(Ds.nextId())},[t]),t!=null?""+t:void 0};function Mt(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Mt),s}function hk(e){return Ds.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let jp=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Yr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Yr||{}),fk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(fk||{}),uz=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(uz||{});function dz(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(jp)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var mk=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(mk||{});function hz(e,t=0){var n;return e===((n=hk(e))==null?void 0:n.body)?!1:Mt(t,{0(){return e.matches(jp)},1(){let s=e;for(;s!==null;){if(s.matches(jp))return!0;s=s.parentElement}return!1}})}var fz=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(fz||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ai(e){e==null||e.focus({preventScroll:!0})}let mz=["textarea","input"].join(",");function pz(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,mz))!=null?n:!1}function gz(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function au(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?gz(e):e:dz(e);r.length>0&&a.length>1&&(a=a.filter(m=>!r.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(s))-1;if(t&4)return Math.max(0,a.indexOf(s))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=a.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=a[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&pz(f)&&f.select(),2}function pk(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function xz(){return/Android/gi.test(window.navigator.userAgent)}function yz(){return pk()||xz()}function Tc(e,t,n){let s=Ts(t);x.useEffect(()=>{function r(i){s.current(i)}return document.addEventListener(e,r,n),()=>document.removeEventListener(e,r,n)},[e,n])}function gk(e,t,n){let s=Ts(t);x.useEffect(()=>{function r(i){s.current(i)}return window.addEventListener(e,r,n),()=>window.removeEventListener(e,r,n)},[e,n])}function vz(e,t,n=!0){let s=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function r(a,l){if(!s.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||a.composed&&a.composedPath().includes(h))return}return!hz(c,mk.Loose)&&c.tabIndex!==-1&&a.preventDefault(),t(a,c)}let i=x.useRef(null);Tc("pointerdown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Tc("mousedown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Tc("click",a=>{yz()||i.current&&(r(a,()=>i.current),i.current=null)},!0),Tc("touchend",a=>r(a,()=>a.target instanceof HTMLElement?a.target:null),!0),gk("blur",a=>r(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function $l(...e){return x.useMemo(()=>hk(...e),[...e])}let xk=Symbol();function bz(e,t=!0){return Object.assign(e,{[xk]:t})}function Gn(...e){let t=x.useRef(e);x.useEffect(()=>{t.current=e},[e]);let n=He(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||(s==null?void 0:s[xk]))?void 0:n}function Mx(e,t){let n=x.useRef([]),s=He(e);x.useEffect(()=>{let r=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let l=s(t,r);return n.current=t,l}},[s,...t])}function ed(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var td=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(td||{}),ir=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ir||{});function Rn({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:a,mergeRefs:l}){l=l??wz;let c=yk(t,e);if(i)return Pc(c,n,s,a,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Pc(h,n,s,a,l)}if(u&1){let{unmount:d=!0,...h}=c;return Mt(d?0:1,{0(){return null},1(){return Pc({...h,hidden:!0,style:{display:"none"}},n,s,a,l)}})}return Pc(c,n,s,a,l)}function Pc(e,t={},n,s,r){let{as:i=n,children:a,refName:l="ref",...c}=wf(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===x.Fragment&&Object.keys(gw(c)).length>0){if(!x.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...g)=>ed(f==null?void 0:f.className(...g),c.className):ed(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return x.cloneElement(d,Object.assign({},yk(d.props,gw(wf(c,["ref"]))),h,u,{ref:r(d.ref,u.ref)},p))}return x.createElement(i,Object.assign({},wf(c,["ref"]),i!==x.Fragment&&u,i!==x.Fragment&&h),d)}function wz(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function yk(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](r,...i){let a=n[s];for(let l of a){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function pn(e){var t;return Object.assign(x.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function gw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function wf(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let jz="div";var nd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(nd||{});function Nz(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Rn({ourProps:i,theirProps:r,slot:{},defaultTag:jz,name:"Hidden"})}let Np=pn(Nz),Rx=x.createContext(null);Rx.displayName="OpenClosedContext";var sn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(sn||{});function Ix(){return x.useContext(Rx)}function Sz({value:e,children:t}){return ee.createElement(Rx.Provider,{value:e},t)}function Cz(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Xs=[];Cz(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Xs[0]!==t.target&&(Xs.unshift(t.target),Xs=Xs.filter(n=>n!=null&&n.isConnected),Xs.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function kz(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&Ez(n)?!1:s}function Ez(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var vk=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(vk||{});function bk(e,t,n,s){let r=Ts(n);x.useEffect(()=>{e=e??window;function i(a){r.current(a)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function Bl(){let e=x.useRef(!1);return An(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function wk(e){let t=He(e),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,th(()=>{n.current&&t()})}),[t])}var yo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(yo||{});function Dz(){let e=x.useRef(0);return gk("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function jk(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Tz="div";var Nk=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Nk||{});function Pz(e,t){let n=x.useRef(null),s=Gn(n,t),{initialFocus:r,containers:i,features:a=30,...l}=e;Da()||(a=1);let c=$l(n);Mz({ownerDocument:c},!!(a&16));let u=Rz({ownerDocument:c,container:n,initialFocus:r},!!(a&2));Iz({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(a&8));let d=Dz(),h=He(g=>{let v=n.current;v&&(b=>b())(()=>{Mt(d.current,{[yo.Forwards]:()=>{au(v,Yr.First,{skipElements:[g.relatedTarget]})},[yo.Backwards]:()=>{au(v,Yr.Last,{skipElements:[g.relatedTarget]})}})})}),f=Ax(),m=x.useRef(!1),p={ref:s,onKeyDown(g){g.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let v=jk(i);n.current instanceof HTMLElement&&v.add(n.current);let b=g.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(Sk(v,b)||(m.current?au(n.current,Mt(d.current,{[yo.Forwards]:()=>Yr.Next,[yo.Backwards]:()=>Yr.Previous})|Yr.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&ai(g.target)))}};return ee.createElement(ee.Fragment,null,!!(a&4)&&ee.createElement(Np,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:nd.Focusable}),Rn({ourProps:p,theirProps:l,defaultTag:Tz,name:"FocusTrap"}),!!(a&4)&&ee.createElement(Np,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:nd.Focusable}))}let _z=pn(Pz),Ja=Object.assign(_z,{features:Nk});function Az(e=!0){let t=x.useRef(Xs.slice());return Mx(([n],[s])=>{s===!0&&n===!1&&th(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Xs.slice())},[e,Xs,t]),He(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function Mz({ownerDocument:e},t){let n=Az(t);Mx(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&ai(n())},[t]),wk(()=>{t&&ai(n())})}function Rz({ownerDocument:e,container:t,initialFocus:n},s){let r=x.useRef(null),i=Bl();return Mx(()=>{if(!s)return;let a=t.current;a&&th(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){r.current=l;return}}else if(a.contains(l)){r.current=l;return}n!=null&&n.current?ai(n.current):au(a,Yr.First)===fk.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.current=e==null?void 0:e.activeElement})},[s]),r}function Iz({ownerDocument:e,container:t,containers:n,previousActiveElement:s},r){let i=Bl();bk(e==null?void 0:e.defaultView,"focus",a=>{if(!r||!i.current)return;let l=jk(n);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?Sk(l,u)?(s.current=u,ai(u)):(a.preventDefault(),a.stopPropagation(),ai(c)):ai(s.current)},!0)}function Sk(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Ck=x.createContext(!1);function Oz(){return x.useContext(Ck)}function Sp(e){return ee.createElement(Ck.Provider,{value:e.force},e.children)}function Lz(e){let t=Oz(),n=x.useContext(kk),s=$l(e),[r,i]=x.useState(()=>{if(!t&&n!==null||Ds.isServer)return null;let a=s==null?void 0:s.getElementById("headlessui-portal-root");if(a)return a;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return x.useEffect(()=>{r!==null&&(s!=null&&s.body.contains(r)||s==null||s.body.appendChild(r))},[r,s]),x.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let Fz=x.Fragment;function $z(e,t){let n=e,s=x.useRef(null),r=Gn(bz(d=>{s.current=d}),t),i=$l(s),a=Lz(s),[l]=x.useState(()=>{var d;return Ds.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=x.useContext(Cp),u=Da();return An(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),An(()=>{if(l&&c)return c.register(l)},[c,l]),wk(()=>{var d;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a)))}),u?!a||!l?null:Pl.createPortal(Rn({ourProps:{ref:r},theirProps:n,defaultTag:Fz,name:"Portal"}),l):null}let Bz=x.Fragment,kk=x.createContext(null);function zz(e,t){let{target:n,...s}=e,r={ref:Gn(t)};return ee.createElement(kk.Provider,{value:n},Rn({ourProps:r,theirProps:s,defaultTag:Bz,name:"Popover.Group"}))}let Cp=x.createContext(null);function Vz(){let e=x.useContext(Cp),t=x.useRef([]),n=He(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=He(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),r=x.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,x.useMemo(()=>function({children:i}){return ee.createElement(Cp.Provider,{value:r},i)},[r])]}let Uz=pn($z),Wz=pn(zz),kp=Object.assign(Uz,{Group:Wz});const qz=(e=>e.useSyncExternalStore)(Up);function Hz(e){return qz(e.subscribe,e.getSnapshot,e.getSnapshot)}function Gz(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let a=t[r].call(n,...i);a&&(n=a,s.forEach(l=>l()))}}}function Yz(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,r=s.clientWidth-s.offsetWidth,i=e-r;n.style(s,"paddingRight",`${i}px`)}}}function Qz(){return pk()?{before({doc:e,d:t,meta:n}){function s(r){return n.containers.flatMap(i=>i()).some(i=>i.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=ji();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!s(d)&&(a=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Kz(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Xz(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ei=Gz(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:ji(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:Xz(n)},r=[Qz(),Yz(),Kz()];r.forEach(({before:i})=>i==null?void 0:i(s)),r.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ei.subscribe(()=>{let e=ei.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&ei.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ei.dispatch("TEARDOWN",n)}});function Jz(e,t,n){let s=Hz(ei),r=e?s.get(e):void 0,i=r?r.count>0:!1;return An(()=>{if(!(!e||!t))return ei.dispatch("PUSH",e,n),()=>ei.dispatch("POP",e,n)},[t,e]),i}let jf=new Map,Za=new Map;function xw(e,t=!0){An(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function r(){var a;if(!s)return;let l=(a=Za.get(s))!=null?a:1;if(l===1?Za.delete(s):Za.set(s,l-1),l!==1)return;let c=jf.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,jf.delete(s))}let i=(n=Za.get(s))!=null?n:0;return Za.set(s,i+1),i!==0||(jf.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),r},[e,t])}function Zz({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let r=x.useRef((s=n==null?void 0:n.current)!=null?s:null),i=$l(r),a=He(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(r.current)||h.contains((u=(c=r.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:a,contains:He(l=>a().some(c=>c.contains(l))),mainTreeNodeRef:r,MainTreeNode:x.useMemo(()=>function(){return n!=null?null:ee.createElement(Np,{features:nd.Hidden,ref:r})},[r,n])}}let Ox=x.createContext(()=>{});Ox.displayName="StackContext";var Ep=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ep||{});function eV(){return x.useContext(Ox)}function tV({children:e,onUpdate:t,type:n,element:s,enabled:r}){let i=eV(),a=He((...l)=>{t==null||t(...l),i(...l)});return An(()=>{let l=r===void 0||r===!0;return l&&a(0,n,s),()=>{l&&a(1,n,s)}},[a,n,s,r]),ee.createElement(Ox.Provider,{value:a},e)}let Ek=x.createContext(null);function Dk(){let e=x.useContext(Ek);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Dk),t}return e}function nV(){let[e,t]=x.useState([]);return[e.length>0?e.join(" "):void 0,x.useMemo(()=>function(n){let s=He(i=>(t(a=>[...a,i]),()=>t(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=x.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return ee.createElement(Ek.Provider,{value:r},n.children)},[t])]}let sV="p";function rV(e,t){let n=Ta(),{id:s=`headlessui-description-${n}`,...r}=e,i=Dk(),a=Gn(t);An(()=>i.register(s),[s,i.register]);let l={ref:a,...i.props,id:s};return Rn({ourProps:l,theirProps:r,slot:i.slot||{},defaultTag:sV,name:i.name||"Description"})}let iV=pn(rV),aV=Object.assign(iV,{});var oV=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oV||{}),lV=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(lV||{});let cV={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},sd=x.createContext(null);sd.displayName="DialogContext";function zl(e){let t=x.useContext(sd);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,zl),n}return t}function uV(e,t,n=()=>[document.body]){Jz(e,t,s=>{var r;return{containers:[...(r=s.containers)!=null?r:[],n]}})}function dV(e,t){return Mt(t.type,cV,e,t)}let hV="div",fV=td.RenderStrategy|td.Static;function mV(e,t){let n=Ta(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:a,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=x.useState(0),f=x.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Ix();r===void 0&&m!==null&&(r=(m&sn.Open)===sn.Open);let p=x.useRef(null),g=Gn(p,t),v=$l(p),b=e.hasOwnProperty("open")||m!==null,y=e.hasOwnProperty("onClose");if(!b&&!y)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!b)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!y)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof r!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let w=r?0:1,[S,N]=x.useReducer(dV,{titleId:null,descriptionId:null,panelRef:x.createRef()}),j=He(()=>i(!1)),k=He(E=>N({type:0,id:E})),C=Da()?c?!1:w===0:!1,P=d>1,T=x.useContext(sd)!==null,[O,L]=Vz(),F={get current(){var E;return(E=S.panelRef.current)!=null?E:p.current}},{resolveContainers:_,mainTreeNodeRef:B,MainTreeNode:W}=Zz({portals:O,defaultContainers:[F]}),I=P?"parent":"leaf",A=m!==null?(m&sn.Closing)===sn.Closing:!1,R=T||A?!1:C,V=x.useCallback(()=>{var E,D;return(D=Array.from((E=v==null?void 0:v.querySelectorAll("body > *"))!=null?E:[]).find($=>$.id==="headlessui-portal-root"?!1:$.contains(B.current)&&$ instanceof HTMLElement))!=null?D:null},[B]);xw(V,R);let H=P?!0:C,J=x.useCallback(()=>{var E,D;return(D=Array.from((E=v==null?void 0:v.querySelectorAll("[data-headlessui-portal]"))!=null?E:[]).find($=>$.contains(B.current)&&$ instanceof HTMLElement))!=null?D:null},[B]);xw(J,H),vz(_,E=>{E.preventDefault(),j()},!(!C||P));let oe=!(P||w!==0);bk(v==null?void 0:v.defaultView,"keydown",E=>{oe&&(E.defaultPrevented||E.key===vk.Escape&&(E.preventDefault(),E.stopPropagation(),j()))}),uV(v,!(A||w!==0||T),_),x.useEffect(()=>{if(w!==0||!p.current)return;let E=new ResizeObserver(D=>{for(let $ of D){let z=$.target.getBoundingClientRect();z.x===0&&z.y===0&&z.width===0&&z.height===0&&j()}});return E.observe(p.current),()=>E.disconnect()},[w,p,j]);let[we,M]=nV(),G=x.useMemo(()=>[{dialogState:w,close:j,setTitleId:k},S],[w,S,j,k]),Q=x.useMemo(()=>({open:w===0}),[w]),se={ref:g,id:s,role:l,"aria-modal":w===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":we};return ee.createElement(tV,{type:"Dialog",enabled:w===0,element:p,onUpdate:He((E,D)=>{D==="Dialog"&&Mt(E,{[Ep.Add]:()=>h($=>$+1),[Ep.Remove]:()=>h($=>$-1)})})},ee.createElement(Sp,{force:!0},ee.createElement(kp,null,ee.createElement(sd.Provider,{value:G},ee.createElement(kp.Group,{target:p},ee.createElement(Sp,{force:!1},ee.createElement(M,{slot:Q,name:"Dialog.Description"},ee.createElement(Ja,{initialFocus:a,containers:_,features:C?Mt(I,{parent:Ja.features.RestoreFocus,leaf:Ja.features.All&~Ja.features.FocusLock}):Ja.features.None},ee.createElement(L,null,Rn({ourProps:se,theirProps:u,slot:Q,defaultTag:hV,features:fV,visible:w===0,name:"Dialog"}))))))))),ee.createElement(W,null))}let pV="div";function gV(e,t){let n=Ta(),{id:s=`headlessui-dialog-overlay-${n}`,...r}=e,[{dialogState:i,close:a}]=zl("Dialog.Overlay"),l=Gn(t),c=He(d=>{if(d.target===d.currentTarget){if(kz(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),a()}}),u=x.useMemo(()=>({open:i===0}),[i]);return Rn({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:r,slot:u,defaultTag:pV,name:"Dialog.Overlay"})}let xV="div";function yV(e,t){let n=Ta(),{id:s=`headlessui-dialog-backdrop-${n}`,...r}=e,[{dialogState:i},a]=zl("Dialog.Backdrop"),l=Gn(t);x.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let c=x.useMemo(()=>({open:i===0}),[i]);return ee.createElement(Sp,{force:!0},ee.createElement(kp,null,Rn({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:r,slot:c,defaultTag:xV,name:"Dialog.Backdrop"})))}let vV="div";function bV(e,t){let n=Ta(),{id:s=`headlessui-dialog-panel-${n}`,...r}=e,[{dialogState:i},a]=zl("Dialog.Panel"),l=Gn(t,a.panelRef),c=x.useMemo(()=>({open:i===0}),[i]),u=He(d=>{d.stopPropagation()});return Rn({ourProps:{ref:l,id:s,onClick:u},theirProps:r,slot:c,defaultTag:vV,name:"Dialog.Panel"})}let wV="h2";function jV(e,t){let n=Ta(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:a}]=zl("Dialog.Title"),l=Gn(t);x.useEffect(()=>(a(s),()=>a(null)),[s,a]);let c=x.useMemo(()=>({open:i===0}),[i]);return Rn({ourProps:{ref:l,id:s},theirProps:r,slot:c,defaultTag:wV,name:"Dialog.Title"})}let NV=pn(mV),SV=pn(yV),CV=pn(bV),kV=pn(gV),EV=pn(jV),_c=Object.assign(NV,{Backdrop:SV,Panel:CV,Overlay:kV,Title:EV,Description:aV});function DV(e=0){let[t,n]=x.useState(e),s=Bl(),r=x.useCallback(c=>{s.current&&n(u=>u|c)},[t,s]),i=x.useCallback(c=>!!(t&c),[t]),a=x.useCallback(c=>{s.current&&n(u=>u&~c)},[n,s]),l=x.useCallback(c=>{s.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:r,hasFlag:i,removeFlag:a,toggleFlag:l}}function TV(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Nf(e,...t){e&&t.length>0&&e.classList.add(...t)}function Sf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function PV(e,t){let n=ji();if(!e)return n.dispose;let{transitionDuration:s,transitionDelay:r}=getComputedStyle(e),[i,a]=[s,r].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+a;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function _V(e,t,n,s){let r=n?"enter":"leave",i=ji(),a=s!==void 0?TV(s):()=>{};r==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=Mt(r,{enter:()=>t.enter,leave:()=>t.leave}),c=Mt(r,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=Mt(r,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Sf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Nf(e,...t.base,...l,...u),i.nextFrame(()=>{Sf(e,...t.base,...l,...u),Nf(e,...t.base,...l,...c),PV(e,()=>(Sf(e,...t.base,...l),Nf(e,...t.base,...t.entered),a()))}),i.dispose}function AV({immediate:e,container:t,direction:n,classes:s,onStart:r,onStop:i}){let a=Bl(),l=Ax(),c=Ts(n);An(()=>{e&&(c.current="enter")},[e]),An(()=>{let u=ji();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&a.current)return u.dispose(),r.current(c.current),u.add(_V(d,s.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function Bs(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let nh=x.createContext(null);nh.displayName="TransitionContext";var MV=(e=>(e.Visible="visible",e.Hidden="hidden",e))(MV||{});function RV(){let e=x.useContext(nh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function IV(){let e=x.useContext(sh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let sh=x.createContext(null);sh.displayName="NestingContext";function rh(e){return"children"in e?rh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Tk(e,t){let n=Ts(e),s=x.useRef([]),r=Bl(),i=Ax(),a=He((m,p=ir.Hidden)=>{let g=s.current.findIndex(({el:v})=>v===m);g!==-1&&(Mt(p,{[ir.Unmount](){s.current.splice(g,1)},[ir.Hidden](){s.current[g].state="hidden"}}),i.microTask(()=>{var v;!rh(s)&&r.current&&((v=n.current)==null||v.call(n))}))}),l=He(m=>{let p=s.current.find(({el:g})=>g===m);return p?p.state!=="visible"&&(p.state="visible"):s.current.push({el:m,state:"visible"}),()=>a(m,ir.Unmount)}),c=x.useRef([]),u=x.useRef(Promise.resolve()),d=x.useRef({enter:[],leave:[],idle:[]}),h=He((m,p,g)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([v])=>v!==m)),t==null||t.chains.current[p].push([m,new Promise(v=>{c.current.push(v)})]),t==null||t.chains.current[p].push([m,new Promise(v=>{Promise.all(d.current[p].map(([b,y])=>y)).then(()=>v())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(p)):g(p)}),f=He((m,p,g)=>{Promise.all(d.current[p].splice(0).map(([v,b])=>b)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>g(p))});return x.useMemo(()=>({children:s,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d}),[l,a,s,h,f,d,u])}function OV(){}let LV=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function yw(e){var t;let n={};for(let s of LV)n[s]=(t=e[s])!=null?t:OV;return n}function FV(e){let t=x.useRef(yw(e));return x.useEffect(()=>{t.current=yw(e)},[e]),t}let $V="div",Pk=td.RenderStrategy;function BV(e,t){var n,s;let{beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...g}=e,v=x.useRef(null),b=Gn(v,t),y=(n=g.unmount)==null||n?ir.Unmount:ir.Hidden,{show:w,appear:S,initial:N}=RV(),[j,k]=x.useState(w?"visible":"hidden"),C=IV(),{register:P,unregister:T}=C;x.useEffect(()=>P(v),[P,v]),x.useEffect(()=>{if(y===ir.Hidden&&v.current){if(w&&j!=="visible"){k("visible");return}return Mt(j,{hidden:()=>T(v),visible:()=>P(v)})}},[j,v,P,T,w,y]);let O=Ts({base:Bs(g.className),enter:Bs(c),enterFrom:Bs(u),enterTo:Bs(d),entered:Bs(h),leave:Bs(f),leaveFrom:Bs(m),leaveTo:Bs(p)}),L=FV({beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l}),F=Da();x.useEffect(()=>{if(F&&j==="visible"&&v.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,j,F]);let _=N&&!S,B=S&&w&&N,W=!F||_?"idle":w?"enter":"leave",I=DV(0),A=He(oe=>Mt(oe,{enter:()=>{I.addFlag(sn.Opening),L.current.beforeEnter()},leave:()=>{I.addFlag(sn.Closing),L.current.beforeLeave()},idle:()=>{}})),R=He(oe=>Mt(oe,{enter:()=>{I.removeFlag(sn.Opening),L.current.afterEnter()},leave:()=>{I.removeFlag(sn.Closing),L.current.afterLeave()},idle:()=>{}})),V=Tk(()=>{k("hidden"),T(v)},C),H=x.useRef(!1);AV({immediate:B,container:v,classes:O,direction:W,onStart:Ts(oe=>{H.current=!0,V.onStart(v,oe,A)}),onStop:Ts(oe=>{H.current=!1,V.onStop(v,oe,R),oe==="leave"&&!rh(V)&&(k("hidden"),T(v))})});let J=g,re={ref:b};return B?J={...J,className:ed(g.className,...O.current.enter,...O.current.enterFrom)}:H.current&&(J.className=ed(g.className,(s=v.current)==null?void 0:s.className),J.className===""&&delete J.className),ee.createElement(sh.Provider,{value:V},ee.createElement(Sz,{value:Mt(j,{visible:sn.Open,hidden:sn.Closed})|I.flags},Rn({ourProps:re,theirProps:J,defaultTag:$V,features:Pk,visible:j==="visible",name:"Transition.Child"})))}function zV(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,a=x.useRef(null),l=Gn(a,t);Da();let c=Ix();if(n===void 0&&c!==null&&(n=(c&sn.Open)===sn.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=x.useState(n?"visible":"hidden"),h=Tk(()=>{d("hidden")}),[f,m]=x.useState(!0),p=x.useRef([n]);An(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let g=x.useMemo(()=>({show:n,appear:s,initial:f}),[n,s,f]);x.useEffect(()=>{if(n)d("visible");else if(!rh(h))d("hidden");else{let w=a.current;if(!w)return;let S=w.getBoundingClientRect();S.x===0&&S.y===0&&S.width===0&&S.height===0&&d("hidden")}},[n,h]);let v={unmount:r},b=He(()=>{var w;f&&m(!1),(w=e.beforeEnter)==null||w.call(e)}),y=He(()=>{var w;f&&m(!1),(w=e.beforeLeave)==null||w.call(e)});return ee.createElement(sh.Provider,{value:h},ee.createElement(nh.Provider,{value:g},Rn({ourProps:{...v,as:x.Fragment,children:ee.createElement(_k,{ref:l,...v,...i,beforeEnter:b,beforeLeave:y})},theirProps:{},defaultTag:x.Fragment,features:Pk,visible:u==="visible",name:"Transition"})))}function VV(e,t){let n=x.useContext(nh)!==null,s=Ix()!==null;return ee.createElement(ee.Fragment,null,!n&&s?ee.createElement(Dp,{ref:t,...e}):ee.createElement(_k,{ref:t,...e}))}let Dp=pn(zV),_k=pn(BV),UV=pn(VV),Cf=Object.assign(Dp,{Child:UV,Root:Dp});const WV={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function Rt({isOpen:e,onClose:t,title:n,description:s,children:r,size:i="md"}){return o.jsx(Cf,{show:e,as:x.Fragment,children:o.jsxs(_c,{as:"div",className:"relative z-50",onClose:t,children:[o.jsx(Cf.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),o.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:o.jsx(Cf.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:o.jsxs(_c.Panel,{className:`w-full ${WV[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[o.jsxs("div",{children:[n&&o.jsx(_c.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),s&&o.jsx(_c.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:s})]}),o.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Fd,{className:"h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:r})]})})})})]})})}const kf="http://103.224.243.242:3001/api",qV=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},eo=async(e,t={})=>{var n,s;try{console.log(`📞 API Call: ${t.method||"GET"} ${kf}${e}`);let r="";try{r=qV()}catch(c){throw c}const i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers||{}},a=await fetch(`${kf}${e}`,{...t,headers:i});if(console.log(`📩 API Response: ${a.status} ${a.statusText} for ${e}`),e==="/quotations"){const c=a.clone();try{const u=await c.json();if(console.log(`📊 Quotations API Response Data (${e}):`,u),u&&u.length>0){console.log("📝 First quotation details:",{id:u[0].id,customerName:u[0].customerName,customerId:u[0].customerId,customerContact:JSON.stringify(u[0].customerContact).substring(0,100),selectedEquipment:u[0].selectedEquipment?`${u[0].selectedEquipment.name||"Unnamed"} (${u[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const d=u[0].selectedEquipment&&u[0].selectedEquipment.name,h=u[0].selectedMachines&&Array.isArray(u[0].selectedMachines)&&u[0].selectedMachines.length>0;console.log("📋 Equipment data check:",{hasEquipment:!!d,hasMachines:!!h,machineCount:h?u[0].selectedMachines.length:0,firstMachine:h?u[0].selectedMachines[0].name:"N/A"});const f=!!u[0].customerId,m=!!u[0].customerName,p=u[0].customerContact&&typeof u[0].customerContact=="object"&&Object.keys(u[0].customerContact).length>0;console.log("👤 Customer data check:",{hasCustomerId:f,hasCustomerName:m,hasCustomerContact:p,customerType:p?typeof u[0].customerContact:"N/A"})}}catch(u){console.error("Error parsing response data:",u)}}if(!a.ok){let c=`API Error: ${a.status} ${a.statusText}`;const u=a.headers.get("content-type");console.error(`API Error: ${a.status} ${a.statusText} for ${kf}${e}`),console.error("Response Headers:",{"content-type":u,"content-length":a.headers.get("content-length")});try{if(u&&u.includes("application/json")){const d=await a.json();if(c=d.error||c,d.details&&(c+=` - ${d.details}`),console.error("API Error JSON:",d),a.status===401)throw console.warn("👮‍♂️ Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((s=t.headers)==null?void 0:s["X-Bypass-Auth"])||"Not present"},environment:"production",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const d=await a.text();d&&(console.error("API Error Text:",d.substring(0,300)),c+=` - ${d.substring(0,100)}`)}}catch(d){console.error("Error parsing API error response:",d),c+=" (Error response could not be parsed)"}throw new Error(`${c} (${e})`)}const l=await a.json();return l&&typeof l=="object"&&"success"in l&&"data"in l?l.data:l}catch(r){throw console.error(`API call failed: ${e}`,r),r}},In={get:e=>eo(e,{method:"GET"}),post:(e,t)=>eo(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>eo(e,{method:"PUT",body:JSON.stringify(t)}),patch:(e,t)=>eo(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>eo(e,{method:"DELETE"})},Ak=async()=>{try{console.log("🔍 DEBUG: customerService.getCustomers() called"),console.log('🔍 DEBUG: About to call api.get("/customers")');const e=await In.get("/customers");return console.log("🔍 DEBUG: api.get response received:",e),console.log("🔍 DEBUG: Response type:",typeof e,"Array?",Array.isArray(e)),e}catch(e){return console.error("❌ DEBUG: Failed to fetch customers:",e),console.error("❌ DEBUG: Error details:",e.message,e.stack),[]}},Mk=async e=>{try{console.log("Creating customer via API:",e);const t=await In.post("/customers",e);return console.log("Customer created successfully:",t),t}catch(t){throw console.error("Failed to create customer:",t),new Error(t.message||"Failed to create customer")}},HV=async(e,t)=>{try{return await In.put(`/customers/${e}`,t)}catch(n){throw console.error(`Failed to update customer ${e}:`,n),new Error(n.message||"Failed to update customer")}},GV=async e=>{try{return await In.delete(`/customers/${e}`),!0}catch(t){throw console.error(`Failed to delete customer ${e}:`,t),new Error(t.message||"Failed to delete customer")}};function YV({isOpen:e,onClose:t,onSelect:n,initialCustomerData:s}){const[r,i]=x.useState("select"),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState(!0),[f,m]=x.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""});x.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{console.log("🔍 Fetching customers for modal...");const y=await Ak();console.log("✅ Received customers:",y),l(y)}catch(y){console.error("❌ Error fetching customers:",y)}finally{h(!1)}},g=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const y=await Mk({...f,name:f.name.trim(),contactName:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A",type:"other",notes:""});console.log("Created new customer:",y),n(y)}catch(y){console.error("Error creating customer:",y),alert("Error creating customer")}},v=y=>{console.log("Selected existing customer:",y),n(y)},b=a.filter(y=>{var w;return y.name.toLowerCase().includes(c.toLowerCase())||y.email.toLowerCase().includes(c.toLowerCase())||((w=y.id)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))});return o.jsx(Rt,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(U,{variant:r==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),o.jsx(U,{variant:r==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),r==="select"?o.jsxs(o.Fragment,{children:["            ",o.jsxs("div",{className:"relative mb-2",children:[o.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),o.jsx(de,{placeholder:"Search customers...",value:c,onChange:y=>u(y.target.value),className:"pl-10"}),c&&o.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),o.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?o.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):b.length===0?o.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):b.map(y=>o.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>v(y),children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"font-semibold text-base text-gray-900",children:y.name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[y.companyName&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:y.companyName}),y.designation&&y.companyName&&o.jsx("div",{className:"hidden sm:inline-block text-gray-700",children:"•"}),y.designation&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:y.designation})]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-700 truncate",children:y.email}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mt-0.5",children:["ID: ",y.id]})]})},y.id))})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(de,{label:"Customer Name",value:f.name,onChange:y=>m(w=>({...w,name:y.target.value})),placeholder:"Enter customer name",required:!0}),o.jsx(de,{label:"Company Name",value:f.companyName,onChange:y=>m(w=>({...w,companyName:y.target.value})),placeholder:"Enter company name",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(de,{label:"Designation",value:f.designation,onChange:y=>m(w=>({...w,designation:y.target.value})),placeholder:"Enter designation",required:!0}),o.jsx(de,{label:"Email",type:"email",value:f.email,onChange:y=>m(w=>({...w,email:y.target.value})),placeholder:"Enter email address",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(de,{label:"Phone",value:f.phone,onChange:y=>m(w=>({...w,phone:y.target.value})),placeholder:"Enter phone number",required:!0}),o.jsx(de,{label:"Address",value:f.address,onChange:y=>m(w=>({...w,address:y.target.value})),placeholder:"Enter address",required:!0})]}),"            ",o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[o.jsx(U,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(U,{onClick:g,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function rd(){return o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx(tr,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",o.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[o.jsx(tr,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",o.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const QV=({data:e,dataType:t,className:n})=>{const[s,r]=x.useState(!1);return x.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),a=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});r(i||a)},[e]),s?o.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),o.jsxs("p",{children:["You are currently viewing ",o.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",o.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsx("li",{children:"Check that the API server is running"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),o.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[o.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},KV=e=>{if(!e)return console.warn("API response is null or undefined"),[];if(Array.isArray(e))return e;if(e.data&&Array.isArray(e.data)||e.success&&e.data&&Array.isArray(e.data))return e.data;if(e.items&&Array.isArray(e.items))return e.items;if(typeof e=="object"&&!Array.isArray(e)){const t=Object.values(e);if(t.length===1&&Array.isArray(t[0]))return t[0]}return console.warn("Unable to extract array from API response:",e),[]},XV=e=>{if(!e)return"No item";const t=e.customerName||e.customer_name||e.customer&&e.customer.name||"Unknown",n=e.email||e.customer&&e.customer.email||"",s=e.customerId||e.customer_id||e.id||"";return`${t}${n?` (${n})`:""}${s?` [${s}]`:""}`},vw=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],JV=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],ZV=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function e8(){const{user:e}=Ge(),t=Mn(),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(!1),[v,b]=x.useState(!1),[y,w]=x.useState(!1),[S,N]=x.useState(null),[j,k]=x.useState({show:!1,title:""}),C=new Date().toISOString().split("T")[0],[P,T]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[O,L]=x.useState(0),[F,_]=x.useState(null),[B,W]=x.useState(!1),[I,A]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",serviceNeeded:"",siteLocation:"",startDate:"",rentalDays:1,shiftTiming:"",status:"new",source:"",designation:"",notes:""});x.useEffect(()=>{R(),V()},[]),x.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),H()},[n,c,d]),x.useEffect(()=>{if(y&&S){const E=new Date().toISOString().split("T")[0];A({fullName:S.customerName||"",companyName:S.companyName||"",phoneNumber:S.phone||"",email:S.email||"",serviceNeeded:S.serviceNeeded||"",siteLocation:S.siteLocation||"",startDate:S.startDate||E,rentalDays:S.rentalDays||1,shiftTiming:S.shiftTiming||"",status:S.status||"new",source:S.source||"",designation:S.designation||"",notes:S.notes||""})}},[y,S]);const R=async()=>{try{console.log("Fetching leads from API...");const E=await Il(),D=KV(E);console.log("🧪 Debug leads response:",{originalResponse:E,extractedData:D,isArray:Array.isArray(D),length:Array.isArray(D)?D.length:"not array",firstLead:D.length>0?XV(D[0]):"none"}),console.log("Leads data received:",D),s(D||[]),m(!1)}catch(E){console.error("Error fetching leads:",E),Q("Error fetching leads","error"),s([]),m(!1)}},V=async()=>{try{const D=`${"http://103.224.243.242:3001/api".replace(/\/$/,"")}/auth/sales-agents`;console.log("Fetching sales agents from API at:",D);const $=await fetch(D,{headers:{"Content-Type":"application/json","X-Bypass-Auth":"development-only-123"}});if($.ok){const z=await $.json();console.log("Sales agents fetched:",z),i(z)}else console.error("Failed to fetch sales agents:",$.status),i([])}catch(E){console.error("Error fetching sales agents:",E),i([])}},H=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads. Current filters:`,{searchTerm:c,statusFilter:d});let E=[...n];c&&(E=E.filter(D=>{var $,z,Y,q;return(($=D==null?void 0:D.customerName)==null?void 0:$.toLowerCase().includes(c.toLowerCase()))||!1||((z=D==null?void 0:D.companyName)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||!1||((Y=D==null?void 0:D.email)==null?void 0:Y.toLowerCase().includes(c.toLowerCase()))||!1||((q=D==null?void 0:D.phone)==null?void 0:q.includes(c))||!1}),console.log(`After search filter: ${E.length} leads`)),d!=="all"?(E=E.filter(D=>(D==null?void 0:D.status)===d),console.log(`After status filter (${d}): ${E.length} leads`)):(E=E.filter(D=>(D==null?void 0:D.status)!=="converted"),console.log(`After excluding converted leads: ${E.length} leads`)),console.log(`Final filtered leads: ${E.length} leads match criteria`),l(E)},J=async E=>{var z;if(E.preventDefault(),!P.fullName||!P.phoneNumber||!P.email||!P.machineryType||!P.location||!P.startDate||!P.rentalDays){Q("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.email)){Q("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(P.phoneNumber)){Q("Please enter a valid phone number","error");return}try{const Y=(e==null?void 0:e.role)==="sales_agent"?e.id:P.assignedTo,q=(e==null?void 0:e.role)==="sales_agent"?e.name:((z=r.find(he=>he.id===P.assignedTo))==null?void 0:z.name)||"",xe={customerName:P.fullName,companyName:P.companyName,email:P.email,phone:P.phoneNumber,serviceNeeded:P.machineryType,siteLocation:P.location,startDate:P.startDate,rentalDays:parseInt(P.rentalDays),shiftTiming:P.shiftTiming,status:"new",notes:P.notes,designation:P.designation,...Y&&Y.trim()!==""?{assignedTo:Y,assignedToName:q}:{}};console.log("Creating lead with data:",xe);const ve=await l5(xe);s(he=>[...he,ve]),g(!1),G(),Q("Lead created successfully","success")}catch(Y){console.error("Error creating lead:",Y),Q("Error creating lead","error")}},re=async(E,D)=>{try{const $=await Vv(E,D);$&&(s(z=>z.map(Y=>Y.id===E?$:Y)),Q("Lead status updated","success"))}catch($){console.error("Error updating lead status:",$),Q("Error updating lead status","error")}},oe=E=>{console.log("Selected customer:",E),_(E),b(!1),setTimeout(()=>{W(!0)},100)},ge=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:S,selectedCustomer:F,dealValue:O}),!S){Q("No lead selected","error");return}if(!F){Q("No customer selected","error");return}const E=await h5({title:`Deal for ${F.name}`,description:`Deal created from lead for ${F.name}${F.companyName?` (${F.companyName})`:""}`,leadId:S.id,customerId:F.id,stage:"qualification",value:O,expectedCloseDate:new Date().toISOString(),customer:{name:F.name,email:F.email||S.email,phone:F.phone||S.phone,company:F.companyName||"",address:F.address||"",designation:F.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:S.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",E),await Vv(S.id,"converted"),s(D=>D.map($=>$.id===S.id?{...$,status:"converted"}:$)),Q("Lead converted to deal successfully","success"),W(!1),b(!1),N(null),_(null),L(0),t("/deals")}catch(E){console.error("Error converting lead to deal:",E),Q("Error converting lead to deal","error")}finally{m(!1)}},we=async E=>{if(E.status!=="qualified"){Q("Only qualified leads can be converted to deals","warning");return}N(E),b(!0)},M=async(E,D)=>{try{if(D===""){console.log("Unassigning lead",E);const Y=await Uv(E,"","Unassigned");Y&&(s(q=>q.map(xe=>xe.id===E?Y:xe)),Q("Lead unassigned successfully","success"));return}const $=r.find(Y=>Y.id===D);if(!$){Q("Selected sales agent not found","error");return}const z=await Uv(E,D,$.name);z&&(s(Y=>Y.map(q=>q.id===E?z:q)),Q("Lead assignment updated","success"))}catch($){console.error("Error updating lead assignment:",$),Q("Error updating lead assignment","error")}},G=()=>{T({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},Q=(E,D="success")=>{k({show:!0,title:E,variant:D}),setTimeout(()=>k({show:!1,title:""}),3e3)},se=async E=>{if(E.preventDefault(),!I.fullName||!I.phoneNumber||!I.email||!I.serviceNeeded||!I.siteLocation||!I.startDate||!I.rentalDays||I.rentalDays<1){Q("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)){Q("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(I.phoneNumber)){Q("Please enter a valid phone number","error");return}try{const z=await o5(S.id,{customerName:I.fullName,companyName:I.companyName,email:I.email,phone:I.phoneNumber,serviceNeeded:I.serviceNeeded,siteLocation:I.siteLocation,startDate:I.startDate,rentalDays:I.rentalDays,shiftTiming:I.shiftTiming,status:I.status,source:I.source,designation:I.designation,notes:I.notes});console.log("Update response:",z),z?s(Y=>{const q=Y.map(xe=>xe.id===S.id?z:xe);return console.log("Updated leads array:",q),q}):(console.log("No updated lead returned, refetching all leads"),await R()),w(!1),N(null),Q("Lead updated successfully","success")}catch(z){console.error("Error updating lead:",z),Q("Error updating lead","error")}};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(QV,{data:n,dataType:"leads"}),o.jsxs(ne,{children:[o.jsxs(me,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4",children:[o.jsx(pe,{className:"text-xl font-semibold text-gray-900",children:"Leads Pipeline"}),o.jsx(U,{onClick:()=>g(!0),className:"whitespace-nowrap self-start sm:self-auto",leftIcon:o.jsx(os,{className:"h-4 w-4"}),variant:"accent",children:"Add Lead"})]}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4 p-4 bg-gradient-to-r from-gray-50/80 to-gray-100/50 rounded-xl border border-gray-200/60 shadow-sm relative z-10",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx(us,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),o.jsx(Ve,{type:"text",placeholder:"Search leads...",value:c,onChange:E=>u(E.target.value),className:"w-full bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 min-w-0 text-gray-900 placeholder:text-gray-500"})]}),o.jsx("div",{className:"relative z-20 w-full sm:w-[180px] flex-shrink-0",children:o.jsx(Se,{value:d,onChange:E=>h(E),options:[{value:"all",label:"All Status"},...vw],className:"w-full bg-white border-gray-200"})})]})]}),o.jsx(ie,{children:f?o.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):a.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):o.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200/60 bg-white shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assigned To"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(E=>o.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/30 transition-all duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:E.customerName||"Unknown Customer"}),E.companyName&&o.jsx("div",{className:"text-sm text-gray-500",children:E.companyName}),!E.customerName&&!E.companyName&&E.id&&o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",E.id.substring(0,8),"..."]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:E.serviceNeeded||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:E.siteLocation||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Se,{value:E.status,onChange:D=>re(E.id,D),options:vw,className:"min-w-[130px]"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?o.jsx(Se,{value:E.assignedTo||"",onChange:D=>M(E.id,D),options:[{value:"",label:"Unassigned"},...r.map(D=>({value:D.id,label:D.name}))],className:"min-w-[160px]"}):o.jsx("div",{className:"text-sm text-gray-900",children:!E.assignedTo||E.assignedTo===""?"Unassigned":E.assignedToName||"Unassigned"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{N(E),w(!0)},leftIcon:o.jsx(ja,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Edit"}),E.status==="qualified"&&o.jsx(U,{variant:"outline",size:"sm",onClick:()=>we(E),leftIcon:o.jsx(pA,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Convert to Deal"})]})})]},E.id))})]})})})]}),o.jsx(Rt,{isOpen:p,onClose:()=>{g(!1),G()},title:"Create New Lead",size:"lg",children:o.jsxs("form",{onSubmit:J,className:"space-y-6",children:[o.jsx(rd,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(de,{label:"Full Name",value:P.fullName,onChange:E=>T(D=>({...D,fullName:E.target.value})),required:!0}),o.jsx(de,{label:"Company Name",value:P.companyName,onChange:E=>T(D=>({...D,companyName:E.target.value})),helperText:"Optional"}),o.jsx(de,{label:"Phone Number",type:"tel",value:P.phoneNumber,onChange:E=>T(D=>({...D,phoneNumber:E.target.value})),required:!0}),o.jsx(de,{label:"Email Address",type:"email",value:P.email,onChange:E=>T(D=>({...D,email:E.target.value})),required:!0}),o.jsx(Se,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...JV],value:P.machineryType,onChange:E=>T(D=>({...D,machineryType:E})),required:!0}),o.jsx(de,{label:"Site Location",value:P.location,onChange:E=>T(D=>({...D,location:E.target.value})),required:!0}),o.jsx(de,{label:"Start Date",type:"date",value:P.startDate,min:C,onChange:E=>T(D=>({...D,startDate:E.target.value})),required:!0}),o.jsx(de,{label:"Number of Rental Days",type:"number",min:"1",value:P.rentalDays,onChange:E=>{const D=Math.max(1,parseInt(E.target.value)||1);T($=>({...$,rentalDays:D.toString()}))},required:!0}),o.jsx(Se,{label:"Shift Timing",options:ZV,value:P.shiftTiming,onChange:E=>T(D=>({...D,shiftTiming:E})),required:!0}),o.jsx(de,{label:"Designation",value:P.designation,onChange:E=>T(D=>({...D,designation:E.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&o.jsx(Se,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...r.map(E=>({value:E.id,label:E.name}))],value:P.assignedTo,onChange:E=>T(D=>({...D,assignedTo:E})),required:!0})]}),o.jsx(ls,{label:"Additional Notes",value:P.notes,onChange:E=>T(D=>({...D,notes:E.target.value})),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{g(!1),G()},children:"Cancel"}),"            ",o.jsx(U,{type:"submit",variant:"accent",children:"Create Lead"})]})]})}),o.jsx(YV,{isOpen:v,onClose:()=>{b(!1),N(null),_(null),L(0)},onSelect:oe,initialCustomerData:S?{name:S.customerName,email:S.email||"",phone:S.phone||"",companyName:S.companyName||"",address:"",designation:S.designation||""}:void 0}),o.jsx(Rt,{isOpen:B,onClose:()=>{W(!1),N(null),_(null),L(0)},title:"Enter Deal Value",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(de,{label:"Deal Value",type:"number",value:O===0?"":O,onChange:E=>{const D=E.target.value;L(D===""?0:Number(D))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{W(!1),N(null),_(null),L(0)},children:"Cancel"}),o.jsx(U,{onClick:ge,variant:"accent",children:"Create Deal"})]})]})}),o.jsx(Rt,{isOpen:y,onClose:()=>{w(!1),N(null)},title:"Edit Lead Details",size:"lg",children:S&&o.jsxs("form",{onSubmit:se,className:"space-y-6",children:[o.jsx(rd,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(de,{label:"Full Name",value:I.fullName,onChange:E=>A(D=>({...D,fullName:E.target.value})),required:!0}),o.jsx(de,{label:"Company Name",value:I.companyName,onChange:E=>A(D=>({...D,companyName:E.target.value})),helperText:"Optional"}),o.jsx(de,{label:"Phone Number",type:"tel",value:I.phoneNumber,onChange:E=>A(D=>({...D,phoneNumber:E.target.value})),required:!0}),o.jsx(de,{label:"Email Address",type:"email",value:I.email,onChange:E=>A(D=>({...D,email:E.target.value})),required:!0}),o.jsx(de,{label:"Service Needed",value:I.serviceNeeded,onChange:E=>A(D=>({...D,serviceNeeded:E.target.value})),required:!0}),o.jsx(de,{label:"Site Location",value:I.siteLocation,onChange:E=>A(D=>({...D,siteLocation:E.target.value})),required:!0}),o.jsx(de,{label:"Start Date",type:"date",value:I.startDate,onChange:E=>A(D=>({...D,startDate:E.target.value})),required:!0}),o.jsx(de,{label:"Rental Days",type:"number",min:"1",value:I.rentalDays.toString(),onChange:E=>A(D=>({...D,rentalDays:parseInt(E.target.value)||1})),required:!0}),o.jsx(de,{label:"Shift Timing",value:I.shiftTiming,onChange:E=>A(D=>({...D,shiftTiming:E.target.value})),placeholder:"e.g., Day Shift, Night Shift"}),o.jsx(Se,{label:"Status",value:I.status,onChange:E=>A(D=>({...D,status:E})),options:[{label:"New",value:"new"},{label:"In Process",value:"in_process"},{label:"Qualified",value:"qualified"},{label:"Unqualified",value:"unqualified"},{label:"Lost",value:"lost"},{label:"Converted",value:"converted"}],required:!0}),o.jsx(Se,{label:"Source",value:I.source,onChange:E=>A(D=>({...D,source:E})),options:[{label:"Select Source",value:""},{label:"Website",value:"website"},{label:"Referral",value:"referral"},{label:"Direct",value:"direct"},{label:"Social Media",value:"social"},{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Other",value:"other"}]})]}),o.jsx("div",{children:o.jsx(de,{label:"Designation",value:I.designation,onChange:E=>A(D=>({...D,designation:E.target.value})),placeholder:"Job title or role"})}),o.jsx("div",{children:o.jsx(ls,{label:"Notes",value:I.notes,onChange:E=>A(D=>({...D,notes:E.target.value})),placeholder:"Additional notes or comments...",rows:3})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null)},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:"Save Changes"})]})]})}),j.show&&o.jsx(ht,{title:j.title,variant:j.variant,isVisible:j.show,onClose:()=>k({show:!1,title:""})})]})}const t8="modulepreload",n8=function(e){return"/"+e},bw={},ww=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=n8(c),c in bw)return;bw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":t8,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},s8={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1},{id:"sample-equipment-2",machineType:"mobile_crane",equipmentId:"crane-002",name:"100T Mobile Crane",baseRates:{micro:8e3,small:7500,monthly:7e3,yearly:6500},baseRate:7e3,runningCostPerKm:150,quantity:2}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",workingCost:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile_crane",otherFactors:["rigger","area","customer_reputation"],dealType:"credit",sundayWorking:"no"};function r8({template:e,quotation:t,onDownloadPDF:n,onSendEmail:s,className:r=""}){const[i,a]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState({show:!1,title:""});x.useEffect(()=>{if(!e){c("Template is required");return}if(!e.content){c("Template content is required");return}c(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t)},[e,t]);const h=t||s8,f=(b,y="success")=>{d({show:!0,title:b,variant:y}),setTimeout(()=>d({show:!1,title:""}),3e3)};let m="";try{e&&e.content?(m=XC(h,e),console.log("Generated merged content:",m?m.substring(0,100)+"...":"empty")):(console.warn("Cannot merge template - missing template or content"),m='<div style="padding: 20px;">Template content could not be loaded</div>')}catch(b){console.error("Error merging template:",b),c("Failed to merge template with quotation data"),m='<div style="padding: 20px; color: red;">Error generating preview</div>'}const g=JC().reduce((b,y)=>(b[y.category]||(b[y.category]=[]),b[y.category].push(y),b),{}),v=()=>{if(!m){f("No content to copy","error");return}navigator.clipboard.writeText(m).then(()=>{f("Content copied to clipboard","success")}).catch(()=>{f("Failed to copy content","error")})};return l?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[o.jsx("strong",{children:"Error:"})," ",l]})}):o.jsxs("div",{className:`space-y-4 sm:space-y-6 ${r}`,children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[o.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),o.jsxs(ne,{children:[o.jsx(me,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsxs(pe,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o.jsx(Ut,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsxs(U,{variant:"outline",size:"xs",onClick:()=>a(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(tr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),o.jsx(U,{variant:"outline",size:"xs",onClick:v,disabled:!m,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&o.jsx(ie,{className:"px-3 sm:px-6",children:o.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&o.jsxs(ne,{children:[o.jsx(me,{className:"p-3 sm:p-6",children:o.jsx(pe,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),o.jsxs(ie,{className:"p-3 sm:p-6",children:[o.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(g).map(([b,y])=>o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:b}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:y.map(w=>o.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:w.description,onClick:()=>{navigator.clipboard.writeText(`{{${w.key}}}`),f(`Copied {{${w.key}}}`,"success")},children:`{{${w.key}}}`},w.key))})]},b))}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),o.jsxs(ne,{children:[o.jsx(me,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsx(pe,{className:"text-base sm:text-lg",children:"Quotation Preview"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n&&o.jsxs(U,{variant:"outline",size:"xs",onClick:n,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(Fg,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),s&&o.jsxs(U,{variant:"outline",size:"xs",onClick:s,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(sl,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),o.jsxs(ie,{className:"p-3 sm:p-6",children:[l?o.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[o.jsxs("p",{className:"font-medium",children:["Error: ",l]}),o.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,m?o.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:m}}):o.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[o.jsx(st,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),o.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}),e&&!e.content&&o.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[o.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),o.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]}),u.show&&o.jsx(ht,{title:u.title,variant:u.variant,isVisible:u.show,onClose:()=>d({show:!1,title:""})})]})}const i8=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function a8(){const{user:e}=Ge(),t=Mn(),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(null),[v,b]=x.useState(null),[y,w]=x.useState(null),[S,N]=x.useState(!1),[j,k]=x.useState(!1),[C,P]=x.useState(""),[T,O]=x.useState(!1),[L,F]=x.useState(!1),[_,B]=x.useState({show:!1,title:""}),[W,I]=x.useState(null);x.useEffect(()=>{A()},[]),x.useEffect(()=>{V()},[n,c,d]);const A=async()=>{try{m(!0),g(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:M}=await ww(async()=>{const{getCustomers:z}=await Promise.resolve().then(()=>Fv);return{getCustomers:z}},void 0);let G=[],Q=[],se=[];try{G=await KB(),console.log("QuotationManagement: Fetched quotations:",(G==null?void 0:G.length)||0)}catch(z){console.error("Error fetching quotations:",z),H("Warning: Could not load quotations","warning")}try{Q=await Yd(),console.log("QuotationManagement: Fetched deals:",(Q==null?void 0:Q.length)||0)}catch(z){console.error("Error fetching deals:",z),H("Warning: Could not load deals.","warning"),Q=[]}try{se=await M(),console.log("QuotationManagement: Fetched customers:",(se==null?void 0:se.length)||0)}catch(z){console.error("Error fetching customers:",z),H("Warning: Could not load customers","warning")}const E=new Map;se.forEach(z=>{E.set(z.id,z)}),G.length>0&&console.log("Sample quotation data:",{id:G[0].id,customerId:G[0].customerId,customerName:G[0].customerName,customerContact:G[0].customerContact,selectedEquipment:G[0].selectedEquipment}),se.length>0&&console.log("Sample customer data:",{id:se[0].id,name:se[0].name});const D=G.map(z=>{const Y={...z},q=E.get(z.customerId);return q?(console.log(`Found matching customer for quotation ${z.id}: ${q.name}`),Y.customerName=Y.customerName||q.name,Y.customerContact=Y.customerContact||{},Y.customerContact.name||(Y.customerContact.name=q.contactName),Y.customerContact.company||(Y.customerContact.company=q.name),Y.customerContact.email||(Y.customerContact.email=q.email),Y.customerContact.phone||(Y.customerContact.phone=q.phone),Y.customerContact.address||(Y.customerContact.address=q.address)):console.log(`No matching customer found for quotation ${z.id} with customerId ${z.customerId}`),Y.customerName=Y.customerName||"Unknown Customer",Y.customerContact=Y.customerContact||{},Y.customerContact.name=Y.customerContact.name||"Contact Not Available",Y.customerContact.company=Y.customerContact.company||"No Company",Y});s(D);const $=Q.filter(z=>z.stage==="qualification"||z.stage==="proposal");i($),await R()}catch(M){console.error("Error fetching data:",M),g("Failed to load quotations. Please try again."),H("Error fetching data","error")}finally{m(!1)}},R=async()=>{try{const M=await BC();if(M&&M.defaultTemplateId){const Q=await PC(M.defaultTemplateId);if(Q){console.log("Loaded template from config:",Q),w(Q);return}}try{const se=await(await ww(()=>Promise.resolve().then(()=>Fv),void 0)).getTemplates();if(se&&se.length>0){const E=se.find(D=>D.isDefault)||se[0];console.log("Loaded template from templateService:",E),w(E);return}}catch(Q){console.error("Error loading templates from service:",Q)}const G={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),w(G)}catch(M){console.error("Error loading default template:",M);const G={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};w(G)}},V=()=>{let M=[...n];c&&(M=M.filter(G=>{var Q,se,E;return(((Q=G.customerContact)==null?void 0:Q.name)||G.customerName||"").toLowerCase().includes(c.toLowerCase())||(((se=G.customerContact)==null?void 0:se.company)||"").toLowerCase().includes(c.toLowerCase())||(G.machineType||"").toLowerCase().includes(c.toLowerCase())||G.selectedMachines&&G.selectedMachines.some(D=>(D.name||"").toLowerCase().includes(c.toLowerCase()))||(((E=G.selectedEquipment)==null?void 0:E.name)||"").toLowerCase().includes(c.toLowerCase())})),d!=="all"&&(M=M.filter(G=>G.status===d)),l(M)},H=(M,G="success",Q)=>{B({show:!0,title:M,description:Q,variant:G}),setTimeout(()=>{B({show:!1,title:""})},5e3)},J=()=>{if(!C){H("Please select a deal","warning");return}console.log("[handleProceedWithDeal] Navigating to /quotations/create?dealId="+C),t(`/quotations/create?dealId=${C}`),k(!1),P("")},re=async M=>{try{if(I(M.id),console.log("Editing quotation:",M),!M.leadId){H("Invalid quotation data","error","Missing lead ID");return}if(!await cl(M.leadId)){H("Associated deal not found","error","The deal associated with this quotation no longer exists");return}console.log("Navigating to:",`/quotations/create?dealId=${M.leadId}&quotationId=${M.id}`),t(`/quotations/create?dealId=${M.leadId}&quotationId=${M.id}`)}catch(G){console.error("Error preparing quotation edit:",G),H("Error preparing quotation edit","error")}finally{I(null)}},oe=async M=>{var G,Q,se,E;try{if(O(!0),!y){H("No default template configured","warning","Please set a default template in Configuration settings.");return}let D=y.content;D=D.replace(/\{\{customer_name\}\}/g,((G=M.customerContact)==null?void 0:G.name)||M.customerName||""),D=D.replace(/\{\{equipment_name\}\}/g,((Q=M.selectedEquipment)==null?void 0:Q.name)||""),D=D.replace(/\{\{project_duration\}\}/g,`${M.numberOfDays} days`),D=D.replace(/\{\{total_amount\}\}/g,((se=M.totalRent)==null?void 0:se.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");const $=window.open("","_blank");if(!$){H("Popup blocked","error","Please allow popups to download PDF.");return}$.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((E=M.customerContact)==null?void 0:E.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${D}
        </body>
        </html>
      `),await new Promise(z=>setTimeout(z,1e3)),$.document.close(),$.print(),$.close(),H("PDF generated successfully","success")}catch(D){console.error("Error generating PDF:",D),H("Failed to generate PDF","error")}finally{O(!1)}},ge=async M=>{var G,Q,se,E,D,$;try{if(F(!0),!y){H("No default template configured","warning","Please set a default template in Configuration settings.");return}let z=y.content;z=z.replace(/\{\{customer_name\}\}/g,((G=M.customerContact)==null?void 0:G.name)||M.customerName||""),z=z.replace(/\{\{equipment_name\}\}/g,((Q=M.selectedEquipment)==null?void 0:Q.name)||""),z=z.replace(/\{\{project_duration\}\}/g,`${M.numberOfDays} days`),z=z.replace(/\{\{total_amount\}\}/g,((se=M.totalRent)==null?void 0:se.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");let Y="Equipment";M.selectedMachines&&M.selectedMachines.length>1?Y=`${M.selectedMachines.length} machines (${M.selectedMachines.map(tt=>tt.name).join(", ")})`:M.selectedMachines&&M.selectedMachines.length===1?Y=M.selectedMachines[0].name:(E=M.selectedEquipment)!=null&&E.name?Y=M.selectedEquipment.name:M.machineType&&(Y=M.machineType);const q=`Quotation from ASP Cranes - ${M.id.slice(0,8).toUpperCase()}`,xe=((D=M.customerContact)==null?void 0:D.name)||M.customerName||"Customer",ve=(($=M.customerContact)==null?void 0:$.email)||"",he=`Dear ${xe},

Please find your quotation details for ${Y} below:

${z}

Best regards,
ASP Cranes Team`,Pe=`mailto:${ve}?subject=${encodeURIComponent(q)}&body=${encodeURIComponent(he)}`;window.open(Pe),H("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(z){console.error("Error sending to customer:",z),H("Error preparing email","error")}finally{F(!1)}},we=x.useMemo(()=>r.length===0?[{value:"",label:"No deals available"}]:r.map(M=>{var G,Q;return{value:M.id,label:`${((G=M.customer)==null?void 0:G.name)||"Unnamed"} - ${((Q=M.customer)==null?void 0:Q.company)||"No Company"} (${De(M.value)})`}}),[r]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",o.jsx(U,{onClick:()=>k(!0),className:"w-full sm:w-auto",leftIcon:o.jsx(os,{className:"w-4 h-4"}),variant:"accent",children:"Create New Quotation"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ve,{placeholder:"Search by customer, company or equipment...",value:c,onChange:M=>u(M.target.value),leftIcon:o.jsx(us,{className:"w-4 h-4"}),disabled:f})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsx(Se,{options:i8,value:d,onChange:h,leftIcon:o.jsx(kA,{className:"w-4 h-4"}),disabled:f})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Quotation History"})}),o.jsx(ie,{className:"px-0 sm:px-6",children:f?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(st,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"text-center py-8 text-red-500",children:[o.jsx(Fd,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),o.jsx("p",{className:"text-lg font-medium",children:p}),o.jsx(U,{variant:"outline",size:"sm",onClick:A,className:"mt-4",children:"Try Again"})]}):a.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Ut,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),o.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(M=>{var G,Q,se,E;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-start flex-col",children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((G=M.customerContact)==null?void 0:G.name)||M.customerName||"Customer"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((Q=M.customerContact)==null?void 0:Q.company)||M.customerName||"No Company"}),o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",M.customerId?M.customerId.substring(0,8):"None"]}),o.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:M.selectedMachines&&M.selectedMachines.length>0?M.selectedMachines.length===1?M.selectedMachines[0].name:`${M.selectedMachines.length} machines`:((se=M.selectedEquipment)==null?void 0:se.name)||M.machineType||"No equipment data"}),o.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:De(M.totalRent)})]})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:M.selectedMachines&&M.selectedMachines.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:M.selectedMachines.map(D=>D.name).join(", ")}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[M.selectedMachines.length," machine",M.selectedMachines.length>1?"s":""]})]}):(E=M.selectedEquipment)!=null&&E.name?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:M.selectedEquipment.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment"})]}):M.machineType?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:M.machineType}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment Type"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Type not specified"})]})}),o.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[o.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[M.numberOfDays," days"]}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[M.workingHours," hrs/day"]})]}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:De(M.totalRent)}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsx(Fl,{status:M.status})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>re(M),title:"Edit Quotation",disabled:f||W===M.id,children:W===M.id?o.jsx(st,{size:14,className:"animate-spin"}):o.jsx(ja,{size:14})}),o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>{b(M),N(!0)},title:"Preview Quotation",disabled:!y||f,children:o.jsx(Mu,{size:14})}),o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>oe(M),disabled:T||!y||f,title:"Download PDF",children:T?o.jsx(st,{size:14,className:"animate-spin"}):o.jsx(Fg,{size:14})}),o.jsx(U,{variant:"ghost",size:"xs",onClick:()=>ge(M),disabled:L||!y||f,title:"Send to Customer",children:L?o.jsx(st,{size:14,className:"animate-spin"}):o.jsx(sl,{size:14})})]})})]},M.id)})})]})})})]}),o.jsx(Rt,{isOpen:j,onClose:()=>{k(!1),P("")},title:"Create New Quotation",size:"lg",children:o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",o.jsx(Se,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...we.filter(M=>M.value!=="")],value:C,onChange:P,label:"Available Deals",disabled:f,required:!0}),C&&o.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const M=r.find(G=>G.id===C);return M?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),o.jsx("p",{className:"text-blue-800",children:M.customer.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),o.jsx("p",{className:"text-blue-800",children:M.customer.company})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),o.jsx("p",{className:"text-blue-800",children:De(M.value)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),o.jsx("p",{className:"text-blue-800 capitalize",children:M.stage})]})]})]}):null})()})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[o.jsx(U,{variant:"outline",onClick:()=>{k(!1),P("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),o.jsxs(U,{onClick:J,disabled:!C||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",variant:"accent",children:[f?o.jsx(st,{className:"w-4 h-4 animate-spin"}):o.jsx(os,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),o.jsx(Rt,{isOpen:S,onClose:()=>N(!1),title:"Quotation Preview",size:"full",children:v&&y&&o.jsx(r8,{quotation:v,template:y,onDownloadPDF:()=>oe(v),onSendEmail:()=>ge(v)})}),_.show&&o.jsx(ht,{title:_.title,variant:_.variant,isVisible:_.show,onClose:()=>B({show:!1,title:""})})]})})}const jw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},Nw={foodRate:2500,accommodationRate:4e3,transportRate:0},Ef={riggerAmount:4e4,helperAmount:12e3,incidentalOptions:[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}],usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}},o8=5*60*1e3,l8=YN((e,t)=>{let n=[];const s=r=>{n.forEach(i=>i(r))};return{quotationConfig:null,resourceRatesConfig:null,additionalParamsConfig:null,isLoading:!1,errors:{},lastFetchTimes:{},fetchAllConfigs:async()=>{const{fetchQuotationConfig:r,fetchResourceRatesConfig:i,fetchAdditionalParamsConfig:a}=t();e({isLoading:!0,errors:{}});try{await Promise.all([r(),i(),a()])}catch(l){console.error("Error fetching configurations:",l)}finally{e({isLoading:!1})}},fetchQuotationConfig:async()=>{try{const r=await RC();e(i=>({quotationConfig:r||jw,lastFetchTimes:{...i.lastFetchTimes,quotation:Date.now()},errors:{...i.errors,quotation:""}}))}catch(r){console.error("Error fetching quotation config:",r),e(i=>({quotationConfig:jw,errors:{...i.errors,quotation:"Failed to fetch quotation configuration"}}))}},fetchResourceRatesConfig:async()=>{try{const r=await OC();e(i=>({resourceRatesConfig:r||Nw,lastFetchTimes:{...i.lastFetchTimes,resourceRates:Date.now()},errors:{...i.errors,resourceRates:""}}))}catch(r){console.error("Error fetching resource rates config:",r),e(i=>({resourceRatesConfig:Nw,errors:{...i.errors,resourceRates:"Failed to fetch resource rates configuration"}}))}},fetchAdditionalParamsConfig:async()=>{try{const r=await FC();e(i=>({additionalParamsConfig:{...Ef,...r},lastFetchTimes:{...i.lastFetchTimes,additionalParams:Date.now()},errors:{...i.errors,additionalParams:""}}))}catch(r){console.error("Error fetching additional params config:",r),e(i=>({additionalParamsConfig:Ef,errors:{...i.errors,additionalParams:"Failed to fetch additional parameters configuration"}}))}},updateQuotationConfig:async r=>{try{const i=await IC({orderTypeLimits:r});e(a=>({quotationConfig:i,lastFetchTimes:{...a.lastFetchTimes,quotation:Date.now()},errors:{...a.errors,quotation:""}})),s("quotation")}catch(i){throw console.error("Error updating quotation config:",i),e(a=>({errors:{...a.errors,quotation:"Failed to update quotation configuration"}})),i}},updateResourceRatesConfig:async r=>{try{const i=await LC(r);e(a=>({resourceRatesConfig:i,lastFetchTimes:{...a.lastFetchTimes,resourceRates:Date.now()},errors:{...a.errors,resourceRates:""}})),s("resourceRates")}catch(i){throw console.error("Error updating resource rates config:",i),e(a=>({errors:{...a.errors,resourceRates:"Failed to update resource rates configuration"}})),i}},updateAdditionalParamsConfig:async r=>{try{const i=await $C(r);e(a=>({additionalParamsConfig:{...Ef,...i},lastFetchTimes:{...a.lastFetchTimes,additionalParams:Date.now()},errors:{...a.errors,additionalParams:""}})),s("additionalParams")}catch(i){throw console.error("Error updating additional params config:",i),e(a=>({errors:{...a.errors,additionalParams:"Failed to update additional parameters configuration"}})),i}},invalidateConfig:r=>{e(i=>{const a={...i.lastFetchTimes};return delete a[r],{lastFetchTimes:a}})},isConfigStale:(r,i=o8)=>{const{lastFetchTimes:a}=t(),l=a[r];return l?Date.now()-l>i:!0},subscribeToConfigChanges:r=>(n.push(r),()=>{n=n.filter(i=>i!==r)})}}),c8=()=>{const{quotationConfig:e,resourceRatesConfig:t,additionalParamsConfig:n,isLoading:s,errors:r,fetchAllConfigs:i,fetchQuotationConfig:a,fetchResourceRatesConfig:l,fetchAdditionalParamsConfig:c,subscribeToConfigChanges:u,isConfigStale:d}=l8(),h=x.useCallback(async()=>{await i()},[i]),f=x.useCallback(async m=>{switch(m){case"quotation":await a();break;case"resourceRates":await l();break;case"additionalParams":await c();break}},[a,l,c]);return x.useEffect(()=>((async()=>{(!e||d("quotation"))&&await a(),(!t||d("resourceRates"))&&await l(),(!n||d("additionalParams"))&&await c()})(),u(g=>{console.log(`Configuration changed: ${g}. Quotation components will use updated values.`),window.dispatchEvent(new CustomEvent("configurationChanged",{detail:{configType:g}}))})),[e,t,n,a,l,c,u,d]),{quotationConfig:e,resourceRates:t,additionalParams:n,isLoading:s,errors:r,refreshConfigurations:h,refreshSpecificConfig:f}},Df=(e,t)=>{x.useEffect(()=>{const n=s=>{t(s.detail)};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}},[e,t])},u8=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],d8=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],h8=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],f8=[{value:"day",label:"Day"},{value:"night",label:"Night"}],m8=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],Ac=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],p8=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],g8=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],Mc=[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}];function x8(){var oe,ge,we,M,G,Q,se;const{user:e}=Ge(),t=Mn(),[n]=A_(),s=n.get("dealId")||"",r=n.get("quotationId");x.useEffect(()=>{console.log("[QuotationCreation] Loaded with dealId:",s,"quotationId:",r),s||console.warn("[QuotationCreation] No dealId provided - creating new quotation")},[s,r,t]);const{quotationConfig:i,resourceRates:a,additionalParams:l}=c8(),[c,u]=x.useState(null),[d,h]=x.useState([]),[f,m]=x.useState(!0),[p,g]=x.useState(!1),[v,b]=x.useState(0),[y,w]=x.useState({duration:!0,orderType:!0,machineSelection:!0,workingHours:!0,accommodation:!0,mobDemob:!0,additional:!0}),[S,N]=x.useState({show:!1,title:""}),[j,k]=x.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:Ac[0].value,sundayWorking:"no"}),[C,P]=x.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});Df("resourceRatesUpdated",()=>{console.log("Resource rates updated, recalculating quotation..."),L()}),Df("additionalParamsUpdated",()=>{console.log("Additional parameters updated, recalculating quotation..."),L()}),Df("quotationConfigUpdated",E=>{if(console.log("Quotation configuration updated, checking order type...",E),j.numberOfDays>0){const D=O(j.numberOfDays);D!==j.orderType&&k($=>({...$,orderType:D}))}L()}),x.useEffect(()=>{T()},[s,r]),x.useEffect(()=>{L()},[j,v]),x.useEffect(()=>{j.workingHours!==void 0&&L()},[j.workingHours]),x.useEffect(()=>{var E;if(j.orderType&&((E=j.selectedEquipment)!=null&&E.id)&&Array.isArray(d)&&d.length>0){const D=d.find($=>$.id===j.selectedEquipment.id);if(D!=null&&D.baseRates){const $=D.baseRates[j.orderType];b($)}}j.selectedMachines.length>0&&Array.isArray(d)&&d.length>0&&k(D=>({...D,selectedMachines:D.selectedMachines.map($=>{const z=d.find(Y=>Y.id===$.id);return z!=null&&z.baseRates?{...$,baseRate:z.baseRates[j.orderType]||$.baseRate}:$})}))},[j.orderType,d.length]),x.useEffect(()=>{j.machineType?(async()=>{try{const D=await qv(j.machineType);h(Array.isArray(D)?D:[])}catch(D){console.error("Error fetching equipment:",D),h([])}})():h([])},[j.machineType]),x.useEffect(()=>{if(j.selectedEquipment&&Array.isArray(d)&&d.length>0){const E=d.find(D=>D.id===j.selectedEquipment.id);if(E!=null&&E.baseRates){const D=E.baseRates[j.orderType];b(D),k($=>({...$,baseRate:D,runningCostPerKm:E.runningCostPerKm||0}))}}},[j.orderType,j.selectedEquipment,d]);const T=async()=>{var E,D,$,z;try{if(m(!0),console.log("[QuotationCreation] Fetching data with dealId:",s,"quotationId:",r),s){let q=null;try{q=await cl(s),console.log("[QuotationCreation] Fetched deal data:",q),u(q)}catch(xe){console.error("[QuotationCreation] Error fetching deal by ID:",xe),I("Warning: Could not load deal details. You can still create a quotation.","warning"),u({id:s,customer:{name:"Unknown Customer",email:"",phone:"",company:"Unknown Company",address:"",designation:""},title:"Unknown Deal",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()})}}else u({id:"new",customer:{name:"New Customer",email:"",phone:"",company:"",address:"",designation:""},title:"New Quotation",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()});const Y=await dx();if(console.log("Fetched equipment data:",Y),r){console.log("Fetching existing quotation:",r);const q=await YB(r);if(console.log("Fetched quotation data:",q),q){k(he=>({...he,machineType:q.machineType||""})),await new Promise(he=>setTimeout(he,100));const xe=await qv(q.machineType);h(xe),await new Promise(he=>setTimeout(he,100));let ve=[];if(q.selectedMachines&&q.selectedMachines.length>0)ve=q.selectedMachines.map(he=>{var tt;const Pe=xe.find(ke=>ke.id===he.id);return{...he,machineType:he.machineType||q.machineType||"",name:(Pe==null?void 0:Pe.name)||he.name||"Unknown Equipment",baseRates:(Pe==null?void 0:Pe.baseRates)||he.baseRates,baseRate:((tt=Pe==null?void 0:Pe.baseRates)==null?void 0:tt[q.orderType])||he.baseRate||0,quantity:he.quantity||1}}),console.log("Loaded machines from selectedMachines:",ve);else if(q.selectedEquipment){const he=xe.find(Pe=>Pe.id===q.selectedEquipment.id);ve=[{id:q.selectedEquipment.id,machineType:q.machineType||"",equipmentId:q.selectedEquipment.equipmentId,name:(he==null?void 0:he.name)||q.selectedEquipment.name||"Unknown Equipment",baseRates:(he==null?void 0:he.baseRates)||q.selectedEquipment.baseRates,baseRate:((E=he==null?void 0:he.baseRates)==null?void 0:E[q.orderType])||(($=(D=q.selectedEquipment)==null?void 0:D.baseRates)==null?void 0:$[q.orderType])||0,runningCostPerKm:q.runningCostPerKm||0,quantity:1}],console.log("Created machine from selectedEquipment:",ve)}if(k({machineType:q.machineType||"",selectedEquipment:q.selectedEquipment||{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:ve,orderType:q.orderType||"micro",numberOfDays:q.numberOfDays||0,workingHours:q.workingHours||8,foodResources:q.foodResources||0,accomResources:q.accomResources||0,siteDistance:q.siteDistance||0,usage:q.usage||"normal",riskFactor:q.riskFactor||"low",extraCharge:q.extraCharge||0,incidentalCharges:q.incidentalCharges||[],otherFactorsCharge:q.otherFactorsCharge||0,billing:q.billing||"gst",includeGst:q.includeGst??!0,shift:q.shift||"single",dayNight:q.dayNight||"day",mobDemob:q.mobDemob||0,mobRelaxation:q.mobRelaxation||0,runningCostPerKm:q.runningCostPerKm||0,version:q.version||1,createdBy:q.createdBy||(e==null?void 0:e.id)||"",status:q.status||"draft",otherFactors:q.otherFactors||[],dealType:q.dealType,sundayWorking:q.sundayWorking}),ve.length>0){const he=ve[0];b(he.baseRate),console.log("Setting selected equipment base rate to:",he.baseRate)}else if((z=q.selectedEquipment)!=null&&z.baseRates){const he=q.selectedEquipment.baseRates[q.orderType];b(he),console.log("Setting selected equipment base rate from baseRates:",he)}console.log("Form data updated with quotation data")}else{I("Quotation not found","error"),t("/quotations");return}}console.log("Quotation config managed by centralized store")}catch(Y){console.error("Error fetching data:",Y),I("Error fetching data","error")}finally{m(!1)}},O=E=>{if(!(i!=null&&i.orderTypeLimits))return"micro";const D=i.orderTypeLimits;return E<=0?"micro":E>=D.yearly.minDays?"yearly":E>=D.monthly.minDays?"monthly":E>=D.small.minDays?"small":"micro"},L=()=>{console.log("Calculating quotation with working hours:",j.workingHours);const E=j.selectedMachines.length>0,D=v;if(!j.numberOfDays||!E&&!D){P({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const $=Number(j.numberOfDays),z=$>25,Y=z?26:$,q=F(Y),xe=j.shift==="double"?2:1;let ve=0;const he=j.workingHours===0?8:Number(j.workingHours)||8;E?j.selectedMachines.forEach(en=>{const Ni=en.baseRate,Ra=en.quantity;let Ia=0;z?Ia=Ni/26/he*he*Y*xe*Ra:Ia=Ni*he*Y*xe*Ra,ve+=Ia}):z?ve=D/26/he*he*Y*xe:ve=D*he*Y*xe;const Pe=j.usage==="heavy"?.1:.05;let tt=0;E?j.selectedMachines.forEach(en=>{tt+=en.baseRate*en.quantity*Pe}):tt=D*Pe;let ke;if(z)ke=Number(j.foodResources)*((a==null?void 0:a.foodRate)??0)+Number(j.accomResources)*((a==null?void 0:a.accommodationRate)??0);else{const en=((a==null?void 0:a.foodRate)??0)/26,Ni=((a==null?void 0:a.accommodationRate)??0)/26;ke=(Number(j.foodResources)*en+Number(j.accomResources)*Ni)*Y}const Yn=_();let ds=0;const iy=j.riskFactor==="high"?.15:j.riskFactor==="medium"?.1:.05;E?j.selectedMachines.forEach(en=>{ds+=en.baseRate*en.quantity*iy}):ds=D*iy;const XE=j.incidentalCharges.reduce((en,Ni)=>{const Ra=Mc.find(Ia=>Ia.value===Ni);return en+(Ra?Ra.amount:0)},0);let fh=0;j.otherFactors.includes("rigger")&&(fh+=(l==null?void 0:l.riggerAmount)||4e4),j.otherFactors.includes("helper")&&(fh+=(l==null?void 0:l.helperAmount)||12e3);const ay=Number(j.extraCharge)+XE+fh,oy=ve+ke+Yn+ds+tt+ay,ly=j.includeGst?oy*.18:0,JE=oy+ly;P({baseRate:D,totalHours:z?0:q,workingCost:ve,mobDemobCost:Yn,foodAccomCost:ke,usageLoadFactor:tt,extraCharges:ay,riskAdjustment:ds,gstAmount:ly,totalAmount:JE})},F=E=>{const D=j.workingHours===0?8:Number(j.workingHours)||8,$=j.shift==="double"?2:1;return D*E*$},_=()=>{const E=Number(j.siteDistance),D=Number(j.mobDemob)||0,$=Number(j.mobRelaxation)||0;if(j.selectedMachines.length>0){let z=0;return j.selectedMachines.forEach(Y=>{let q=Y.runningCostPerKm||0;if(q===0&&Array.isArray(d)){const Pe=d.find(tt=>tt.id===Y.id);Pe&&(q=(Pe==null?void 0:Pe.runningCostPerKm)??0)}const xe=E*q*2*Y.quantity,ve=xe*$/100,he=xe-ve+D*Y.quantity;z+=he}),z}else{const z=Array.isArray(d)?d.find(he=>he.id===j.selectedEquipment.id):null,Y=(z==null?void 0:z.runningCostPerKm)??0,q=E*Y*2,xe=q*$/100;return q-xe+D}},B=E=>{w(D=>({...D,[E]:!D[E]}))},W=async E=>{var D,$,z,Y,q,xe,ve,he,Pe,tt;if(E.preventDefault(),!c&&s&&I("Deal information is not available. Creating quotation with available data.","warning"),j.selectedMachines.length===0&&!j.selectedEquipment.id){I("Please select at least one machine","error");return}if(j.numberOfDays<=0){I("Please enter valid number of days","error");return}try{g(!0),console.log("Current calculations:",C);const ke={...j,dealId:(c==null?void 0:c.id)||s||"new",leadId:(c==null?void 0:c.leadId)||"",customerId:(c==null?void 0:c.customerId)||"",customerName:((D=c==null?void 0:c.customer)==null?void 0:D.name)||"New Customer",customerContact:{name:(($=c==null?void 0:c.customer)==null?void 0:$.name)||"New Customer",email:((z=c==null?void 0:c.customer)==null?void 0:z.email)||"",phone:((Y=c==null?void 0:c.customer)==null?void 0:Y.phone)||"",company:((q=c==null?void 0:c.customer)==null?void 0:q.company)||"",address:((xe=c==null?void 0:c.customer)==null?void 0:xe.address)||"",designation:((ve=c==null?void 0:c.customer)==null?void 0:ve.designation)||""},selectedEquipment:j.selectedEquipment,selectedMachines:j.selectedMachines,totalRent:C.totalAmount,baseRate:C.baseRate,workingCost:C.workingCost,mobDemobCost:C.mobDemobCost,foodAccomCost:C.foodAccomCost,usageLoadFactor:C.usageLoadFactor,extraCharges:C.extraCharges,riskAdjustment:C.riskAdjustment,gstAmount:C.gstAmount,sundayWorking:j.sundayWorking||"no"};console.log("Submitting quotation data:",ke);let Yn;r?(Yn=await GB(r,{...ke,version:j.version+1}),I("Quotation updated successfully","success")):(console.log("🔍 Creating quotation with data:",{...ke,selectedMachines:((he=ke.selectedMachines)==null?void 0:he.map(ds=>({id:ds.id,name:ds.name,quantity:ds.quantity,baseRate:ds.baseRate})))||[]}),Yn=await QB(ke),I("Quotation created successfully","success")),console.log("Saved quotation:",Yn),t("/quotations")}catch(ke){console.error("❌ Error saving quotation:",ke),console.error("❌ Error details:",{message:ke==null?void 0:ke.message,response:((Pe=ke==null?void 0:ke.response)==null?void 0:Pe.data)||(ke==null?void 0:ke.response),status:(tt=ke==null?void 0:ke.response)==null?void 0:tt.status}),I("Error saving quotation","error")}finally{g(!1)}},I=(E,D="success",$)=>{N({show:!0,title:E,variant:D,description:$}),setTimeout(()=>N({show:!1,title:""}),3e3)},A=E=>{const D=Array.isArray(d)?d.find($=>$.id===E):null;if(D&&D.baseRates){const $=D.baseRates[j.orderType];b($),k(z=>({...z,selectedEquipment:{id:D.id,equipmentId:D.equipmentId,name:D.name,baseRates:D.baseRates},runningCostPerKm:D.runningCostPerKm||0}))}},R=E=>{k(D=>({...D,machineType:E,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}}})),b(0)},V=()=>{var z;if(!j.machineType||!j.selectedEquipment.id){I("Please select a machine type and equipment first","warning");return}if(j.selectedMachines.some(Y=>Y.id===j.selectedEquipment.id)){J(j.selectedEquipment.id,1);return}const D=Array.isArray(d)?d.find(Y=>Y.id===j.selectedEquipment.id):null;if(!D){I("Selected equipment not found","error");return}const $={id:D.id,machineType:j.machineType,equipmentId:D.equipmentId,name:D.name,baseRates:D.baseRates||{},baseRate:((z=D.baseRates)==null?void 0:z[j.orderType])||0,runningCostPerKm:D.runningCostPerKm||0,quantity:1};k(Y=>({...Y,selectedMachines:[...Y.selectedMachines,$]})),k(Y=>({...Y,machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},baseRate:0})),b(0)},H=E=>{k(D=>({...D,selectedMachines:D.selectedMachines.filter($=>$.id!==E)}))},J=(E,D)=>{k($=>({...$,selectedMachines:$.selectedMachines.map(z=>{if(z.id===E){const Y=Math.max(1,z.quantity+D);return{...z,quantity:Y}}return z})}))},re=(E,D)=>{k($=>({...$,selectedMachines:$.selectedMachines.map(z=>z.id===E?{...z,baseRate:D}:z)}))};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):f?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsx("style",{children:`
          /* Remove number input spinners */
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:o.jsx(XN,{size:16}),className:"self-start",children:"Back"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:r?"Edit Quotation":"Create Quotation"}),o.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",((oe=c==null?void 0:c.customer)==null?void 0:oe.name)||"New Customer"," - ",(c==null?void 0:c.title)||"New Quotation"]})]})]})}),o.jsxs("div",{className:"max-w-full md:max-w-7xl mx-auto px-2 sm:px-4",children:[o.jsxs(ne,{className:"mb-4 sm:mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),o.jsx(pe,{className:"text-base sm:text-lg font-medium",children:"Customer Information"})]})}),o.jsx(ie,{children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Customer Name"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(ge=c==null?void 0:c.customer)!=null&&ge.name?c.customer.name:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Company"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(we=c==null?void 0:c.customer)!=null&&we.company?c.customer.company:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Designation"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(M=c==null?void 0:c.customer)!=null&&M.designation?c.customer.designation:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Email"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900 break-all",children:(G=c==null?void 0:c.customer)!=null&&G.email?c.customer.email:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Phone"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(Q=c==null?void 0:c.customer)!=null&&Q.phone?c.customer.phone:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Address"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(se=c==null?void 0:c.customer)!=null&&se.address?c.customer.address:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})})]}),o.jsxs("form",{onSubmit:W,children:[o.jsx(rd,{}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"col-span-7 space-y-6",children:[o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("duration"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(as,{className:"w-5 h-5 text-gray-500"}),o.jsx(pe,{className:"text-lg font-medium",children:"Duration"})]}),y.duration?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.duration&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[o.jsx(de,{type:"number",label:"Number of Days",value:j.numberOfDays||"",onChange:E=>{const D=E.target.value===""?0:Number(E.target.value),$=O(D);console.log(`Days: ${D}, Order Type: ${$}`),k(z=>{const Y=D>0&&$!==z.orderType;let q=[...z.selectedMachines];return Y&&(q=z.selectedMachines.map(xe=>{var ve;return{...xe,baseRate:((ve=xe.baseRates)==null?void 0:ve[$])||xe.baseRate}})),{...z,numberOfDays:D,orderType:D>0?$:z.orderType,selectedMachines:q}})},required:!0,min:"1",placeholder:"Enter number of days"}),j.numberOfDays>0&&v>0&&o.jsxs("div",{className:"mt-2 space-y-1",children:[j.orderType!=="monthly"?o.jsxs("div",{className:"text-sm text-gray-600",children:["Daily Rate: ",De(v*(j.workingHours===0?8:Number(j.workingHours)||8)),"/day"]}):o.jsxs("div",{className:"text-sm text-gray-600",children:["Monthly Rate: ",De(v),"/month"]}),o.jsx("div",{className:"text-sm font-medium text-primary-600",children:i!=null&&i.orderTypeLimits&&Number(j.numberOfDays)>=i.orderTypeLimits.yearly.minDays?"Yearly rate":i!=null&&i.orderTypeLimits&&Number(j.numberOfDays)>=i.orderTypeLimits.monthly.minDays?"Monthly rate":i!=null&&i.orderTypeLimits&&Number(j.numberOfDays)>=i.orderTypeLimits.small.minDays?"Small order rate":"Micro order rate"})]})]})]}),o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("orderType"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ut,{className:"w-5 h-5 text-gray-500"}),o.jsx(pe,{className:"text-lg font-medium",children:"Order Type"})]}),y.orderType?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.orderType&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[o.jsx(Se,{label:"Order Type",options:u8,value:j.orderType,onChange:E=>{Number(j.numberOfDays)===0&&k(D=>({...D,orderType:E}))},disabled:Number(j.numberOfDays)>0}),Number(j.numberOfDays)>0?o.jsx("div",{className:"mt-2 text-sm text-amber-600",children:i!=null&&i.orderTypeLimits&&Number(j.numberOfDays)>=i.orderTypeLimits.yearly.minDays?"Order type is set to Yearly as duration exceeds "+(i.orderTypeLimits.yearly.minDays-1)+" days":i!=null&&i.orderTypeLimits&&Number(j.numberOfDays)>=i.orderTypeLimits.monthly.minDays?"Order type is set to Monthly as duration exceeds "+(i.orderTypeLimits.monthly.minDays-1)+" days":i!=null&&i.orderTypeLimits&&Number(j.numberOfDays)>=i.orderTypeLimits.small.minDays?"Order type is set to Small as duration is between "+i.orderTypeLimits.small.minDays+"-"+i.orderTypeLimits.small.maxDays+" days":i!=null&&i.orderTypeLimits?"Order type is set to Micro as duration is "+i.orderTypeLimits.micro.maxDays+" days or less":"Loading configuration..."}):o.jsxs("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[o.jsx(tr,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Order type will be automatically set based on the number of days"})]})]})]}),o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("machineSelection"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ln,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx(pe,{className:"text-lg font-medium",children:"Machine Selection"}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:["You can add multiple machines to this quotation",o.jsxs("span",{className:"ml-1 cursor-help text-gray-400 hover:text-gray-600 relative group",children:[o.jsx(tr,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden group-hover:block absolute left-full ml-2 top-0 bg-gray-800 text-white text-xs rounded p-2 w-48",children:"Add different types of machines or multiple units of the same machine using the Add Machine button"})]})]})]})]}),y.machineSelection?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.machineSelection&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[Array.isArray(j.selectedMachines)&&j.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",j.selectedMachines.length,")"]}),o.jsx("span",{className:"text-xs text-gray-500 mb-2",children:"You can edit the base rate and quantity for each machine"})]}),o.jsx("div",{className:"space-y-3 bg-gray-50 p-3 rounded-md border border-gray-200",children:(Array.isArray(j.selectedMachines)?j.selectedMachines:[]).map(E=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("div",{className:"font-semibold text-gray-900",children:E.name}),o.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["ID: ",E.equipmentId]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-gray-50 p-2 rounded-md border border-gray-100",children:[o.jsx("label",{className:"text-xs font-medium text-gray-900",children:"Base Rate:"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-sm text-gray-900",value:E.baseRate,onChange:D=>{const $=Number(D.target.value);isNaN($)||re(E.id,$)}}),o.jsx("span",{className:"text-xs text-gray-700",children:j.orderType==="monthly"?"/month":"/hr"})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-3",children:[o.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-error-500 transition-colors duration-150",onClick:()=>H(E.id),title:"Remove machine",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Quantity"}),o.jsxs("div",{className:"flex items-center border rounded-md overflow-hidden",children:[o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>J(E.id,-1),disabled:E.quantity<=1,children:"-"}),o.jsx("span",{className:"px-3 py-1 font-medium",children:E.quantity}),o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>J(E.id,1),children:"+"})]})]})]})]},E.id))})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Add Machine"}),o.jsx(Se,{label:"Machine Type",options:d8,value:j.machineType,onChange:E=>{R(E)}}),j.machineType&&o.jsx("div",{className:"mt-3",children:o.jsx(Se,{label:"Select Equipment",options:[{value:"",label:"Select equipment..."},...(Array.isArray(d)?d:[]).map(E=>{var D;return{value:E.id,label:`${E.equipmentId} - ${E.name} (${De(((D=E.baseRates)==null?void 0:D[j.orderType])||0)}${j.orderType==="monthly"?"/month":"/hr"})`}})],value:j.selectedEquipment.id,onChange:E=>{A(E)}})}),!(Array.isArray(d)&&d.length)&&j.machineType&&o.jsx("div",{className:"text-sm text-amber-600 mt-2",children:"No available equipment found for this machine type"}),o.jsxs("div",{className:"mt-4",children:[o.jsx(U,{type:"button",variant:"default",onClick:V,leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),disabled:!j.machineType||!j.selectedEquipment.id,className:"w-full",size:"default",children:j.selectedMachines.length===0?"Add Machine to Quotation":"Add Another Machine"}),j.selectedMachines.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 text-center mt-2",children:["You have added ",j.selectedMachines.length," machine",j.selectedMachines.length>1?"s":""," to this quotation"]})]})]})]})]}),o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("workingHours"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Nn,{className:"w-5 h-5 text-gray-500"}),o.jsx(pe,{className:"text-lg font-medium",children:"Working Hours"})]}),y.workingHours?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.workingHours&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[o.jsx(Se,{label:"Shift",options:h8,value:j.shift,onChange:E=>{k(D=>({...D,shift:E}))}}),o.jsxs("div",{children:[o.jsx(de,{type:"number",label:"Number of Hours",value:j.workingHours===0?"":j.workingHours,onChange:E=>{const D=E.target.value;if(D==="")k($=>({...$,workingHours:0}));else if(/^\d+$/.test(D)){const $=parseInt(D,10);$>=1&&$<=24&&k(z=>({...z,workingHours:$}))}},required:!0,min:"1",max:"24",placeholder:"Enter hours (default: 8)",step:"1",autoComplete:"off"}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(Nn,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Standard single shift duration is 8 hours"})]})]}),o.jsx(Se,{label:"Day/Night",options:f8,value:j.dayNight,onChange:E=>k(D=>({...D,dayNight:E}))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"sundayWorking",checked:j.sundayWorking==="yes",onChange:E=>k(D=>({...D,sundayWorking:E.target.checked?"yes":"no"})),className:"rounded border-gray-300"}),o.jsx("label",{htmlFor:"sundayWorking",className:"text-sm",children:"Sunday Working"})]})]})]}),o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("accommodation"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Id,{className:"w-5 h-5 text-gray-500"}),o.jsx(pe,{className:"text-lg font-medium",children:"Accommodation"})]}),y.accommodation?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.accommodation&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx(de,{type:"number",label:"Number of Resources",value:j.foodResources||"",onChange:E=>k(D=>({...D,foodResources:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: ₹2500/month per resource"})]}),o.jsxs("div",{children:[o.jsx(de,{type:"number",label:"Number of Resources",value:j.accomResources||"",onChange:E=>k(D=>({...D,accomResources:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: ₹4000/month per resource"})]})]})]}),o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("mobDemob"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ln,{className:"w-5 h-5 text-gray-500"}),o.jsx(pe,{className:"text-lg font-medium",children:"Mob - Demob"})]}),y.mobDemob?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.mobDemob&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[o.jsx("div",{children:o.jsx(de,{type:"number",label:"Distance to Site (km)",value:j.siteDistance||"",onChange:E=>k(D=>({...D,siteDistance:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter distance in kilometers"})}),o.jsx("div",{children:o.jsx(de,{type:"number",label:"Trailer Cost",value:j.mobDemob||"",onChange:E=>k(D=>({...D,mobDemob:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter additional trailer charges"})}),o.jsxs("div",{children:[o.jsx(de,{type:"number",label:"Mob Relaxation",value:j.mobRelaxation||"",onChange:E=>k(D=>({...D,mobRelaxation:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter relaxation value (X%)"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Enter percentage value for discount on distance cost"})]})]})]}),o.jsxs(ne,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>B("additional"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(rl,{className:"w-5 h-5 text-gray-500"}),o.jsx(pe,{className:"text-lg font-medium",children:"Additional Parameters"})]}),y.additional?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Us,{className:"h-5 w-5 text-gray-400"})]})}),y.additional&&o.jsxs(ie,{className:"pt-4 space-y-4",children:[o.jsx(Se,{label:"Usage",options:m8,value:j.usage,onChange:E=>k(D=>({...D,usage:E}))}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(Hm,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Usage rates: Normal - 5% of base rate | Heavy - 10% of base rate"})]}),o.jsx(Se,{label:"Deal Type",options:Ac,value:j.dealType||Ac[0].value,onChange:E=>k(D=>({...D,dealType:E||Ac[0].value}))}),o.jsx(de,{type:"number",label:"Extra Commercial Charges",value:j.extraCharge||"",onChange:E=>k(D=>({...D,extraCharge:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter extra charges"}),o.jsx(Se,{label:"Risk Factor",options:p8,value:j.riskFactor,onChange:E=>k(D=>({...D,riskFactor:E}))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Incidental Charges"}),o.jsx("div",{className:"space-y-2",children:Mc.map(E=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.incidentalCharges.includes(E.value),onChange:D=>{k($=>({...$,incidentalCharges:D.target.checked?[...$.incidentalCharges,E.value]:$.incidentalCharges.filter(z=>z!==E.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:E.label})]},E.value))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Other Factors"}),o.jsx("div",{className:"space-y-2",children:g8.map(E=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.otherFactors.includes(E.value),onChange:D=>{k($=>({...$,otherFactors:D.target.checked?[...$.otherFactors,E.value]:$.otherFactors.filter(z=>z!==E.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[E.label,E.value==="rigger"&&" (₹40,000)",E.value==="helper"&&" (₹12,000)"]})]},E.value))})]})]})]})]}),o.jsxs("div",{className:"col-span-5 space-y-6 sticky top-6",children:[o.jsxs(ne,{className:"shadow-lg border-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80",children:[o.jsx(me,{className:"border-b border-gray-100 pb-6",children:o.jsxs(pe,{className:"text-xl font-semibold flex items-center gap-2",children:[o.jsx(gA,{className:"w-5 h-5 text-primary-500"}),"Quotation Summary"]})}),o.jsxs(ie,{children:[v>0&&!j.selectedMachines.length&&o.jsxs("div",{className:"mb-6 p-4 bg-primary-50/50 rounded-xl border border-primary-100",children:[o.jsx("div",{className:"text-sm font-medium text-primary-900 mb-2",children:"Equipment Details"}),o.jsxs("div",{className:"text-2xl font-bold text-primary-700",children:["₹",De(v).replace("₹",""),o.jsx("span",{className:"text-base font-medium text-primary-600 ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]}),o.jsxs("div",{className:"text-sm text-primary-600 mt-1",children:[j.orderType.charAt(0).toUpperCase()+j.orderType.slice(1)," Rate"]}),j.orderType==="monthly"&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{children:"Hourly Rate: "}),o.jsxs("span",{className:"font-medium ml-1",children:["₹",De(v/26/(parseFloat(j.workingHours.toString())||8)).replace("₹",""),"/hr"]})]})}),j.numberOfDays&&o.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Total Days:"}),o.jsx("span",{className:"font-medium",children:Number(j.numberOfDays)>25?"26 (Monthly)":j.numberOfDays})]}),j.orderType!=="monthly"&&o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Hours per Day:"}),o.jsx("span",{className:"font-medium",children:j.workingHours===0?8:j.workingHours||8})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:"Order Type:"}),o.jsx("span",{className:"font-medium",children:j.orderType.charAt(0).toUpperCase()+j.orderType.slice(1)})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[j.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",j.selectedMachines.length,")"]}),o.jsxs("div",{className:"space-y-2 bg-primary-50 p-3 rounded-md border border-primary-100",children:[j.selectedMachines.map(E=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:E.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[E.quantity," unit",E.quantity>1?"s":""," × ",De(E.baseRate),j.orderType==="monthly"?"/month":"/hr"]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"font-semibold text-primary-700",children:[De(E.baseRate*E.quantity),o.jsx("span",{className:"text-xs ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]})})]},E.id)),o.jsxs("div",{className:"flex justify-between items-center p-2 mt-2 border-t border-primary-200",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total machines value"}),o.jsxs("div",{className:"font-semibold text-primary-700",children:[De(j.selectedMachines.reduce((E,D)=>E+D.baseRate*D.quantity,0)),o.jsx("span",{className:"text-xs ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nn,{className:"w-4 h-4 text-primary-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Working Cost"})]}),o.jsx("span",{className:"font-semibold",children:De(C.workingCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?C.workingCost/C.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wn,{className:"w-4 h-4 text-success-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Food & Accommodation"})]}),o.jsx("span",{className:"font-semibold",children:De(C.foodAccomCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-success-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?C.foodAccomCost/C.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-warning-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Mob/Demob Cost"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(tr,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Cost calculated for each machine based on distance, running cost per km, and trailer cost."})]})]}),o.jsx("span",{className:"font-semibold",children:De(C.mobDemobCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-warning-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?C.mobDemobCost/C.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hm,{className:"w-4 h-4 text-error-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Risk & Usage"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(tr,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Risk factor (5-15%) and usage load (5-10%) calculated for each machine based on its base rate and quantity."})]})]}),o.jsx("span",{className:"font-semibold",children:De(C.riskAdjustment+C.usageLoadFactor)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-error-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?(C.riskAdjustment+C.usageLoadFactor)/C.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Od,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Extra Commercial Charges"})]}),o.jsx("span",{className:"font-semibold",children:De(Number(j.extraCharge))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?Number(j.extraCharge)/C.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xi,{className:"w-4 h-4 text-indigo-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Incidental Charges"})]}),o.jsx("span",{className:"font-semibold",children:De(j.incidentalCharges.reduce((E,D)=>{const $=Mc.find(z=>z.value===D);return E+($?$.amount:0)},0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?j.incidentalCharges.reduce((E,D)=>{const $=Mc.find(z=>z.value===D);return E+($?$.amount:0)},0)/C.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Wn,{className:"w-4 h-4 text-cyan-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Other Factors"})]}),o.jsx("span",{className:"font-semibold",children:De((j.otherFactors.includes("rigger")?(l==null?void 0:l.riggerAmount)||4e4:0)+(j.otherFactors.includes("helper")?(l==null?void 0:l.helperAmount)||12e3:0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-cyan-500 rounded-full transition-all duration-300",style:{width:`${C.totalAmount>0?((j.otherFactors.includes("rigger")?(l==null?void 0:l.riggerAmount)||4e4:0)+(j.otherFactors.includes("helper")?(l==null?void 0:l.helperAmount)||12e3:0))/C.totalAmount*100:.5}%`}})})]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{className:"font-medium",children:De(C.totalAmount-C.gstAmount)})]}),j.includeGst&&o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"GST (18%)"}),o.jsx("span",{className:"font-medium",children:De(C.gstAmount)})]}),o.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[o.jsx("span",{className:"text-lg font-semibold",children:"Total Amount"}),o.jsx("span",{className:"text-2xl font-bold text-primary-600",children:De(C.totalAmount)})]})]})}),o.jsx("div",{className:"mt-6",children:o.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.includeGst,onChange:E=>k(D=>({...D,includeGst:E.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),o.jsx("div",{className:"text-sm text-gray-500",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1 order-2 sm:order-1",size:"default",children:"Cancel"}),o.jsxs("div",{className:"sm:flex-1 order-1 sm:order-2",children:[o.jsx(U,{type:"submit",disabled:p||j.selectedMachines.length===0&&!j.selectedEquipment.id,className:"w-full bg-primary-600 hover:bg-primary-700",leftIcon:p?o.jsx(Nn,{className:"animate-spin"}):o.jsx(yi,{}),size:"default",variant:"accent",children:p?"Saving...":r?"Update Quotation":"Create Quotation"}),j.selectedMachines.length===0&&!j.selectedEquipment.id&&o.jsx("div",{className:"mt-1 text-xs text-center text-amber-600",children:"Please add at least one machine"})]})]})]})]})]})]}),S.show&&o.jsx(ht,{title:S.title,description:S.description,variant:S.variant,isVisible:S.show,onClose:()=>N({show:!1,title:""})})]})}function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function Hn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ze(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ut(e){Ze(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||id(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Sw(e,t){Ze(2,arguments);var n=ut(e),s=Hn(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Rk(e,t){Ze(2,arguments);var n=ut(e).getTime(),s=Hn(t);return new Date(n+s)}var y8=36e5;function Ik(e,t){Ze(2,arguments);var n=Hn(t);return Rk(e,n*y8)}var v8={};function Pa(){return v8}function b8(e,t){var n,s,r,i,a,l,c,u;Ze(1,arguments);var d=Pa(),h=Hn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ut(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function w8(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Cw(e){Ze(1,arguments);var t=ut(e);return t.setHours(0,0,0,0),t}function j8(e,t){Ze(2,arguments);var n=Cw(e),s=Cw(t);return n.getTime()===s.getTime()}function N8(e){return Ze(1,arguments),e instanceof Date||id(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function S8(e){if(Ze(1,arguments),!N8(e)&&typeof e!="number")return!1;var t=ut(e);return!isNaN(Number(t))}function C8(e,t){var n;Ze(1,arguments);var s=e||{},r=ut(s.start),i=ut(s.end),a=i.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var l=[],c=r;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=a;)l.push(ut(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function k8(e,t){var n,s,r,i,a,l,c,u;Ze(1,arguments);var d=Pa(),h=Hn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ut(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function E8(e,t){Ze(2,arguments);var n=Hn(t);return Rk(e,-n)}var D8=864e5;function T8(e){Ze(1,arguments);var t=ut(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),r=n-s;return Math.floor(r/D8)+1}function ad(e){Ze(1,arguments);var t=1,n=ut(e),s=n.getUTCDay(),r=(s<t?7:0)+s-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function Ok(e){Ze(1,arguments);var t=ut(e),n=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var r=ad(s),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=ad(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function P8(e){Ze(1,arguments);var t=Ok(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var s=ad(n);return s}var _8=6048e5;function A8(e){Ze(1,arguments);var t=ut(e),n=ad(t).getTime()-P8(t).getTime();return Math.round(n/_8)+1}function od(e,t){var n,s,r,i,a,l,c,u;Ze(1,arguments);var d=Pa(),h=Hn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ut(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Lk(e,t){var n,s,r,i,a,l,c,u;Ze(1,arguments);var d=ut(e),h=d.getUTCFullYear(),f=Pa(),m=Hn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var g=od(p,t),v=new Date(0);v.setUTCFullYear(h,0,m),v.setUTCHours(0,0,0,0);var b=od(v,t);return d.getTime()>=g.getTime()?h+1:d.getTime()>=b.getTime()?h:h-1}function M8(e,t){var n,s,r,i,a,l,c,u;Ze(1,arguments);var d=Pa(),h=Hn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=Lk(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=od(m,t);return p}var R8=6048e5;function I8(e,t){Ze(1,arguments);var n=ut(e),s=od(n,t).getTime()-M8(n,t).getTime();return Math.round(s/R8)+1}function Me(e,t){for(var n=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return n+s}var zs={y:function(t,n){var s=t.getUTCFullYear(),r=s>0?s:1-s;return Me(n==="yy"?r%100:r,n.length)},M:function(t,n){var s=t.getUTCMonth();return n==="M"?String(s+1):Me(s+1,2)},d:function(t,n){return Me(t.getUTCDate(),n.length)},a:function(t,n){var s=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,n){return Me(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Me(t.getUTCHours(),n.length)},m:function(t,n){return Me(t.getUTCMinutes(),n.length)},s:function(t,n){return Me(t.getUTCSeconds(),n.length)},S:function(t,n){var s=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,s-3));return Me(i,n.length)}},Di={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},O8={G:function(t,n,s){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return zs.y(t,n)},Y:function(t,n,s,r){var i=Lk(t,r),a=i>0?i:1-i;if(n==="YY"){var l=a%100;return Me(l,2)}return n==="Yo"?s.ordinalNumber(a,{unit:"year"}):Me(a,n.length)},R:function(t,n){var s=Ok(t);return Me(s,n.length)},u:function(t,n){var s=t.getUTCFullYear();return Me(s,n.length)},Q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Me(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Me(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,s){var r=t.getUTCMonth();switch(n){case"M":case"MM":return zs.M(t,n);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,s){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Me(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,s,r){var i=I8(t,r);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):Me(i,n.length)},I:function(t,n,s){var r=A8(t);return n==="Io"?s.ordinalNumber(r,{unit:"week"}):Me(r,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):zs.d(t,n)},D:function(t,n,s){var r=T8(t);return n==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Me(r,n.length)},E:function(t,n,s){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Me(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Me(a,n.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Me(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,s){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){var r=t.getUTCHours(),i;switch(r===12?i=Di.noon:r===0?i=Di.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){var r=t.getUTCHours(),i;switch(r>=17?i=Di.evening:r>=12?i=Di.afternoon:r>=4?i=Di.morning:i=Di.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return zs.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):zs.H(t,n)},K:function(t,n,s){var r=t.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Me(r,n.length)},k:function(t,n,s){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?s.ordinalNumber(r,{unit:"hour"}):Me(r,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):zs.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):zs.s(t,n)},S:function(t,n){return zs.S(t,n)},X:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Ew(a);case"XXXX":case"XX":return Hr(a);case"XXXXX":case"XXX":default:return Hr(a,":")}},x:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Ew(a);case"xxxx":case"xx":return Hr(a);case"xxxxx":case"xxx":default:return Hr(a,":")}},O:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+kw(a,":");case"OOOO":default:return"GMT"+Hr(a,":")}},z:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+kw(a,":");case"zzzz":default:return"GMT"+Hr(a,":")}},t:function(t,n,s,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return Me(a,n.length)},T:function(t,n,s,r){var i=r._originalDate||t,a=i.getTime();return Me(a,n.length)}};function kw(e,t){var n=e>0?"-":"+",s=Math.abs(e),r=Math.floor(s/60),i=s%60;if(i===0)return n+String(r);var a=t;return n+String(r)+a+Me(i,2)}function Ew(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Me(Math.abs(e)/60,2)}return Hr(e,t)}function Hr(e,t){var n=t||"",s=e>0?"-":"+",r=Math.abs(e),i=Me(Math.floor(r/60),2),a=Me(r%60,2);return s+i+n+a}var Dw=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Fk=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},L8=function(t,n){var s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return Dw(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Dw(r,n)).replace("{{time}}",Fk(i,n))},F8={p:Fk,P:L8},$8=["D","DD"],B8=["YY","YYYY"];function z8(e){return $8.indexOf(e)!==-1}function V8(e){return B8.indexOf(e)!==-1}function Tw(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var U8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},W8=function(t,n,s){var r,i=U8[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function Tf(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,s=e.formats[n]||e.formats[e.defaultWidth];return s}}var q8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},H8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},G8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Y8={date:Tf({formats:q8,defaultWidth:"full"}),time:Tf({formats:H8,defaultWidth:"full"}),dateTime:Tf({formats:G8,defaultWidth:"full"})},Q8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},K8=function(t,n,s,r){return Q8[t]};function to(e){return function(t,n){var s=n!=null&&n.context?String(n.context):"standalone",r;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var X8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},J8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sU=function(t,n){var s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},rU={ordinalNumber:sU,era:to({values:X8,defaultWidth:"wide"}),quarter:to({values:J8,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:to({values:Z8,defaultWidth:"wide"}),day:to({values:eU,defaultWidth:"wide"}),dayPeriod:to({values:tU,defaultWidth:"wide",formattingValues:nU,defaultFormattingWidth:"wide"})};function no(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var a=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?aU(l,function(h){return h.test(a)}):iU(l,function(h){return h.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function iU(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function aU(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function oU(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var r=s[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(r.length);return{value:a,rest:l}}}var lU=/^(\d+)(th|st|nd|rd)?/i,cU=/\d+/i,uU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dU={any:[/^b/i,/^(a|c)/i]},hU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fU={any:[/1/i,/2/i,/3/i,/4/i]},mU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bU={ordinalNumber:oU({matchPattern:lU,parsePattern:cU,valueCallback:function(t){return parseInt(t,10)}}),era:no({matchPatterns:uU,defaultMatchWidth:"wide",parsePatterns:dU,defaultParseWidth:"any"}),quarter:no({matchPatterns:hU,defaultMatchWidth:"wide",parsePatterns:fU,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:no({matchPatterns:mU,defaultMatchWidth:"wide",parsePatterns:pU,defaultParseWidth:"any"}),day:no({matchPatterns:gU,defaultMatchWidth:"wide",parsePatterns:xU,defaultParseWidth:"any"}),dayPeriod:no({matchPatterns:yU,defaultMatchWidth:"any",parsePatterns:vU,defaultParseWidth:"any"})},wU={code:"en-US",formatDistance:W8,formatLong:Y8,formatRelative:K8,localize:rU,match:bU,options:{weekStartsOn:0,firstWeekContainsDate:1}},jU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,SU=/^'([^]*?)'?$/,CU=/''/g,kU=/[a-zA-Z]/;function xs(e,t,n){var s,r,i,a,l,c,u,d,h,f,m,p,g,v;Ze(2,arguments);var b=String(t),y=Pa(),w=(s=(r=void 0)!==null&&r!==void 0?r:y.locale)!==null&&s!==void 0?s:wU,S=Hn((i=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:y.firstWeekContainsDate)!==null&&a!==void 0?a:(u=y.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Hn((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:y.weekStartsOn)!==null&&f!==void 0?f:(g=y.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&h!==void 0?h:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var j=ut(e);if(!S8(j))throw new RangeError("Invalid time value");var k=w8(j),C=E8(j,k),P={firstWeekContainsDate:S,weekStartsOn:N,locale:w,_originalDate:j},T=b.match(NU).map(function(O){var L=O[0];if(L==="p"||L==="P"){var F=F8[L];return F(O,w.formatLong)}return O}).join("").match(jU).map(function(O){if(O==="''")return"'";var L=O[0];if(L==="'")return EU(O);var F=O8[L];if(F)return V8(O)&&Tw(O,t,String(e)),z8(O)&&Tw(O,t,String(e)),F(C,O,w.localize,P);if(L.match(kU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+L+"`");return O}).join("");return T}function EU(e){var t=e.match(SU);return t?t[1].replace(CU,"'"):e}function DU(e,t){Ze(2,arguments);var n=ut(e).getTime(),s=ut(t.start).getTime(),r=ut(t.end).getTime();if(!(s<=r))throw new RangeError("Invalid interval");return n>=s&&n<=r}const Pw=Array.from({length:15},(e,t)=>Ik(new Date().setHours(6,0,0,0),t));function TU(){const{user:e}=Ge(),[t,n]=x.useState("week"),[s,r]=x.useState(new Date),[i,a]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,v]=x.useState(!1),[b,y]=x.useState(null),[w,S]=x.useState(null),[N,j]=x.useState(null),[k,C]=x.useState([]),[P,T]=x.useState(!1),O=Os(),L=Mn(),[F,_]=x.useState({show:!1,title:""}),[B,W]=x.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),[I,A]=x.useState("");x.useEffect(()=>{R();const M=new URLSearchParams(O.search),G=M.get("dealId"),Q=M.get("action"),se=M.get("customerName");if(G&&Q==="schedule"){if(S(G),se){const E=decodeURIComponent(se);j(E),_({show:!0,title:`Deal won with ${E}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}V(G),L("/jobs",{replace:!0})}},[O]),x.useEffect(()=>{B.operatorId&&B.startDate&&B.endDate&&(ge().some(Q=>Q.id===B.operatorId)||W(Q=>({...Q,operatorId:""})))},[B.startDate,B.endDate,i]);const R=async()=>{try{const[M,G,Q,se,E]=await Promise.all([Gd(),r2(),Ol(),Il(),Yd()]);a(M),c(G),d(Q);const $=E.filter(Y=>Y.stage==="won").map(Y=>Y.leadId),z=se.filter(Y=>Y.status==="converted"&&$.includes(Y.id));if(f(z),w)try{const Y=await cl(w);if(Y){W(ve=>{var he;return{...ve,leadId:Y.leadId||"",location:((he=Y.customer)==null?void 0:he.address)||"",notes:Y.description||""}});const q=new Date,xe=new Date;xe.setDate(q.getDate()+7),W(ve=>({...ve,startDate:q.toISOString().slice(0,16),endDate:xe.toISOString().slice(0,16)}))}}catch(Y){console.error("Error fetching deal data:",Y)}}catch(M){console.error("Error fetching data:",M),re("Error fetching data","error")}finally{p(!1)}},V=async M=>{var G,Q,se,E,D;try{const $=await cl(M);if($){const z=new Date,Y=new Date;Y.setDate(z.getDate()+7);const q=z.toISOString().slice(0,16),xe=Y.toISOString().slice(0,16);S(M),(G=$.customer)!=null&&G.name&&j($.customer.name),T(!0);try{const ve=await Zu($.leadId);if(ve&&ve.length>0){const he=[];ve.forEach(Pe=>{if(Pe.selectedEquipment&&Pe.selectedEquipment.equipmentId){const tt=l.find(ke=>ke.id===Pe.selectedEquipment.equipmentId);tt&&!he.some(ke=>ke.id===tt.id)&&he.push(tt)}Pe.selectedMachines&&Pe.selectedMachines.length>0&&Pe.selectedMachines.forEach(tt=>{if(tt.equipmentId){const ke=l.find(Yn=>Yn.id===tt.equipmentId);ke&&!he.some(Yn=>Yn.id===ke.id)&&he.push(ke)}})}),C(he),he.length>0?W({leadId:$.leadId,equipmentId:he[0].id,operatorId:"",startDate:q,endDate:xe,location:((Q=$.customer)==null?void 0:Q.address)||"",notes:$.description||""}):W({leadId:$.leadId,equipmentId:"",operatorId:"",startDate:q,endDate:xe,location:((se=$.customer)==null?void 0:se.address)||"",notes:$.description||""})}else W({leadId:$.leadId,equipmentId:"",operatorId:"",startDate:q,endDate:xe,location:((E=$.customer)==null?void 0:E.address)||"",notes:$.description||""})}catch(ve){console.error("Error fetching quotations:",ve),W({leadId:$.leadId,equipmentId:"",operatorId:"",startDate:q,endDate:xe,location:((D=$.customer)==null?void 0:D.address)||"",notes:$.description||""})}finally{T(!1)}v(!0)}else re("Deal not found","error")}catch($){console.error("Error fetching deal:",$),re("Error fetching deal","error")}},H=async()=>{try{if(!B.leadId||!B.equipmentId||!B.operatorId||!B.startDate||!B.endDate||!B.location){re("Please fill in all required fields","error");return}let M="";const G=h.find(Q=>Q.id===B.leadId);if(G)M=G.customerName;else if(N)M=N;else{re("Customer information is missing","error");return}await n2({title:"Scheduled Job",leadId:B.leadId,customerId:(G==null?void 0:G.customerId)||"",customerName:M,equipmentIds:[B.equipmentId],operatorIds:[B.operatorId],scheduledStartDate:B.startDate,scheduledEndDate:B.endDate,location:B.location,status:"scheduled",notes:B.notes,dealId:w||void 0,createdBy:(e==null?void 0:e.id)||""}),await R(),v(!1),J(),S(null),j(null),re("Job scheduled successfully","success")}catch(M){console.error("Error creating job:",M),re("Error creating job","error")}},J=()=>{W({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),C([])},re=(M,G="success")=>{_({show:!0,title:M,variant:G}),setTimeout(()=>_({show:!1,title:""}),3e3)},oe=(M,G,Q,se)=>i.filter(D=>{const $=new Date(D.scheduledStartDate),z=new Date(D.scheduledEndDate),Y=new Date(Q),q=new Date(se);return(D.equipmentIds.includes(M)||D.operatorIds.includes(G))&&D.status!=="completed"&&D.status!=="cancelled"&&(Y>=$&&Y<z||q>$&&q<=z||Y<=$&&q>=z)}),ge=()=>{if(!B.startDate||!B.endDate)return u;const M=new Date(B.startDate),G=new Date(B.endDate);return u.filter(Q=>i.filter(E=>{const D=new Date(E.scheduledStartDate),$=new Date(E.scheduledEndDate);return E.operatorIds.includes(Q.id)&&E.status!=="completed"&&E.status!=="cancelled"&&(M>=D&&M<$||G>D&&G<=$||M<=D&&G>=$)}).length===0)},we=()=>{const M=b8(s,{weekStartsOn:1}),G=k8(s,{weekStartsOn:1}),Q=C8({start:M,end:G});return o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[o.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[o.jsx("div",{className:"h-12"}),Pw.map((se,E)=>o.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-900",children:xs(se,"h:mm a")},E))]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[Q.map((se,E)=>o.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-gray-900",children:xs(se,"EEE")}),o.jsx("div",{className:"text-xs text-gray-700",children:xs(se,"MMM d")})]})},E)),Pw.map((se,E)=>o.jsx(ee.Fragment,{children:Q.map((D,$)=>{const z=new Date(D.setHours(se.getHours(),se.getMinutes())),Y=i.filter(q=>{const xe=new Date(q.scheduledStartDate),ve=new Date(q.scheduledEndDate);return(!I||q.operatorIds.includes(I))&&j8(z,xe)&&DU(z,{start:xe,end:ve})});return o.jsx("div",{className:`border-b border-r border-gray-100 relative ${E===0?"border-t":""} ${$===0?"border-l":""}`,style:{minHeight:`${Math.max(80,Y.length*44+8)}px`},onClick:()=>{v(!0),W(q=>({...q,startDate:z.toISOString().slice(0,16),endDate:Ik(z,2).toISOString().slice(0,16)}))},children:Y.map((q,xe)=>o.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:`${4+xe*44}px`,minHeight:"40px",zIndex:10+xe,right:xe>0?`${xe*8}px`:"4px"},onClick:ve=>{ve.stopPropagation(),y(q)},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-sm truncate",children:q.customerName}),o.jsx(Fl,{status:q.status,className:"ml-2"})]}),o.jsxs("div",{className:"text-xs text-black mt-1",children:[xs(new Date(q.scheduledStartDate),"h:mm a")," - ",xs(new Date(q.scheduledEndDate),"h:mm a")]})]},q.id))},`${E}-${$}`)})},E))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-900",children:"Loading job scheduling data..."})]}):o.jsxs("div",{className:"space-y-6 font-sans",children:[o.jsxs("div",{className:"flex flex-wrap items-center mb-2 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(U,{variant:"outline",size:"sm",onClick:()=>r(M=>Sw(M,-7)),children:o.jsx(wA,{className:"h-4 w-4"})}),o.jsx("h2",{className:"text-lg font-semibold font-sans",children:xs(s,"MMMM yyyy")}),o.jsx(U,{variant:"outline",size:"sm",onClick:()=>r(M=>Sw(M,7)),children:o.jsx(jA,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end min-w-0",children:[o.jsx(Se,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:M=>n(M),className:"w-24 min-w-0"}),o.jsx(Se,{label:"Operator",options:[{value:"",label:"All Operators"},...u.map(M=>({value:M.id,label:M.name}))],value:I,onChange:A,className:"w-32 min-w-0"}),o.jsx(U,{size:"lg",className:"ml-2 font-bold px-6 py-2",onClick:()=>{h.length===0?_({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):v(!0)},leftIcon:o.jsx(os,{size:20}),children:"New Job"})]})]}),o.jsx(ne,{children:o.jsxs(ie,{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Schedule"})}),m?o.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-sans",children:"No Won Deals Yet"}),o.jsx("p",{className:"text-gray-700 font-sans",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):we()]})}),o.jsxs(Rt,{isOpen:g,onClose:()=>{v(!1),J()},title:w?`Schedule Job for Won Deal: ${N||""}`:"Schedule Job for Won Deal",size:"lg",children:[o.jsxs("div",{className:"space-y-6",children:[w&&o.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[o.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),o.jsxs("p",{className:"text-green-700",children:[o.jsx("span",{className:"font-medium",children:"Customer:"})," ",N||"Unknown customer"]}),o.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),o.jsx(Se,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...Array.isArray(h)?h.map(M=>({value:M.id,label:`${M.customerName} - Won Deal`})):[]],value:B.leadId,onChange:M=>{W(G=>({...G,leadId:M})),M?(async()=>{T(!0);try{const Q=await Zu(M);if(Q&&Q.length>0){const se=[];Q.forEach(E=>{if(E.selectedEquipment&&E.selectedEquipment.equipmentId){const D=l.find($=>$.id===E.selectedEquipment.equipmentId);D&&!se.some($=>$.id===D.id)&&se.push(D)}E.selectedMachines&&E.selectedMachines.length>0&&E.selectedMachines.forEach(D=>{if(D.equipmentId){const $=l.find(z=>z.id===D.equipmentId);$&&!se.some(z=>z.id===$.id)&&se.push($)}})}),C(se),se.length>0&&W(E=>({...E,equipmentId:se[0].id}))}}catch(Q){console.error("Error loading equipment for lead:",Q)}finally{T(!1)}})():(C([]),W(G=>({...G,equipmentId:""})))},required:!0,className:"text-black"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Se,{label:"Equipment",options:k.length>0&&w?[{value:"",label:"-- Select deal-specific equipment --"},...Array.isArray(k)?k.map(M=>({value:M.id,label:`${M.name} (From Deal)`})):[]]:[{value:"",label:"-- Select equipment --"},...Array.isArray(l)?l.map(M=>({value:M.id,label:M.name})):[]],value:B.equipmentId,onChange:M=>W(G=>({...G,equipmentId:M})),required:!0,className:"text-black"}),P?o.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):k.length>0?o.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[k.length," equipment item",k.length!==1?"s":""," from deal quotation",k.length!==1?"s":""]}):B.leadId?o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),o.jsx(Se,{label:"Operator",options:[{value:"",label:"-- Select operator --"},...ge().map(M=>({value:M.id,label:M.name}))],value:B.operatorId,onChange:M=>W(G=>({...G,operatorId:M})),required:!0,className:"text-black"}),B.startDate&&B.endDate&&o.jsx("p",{className:"mt-1 text-xs text-gray-600",children:(()=>{const M=ge(),G=u.length,Q=G-M.length;return Q===0?`All ${G} operators are available`:M.length===0?"No operators available for this time slot":`${M.length} of ${G} operators available (${Q} busy)`})()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Ve,{type:"datetime-local",label:"Start Date & Time",value:B.startDate,onChange:M=>W(G=>({...G,startDate:M.target.value})),required:!0,className:"text-black"}),o.jsx(Ve,{type:"datetime-local",label:"End Date & Time",value:B.endDate,onChange:M=>W(G=>({...G,endDate:M.target.value})),required:!0,className:"text-black"})]}),o.jsx(Ve,{label:"Location",value:B.location,onChange:M=>W(G=>({...G,location:M.target.value})),required:!0,className:"text-black"}),o.jsx(ls,{label:"Notes",value:B.notes,onChange:M=>W(G=>({...G,notes:M.target.value})),rows:4,className:"text-black"}),B.equipmentId&&B.operatorId&&B.startDate&&B.endDate&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[o.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const M=oe(B.equipmentId,B.operatorId,B.startDate,B.endDate);return M.length>0?o.jsxs("div",{className:"text-error-600",children:[o.jsx("p",{children:"Conflicts found:"}),o.jsx("ul",{className:"list-disc list-inside text-sm",children:M.map(G=>o.jsxs("li",{children:[G.customerName," - ",xs(new Date(G.scheduledStartDate),"MMM d, h:mm a")]},G.id))})]}):o.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(U,{variant:"outline",onClick:()=>{v(!1),J()},children:"Cancel"}),o.jsx(U,{onClick:H,variant:"accent",children:"Schedule Job"})]})]}),o.jsx(Rt,{isOpen:!!b,onClose:()=>y(null),title:"Job Details",size:"lg",children:b&&o.jsx(PU,{selectedJob:b})}),F.show&&o.jsx(ht,{title:F.title,description:F.description,variant:F.variant,isVisible:F.show,duration:3e3,onClose:()=>_({show:!1,title:""})})]})}function PU({selectedJob:e}){const[t,n]=ee.useState(""),[s,r]=ee.useState("");return ee.useEffect(()=>{async function i(){try{const a=await Wv.getJobEquipment(e.id);if(!a||a.length===0){n("No equipment assigned");return}const l=[];for(const c of a){const u=await s2(c.id);u&&u.name&&l.push(u.name)}n(l.length>0?l.join(", "):"No equipment assigned")}catch(a){console.error("Error fetching equipment names:",a),n("Error loading equipment")}}i()},[e.id]),ee.useEffect(()=>{async function i(){try{const a=await Wv.getJobOperators(e.id);if(!a||a.length===0){r("No operator assigned");return}const l=[];for(const c of a){const d=(await Ol()).find(h=>h.id===c.id);d&&d.name&&l.push(d.name)}r(l.length>0?l.join(", "):"No operator assigned")}catch(a){console.error("Error fetching operator names:",a),r("Error loading operators")}}i()},[e.id]),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Customer"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.customerName,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Status"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.status,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Equipment"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:t,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Operator"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:s,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Start Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:xs(new Date(e.scheduledStartDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"End Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:xs(new Date(e.scheduledEndDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Location"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.location,disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Notes"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.notes||"No notes",disabled:!0,readOnly:!0})]})]})})}function _U(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(!0),[c,u]=x.useState(null);x.useEffect(()=>{d()},[]);const d=async()=>{try{l(!0),u(null);const[h,f,m]=await Promise.all([Zc.getAllJobs(),Zc.getAllEquipment(),Zc.getAllOperators()]);t(h),s(f),i(m)}catch(h){u(h instanceof Error?h.message:"An error occurred"),console.error("Error loading data:",h)}finally{l(!1)}};return a?o.jsx("div",{className:"p-4",children:"Loading job data..."}):c?o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",c]}),o.jsx(U,{onClick:d,children:"Try Again"})]}):o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Job Scheduling System"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx(ne,{children:o.jsxs(ie,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Jobs"}),o.jsx("p",{className:"text-2xl font-bold",children:e.length})]})}),o.jsx(ne,{children:o.jsxs(ie,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Equipment"}),o.jsx("p",{className:"text-2xl font-bold",children:n.length})]})}),o.jsx(ne,{children:o.jsxs(ie,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Operators"}),o.jsx("p",{className:"text-2xl font-bold",children:r.length})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsx(ne,{children:o.jsxs(ie,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Recent Jobs"}),e.length===0?o.jsx("p",{className:"text-gray-500",children:"No jobs found."}):o.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.title}),o.jsx("p",{className:"text-sm text-gray-600",children:h.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:h.location})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="in_progress"?"bg-blue-100 text-blue-800":h.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status})]},h.id))})]})}),o.jsx(ne,{children:o.jsxs(ie,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Equipment"}),n.length===0?o.jsx("p",{className:"text-gray-500",children:"No equipment found."}):o.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.type})]}),o.jsxs("p",{className:"text-sm font-medium",children:["$",h.baseRate,"/day"]})]},h.id))})]})}),o.jsx(ne,{children:o.jsxs(ie,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Operators"}),r.length===0?o.jsx("p",{className:"text-gray-500",children:"No operators found."}):o.jsx("div",{className:"space-y-2",children:r.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.specialization})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.availability==="available"?"bg-green-100 text-green-800":h.availability==="assigned"?"bg-blue-100 text-blue-800":h.availability==="on_leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.availability||"available"})]},h.id))})]})})]})]})}function AU(){const[e,t]=x.useState("loading"),[n,s]=x.useState("");x.useEffect(()=>{r()},[]);const r=async()=>{try{t("loading"),s("");const i=await fetch("http://localhost:3001/api/health");i.ok?t("success"):(t("error"),s(`API returned status ${i.status}`))}catch(i){t("error"),s(i instanceof Error?i.message:"Unknown error")}};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Job Scheduling System Test"}),o.jsx("p",{className:"text-gray-600",children:"Testing the complete job scheduling implementation"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(ne,{children:o.jsx(ie,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"API Connection Status"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[e==="loading"&&"Testing API connection...",e==="success"&&"API connection successful",e==="error"&&`API connection failed: ${n}`]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${e==="loading"?"bg-yellow-500":e==="success"?"bg-green-500":"bg-red-500"}`}),o.jsx(U,{onClick:r,size:"sm",children:"Test Again"})]})]})})})}),e==="success"&&o.jsx(_U,{}),e==="error"&&o.jsx(ne,{children:o.jsx(ie,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"Connection Error"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Please make sure the backend server is running on port 3001"}),o.jsx(U,{onClick:r,children:"Retry Connection"})]})})})]})}const MU=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function RU(){const{user:e}=Ge(),[t,n]=x.useState(""),[s,r]=x.useState(""),[i,a]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(""),[g,v]=x.useState(!1),[b,y]=x.useState(null),[w,S]=x.useState([]),[N,j]=x.useState(!0),[k,C]=x.useState({show:!1,title:""}),P=x.useRef(null);x.useEffect(()=>{(async()=>{try{const V=await WC();S(V),j(!1)}catch(V){console.error("Error fetching site assessments:",V),I("Error loading site assessments","error"),j(!1)}})()},[]);const T=R=>{const J=Array.from(R.target.files||[]).filter(re=>{const oe=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(re.type),ge=re.size<=10*1024*1024;return!oe||!ge?(I("Invalid file",`${re.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(re=>({id:Math.random().toString(36).substring(2,9),file:re,preview:URL.createObjectURL(re),annotations:[]}));d(re=>[...re,...J])},O=R=>{R.preventDefault();const V=Array.from(R.dataTransfer.files),H=P.current;if(H){const J=new DataTransfer;V.forEach(oe=>J.items.add(oe)),H.files=J.files;const re=new Event("change",{bubbles:!0});H.dispatchEvent(re)}},L=R=>{R.preventDefault()},F=R=>{d(V=>{const H=V.filter(J=>J.id!==R);return V.forEach(J=>{J.id===R&&URL.revokeObjectURL(J.preview)}),H})},_=R=>{f(V=>V.find(J=>J.id===R.id)?V.filter(J=>J.id!==R.id):[...V,{...R}])},B=(R,V)=>{f(H=>H.map(J=>J.id===R?{...J,notes:V}:J))},W=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){I("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(R=>setTimeout(R,1e3)),I("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{I("Error sending link","Please try again later","error")}},I=(R,V,H="success")=>{C({show:!0,title:R,description:V,variant:H}),setTimeout(()=>C({show:!1,title:""}),3e3)},A=async()=>{if(!e){I("Error","You need to be logged in to submit a site assessment","error");return}if(!t){I("Missing title","Please provide a title for the site assessment","warning");return}if(!i){I("Missing location","Please provide the site location","warning");return}if(u.length===0){I("Missing files","Please upload at least one site photo or video","warning");return}try{const R=u.filter(ge=>ge.file.type.startsWith("image/")).map(ge=>`mock-url-${ge.id}`),V=u.filter(ge=>ge.file.type.startsWith("video/")).map(ge=>`mock-url-${ge.id}`),H=h.map(ge=>ge.id),J=h.filter(ge=>ge.notes).map(ge=>`${ge.label}: ${ge.notes}`).join(`
`),re={title:t,description:s,customerId:l||"unknown",location:i,constraints:H,notes:J,images:R,videos:V,createdBy:e.id},oe=await qC(re);S(ge=>[...ge,oe]),n(""),r(""),c(""),a(""),d([]),f([]),p(""),I("Site assessment submitted successfully",void 0,"success")}catch(R){console.error("Error submitting site assessment:",R),I("Error submitting assessment","Please try again later","error")}};return ee.useEffect(()=>()=>{u.forEach(R=>{URL.revokeObjectURL(R.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Upload Media"})}),o.jsxs(ie,{children:[o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:O,onDragOver:L,children:[o.jsx("input",{ref:P,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:T}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(aS,{className:"h-12 w-12 text-gray-400"})}),o.jsxs("div",{children:[o.jsx(U,{variant:"outline",onClick:()=>{var R;return(R=P.current)==null?void 0:R.click()},children:"Choose Files"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&o.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(R=>o.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[R.file.type.startsWith("image/")?o.jsx("img",{src:R.preview,alt:"Preview",className:"w-full h-32 object-cover"}):o.jsx("video",{src:R.preview,className:"w-full h-32 object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[R.file.type.startsWith("image/")&&o.jsx(U,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{y(R),v(!0)},children:o.jsx(A0,{size:16})}),o.jsx(U,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>F(R.id),children:o.jsx(jr,{size:16})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:R.file.name})]},R.id))})]})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Site Constraints"})}),o.jsx(ie,{children:o.jsx("div",{className:"space-y-4",children:MU.map(R=>{var V;return o.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(H=>H.id===R.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(H=>H.id===R.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>_(R),children:h.some(H=>H.id===R.id)&&o.jsx(bA,{className:"text-white h-4 w-4"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"font-medium text-gray-900",children:R.label}),R.description&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:R.description}),h.some(H=>H.id===R.id)&&o.jsx(ls,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((V=h.find(H=>H.id===R.id))==null?void 0:V.notes)||"",onChange:H=>B(R.id,H.target.value),rows:2})]})]})},R.id)})})})]})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Remote Site Assessment"})}),o.jsx(ie,{children:o.jsxs("div",{className:"max-w-md",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ve,{type:"tel",placeholder:"Enter phone number",value:m,onChange:R=>p(R.target.value)}),o.jsx(U,{onClick:W,leftIcon:o.jsx(sl,{size:16}),children:"Send Link"})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Site Details"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx(Ve,{value:t,onChange:R=>n(R.target.value),placeholder:"Site assessment title",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),o.jsx(Ve,{value:l,onChange:R=>c(R.target.value),placeholder:"Enter customer ID if available"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),o.jsx(Ve,{value:i,onChange:R=>a(R.target.value),placeholder:"Enter site address/location",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx(ls,{value:s,onChange:R=>r(R.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsxs(U,{onClick:A,className:"flex items-center gap-2",children:[o.jsx(sl,{size:16}),"Submit Assessment"]})}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Assessment Summary"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(R=>o.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[R.file.type.startsWith("image/")?o.jsx(yA,{size:14}):o.jsx(A0,{size:14}),o.jsx("span",{className:"truncate max-w-[200px]",children:R.file.name})]},R.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?o.jsx("div",{className:"space-y-3",children:h.map(R=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[o.jsx(iS,{size:14}),R.label]}),R.notes&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:R.notes})]},R.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),o.jsx(ux,{children:g&&b&&o.jsx(Ks.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:o.jsxs(Ks.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{v(!1),y(null)},children:o.jsx(Fd,{size:20})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:b.preview,alt:"Annotation",className:"max-w-full h-auto"})}),o.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{v(!1),y(null)},children:"Cancel"}),o.jsx(U,{onClick:()=>{v(!1),y(null),I("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),k.show&&o.jsx(ht,{title:k.title,description:k.description,variant:k.variant,isVisible:k.show,onClose:()=>C({show:!1,title:""})})]})}const IU=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function OU(){const{id:e}=LN(),{user:t}=Ge(),[n,s]=x.useState(null),[r,i]=x.useState(!0),[a,l]=x.useState(IU),[c,u]=x.useState(""),[d,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[v,b]=x.useState(!1),[y,w]=x.useState(null),[S,N]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&j()},[e]);const j=async()=>{try{const L=await _C(e);s(L),w({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch(L){console.error("Error fetching job details:",L),O("Error fetching job details","error")}finally{i(!1)}},k=L=>{l(F=>F.map(_=>_.id===L?{..._,checked:!_.checked}:_))},C=async()=>{try{await new Promise(L=>setTimeout(L,1e3)),O("Feedback request sent successfully","success")}catch{O("Error sending feedback request","error")}},P=async()=>{if(!f||!p){O("Please fill in all discount request fields","error");return}try{await new Promise(L=>setTimeout(L,1e3)),O("Discount request submitted for approval","success")}catch{O("Error submitting discount request","error")}},T=()=>{O("Summary downloaded successfully","success")},O=(L,F="success")=>{N({show:!0,title:L,variant:F}),setTimeout(()=>N({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):r?o.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),o.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),o.jsx(U,{variant:"outline",leftIcon:o.jsx(Fg,{size:16}),onClick:T,children:"Download Summary"})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Job Details"})}),o.jsx(ie,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),o.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(Bg,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:n.location})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(ln,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(la,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Mike Operator"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),o.jsxs("div",{className:"mt-1 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(as,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:new Date(n.startDate).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nn,{className:"h-5 w-5 text-gray-400"}),o.jsxs("span",{children:[new Date(n.startDate).toLocaleTimeString()," - ",new Date(n.endDate).toLocaleTimeString()]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Safety Observations"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(L=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${L.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>k(L.id),children:L.checked&&o.jsx(pr,{className:"text-white h-4 w-4"})}),o.jsx("span",{className:"text-gray-700",children:L.label})]},L.id))}),o.jsx(ls,{label:"Safety Notes",value:c,onChange:L=>u(L.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(pe,{children:"Customer Feedback"}),o.jsx(U,{variant:"outline",leftIcon:o.jsx(sl,{size:16}),onClick:C,children:"Request Feedback"})]})}),o.jsx(ie,{children:y?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex",children:[1,2,3,4,5].map(L=>o.jsx("svg",{className:`h-5 w-5 ${L<=y.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},L))}),o.jsx("span",{className:"text-lg font-medium",children:y.rating})]}),o.jsx("p",{className:"text-gray-600",children:y.comments}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(y.submittedAt).toLocaleDateString()]})]}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Discount Request"})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"requestDiscount",checked:d,onChange:L=>h(L.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&o.jsxs("div",{className:"space-y-4",children:[o.jsx(ls,{label:"Reason for Discount",value:f,onChange:L=>m(L.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),o.jsx("div",{className:"w-48",children:o.jsx(Ve,{type:"number",label:"Discount Percentage",value:p,onChange:L=>g(L.target.value),min:"0",max:"100",placeholder:"Enter %"})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(U,{onClick:P,children:"Submit for Approval"})})]})]})})]}),S.show&&o.jsx(ht,{title:S.title,variant:S.variant,isVisible:S.show,onClose:()=>N({show:!1,title:""})})]}):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const LU=async()=>{try{return await In.get("/equipment")}catch(e){return console.error("Failed to fetch equipment:",e),[]}},FU=async e=>{try{return await In.post("/equipment",e)}catch(t){throw console.error("Failed to create equipment:",t),new Error(t.message||"Failed to create equipment")}},$U=async(e,t)=>{try{return await In.put(`/equipment/${e}`,t)}catch(n){return console.error(`Failed to update equipment ${e}:`,n),null}},BU=async e=>{try{return await In.delete(`/equipment/${e}`),!0}catch(t){return console.error(`Failed to delete equipment ${e}:`,t),!1}},Pf=e=>{var t,n,s,r;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((s=e.baseRates)==null?void 0:s.monthly)||0,yearly:((r=e.baseRates)==null?void 0:r.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},_f=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],Af=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],zU=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function VU(){const{user:e}=Ge(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,a]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!0),[m,p]=x.useState(!1),[g,v]=x.useState(!1),[b,y]=x.useState(null),[w,S]=x.useState({show:!1,title:""}),[N,j]=x.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"});x.useEffect(()=>{k()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const k=async()=>{try{let _=await LU();_=_.map(Pf),n(_),console.log("Successfully connected to equipment API"),f(!1)}catch(_){console.error("Error fetching equipment:",_),F("Error fetching equipment","error"),f(!1)}},C=()=>{let _=[...t];i&&(_=_.filter(B=>B.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(_=_.filter(B=>B.status===l)),u!=="all"&&(_=_.filter(B=>B.category===u)),r(_)},P=()=>{if(!N.name||!N.manufacturingDate||!N.registrationDate||!N.maxLiftingCapacity||!N.unladenWeight||!N.runningCostPerKm||!N.baseRates.micro||!N.baseRates.small||!N.baseRates.monthly||!N.baseRates.yearly)return F("Please fill in all required fields","error"),!1;const _=/^\d{4}-\d{2}$/;return!_.test(N.manufacturingDate)||!_.test(N.registrationDate)?(F("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(N.maxLiftingCapacity))||isNaN(Number(N.unladenWeight))||isNaN(Number(N.runningCostPerKm))||isNaN(Number(N.baseRates.micro))||isNaN(Number(N.baseRates.small))||isNaN(Number(N.baseRates.monthly))||isNaN(Number(N.baseRates.yearly))?(F("Please enter valid numbers for numeric fields","error"),!1):!0},T=async _=>{if(_.preventDefault(),!!P())try{const B={...N,equipmentId:(b==null?void 0:b.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(N.maxLiftingCapacity),unladenWeight:Number(N.unladenWeight),baseRates:{micro:Number(N.baseRates.micro),small:Number(N.baseRates.small),monthly:Number(N.baseRates.monthly),yearly:Number(N.baseRates.yearly)},runningCost:Number(N.runningCostPerKm),runningCostPerKm:Number(N.runningCostPerKm)};if(console.log("Form submission data:",B),b){console.log(`Updating equipment ${b.id}`,B);let W=await $U(b.id,B);W?(console.log("Update successful:",W),W=Pf(W),n(I=>I.map(A=>A.id===b.id?W:A)),F("Equipment updated successfully","success")):F("Failed to update equipment","error")}else{console.log("Creating new equipment",B);let W=await FU(B);W=Pf(W),console.log("Creation successful:",W),n(I=>[...I,W]),F("Equipment added successfully","success")}setTimeout(()=>{k()},500),p(!1),L()}catch(B){console.error("Error saving equipment:",B),F("Error saving equipment","error")}},O=async()=>{if(b)try{await BU(b.id),n(_=>_.filter(B=>B.id!==b.id)),v(!1),y(null),F("Equipment deleted successfully","success")}catch{F("Error deleting equipment","error")}},L=()=>{j({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),y(null)},F=(_,B="success")=>{S({show:!0,title:_,variant:B}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(de,{placeholder:"Search equipment...",value:i,onChange:_=>a(_.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(Se,{value:u,onChange:_=>d(_),options:[{value:"all",label:"All Categories"},...Af],className:"w-full sm:w-48"}),o.jsx(Se,{value:l,onChange:_=>c(_),options:[{value:"all",label:"All Status"},..._f],className:"w-full sm:w-48"})]})]}),o.jsx(U,{onClick:()=>{L(),p(!0)},leftIcon:o.jsx(os,{className:"w-4 h-4"}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Equipment"})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Equipment Inventory"})}),o.jsx(ie,{children:h?o.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sm:px-6",children:"Rates"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(_=>{var B,W;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.name}),o.jsx("div",{className:"text-sm text-gray-500",children:_.equipmentId}),_.description&&o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:_.description})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(ll,{variant:"secondary",className:"w-full justify-center",children:(B=Af.find(I=>I.value===_.category))==null?void 0:B.label}),o.jsx(ll,{variant:_.status==="available"?"success":_.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(W=_f.find(I=>I.value===_.status))==null?void 0:W.label})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"text-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(as,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Mfg: ",_.manufacturingDate||"N/A"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qA,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:_.maxLiftingCapacity?`${_.maxLiftingCapacity} tons max lift`:"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:_.unladenWeight?`${_.unladenWeight} tons unladen`:"N/A"})]}),_.registrationDate&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(as,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Reg: ",_.registrationDate]})]})]})}),o.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:o.jsxs("div",{className:"text-sm",children:["                          ",o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),o.jsx("div",{className:"space-y-2.5",children:zU.map(I=>o.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[o.jsx("span",{className:"text-gray-600",children:I.label}),o.jsxs("div",{className:"flex items-baseline gap-1.5",children:[o.jsx("span",{className:"text-gray-400 text-sm",children:"₹"}),o.jsx("span",{className:"text-gray-900 font-medium",children:_.baseRates&&_.baseRates[I.value]!==void 0?De(_.baseRates[I.value]):"N/A"}),o.jsx("span",{className:"text-gray-500 text-sm",children:I.value==="monthly"||I.value==="yearly"?o.jsxs("div",{children:["per",o.jsx("br",{}),"month"]}):"per hour"})]})]},I.value))})]}),"                            ",o.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[o.jsx(ln,{className:"h-4 w-4"}),o.jsx("span",{children:"Running:"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-gray-400",children:"₹"}),o.jsx("span",{className:"text-gray-900",children:_.runningCostPerKm!==void 0?De(_.runningCostPerKm):"N/A"}),o.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{y(_),j({name:_.name||"",category:_.category||"mobile_crane",manufacturingDate:_.manufacturingDate||"",registrationDate:_.registrationDate||"",maxLiftingCapacity:_.maxLiftingCapacity!==void 0?String(_.maxLiftingCapacity):"",unladenWeight:_.unladenWeight!==void 0?String(_.unladenWeight):"",baseRates:{micro:_.baseRates&&_.baseRates.micro!==void 0?String(_.baseRates.micro):"",small:_.baseRates&&_.baseRates.small!==void 0?String(_.baseRates.small):"",monthly:_.baseRates&&_.baseRates.monthly!==void 0?String(_.baseRates.monthly):"",yearly:_.baseRates&&_.baseRates.yearly!==void 0?String(_.baseRates.yearly):""},runningCostPerKm:_.runningCostPerKm!==void 0?String(_.runningCostPerKm):"",description:_.description||"",status:_.status||"available"}),p(!0)},children:o.jsx(ja,{className:"h-4 w-4"})}),o.jsx(U,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{y(_),v(!0)},children:o.jsx(jr,{className:"h-4 w-4"})})]})})]},_.id)})})]})})})]}),o.jsx(Rt,{title:b?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),L()},size:"lg",children:o.jsxs("form",{onSubmit:T,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(de,{label:"Name",value:N.name,onChange:_=>j({...N,name:_.target.value}),required:!0}),o.jsx(de,{label:"Max Lifting Capacity (tons)",type:"number",value:N.maxLiftingCapacity,onChange:_=>j({...N,maxLiftingCapacity:_.target.value}),required:!0}),o.jsx(Se,{label:"Category",value:N.category,onChange:_=>j({...N,category:_}),options:Af,className:"w-full"}),o.jsx(de,{label:"Unladen Weight (tons)",type:"number",value:N.unladenWeight,onChange:_=>j({...N,unladenWeight:_.target.value}),required:!0}),o.jsx(de,{label:"Manufacturing Date (YYYY-MM)",value:N.manufacturingDate,onChange:_=>j({...N,manufacturingDate:_.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(de,{label:"Running Cost (₹/km)",type:"number",value:N.runningCostPerKm,onChange:_=>j({...N,runningCostPerKm:_.target.value}),required:!0}),o.jsx(de,{label:"Registration Date (YYYY-MM)",value:N.registrationDate,onChange:_=>j({...N,registrationDate:_.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(Se,{label:"Status",value:N.status,onChange:_=>j({...N,status:_}),options:_f,className:"w-full"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(de,{label:"Micro Rate (₹ per hour)",type:"number",value:N.baseRates.micro,onChange:_=>j({...N,baseRates:{...N.baseRates,micro:_.target.value}}),required:!0}),o.jsx(de,{label:"Small Rate (₹ per hour)",type:"number",value:N.baseRates.small,onChange:_=>j({...N,baseRates:{...N.baseRates,small:_.target.value}}),required:!0}),o.jsx(de,{label:"Monthly Rate (₹ per month)",type:"number",value:N.baseRates.monthly,onChange:_=>j({...N,baseRates:{...N.baseRates,monthly:_.target.value}}),required:!0}),o.jsx(de,{label:"Yearly Rate (₹ per month)",type:"number",value:N.baseRates.yearly,onChange:_=>j({...N,baseRates:{...N.baseRates,yearly:_.target.value}}),required:!0})]})]}),o.jsx(ls,{label:"Description",value:N.description,onChange:_=>j({...N,description:_.target.value}),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{p(!1),L()},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:b?"Update Equipment":"Add Equipment"})]})]})}),o.jsx(Rt,{title:"Delete Equipment",isOpen:g,onClose:()=>{v(!1),y(null)},children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this equipment? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{v(!1),y(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:O,children:"Delete Equipment"})]})]})}),o.jsx(ht,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const Mf=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],UU=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function WU(){const{user:e}=Ge(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,a]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[g,v]=x.useState(null),[b,y]=x.useState(!0),[w,S]=x.useState({show:!1,title:""}),N=(F,_="success",B)=>{S({show:!0,title:F,variant:_,description:B}),setTimeout(()=>S({show:!1,title:""}),3e3)},[j,k]=x.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});x.useEffect(()=>{(async()=>{try{y(!0);const _=await HC();n(_),y(!1)}catch(_){console.error("Error fetching services:",_),N("Error fetching services","error"),y(!1)}})()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const C=()=>{let F=[...t];i&&(F=F.filter(_=>_.name.toLowerCase().includes(i.toLowerCase())||_.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(F=F.filter(_=>_.type===l)),u!=="all"&&(F=F.filter(_=>u==="active"?_.isActive:!_.isActive)),r(F)},P=async F=>{if(F.preventDefault(),!j.name||!j.type||!j.baseRate||!j.unit){N("Please fill in all required fields","error");return}try{const _={name:j.name,type:j.type,baseRate:parseFloat(j.baseRate),unit:j.unit,description:j.description,isActive:j.isActive};if(g){const B=await YC(g.id,_);n(W=>W.map(I=>I.id===g.id?B:I)),N("Service updated successfully","success")}else{const B=await GC(_);n(W=>[...W,B]),N("Service added successfully","success")}f(!1),O()}catch{N("Error saving service","error")}},T=async()=>{if(g)try{await QC(g.id),n(F=>F.filter(_=>_.id!==g.id)),p(!1),v(null),N("Service deleted successfully","success")}catch(F){console.error("Error deleting service:",F),N("Error deleting service","error")}},O=()=>{k({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),v(null)},L=async F=>{try{const _=await KC(F.id);n(B=>B.map(W=>W.id===F.id?_:W)),N(`Service ${F.isActive?"deactivated":"activated"}`,"success")}catch(_){console.error("Error toggling service status:",_),N("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(de,{placeholder:"Search services...",value:i,onChange:F=>a(F.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(Se,{options:[{value:"all",label:"All Types"},...Mf],value:l,onChange:c,className:"w-40"}),o.jsx(Se,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:F=>d(F),className:"w-40"})]})]}),o.jsx(U,{onClick:()=>{O(),f(!0)},leftIcon:o.jsx(os,{size:16}),children:"Add Service"})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Services Catalog"})}),"        ",o.jsx(ie,{children:b?o.jsx("div",{className:"text-center py-4",children:"Loading services..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(F=>{var _;return o.jsx(ne,{variant:"bordered",className:"h-full",children:o.jsxs(ie,{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:F.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(iS,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-500",children:(_=Mf.find(B=>B.value===F.type))==null?void 0:_.label})]})]}),o.jsx(U,{variant:F.isActive?"default":"ghost",size:"sm",onClick:()=>L(F),children:F.isActive?o.jsx(pr,{className:"h-4 w-4"}):o.jsx(Ld,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:F.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[o.jsx(Od,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:De(F.baseRate)})]}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(Nn,{className:"h-4 w-4"}),o.jsxs("span",{children:["Per ",F.unit]})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{v(F),k({name:F.name,type:F.type,baseRate:F.baseRate.toString(),unit:F.unit,description:F.description||"",isActive:F.isActive}),f(!0)},children:o.jsx(ja,{className:"h-4 w-4"})}),o.jsx(U,{variant:"destructive",size:"sm",onClick:()=>{v(F),p(!0)},children:o.jsx(jr,{className:"h-4 w-4"})})]})]})},F.id)})})})]}),o.jsx(Rt,{isOpen:h,onClose:()=>{f(!1),O()},title:g?"Edit Service":"Add New Service",size:"lg",children:o.jsxs("form",{onSubmit:P,className:"space-y-6",children:[o.jsx(de,{label:"Service Name",value:j.name,onChange:F=>k(_=>({..._,name:F.target.value})),required:!0}),o.jsx(Se,{label:"Service Type",options:Mf,value:j.type,onChange:F=>k(_=>({..._,type:F})),required:!0}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(de,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:j.baseRate,onChange:F=>k(_=>({..._,baseRate:F.target.value})),required:!0}),o.jsx(Se,{label:"Rate Unit",options:UU,value:j.unit,onChange:F=>k(_=>({..._,unit:F})),required:!0})]}),o.jsx(ls,{label:"Description",value:j.description,onChange:F=>k(_=>({..._,description:F.target.value})),rows:3}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:j.isActive,onChange:F=>k(_=>({..._,isActive:F.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{f(!1),O()},children:"Cancel"}),o.jsx(U,{type:"submit",children:g?"Update Service":"Add Service"})]})]})}),o.jsx(Rt,{isOpen:m,onClose:()=>{p(!1),v(null)},title:"Delete Service",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{p(!1),v(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:T,children:"Delete"})]})]})}),w.show&&o.jsx(ht,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const qU=async()=>await In.get("/users"),HU=async e=>await In.post("/users",e),_w=async(e,t)=>await In.put(`/users/${e}`,t),GU=async e=>{await In.delete(`/users/${e}`)},Rf=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],YU=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],so=10,If=e=>{const t=e.split("").reduce((a,l)=>a+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],s=t%n.length,r=n[s];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${r}&color=fff&size=128`};function QU(){const{user:e}=Ge(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,a]=x.useState(1),[l,c]=x.useState(""),[u,d]=x.useState("all"),[h,f]=x.useState("all"),[m,p]=x.useState(!0),[g,v]=x.useState(!1),[b,y]=x.useState(!1),[w,S]=x.useState(null),[N,j]=x.useState({show:!1,title:""}),[k,C]=x.useState({name:"",email:"",password:"",role:"operator",status:"active"});x.useEffect(()=>{(async()=>{try{if(p(!0),!e){T("Authentication Required","You need to log in to view users","warning"),p(!1);return}try{const R=(await qU()).map(V=>({id:V.id,name:V.name,email:V.email,role:V.role,status:V.status==="active"?"active":"inactive"}));n(R),r(R)}catch(A){console.error("Error fetching users:",A),A.message&&A.message.includes("Authentication required")?T("Authentication Error","You need to log in to view users","error"):T("Error loading users",A.message||"Please try again later","error");const R=[{id:"1",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"2",name:"Sales Agent",email:"sales@example.com",role:"sales_agent",status:"active"}];n(R),r(R)}}finally{p(!1)}})()},[]),x.useEffect(()=>{P()},[t,l,u,h]);const P=()=>{let I=[...t];if(l){const A=l.toLowerCase();I=I.filter(R=>R&&typeof R.name=="string"&&typeof R.email=="string"&&(R.name.toLowerCase().includes(A)||R.email.toLowerCase().includes(A)))}u!=="all"&&(I=I.filter(A=>A.role===u)),h!=="all"&&(I=I.filter(A=>A.status===h)),r(I),a(1)},T=(I,A,R="success")=>{j({show:!0,title:I,description:A,variant:R}),setTimeout(()=>j({show:!1,title:""}),3e3)},O=async I=>{const A=I.status==="active"?"inactive":"active";try{await _w(I.id,{}),n(R=>R.map(V=>V.id===I.id?{...V,status:A}:V)),T(`User ${I.status==="active"?"deactivated":"activated"}`,"success")}catch(R){console.error("Error toggling user status:",R),T("Error updating user status","error")}},L=async I=>{if(I.preventDefault(),!k.name||!k.email||!k.role){T("Please fill in all required fields","error");return}if(!w&&!k.password){T("Password is required for new users","error");return}try{if(w){const A={...w,name:k.name,email:k.email,role:k.role,status:k.status};await _w(w.id,{name:k.name,email:k.email,role:k.role,isActive:k.status==="active"}),n(R=>R.map(V=>V.id===w.id?A:V)),T("User updated successfully","success")}else try{const A=await HU({email:k.email,name:k.name,role:k.role,isActive:k.status==="active"}),R={id:A.id,name:A.name,email:A.email,role:A.role,status:A.isActive?"active":"inactive",avatar:If(k.name)};n(V=>[...V,R]),T("User added successfully","success")}catch(A){T(`Error creating user account: ${A.message||"Unknown error"}`,"error");return}v(!1),_()}catch(A){T(`Error saving user: ${A.message||"Unknown error"}`,"error")}},F=async()=>{if(w)try{await GU(w.id),n(I=>I.filter(A=>A.id!==w.id)),y(!1),S(null),T("User deleted successfully","success")}catch(I){console.error("Error deleting user:",I),T("Error deleting user","error")}},_=()=>{C({name:"",email:"",password:"",role:"operator",status:"active"}),S(null)},B=Math.ceil(s.length/so),W=s.slice((i-1)*so,i*so);return!e||e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(de,{placeholder:"Search users...",value:l,onChange:I=>c(I.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(Se,{options:[{value:"all",label:"All Roles"},...Rf],value:u,onChange:I=>d(I),className:"w-full sm:w-40"}),o.jsx(Se,{options:[{value:"all",label:"All Status"},...YU],value:h,onChange:I=>f(I),className:"w-full sm:w-40"})]})]}),o.jsx(U,{onClick:()=>{_(),v(!0)},leftIcon:o.jsx(WA,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add User"})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"User Management"})}),o.jsx(ie,{children:m?o.jsx("div",{className:"text-center py-4",children:"Loading users..."}):W.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(I=>{var A;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:I.avatar||If(I.name),alt:I.name,className:"h-10 w-10 rounded-full object-cover",onError:R=>{const V=R.target;V.onerror=null,V.src=If(I.name)}}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium text-gray-900",children:I.name}),o.jsx("div",{className:"text-sm text-gray-500",children:I.email})]})]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(A=Rf.find(R=>R.value===I.role))==null?void 0:A.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:I.status==="active"?"Active":"Inactive"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>O(I),children:I.status==="active"?o.jsx(Ld,{size:16}):o.jsx(pr,{size:16})}),o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{S(I),C({name:I.name,email:I.email,password:"",role:I.role,status:I.status}),v(!0)},children:o.jsx(ja,{size:16})}),o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{S(I),y(!0)},children:o.jsx(jr,{size:16})})]})})]},I.id)})})]})}),B>1&&o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*so+1," to"," ",Math.min(i*so,s.length)," of"," ",s.length," users"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(U,{variant:"outline",size:"sm",onClick:()=>a(I=>Math.max(1,I-1)),disabled:i===1,children:"Previous"}),o.jsx(U,{variant:"outline",size:"sm",onClick:()=>a(I=>Math.min(B,I+1)),disabled:i===B,children:"Next"})]})]})]})})]}),"      ",o.jsx(Rt,{isOpen:g,onClose:()=>{v(!1),_()},title:w?"Edit User":"Add New User",size:"lg",children:o.jsxs("form",{onSubmit:L,className:"space-y-6",children:[o.jsx(rd,{}),o.jsx(de,{label:"Full Name",value:k.name,onChange:I=>C(A=>({...A,name:I.target.value})),required:!0}),"          ",o.jsx(de,{label:"Email Address",type:"email",value:k.email,onChange:I=>C(A=>({...A,email:I.target.value})),required:!0}),o.jsx(de,{label:"Password",type:"password",value:k.password||"",onChange:I=>C(A=>({...A,password:I.target.value})),required:!w,placeholder:w?"Leave blank to keep current password":""}),o.jsx(Se,{label:"Role",options:Rf,value:k.role,onChange:I=>C(A=>({...A,role:I})),required:!0}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:k.status==="active",onChange:I=>C(A=>({...A,status:I.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{v(!1),_()},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:w?"Update User":"Add User"})]})]})}),"      ",o.jsx(Rt,{isOpen:b,onClose:()=>{y(!1),S(null)},title:"Delete User",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[o.jsx(xi,{className:"h-5 w-5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{y(!1),S(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:F,children:"Delete User"})]})]})}),N.show&&o.jsx(ht,{title:N.title,variant:N.variant,isVisible:N.show,onClose:()=>j({show:!1,title:""})})]})}function Ti({children:e,title:t,defaultExpanded:n=!1,icon:s,className:r="",onToggle:i}){const[a,l]=x.useState(n),c=()=>{const u=!a;l(u),i==null||i(u)};return o.jsxs(ne,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${r}`,children:[o.jsx(me,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[s&&o.jsx("div",{className:"text-gray-500 flex-shrink-0",children:s}),o.jsx(pe,{className:"text-base sm:text-lg font-medium",children:t})]}),o.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${a?"rotate-180":""}`,children:o.jsx(Us,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),o.jsx("div",{className:`transition-all duration-300 overflow-hidden ${a?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:o.jsx(ie,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}const Aw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},ih=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("authToken");return t&&(e.Authorization=`Bearer ${t}`),e},KU=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:ih()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||Aw}catch(e){return console.error("Error fetching quotation config:",e),Aw}},XU=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:ih(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.message||"Failed to update quotation config")}return(await t.json()).data}catch(t){throw console.error("Error updating quotation config:",t),t}},$k=async e=>{try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:ih()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},Bk=async(e,t)=>{try{const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:ih(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||`Failed to update ${e} config`)}return(await n.json()).data}catch(n){throw console.error(`Error updating ${e} config:`,n),n}},JU=async()=>$k("resourceRates"),ZU=async e=>Bk("resourceRates",e),eW=async()=>$k("additionalParams"),tW=async e=>Bk("additionalParams",e);function nW(){const[e,t]=x.useState(!0),[n,s]=x.useState(!1),[r,i]=x.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await KU();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const g of f){const v=r[g];if(v.minDays<=p){u(`${g.charAt(0).toUpperCase()+g.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(v.maxDays<=v.minDays){u(`${g.charAt(0).toUpperCase()+g.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=v.maxDays}if(!m)return;await XU({orderTypeLimits:r}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{s(!1)}},h=(f,m,p)=>{const g=parseInt(p)||0;i(v=>({...v,[f]:{...v[f],[m]:g}}))};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>o.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ve,{type:"number",label:"Minimum Days",value:r[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),o.jsx("div",{children:o.jsx(Ve,{type:"number",label:"Maximum Days",value:r[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:r[f].minDays+1})})]})]},f))}),o.jsx("div",{className:"flex justify-end",children:o.jsx(U,{onClick:d,disabled:n,leftIcon:n?o.jsx(st,{className:"animate-spin"}):o.jsx(yi,{}),children:n?"Saving...":"Save Changes"})}),a.show&&o.jsx(ht,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function sW(){const[e,t]=x.useState(!0),[n,s]=x.useState(!1),[r,i]=x.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await JU();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(s(!0),r.foodRatePerMonth<=0||r.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await ZU(r),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{s(!1)}};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Wn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(Ve,{type:"number",value:r.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(r.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Wn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(Ve,{type:"number",value:r.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(r.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(U,{onClick:d,disabled:n,leftIcon:n?o.jsx(st,{className:"animate-spin"}):o.jsx(yi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(ht,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function rW(){const[e,t]=x.useState(!0),[n,s]=x.useState(!1),[r,i]=x.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await eW(),m={...r,...f,usageFactors:{...r.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0),await tW(r),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{s(!1)}};if(e)return o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:g=!1})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),o.jsxs("div",{className:"relative mt-1",children:[!g&&o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(Ve,{type:"number",value:f,onChange:v=>m(Number(v.target.value)),className:g?"pr-8":"pl-7",min:"0"}),g&&o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx(LA,{className:"h-4 w-4 text-gray-400"})})]})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zg,{className:"h-5 w-5 text-primary-500"}),o.jsx(pe,{children:"Usage Rates"})]})}),"          ",o.jsxs(ie,{className:"space-y-4",children:[o.jsx(h,{label:"Normal Usage Factor",value:r.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Usage Factor",value:r.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"Heavy Usage Factor",value:r.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hm,{className:"h-5 w-5 text-primary-500"}),o.jsx(pe,{children:"Risk Factors"})]})}),o.jsxs(ie,{className:"space-y-4",children:[o.jsx(h,{label:"Low Risk",value:r.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Risk",value:r.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"High Risk",value:r.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nn,{className:"h-5 w-5 text-primary-500"}),o.jsx(pe,{children:"Shift Factors"})]})}),o.jsxs(ie,{className:"space-y-4",children:[o.jsx(h,{label:"Single Shift",value:r.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),o.jsx(h,{label:"Double Shift",value:r.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(RA,{className:"h-5 w-5 text-primary-500"}),o.jsx(pe,{children:"Day/Night Factors"})]})}),o.jsxs(ie,{className:"space-y-4",children:[o.jsx(h,{label:"Day Factor",value:r.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),o.jsx(h,{label:"Night Factor",value:r.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(U,{onClick:d,disabled:n,leftIcon:n?o.jsx(st,{className:"animate-spin"}):o.jsx(yi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(ht,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function iW(){const e=aW();return e?{Authorization:`Bearer ${e}`}:{}}const aW=()=>{try{return localStorage.getItem("jwt-token")||localStorage.getItem("authToken")||sessionStorage.getItem("jwt-token")||sessionStorage.getItem("authToken")}catch(e){return console.error("Error accessing storage for auth token:",e),null}};async function oW(e,t){const n=await fetch("/api/templates/merge",{method:"POST",headers:{"Content-Type":"application/json",...iW()},body:JSON.stringify({templateId:e,data:t})});if(!n.ok)throw new Error("Failed to merge template");return(await n.json()).mergedContent||""}const Mw={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["10000"],otherFactorsCharge:2e3,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile",dealType:"rental",sundayWorking:"no",otherFactors:[]};function lW({onSave:e}){var w,S;const[t,n]=x.useState([]),[s,r]=x.useState(""),[i,a]=x.useState(null),[l,c]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState({show:!1,title:""}),[m,p]=x.useState("");x.useEffect(()=>{async function N(){if(i&&Mw)try{const j=await oW(i.id,Mw);p(j)}catch{p('<div style="color:red">Error generating preview</div>')}else p("")}N()},[i]),x.useEffect(()=>{g()},[]),x.useEffect(()=>{if(s){const N=t.find(j=>j.id===s);a(N||null)}else a(null)},[s,t]);const g=async()=>{try{c(!0);const N=await TC();n(N);const j=N.find(k=>k.isDefault);j&&r(j.id)}catch(N){console.error("Error loading templates and config:",N),v("Error loading configuration","error")}finally{c(!1)}},v=(N,j="success")=>{f({show:!0,title:N,variant:j}),setTimeout(()=>f({show:!1,title:""}),3e3)},b=async()=>{try{d(!0);const N=t.find(j=>j.isDefault);if(N&&N.id!==s&&await cp(N.id,{isDefault:!1}),s){const j=t.find(k=>k.id===s);j&&await cp(j.id,{isDefault:!0})}await g(),v("Default template configuration saved successfully"),e==null||e()}catch(N){console.error("Error saving default template config:",N),v("Error saving configuration","error")}finally{d(!1)}},y=[{value:"",label:"No default template selected"},...t.map(N=>({value:N.id,label:N.name}))];return l?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx(st,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ne,{children:[o.jsx(me,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ut,{className:"h-5 w-5 text-primary-500"}),o.jsx(pe,{children:"Default Quotation Template"})]})}),o.jsxs(ie,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),o.jsx(Se,{options:y,value:s,onChange:r,className:"w-full max-w-md"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),s&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ut,{className:"h-5 w-5 text-blue-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),o.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(w=t.find(N=>N.id===s))==null?void 0:w.name}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(S=t.find(N=>N.id===s))==null?void 0:S.description})]})]})}),t.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(st,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),o.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(U,{onClick:b,disabled:u||t.length===0,leftIcon:u?o.jsx(st,{className:"animate-spin"}):o.jsx(yi,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Template Preview"})}),o.jsx(ie,{children:o.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:o.jsx("div",{dangerouslySetInnerHTML:{__html:m}})})})]}),h.show&&o.jsx(ht,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const cW=()=>{const[e,t]=x.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,s]=x.useState(!0),[r,i]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState("untested"),[d,h]=x.useState({show:!1,title:""}),f=(b,y="success")=>{h({show:!0,title:b,variant:y}),setTimeout(()=>h({show:!1,title:""}),y==="success"?5e3:3e3)};x.useEffect(()=>{m()},[]);const m=async()=>{s(!0);try{const b=await fetch("/api/dbconfig",{method:"GET",headers:Jc()});if(!b.ok)throw new Error("Failed to fetch database configuration");const y=await b.json();y.success&&y.data&&t({host:y.data.host||"localhost",port:y.data.port||5432,database:y.data.database||"asp_crm",user:y.data.user||"postgres",password:"",ssl:y.data.ssl||!1})}catch(b){console.error("Failed to fetch database config:",b),f("Failed to load database configuration","error")}finally{s(!1)}},p=b=>{const{name:y,value:w,type:S,checked:N}=b.target;t(j=>({...j,[y]:S==="checkbox"?N:S==="number"?parseInt(w)||0:w}))},g=async()=>{l(!0);try{const b=await fetch("/api/dbconfig",{method:"PUT",headers:Jc(),body:JSON.stringify(e)}),y=await b.json();if(b.ok&&y.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(y.message||"Unknown error")}catch(b){console.error("Failed to save database config:",b),f(`Failed to save database configuration: ${b instanceof Error?b.message:"Unknown error"}`,"error")}finally{l(!1)}},v=async()=>{var b,y;i(!0),u("untested");try{const w=await fetch("/api/dbconfig/test",{method:"POST",headers:Jc(),body:JSON.stringify(e)}),S=await w.json();w.ok&&S.success?(u("success"),f(`Connection successful! PostgreSQL ${((y=(b=S.data)==null?void 0:b.version)==null?void 0:y.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${S.message||"Unknown error"}`,"error"))}catch(w){console.error("Connection test error:",w),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?o.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),o.jsx(Ve,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:o.jsx(BA,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),o.jsx(Ve,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),o.jsx(Ve,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:o.jsx(tS,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx(Ve,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),o.jsx(Ve,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsx("input",{type:"checkbox",id:"ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),o.jsx("label",{htmlFor:"ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsx(U,{variant:"outline",onClick:v,disabled:r,leftIcon:r?o.jsx(st,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?o.jsx(vA,{className:"h-4 w-4 text-green-500"}):void 0,children:r?"Testing...":"Test Connection"}),o.jsx(U,{onClick:g,disabled:a,leftIcon:a?o.jsx(st,{className:"h-4 w-4 animate-spin"}):o.jsx(yi,{className:"h-4 w-4"}),children:a?"Saving...":"Save Configuration"})]}),d.show&&o.jsx(ht,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function uW(){const{user:e}=Ge();return!e||e.role!=="admin"&&e.role!=="operations_manager"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),o.jsx(rl,{className:"h-6 w-6 text-gray-400"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ti,{icon:o.jsx(Ut,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:o.jsx(lW,{})}),o.jsx(Ti,{icon:o.jsx(as,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:o.jsx(nW,{})}),o.jsx(Ti,{icon:o.jsx(Ut,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:o.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),o.jsx(Ti,{icon:o.jsx(Wn,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:o.jsx(sW,{})}),o.jsx(Ti,{icon:o.jsx(zg,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:o.jsx(rW,{})}),o.jsx(Ti,{icon:o.jsx(tS,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:o.jsx(cW,{})})]})]})}function dW(){const{user:e}=Ge(),[t,n]=x.useState([]),[s,r]=x.useState(""),[i,a]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(!0),[m,p]=x.useState({show:!1,title:""}),[g,v]=x.useState({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""});x.useEffect(()=>{b()},[]);const b=async()=>{try{const k=await Ak();k&&Array.isArray(k)?n(k):N("Error fetching customers: Invalid data format","error")}catch{N("Error fetching customers","error")}finally{f(!1)}},y=async k=>{if(k.preventDefault(),!g.name||!g.companyName||!g.contactName||!g.email||!g.phone||!g.address||!g.type){N("Please fill in all required fields","error");return}try{if(u){const C=await HV(u.id,g);C&&n(P=>P.map(T=>T.id===u.id?C:T)),N("Customer updated successfully","success")}else{const C=await Mk(g);n(P=>[...P,C]),N("Customer added successfully","success")}a(!1),S()}catch{N("Error saving customer","error")}},w=async()=>{if(u)try{await GV(u.id),n(k=>k.filter(C=>C.id!==u.id)),c(!1),d(null),N("Customer deleted successfully","success")}catch{N("Error deleting customer","error")}},S=()=>{v({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""}),d(null)},N=(k,C="success")=>{p({show:!0,title:k,variant:C}),setTimeout(()=>p({show:!1,title:""}),3e3)},j=t.filter(k=>k&&typeof k.name=="string"&&typeof k.email=="string"&&(k.name.toLowerCase().includes(s.toLowerCase())||k.email.toLowerCase().includes(s.toLowerCase())||k.companyName&&typeof k.companyName=="string"&&k.companyName.toLowerCase().includes(s.toLowerCase())));return!e||e.role!=="admin"&&e.role!=="sales_agent"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 max-w-md relative",children:[o.jsx(us,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(de,{placeholder:"Search customers...",value:s,onChange:k=>r(k.target.value),className:"pl-10 w-full"})]}),o.jsx(U,{onClick:()=>{S(),a(!0)},leftIcon:o.jsx(os,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Customer"})]}),o.jsx(ne,{children:o.jsx(ie,{children:h?o.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):j.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.contactName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.companyName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.designation||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.type}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.email}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.phone}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.address}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{d(k),v({name:k.name,companyName:k.companyName,contactName:k.contactName,email:k.email,phone:k.phone,address:k.address,type:k.type,designation:k.designation||"",notes:k.notes||""}),a(!0)},title:"Edit Customer",children:o.jsx(ja,{className:"h-4 w-4"})}),o.jsx(U,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{d(k),c(!0)},title:"Delete Customer",children:o.jsx(jr,{className:"h-4 w-4"})})]})})]},k.id))})]})})})}),o.jsx(Rt,{isOpen:i,onClose:()=>{a(!1),S()},title:u?"Edit Customer":"Add New Customer",size:"lg",children:o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsx(de,{label:"Customer Name",value:g.name,onChange:k=>v(C=>({...C,name:k.target.value})),required:!0}),o.jsx(de,{label:"Company Name",value:g.companyName,onChange:k=>v(C=>({...C,companyName:k.target.value})),required:!0}),o.jsx(de,{label:"Contact Name",value:g.contactName,onChange:k=>v(C=>({...C,contactName:k.target.value})),required:!0}),o.jsx(de,{label:"Designation",value:g.designation,onChange:k=>v(C=>({...C,designation:k.target.value}))}),o.jsx(de,{label:"Type",value:g.type,onChange:k=>v(C=>({...C,type:k.target.value})),required:!0}),o.jsx(de,{label:"Email",type:"email",value:g.email,onChange:k=>v(C=>({...C,email:k.target.value})),required:!0}),o.jsx(de,{label:"Phone",value:g.phone,onChange:k=>v(C=>({...C,phone:k.target.value})),required:!0}),o.jsx(de,{label:"Address",value:g.address,onChange:k=>v(C=>({...C,address:k.target.value})),required:!0}),o.jsx(de,{label:"Notes",value:g.notes,onChange:k=>v(C=>({...C,notes:k.target.value}))}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{type:"button",variant:"outline",onClick:()=>{a(!1),S()},children:"Cancel"}),o.jsx(U,{type:"submit",variant:"accent",children:u?"Update Customer":"Add Customer"})]})]})}),o.jsx(Rt,{isOpen:l,onClose:()=>{c(!1),d(null)},title:"Delete Customer",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(U,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),o.jsx(U,{variant:"destructive",onClick:w,children:"Delete"})]})]})}),m.show&&o.jsx(ht,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]})}function Ft(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hW=typeof Symbol=="function"&&Symbol.observable||"@@observable",Rw=hW,Iw=()=>Math.random().toString(36).substring(7).split("").join("."),fW={INIT:`@@redux/INIT${Iw()}`,REPLACE:`@@redux/REPLACE${Iw()}`},Ow=fW;function mW(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function zk(e,t,n){if(typeof e!="function")throw new Error(Ft(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ft(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ft(1));return n(zk)(e,t)}let s=e,r=t,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((v,b)=>{a.set(b,v)}))}function d(){if(c)throw new Error(Ft(3));return r}function h(v){if(typeof v!="function")throw new Error(Ft(4));if(c)throw new Error(Ft(5));let b=!0;u();const y=l++;return a.set(y,v),function(){if(b){if(c)throw new Error(Ft(6));b=!1,u(),a.delete(y),i=null}}}function f(v){if(!mW(v))throw new Error(Ft(7));if(typeof v.type>"u")throw new Error(Ft(8));if(typeof v.type!="string")throw new Error(Ft(17));if(c)throw new Error(Ft(9));try{c=!0,r=s(r,v)}finally{c=!1}return(i=a).forEach(y=>{y()}),v}function m(v){if(typeof v!="function")throw new Error(Ft(10));s=v,f({type:Ow.REPLACE})}function p(){const v=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Ft(11));function y(){const S=b;S.next&&S.next(d())}return y(),{unsubscribe:v(y)}},[Rw](){return this}}}return f({type:Ow.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[Rw]:p}}function Lw(e,t){return function(...n){return t(e.apply(this,n))}}function Fw(e,t){if(typeof e=="function")return Lw(e,t);if(typeof e!="object"||e===null)throw new Error(Ft(16));const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=Lw(r,t))}return n}function Vk(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function pW(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(Ft(15))};const a={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(a));return i=Vk(...l)(r.dispatch),{...r,dispatch:i}}}var gW={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vl=x;function xW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yW=typeof Object.is=="function"?Object.is:xW,vW=Vl.useSyncExternalStore,bW=Vl.useRef,wW=Vl.useEffect,jW=Vl.useMemo,NW=Vl.useDebugValue;gW.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=bW(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=jW(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,yW(d,m))return p;var g=s(m);return r!==void 0&&r(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=vW(e,i[0],i[1]);return wW(function(){a.hasValue=!0,a.value=l},[l]),NW(l),l};var SW=x.version.startsWith("19"),CW=Symbol.for(SW?"react.transitional.element":"react.element"),kW=Symbol.for("react.portal"),EW=Symbol.for("react.fragment"),DW=Symbol.for("react.strict_mode"),TW=Symbol.for("react.profiler"),PW=Symbol.for("react.consumer"),_W=Symbol.for("react.context"),Uk=Symbol.for("react.forward_ref"),AW=Symbol.for("react.suspense"),MW=Symbol.for("react.suspense_list"),Lx=Symbol.for("react.memo"),RW=Symbol.for("react.lazy"),IW=Uk,OW=Lx;function LW(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case CW:switch(e=e.type,e){case EW:case TW:case DW:case AW:case MW:return e;default:switch(e=e&&e.$$typeof,e){case _W:case Uk:case RW:case Lx:return e;case PW:return e;default:return t}}case kW:return t}}}function FW(e){return LW(e)===Lx}function $W(e,t,n,s,{areStatesEqual:r,areOwnPropsEqual:i,areStatePropsEqual:a}){let l=!1,c,u,d,h,f;function m(y,w){return c=y,u=w,d=e(c,u),h=t(s,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function g(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function v(){const y=e(c,u),w=!a(y,d);return d=y,w&&(f=n(d,h,u)),f}function b(y,w){const S=!i(w,u),N=!r(y,c,w,u);return c=y,u=w,S&&N?p():S?g():N?v():f}return function(w,S){return l?b(w,S):m(w,S)}}function BW(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...r}){const i=t(e,r),a=n(e,r),l=s(e,r);return $W(i,a,l,e,r)}function zW(e,t){const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=(...i)=>t(r(...i)))}return n}function Tp(e){return function(n){const s=e(n);function r(){return s}return r.dependsOnOwnProps=!1,r}}function $w(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Wk(e,t){return function(s,{displayName:r}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=$w(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=$w(u),u=i(l,c)),u},i}}function Fx(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function VW(e){return e&&typeof e=="object"?Tp(t=>zW(e,t)):e?typeof e=="function"?Wk(e):Fx(e,"mapDispatchToProps"):Tp(t=>({dispatch:t}))}function UW(e){return e?typeof e=="function"?Wk(e):Fx(e,"mapStateToProps"):Tp(()=>({}))}function WW(e,t,n){return{...n,...e,...t}}function qW(e){return function(n,{displayName:s,areMergedPropsEqual:r}){let i=!1,a;return function(c,u,d){const h=e(c,u,d);return i?r(h,a)||(a=h):(i=!0,a=h),a}}}function HW(e){return e?typeof e=="function"?qW(e):Fx(e,"mergeProps"):()=>WW}function GW(e){e()}function YW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){GW(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var Bw={notify(){},get:()=>[]};function qk(e,t){let n,s=Bw,r=0,i=!1;function a(g){d();const v=s.subscribe(g);let b=!1;return()=>{b||(b=!0,v(),h())}}function l(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){r++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=YW())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=Bw)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>s};return p}var QW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KW=QW(),XW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JW=XW(),ZW=()=>KW||JW?x.useLayoutEffect:x.useEffect,ld=ZW();function zw(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Of(e,t){if(zw(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!zw(e[n[r]],t[n[r]]))return!1;return!0}var eq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},tq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},nq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sq={[IW]:nq,[OW]:Hk};function Vw(e){return FW(e)?Hk:sq[e.$$typeof]||eq}var rq=Object.defineProperty,iq=Object.getOwnPropertyNames,Uw=Object.getOwnPropertySymbols,aq=Object.getOwnPropertyDescriptor,oq=Object.getPrototypeOf,Ww=Object.prototype;function Pp(e,t){if(typeof t!="string"){if(Ww){const i=oq(t);i&&i!==Ww&&Pp(e,i)}let n=iq(t);Uw&&(n=n.concat(Uw(t)));const s=Vw(e),r=Vw(t);for(let i=0;i<n.length;++i){const a=n[i];if(!tq[a]&&!(r&&r[a])&&!(s&&s[a])){const l=aq(t,a);try{rq(e,a,l)}catch{}}}}return e}var Lf=Symbol.for("react-redux-context"),Ff=typeof globalThis<"u"?globalThis:{};function lq(){if(!x.createContext)return{};const e=Ff[Lf]??(Ff[Lf]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var Gk=lq(),cq=[null,null];function uq(e,t,n){ld(()=>e(...t),n)}function dq(e,t,n,s,r,i){e.current=s,n.current=!1,r.current&&(r.current=null,i())}function hq(e,t,n,s,r,i,a,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const g=t.getState();let v,b;try{v=s(g,r.current)}catch(y){b=y,f=y}b||(f=null),v===i.current?a.current||u():(i.current=v,c.current=v,a.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function fq(e,t){return e===t}function mq(e,t,n,{pure:s,areStatesEqual:r=fq,areOwnPropsEqual:i=Of,areStatePropsEqual:a=Of,areMergedPropsEqual:l=Of,forwardRef:c=!1,context:u=Gk}={}){const d=u,h=UW(e),f=VW(t),m=HW(n),p=!!e;return v=>{const b=v.displayName||v.name||"Component",y=`Connect(${b})`,w={shouldHandleStateChanges:p,displayName:y,wrappedComponentName:b,WrappedComponent:v,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:r,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:l};function S(k){const[C,P,T]=x.useMemo(()=>{const{reactReduxForwardedRef:D,...$}=k;return[k.context,D,$]},[k]),O=x.useMemo(()=>{let D=d;return C!=null&&C.Consumer,D},[C,d]),L=x.useContext(O),F=!!k.store&&!!k.store.getState&&!!k.store.dispatch,_=!!L&&!!L.store,B=F?k.store:L.store,W=_?L.getServerState:B.getState,I=x.useMemo(()=>BW(B.dispatch,w),[B]),[A,R]=x.useMemo(()=>{if(!p)return cq;const D=qk(B,F?void 0:L.subscription),$=D.notifyNestedSubs.bind(D);return[D,$]},[B,F,L]),V=x.useMemo(()=>F?L:{...L,subscription:A},[F,L,A]),H=x.useRef(void 0),J=x.useRef(T),re=x.useRef(void 0),oe=x.useRef(!1),ge=x.useRef(!1),we=x.useRef(void 0);ld(()=>(ge.current=!0,()=>{ge.current=!1}),[]);const M=x.useMemo(()=>()=>re.current&&T===J.current?re.current:I(B.getState(),T),[B,T]),G=x.useMemo(()=>$=>A?hq(p,B,A,I,J,H,oe,ge,re,R,$):()=>{},[A]);uq(dq,[J,H,oe,T,re,R]);let Q;try{Q=x.useSyncExternalStore(G,M,W?()=>I(W(),T):M)}catch(D){throw we.current&&(D.message+=`
The error may be correlated with this previous error:
${we.current.stack}

`),D}ld(()=>{we.current=void 0,re.current=void 0,H.current=Q});const se=x.useMemo(()=>x.createElement(v,{...Q,ref:P}),[P,v,Q]);return x.useMemo(()=>p?x.createElement(O.Provider,{value:V},se):se,[O,se,V])}const j=x.memo(S);if(j.WrappedComponent=v,j.displayName=S.displayName=y,c){const C=x.forwardRef(function(T,O){return x.createElement(j,{...T,reactReduxForwardedRef:O})});return C.displayName=y,C.WrappedComponent=v,Pp(C,v)}return Pp(j,v)}}var Yk=mq;function pq(e){const{children:t,context:n,serverState:s,store:r}=e,i=x.useMemo(()=>{const c=qk(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),a=x.useMemo(()=>r.getState(),[r]);ld(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=n||Gk;return x.createElement(l.Provider,{value:i},t)}var gq=pq,xq="Invariant failed";function yq(e,t){throw new Error(xq)}var zn=function(t){var n=t.top,s=t.right,r=t.bottom,i=t.left,a=s-i,l=r-n,c={top:n,right:s,bottom:r,left:i,width:a,height:l,x:i,y:n,center:{x:(s+i)/2,y:(r+n)/2}};return c},$x=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},qw=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},vq=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},$f={top:0,right:0,bottom:0,left:0},Bx=function(t){var n=t.borderBox,s=t.margin,r=s===void 0?$f:s,i=t.border,a=i===void 0?$f:i,l=t.padding,c=l===void 0?$f:l,u=zn($x(n,r)),d=zn(qw(n,a)),h=zn(qw(d,c));return{marginBox:u,borderBox:zn(n),paddingBox:d,contentBox:h,margin:r,border:a,padding:c}},yn=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var r=Number(n);return isNaN(r)&&yq(),r},bq=function(){return{x:window.pageXOffset,y:window.pageYOffset}},cd=function(t,n){var s=t.borderBox,r=t.border,i=t.margin,a=t.padding,l=vq(s,n);return Bx({borderBox:l,border:r,margin:i,padding:a})},ud=function(t,n){return n===void 0&&(n=bq()),cd(t,n)},Qk=function(t,n){var s={top:yn(n.marginTop),right:yn(n.marginRight),bottom:yn(n.marginBottom),left:yn(n.marginLeft)},r={top:yn(n.paddingTop),right:yn(n.paddingRight),bottom:yn(n.paddingBottom),left:yn(n.paddingLeft)},i={top:yn(n.borderTopWidth),right:yn(n.borderRightWidth),bottom:yn(n.borderBottomWidth),left:yn(n.borderLeftWidth)};return Bx({borderBox:t,margin:s,padding:r,border:i})},Kk=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return Qk(n,s)},yl=function(t){var n=[],s=null,r=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return r.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},r};function dd(){return dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dd.apply(null,arguments)}function Xk(e,t){}Xk.bind(null,"warn");Xk.bind(null,"error");function yr(){}function wq(e,t){return{...e,...t}}function kn(e,t,n){const s=t.map(r=>{const i=wq(n,r.options);return e.addEventListener(r.eventName,r.fn,i),function(){e.removeEventListener(r.eventName,r.fn,i)}});return function(){s.forEach(i=>{i()})}}const jq="Invariant failed";class hd extends Error{}hd.prototype.toString=function(){return this.message};function X(e,t){throw new hd(jq)}class Nq extends ee.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=yr,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof hd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=kn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof hd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Sq=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,fd=e=>e+1,Cq=e=>`
  You have lifted an item in position ${fd(e.source.index)}
`,Jk=(e,t)=>{const n=e.droppableId===t.droppableId,s=fd(e.index),r=fd(t.index);return n?`
      You have moved the item from position ${s}
      to position ${r}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${r}
  `},Zk=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,kq=e=>{const t=e.destination;if(t)return Jk(e.source,t);const n=e.combine;return n?Zk(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Hw=e=>`
  The item has returned to its starting position
  of ${fd(e.index)}
`,Eq=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Hw(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Jk(e.source,t)}
    `:n?`
      You have dropped the item.
      ${Zk(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Hw(e.source)}
  `},ou={dragHandleUsageInstructions:Sq,onDragStart:Cq,onDragUpdate:kq,onDragEnd:Eq};function Dq(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function eE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Dq(e[n],t[n]))return!1;return!0}function Ee(e,t){const n=x.useState(()=>({inputs:t,result:e()}))[0],s=x.useRef(!0),r=x.useRef(n),a=s.current||!!(t&&r.current.inputs&&eE(t,r.current.inputs))?r.current:{inputs:t,result:e()};return x.useEffect(()=>{s.current=!1,r.current=a},[a]),a.result}function fe(e,t){return Ee(()=>e,t)}const bt={x:0,y:0},jt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),an=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),vr=(e,t)=>e.x===t.x&&e.y===t.y,_a=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),mi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},vl=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Gw=(e,t)=>Math.min(...t.map(n=>vl(e,n))),tE=e=>t=>({x:e(t.x),y:e(t.y)});var Tq=(e,t)=>{const n=zn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Ul=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Yw=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Pq={top:0,right:0,bottom:0,left:0},_q=(e,t)=>t?Ul(e,t.scroll.diff.displacement):e,Aq=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Mq=(e,t)=>t&&t.shouldClipSubject?Tq(t.pageMarginBox,e):zn(e);var ma=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const r=_q(e.marginBox,s),i=Aq(r,n,t),a=Mq(i,s);return{page:e,withPlaceholder:t,active:a}},zx=(e,t)=>{e.frame||X();const n=e.frame,s=an(t,n.scroll.initial),r=_a(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:r},max:n.scroll.max}},a=ma({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:a}};function vt(e,t=eE){let n=null;function s(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;const i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return s.clear=function(){n=null},s}const nE=vt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),sE=vt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),ah=vt(e=>Object.values(e)),Rq=vt(e=>Object.values(e));var Aa=vt((e,t)=>Rq(t).filter(s=>e===s.descriptor.droppableId).sort((s,r)=>s.descriptor.index-r.descriptor.index));function Vx(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function oh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var lh=vt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Iq=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:r})=>{if(!n.isCombineEnabled||!Vx(r))return null;function a(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...r,at:p}}const l=r.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=lh(t,s);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&X();const h=d-1;if(h<0)return null;const f=u[h];return a(f.descriptor.id)},Ma=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const rE={point:bt,value:0},bl={invisible:{},visible:{},all:[]},Oq={displaced:bl,displacedBy:rE,at:null};var Dn=(e,t)=>n=>e<=n&&n<=t,iE=e=>{const t=Dn(e.top,e.bottom),n=Dn(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),a=n(s.left)||n(s.right);if(i&&a)return!0;const c=s.top<e.top&&s.bottom>e.bottom,u=s.left<e.left&&s.right>e.right;return c&&u?!0:c&&a||u&&i}},Lq=e=>{const t=Dn(e.top,e.bottom),n=Dn(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const Ux={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},aE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Fq=e=>t=>{const n=Dn(t.top,t.bottom),s=Dn(t.left,t.right);return r=>e===Ux?n(r.top)&&n(r.bottom):s(r.left)&&s(r.right)};const $q=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:bt;return Ul(e,n)},Bq=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,zq=(e,t,n)=>n(t)(e),Wx=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:r})=>{const i=s?$q(e,t):e;return Bq(i,t,r)&&zq(i,n,r)},Vq=e=>Wx({...e,isVisibleThroughFrameFn:iE}),oE=e=>Wx({...e,isVisibleThroughFrameFn:Lq}),Uq=e=>Wx({...e,isVisibleThroughFrameFn:Fq(e.destination.axis)}),Wq=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:r}=t;if(s[e])return!1;const i=r[e];return i?i.shouldAnimate:!0};function qq(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return zn($x(n,s))}function wl({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:r,last:i}){return e.reduce(function(l,c){const u=qq(c,n),d=c.descriptor.id;if(l.all.push(d),!Vq({target:u,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=Wq(d,i,r),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function Hq(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Qw({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const r=Hq(e,{inHomeList:t});return{displaced:bl,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:r}}}}function md({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:r,last:i,index:a,forceShouldAnimate:l}){const c=Ma(e,n);if(a==null)return Qw({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const u=t.find(p=>p.descriptor.index===a);if(!u)return Qw({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const d=lh(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:wl({afterDragging:f,destination:n,displacedBy:r,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function kr(e,t){return!!t.effected[e]}var Gq=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:r})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return kr(i,r)?e?l:l-1:e?l+1:l},Yq=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const r=s.index,i=e?r+1:r-1,a=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<a||i>c?null:i},Qq=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:r,insideDestination:i,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||X(),u.type==="REORDER"){const h=Yq({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:md({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})}const d=Gq({isMovingForward:e,destination:r,displaced:a.displaced,draggables:s,combine:u.combine,afterCritical:c});return d==null?null:md({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})},Kq=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const r=!!(e.visible[n]||e.invisible[n]);return kr(n,t)?r?bt:_a(s.point):r?s.point:bt},Xq=({afterCritical:e,impact:t,draggables:n})=>{const s=oh(t);s||X();const r=s.draggableId,i=n[r].page.borderBox.center,a=Kq({displaced:t.displaced,afterCritical:e,combineWith:r,displacedBy:t.displacedBy});return jt(i,a)};const lE=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Jq=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,qx=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Kw=({axis:e,moveRelativeTo:t,isMoving:n})=>mi(e.line,t.marginBox[e.end]+lE(e,n),qx(e,t.marginBox,n)),Xw=({axis:e,moveRelativeTo:t,isMoving:n})=>mi(e.line,t.marginBox[e.start]-Jq(e,n),qx(e,t.marginBox,n)),Zq=({axis:e,moveInto:t,isMoving:n})=>mi(e.line,t.contentBox[e.start]+lE(e,n),qx(e,t.contentBox,n));var e7=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:r})=>{const i=Aa(s.descriptor.id,n),a=t.page,l=s.axis;if(!i.length)return Zq({axis:l,moveInto:s.page,isMoving:a});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(kr(d,r))return Xw({axis:l,moveRelativeTo:f.page,isMoving:a});const m=cd(f.page,u.point);return Xw({axis:l,moveRelativeTo:m,isMoving:a})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return a.borderBox.center;if(kr(h.descriptor.id,r)){const f=cd(h.page,_a(r.displacedBy.point));return Kw({axis:l,moveRelativeTo:f,isMoving:a})}return Kw({axis:l,moveRelativeTo:h.page,isMoving:a})},_p=(e,t)=>{const n=e.frame;return n?jt(t,n.scroll.diff.displacement):t};const t7=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:r})=>{const i=t.page.borderBox.center,a=e.at;return!n||!a?i:a.type==="REORDER"?e7({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:r}):Xq({impact:e,draggables:s,afterCritical:r})};var ch=e=>{const t=t7(e),n=e.droppable;return n?_p(n,t):t},cE=(e,t)=>{const n=an(t,e.scroll.initial),s=_a(n);return{frame:zn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function Jw(e,t){return e.map(n=>t[n])}function n7(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var s7=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:r})=>{const i=cE(t,jt(t.scroll.current,r)),a=n.frame?zx(n,jt(n.frame.scroll.current,r)):n,l=e.displaced,c=wl({afterDragging:Jw(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=wl({afterDragging:Jw(l.all,s),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const g=n7(p,f);if(g){h[p]=g;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},r7=(e,t)=>jt(e.scroll.diff.displacement,t),Hx=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=r7(n,e),r=an(s,t.page.borderBox.center);return jt(t.client.borderBox.center,r)},uE=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:r,onlyOnMainAxis:i=!1})=>{const a=an(n,e.page.borderBox.center),c={target:Ul(e.page.borderBox,a),destination:t,withDroppableDisplacement:r,viewport:s};return i?Uq(c):oE(c)},i7=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:r,viewport:i,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=Aa(n.descriptor.id,s),d=Ma(t,n),h=Iq({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:r})||Qq({isMovingForward:e,isInHomeList:d,draggable:t,draggables:s,destination:n,insideDestination:u,previousImpact:r,viewport:i,afterCritical:c});if(!h)return null;const f=ch({impact:h,draggable:t,droppable:n,draggables:s,afterCritical:c});if(uE({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Hx({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=an(f,a),g=s7({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:p});return{clientSelection:l,impact:g,scrollJumpRequest:p}};const Lt=e=>{const t=e.subject.active;return t||X(),t};var a7=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:r})=>{const i=n.subject.active;if(!i)return null;const a=n.axis,l=Dn(i[a.start],i[a.end]),c=ah(s).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>iE(r.frame)(Lt(d))).filter(d=>{const h=Lt(d);return e?i[a.crossAxisEnd]<h[a.crossAxisEnd]:h[a.crossAxisStart]<i[a.crossAxisStart]}).filter(d=>{const h=Lt(d),f=Dn(h[a.start],h[a.end]);return l(h[a.start])||l(h[a.end])||f(i[a.start])||f(i[a.end])}).sort((d,h)=>{const f=Lt(d)[a.crossAxisStart],m=Lt(h)[a.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>Lt(d)[a.crossAxisStart]===Lt(f[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>Dn(Lt(d)[a.start],Lt(d)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>Lt(d)[a.start]-Lt(h)[a.start])[0]:c.sort((d,h)=>{const f=Gw(t,Yw(Lt(d))),m=Gw(t,Yw(Lt(h)));return f!==m?f-m:Lt(d)[a.start]-Lt(h)[a.start]})[0]};const Zw=(e,t)=>{const n=e.page.borderBox.center;return kr(e.descriptor.id,t)?an(n,t.displacedBy.point):n},o7=(e,t)=>{const n=e.page.borderBox;return kr(e.descriptor.id,t)?Ul(n,_a(t.displacedBy.point)):n};var l7=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:r})=>s.filter(a=>oE({target:o7(a,r),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=vl(e,_p(n,Zw(a,r))),u=vl(e,_p(n,Zw(l,r)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Wl=vt(function(t,n){const s=n[t.line];return{value:s,point:mi(t.line,s)}});const c7=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return mi(s.line,t[s.line]);const r=e.subject.page.contentBox[s.size],c=Aa(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[s.size],0)+t[s.line]-r;return c<=0?null:mi(s.line,c)},dE=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),hE=(e,t,n)=>{const s=e.frame;Ma(t,e)&&X(),e.subject.withPlaceholder&&X();const r=Wl(e.axis,t.displaceBy).point,i=c7(e,r,n),a={placeholderSize:r,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const d=ma({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?jt(s.scroll.max,i):s.scroll.max,c=dE(s,l),u=ma({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},u7=e=>{const t=e.subject.withPlaceholder;t||X();const n=e.frame;if(!n){const a=ma({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const s=t.oldFrameMaxScroll;s||X();const r=dE(n,s),i=ma({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null});return{...e,subject:i,frame:r}};var d7=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:r,destination:i,viewport:a,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:bl,displacedBy:rE,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=ch({impact:h,draggable:s,droppable:i,draggables:r,afterCritical:l}),m=Ma(s,i)?i:hE(i,s,r);return uE({draggable:s,destination:m,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?h:h+1})(),d=Wl(i.axis,s.displaceBy);return md({draggable:s,insideDestination:n,destination:i,viewport:a,displacedBy:d,last:bl,index:u})},h7=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:r,droppables:i,viewport:a,afterCritical:l})=>{const c=a7({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:a});if(!c)return null;const u=Aa(c.descriptor.id,r),d=l7({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=d7({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:r,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;const f=ch({impact:h,draggable:n,droppable:c,draggables:r,afterCritical:l});return{clientSelection:Hx({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null}},cn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const f7=(e,t)=>{const n=cn(e);return n?t[n]:null};var m7=({state:e,type:t})=>{const n=f7(e.impact,e.dimensions.droppables),s=!!n,r=e.dimensions.droppables[e.critical.droppable.id],i=n||r,a=i.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?i7({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):h7({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Gr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function fE(e){const t=Dn(e.top,e.bottom),n=Dn(e.left,e.right);return function(r){return t(r.y)&&n(r.x)}}function p7(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function g7({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,r=n.map(i=>{const a=i.axis,l=mi(i.axis.line,e.center[a.line],i.page.borderBox.center[a.crossAxisLine]);return{id:i.descriptor.id,distance:vl(s,l)}}).sort((i,a)=>a.distance-i.distance);return r[0]?r[0].id:null}function x7({pageBorderBox:e,draggable:t,droppables:n}){const s=ah(n).filter(r=>{if(!r.isEnabled)return!1;const i=r.subject.active;if(!i||!p7(e,i))return!1;if(fE(i)(e.center))return!0;const a=r.axis,l=i.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],d=Dn(i[a.crossAxisStart],i[a.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return s.length?s.length===1?s[0].descriptor.id:g7({pageBorderBox:e,draggable:t,candidates:s}):null}const mE=(e,t)=>zn(Ul(e,t));var y7=(e,t)=>{const n=e.frame;return n?mE(t,n.scroll.diff.value):t};function pE({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function v7({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var b7=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:r,viewport:i,afterCritical:a})=>{const l=n.axis,c=Wl(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=lh(t,s).find(g=>{const v=g.descriptor.id,b=g.page.borderBox.center[l.line],y=kr(v,a),w=pE({displaced:r,id:v});return y?w?h<=b:d<b-u:w?h<=b+u:d<b})||null,p=v7({draggable:t,closest:m,inHomeList:Ma(t,n)});return md({draggable:t,insideDestination:s,destination:n,viewport:i,last:r,displacedBy:c,index:p})};const w7=4;var j7=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const a=s.axis,l=Wl(s.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=lh(e,r).find(p=>{const g=p.descriptor.id,v=p.page.borderBox,y=v[a.size]/w7,w=kr(g,i),S=pE({displaced:n.displaced,id:g});return w?S?d>v[a.start]+y&&d<v[a.end]-y:u>v[a.start]-c+y&&u<v[a.end]-c-y:S?d>v[a.start]+c+y&&d<v[a.end]+c-y:u>v[a.start]+y&&u<v[a.end]-y});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:s.descriptor.id}}}:null},gE=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:r,viewport:i,afterCritical:a})=>{const l=mE(t.page.borderBox,e),c=x7({pageBorderBox:l,draggable:t,droppables:s});if(!c)return Oq;const u=s[c],d=Aa(u.descriptor.id,n),h=y7(u,l);return j7({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:r,destination:u,insideDestination:d,afterCritical:a})||b7({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:r.displaced,viewport:i,afterCritical:a})},Gx=(e,t)=>({...e,[t.descriptor.id]:t});const N7=({previousImpact:e,impact:t,droppables:n})=>{const s=cn(e),r=cn(t);if(!s||s===r)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const a=u7(i);return Gx(n,a)};var S7=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:r})=>{const i=N7({previousImpact:s,impact:r,droppables:n}),a=cn(r);if(!a)return i;const l=n[a];if(Ma(e,l)||l.subject.withPlaceholder)return i;const c=hE(l,e,t);return Gx(i,c)},Oo=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:r,scrollJumpRequest:i})=>{const a=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=an(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:jt(e.initial.client.borderBoxCenter,u)},h={selection:jt(d.selection,a.scroll.current),borderBoxCenter:jt(d.borderBoxCenter,a.scroll.current),offset:jt(d.offset,a.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:f};const m=l.draggables[e.critical.draggable.id],p=r||gE({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),g=S7({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:g},impact:p,viewport:a,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function C7(e,t){return e.map(n=>t[n])}var xE=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:r})=>{const i=e.displaced,a=C7(i.all,n),l=wl({afterDragging:a,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:r,last:i});return{...e,displaced:l}},yE=({impact:e,draggable:t,droppable:n,draggables:s,viewport:r,afterCritical:i})=>{const a=ch({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return Hx({pageBorderBoxCenter:a,draggable:t,viewport:r})},vE=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&X();const s=e.impact,r=n||e.viewport,i=t||e.dimensions,{draggables:a,droppables:l}=i,c=a[e.critical.draggable.id],u=cn(s);u||X();const d=l[u],h=xE({impact:s,viewport:r,destination:d,draggables:a}),f=yE({impact:h,draggable:c,droppable:d,draggables:a,viewport:r,afterCritical:e.afterCritical});return Oo({impact:h,clientSelection:f,state:e,dimensions:i,viewport:r})},k7=e=>({index:e.index,droppableId:e.droppableId}),bE=({draggable:e,home:t,draggables:n,viewport:s})=>{const r=Wl(t.axis,e.displaceBy),i=Aa(t.descriptor.id,n),a=i.indexOf(e);a===-1&&X();const l=i.slice(a+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:r,effected:c};return{impact:{displaced:wl({afterDragging:l,destination:t,displacedBy:r,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:k7(e.descriptor)}},afterCritical:u}},E7=(e,t)=>({draggables:e.draggables,droppables:Gx(e.droppables,t)}),D7=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=cd(e.client,t),r=ud(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:r}},T7=e=>{const t=e.frame;return t||X(),t},P7=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(r=>{const i=r.descriptor.droppableId,a=t[i],c=T7(a).scroll.diff.value,u=jt(s,c);return D7({draggable:r,offset:u,initialWindowScroll:n.scroll.initial})})},_7=({state:e,published:t})=>{const n=t.modified.map(b=>{const y=e.dimensions.droppables[b.droppableId];return zx(y,b.scroll)}),s={...e.dimensions.droppables,...nE(n)},r=sE(P7({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...r};t.removals.forEach(b=>{delete i[b]});const a={droppables:s,draggables:i},l=cn(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],d=a.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=bE({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=gE({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),g={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Ap=e=>e.movementMode==="SNAP",Bf=(e,t,n)=>{const s=E7(e.dimensions,t);return!Ap(e)||n?Oo({state:e,dimensions:s}):vE({state:e,dimensions:s})};function zf(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const e1={phase:"IDLE",completed:null,shouldFlush:!1};var A7=(e=e1,t)=>{if(t.type==="FLUSH")return{...e1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&X();const{critical:n,clientSelection:s,viewport:r,dimensions:i,movementMode:a}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:s,borderBoxCenter:l.client.borderBox.center,offset:bt},d={client:u,page:{selection:jt(u.selection,r.scroll.initial),borderBoxCenter:jt(u.selection,r.scroll.initial),offset:jt(u.selection,r.scroll.diff.value)}},h=ah(i.droppables).every(g=>!g.isFixedOnPage),{impact:f,afterCritical:m}=bE({draggable:l,home:c,draggables:i.draggables,viewport:r});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&X(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||X(),_7({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Gr(e)||X();const{client:n}=t.payload;return vr(n,e.current.client.selection)?e:Oo({state:e,clientSelection:n,impact:Ap(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return zf(e);Gr(e)||X();const{id:n,newScroll:s}=t.payload,r=e.dimensions.droppables[n];if(!r)return e;const i=zx(r,s);return Bf(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gr(e)||X();const{id:n,isEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||X(),r.isEnabled===s&&X();const i={...r,isEnabled:s};return Bf(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gr(e)||X();const{id:n,isCombineEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||X(),r.isCombineEnabled===s&&X();const i={...r,isCombineEnabled:s};return Bf(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Gr(e)||X(),e.isWindowScrollAllowed||X();const n=t.payload.newScroll;if(vr(e.viewport.scroll.current,n))return zf(e);const s=cE(e.viewport,n);return Ap(e)?vE({state:e,viewport:s}):Oo({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Gr(e))return e;const n=t.payload.maxScroll;if(vr(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&X();const n=m7({state:e,type:t.type});return n?Oo({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&X(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:r}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||X(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:r,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ae(e,t){return e instanceof Object&&"type"in e&&e.type===t}const M7=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),R7=e=>({type:"LIFT",payload:e}),I7=e=>({type:"INITIAL_PUBLISH",payload:e}),O7=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),L7=()=>({type:"COLLECTION_STARTING",payload:null}),F7=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),$7=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),B7=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),wE=e=>({type:"MOVE",payload:e}),z7=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),V7=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),U7=()=>({type:"MOVE_UP",payload:null}),W7=()=>({type:"MOVE_DOWN",payload:null}),q7=()=>({type:"MOVE_RIGHT",payload:null}),H7=()=>({type:"MOVE_LEFT",payload:null}),Yx=()=>({type:"FLUSH",payload:null}),G7=e=>({type:"DROP_ANIMATE",payload:e}),Qx=e=>({type:"DROP_COMPLETE",payload:e}),jE=e=>({type:"DROP",payload:e}),Y7=e=>({type:"DROP_PENDING",payload:e}),NE=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Q7=e=>({getState:t,dispatch:n})=>s=>r=>{if(!Ae(r,"LIFT")){s(r);return}const{id:i,clientSelection:a,movementMode:l}=r.payload,c=t();c.phase==="DROP_ANIMATING"&&n(Qx({completed:c.completed})),t().phase!=="IDLE"&&X(),n(Yx()),n(M7({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(I7({critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:m}))},K7=e=>()=>t=>n=>{Ae(n,"INITIAL_PUBLISH")&&e.dragging(),Ae(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ae(n,"FLUSH")||Ae(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const Kx={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},jl={opacity:{drop:0,combining:.7},scale:{drop:.75}},SE={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fr=`${SE.outOfTheWay}s ${Kx.outOfTheWay}`,Lo={fluid:`opacity ${Fr}`,snap:`transform ${Fr}, opacity ${Fr}`,drop:e=>{const t=`${e}s ${Kx.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fr}`,placeholder:`height ${Fr}, width ${Fr}, margin ${Fr}`},t1=e=>vr(e,bt)?void 0:`translate(${e.x}px, ${e.y}px)`,Mp={moveTo:t1,drop:(e,t)=>{const n=t1(e);if(n)return t?`${n} scale(${jl.scale.drop})`:n}},{minDropTime:Rp,maxDropTime:CE}=SE,X7=CE-Rp,n1=1500,J7=.6;var Z7=({current:e,destination:t,reason:n})=>{const s=vl(e,t);if(s<=0)return Rp;if(s>=n1)return CE;const r=s/n1,i=Rp+X7*r,a=n==="CANCEL"?i*J7:i;return Number(a.toFixed(2))},eH=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:r})=>{const{draggables:i,droppables:a}=n,l=cn(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],d=yE({impact:e,draggable:t,draggables:i,afterCritical:r,droppable:c||u,viewport:s});return an(d,t.client.borderBox.center)},tH=({draggables:e,reason:t,lastImpact:n,home:s,viewport:r,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:xE({draggables:e,impact:i,destination:s,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:bl},didDropInsideDroppable:!0};const nH=({getState:e,dispatch:t})=>n=>s=>{if(!Ae(s,"DROP")){n(s);return}const r=e(),i=s.payload.reason;if(r.phase==="COLLECTING"){t(Y7({reason:i}));return}if(r.phase==="IDLE")return;r.phase==="DROP_PENDING"&&r.isWaiting&&X(),r.phase==="DRAGGING"||r.phase==="DROP_PENDING"||X();const l=r.critical,c=r.dimensions,u=c.draggables[r.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=tH({reason:i,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),f=h?Vx(d):null,m=h?oh(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:r.movementMode,destination:f,combine:m},v=eH({impact:d,draggable:u,dimensions:c,viewport:r.viewport,afterCritical:r.afterCritical}),b={critical:r.critical,afterCritical:r.afterCritical,result:g,impact:d};if(!(!vr(r.current.client.offset,v)||!!g.combine)){t(Qx({completed:b}));return}const w=Z7({current:r.current.client.offset,destination:v,reason:i});t(G7({newHomeClientOffset:v,dropDuration:w,completed:b}))};var kE=()=>({x:window.pageXOffset,y:window.pageYOffset});function sH(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function rH({onWindowScroll:e}){function t(){e(kE())}const n=yl(t),s=sH(n);let r=yr;function i(){return r!==yr}function a(){i()&&X(),r=kn(window,[s])}function l(){i()||X(),n.cancel(),r(),r=yr}return{start:a,stop:l,isActive:i}}const iH=e=>Ae(e,"DROP_COMPLETE")||Ae(e,"DROP_ANIMATE")||Ae(e,"FLUSH"),aH=e=>{const t=rH({onWindowScroll:n=>{e.dispatch(z7({newScroll:n}))}});return n=>s=>{!t.isActive()&&Ae(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&iH(s)&&t.stop(),n(s)}};var oH=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),r=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return r.wasCalled=()=>t,r},lH=()=>{const e=[],t=r=>{const i=e.findIndex(l=>l.timerId===r);i===-1&&X();const[a]=e.splice(i,1);a.callback()};return{add:r=>{const i=setTimeout(()=>t(i)),a={timerId:i,callback:r};e.push(a)},flush:()=>{if(!e.length)return;const r=[...e];e.length=0,r.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const cH=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,uH=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,dH=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},ro=(e,t)=>{t()},Rc=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Vf(e,t,n,s){if(!e){n(s(t));return}const r=oH(n);e(t,{announce:r}),r.wasCalled()||n(s(t))}var hH=(e,t)=>{const n=lH();let s=null;const r=(h,f)=>{s&&X(),ro("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{s&&X(),ro("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(Rc(h,f))})},a=(h,f)=>{s&&X();const m=Rc(h,f);s={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{ro("onDragStart",()=>Vf(e().onDragStart,m,t,ou.onDragStart))})},l=(h,f)=>{const m=Vx(f),p=oh(f);s||X();const g=!dH(h,s.lastCritical);g&&(s.lastCritical=h);const v=!cH(s.lastLocation,m);v&&(s.lastLocation=m);const b=!uH(s.lastCombine,p);if(b&&(s.lastCombine=p),!g&&!v&&!b)return;const y={...Rc(h,s.mode),combine:p,destination:m};n.add(()=>{ro("onDragUpdate",()=>Vf(e().onDragUpdate,y,t,ou.onDragUpdate))})},c=()=>{s||X(),n.flush()},u=h=>{s||X(),s=null,ro("onDragEnd",()=>Vf(e().onDragEnd,h,t,ou.onDragEnd))};return{beforeCapture:r,beforeStart:i,start:a,update:l,flush:c,drop:u,abort:()=>{if(!s)return;const h={...Rc(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},fH=(e,t)=>{const n=hH(e,t);return s=>r=>i=>{if(Ae(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ae(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),r(i),n.start(l,i.payload.movementMode);return}if(Ae(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),r(i),n.drop(l);return}if(r(i),Ae(i,"FLUSH")){n.abort();return}const a=s.getState();a.phase==="DRAGGING"&&n.update(a.critical,a.impact)}};const mH=e=>t=>n=>{if(!Ae(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&X(),e.dispatch(Qx({completed:s.completed}))},pH=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return r=>i=>{if((Ae(i,"FLUSH")||Ae(i,"DROP_COMPLETE")||Ae(i,"DROP_ANIMATION_FINISHED"))&&s(),r(i),!Ae(i,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(NE())}};n=requestAnimationFrame(()=>{n=null,t=kn(window,[a])})}};var gH=e=>()=>t=>n=>{(Ae(n,"DROP_COMPLETE")||Ae(n,"FLUSH")||Ae(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},xH=e=>{let t=!1;return()=>n=>s=>{if(Ae(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Ae(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ae(s,"DROP_COMPLETE")){t=!1;const r=s.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const yH=e=>Ae(e,"DROP_COMPLETE")||Ae(e,"DROP_ANIMATE")||Ae(e,"FLUSH");var vH=e=>t=>n=>s=>{if(yH(s)){e.stop(),n(s);return}if(Ae(s,"INITIAL_PUBLISH")){n(s);const r=t.getState();r.phase!=="DRAGGING"&&X(),e.start(r);return}n(s),e.scroll(t.getState())};const bH=e=>t=>n=>{if(t(n),!Ae(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(jE({reason:s.reason})))},wH=Vk;var jH=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:r,autoScroller:i})=>zk(A7,wH(pW(K7(n),gH(e),Q7(e),nH,mH,pH,bH,vH(i),aH,xH(t),fH(s,r))));const Uf=()=>({additions:{},removals:{},modified:{}});function NH({registry:e,callbacks:t}){let n=Uf(),s=null;const r=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(bt)).sort((p,g)=>p.descriptor.index-g.descriptor.index),f=Object.keys(d).map(p=>{const v=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:v}}),m={additions:h,removals:Object.keys(u),modified:f};n=Uf(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],r()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],r()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=Uf())}}}var EE=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const r=an({x:t,y:e},{x:s,y:n});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},DE=()=>{const e=document.documentElement;return e||X(),e},TE=()=>{const e=DE();return EE({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},SH=()=>{const e=kE(),t=TE(),n=e.y,s=e.x,r=DE(),i=r.clientWidth,a=r.clientHeight,l=s+i,c=n+a;return{frame:zn({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:bt,displacement:bt}}}},CH=({critical:e,scrollOptions:t,registry:n})=>{const s=SH(),r=s.scroll.current,i=e.droppable,a=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(r,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(r));return{dimensions:{draggables:sE(l),droppables:nE(a)},critical:e,viewport:s}};function s1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var kH=(e,t)=>{let n=null;const s=NH({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=(f,m)=>{e.droppable.exists(f)||X(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||X(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},a=(f,m)=>{n&&(e.droppable.exists(f)||X(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;s.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||X();const m=n.critical.draggable;f.type==="ADDITION"&&s1(e,m,f.value)&&s.add(f.value),f.type==="REMOVAL"&&s1(e,m,f.value)&&s.remove(f.value)};return{updateDroppableIsEnabled:r,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:a,startPublishing:f=>{n&&X();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),g={draggable:m.descriptor,droppable:p.descriptor},v=e.subscribe(u);return n={critical:g,unsubscribe:v},CH({critical:g,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},PE=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",EH=e=>{window.scrollBy(e.x,e.y)};const DH=vt(e=>ah(e).filter(t=>!(!t.isEnabled||!t.frame))),TH=(e,t)=>DH(t).find(s=>(s.frame||X(),fE(s.frame.pageMarginBox)(e)))||null;var PH=({center:e,destination:t,droppables:n})=>{if(t){const r=n[t];return r.frame?r:null}return TH(e,n)};const Nl={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var _H=(e,t,n=()=>Nl)=>{const s=n(),r=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:r,maxScrollValueAt:i}},_E=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},Xx=1,AH=(e,t,n=()=>Nl)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return Xx;const i=1-_E({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=s.maxPixelScroll*s.ease(i);return Math.ceil(a)},MH=(e,t,n)=>{const s=n(),r=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,a=t,l=i,u=Date.now()-a;if(u>=i)return e;if(u<r)return Xx;const d=_E({startOfRange:r,endOfRange:l,current:u}),h=e*s.ease(d);return Math.ceil(h)},r1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:r})=>{const i=AH(e,t,r);return i===0?0:s?Math.max(MH(i,n,r),Xx):i},i1=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=_H(e,s,i);return t[s.end]<t[s.start]?r1({distanceToEdge:t[s.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i}):-1*r1({distanceToEdge:t[s.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})},RH=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,r=t.width>e.width;return!r&&!s?n:r&&s?null:{x:r?0:n.x,y:s?0:n.y}};const IH=tE(e=>e===0?0:e);var AE=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=i1({container:t,distanceToEdges:a,dragStartTime:e,axis:Ux,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),c=i1({container:t,distanceToEdges:a,dragStartTime:e,axis:aE,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),u=IH({x:c,y:l});if(vr(u,bt))return null;const d=RH({container:t,subject:n,proposedScroll:u});return d?vr(d,bt)?null:d:null};const OH=tE(e=>e===0?0:e>0?1:-1),Jx=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const r=jt(t,s),i={x:e(r.x,n.x),y:e(r.y,n.y)};return vr(i,bt)?null:i}})(),ME=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},r=OH(n),i=Jx({max:s,current:t,change:r});return!i||r.x!==0&&i.x===0||r.y!==0&&i.y===0},Zx=(e,t)=>ME({current:e.scroll.current,max:e.scroll.max,change:t}),LH=(e,t)=>{if(!Zx(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return Jx({current:s,max:n,change:t})},ey=(e,t)=>{const n=e.frame;return n?ME({current:n.scroll.current,max:n.scroll.max,change:t}):!1},FH=(e,t)=>{const n=e.frame;return!n||!ey(e,t)?null:Jx({current:n.scroll.current,max:n.scroll.max,change:t})};var $H=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=AE({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return a&&Zx(e,a)?a:null},BH=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=e.frame;if(!a)return null;const l=AE({dragStartTime:s,container:a.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return l&&ey(e,l)?l:null},a1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:r,getAutoScrollerOptions:i})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=$H({dragStartTime:t,viewport:h,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){s(f);return}}const u=PH({center:a,destination:cn(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=BH({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&r(u.descriptor.id,d)},zH=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Nl})=>{const s=yl(e),r=yl(t);let i=null;const a=u=>{i||X();const{shouldUseTimeDampening:d,dragStartTime:h}=i;a1({state:u,scrollWindow:s,scrollDroppable:r,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&X();const d=Date.now();let h=!1;const f=()=>{h=!0};a1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&a(u)},stop:()=>{i&&(s.cancel(),r.cancel(),i=null)},scroll:a}},VH=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const u=jt(l.current.client.selection,c);e({client:u})},r=(l,c)=>{if(!ey(l,c))return c;const u=FH(l,c);if(!u)return t(l.descriptor.id,c),null;const d=an(c,u);return t(l.descriptor.id,d),an(c,d)},i=(l,c,u)=>{if(!l||!Zx(c,u))return u;const d=LH(c,u);if(!d)return n(u),null;const h=an(u,d);return n(h),an(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=cn(l.impact);u||X();const d=r(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&s(l,f)}},UH=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const r=zH({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=VH({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){r.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:r.start,stop:r.stop}};const pa="data-rfd",ga=(()=>{const e=`${pa}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Ip=(()=>{const e=`${pa}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),WH=(()=>{const e=`${pa}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),o1={contextId:`${pa}-scroll-container-context-id`},qH=e=>t=>`[${t}="${e}"]`,io=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),HH="pointer-events: none;";var GH=e=>{const t=qH(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ga.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:HH,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${Lo.outOfTheWay};
    `;return{selector:t(Ip.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),r={selector:t(WH.contextId),styles:{always:"overflow-anchor: none;"}},a=[s,n,r,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:io(a,"always"),resting:io(a,"resting"),dragging:io(a,"dragging"),dropAnimating:io(a,"dropAnimating"),userCancel:io(a,"userCancel")}};const un=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,Wf=()=>{const e=document.querySelector("head");return e||X(),e},l1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function YH(e,t){const n=Ee(()=>GH(e),[e]),s=x.useRef(null),r=x.useRef(null),i=fe(vt(h=>{const f=r.current;f||X(),f.textContent=h}),[]),a=fe(h=>{const f=s.current;f||X(),f.textContent=h},[]);un(()=>{!s.current&&!r.current||X();const h=l1(t),f=l1(t);return s.current=h,r.current=f,h.setAttribute(`${pa}-always`,e),f.setAttribute(`${pa}-dynamic`,e),Wf().appendChild(h),Wf().appendChild(f),a(n.always),i(n.resting),()=>{const m=p=>{const g=p.current;g||X(),Wf().removeChild(g),p.current=null};m(s),m(r)}},[t,a,i,n.always,n.resting,e]);const l=fe(()=>i(n.dragging),[i,n.dragging]),c=fe(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=fe(()=>{r.current&&i(n.resting)},[i,n.resting]);return Ee(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function RE(e,t){return Array.from(e.querySelectorAll(t))}var IE=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function uh(e){return e instanceof IE(e).HTMLElement}function QH(e,t){const n=`[${ga.contextId}="${e}"]`,s=RE(document,n);if(!s.length)return null;const r=s.find(i=>i.getAttribute(ga.draggableId)===t);return!r||!uh(r)?null:r}function KH(e){const t=x.useRef({}),n=x.useRef(null),s=x.useRef(null),r=x.useRef(!1),i=fe(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const v=t.current;v[f]!==p&&delete v[f]}},[]),a=fe(function(f){const m=QH(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=fe(function(f,m){n.current===f&&(n.current=m)},[]),c=fe(function(){s.current||r.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const f=n.current;f&&a(f)}))},[a]),u=fe(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(ga.draggableId)===f&&(n.current=f)},[]);return un(()=>(r.current=!0,function(){r.current=!1;const f=s.current;f&&cancelAnimationFrame(f)}),[]),Ee(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function XH(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function s(h){t.length&&t.forEach(f=>f(h))}function r(h){return e.draggables[h]||null}function i(h){const f=r(h);return f||X(),f}const a={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=r(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:r,exists:h=>!!r(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||X(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function JH(){const e=Ee(XH,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var ty=ee.createContext(null),pd=()=>{const e=document.body;return e||X(),e};const ZH={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},e9=e=>`rfd-announcement-${e}`;function t9(e){const t=Ee(()=>e9(e),[e]),n=x.useRef(null);return x.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),dd(i.style,ZH),pd().appendChild(i),function(){setTimeout(function(){const c=pd();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),fe(r=>{const i=n.current;if(i){i.textContent=r;return}},[])}const n9={separator:"::"};function ny(e,t=n9){const n=ee.useId();return Ee(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function s9({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function r9({contextId:e,text:t}){const n=ny("hidden-text",{separator:"-"}),s=Ee(()=>s9({contextId:e,uniqueId:n}),[n,e]);return x.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",pd().appendChild(i),function(){const l=pd();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var dh=ee.createContext(null);function OE(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function i9(){let e=null;function t(){return!!e}function n(a){return a===e}function s(a){e&&X();const l={abandon:a};return e=l,l}function r(){e||X(),e=null}function i(){e&&(e.abandon(),r())}return{isClaimed:t,isActive:n,claim:s,release:r,tryAbandon:i}}function Sl(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const a9=9,o9=13,sy=27,LE=32,l9=33,c9=34,u9=35,d9=36,h9=37,f9=38,m9=39,p9=40,g9={[o9]:!0,[a9]:!0};var FE=e=>{g9[e.keyCode]&&e.preventDefault()};const hh=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),$E=0,c1=5;function x9(e,t){return Math.abs(t.x-e.x)>=c1||Math.abs(t.y-e.y)>=c1}const u1={type:"IDLE"};function y9({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:r=>{const{button:i,clientX:a,clientY:l}=r;if(i!==$E)return;const c={x:a,y:l},u=n();if(u.type==="DRAGGING"){r.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&X();const d=u.point;if(!x9(d,c))return;r.preventDefault();const h=u.actions.fluidLift(c);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:r=>{n().type==="DRAGGING"&&r.preventDefault(),e()}},{eventName:"keydown",fn:r=>{if(n().type==="PENDING"){e();return}if(r.keyCode===sy){r.preventDefault(),e();return}FE(r)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:r=>{const i=n();if(i.type==="IDLE"&&X(),i.actions.shouldRespectForcePress()){e();return}r.preventDefault()}},{eventName:hh,fn:e}]}function v9(e){const t=x.useRef(u1),n=x.useRef(yr),s=Ee(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==$E||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,a,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),r=Ee(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=fe(function(){const h={passive:!1,capture:!0};n.current=kn(window,[r,s],h)},[r,s]),a=fe(()=>{t.current.type!=="IDLE"&&(t.current=u1,n.current(),i())},[i]),l=fe(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=fe(function(){const h={capture:!0,passive:!1},f=y9({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=kn(window,f,h)},[l,a]),u=fe(function(h,f){t.current.type!=="IDLE"&&X(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);un(function(){return i(),function(){n.current()}},[i])}function b9(){}const w9={[c9]:!0,[l9]:!0,[d9]:!0,[u9]:!0};function j9(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:r=>{if(r.keyCode===sy){r.preventDefault(),n();return}if(r.keyCode===LE){r.preventDefault(),s();return}if(r.keyCode===p9){r.preventDefault(),e.moveDown();return}if(r.keyCode===f9){r.preventDefault(),e.moveUp();return}if(r.keyCode===m9){r.preventDefault(),e.moveRight();return}if(r.keyCode===h9){r.preventDefault(),e.moveLeft();return}if(w9[r.keyCode]){r.preventDefault();return}FE(r)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:hh,fn:n}]}function N9(e){const t=x.useRef(b9),n=Ee(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==LE)return;const a=e.findClosestDraggableId(i);if(!a)return;const l=e.tryGetLock(a,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||X(),c=!1,t.current(),s()}t.current=kn(window,j9(u,d),{capture:!0,passive:!1})}}),[e]),s=fe(function(){const i={passive:!1,capture:!0};t.current=kn(window,[n],i)},[n]);un(function(){return s(),function(){t.current()}},[s])}const qf={type:"IDLE"},S9=120,C9=.15;function k9({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===sy&&n.preventDefault(),e()}},{eventName:hh,fn:e}]}function E9({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}r.hasMoved=!0;const{clientX:i,clientY:a}=s.touches[0],l={x:i,y:a};s.preventDefault(),r.actions.move(l)}},{eventName:"touchend",fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}s.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const r=n();r.type==="IDLE"&&X();const i=s.touches[0];if(!i||!(i.force>=C9))return;const l=r.actions.shouldRespectForcePress();if(r.type==="PENDING"){l&&e();return}if(l){if(r.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:hh,fn:e}]}function D9(e){const t=x.useRef(qf),n=x.useRef(yr),s=fe(function(){return t.current},[]),r=fe(function(m){t.current=m},[]),i=Ee(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const g=e.tryGetLock(p,l,{sourceEvent:m});if(!g)return;const v=m.touches[0],{clientX:b,clientY:y}=v,w={x:b,y};n.current(),h(g,w)}}),[e]),a=fe(function(){const m={capture:!0,passive:!1};n.current=kn(window,[i],m)},[i]),l=fe(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),r(qf),n.current(),a())},[a,r]),c=fe(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=fe(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:s},g=kn(window,E9(p),m),v=kn(window,k9(p),m);n.current=function(){g(),v()}},[c,s,l]),d=fe(function(){const m=s();m.type!=="PENDING"&&X();const p=m.actions.fluidLift(m.point);r({type:"DRAGGING",actions:p,hasMoved:!1})},[s,r]),h=fe(function(m,p){s().type!=="IDLE"&&X();const g=setTimeout(d,S9);r({type:"PENDING",point:p,actions:m,longPressTimerId:g}),u()},[u,s,r,d]);un(function(){return a(),function(){n.current();const p=s();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),r(qf))}},[s,a,r]),un(function(){return kn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const T9=["input","button","textarea","select","option","optgroup","video","audio"];function BE(e,t){if(t==null)return!1;if(T9.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:BE(e,t.parentElement)}function P9(e,t){const n=t.target;return uh(n)?BE(e,n):!1}var _9=e=>zn(e.getBoundingClientRect()).center;function A9(e){return e instanceof IE(e).Element}const M9=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function zE(e,t){return e==null?null:e[M9](t)?e:zE(e.parentElement,t)}function R9(e,t){return e.closest?e.closest(t):zE(e,t)}function I9(e){return`[${ga.contextId}="${e}"]`}function O9(e,t){const n=t.target;if(!A9(n))return null;const s=I9(e),r=R9(n,s);return!r||!uh(r)?null:r}function L9(e,t){const n=O9(e,t);return n?n.getAttribute(ga.draggableId):null}function F9(e,t){const n=`[${Ip.contextId}="${e}"]`,r=RE(document,n).find(i=>i.getAttribute(Ip.id)===t);return!r||!uh(r)?null:r}function $9(e){e.preventDefault()}function Ic({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function VE({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const r=n.draggable.findById(s);return!(!r||!r.options.isEnabled||!PE(t.getState(),s))}function B9({lockAPI:e,contextId:t,store:n,registry:s,draggableId:r,forceSensorStop:i,sourceEvent:a}){if(!VE({lockAPI:e,store:n,registry:s,draggableId:r}))return null;const c=s.draggable.getById(r),u=F9(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&P9(u,a))return null;const d=e.claim(i||yr);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(N,j){Ic({expected:N,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(j())}const g=p.bind(null,"DRAGGING");function v(N){function j(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(j(),X()),n.dispatch(R7(N.liftActionArgs)),h="DRAGGING";function k(C,P={shouldBlockNextClick:!1}){if(N.cleanup(),P.shouldBlockNextClick){const T=kn(window,[{eventName:"click",fn:$9,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}j(),n.dispatch(jE({reason:C}))}return{isActive:()=>Ic({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:C=>k("DROP",C),cancel:C=>k("CANCEL",C),...N.actions}}function b(N){const j=yl(C=>{g(()=>wE({client:C}))});return{...v({liftActionArgs:{id:r,clientSelection:N,movementMode:"FLUID"},cleanup:()=>j.cancel(),actions:{move:j}}),move:j}}function y(){const N={moveUp:()=>g(U7),moveRight:()=>g(q7),moveDown:()=>g(W7),moveLeft:()=>g(H7)};return v({liftActionArgs:{id:r,clientSelection:_9(u),movementMode:"SNAP"},cleanup:yr,actions:N})}function w(){Ic({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Ic({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:b,snapLift:y,abort:w}}const z9=[v9,N9,D9];function V9({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:r}){const i=[...r?z9:[],...s||[]],a=x.useState(()=>i9())[0],l=fe(function(v,b){Sl(v)&&!Sl(b)&&a.tryAbandon()},[a]);un(function(){let v=t.getState();return t.subscribe(()=>{const y=t.getState();l(v,y),v=y})},[a,t,l]),un(()=>a.tryAbandon,[a.tryAbandon]);const c=fe(g=>VE({lockAPI:a,registry:n,store:t,draggableId:g}),[a,n,t]),u=fe((g,v,b)=>B9({lockAPI:a,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:v||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,a,n,t]),d=fe(g=>L9(e,g),[e]),h=fe(g=>{const v=n.draggable.findById(g);return v?v.options:null},[n.draggable]),f=fe(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(Yx()))},[a,t]),m=fe(()=>a.isClaimed(),[a]),p=Ee(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let g=0;g<i.length;g++)i[g](p)}const U9=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Pl.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),W9=e=>({...Nl,...e.autoScrollerOptions,durationDampening:{...Nl.durationDampening,...e.autoScrollerOptions}});function ao(e){return e.current||X(),e.current}function q9(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:r,dragHandleUsageInstructions:i}=e,a=x.useRef(null),l=OE(e),c=fe(()=>U9(l.current),[l]),u=fe(()=>W9(l.current),[l]),d=t9(t),h=r9({contextId:t,text:i}),f=YH(t,r),m=fe(T=>{ao(a).dispatch(T)},[]),p=Ee(()=>Fw({publishWhileDragging:O7,updateDroppableScroll:F7,updateDroppableIsEnabled:$7,updateDroppableIsCombineEnabled:B7,collectionStarting:L7},m),[m]),g=JH(),v=Ee(()=>kH(g,p),[g,p]),b=Ee(()=>UH({scrollWindow:EH,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:u,...Fw({move:wE},m)}),[v.scrollDroppable,m,u]),y=KH(t),w=Ee(()=>jH({announce:d,autoScroller:b,dimensionMarshal:v,focusMarshal:y,getResponders:c,styleMarshal:f}),[d,b,v,y,c,f]);a.current=w;const S=fe(()=>{const T=ao(a);T.getState().phase!=="IDLE"&&T.dispatch(Yx())},[]),N=fe(()=>{const T=ao(a).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),j=Ee(()=>({isDragging:N,tryAbort:S}),[N,S]);n(j);const k=fe(T=>PE(ao(a).getState(),T),[]),C=fe(()=>Gr(ao(a).getState()),[]),P=Ee(()=>({marshal:v,focus:y,contextId:t,canLift:k,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:g}),[t,v,h,y,k,C,g]);return V9({contextId:t,store:w,registry:g,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>S,[S]),ee.createElement(dh.Provider,{value:P},ee.createElement(gq,{context:ty,store:w},e.children))}function H9(){return ee.useId()}function G9(e){const t=H9(),n=e.dragHandleUsageInstructions||ou.dragHandleUsageInstructions;return ee.createElement(Nq,null,s=>ee.createElement(q9,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const d1={dragging:5e3,dropAnimating:4500},Y9=(e,t)=>t?Lo.drop(t.duration):e?Lo.snap:Lo.fluid,Q9=(e,t)=>{if(e)return t?jl.opacity.drop:jl.opacity.combining},K9=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function X9(e){const n=e.dimension.client,{offset:s,combineWith:r,dropping:i}=e,a=!!r,l=K9(e),c=!!i,u=c?Mp.drop(s,a):Mp.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Y9(l,i),transform:u,opacity:Q9(a,c),zIndex:c?d1.dropAnimating:d1.dragging,pointerEvents:"none"}}function J9(e){return{transform:Mp.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Z9(e){return e.type==="DRAGGING"?X9(e):J9(e)}function eG(e,t,n=bt){const s=window.getComputedStyle(t),r=t.getBoundingClientRect(),i=Qk(r,s),a=ud(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:a}}function tG(e){const t=ny("draggable"),{descriptor:n,registry:s,getDraggableRef:r,canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}=e,c=Ee(()=>({canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}),[i,l,a]),u=fe(m=>{const p=r();return p||X(),eG(n,p,m)},[n,r]),d=Ee(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=x.useRef(d),f=x.useRef(!0);un(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),un(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,s.draggable.update(d,m)},[d,s.draggable])}var ry=ee.createContext(null);function gd(e){const t=x.useContext(e);return t||X(),t}function nG(e){e.preventDefault()}const sG=e=>{const t=x.useRef(null),n=fe((j=null)=>{t.current=j},[]),s=fe(()=>t.current,[]),{contextId:r,dragHandleUsageInstructionsId:i,registry:a}=gd(dh),{type:l,droppableId:c}=gd(ry),u=Ee(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:g,mapped:v,dropAnimationFinished:b}=e;if(!g){const j=Ee(()=>({descriptor:u,registry:a,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,a,s,p,m,f]);tG(j)}const y=Ee(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":r,draggable:!1,onDragStart:nG}:null,[r,i,h,f]),w=fe(j=>{v.type==="DRAGGING"&&v.dropping&&j.propertyName==="transform"&&Pl.flushSync(b)},[b,v]),S=Ee(()=>{const j=Z9(v),k=v.type==="DRAGGING"&&v.dropping?w:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":r,"data-rfd-draggable-id":h,style:j,onTransitionEnd:k},dragHandleProps:y}},[r,y,h,v,w,n]),N=Ee(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return ee.createElement(ee.Fragment,null,d(S,v.snapshot,N))};var UE=(e,t)=>e===t,WE=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const rG=e=>e.combine?e.combine.draggableId:null,iG=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function aG(){const e=vt((r,i)=>({x:r,y:i})),t=vt((r,i,a=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:r,draggingOver:a,combineWith:l,combineTargetFor:null})),n=vt((r,i,a,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:r,dimension:a,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(r,i)=>{if(Sl(r)){if(r.critical.draggable.id!==i.draggableId)return null;const a=r.current.client.offset,l=r.dimensions.draggables[i.draggableId],c=cn(r.impact),u=iG(r.impact),d=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,l,i.isClone,c,u,d)}if(r.phase==="DROP_ANIMATING"){const a=r.completed;if(a.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=r.dimensions.draggables[i.draggableId],u=a.result,d=u.mode,h=WE(u),f=rG(u),p={duration:r.dropDuration,curve:Kx.drop,moveTo:r.newHomeClientOffset,opacity:f?jl.opacity.drop:null,scale:f?jl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function qE(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const oG={mapped:{type:"SECONDARY",offset:bt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:qE(null)}};function lG(){const e=vt((a,l)=>({x:a,y:l})),t=vt(qE),n=vt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=a=>a?n(bt,a,!0):null,r=(a,l,c,u)=>{const d=c.displaced.visible[a],h=!!(u.inVirtualList&&u.effected[a]),f=oh(c),m=f&&f.draggableId===a?l:null;if(!d){if(!h)return s(m);if(c.displaced.invisible[a])return null;const v=_a(u.displacedBy.point),b=e(v.x,v.y);return n(b,m,!0)}if(h)return s(m);const p=c.displacedBy.point,g=e(p.x,p.y);return n(g,m,d.shouldAnimate)};return(a,l)=>{if(Sl(a))return a.critical.draggable.id===l.draggableId?null:r(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:r(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const cG=()=>{const e=aG(),t=lG();return(s,r)=>e(s,r)||t(s,r)||oG},uG={dropAnimationFinished:NE},dG=Yk(cG,uG,null,{context:ty,areStatePropsEqual:UE})(sG);function HE(e){return gd(ry).isUsingCloneFor===e.draggableId&&!e.isClone?null:ee.createElement(dG,e)}function hG(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ee.createElement(HE,dd({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const GE=e=>t=>e===t,fG=GE("scroll"),mG=GE("auto"),h1=(e,t)=>t(e.overflowX)||t(e.overflowY),pG=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return h1(n,fG)||h1(n,mG)},gG=()=>!1,YE=e=>e==null?null:e===document.body?gG()?e:null:e===document.documentElement?null:pG(e)?e:YE(e.parentElement);var Op=e=>({x:e.scrollLeft,y:e.scrollTop});const QE=e=>e?window.getComputedStyle(e).position==="fixed"?!0:QE(e.parentElement):!1;var xG=e=>{const t=YE(e),n=QE(e);return{closestScrollable:t,isFixedOnPage:n}},yG=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:r,client:i,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=EE({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:bt,displacement:bt}}}})(),u=r==="vertical"?Ux:aE,d=ma({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:u,isEnabled:t,client:i,page:a,frame:c,subject:d}};const vG=(e,t)=>{const n=Kk(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,r=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,a=r+t.scrollWidth,c=$x({top:s,right:a,bottom:i,left:r},n.border);return Bx({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var bG=({ref:e,descriptor:t,env:n,windowScroll:s,direction:r,isDropDisabled:i,isCombineEnabled:a,shouldClipSubject:l})=>{const c=n.closestScrollable,u=vG(e,c),d=ud(u,s),h=(()=>{if(!c)return null;const m=Kk(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:ud(m,s),scroll:Op(c),scrollSize:p,shouldClipSubject:l}})();return yG({descriptor:t,isEnabled:!i,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:r,client:u,page:d,closest:h})};const wG={passive:!1},jG={passive:!0};var f1=e=>e.shouldPublishImmediately?wG:jG;const Oc=e=>e&&e.env.closestScrollable||null;function NG(e){const t=x.useRef(null),n=gd(dh),s=ny("droppable"),{registry:r,marshal:i}=n,a=OE(e),l=Ee(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=x.useRef(l),u=Ee(()=>vt((S,N)=>{t.current||X();const j={x:S,y:N};i.updateDroppableScroll(l.id,j)}),[l.id,i]),d=fe(()=>{const S=t.current;return!S||!S.env.closestScrollable?bt:Op(S.env.closestScrollable)},[]),h=fe(()=>{const S=d();u(S.x,S.y)},[d,u]),f=Ee(()=>yl(h),[h]),m=fe(()=>{const S=t.current,N=Oc(S);if(S&&N||X(),S.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=fe((S,N)=>{t.current&&X();const j=a.current,k=j.getDroppableRef();k||X();const C=xG(k),P={ref:k,descriptor:l,env:C,scrollOptions:N};t.current=P;const T=bG({ref:k,descriptor:l,env:C,windowScroll:S,direction:j.direction,isDropDisabled:j.isDropDisabled,isCombineEnabled:j.isCombineEnabled,shouldClipSubject:!j.ignoreContainerClipping}),O=C.closestScrollable;return O&&(O.setAttribute(o1.contextId,n.contextId),O.addEventListener("scroll",m,f1(P.scrollOptions))),T},[n.contextId,l,m,a]),g=fe(()=>{const S=t.current,N=Oc(S);return S&&N||X(),Op(N)},[]),v=fe(()=>{const S=t.current;S||X();const N=Oc(S);t.current=null,N&&(f.cancel(),N.removeAttribute(o1.contextId),N.removeEventListener("scroll",m,f1(S.scrollOptions)))},[m,f]),b=fe(S=>{const N=t.current;N||X();const j=Oc(N);j||X(),j.scrollTop+=S.y,j.scrollLeft+=S.x},[]),y=Ee(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:g,dragStopped:v,scroll:b}),[v,p,g,b]),w=Ee(()=>({uniqueId:s,descriptor:l,callbacks:y}),[y,l,s]);un(()=>(c.current=w.descriptor,r.droppable.register(w),()=>{t.current&&v(),r.droppable.unregister(w)}),[y,l,v,w,i,r.droppable]),un(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),un(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Hf(){}const m1={width:0,height:0,margin:Pq},SG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?m1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},CG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=SG({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Lo.placeholder:null}},kG=e=>{const t=x.useRef(null),n=fe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:r,onClose:i,contextId:a}=e,[l,c]=x.useState(e.animate==="open");x.useEffect(()=>l?s!=="open"?(n(),c(!1),Hf):t.current?Hf:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):Hf,[s,l,n]);const u=fe(h=>{h.propertyName==="height"&&(r(),s==="close"&&i())},[s,i,r]),d=CG({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return ee.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var EG=ee.memo(kG);class DG extends ee.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const TG=e=>{const t=x.useContext(dh);t||X();const{contextId:n,isMovementAllowed:s}=t,r=x.useRef(null),i=x.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:g,updateViewportMaxScroll:v,getContainerForClone:b}=e,y=fe(()=>r.current,[]),w=fe((O=null)=>{r.current=O},[]);fe(()=>i.current,[]);const S=fe((O=null)=>{i.current=O},[]),N=fe(()=>{s()&&v({maxScroll:TE()})},[s,v]);NG({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:y});const j=Ee(()=>ee.createElement(DG,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:O,data:L,animate:F})=>ee.createElement(EG,{placeholder:L,onClose:O,innerRef:S,animate:F,contextId:n,onTransitionEnd:N})),[n,N,e.placeholder,e.shouldAnimatePlaceholder,S]),k=Ee(()=>({innerRef:w,placeholder:j,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,j,w]),C=g?g.dragging.draggableId:null,P=Ee(()=>({droppableId:l,type:c,isUsingCloneFor:C}),[l,C,c]);function T(){if(!g)return null;const{dragging:O,render:L}=g,F=ee.createElement(HE,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(_,B)=>L(_,B,O));return EP.createPortal(F,b())}return ee.createElement(ry.Provider,{value:P},a(k,p),T())};function PG(){return document.body||X(),document.body}const p1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:PG},KE=e=>{let t={...e},n;for(n in p1)e[n]===void 0&&(t={...t,[n]:p1[n]});return t},Gf=(e,t)=>e===t.droppable.type,g1=(e,t)=>t.draggables[e.draggable.id],_G=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=vt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=vt((i,a,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:p}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,a)=>{const l=KE(a),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(Sl(i)){const f=i.critical;if(!Gf(u,f))return t;const m=g1(f,i.dimensions),p=cn(i.impact)===c;return s(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!Gf(u,f.critical))return t;const m=g1(f.critical,i.dimensions);return s(c,d,WE(f.result)===c,cn(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!Gf(u,f.critical))return t;const m=cn(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),g=f.critical.droppable.id===c;return m?p?e:t:g?e:t}return t}},AG={updateViewportMaxScroll:V7},MG=Yk(_G,AG,(e,t,n)=>({...KE(n),...e,...t}),{context:ty,areStatePropsEqual:UE})(TG),Yf=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function RG(){const{user:e}=Ge(),[t,n]=x.useState([]),[s,r]=x.useState(!0),[i,a]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState({show:!1,title:""}),m=Mn();x.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0),d(null);const C=await Yd(),T=(O=>Array.isArray(O)?O:O&&typeof O=="object"&&O.data&&Array.isArray(O.data)||O&&typeof O=="object"&&O.success&&Array.isArray(O.data)?O.data:[])(C);console.log("🧪 Debug deals response:",{originalResponse:C,extractedData:T,isArray:Array.isArray(T),length:Array.isArray(T)?T.length:"not array"}),!T||T.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${T.length} deals`),n(T),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(C){console.error("Error fetching deals:",C),d(C instanceof Error?C:new Error("Unknown error fetching deals"));let P="Please check your network connection and ensure the server is running.";C instanceof Error&&(P+=` Error details: ${C.message}`),v("Error fetching deals","error",P),n([])}finally{r(!1)}},g=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},v=(C,P="success",T)=>{f({show:!0,title:C,variant:P,description:T}),setTimeout(()=>f({show:!1,title:""}),5e3)},b=async C=>{var A,R;if(a(!1),console.log("Drag end event:",C),!C.destination){console.log("No destination provided in drag result");return}if(C.source.droppableId===C.destination.droppableId&&C.source.index===C.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:P,destination:T,source:O}=C,L=T.droppableId,F=O.droppableId;console.log(`Moving deal ${P} from ${F} to ${L}`);const _=`Moving deal to ${((A=Yf.find(V=>V.id===L))==null?void 0:A.label)||L}...`;v(_,"warning");const B=[...t];if(!t.find(V=>V.id===P)){console.error(`Deal with ID ${P} not found`),v("Error updating deal","error","Could not find the deal in the current view");return}const I=t.map(V=>V.id===P?{...V,stage:L}:V);n(I);try{console.log(`Calling API to update deal ${P} to stage ${L}`);const V=await i2(P,L);if(V){console.log("Deal updated successfully:",V),n(re=>re.map(oe=>oe.id===P?V:oe));const H=((R=Yf.find(re=>re.id===L))==null?void 0:R.label)||L,J=V.title||"Deal";v(`Deal moved to ${H}`,"success",`"${J}" has been successfully moved to the ${H} stage.`),L==="won"&&w(V)}else console.error("Server returned null for updated deal"),n(B),v("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(V){console.error("Error updating deal stage:",V),n(B);const H=V instanceof Error?`Error: ${V.message}`:"An unknown error occurred while updating the deal";v("Error updating deal stage","error",H)}},y=()=>{a(!0),h.show&&f({show:!1,title:""})},w=C=>{v("Schedule a job for this deal","success",`You've won the deal with ${C.customer.name}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${C.id}&action=schedule&customerName=${encodeURIComponent(C.customer.name)}`)},1500)},S=Array.isArray(t)?t.filter(C=>{var O;const P=C.title||"",T=((O=C.customer)==null?void 0:O.name)||"";return P.toLowerCase().includes(l.toLowerCase())||T.toLowerCase().includes(l.toLowerCase())}):[],N=C=>S.filter(P=>P.stage===C),j=C=>N(C).reduce((P,T)=>P+T.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const k=({deal:C,provided:P,snapshot:T})=>{var O,L;return o.jsxs("div",{ref:P.innerRef,...P.draggableProps,...P.dragHandleProps,style:{...P.draggableProps.style,opacity:T.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${T.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:C.title||`Deal for ${((O=C.customer)==null?void 0:O.name)||"Customer"}`}),o.jsx("div",{className:"flex space-x-1",children:o.jsx(U,{variant:"ghost",size:"sm",className:"h-6 w-6",children:o.jsx(IA,{className:"h-3 w-3"})})})]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[o.jsx(Id,{className:"h-3 w-3 mr-1"}),o.jsx("span",{className:"line-clamp-1",children:((L=C.customer)==null?void 0:L.name)||"Unknown Customer"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-bold text-base text-primary-800",children:De(C.value)}),o.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[C.probability||50,"%"]})]})]})};return o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&o.jsx(ht,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),o.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[o.jsxs(U,{variant:"outline",size:"sm",onClick:p,disabled:s,className:"flex items-center gap-1",children:[o.jsx(st,{className:`w-4 h-4 ${s?"animate-spin":""}`}),s?"Loading...":"Refresh"]}),o.jsxs("div",{className:"relative flex-grow",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(us,{className:"w-4 h-4 text-gray-500"})}),o.jsx(Ve,{type:"text",placeholder:"Search deals...",value:l,onChange:C=>c(C.target.value),className:"pl-10 w-full"})]})]})]}),u&&!s&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx(xi,{className:"h-5 w-5 text-red-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:o.jsx("p",{children:u.message})}),o.jsxs("div",{className:"mt-4",children:[o.jsx(U,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),o.jsx(U,{onClick:g,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(st,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):o.jsx(G9,{onDragEnd:b,onDragStart:y,children:o.jsx("div",{className:"overflow-x-auto pb-6",children:o.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:Yf.map(C=>o.jsxs("div",{className:`rounded-lg ${C.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:C.label}),o.jsx(ll,{variant:"outline",className:"text-xs",children:De(j(C.id))})]}),o.jsx(MG,{droppableId:C.id,children:P=>o.jsxs("div",{ref:P.innerRef,...P.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[N(C.id).map((T,O)=>o.jsx(hG,{draggableId:T.id,index:O,isDragDisabled:i&&T.stage!==C.id,children:(L,F)=>o.jsx(k,{deal:T,provided:L,snapshot:F})},T.id)),P.placeholder,N(C.id).length===0&&!i&&o.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},C.id))})})})]})}const IG=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function OG(){const{id:e}=LN(),t=Mn(),{user:n}=Ge(),[s,r]=x.useState(null),[i,a]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState(!1),[m,p]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&g()},[e]),x.useEffect(()=>{s!=null&&s.leadId&&v(s.leadId)},[s]);const g=async()=>{try{a(!0);const w=await cl(e);if(!w){y("Deal not found","error"),t("/deals");return}r(w)}catch(w){console.error("Error fetching deal:",w),y("Error fetching deal details","error")}finally{a(!1)}},v=async w=>{try{f(!0);const S=await Zu(w);c(S);const N=[];S.forEach(j=>{if(j.selectedMachines&&j.selectedMachines.length>0)j.selectedMachines.forEach(k=>{N.some(C=>C.id===k.id)||N.push(k)});else if(j.selectedEquipment&&j.selectedEquipment.id){const k={id:j.selectedEquipment.id,machineType:j.machineType,equipmentId:j.selectedEquipment.equipmentId,name:j.selectedEquipment.name,baseRates:j.selectedEquipment.baseRates,baseRate:j.selectedEquipment.baseRates[j.orderType],runningCostPerKm:j.runningCostPerKm,quantity:1};N.some(C=>C.id===k.id)||N.push(k)}}),d(N)}catch(S){console.error("Error fetching deal equipment:",S)}finally{f(!1)}},b=async w=>{if(s)try{const S=await i2(s.id,w);S&&(r(S),y(`Deal stage updated to ${w}`,"success"))}catch(S){console.error("Error updating deal stage:",S),y("Error updating deal stage","error")}},y=(w,S="success")=>{p({show:!0,title:w,variant:S}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(st,{className:"h-8 w-8 animate-spin text-primary-600"})}):s?o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(U,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[o.jsx(XN,{size:16,className:"sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),o.jsx("div",{className:"sm:hidden",children:o.jsx(ne,{children:o.jsx(ie,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-700 font-medium",children:"Value"}),o.jsx("div",{className:"text-lg font-bold text-primary-700",children:De(s.value)})]}),o.jsx(U,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})]})})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[o.jsxs(ne,{children:[o.jsx(me,{className:"p-4 sm:p-6",children:o.jsx(pe,{children:"Deal Information"})}),o.jsxs(ie,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:s.title}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),o.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:De(s.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),o.jsx("div",{className:"mt-1",children:o.jsx(Se,{value:s.stage,onChange:w=>b(w),options:IG,className:"w-full sm:w-[200px] text-sm"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.expectedCloseDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),o.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[s.probability,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:s.assignedTo})]})]})]})]}),o.jsxs(ne,{children:[o.jsx(me,{className:"p-4 sm:p-6",children:o.jsx(pe,{children:"Notes"})}),o.jsx(ie,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:o.jsx("p",{className:"text-sm text-gray-600",children:s.notes||"No notes available."})})]})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs(ne,{children:[o.jsx(me,{className:"p-4 sm:p-6",children:o.jsx(pe,{children:"Customer Information"})}),o.jsxs(ie,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(la,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm sm:text-base",children:s.customer.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:s.customer.designation})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Id,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600 break-words",children:s.customer.company})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(AA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.customer.email})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(FA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.phone})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Bg,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.address})]})]})]}),"          ",o.jsxs(ne,{className:"mb-4",children:[o.jsx(me,{className:"p-4 sm:p-6",children:o.jsxs(pe,{className:"flex items-center",children:[o.jsx(OA,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),o.jsx(ie,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx(st,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?o.jsx("div",{className:"space-y-2",children:u.map(w=>o.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm",children:w.name}),o.jsx("p",{className:"text-xs text-gray-500",children:w.machineType})]}),o.jsx("div",{className:"text-sm text-right",children:o.jsxs("span",{className:"font-medium",children:["Qty: ",w.quantity]})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[o.jsxs("div",{children:["Base Rate: ",De(w.baseRate)]}),o.jsxs("div",{children:["Cost/Km: ",De(w.runningCostPerKm)]})]})]},w.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),o.jsxs(ne,{className:"hidden sm:block",children:[o.jsx(me,{className:"p-4 sm:p-6",children:o.jsx(pe,{children:"Actions"})}),o.jsx(ie,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:o.jsx(U,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})})]})]})]}),m.show&&o.jsx(ht,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const Lp=[{type:"customer.name",label:"Customer Name"},{type:"customer.company",label:"Company"},{type:"customer.email",label:"Email"},{type:"customer.phone",label:"Phone"},{type:"quotation.id",label:"Quotation ID"},{type:"quotation.date",label:"Date"},{type:"quotation.totalAmount",label:"Total Amount"}],LG=[{type:"text",label:"Text Block",icon:UA,description:"Add custom text content"},{type:"field",label:"Dynamic Field",icon:Ut,description:"Insert quotation data"},{type:"table",label:"Data Table",icon:zA,description:"Display tabular data"},{type:"image",label:"Image/Logo",icon:$g,description:"Add company logo or images"},{type:"spacer",label:"Spacer",icon:rS,description:"Add vertical spacing"}],FG=({element:e,onUpdate:t,onDelete:n})=>{var i;const s=a=>{t({...e,content:a})},r=a=>{t({...e,fieldType:a})};return o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-2 group hover:border-blue-300 transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium capitalize",children:e.type}),e.type==="field"&&e.fieldType&&o.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:(i=Lp.find(a=>a.type===e.fieldType))==null?void 0:i.label})]}),o.jsx(U,{size:"sm",variant:"ghost",onClick:n,className:"text-red-600 hover:text-red-700",children:o.jsx(jr,{className:"h-3 w-3"})})]}),e.type==="text"&&o.jsx(Ve,{value:e.content||"",onChange:a=>s(a.target.value),placeholder:"Enter text content...",className:"mb-3"}),e.type==="field"&&o.jsxs("select",{value:e.fieldType||"",onChange:a=>r(a.target.value),className:"w-full p-2 border border-gray-300 rounded-md mb-3",children:[o.jsx("option",{value:"",children:"Select a field..."}),Lp.map(a=>o.jsx("option",{value:a.type,children:a.label},a.type))]})]})},$G=({elements:e})=>{const t=n=>{switch(n.type){case"text":return o.jsx("div",{className:"mb-2",children:n.content||"Sample text content"});case"field":const s=Lp.find(r=>r.type===n.fieldType);return o.jsx("div",{className:"mb-2 bg-blue-50 border border-blue-200 px-2 py-1 rounded inline-block",children:s?`{${s.label}}`:"{Select Field}"});case"table":return o.jsx("div",{className:"mb-4",children:o.jsxs("table",{className:"w-full border border-gray-300",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Item"}),o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Quantity"}),o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Rate"}),o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Amount"})]})}),o.jsx("tbody",{children:o.jsxs("tr",{children:[o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Equipment Name"}),o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"1"}),o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"1000"}),o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"1000"})]})})]})});case"image":return o.jsxs("div",{className:"mb-4 border-2 border-dashed border-gray-300 p-8 text-center",children:[o.jsx($g,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Company Logo / Image"})]});case"spacer":return o.jsx("div",{style:{height:20},className:"mb-2"});default:return null}};return o.jsx("div",{className:"bg-white p-8 border border-gray-200 rounded-lg min-h-[600px]",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:e.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-12",children:[o.jsx(Ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("p",{children:"Start building your template by adding components"})]}):e.map(n=>o.jsx("div",{children:t(n)},n.id))})})},BG=({onSave:e,initialTemplate:t})=>{const[n,s]=x.useState((t==null?void 0:t.name)||""),[r,i]=x.useState((t==null?void 0:t.elements)||[]),[a,l]=x.useState(!1);let c=0;const u=()=>(c+=1,`element_${c}_${Date.now()}`),d=p=>{const g={id:u(),type:p,content:p==="text"?"Sample text":void 0};i(v=>[...v,g])},h=p=>{i(g=>g.map(v=>v.id===p.id?p:v))},f=p=>{i(g=>g.filter(v=>v.id!==p))},m=()=>{if(!n.trim()){alert("Please enter a template name");return}e({name:n,elements:r})};return o.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Template Builder"}),o.jsx(Ve,{value:n,onChange:p=>s(p.target.value),placeholder:"Enter template name...",className:"w-64"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U,{variant:"ghost",onClick:()=>l(!a),leftIcon:o.jsx(Mu,{}),children:a?"Edit":"Preview"}),o.jsx(U,{onClick:m,leftIcon:o.jsx(yi,{}),children:"Save Template"})]})]})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[!a&&o.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 p-4 overflow-y-auto",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Components"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:LG.map(p=>{const g=p.icon;return o.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200",onClick:()=>d(p.type),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(g,{className:"h-4 w-4 text-blue-600"}),o.jsx("span",{className:"font-medium text-sm",children:p.label})]}),o.jsx("p",{className:"text-xs text-gray-500",children:p.description})]},p.type)})})]}),o.jsx("div",{className:"flex-1 flex overflow-hidden",children:a?o.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:o.jsx($G,{elements:r})}):o.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(ne,{children:[o.jsx(me,{children:o.jsx(pe,{children:"Template Structure"})}),o.jsx(ie,{children:r.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx(os,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("p",{children:"Click on components from the left panel to add them to your template"})]}):o.jsx("div",{className:"space-y-2",children:r.map(p=>o.jsx(FG,{element:p,onUpdate:h,onDelete:()=>f(p.id)},p.id))})})]})})})})]})]})};async function zG(){const t=await fetch("http://103.224.243.242:3001/api/templates/modern",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch modern templates: ${t.status} ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.data||[]}async function x1(e){const n=await fetch("http://103.224.243.242:3001/api/templates/modern",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create modern template");const s=await n.json();return s.data||s}async function VG(e,t){const s=await fetch(`http://103.224.243.242:3001/api/templates/modern/${e}`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update modern template");const r=await s.json();return r.data||r}async function UG(e){if(!(await fetch(`http://103.224.243.242:3001/api/templates/modern/${e}`,{method:"DELETE",headers:Le(),credentials:"include"})).ok)throw new Error("Failed to delete modern template")}const WG=()=>{const[e,t]=x.useState([]),[n,s]=x.useState(!0),[r,i]=x.useState(""),[a,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState("grid"),[f,m]=x.useState("all"),[p,g]=x.useState({show:!1,title:""});x.useEffect(()=>{v()},[]);const v=async()=>{try{s(!0);const T=await zG();t(T)}catch(T){console.error("Error fetching templates:",T),k("Error loading templates","error")}finally{s(!1)}},b=()=>{l(null),u(!0)},y=T=>{l(T),u(!0)},w=async T=>{try{if(a){const O=await VG(a.id,{...T,updatedAt:new Date().toISOString()});t(L=>L.map(F=>F.id===a.id?O:F)),k("Template updated successfully","success")}else{const O=await x1({...T,description:"",createdBy:"Current User",usage_count:0,tags:[]});t(L=>[O,...L]),k("Template created successfully","success")}u(!1)}catch(O){console.error("Error saving template:",O),k("Error saving template","error")}},S=async T=>{if(window.confirm("Are you sure you want to delete this template?"))try{await UG(T),t(O=>O.filter(L=>L.id!==T)),k("Template deleted successfully","success")}catch(O){console.error("Error deleting template:",O),k("Error deleting template","error")}},N=async T=>{try{const O=await x1({...T,name:`${T.name} (Copy)`,createdBy:"Current User",usage_count:0,isDefault:!1});t(L=>[O,...L]),k("Template duplicated successfully","success")}catch(O){console.error("Error duplicating template:",O),k("Error duplicating template","error")}},j=T=>{console.log("Preview template:",T)},k=(T,O="success")=>{g({show:!0,title:T,variant:O}),setTimeout(()=>g({show:!1,title:""}),3e3)},C=e.filter(T=>{var F,_;const O=T.name.toLowerCase().includes(r.toLowerCase())||((F=T.description)==null?void 0:F.toLowerCase().includes(r.toLowerCase())),L=f==="all"||((_=T.tags)==null?void 0:_.includes(f));return O&&L}),P=["all",...new Set(e.flatMap(T=>T.tags||[]))];return c?o.jsx(BG,{onSave:w,initialTemplate:a?{name:a.name,elements:a.elements}:void 0}):o.jsxs("div",{className:"container mx-auto py-6 px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Management"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage quotation templates"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(U,{variant:"ghost",leftIcon:o.jsx(aS,{}),children:"Import"}),o.jsx(U,{onClick:b,leftIcon:o.jsx(os,{}),className:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",children:"Create Template"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(us,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ve,{placeholder:"Search templates...",value:r,onChange:T=>i(T.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("select",{value:f,onChange:T=>m(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:P.map(T=>o.jsx("option",{value:T,children:T==="all"?"All Categories":T.charAt(0).toUpperCase()+T.slice(1)},T))}),o.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[o.jsx(U,{variant:d==="grid"?"accent":"ghost",size:"sm",onClick:()=>h("grid"),className:"rounded-none",children:o.jsx(EA,{className:"h-4 w-4"})}),o.jsx(U,{variant:d==="list"?"accent":"ghost",size:"sm",onClick:()=>h("list"),className:"rounded-none",children:o.jsx(PA,{className:"h-4 w-4"})})]})]})]}),n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsx("div",{className:d==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:C.map(T=>o.jsx(ne,{className:`group hover:shadow-lg transition-all duration-200 ${T.isDefault?"ring-2 ring-primary-200":""} ${d==="list"?"flex-row":""}`,children:d==="grid"?o.jsxs(o.Fragment,{children:[o.jsxs(me,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ut,{className:"h-5 w-5 text-primary-600"}),T.isDefault&&o.jsx(R0,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>j(T),children:o.jsx(Mu,{className:"h-3 w-3"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>y(T),children:o.jsx(M0,{className:"h-3 w-3"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>N(T),children:o.jsx(_0,{className:"h-3 w-3"})}),!T.isDefault&&o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>S(T.id),className:"text-red-600 hover:text-red-700",children:o.jsx(jr,{className:"h-3 w-3"})})]})]}),o.jsx(pe,{className:"text-lg",children:T.name}),T.description&&o.jsx("p",{className:"text-sm text-gray-600",children:T.description})]}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-3",children:[T.tags&&T.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:T.tags.map(O=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:O},O))}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(la,{className:"h-3 w-3"}),o.jsx("span",{children:T.createdBy})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Nn,{className:"h-3 w-3"}),o.jsx("span",{children:new Date(T.updatedAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Used ",T.usage_count||0," times"]})]})})]}):o.jsxs("div",{className:"flex items-center justify-between p-4 w-full",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ut,{className:"h-5 w-5 text-primary-600"}),T.isDefault&&o.jsx(R0,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:T.name}),o.jsx("p",{className:"text-sm text-gray-600",children:T.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[o.jsxs("span",{children:["By ",T.createdBy]}),o.jsxs("span",{children:["Updated ",new Date(T.updatedAt).toLocaleDateString()]}),o.jsxs("span",{children:["Used ",T.usage_count||0," times"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>j(T),children:o.jsx(Mu,{className:"h-4 w-4"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>y(T),children:o.jsx(M0,{className:"h-4 w-4"})}),o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>N(T),children:o.jsx(_0,{className:"h-4 w-4"})}),!T.isDefault&&o.jsx(U,{size:"sm",variant:"ghost",onClick:()=>S(T.id),className:"text-red-600 hover:text-red-700",children:o.jsx(jr,{className:"h-4 w-4"})})]})]})},T.id))}),C.length===0&&!n&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ut,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),o.jsx("p",{className:"text-gray-600 mb-2",children:r||f!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first template."}),o.jsx("p",{className:"text-gray-500 mb-4",children:"You can create a new template from here. Click the button below to get started."}),!r&&f==="all"&&o.jsx(U,{onClick:b,leftIcon:o.jsx(os,{}),children:"Create Your First Template"})]}),p.show&&o.jsx(ht,{title:p.title,variant:p.variant,isVisible:p.show,onClose:()=>g({show:!1,title:""})})]})},qG=({children:e})=>{const{isAuthenticated:t,user:n,setUser:s}=Ge();return x.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await KN();i&&s(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,s]),o.jsx(o.Fragment,{children:e})};function Et({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:s,isAuthenticated:r,setUser:i}=Ge(),[a,l]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const u=await KN();u?(!s||s.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[s,i]),a?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(`🔒 Protected Route Check - Authenticated: ${r}, User: ${(s==null?void 0:s.name)||"none"}`),!r||!s?(console.log(`❌ Route protection failed - redirecting to ${t}`),o.jsx(Bn,{to:t,replace:!0})):n&&!n.includes(s.role)?(console.log(`❌ Role protection failed - user has ${s.role} but needs one of [${n.join(",")}]`),o.jsx(Bn,{to:"/dashboard",replace:!0})):(console.log("✅ Route protection passed - rendering protected content"),e?o.jsx(o.Fragment,{children:e}):o.jsx(VN,{})))}function HG(){const{user:e,isAuthenticated:t}=Ge();if(console.log("🎯 DashboardRouter called"),console.log("🔍 Authentication state:",{isAuthenticated:t}),console.log("👤 User object:",JSON.stringify(e,null,2)),console.log("🏷️ User role:",e==null?void 0:e.role),!t||!e)return console.log("❌ DashboardRouter: Not authenticated, redirecting to login"),o.jsx(Bn,{to:"/login",replace:!0});if(!e.role)return console.error("❌ DashboardRouter: User authenticated but role is undefined!"),console.error("📊 Full user object:",e),console.log("🔄 Fallback: Showing AdminDashboard due to missing role"),o.jsx(xf,{});switch(console.log("✅ DashboardRouter: User role is",e.role),e.role){case"admin":return console.log("📊 Rendering AdminDashboard"),o.jsx(xf,{});case"sales_agent":return console.log("📊 Rendering SalesAgentDashboard"),o.jsx(ZB,{});case"operations_manager":return console.log("📊 Rendering OperationsManagerDashboard"),o.jsx(sz,{});case"operator":return console.log("📊 Rendering OperatorDashboard"),o.jsx(iz,{});default:return console.log("❌ Unknown user role:",e.role,"showing AdminDashboard as fallback"),o.jsx(xf,{})}}function GG(){const e=window.location.pathname==="/"||window.location.pathname==="";if(console.log("🔍 AppContent - Current pathname:",window.location.pathname),console.log("🔍 AppContent - Is root URL:",e),e)return console.log("📍 Redirecting from root to /login"),o.jsx(Bn,{to:"/login",replace:!0});const t=o.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),o.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return o.jsx(x.Suspense,{fallback:t,children:o.jsxs(b_,{children:[o.jsx(We,{path:"/blank-check.html",element:o.jsx(Bn,{to:"/blank-check.html",replace:!0})}),o.jsx(We,{path:"/api-test.html",element:o.jsx(Bn,{to:"/api-test.html",replace:!0})}),o.jsx(We,{path:"/login",element:o.jsx(XA,{})}),o.jsx(We,{element:o.jsx(Et,{}),children:o.jsxs(We,{path:"/",element:o.jsx(t5,{}),children:[o.jsx(We,{index:!0,element:o.jsx(Bn,{to:"/dashboard",replace:!0})}),o.jsx(We,{path:"dashboard",element:o.jsx(HG,{})}),o.jsx(We,{path:"admin/users",element:o.jsx(Et,{allowedRoles:["admin"],children:o.jsx(QU,{})})}),o.jsx(We,{path:"admin/config",element:o.jsx(Et,{allowedRoles:["admin"],children:o.jsx(uW,{})})}),o.jsx(We,{path:"admin/equipment",element:o.jsx(Et,{allowedRoles:["admin","operations_manager"],children:o.jsx(VU,{})})}),o.jsx(We,{path:"admin/services",element:o.jsx(Et,{allowedRoles:["admin","operations_manager"],children:o.jsx(WU,{})})}),o.jsx(We,{path:"admin/templates",element:o.jsx(Et,{allowedRoles:["admin","sales_agent"],children:o.jsx(WG,{})})}),o.jsx(We,{path:"leads",element:o.jsx(Et,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(e8,{})})}),o.jsx(We,{path:"customers",element:o.jsx(Et,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(dW,{})})}),o.jsx(We,{path:"deals",element:o.jsx(Et,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(RG,{})})}),o.jsx(We,{path:"deals/:id",element:o.jsx(Et,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(OG,{})})}),o.jsx(We,{path:"quotations",element:o.jsx(Et,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(a8,{})})}),o.jsx(We,{path:"quotations/create",element:o.jsx(Et,{allowedRoles:["admin","sales_agent"],children:o.jsx(x8,{})})}),o.jsx(We,{path:"jobs",element:o.jsx(Et,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(TU,{})})}),o.jsx(We,{path:"job-test",element:o.jsx(Et,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(AU,{})})}),o.jsx(We,{path:"site-assessments",element:o.jsx(Et,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(RU,{})})}),o.jsx(We,{path:"job-summary",element:o.jsx(Et,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(OU,{})})}),o.jsx(We,{path:"*",element:o.jsx(Bn,{to:"/dashboard",replace:!0})})]})})]})})}function YG(){return o.jsx(D_,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(qG,{children:o.jsx(R_,{children:o.jsx(GG,{})})})})}console.log("🚀 Starting ASP Cranes CRM...");console.log("🔍 Current URL:",window.location.href);console.log("💾 localStorage contents:",{"jwt-token":localStorage.getItem("jwt-token")?"Present":"Missing","explicit-login-performed":localStorage.getItem("explicit-login-performed"),"auth-storage":localStorage.getItem("auth-storage")?"Present":"Missing"});console.log("🔄 Auth store hydration temporarily disabled for debugging");document.body.classList.contains("dark")||document.body.classList.add("dark");const Qf=document.getElementById("root");if(!Qf)console.error("❌ Failed to find root element"),document.body.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">Error: Root element not found</div>';else{console.log("✅ Root element found, creating React app...");try{PN(Qf).render(o.jsx(x.StrictMode,{children:o.jsx(x.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading ASP Cranes CRM..."})]})}),children:o.jsx(YG,{})})})),console.log("🎉 React application rendered successfully")}catch(e){console.error("❌ React render error:",e),Qf.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">React render error: '+e+"</div>"}}
