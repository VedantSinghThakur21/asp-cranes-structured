var rD=Object.defineProperty;var iD=(e,t,n)=>t in e?rD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>iD(e,typeof t!="symbol"?t+"":t,n);function aD(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C1={exports:{}},wd={},k1={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tl=Symbol.for("react.element"),oD=Symbol.for("react.portal"),lD=Symbol.for("react.fragment"),cD=Symbol.for("react.strict_mode"),uD=Symbol.for("react.profiler"),dD=Symbol.for("react.provider"),hD=Symbol.for("react.context"),fD=Symbol.for("react.forward_ref"),mD=Symbol.for("react.suspense"),pD=Symbol.for("react.memo"),gD=Symbol.for("react.lazy"),vy=Symbol.iterator;function xD(e){return e===null||typeof e!="object"?null:(e=vy&&e[vy]||e["@@iterator"],typeof e=="function"?e:null)}var E1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D1=Object.assign,T1={};function ya(e,t,n){this.props=e,this.context=t,this.refs=T1,this.updater=n||E1}ya.prototype.isReactComponent={};ya.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ya.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function P1(){}P1.prototype=ya.prototype;function qp(e,t,n){this.props=e,this.context=t,this.refs=T1,this.updater=n||E1}var Gp=qp.prototype=new P1;Gp.constructor=qp;D1(Gp,ya.prototype);Gp.isPureReactComponent=!0;var by=Array.isArray,_1=Object.prototype.hasOwnProperty,Yp={current:null},A1={key:!0,ref:!0,__self:!0,__source:!0};function M1(e,t,n){var s,r={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)_1.call(t,s)&&!A1.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Tl,type:e,key:i,ref:a,props:r,_owner:Yp.current}}function yD(e,t){return{$$typeof:Tl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tl}function vD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wy=/\/+/g;function yh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vD(""+e.key):t.toString(36)}function Uc(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Tl:case oD:a=!0}}if(a)return a=e,r=r(a),e=s===""?"."+yh(a,0):s,by(r)?(n="",e!=null&&(n=e.replace(wy,"$&/")+"/"),Uc(r,t,n,"",function(u){return u})):r!=null&&(Qp(r)&&(r=yD(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(wy,"$&/")+"/")+e)),t.push(r)),1;if(a=0,s=s===""?".":s+":",by(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+yh(i,l);a+=Uc(i,t,n,c,r)}else if(c=xD(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+yh(i,l++),a+=Uc(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ql(e,t,n){if(e==null)return e;var s=[],r=0;return Uc(e,s,"","",function(i){return t.call(n,i,r++)}),s}function bD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wt={current:null},Wc={transition:null},wD={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Wc,ReactCurrentOwner:Yp};function R1(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Ql,forEach:function(e,t,n){Ql(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ql(e,function(){t++}),t},toArray:function(e){return Ql(e,function(t){return t})||[]},only:function(e){if(!Qp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=ya;Ce.Fragment=lD;Ce.Profiler=uD;Ce.PureComponent=qp;Ce.StrictMode=cD;Ce.Suspense=mD;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wD;Ce.act=R1;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=D1({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Yp.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_1.call(t,c)&&!A1.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Tl,type:e.type,key:r,ref:i,props:s,_owner:a}};Ce.createContext=function(e){return e={$$typeof:hD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dD,_context:e},e.Consumer=e};Ce.createElement=M1;Ce.createFactory=function(e){var t=M1.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:fD,render:e}};Ce.isValidElement=Qp;Ce.lazy=function(e){return{$$typeof:gD,_payload:{_status:-1,_result:e},_init:bD}};Ce.memo=function(e,t){return{$$typeof:pD,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Wc.transition;Wc.transition={};try{e()}finally{Wc.transition=t}};Ce.unstable_act=R1;Ce.useCallback=function(e,t){return Wt.current.useCallback(e,t)};Ce.useContext=function(e){return Wt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return Wt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return Wt.current.useEffect(e,t)};Ce.useId=function(){return Wt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return Wt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return Wt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return Wt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return Wt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return Wt.current.useReducer(e,t,n)};Ce.useRef=function(e){return Wt.current.useRef(e)};Ce.useState=function(e){return Wt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return Wt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return Wt.current.useTransition()};Ce.version="18.3.1";k1.exports=Ce;var y=k1.exports;const ne=Hp(y),Kp=aD({__proto__:null,default:ne},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD=y,ND=Symbol.for("react.element"),SD=Symbol.for("react.fragment"),CD=Object.prototype.hasOwnProperty,kD=jD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ED={key:!0,ref:!0,__self:!0,__source:!0};function I1(e,t,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)CD.call(t,s)&&!ED.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:ND,type:e,key:i,ref:a,props:r,_owner:kD.current}}wd.Fragment=SD;wd.jsx=I1;wd.jsxs=I1;C1.exports=wd;var o=C1.exports,O1={exports:{}},pn={},L1={exports:{}},F1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,_){var U=T.length;T.push(_);e:for(;0<U;){var q=U-1>>>1,Z=T[q];if(0<r(Z,_))T[q]=_,T[U]=Z,U=q;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var _=T[0],U=T.pop();if(U!==_){T[0]=U;e:for(var q=0,Z=T.length,ae=Z>>>1;q<ae;){var le=2*(q+1)-1,ge=T[le],we=le+1,I=T[we];if(0>r(ge,U))we<Z&&0>r(I,ge)?(T[q]=I,T[we]=U,q=we):(T[q]=ge,T[le]=U,q=le);else if(we<Z&&0>r(I,U))T[q]=I,T[we]=U,q=we;else break e}}return _}function r(T,_){var U=T.sortIndex-_.sortIndex;return U!==0?U:T.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(T){for(var _=n(u);_!==null;){if(_.callback===null)s(u);else if(_.startTime<=T)s(u),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(u)}}function N(T){if(g=!1,x(T),!p)if(n(c)!==null)p=!0,W(S);else{var _=n(u);_!==null&&O(N,_.startTime-T)}}function S(T,_){p=!1,g&&(g=!1,w(C),C=-1),m=!0;var U=f;try{for(x(_),h=n(c);h!==null&&(!(h.expirationTime>_)||T&&!F());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var Z=q(h.expirationTime<=_);_=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&s(c),x(_)}else s(c);h=n(c)}if(h!==null)var ae=!0;else{var le=n(u);le!==null&&O(N,le.startTime-_),ae=!1}return ae}finally{h=null,f=U,m=!1}}var k=!1,j=null,C=-1,D=5,A=-1;function F(){return!(e.unstable_now()-A<D)}function $(){if(j!==null){var T=e.unstable_now();A=T;var _=!0;try{_=j(!0,T)}finally{_?L():(k=!1,j=null)}}else k=!1}var L;if(typeof b=="function")L=function(){b($)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,B=P.port2;P.port1.onmessage=$,L=function(){B.postMessage(null)}}else L=function(){v($,0)};function W(T){j=T,k||(k=!0,L())}function O(T,_){C=v(function(){T(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,W(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var U=f;f=_;try{return T()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,_){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=f;f=T;try{return _()}finally{f=U}},e.unstable_scheduleCallback=function(T,_,U){var q=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?q+U:q):U=q,T){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=U+Z,T={id:d++,callback:_,priorityLevel:T,startTime:U,expirationTime:Z,sortIndex:-1},U>q?(T.sortIndex=U,t(u,T),n(c)===null&&T===n(u)&&(g?(w(C),C=-1):g=!0,O(N,U-q))):(T.sortIndex=Z,t(c,T),p||m||(p=!0,W(S))),T},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(T){var _=f;return function(){var U=f;f=_;try{return T.apply(this,arguments)}finally{f=U}}}})(F1);L1.exports=F1;var DD=L1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TD=y,hn=DD;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $1=new Set,zo={};function gi(e,t){na(e,t),na(e+"Capture",t)}function na(e,t){for(zo[e]=t,e=0;e<t.length;e++)$1.add(t[e])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,PD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jy={},Ny={};function _D(e){return rm.call(Ny,e)?!0:rm.call(jy,e)?!1:PD.test(e)?Ny[e]=!0:(jy[e]=!0,!1)}function AD(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MD(e,t,n,s){if(t===null||typeof t>"u"||AD(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ht(e,t,n,s,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new Ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new Ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new Ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new Ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new Ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new Ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new Ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new Ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new Ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xp=/[\-:]([a-z])/g;function Jp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xp,Jp);Et[t]=new Ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xp,Jp);Et[t]=new Ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xp,Jp);Et[t]=new Ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new Ht(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new Ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zp(e,t,n,s){var r=Et.hasOwnProperty(t)?Et[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MD(t,n,r,s)&&(n=null),s||r===null?_D(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Rs=TD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),Ai=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),eg=Symbol.for("react.strict_mode"),im=Symbol.for("react.profiler"),B1=Symbol.for("react.provider"),z1=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),ng=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),V1=Symbol.for("react.offscreen"),Sy=Symbol.iterator;function La(e){return e===null||typeof e!="object"?null:(e=Sy&&e[Sy]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,vh;function uo(e){if(vh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vh=t&&t[1]||""}return`
`+vh+e}var bh=!1;function wh(e,t){if(!e||bh)return"";bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{bh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?uo(e):""}function RD(e){switch(e.tag){case 5:return uo(e.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return e=wh(e.type,!1),e;case 11:return e=wh(e.type.render,!1),e;case 1:return e=wh(e.type,!0),e;default:return""}}function lm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mi:return"Fragment";case Ai:return"Portal";case im:return"Profiler";case eg:return"StrictMode";case am:return"Suspense";case om:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case z1:return(e.displayName||"Context")+".Consumer";case B1:return(e._context.displayName||"Context")+".Provider";case tg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ng:return t=e.displayName||null,t!==null?t:lm(e.type)||"Memo";case qs:t=e._payload,e=e._init;try{return lm(e(t))}catch{}}return null}function ID(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lm(t);case 8:return t===eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function U1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OD(e){var t=U1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xl(e){e._valueTracker||(e._valueTracker=OD(e))}function W1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=U1(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cm(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Cy(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=wr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function H1(e,t){t=t.checked,t!=null&&Zp(e,"checked",t,!1)}function um(e,t){H1(e,t);var n=wr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dm(e,t.type,n):t.hasOwnProperty("defaultValue")&&dm(e,t.type,wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ky(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function dm(e,t,n){(t!=="number"||fu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ho=Array.isArray;function Yi(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+wr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function hm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ey(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(ho(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wr(n)}}function q1(e,t){var n=wr(t.value),s=wr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Dy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function G1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?G1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jl,Y1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LD=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(e){LD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jo[t]=jo[e]})});function Q1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jo.hasOwnProperty(e)&&jo[e]?(""+t).trim():t+"px"}function K1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=Q1(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var FD=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mm(e,t){if(t){if(FD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function pm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gm=null;function sg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xm=null,Qi=null,Ki=null;function Ty(e){if(e=Al(e)){if(typeof xm!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=kd(t),xm(e.stateNode,e.type,t))}}function X1(e){Qi?Ki?Ki.push(e):Ki=[e]:Qi=e}function J1(){if(Qi){var e=Qi,t=Ki;if(Ki=Qi=null,Ty(e),t)for(e=0;e<t.length;e++)Ty(t[e])}}function Z1(e,t){return e(t)}function ej(){}var jh=!1;function tj(e,t,n){if(jh)return e(t,n);jh=!0;try{return Z1(e,t,n)}finally{jh=!1,(Qi!==null||Ki!==null)&&(ej(),J1())}}function Uo(e,t){var n=e.stateNode;if(n===null)return null;var s=kd(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var ym=!1;if(Ts)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){ym=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{ym=!1}function $D(e,t,n,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var No=!1,mu=null,pu=!1,vm=null,BD={onError:function(e){No=!0,mu=e}};function zD(e,t,n,s,r,i,a,l,c){No=!1,mu=null,$D.apply(BD,arguments)}function VD(e,t,n,s,r,i,a,l,c){if(zD.apply(this,arguments),No){if(No){var u=mu;No=!1,mu=null}else throw Error(Q(198));pu||(pu=!0,vm=u)}}function xi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Py(e){if(xi(e)!==e)throw Error(Q(188))}function UD(e){var t=e.alternate;if(!t){if(t=xi(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Py(r),e;if(i===s)return Py(r),t;i=i.sibling}throw Error(Q(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==s)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function sj(e){return e=UD(e),e!==null?rj(e):null}function rj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rj(e);if(t!==null)return t;e=e.sibling}return null}var ij=hn.unstable_scheduleCallback,_y=hn.unstable_cancelCallback,WD=hn.unstable_shouldYield,HD=hn.unstable_requestPaint,rt=hn.unstable_now,qD=hn.unstable_getCurrentPriorityLevel,rg=hn.unstable_ImmediatePriority,aj=hn.unstable_UserBlockingPriority,gu=hn.unstable_NormalPriority,GD=hn.unstable_LowPriority,oj=hn.unstable_IdlePriority,jd=null,ss=null;function YD(e){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(jd,e,void 0,(e.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:XD,QD=Math.log,KD=Math.LN2;function XD(e){return e>>>=0,e===0?32:31-(QD(e)/KD|0)|0}var Zl=64,ec=4194304;function fo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=fo(l):(i&=a,i!==0&&(s=fo(i)))}else a=n&~r,a!==0?s=fo(a):i!==0&&(s=fo(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Wn(t),r=1<<n,s|=e[n],t&=~r;return s}function JD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZD(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Wn(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=JD(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function bm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lj(){var e=Zl;return Zl<<=1,!(Zl&4194240)&&(Zl=64),e}function Nh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wn(t),e[t]=n}function eT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Wn(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function ig(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Wn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var $e=0;function cj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uj,ag,dj,hj,fj,wm=!1,tc=[],or=null,lr=null,cr=null,Wo=new Map,Ho=new Map,Qs=[],tT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(e,t){switch(e){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Wo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(t.pointerId)}}function $a(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Al(t),t!==null&&ag(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function nT(e,t,n,s,r){switch(t){case"focusin":return or=$a(or,e,t,n,s,r),!0;case"dragenter":return lr=$a(lr,e,t,n,s,r),!0;case"mouseover":return cr=$a(cr,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Wo.set(i,$a(Wo.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Ho.set(i,$a(Ho.get(i)||null,e,t,n,s,r)),!0}return!1}function mj(e){var t=Qr(e.target);if(t!==null){var n=xi(t);if(n!==null){if(t=n.tag,t===13){if(t=nj(n),t!==null){e.blockedOn=t,fj(e.priority,function(){dj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);gm=s,n.target.dispatchEvent(s),gm=null}else return t=Al(n),t!==null&&ag(t),e.blockedOn=n,!1;t.shift()}return!0}function My(e,t,n){Hc(e)&&n.delete(t)}function sT(){wm=!1,or!==null&&Hc(or)&&(or=null),lr!==null&&Hc(lr)&&(lr=null),cr!==null&&Hc(cr)&&(cr=null),Wo.forEach(My),Ho.forEach(My)}function Ba(e,t){e.blockedOn===t&&(e.blockedOn=null,wm||(wm=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,sT)))}function qo(e){function t(r){return Ba(r,e)}if(0<tc.length){Ba(tc[0],e);for(var n=1;n<tc.length;n++){var s=tc[n];s.blockedOn===e&&(s.blockedOn=null)}}for(or!==null&&Ba(or,e),lr!==null&&Ba(lr,e),cr!==null&&Ba(cr,e),Wo.forEach(t),Ho.forEach(t),n=0;n<Qs.length;n++)s=Qs[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Qs.length&&(n=Qs[0],n.blockedOn===null);)mj(n),n.blockedOn===null&&Qs.shift()}var Xi=Rs.ReactCurrentBatchConfig,yu=!0;function rT(e,t,n,s){var r=$e,i=Xi.transition;Xi.transition=null;try{$e=1,og(e,t,n,s)}finally{$e=r,Xi.transition=i}}function iT(e,t,n,s){var r=$e,i=Xi.transition;Xi.transition=null;try{$e=4,og(e,t,n,s)}finally{$e=r,Xi.transition=i}}function og(e,t,n,s){if(yu){var r=jm(e,t,n,s);if(r===null)Mh(e,t,s,vu,n),Ay(e,s);else if(nT(r,e,t,n,s))s.stopPropagation();else if(Ay(e,s),t&4&&-1<tT.indexOf(e)){for(;r!==null;){var i=Al(r);if(i!==null&&uj(i),i=jm(e,t,n,s),i===null&&Mh(e,t,s,vu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Mh(e,t,s,null,n)}}var vu=null;function jm(e,t,n,s){if(vu=null,e=sg(s),e=Qr(e),e!==null)if(t=xi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=nj(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vu=e,null}function pj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qD()){case rg:return 1;case aj:return 4;case gu:case GD:return 16;case oj:return 536870912;default:return 16}default:return 16}}var Zs=null,lg=null,qc=null;function gj(){if(qc)return qc;var e,t=lg,n=t.length,s,r="value"in Zs?Zs.value:Zs.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(s=1;s<=a&&t[n-s]===r[i-s];s++);return qc=r.slice(e,1<s?1-s:void 0)}function Gc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nc(){return!0}function Ry(){return!1}function gn(e){function t(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?nc:Ry,this.isPropagationStopped=Ry,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nc)},persist:function(){},isPersistent:nc}),t}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cg=gn(va),_l=et({},va,{view:0,detail:0}),aT=gn(_l),Sh,Ch,za,Nd=et({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==za&&(za&&e.type==="mousemove"?(Sh=e.screenX-za.screenX,Ch=e.screenY-za.screenY):Ch=Sh=0,za=e),Sh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),Iy=gn(Nd),oT=et({},Nd,{dataTransfer:0}),lT=gn(oT),cT=et({},_l,{relatedTarget:0}),kh=gn(cT),uT=et({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),dT=gn(uT),hT=et({},va,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fT=gn(hT),mT=et({},va,{data:0}),Oy=gn(mT),pT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xT[e])?!!t[e]:!1}function ug(){return yT}var vT=et({},_l,{key:function(e){if(e.key){var t=pT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(e){return e.type==="keypress"?Gc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bT=gn(vT),wT=et({},Nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ly=gn(wT),jT=et({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),NT=gn(jT),ST=et({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),CT=gn(ST),kT=et({},Nd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ET=gn(kT),DT=[9,13,27,32],dg=Ts&&"CompositionEvent"in window,So=null;Ts&&"documentMode"in document&&(So=document.documentMode);var TT=Ts&&"TextEvent"in window&&!So,xj=Ts&&(!dg||So&&8<So&&11>=So),Fy=" ",$y=!1;function yj(e,t){switch(e){case"keyup":return DT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ri=!1;function PT(e,t){switch(e){case"compositionend":return vj(t);case"keypress":return t.which!==32?null:($y=!0,Fy);case"textInput":return e=t.data,e===Fy&&$y?null:e;default:return null}}function _T(e,t){if(Ri)return e==="compositionend"||!dg&&yj(e,t)?(e=gj(),qc=lg=Zs=null,Ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xj&&t.locale!=="ko"?null:t.data;default:return null}}var AT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function By(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AT[e.type]:t==="textarea"}function bj(e,t,n,s){X1(s),t=bu(t,"onChange"),0<t.length&&(n=new cg("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Co=null,Go=null;function MT(e){_j(e,0)}function Sd(e){var t=Li(e);if(W1(t))return e}function RT(e,t){if(e==="change")return t}var wj=!1;if(Ts){var Eh;if(Ts){var Dh="oninput"in document;if(!Dh){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Dh=typeof zy.oninput=="function"}Eh=Dh}else Eh=!1;wj=Eh&&(!document.documentMode||9<document.documentMode)}function Vy(){Co&&(Co.detachEvent("onpropertychange",jj),Go=Co=null)}function jj(e){if(e.propertyName==="value"&&Sd(Go)){var t=[];bj(t,Go,e,sg(e)),tj(MT,t)}}function IT(e,t,n){e==="focusin"?(Vy(),Co=t,Go=n,Co.attachEvent("onpropertychange",jj)):e==="focusout"&&Vy()}function OT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sd(Go)}function LT(e,t){if(e==="click")return Sd(t)}function FT(e,t){if(e==="input"||e==="change")return Sd(t)}function $T(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gn=typeof Object.is=="function"?Object.is:$T;function Yo(e,t){if(Gn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!rm.call(t,r)||!Gn(e[r],t[r]))return!1}return!0}function Uy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wy(e,t){var n=Uy(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uy(n)}}function Nj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Nj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sj(){for(var e=window,t=fu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fu(e.document)}return t}function hg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BT(e){var t=Sj(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Nj(n.ownerDocument.documentElement,n)){if(s!==null&&hg(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=Wy(n,i);var a=Wy(n,s);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zT=Ts&&"documentMode"in document&&11>=document.documentMode,Ii=null,Nm=null,ko=null,Sm=!1;function Hy(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sm||Ii==null||Ii!==fu(s)||(s=Ii,"selectionStart"in s&&hg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ko&&Yo(ko,s)||(ko=s,s=bu(Nm,"onSelect"),0<s.length&&(t=new cg("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ii)))}function sc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Oi={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Th={},Cj={};Ts&&(Cj=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function Cd(e){if(Th[e])return Th[e];if(!Oi[e])return e;var t=Oi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Cj)return Th[e]=t[n];return e}var kj=Cd("animationend"),Ej=Cd("animationiteration"),Dj=Cd("animationstart"),Tj=Cd("transitionend"),Pj=new Map,qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Pj.set(e,t),gi(t,[e])}for(var Ph=0;Ph<qy.length;Ph++){var _h=qy[Ph],VT=_h.toLowerCase(),UT=_h[0].toUpperCase()+_h.slice(1);Er(VT,"on"+UT)}Er(kj,"onAnimationEnd");Er(Ej,"onAnimationIteration");Er(Dj,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(Tj,"onTransitionEnd");na("onMouseEnter",["mouseout","mouseover"]);na("onMouseLeave",["mouseout","mouseover"]);na("onPointerEnter",["pointerout","pointerover"]);na("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WT=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function Gy(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,VD(s,t,void 0,e),e.currentTarget=null}function _j(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Gy(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Gy(r,l,u),i=c}}}if(pu)throw e=vm,pu=!1,vm=null,e}function Ve(e,t){var n=t[Tm];n===void 0&&(n=t[Tm]=new Set);var s=e+"__bubble";n.has(s)||(Aj(t,e,2,!1),n.add(s))}function Ah(e,t,n){var s=0;t&&(s|=4),Aj(n,e,s,t)}var rc="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[rc]){e[rc]=!0,$1.forEach(function(n){n!=="selectionchange"&&(WT.has(n)||Ah(n,!1,e),Ah(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rc]||(t[rc]=!0,Ah("selectionchange",!1,t))}}function Aj(e,t,n,s){switch(pj(t)){case 1:var r=rT;break;case 4:r=iT;break;default:r=og}n=r.bind(null,t,n,e),r=void 0,!ym||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Mh(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=Qr(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}tj(function(){var u=i,d=sg(n),h=[];e:{var f=Pj.get(e);if(f!==void 0){var m=cg,p=e;switch(e){case"keypress":if(Gc(n)===0)break e;case"keydown":case"keyup":m=bT;break;case"focusin":p="focus",m=kh;break;case"focusout":p="blur",m=kh;break;case"beforeblur":case"afterblur":m=kh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=NT;break;case kj:case Ej:case Dj:m=dT;break;case Tj:m=CT;break;case"scroll":m=aT;break;case"wheel":m=ET;break;case"copy":case"cut":case"paste":m=fT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ly}var g=(t&4)!==0,v=!g&&e==="scroll",w=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,x;b!==null;){x=b;var N=x.stateNode;if(x.tag===5&&N!==null&&(x=N,w!==null&&(N=Uo(b,w),N!=null&&g.push(Ko(b,N,x)))),v)break;b=b.return}0<g.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==gm&&(p=n.relatedTarget||n.fromElement)&&(Qr(p)||p[Ps]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Qr(p):null,p!==null&&(v=xi(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(g=Iy,N="onMouseLeave",w="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=Ly,N="onPointerLeave",w="onPointerEnter",b="pointer"),v=m==null?f:Li(m),x=p==null?f:Li(p),f=new g(N,b+"leave",m,n,d),f.target=v,f.relatedTarget=x,N=null,Qr(d)===u&&(g=new g(w,b+"enter",p,n,d),g.target=x,g.relatedTarget=v,N=g),v=N,m&&p)t:{for(g=m,w=p,b=0,x=g;x;x=ki(x))b++;for(x=0,N=w;N;N=ki(N))x++;for(;0<b-x;)g=ki(g),b--;for(;0<x-b;)w=ki(w),x--;for(;b--;){if(g===w||w!==null&&g===w.alternate)break t;g=ki(g),w=ki(w)}g=null}else g=null;m!==null&&Yy(h,f,m,g,!1),p!==null&&v!==null&&Yy(h,v,p,g,!0)}}e:{if(f=u?Li(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=RT;else if(By(f))if(wj)S=FT;else{S=OT;var k=IT}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=LT);if(S&&(S=S(e,u))){bj(h,S,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&dm(f,"number",f.value)}switch(k=u?Li(u):window,e){case"focusin":(By(k)||k.contentEditable==="true")&&(Ii=k,Nm=u,ko=null);break;case"focusout":ko=Nm=Ii=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Hy(h,n,d);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":Hy(h,n,d)}var j;if(dg)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ri?yj(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(xj&&n.locale!=="ko"&&(Ri||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ri&&(j=gj()):(Zs=d,lg="value"in Zs?Zs.value:Zs.textContent,Ri=!0)),k=bu(u,C),0<k.length&&(C=new Oy(C,e,null,n,d),h.push({event:C,listeners:k}),j?C.data=j:(j=vj(n),j!==null&&(C.data=j)))),(j=TT?PT(e,n):_T(e,n))&&(u=bu(u,"onBeforeInput"),0<u.length&&(d=new Oy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=j))}_j(h,t)})}function Ko(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bu(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Uo(e,n),i!=null&&s.unshift(Ko(e,i,r)),i=Uo(e,t),i!=null&&s.push(Ko(e,i,r))),e=e.return}return s}function ki(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yy(e,t,n,s,r){for(var i=t._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Uo(n,i),c!=null&&a.unshift(Ko(n,c,l))):r||(c=Uo(n,i),c!=null&&a.push(Ko(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var HT=/\r\n?/g,qT=/\u0000|\uFFFD/g;function Qy(e){return(typeof e=="string"?e:""+e).replace(HT,`
`).replace(qT,"")}function ic(e,t,n){if(t=Qy(t),Qy(e)!==t&&n)throw Error(Q(425))}function wu(){}var Cm=null,km=null;function Em(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,GT=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,YT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(e){return Ky.resolve(null).then(e).catch(QT)}:Dm;function QT(e){setTimeout(function(){throw e})}function Rh(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),qo(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);qo(t)}function ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ba=Math.random().toString(36).slice(2),ns="__reactFiber$"+ba,Xo="__reactProps$"+ba,Ps="__reactContainer$"+ba,Tm="__reactEvents$"+ba,KT="__reactListeners$"+ba,XT="__reactHandles$"+ba;function Qr(e){var t=e[ns];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ps]||n[ns]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Xy(e);e!==null;){if(n=e[ns])return n;e=Xy(e)}return t}e=n,n=e.parentNode}return null}function Al(e){return e=e[ns]||e[Ps],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Li(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function kd(e){return e[Xo]||null}var Pm=[],Fi=-1;function Dr(e){return{current:e}}function He(e){0>Fi||(e.current=Pm[Fi],Pm[Fi]=null,Fi--)}function Be(e,t){Fi++,Pm[Fi]=e.current,e.current=t}var jr={},Ot=Dr(jr),Kt=Dr(!1),li=jr;function sa(e,t){var n=e.type.contextTypes;if(!n)return jr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Xt(e){return e=e.childContextTypes,e!=null}function ju(){He(Kt),He(Ot)}function Jy(e,t,n){if(Ot.current!==jr)throw Error(Q(168));Be(Ot,t),Be(Kt,n)}function Mj(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(Q(108,ID(e)||"Unknown",r));return et({},n,s)}function Nu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jr,li=Ot.current,Be(Ot,e),Be(Kt,Kt.current),!0}function Zy(e,t,n){var s=e.stateNode;if(!s)throw Error(Q(169));n?(e=Mj(e,t,li),s.__reactInternalMemoizedMergedChildContext=e,He(Kt),He(Ot),Be(Ot,e)):He(Kt),Be(Kt,n)}var xs=null,Ed=!1,Ih=!1;function Rj(e){xs===null?xs=[e]:xs.push(e)}function JT(e){Ed=!0,Rj(e)}function Tr(){if(!Ih&&xs!==null){Ih=!0;var e=0,t=$e;try{var n=xs;for($e=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}xs=null,Ed=!1}catch(r){throw xs!==null&&(xs=xs.slice(e+1)),ij(rg,Tr),r}finally{$e=t,Ih=!1}}return null}var $i=[],Bi=0,Su=null,Cu=0,jn=[],Nn=0,ci=null,vs=1,bs="";function $r(e,t){$i[Bi++]=Cu,$i[Bi++]=Su,Su=e,Cu=t}function Ij(e,t,n){jn[Nn++]=vs,jn[Nn++]=bs,jn[Nn++]=ci,ci=e;var s=vs;e=bs;var r=32-Wn(s)-1;s&=~(1<<r),n+=1;var i=32-Wn(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,vs=1<<32-Wn(t)+r|n<<r|s,bs=i+e}else vs=1<<i|n<<r|s,bs=e}function fg(e){e.return!==null&&($r(e,1),Ij(e,1,0))}function mg(e){for(;e===Su;)Su=$i[--Bi],$i[Bi]=null,Cu=$i[--Bi],$i[Bi]=null;for(;e===ci;)ci=jn[--Nn],jn[Nn]=null,bs=jn[--Nn],jn[Nn]=null,vs=jn[--Nn],jn[Nn]=null}var ln=null,an=null,Ge=!1,Bn=null;function Oj(e,t){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function e0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,an=ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,an=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ci!==null?{id:vs,overflow:bs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ln=e,an=null,!0):!1;default:return!1}}function _m(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Am(e){if(Ge){var t=an;if(t){var n=t;if(!e0(e,t)){if(_m(e))throw Error(Q(418));t=ur(n.nextSibling);var s=ln;t&&e0(e,t)?Oj(s,n):(e.flags=e.flags&-4097|2,Ge=!1,ln=e)}}else{if(_m(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Ge=!1,ln=e}}}function t0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function ac(e){if(e!==ln)return!1;if(!Ge)return t0(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Em(e.type,e.memoizedProps)),t&&(t=an)){if(_m(e))throw Lj(),Error(Q(418));for(;t;)Oj(e,t),t=ur(t.nextSibling)}if(t0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){an=ur(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}an=null}}else an=ln?ur(e.stateNode.nextSibling):null;return!0}function Lj(){for(var e=an;e;)e=ur(e.nextSibling)}function ra(){an=ln=null,Ge=!1}function pg(e){Bn===null?Bn=[e]:Bn.push(e)}var ZT=Rs.ReactCurrentBatchConfig;function Va(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var s=n.stateNode}if(!s)throw Error(Q(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function oc(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function n0(e){var t=e._init;return t(e._payload)}function Fj(e){function t(w,b){if(e){var x=w.deletions;x===null?(w.deletions=[b],w.flags|=16):x.push(b)}}function n(w,b){if(!e)return null;for(;b!==null;)t(w,b),b=b.sibling;return null}function s(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function r(w,b){return w=mr(w,b),w.index=0,w.sibling=null,w}function i(w,b,x){return w.index=x,e?(x=w.alternate,x!==null?(x=x.index,x<b?(w.flags|=2,b):x):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,b,x,N){return b===null||b.tag!==6?(b=Vh(x,w.mode,N),b.return=w,b):(b=r(b,x),b.return=w,b)}function c(w,b,x,N){var S=x.type;return S===Mi?d(w,b,x.props.children,N,x.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===qs&&n0(S)===b.type)?(N=r(b,x.props),N.ref=Va(w,b,x),N.return=w,N):(N=eu(x.type,x.key,x.props,null,w.mode,N),N.ref=Va(w,b,x),N.return=w,N)}function u(w,b,x,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=Uh(x,w.mode,N),b.return=w,b):(b=r(b,x.children||[]),b.return=w,b)}function d(w,b,x,N,S){return b===null||b.tag!==7?(b=ni(x,w.mode,N,S),b.return=w,b):(b=r(b,x),b.return=w,b)}function h(w,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Vh(""+b,w.mode,x),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kl:return x=eu(b.type,b.key,b.props,null,w.mode,x),x.ref=Va(w,null,b),x.return=w,x;case Ai:return b=Uh(b,w.mode,x),b.return=w,b;case qs:var N=b._init;return h(w,N(b._payload),x)}if(ho(b)||La(b))return b=ni(b,w.mode,x,null),b.return=w,b;oc(w,b)}return null}function f(w,b,x,N){var S=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(w,b,""+x,N);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kl:return x.key===S?c(w,b,x,N):null;case Ai:return x.key===S?u(w,b,x,N):null;case qs:return S=x._init,f(w,b,S(x._payload),N)}if(ho(x)||La(x))return S!==null?null:d(w,b,x,N,null);oc(w,x)}return null}function m(w,b,x,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(x)||null,l(b,w,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Kl:return w=w.get(N.key===null?x:N.key)||null,c(b,w,N,S);case Ai:return w=w.get(N.key===null?x:N.key)||null,u(b,w,N,S);case qs:var k=N._init;return m(w,b,x,k(N._payload),S)}if(ho(N)||La(N))return w=w.get(x)||null,d(b,w,N,S,null);oc(b,N)}return null}function p(w,b,x,N){for(var S=null,k=null,j=b,C=b=0,D=null;j!==null&&C<x.length;C++){j.index>C?(D=j,j=null):D=j.sibling;var A=f(w,j,x[C],N);if(A===null){j===null&&(j=D);break}e&&j&&A.alternate===null&&t(w,j),b=i(A,b,C),k===null?S=A:k.sibling=A,k=A,j=D}if(C===x.length)return n(w,j),Ge&&$r(w,C),S;if(j===null){for(;C<x.length;C++)j=h(w,x[C],N),j!==null&&(b=i(j,b,C),k===null?S=j:k.sibling=j,k=j);return Ge&&$r(w,C),S}for(j=s(w,j);C<x.length;C++)D=m(j,w,C,x[C],N),D!==null&&(e&&D.alternate!==null&&j.delete(D.key===null?C:D.key),b=i(D,b,C),k===null?S=D:k.sibling=D,k=D);return e&&j.forEach(function(F){return t(w,F)}),Ge&&$r(w,C),S}function g(w,b,x,N){var S=La(x);if(typeof S!="function")throw Error(Q(150));if(x=S.call(x),x==null)throw Error(Q(151));for(var k=S=null,j=b,C=b=0,D=null,A=x.next();j!==null&&!A.done;C++,A=x.next()){j.index>C?(D=j,j=null):D=j.sibling;var F=f(w,j,A.value,N);if(F===null){j===null&&(j=D);break}e&&j&&F.alternate===null&&t(w,j),b=i(F,b,C),k===null?S=F:k.sibling=F,k=F,j=D}if(A.done)return n(w,j),Ge&&$r(w,C),S;if(j===null){for(;!A.done;C++,A=x.next())A=h(w,A.value,N),A!==null&&(b=i(A,b,C),k===null?S=A:k.sibling=A,k=A);return Ge&&$r(w,C),S}for(j=s(w,j);!A.done;C++,A=x.next())A=m(j,w,C,A.value,N),A!==null&&(e&&A.alternate!==null&&j.delete(A.key===null?C:A.key),b=i(A,b,C),k===null?S=A:k.sibling=A,k=A);return e&&j.forEach(function($){return t(w,$)}),Ge&&$r(w,C),S}function v(w,b,x,N){if(typeof x=="object"&&x!==null&&x.type===Mi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Kl:e:{for(var S=x.key,k=b;k!==null;){if(k.key===S){if(S=x.type,S===Mi){if(k.tag===7){n(w,k.sibling),b=r(k,x.props.children),b.return=w,w=b;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===qs&&n0(S)===k.type){n(w,k.sibling),b=r(k,x.props),b.ref=Va(w,k,x),b.return=w,w=b;break e}n(w,k);break}else t(w,k);k=k.sibling}x.type===Mi?(b=ni(x.props.children,w.mode,N,x.key),b.return=w,w=b):(N=eu(x.type,x.key,x.props,null,w.mode,N),N.ref=Va(w,b,x),N.return=w,w=N)}return a(w);case Ai:e:{for(k=x.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(w,b.sibling),b=r(b,x.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else t(w,b);b=b.sibling}b=Uh(x,w.mode,N),b.return=w,w=b}return a(w);case qs:return k=x._init,v(w,b,k(x._payload),N)}if(ho(x))return p(w,b,x,N);if(La(x))return g(w,b,x,N);oc(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(n(w,b.sibling),b=r(b,x),b.return=w,w=b):(n(w,b),b=Vh(x,w.mode,N),b.return=w,w=b),a(w)):n(w,b)}return v}var ia=Fj(!0),$j=Fj(!1),ku=Dr(null),Eu=null,zi=null,gg=null;function xg(){gg=zi=Eu=null}function yg(e){var t=ku.current;He(ku),e._currentValue=t}function Mm(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Eu=e,gg=zi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qt=!0),e.firstContext=null)}function Pn(e){var t=e._currentValue;if(gg!==e)if(e={context:e,memoizedValue:t,next:null},zi===null){if(Eu===null)throw Error(Q(308));zi=e,Eu.dependencies={lanes:0,firstContext:e}}else zi=zi.next=e;return t}var Kr=null;function vg(e){Kr===null?Kr=[e]:Kr.push(e)}function Bj(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,vg(t)):(n.next=r.next,r.next=n),t.interleaved=n,_s(e,s)}function _s(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gs=!1;function bg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ss(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Te&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,_s(e,n)}return r=s.interleaved,r===null?(t.next=t,vg(s)):(t.next=r.next,r.next=t),s.interleaved=t,_s(e,n)}function Yc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ig(e,n)}}function s0(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Du(e,t,n,s){var r=e.updateQueue;Gs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=et({},h,f);break e;case 2:Gs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);di|=a,e.lanes=a,e.memoizedState=h}}function r0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(Q(191,r));r.call(s)}}}var Ml={},rs=Dr(Ml),Jo=Dr(Ml),Zo=Dr(Ml);function Xr(e){if(e===Ml)throw Error(Q(174));return e}function wg(e,t){switch(Be(Zo,t),Be(Jo,e),Be(rs,Ml),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fm(t,e)}He(rs),Be(rs,t)}function aa(){He(rs),He(Jo),He(Zo)}function Vj(e){Xr(Zo.current);var t=Xr(rs.current),n=fm(t,e.type);t!==n&&(Be(Jo,e),Be(rs,n))}function jg(e){Jo.current===e&&(He(rs),He(Jo))}var Ke=Dr(0);function Tu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oh=[];function Ng(){for(var e=0;e<Oh.length;e++)Oh[e]._workInProgressVersionPrimary=null;Oh.length=0}var Qc=Rs.ReactCurrentDispatcher,Lh=Rs.ReactCurrentBatchConfig,ui=0,Ze=null,gt=null,vt=null,Pu=!1,Eo=!1,el=0,eP=0;function Dt(){throw Error(Q(321))}function Sg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function Cg(e,t,n,s,r,i){if(ui=i,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qc.current=e===null||e.memoizedState===null?rP:iP,e=n(s,r),Eo){i=0;do{if(Eo=!1,el=0,25<=i)throw Error(Q(301));i+=1,vt=gt=null,t.updateQueue=null,Qc.current=aP,e=n(s,r)}while(Eo)}if(Qc.current=_u,t=gt!==null&&gt.next!==null,ui=0,vt=gt=Ze=null,Pu=!1,t)throw Error(Q(300));return e}function kg(){var e=el!==0;return el=0,e}function Zn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=e:vt=vt.next=e,vt}function _n(){if(gt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=vt===null?Ze.memoizedState:vt.next;if(t!==null)vt=t,gt=e;else{if(e===null)throw Error(Q(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},vt===null?Ze.memoizedState=vt=e:vt=vt.next=e}return vt}function tl(e,t){return typeof t=="function"?t(e):t}function Fh(e){var t=_n(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var s=gt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((ui&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,Ze.lanes|=d,di|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,Gn(s,t.memoizedState)||(Qt=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Ze.lanes|=i,di|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $h(e){var t=_n(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);Gn(i,t.memoizedState)||(Qt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Uj(){}function Wj(e,t){var n=Ze,s=_n(),r=t(),i=!Gn(s.memoizedState,r);if(i&&(s.memoizedState=r,Qt=!0),s=s.queue,Eg(Gj.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,nl(9,qj.bind(null,n,s,r,t),void 0,null),bt===null)throw Error(Q(349));ui&30||Hj(n,t,r)}return r}function Hj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qj(e,t,n,s){t.value=n,t.getSnapshot=s,Yj(t)&&Qj(e)}function Gj(e,t,n){return n(function(){Yj(t)&&Qj(e)})}function Yj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch{return!0}}function Qj(e){var t=_s(e,1);t!==null&&Hn(t,e,1,-1)}function i0(e){var t=Zn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:e},t.queue=e,e=e.dispatch=sP.bind(null,Ze,e),[t.memoizedState,e]}function nl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Kj(){return _n().memoizedState}function Kc(e,t,n,s){var r=Zn();Ze.flags|=e,r.memoizedState=nl(1|t,n,void 0,s===void 0?null:s)}function Dd(e,t,n,s){var r=_n();s=s===void 0?null:s;var i=void 0;if(gt!==null){var a=gt.memoizedState;if(i=a.destroy,s!==null&&Sg(s,a.deps)){r.memoizedState=nl(t,n,i,s);return}}Ze.flags|=e,r.memoizedState=nl(1|t,n,i,s)}function a0(e,t){return Kc(8390656,8,e,t)}function Eg(e,t){return Dd(2048,8,e,t)}function Xj(e,t){return Dd(4,2,e,t)}function Jj(e,t){return Dd(4,4,e,t)}function Zj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eN(e,t,n){return n=n!=null?n.concat([e]):null,Dd(4,4,Zj.bind(null,t,e),n)}function Dg(){}function tN(e,t){var n=_n();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Sg(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function nN(e,t){var n=_n();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Sg(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function sN(e,t,n){return ui&21?(Gn(n,t)||(n=lj(),Ze.lanes|=n,di|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qt=!0),e.memoizedState=n)}function tP(e,t){var n=$e;$e=n!==0&&4>n?n:4,e(!0);var s=Lh.transition;Lh.transition={};try{e(!1),t()}finally{$e=n,Lh.transition=s}}function rN(){return _n().memoizedState}function nP(e,t,n){var s=fr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},iN(e))aN(t,n);else if(n=Bj(e,t,n,s),n!==null){var r=Ut();Hn(n,e,s,r),oN(n,t,s)}}function sP(e,t,n){var s=fr(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(iN(e))aN(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,Gn(l,a)){var c=t.interleaved;c===null?(r.next=r,vg(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Bj(e,t,r,s),n!==null&&(r=Ut(),Hn(n,e,s,r),oN(n,t,s))}}function iN(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function aN(e,t){Eo=Pu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oN(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ig(e,n)}}var _u={readContext:Pn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},rP={readContext:Pn,useCallback:function(e,t){return Zn().memoizedState=[e,t===void 0?null:t],e},useContext:Pn,useEffect:a0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Kc(4194308,4,Zj.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Kc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kc(4,2,e,t)},useMemo:function(e,t){var n=Zn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Zn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=nP.bind(null,Ze,e),[s.memoizedState,e]},useRef:function(e){var t=Zn();return e={current:e},t.memoizedState=e},useState:i0,useDebugValue:Dg,useDeferredValue:function(e){return Zn().memoizedState=e},useTransition:function(){var e=i0(!1),t=e[0];return e=tP.bind(null,e[1]),Zn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ze,r=Zn();if(Ge){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),bt===null)throw Error(Q(349));ui&30||Hj(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,a0(Gj.bind(null,s,i,e),[e]),s.flags|=2048,nl(9,qj.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=Zn(),t=bt.identifierPrefix;if(Ge){var n=bs,s=vs;n=(s&~(1<<32-Wn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=el++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=eP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iP={readContext:Pn,useCallback:tN,useContext:Pn,useEffect:Eg,useImperativeHandle:eN,useInsertionEffect:Xj,useLayoutEffect:Jj,useMemo:nN,useReducer:Fh,useRef:Kj,useState:function(){return Fh(tl)},useDebugValue:Dg,useDeferredValue:function(e){var t=_n();return sN(t,gt.memoizedState,e)},useTransition:function(){var e=Fh(tl)[0],t=_n().memoizedState;return[e,t]},useMutableSource:Uj,useSyncExternalStore:Wj,useId:rN,unstable_isNewReconciler:!1},aP={readContext:Pn,useCallback:tN,useContext:Pn,useEffect:Eg,useImperativeHandle:eN,useInsertionEffect:Xj,useLayoutEffect:Jj,useMemo:nN,useReducer:$h,useRef:Kj,useState:function(){return $h(tl)},useDebugValue:Dg,useDeferredValue:function(e){var t=_n();return gt===null?t.memoizedState=e:sN(t,gt.memoizedState,e)},useTransition:function(){var e=$h(tl)[0],t=_n().memoizedState;return[e,t]},useMutableSource:Uj,useSyncExternalStore:Wj,useId:rN,unstable_isNewReconciler:!1};function Fn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Rm(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Td={isMounted:function(e){return(e=e._reactInternals)?xi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Ut(),r=fr(e),i=Ss(s,r);i.payload=t,n!=null&&(i.callback=n),t=dr(e,i,r),t!==null&&(Hn(t,e,r,s),Yc(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Ut(),r=fr(e),i=Ss(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=dr(e,i,r),t!==null&&(Hn(t,e,r,s),Yc(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ut(),s=fr(e),r=Ss(n,s);r.tag=2,t!=null&&(r.callback=t),t=dr(e,r,s),t!==null&&(Hn(t,e,s,n),Yc(t,e,s))}};function o0(e,t,n,s,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!Yo(n,s)||!Yo(r,i):!0}function lN(e,t,n){var s=!1,r=jr,i=t.contextType;return typeof i=="object"&&i!==null?i=Pn(i):(r=Xt(t)?li:Ot.current,s=t.contextTypes,i=(s=s!=null)?sa(e,r):jr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Td,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function l0(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Td.enqueueReplaceState(t,t.state,null)}function Im(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},bg(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Pn(i):(i=Xt(t)?li:Ot.current,r.context=sa(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Rm(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Td.enqueueReplaceState(r,r.state,null),Du(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function oa(e,t){try{var n="",s=t;do n+=RD(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Bh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Om(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oP=typeof WeakMap=="function"?WeakMap:Map;function cN(e,t,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Mu||(Mu=!0,qm=s),Om(e,t)},n}function uN(e,t,n){n=Ss(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){Om(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Om(e,t),typeof s!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function c0(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new oP;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=wP.bind(null,e,t,n),t.then(e,e))}function u0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function d0(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ss(-1,1),t.tag=2,dr(n,t,1))),n.lanes|=1),e)}var lP=Rs.ReactCurrentOwner,Qt=!1;function zt(e,t,n,s){t.child=e===null?$j(t,null,n,s):ia(t,e.child,n,s)}function h0(e,t,n,s,r){n=n.render;var i=t.ref;return Ji(t,r),s=Cg(e,t,n,s,i,r),n=kg(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,As(e,t,r)):(Ge&&n&&fg(t),t.flags|=1,zt(e,t,s,r),t.child)}function f0(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!Og(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,dN(e,t,i,s,r)):(e=eu(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(a,s)&&e.ref===t.ref)return As(e,t,r)}return t.flags|=1,e=mr(i,s),e.ref=t.ref,e.return=t,t.child=e}function dN(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(Yo(i,s)&&e.ref===t.ref)if(Qt=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(Qt=!0);else return t.lanes=e.lanes,As(e,t,r)}return Lm(e,t,n,s,r)}function hN(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(Ui,nn),nn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Be(Ui,nn),nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Be(Ui,nn),nn|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Be(Ui,nn),nn|=s;return zt(e,t,r,n),t.child}function fN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Lm(e,t,n,s,r){var i=Xt(n)?li:Ot.current;return i=sa(t,i),Ji(t,r),n=Cg(e,t,n,s,i,r),s=kg(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,As(e,t,r)):(Ge&&s&&fg(t),t.flags|=1,zt(e,t,n,r),t.child)}function m0(e,t,n,s,r){if(Xt(n)){var i=!0;Nu(t)}else i=!1;if(Ji(t,r),t.stateNode===null)Xc(e,t),lN(t,n,s),Im(t,n,s,r),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pn(u):(u=Xt(n)?li:Ot.current,u=sa(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&l0(t,a,s,u),Gs=!1;var f=t.memoizedState;a.state=f,Du(t,s,a,r),c=t.memoizedState,l!==s||f!==c||Kt.current||Gs?(typeof d=="function"&&(Rm(t,n,d,s),c=t.memoizedState),(l=Gs||o0(t,n,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,zj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Fn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Pn(c):(c=Xt(n)?li:Ot.current,c=sa(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&l0(t,a,s,c),Gs=!1,f=t.memoizedState,a.state=f,Du(t,s,a,r);var p=t.memoizedState;l!==h||f!==p||Kt.current||Gs?(typeof m=="function"&&(Rm(t,n,m,s),p=t.memoizedState),(u=Gs||o0(t,n,u,s,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Fm(e,t,n,s,i,r)}function Fm(e,t,n,s,r,i){fN(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return r&&Zy(t,n,!1),As(e,t,i);s=t.stateNode,lP.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=ia(t,e.child,null,i),t.child=ia(t,null,l,i)):zt(e,t,l,i),t.memoizedState=s.state,r&&Zy(t,n,!0),t.child}function mN(e){var t=e.stateNode;t.pendingContext?Jy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jy(e,t.context,!1),wg(e,t.containerInfo)}function p0(e,t,n,s,r){return ra(),pg(r),t.flags|=256,zt(e,t,n,s),t.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Bm(e){return{baseLanes:e,cachePool:null,transitions:null}}function pN(e,t,n){var s=t.pendingProps,r=Ke.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Be(Ke,r&1),e===null)return Am(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ad(a,s,0,null),e=ni(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Bm(n),t.memoizedState=$m,e):Tg(t,a));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return cP(e,t,a,s,l,r,n);if(i){i=s.fallback,a=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=mr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=mr(l,i):(i=ni(i,a,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?Bm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=$m,s}return i=e.child,e=i.sibling,s=mr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Tg(e,t){return t=Ad({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lc(e,t,n,s){return s!==null&&pg(s),ia(t,e.child,null,n),e=Tg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cP(e,t,n,s,r,i,a){if(n)return t.flags&256?(t.flags&=-257,s=Bh(Error(Q(422))),lc(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Ad({mode:"visible",children:s.children},r,0,null),i=ni(i,r,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&ia(t,e.child,null,a),t.child.memoizedState=Bm(a),t.memoizedState=$m,i);if(!(t.mode&1))return lc(e,t,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(Q(419)),s=Bh(i,s,void 0),lc(e,t,a,s)}if(l=(a&e.childLanes)!==0,Qt||l){if(s=bt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,_s(e,r),Hn(s,e,r,-1))}return Ig(),s=Bh(Error(Q(421))),lc(e,t,a,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=jP.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,an=ur(r.nextSibling),ln=t,Ge=!0,Bn=null,e!==null&&(jn[Nn++]=vs,jn[Nn++]=bs,jn[Nn++]=ci,vs=e.id,bs=e.overflow,ci=t),t=Tg(t,s.children),t.flags|=4096,t)}function g0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Mm(e.return,t,n)}function zh(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function gN(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(zt(e,t,s.children,n),s=Ke.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&g0(e,n,t);else if(e.tag===19)g0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Be(Ke,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Tu(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),zh(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Tu(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}zh(t,!0,n,null,i);break;case"together":zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function As(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),di|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=mr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uP(e,t,n){switch(t.tag){case 3:mN(t),ra();break;case 5:Vj(t);break;case 1:Xt(t.type)&&Nu(t);break;case 4:wg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Be(ku,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Be(Ke,Ke.current&1),t.flags|=128,null):n&t.child.childLanes?pN(e,t,n):(Be(Ke,Ke.current&1),e=As(e,t,n),e!==null?e.sibling:null);Be(Ke,Ke.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return gN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Be(Ke,Ke.current),s)break;return null;case 22:case 23:return t.lanes=0,hN(e,t,n)}return As(e,t,n)}var xN,zm,yN,vN;xN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zm=function(){};yN=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Xr(rs.current);var i=null;switch(n){case"input":r=cm(e,r),s=cm(e,s),i=[];break;case"select":r=et({},r,{value:void 0}),s=et({},s,{value:void 0}),i=[];break;case"textarea":r=hm(e,r),s=hm(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=wu)}mm(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};vN=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ua(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function dP(e,t,n){var s=t.pendingProps;switch(mg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(t),null;case 1:return Xt(t.type)&&ju(),Tt(t),null;case 3:return s=t.stateNode,aa(),He(Kt),He(Ot),Ng(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ac(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&(Qm(Bn),Bn=null))),zm(e,t),Tt(t),null;case 5:jg(t);var r=Xr(Zo.current);if(n=t.type,e!==null&&t.stateNode!=null)yN(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Q(166));return Tt(t),null}if(e=Xr(rs.current),ac(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[ns]=t,s[Xo]=i,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(r=0;r<mo.length;r++)Ve(mo[r],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Cy(s,i),Ve("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",s);break;case"textarea":Ey(s,i),Ve("invalid",s)}mm(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&ic(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ic(s.textContent,l,e),r=["children",""+l]):zo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ve("scroll",s)}switch(n){case"input":Xl(s),ky(s,i,!0);break;case"textarea":Xl(s),Dy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=wu)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=G1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=a.createElement(n,{is:s.is}):(e=a.createElement(n),n==="select"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,n),e[ns]=t,e[Xo]=s,xN(e,t,!1,!1),t.stateNode=e;e:{switch(a=pm(n,s),n){case"dialog":Ve("cancel",e),Ve("close",e),r=s;break;case"iframe":case"object":case"embed":Ve("load",e),r=s;break;case"video":case"audio":for(r=0;r<mo.length;r++)Ve(mo[r],e);r=s;break;case"source":Ve("error",e),r=s;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),r=s;break;case"details":Ve("toggle",e),r=s;break;case"input":Cy(e,s),r=cm(e,s),Ve("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=et({},s,{value:void 0}),Ve("invalid",e);break;case"textarea":Ey(e,s),r=hm(e,s),Ve("invalid",e);break;default:r=s}mm(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?K1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Y1(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Vo(e,c):typeof c=="number"&&Vo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",e):c!=null&&Zp(e,i,c,a))}switch(n){case"input":Xl(e),ky(e,s,!1);break;case"textarea":Xl(e),Dy(e);break;case"option":s.value!=null&&e.setAttribute("value",""+wr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Yi(e,!!s.multiple,i,!1):s.defaultValue!=null&&Yi(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=wu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Tt(t),null;case 6:if(e&&t.stateNode!=null)vN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Q(166));if(n=Xr(Zo.current),Xr(rs.current),ac(t)){if(s=t.stateNode,n=t.memoizedProps,s[ns]=t,(i=s.nodeValue!==n)&&(e=ln,e!==null))switch(e.tag){case 3:ic(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ic(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ns]=t,t.stateNode=s}return Tt(t),null;case 13:if(He(Ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&an!==null&&t.mode&1&&!(t.flags&128))Lj(),ra(),t.flags|=98560,i=!1;else if(i=ac(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[ns]=t}else ra(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Tt(t),i=!1}else Bn!==null&&(Qm(Bn),Bn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ke.current&1?xt===0&&(xt=3):Ig())),t.updateQueue!==null&&(t.flags|=4),Tt(t),null);case 4:return aa(),zm(e,t),e===null&&Qo(t.stateNode.containerInfo),Tt(t),null;case 10:return yg(t.type._context),Tt(t),null;case 17:return Xt(t.type)&&ju(),Tt(t),null;case 19:if(He(Ke),i=t.memoizedState,i===null)return Tt(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)Ua(i,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Tu(e),a!==null){for(t.flags|=128,Ua(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Be(Ke,Ke.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>la&&(t.flags|=128,s=!0,Ua(i,!1),t.lanes=4194304)}else{if(!s)if(e=Tu(a),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ua(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ge)return Tt(t),null}else 2*rt()-i.renderingStartTime>la&&n!==1073741824&&(t.flags|=128,s=!0,Ua(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,n=Ke.current,Be(Ke,s?n&1|2:n&1),t):(Tt(t),null);case 22:case 23:return Rg(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?nn&1073741824&&(Tt(t),t.subtreeFlags&6&&(t.flags|=8192)):Tt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function hP(e,t){switch(mg(t),t.tag){case 1:return Xt(t.type)&&ju(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(),He(Kt),He(Ot),Ng(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jg(t),null;case 13:if(He(Ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));ra()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Ke),null;case 4:return aa(),null;case 10:return yg(t.type._context),null;case 22:case 23:return Rg(),null;case 24:return null;default:return null}}var cc=!1,At=!1,fP=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Vi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){st(e,t,s)}else n.current=null}function Vm(e,t,n){try{n()}catch(s){st(e,t,s)}}var x0=!1;function mP(e,t){if(Cm=yu,e=Sj(),hg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(l=a+r),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===i&&++d===s&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:e,selectionRange:n},yu=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:Fn(t.type,g),v);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(N){st(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return p=x0,x0=!1,p}function Do(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&Vm(t,n,i)}r=r.next}while(r!==s)}}function Pd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Um(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bN(e){var t=e.alternate;t!==null&&(e.alternate=null,bN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ns],delete t[Xo],delete t[Tm],delete t[KT],delete t[XT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wN(e){return e.tag===5||e.tag===3||e.tag===4}function y0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wu));else if(s!==4&&(e=e.child,e!==null))for(Wm(e,t,n),e=e.sibling;e!==null;)Wm(e,t,n),e=e.sibling}function Hm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Hm(e,t,n),e=e.sibling;e!==null;)Hm(e,t,n),e=e.sibling}var St=null,$n=!1;function $s(e,t,n){for(n=n.child;n!==null;)jN(e,t,n),n=n.sibling}function jN(e,t,n){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(jd,n)}catch{}switch(n.tag){case 5:At||Vi(n,t);case 6:var s=St,r=$n;St=null,$s(e,t,n),St=s,$n=r,St!==null&&($n?(e=St,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&($n?(e=St,n=n.stateNode,e.nodeType===8?Rh(e.parentNode,n):e.nodeType===1&&Rh(e,n),qo(e)):Rh(St,n.stateNode));break;case 4:s=St,r=$n,St=n.stateNode.containerInfo,$n=!0,$s(e,t,n),St=s,$n=r;break;case 0:case 11:case 14:case 15:if(!At&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Vm(n,t,a),r=r.next}while(r!==s)}$s(e,t,n);break;case 1:if(!At&&(Vi(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){st(n,t,l)}$s(e,t,n);break;case 21:$s(e,t,n);break;case 22:n.mode&1?(At=(s=At)||n.memoizedState!==null,$s(e,t,n),At=s):$s(e,t,n);break;default:$s(e,t,n)}}function v0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fP),t.forEach(function(s){var r=NP.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Ln(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:St=l.stateNode,$n=!1;break e;case 3:St=l.stateNode.containerInfo,$n=!0;break e;case 4:St=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(St===null)throw Error(Q(160));jN(i,a,r),St=null,$n=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){st(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)NN(t,e),t=t.sibling}function NN(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ln(t,e),Kn(e),s&4){try{Do(3,e,e.return),Pd(3,e)}catch(g){st(e,e.return,g)}try{Do(5,e,e.return)}catch(g){st(e,e.return,g)}}break;case 1:Ln(t,e),Kn(e),s&512&&n!==null&&Vi(n,n.return);break;case 5:if(Ln(t,e),Kn(e),s&512&&n!==null&&Vi(n,n.return),e.flags&32){var r=e.stateNode;try{Vo(r,"")}catch(g){st(e,e.return,g)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&H1(r,i),pm(l,a);var u=pm(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?K1(r,h):d==="dangerouslySetInnerHTML"?Y1(r,h):d==="children"?Vo(r,h):Zp(r,d,h,u)}switch(l){case"input":um(r,i);break;case"textarea":q1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Yi(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Yi(r,!!i.multiple,i.defaultValue,!0):Yi(r,!!i.multiple,i.multiple?[]:"",!1))}r[Xo]=i}catch(g){st(e,e.return,g)}}break;case 6:if(Ln(t,e),Kn(e),s&4){if(e.stateNode===null)throw Error(Q(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){st(e,e.return,g)}}break;case 3:if(Ln(t,e),Kn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{qo(t.containerInfo)}catch(g){st(e,e.return,g)}break;case 4:Ln(t,e),Kn(e);break;case 13:Ln(t,e),Kn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Ag=rt())),s&4&&v0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(At=(u=At)||d,Ln(t,e),At=u):Ln(t,e),Kn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Do(4,f,f.return);break;case 1:Vi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){st(s,n,g)}}break;case 5:Vi(f,f.return);break;case 22:if(f.memoizedState!==null){w0(h);continue}}m!==null?(m.return=f,oe=m):w0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Q1("display",a))}catch(g){st(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){st(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ln(t,e),Kn(e),s&4&&v0(e);break;case 21:break;default:Ln(t,e),Kn(e)}}function Kn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wN(n)){var s=n;break e}n=n.return}throw Error(Q(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Vo(r,""),s.flags&=-33);var i=y0(e);Hm(e,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=y0(e);Wm(e,l,a);break;default:throw Error(Q(161))}}catch(c){st(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pP(e,t,n){oe=e,SN(e)}function SN(e,t,n){for(var s=(e.mode&1)!==0;oe!==null;){var r=oe,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||cc;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||At;l=cc;var u=At;if(cc=a,(At=c)&&!u)for(oe=r;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?j0(r):c!==null?(c.return=a,oe=c):j0(r);for(;i!==null;)oe=i,SN(i),i=i.sibling;oe=r,cc=l,At=u}b0(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,oe=i):b0(e)}}function b0(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:At||Pd(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!At)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Fn(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&r0(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}r0(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&qo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}At||t.flags&512&&Um(t)}catch(f){st(t,t.return,f)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function w0(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function j0(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pd(4,t)}catch(c){st(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){st(t,r,c)}}var i=t.return;try{Um(t)}catch(c){st(t,i,c)}break;case 5:var a=t.return;try{Um(t)}catch(c){st(t,a,c)}}}catch(c){st(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var gP=Math.ceil,Au=Rs.ReactCurrentDispatcher,Pg=Rs.ReactCurrentOwner,Dn=Rs.ReactCurrentBatchConfig,Te=0,bt=null,ct=null,kt=0,nn=0,Ui=Dr(0),xt=0,sl=null,di=0,_d=0,_g=0,To=null,Gt=null,Ag=0,la=1/0,ps=null,Mu=!1,qm=null,hr=null,uc=!1,er=null,Ru=0,Po=0,Gm=null,Jc=-1,Zc=0;function Ut(){return Te&6?rt():Jc!==-1?Jc:Jc=rt()}function fr(e){return e.mode&1?Te&2&&kt!==0?kt&-kt:ZT.transition!==null?(Zc===0&&(Zc=lj()),Zc):(e=$e,e!==0||(e=window.event,e=e===void 0?16:pj(e.type)),e):1}function Hn(e,t,n,s){if(50<Po)throw Po=0,Gm=null,Error(Q(185));Pl(e,n,s),(!(Te&2)||e!==bt)&&(e===bt&&(!(Te&2)&&(_d|=n),xt===4&&Ks(e,kt)),Jt(e,s),n===1&&Te===0&&!(t.mode&1)&&(la=rt()+500,Ed&&Tr()))}function Jt(e,t){var n=e.callbackNode;ZD(e,t);var s=xu(e,e===bt?kt:0);if(s===0)n!==null&&_y(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&_y(n),t===1)e.tag===0?JT(N0.bind(null,e)):Rj(N0.bind(null,e)),YT(function(){!(Te&6)&&Tr()}),n=null;else{switch(cj(s)){case 1:n=rg;break;case 4:n=aj;break;case 16:n=gu;break;case 536870912:n=oj;break;default:n=gu}n=AN(n,CN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function CN(e,t){if(Jc=-1,Zc=0,Te&6)throw Error(Q(327));var n=e.callbackNode;if(Zi()&&e.callbackNode!==n)return null;var s=xu(e,e===bt?kt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Iu(e,s);else{t=s;var r=Te;Te|=2;var i=EN();(bt!==e||kt!==t)&&(ps=null,la=rt()+500,ti(e,t));do try{vP();break}catch(l){kN(e,l)}while(!0);xg(),Au.current=i,Te=r,ct!==null?t=0:(bt=null,kt=0,t=xt)}if(t!==0){if(t===2&&(r=bm(e),r!==0&&(s=r,t=Ym(e,r))),t===1)throw n=sl,ti(e,0),Ks(e,s),Jt(e,rt()),n;if(t===6)Ks(e,s);else{if(r=e.current.alternate,!(s&30)&&!xP(r)&&(t=Iu(e,s),t===2&&(i=bm(e),i!==0&&(s=i,t=Ym(e,i))),t===1))throw n=sl,ti(e,0),Ks(e,s),Jt(e,rt()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(Q(345));case 2:Br(e,Gt,ps);break;case 3:if(Ks(e,s),(s&130023424)===s&&(t=Ag+500-rt(),10<t)){if(xu(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Ut(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Dm(Br.bind(null,e,Gt,ps),t);break}Br(e,Gt,ps);break;case 4:if(Ks(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var a=31-Wn(s);i=1<<a,a=t[a],a>r&&(r=a),s&=~i}if(s=r,s=rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*gP(s/1960))-s,10<s){e.timeoutHandle=Dm(Br.bind(null,e,Gt,ps),s);break}Br(e,Gt,ps);break;case 5:Br(e,Gt,ps);break;default:throw Error(Q(329))}}}return Jt(e,rt()),e.callbackNode===n?CN.bind(null,e):null}function Ym(e,t){var n=To;return e.current.memoizedState.isDehydrated&&(ti(e,t).flags|=256),e=Iu(e,t),e!==2&&(t=Gt,Gt=n,t!==null&&Qm(t)),e}function Qm(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function xP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Gn(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ks(e,t){for(t&=~_g,t&=~_d,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wn(t),s=1<<n;e[n]=-1,t&=~s}}function N0(e){if(Te&6)throw Error(Q(327));Zi();var t=xu(e,0);if(!(t&1))return Jt(e,rt()),null;var n=Iu(e,t);if(e.tag!==0&&n===2){var s=bm(e);s!==0&&(t=s,n=Ym(e,s))}if(n===1)throw n=sl,ti(e,0),Ks(e,t),Jt(e,rt()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,Gt,ps),Jt(e,rt()),null}function Mg(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(la=rt()+500,Ed&&Tr())}}function hi(e){er!==null&&er.tag===0&&!(Te&6)&&Zi();var t=Te;Te|=1;var n=Dn.transition,s=$e;try{if(Dn.transition=null,$e=1,e)return e()}finally{$e=s,Dn.transition=n,Te=t,!(Te&6)&&Tr()}}function Rg(){nn=Ui.current,He(Ui)}function ti(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,GT(n)),ct!==null)for(n=ct.return;n!==null;){var s=n;switch(mg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ju();break;case 3:aa(),He(Kt),He(Ot),Ng();break;case 5:jg(s);break;case 4:aa();break;case 13:He(Ke);break;case 19:He(Ke);break;case 10:yg(s.type._context);break;case 22:case 23:Rg()}n=n.return}if(bt=e,ct=e=mr(e.current,null),kt=nn=t,xt=0,sl=null,_g=_d=di=0,Gt=To=null,Kr!==null){for(t=0;t<Kr.length;t++)if(n=Kr[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}Kr=null}return e}function kN(e,t){do{var n=ct;try{if(xg(),Qc.current=_u,Pu){for(var s=Ze.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Pu=!1}if(ui=0,vt=gt=Ze=null,Eo=!1,el=0,Pg.current=null,n===null||n.return===null){xt=1,sl=t,ct=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=kt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=u0(a);if(m!==null){m.flags&=-257,d0(m,a,l,i,t),m.mode&1&&c0(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){c0(i,u,t),Ig();break e}c=Error(Q(426))}}else if(Ge&&l.mode&1){var v=u0(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),d0(v,a,l,i,t),pg(oa(c,l));break e}}i=c=oa(c,l),xt!==4&&(xt=2),To===null?To=[i]:To.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=cN(i,c,t);s0(i,w);break e;case 1:l=c;var b=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(hr===null||!hr.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=uN(i,l,t);s0(i,N);break e}}i=i.return}while(i!==null)}TN(n)}catch(S){t=S,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function EN(){var e=Au.current;return Au.current=_u,e===null?_u:e}function Ig(){(xt===0||xt===3||xt===2)&&(xt=4),bt===null||!(di&268435455)&&!(_d&268435455)||Ks(bt,kt)}function Iu(e,t){var n=Te;Te|=2;var s=EN();(bt!==e||kt!==t)&&(ps=null,ti(e,t));do try{yP();break}catch(r){kN(e,r)}while(!0);if(xg(),Te=n,Au.current=s,ct!==null)throw Error(Q(261));return bt=null,kt=0,xt}function yP(){for(;ct!==null;)DN(ct)}function vP(){for(;ct!==null&&!WD();)DN(ct)}function DN(e){var t=_N(e.alternate,e,nn);e.memoizedProps=e.pendingProps,t===null?TN(e):ct=t,Pg.current=null}function TN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hP(n,t),n!==null){n.flags&=32767,ct=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,ct=null;return}}else if(n=dP(n,t,nn),n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);xt===0&&(xt=5)}function Br(e,t,n){var s=$e,r=Dn.transition;try{Dn.transition=null,$e=1,bP(e,t,n,s)}finally{Dn.transition=r,$e=s}return null}function bP(e,t,n,s){do Zi();while(er!==null);if(Te&6)throw Error(Q(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(eT(e,i),e===bt&&(ct=bt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uc||(uc=!0,AN(gu,function(){return Zi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dn.transition,Dn.transition=null;var a=$e;$e=1;var l=Te;Te|=4,Pg.current=null,mP(e,n),NN(n,e),BT(km),yu=!!Cm,km=Cm=null,e.current=n,pP(n),HD(),Te=l,$e=a,Dn.transition=i}else e.current=n;if(uc&&(uc=!1,er=e,Ru=r),i=e.pendingLanes,i===0&&(hr=null),YD(n.stateNode),Jt(e,rt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Mu)throw Mu=!1,e=qm,qm=null,e;return Ru&1&&e.tag!==0&&Zi(),i=e.pendingLanes,i&1?e===Gm?Po++:(Po=0,Gm=e):Po=0,Tr(),null}function Zi(){if(er!==null){var e=cj(Ru),t=Dn.transition,n=$e;try{if(Dn.transition=null,$e=16>e?16:e,er===null)var s=!1;else{if(e=er,er=null,Ru=0,Te&6)throw Error(Q(331));var r=Te;for(Te|=4,oe=e.current;oe!==null;){var i=oe,a=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:Do(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,m=d.return;if(bN(d),d===u){oe=null;break}if(f!==null){f.return=m,oe=f;break}oe=m}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}oe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,oe=a;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Do(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,oe=w;break e}oe=i.return}}var b=e.current;for(oe=b;oe!==null;){a=oe;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,oe=x;else e:for(a=b;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pd(9,l)}}catch(S){st(l,l.return,S)}if(l===a){oe=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,oe=N;break e}oe=l.return}}if(Te=r,Tr(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(jd,e)}catch{}s=!0}return s}finally{$e=n,Dn.transition=t}}return!1}function S0(e,t,n){t=oa(n,t),t=cN(e,t,1),e=dr(e,t,1),t=Ut(),e!==null&&(Pl(e,1,t),Jt(e,t))}function st(e,t,n){if(e.tag===3)S0(e,e,n);else for(;t!==null;){if(t.tag===3){S0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(hr===null||!hr.has(s))){e=oa(n,e),e=uN(t,e,1),t=dr(t,e,1),e=Ut(),t!==null&&(Pl(t,1,e),Jt(t,e));break}}t=t.return}}function wP(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Ut(),e.pingedLanes|=e.suspendedLanes&n,bt===e&&(kt&n)===n&&(xt===4||xt===3&&(kt&130023424)===kt&&500>rt()-Ag?ti(e,0):_g|=n),Jt(e,t)}function PN(e,t){t===0&&(e.mode&1?(t=ec,ec<<=1,!(ec&130023424)&&(ec=4194304)):t=1);var n=Ut();e=_s(e,t),e!==null&&(Pl(e,t,n),Jt(e,n))}function jP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),PN(e,n)}function NP(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Q(314))}s!==null&&s.delete(t),PN(e,n)}var _N;_N=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Kt.current)Qt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qt=!1,uP(e,t,n);Qt=!!(e.flags&131072)}else Qt=!1,Ge&&t.flags&1048576&&Ij(t,Cu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xc(e,t),e=t.pendingProps;var r=sa(t,Ot.current);Ji(t,n),r=Cg(null,t,s,e,r,n);var i=kg();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(s)?(i=!0,Nu(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bg(t),r.updater=Td,t.stateNode=r,r._reactInternals=t,Im(t,s,e,n),t=Fm(null,t,s,!0,i,n)):(t.tag=0,Ge&&i&&fg(t),zt(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Xc(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=CP(s),e=Fn(s,e),r){case 0:t=Lm(null,t,s,e,n);break e;case 1:t=m0(null,t,s,e,n);break e;case 11:t=h0(null,t,s,e,n);break e;case 14:t=f0(null,t,s,Fn(s.type,e),n);break e}throw Error(Q(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Fn(s,r),Lm(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Fn(s,r),m0(e,t,s,r,n);case 3:e:{if(mN(t),e===null)throw Error(Q(387));s=t.pendingProps,i=t.memoizedState,r=i.element,zj(e,t),Du(t,s,null,n);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=oa(Error(Q(423)),t),t=p0(e,t,s,n,r);break e}else if(s!==r){r=oa(Error(Q(424)),t),t=p0(e,t,s,n,r);break e}else for(an=ur(t.stateNode.containerInfo.firstChild),ln=t,Ge=!0,Bn=null,n=$j(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ra(),s===r){t=As(e,t,n);break e}zt(e,t,s,n)}t=t.child}return t;case 5:return Vj(t),e===null&&Am(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,Em(s,r)?a=null:i!==null&&Em(s,i)&&(t.flags|=32),fN(e,t),zt(e,t,a,n),t.child;case 6:return e===null&&Am(t),null;case 13:return pN(e,t,n);case 4:return wg(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ia(t,null,s,n):zt(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Fn(s,r),h0(e,t,s,r,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,Be(ku,s._currentValue),s._currentValue=a,i!==null)if(Gn(i.value,a)){if(i.children===r.children&&!Kt.current){t=As(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ss(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Mm(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Q(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Mm(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}zt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Ji(t,n),r=Pn(r),s=s(r),t.flags|=1,zt(e,t,s,n),t.child;case 14:return s=t.type,r=Fn(s,t.pendingProps),r=Fn(s.type,r),f0(e,t,s,r,n);case 15:return dN(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:Fn(s,r),Xc(e,t),t.tag=1,Xt(s)?(e=!0,Nu(t)):e=!1,Ji(t,n),lN(t,s,r),Im(t,s,r,n),Fm(null,t,s,!0,e,n);case 19:return gN(e,t,n);case 22:return hN(e,t,n)}throw Error(Q(156,t.tag))};function AN(e,t){return ij(e,t)}function SP(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,n,s){return new SP(e,t,n,s)}function Og(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CP(e){if(typeof e=="function")return Og(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tg)return 11;if(e===ng)return 14}return 2}function mr(e,t){var n=e.alternate;return n===null?(n=Sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eu(e,t,n,s,r,i){var a=2;if(s=e,typeof e=="function")Og(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Mi:return ni(n.children,r,i,t);case eg:a=8,r|=8;break;case im:return e=Sn(12,n,t,r|2),e.elementType=im,e.lanes=i,e;case am:return e=Sn(13,n,t,r),e.elementType=am,e.lanes=i,e;case om:return e=Sn(19,n,t,r),e.elementType=om,e.lanes=i,e;case V1:return Ad(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B1:a=10;break e;case z1:a=9;break e;case tg:a=11;break e;case ng:a=14;break e;case qs:a=16,s=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Sn(a,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function ni(e,t,n,s){return e=Sn(7,e,s,t),e.lanes=n,e}function Ad(e,t,n,s){return e=Sn(22,e,s,t),e.elementType=V1,e.lanes=n,e.stateNode={isHidden:!1},e}function Vh(e,t,n){return e=Sn(6,e,null,t),e.lanes=n,e}function Uh(e,t,n){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kP(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lg(e,t,n,s,r,i,a,l,c){return e=new kP(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Sn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bg(i),e}function EP(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ai,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function MN(e){if(!e)return jr;e=e._reactInternals;e:{if(xi(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(Xt(n))return Mj(e,n,t)}return t}function RN(e,t,n,s,r,i,a,l,c){return e=Lg(n,s,!0,e,r,i,a,l,c),e.context=MN(null),n=e.current,s=Ut(),r=fr(n),i=Ss(s,r),i.callback=t??null,dr(n,i,r),e.current.lanes=r,Pl(e,r,s),Jt(e,s),e}function Md(e,t,n,s){var r=t.current,i=Ut(),a=fr(r);return n=MN(n),t.context===null?t.context=n:t.pendingContext=n,t=Ss(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=dr(r,t,a),e!==null&&(Hn(e,r,a,i),Yc(e,r,a)),a}function Ou(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function C0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fg(e,t){C0(e,t),(e=e.alternate)&&C0(e,t)}function DP(){return null}var IN=typeof reportError=="function"?reportError:function(e){console.error(e)};function $g(e){this._internalRoot=e}Rd.prototype.render=$g.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Md(e,t,null,null)};Rd.prototype.unmount=$g.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hi(function(){Md(null,e,null,null)}),t[Ps]=null}};function Rd(e){this._internalRoot=e}Rd.prototype.unstable_scheduleHydration=function(e){if(e){var t=hj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qs.length&&t!==0&&t<Qs[n].priority;n++);Qs.splice(n,0,e),n===0&&mj(e)}};function Bg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function k0(){}function TP(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Ou(a);i.call(u)}}var a=RN(t,s,e,0,null,!1,!1,"",k0);return e._reactRootContainer=a,e[Ps]=a.current,Qo(e.nodeType===8?e.parentNode:e),hi(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=Ou(c);l.call(u)}}var c=Lg(e,0,!1,null,null,!1,!1,"",k0);return e._reactRootContainer=c,e[Ps]=c.current,Qo(e.nodeType===8?e.parentNode:e),hi(function(){Md(t,c,n,s)}),c}function Od(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=Ou(a);l.call(c)}}Md(t,a,e,r)}else a=TP(n,t,e,r,s);return Ou(a)}uj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=fo(t.pendingLanes);n!==0&&(ig(t,n|1),Jt(t,rt()),!(Te&6)&&(la=rt()+500,Tr()))}break;case 13:hi(function(){var s=_s(e,1);if(s!==null){var r=Ut();Hn(s,e,1,r)}}),Fg(e,1)}};ag=function(e){if(e.tag===13){var t=_s(e,134217728);if(t!==null){var n=Ut();Hn(t,e,134217728,n)}Fg(e,134217728)}};dj=function(e){if(e.tag===13){var t=fr(e),n=_s(e,t);if(n!==null){var s=Ut();Hn(n,e,t,s)}Fg(e,t)}};hj=function(){return $e};fj=function(e,t){var n=$e;try{return $e=e,t()}finally{$e=n}};xm=function(e,t,n){switch(t){case"input":if(um(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=kd(s);if(!r)throw Error(Q(90));W1(s),um(s,r)}}}break;case"textarea":q1(e,n);break;case"select":t=n.value,t!=null&&Yi(e,!!n.multiple,t,!1)}};Z1=Mg;ej=hi;var PP={usingClientEntryPoint:!1,Events:[Al,Li,kd,X1,J1,Mg]},Wa={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_P={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sj(e),e===null?null:e.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||DP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{jd=dc.inject(_P),ss=dc}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;pn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bg(t))throw Error(Q(200));return EP(e,t,null,n)};pn.createRoot=function(e,t){if(!Bg(e))throw Error(Q(299));var n=!1,s="",r=IN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Lg(e,1,!1,null,null,n,!1,s,r),e[Ps]=t.current,Qo(e.nodeType===8?e.parentNode:e),new $g(t)};pn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=sj(t),e=e===null?null:e.stateNode,e};pn.flushSync=function(e){return hi(e)};pn.hydrate=function(e,t,n){if(!Id(t))throw Error(Q(200));return Od(null,e,t,!0,n)};pn.hydrateRoot=function(e,t,n){if(!Bg(e))throw Error(Q(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=IN;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=RN(t,null,e,1,n??null,r,!1,i,a),e[Ps]=t.current,Qo(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Rd(t)};pn.render=function(e,t,n){if(!Id(t))throw Error(Q(200));return Od(null,e,t,!1,n)};pn.unmountComponentAtNode=function(e){if(!Id(e))throw Error(Q(40));return e._reactRootContainer?(hi(function(){Od(null,null,e,!1,function(){e._reactRootContainer=null,e[Ps]=null})}),!0):!1};pn.unstable_batchedUpdates=Mg;pn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Id(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Od(e,t,n,!1,s)};pn.version="18.3.1-next-f1338f8080-20240426";function ON(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ON)}catch(e){console.error(e)}}ON(),O1.exports=pn;var Rl=O1.exports;const AP=Hp(Rl);var LN,E0=Rl;LN=E0.createRoot,E0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},rl.apply(this,arguments)}var tr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tr||(tr={}));const D0="popstate";function MP(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:a,hash:l}=s.location;return Km("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Lu(r)}return IP(t,n,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function FN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function RP(){return Math.random().toString(36).substr(2,8)}function T0(e,t){return{usr:e.state,key:e.key,idx:t}}function Km(e,t,n,s){return n===void 0&&(n=null),rl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wa(t):t,{state:n,key:t&&t.key||s||RP()})}function Lu(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function wa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function IP(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=tr.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(rl({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=tr.Pop;let v=d(),w=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:w})}function f(v,w){l=tr.Push;let b=Km(g.location,v,w);u=d()+1;let x=T0(b,u),N=g.createHref(b);try{a.pushState(x,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(N)}i&&c&&c({action:l,location:g.location,delta:1})}function m(v,w){l=tr.Replace;let b=Km(g.location,v,w);u=d();let x=T0(b,u),N=g.createHref(b);a.replaceState(x,"",N),i&&c&&c({action:l,location:g.location,delta:0})}function p(v){let w=r.location.origin!=="null"?r.location.origin:r.location.href,b=typeof v=="string"?v:Lu(v);return b=b.replace(/ $/,"%20"),ot(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let g={get action(){return l},get location(){return e(r,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(D0,h),c=v,()=>{r.removeEventListener(D0,h),c=null}},createHref(v){return t(r,v)},createURL:p,encodeLocation(v){let w=p(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(v){return a.go(v)}};return g}var P0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(P0||(P0={}));function OP(e,t,n){return n===void 0&&(n="/"),LP(e,t,n)}function LP(e,t,n,s){let r=typeof t=="string"?wa(t):t,i=zg(r.pathname||"/",n);if(i==null)return null;let a=$N(e);FP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=KP(i);l=GP(a[c],u)}return l}function $N(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ot(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=pr([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),$N(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:HP(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of BN(i.path))r(i,a,c)}),t}function BN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=BN(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function FP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:qP(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const $P=/^:[\w-]+$/,BP=3,zP=2,VP=1,UP=10,WP=-2,_0=e=>e==="*";function HP(e,t){let n=e.split("/"),s=n.length;return n.some(_0)&&(s+=WP),t&&(s+=zP),n.filter(r=>!_0(r)).reduce((r,i)=>r+($P.test(i)?BP:i===""?VP:UP),s)}function qP(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function GP(e,t,n){let{routesMeta:s}=e,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=YP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:pr([i,h.pathname]),pathnameBase:e_(pr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=pr([i,h.pathnameBase]))}return a}function YP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=QP(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function QP(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),FN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function KP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return FN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function XP(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?wa(e):e;return{pathname:n?n.startsWith("/")?n:JP(n,t):t,search:t_(s),hash:n_(r)}}function JP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Wh(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ZP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Vg(e,t){let n=ZP(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Ug(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=wa(e):(r=rl({},e),ot(!r.pathname||!r.pathname.includes("?"),Wh("?","pathname","search",r)),ot(!r.pathname||!r.pathname.includes("#"),Wh("#","pathname","hash",r)),ot(!r.search||!r.search.includes("#"),Wh("#","search","hash",r)));let i=e===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=XP(r,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const pr=e=>e.join("/").replace(/\/\/+/g,"/"),e_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),t_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,n_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function s_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const zN=["post","put","patch","delete"];new Set(zN);const r_=["get",...zN];new Set(r_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},il.apply(this,arguments)}const Wg=y.createContext(null),i_=y.createContext(null),Pr=y.createContext(null),Ld=y.createContext(null),cs=y.createContext({outlet:null,matches:[],isDataRoute:!1}),VN=y.createContext(null);function a_(e,t){let{relative:n}=t===void 0?{}:t;ja()||ot(!1);let{basename:s,navigator:r}=y.useContext(Pr),{hash:i,pathname:a,search:l}=WN(e,{relative:n}),c=a;return s!=="/"&&(c=a==="/"?s:pr([s,a])),r.createHref({pathname:c,search:l,hash:i})}function ja(){return y.useContext(Ld)!=null}function Is(){return ja()||ot(!1),y.useContext(Ld).location}function UN(e){y.useContext(Pr).static||y.useLayoutEffect(e)}function en(){let{isDataRoute:e}=y.useContext(cs);return e?w_():o_()}function o_(){ja()||ot(!1);let e=y.useContext(Wg),{basename:t,future:n,navigator:s}=y.useContext(Pr),{matches:r}=y.useContext(cs),{pathname:i}=Is(),a=JSON.stringify(Vg(r,n.v7_relativeSplatPath)),l=y.useRef(!1);return UN(()=>{l.current=!0}),y.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=Ug(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:pr([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,a,i,e])}const l_=y.createContext(null);function c_(e){let t=y.useContext(cs).outlet;return t&&y.createElement(l_.Provider,{value:e},t)}function Hg(){let{matches:e}=y.useContext(cs),t=e[e.length-1];return t?t.params:{}}function WN(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=y.useContext(Pr),{matches:r}=y.useContext(cs),{pathname:i}=Is(),a=JSON.stringify(Vg(r,s.v7_relativeSplatPath));return y.useMemo(()=>Ug(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function u_(e,t){return d_(e,t)}function d_(e,t,n,s){ja()||ot(!1);let{navigator:r}=y.useContext(Pr),{matches:i}=y.useContext(cs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Is(),d;if(t){var h;let v=typeof t=="string"?wa(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||ot(!1),d=v}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=OP(e,{pathname:m}),g=g_(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:pr([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:pr([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,s);return t&&g?y.createElement(Ld.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:tr.Pop}},g):g}function h_(){let e=b_(),t=s_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:r},n):null,null)}const f_=y.createElement(h_,null);class m_ extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(cs.Provider,{value:this.props.routeContext},y.createElement(VN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function p_(e){let{routeContext:t,match:n,children:s}=e,r=y.useContext(Wg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(cs.Provider,{value:t},s)}function g_(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ot(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,p=!1,g=null,v=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||f_,c&&(u<0&&f===0?(j_("route-fallback"),p=!0,v=null):u===f&&(p=!0,v=h.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,f+1)),b=()=>{let x;return m?x=g:p?x=v:h.route.Component?x=y.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,y.createElement(p_,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(m_,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var HN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(HN||{}),qN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qN||{});function x_(e){let t=y.useContext(Wg);return t||ot(!1),t}function y_(e){let t=y.useContext(i_);return t||ot(!1),t}function v_(e){let t=y.useContext(cs);return t||ot(!1),t}function GN(e){let t=v_(),n=t.matches[t.matches.length-1];return n.route.id||ot(!1),n.route.id}function b_(){var e;let t=y.useContext(VN),n=y_(),s=GN();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function w_(){let{router:e}=x_(HN.UseNavigateStable),t=GN(qN.UseNavigateStable),n=y.useRef(!1);return UN(()=>{n.current=!0}),y.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,il({fromRouteId:t},i)))},[e,t])}const A0={};function j_(e,t,n){A0[e]||(A0[e]=!0)}function N_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zn(e){let{to:t,replace:n,state:s,relative:r}=e;ja()||ot(!1);let{future:i,static:a}=y.useContext(Pr),{matches:l}=y.useContext(cs),{pathname:c}=Is(),u=en(),d=Ug(t,Vg(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return y.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function YN(e){return c_(e.context)}function Ue(e){ot(!1)}function S_(e){let{basename:t="/",children:n=null,location:s,navigationType:r=tr.Pop,navigator:i,static:a=!1,future:l}=e;ja()&&ot(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:a,future:il({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=wa(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=s,g=y.useMemo(()=>{let v=zg(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:p},navigationType:r}},[c,d,h,f,m,p,r]);return g==null?null:y.createElement(Pr.Provider,{value:u},y.createElement(Ld.Provider,{children:n,value:g}))}function C_(e){let{children:t,location:n}=e;return u_(Xm(t),n)}new Promise(()=>{});function Xm(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(s,r)=>{if(!y.isValidElement(s))return;let i=[...t,r];if(s.type===y.Fragment){n.push.apply(n,Xm(s.props.children,i));return}s.type!==Ue&&ot(!1),!s.props.index||!s.props.children||ot(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Xm(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jm.apply(this,arguments)}function k_(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function E_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function D_(e,t){return e.button===0&&(!t||t==="_self")&&!E_(e)}function Zm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function T_(e,t){let n=Zm(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}const P_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],__="6";try{window.__reactRouterVersion=__}catch{}const A_="startTransition",M0=Kp[A_];function M_(e){let{basename:t,children:n,future:s,window:r}=e,i=y.useRef();i.current==null&&(i.current=MP({window:r,v5Compat:!0}));let a=i.current,[l,c]=y.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},d=y.useCallback(h=>{u&&M0?M0(()=>c(h)):c(h)},[c,u]);return y.useLayoutEffect(()=>a.listen(d),[a,d]),y.useEffect(()=>N_(s),[s]),y.createElement(S_,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const R_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ts=y.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=k_(t,P_),{basename:m}=y.useContext(Pr),p,g=!1;if(typeof u=="string"&&I_.test(u)&&(p=u,R_))try{let x=new URL(window.location.href),N=u.startsWith("//")?new URL(x.protocol+u):new URL(u),S=zg(N.pathname,m);N.origin===x.origin&&S!=null?u=S+N.search+N.hash:g=!0}catch{}let v=a_(u,{relative:r}),w=O_(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function b(x){s&&s(x),x.defaultPrevented||w(x)}return y.createElement("a",Jm({},f,{href:p||v,onClick:g||i?s:b,ref:n,target:c}))});var R0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(R0||(R0={}));var I0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(I0||(I0={}));function O_(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=en(),u=Is(),d=WN(e,{relative:a});return y.useCallback(h=>{if(D_(h,n)){h.preventDefault();let f=s!==void 0?s:Lu(u)===Lu(d);c(e,{replace:f,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,s,r,n,e,i,a,l])}function L_(e){let t=y.useRef(Zm(e)),n=y.useRef(!1),s=Is(),r=y.useMemo(()=>T_(s.search,n.current?null:t.current),[s.search]),i=en(),a=y.useCallback((l,c)=>{const u=Zm(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,a]}class F_ extends y.Component{constructor(n){super(n);ce(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});ce(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?o.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:o.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),o.jsxs("div",{className:"flex flex-col space-y-3",children:[o.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),o.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function $_({children:e}){return o.jsx(F_,{children:e})}const B_={},O0=e=>{let t;const n=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(B_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},z_=e=>e?O0(e):O0;var QN={exports:{}},KN={},XN={exports:{}},JN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=y;function V_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var U_=typeof Object.is=="function"?Object.is:V_,W_=ca.useState,H_=ca.useEffect,q_=ca.useLayoutEffect,G_=ca.useDebugValue;function Y_(e,t){var n=t(),s=W_({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return q_(function(){r.value=n,r.getSnapshot=t,Hh(r)&&i({inst:r})},[e,n,t]),H_(function(){return Hh(r)&&i({inst:r}),e(function(){Hh(r)&&i({inst:r})})},[e]),G_(n),n}function Hh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!U_(e,n)}catch{return!0}}function Q_(e,t){return t()}var K_=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q_:Y_;JN.useSyncExternalStore=ca.useSyncExternalStore!==void 0?ca.useSyncExternalStore:K_;XN.exports=JN;var X_=XN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd=y,J_=X_;function Z_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eA=typeof Object.is=="function"?Object.is:Z_,tA=J_.useSyncExternalStore,nA=Fd.useRef,sA=Fd.useEffect,rA=Fd.useMemo,iA=Fd.useDebugValue;KN.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=nA(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=rA(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,eA(d,m))return p;var g=s(m);return r!==void 0&&r(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=tA(e,i[0],i[1]);return sA(function(){a.hasValue=!0,a.value=l},[l]),iA(l),l};QN.exports=KN;var aA=QN.exports;const oA=Hp(aA),ZN={},{useDebugValue:lA}=ne,{useSyncExternalStoreWithSelector:cA}=oA;let L0=!1;const uA=e=>e;function dA(e,t=uA,n){(ZN?"production":void 0)!=="production"&&n&&!L0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),L0=!0);const s=cA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return lA(s),s}const F0=e=>{(ZN?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?z_(e):e,n=(s,r)=>dA(t,s,r);return Object.assign(n,t),n},eS=e=>e?F0(e):F0;function hA(e){try{const t=e.split(".")[1];return JSON.parse(atob(t.replace(/-/g,"+").replace(/_/g,"/")))}catch{return{}}}const tS=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("jwt-token");return t&&(e.Authorization=`Bearer ${t}`),e},fA=async(e,t)=>{try{console.log("🔑 Starting sign in process for:",e);const n="http://103.224.243.242:3001/api",s=`${n}/auth/login`;console.log("Login URL:",s);const r=await fetch(s,{method:"POST",headers:tS(),body:JSON.stringify({email:e,password:t})});if(!r.ok){let c="Authentication failed";try{const u=await r.json();u&&u.message&&(c=u.message)}catch{}throw new Error(c)}let i;try{i=await r.json()}catch{throw new Error("Invalid response from server.")}const{token:a,user:l}=i;if(!l||!l.id||!l.email||!a)throw new Error("Invalid user data received from server");return(!l.role||!["admin","sales_agent","operations_manager","operator","support"].includes(l.role))&&(console.warn("⚠️ User role missing or invalid, assigning default role"),l.role="admin"),localStorage.setItem("jwt-token",a),console.log("✅ Authentication successful"),l}catch(n){throw console.error("Error signing in:",n),n}},mA=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:tS()}),localStorage.removeItem("jwt-token")}catch(e){console.error("Error signing out:",e),localStorage.removeItem("jwt-token")}},nS=async()=>{try{const e=localStorage.getItem("jwt-token");if(!e)return null;const t=hA(e);if(t.exp&&t.exp*1e3<Date.now())return localStorage.removeItem("jwt-token"),null;console.log("🔍 getCurrentUser: Decoding JWT token directly");const n={id:t.id,email:t.email,name:t.name,role:t.role};return console.log("✅ getCurrentUser: User from JWT:",JSON.stringify(n,null,2)),!n.id||!n.email||!n.role?(console.error("❌ getCurrentUser: Invalid user data in JWT"),localStorage.removeItem("jwt-token"),null):n}catch(e){return console.error("Error getting current user:",e),localStorage.removeItem("jwt-token"),null}},pA=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},gA=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")},qe=eS()(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const s=await fA(t,n);if(console.log("🔐 Login successful - User data received:",JSON.stringify(s,null,2)),console.log("🏷️ User role check:",s==null?void 0:s.role),!s||!s.role)throw console.error("❌ User object missing or role undefined:",s),new Error("Invalid user data - role missing");if(!["admin","sales_agent","operations_manager","operator","support"].includes(s.role))throw console.error("❌ Invalid user role:",s.role),new Error(`Invalid user role: ${s.role}`);console.log("✅ User role validation passed:",s.role);const r=localStorage.getItem("jwt-token")||"";e({user:s,token:r,isAuthenticated:!0,error:null}),pA(s,r),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(s){throw e({error:s.message}),s}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await mA(),e({user:null,token:null,isAuthenticated:!1,error:null}),gA(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const n=y.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>y.createElement("svg",{ref:d,...xA,width:r,height:r,stroke:s,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${yA(e)}`,l].join(" "),...u},[...t.map(([h,f])=>y.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=te("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=te("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=te("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=te("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=te("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=te("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=te("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=te("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=te("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=te("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=te("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=te("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=te("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=te("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function ZA(){var b,x;const[e,t]=y.useState(""),[n,s]=y.useState(""),[r,i]=y.useState(!1),[a,l]=y.useState(null),[c,u]=y.useState("loading"),{login:d,error:h,isAuthenticated:f,user:m}=qe();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),y.useEffect(()=>{console.log("LoginForm mounted");const N="http://103.224.243.242:3001/api";fetch(`${N}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(S=>(console.log("API health check response:",S.status),u(S.ok?"available":"error"),S.text())).then(S=>{console.log("API health check data:",S)}).catch(S=>{console.error("API health check failed:",S),u("error"),l(`API connection error: ${S.message}. Make sure the API server is running at ${N}`)}),console.log("Environment variables check:",{apiUrl:"http://103.224.243.242:3001/api",dbHost:"crm-db"})},[]);const p=en(),g=Is(),v=((x=(b=g.state)==null?void 0:b.from)==null?void 0:x.pathname)||"/dashboard";y.useEffect(()=>{console.log("🔍 LoginForm useEffect - Authentication check:",{isAuthenticated:f,user:m==null?void 0:m.name}),f&&m&&(console.log("✅ User is authenticated, navigating to:",v),p(v,{replace:!0}))},[f,m,p,v]),y.useEffect(()=>{g.pathname==="/login"&&localStorage.removeItem("jwt-token")},[g.pathname]);const w=async N=>{if(N.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log("🔑 Login attempt for:",e);try{const S="http://103.224.243.242:3001/api";try{const k=await fetch(`${S}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok)throw console.error("API health check failed before login attempt:",await k.text()),u("error"),new Error(`API server is not responding correctly. Status: ${k.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(k){throw console.error("Failed to connect to API:",k),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}console.log("🔐 Calling auth store login..."),await d(e,n),console.log("✅ Login attempt successful, auth state should be updated"),setTimeout(()=>{var j,C;const k=qe.getState();console.log("🔍 Current auth state after login:",{isAuthenticated:k.isAuthenticated,user:(j=k.user)==null?void 0:j.name,userRole:(C=k.user)==null?void 0:C.role,token:k.token?"Present":"Missing",fullUser:k.user}),k.isAuthenticated&&k.user?(console.log("🚀 Forcing navigation to dashboard..."),console.log("👤 User object before navigation:",JSON.stringify(k.user,null,2)),p("/dashboard",{replace:!0})):console.log("❌ Auth state not updated properly, user may need to refresh")},500)}catch(S){console.error("Login error:",S),S instanceof Error&&(S.message.includes("<!DOCTYPE")||S.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://103.224.243.242:3001/api.`):(S.message.includes("NetworkError")||S.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),s("")}finally{i(!1)}};if(a)return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),o.jsx("p",{className:"text-gray-700 mb-4",children:a}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",o.jsx("br",{}),"API URL: ","http://103.224.243.242:3001/api"]}),o.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[o.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Make sure the API server is running"}),o.jsx("li",{children:"Check your .env file configuration"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsx("li",{children:"Check browser console for network errors"})]})]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsx("div",{children:o.jsx("input",{id:"email",name:"email",type:"email",value:e,onChange:N=>t(N.target.value),required:!0,autoComplete:"email",placeholder:"Email address",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})}),o.jsx("div",{children:o.jsx("input",{id:"password",name:"password",type:"password",value:n,onChange:N=>s(N.target.value),required:!0,autoComplete:"current-password",placeholder:"Password",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})})]}),o.jsx("div",{className:"flex justify-end text-xs mt-1",children:o.jsxs("a",{href:"#",className:"text-blue-700 hover:underline",children:["Forget password ",o.jsx("span",{className:"font-bold",children:"Click here"})]})}),o.jsx("button",{type:"submit",disabled:r,className:"w-full h-12 bg-black text-white rounded-md text-lg font-semibold mt-2 transition-colors duration-150 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-50",children:r?"Logging in...":"Login Now"}),h&&o.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[o.jsx(yi,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:h})]})]})}catch(N){return console.error("Error rendering login form:",N),l(`Error rendering login form: ${N instanceof Error?N.message:String(N)}`),null}}function eM({error:e,resetError:t}){return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:o.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),o.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),o.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:o.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),o.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class tM extends y.Component{constructor(n){super(n);ce(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?o.jsx(eM,{error:this.state.error,resetError:this.resetError}):this.props.children}}function nM(){const{isAuthenticated:e}=qe();return e?o.jsx(zn,{to:"/dashboard"}):o.jsxs("div",{className:"h-screen overflow-hidden flex flex-col lg:flex-row bg-[#F2EEE7]",children:[o.jsxs("div",{className:"relative flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-[#385197] to-[#404040] text-white px-8 py-12 overflow-hidden",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M0 800 Q400 400 800 800",stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M0 600 Q400 200 800 600",stroke:"white",strokeWidth:"1.5"}),o.jsx("path",{d:"M0 400 Q400 0 800 400",stroke:"white",strokeWidth:"1"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-start max-w-lg w-full",children:[o.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight flex items-center gap-2",children:[o.jsx("span",{className:"text-white drop-shadow-lg",children:"Hello,"}),o.jsx("span",{className:"text-[#FFCC3F] drop-shadow-[0_2px_8px_rgba(255,204,63,0.7)]",children:"ASP Cranes!"}),o.jsx("span",{className:"inline-block text-5xl ml-2 align-middle",children:"👋"})]}),o.jsx("p",{className:"text-xl md:text-2xl font-bold mb-8 text-white drop-shadow-lg tracking-wide",children:"The all-in-one platform to supercharge your heavy equipment rental business."}),o.jsxs("p",{className:"text-xs opacity-60 mt-12",children:["© ",new Date().getFullYear()," ASP Cranes. All rights reserved."]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center items-center bg-[#F2EEE7] px-6",children:o.jsxs("div",{className:"w-full max-w-md mx-auto relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/10 backdrop-blur-xl border border-[#CAC0B0]/60 shadow-2xl",style:{zIndex:1}}),o.jsxs("div",{className:"relative z-10 p-10 flex flex-col",children:[o.jsxs("h2",{className:"text-2xl font-bold text-[#404040] mb-2 flex items-center gap-2",children:["Welcome Back! ",o.jsx("span",{className:"text-[#FFCC3F]",children:"●"})]}),o.jsxs("p",{className:"text-[#385197] mb-6 text-sm",children:["Don't have an account? ",o.jsx("a",{href:"#",className:"text-[#FFCC3F] font-medium hover:underline",children:"Create a new account now"}),".",o.jsx("br",{}),"It's FREE! Takes less than a minute."]}),o.jsx(ZA,{})]}),o.jsxs("svg",{className:"absolute -top-8 -right-8 w-32 h-32 opacity-30",viewBox:"0 0 100 100",fill:"none",children:[o.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"#FFCC3F",strokeWidth:"2"}),o.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#385197",strokeWidth:"1"})]}),o.jsx("svg",{className:"absolute -bottom-8 -left-8 w-24 h-24 opacity-20",viewBox:"0 0 100 100",fill:"none",children:o.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"20",stroke:"#404040",strokeWidth:"2"})})]})})]})}function sM(){return y.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://103.224.243.242:3001/api")},[]),o.jsx(tM,{children:o.jsx(nM,{})})}const fS=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ud=y.createContext({}),Wd=y.createContext(null),Hd=typeof document<"u",Kg=Hd?y.useLayoutEffect:y.useEffect,mS=y.createContext({strict:!1}),Xg=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),rM="framerAppearId",pS="data-"+Xg(rM);function iM(e,t,n,s){const{visualElement:r}=y.useContext(Ud),i=y.useContext(mS),a=y.useContext(Wd),l=y.useContext(fS).reducedMotion,c=y.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;y.useInsertionEffect(()=>{u&&u.update(n,a)});const d=y.useRef(!!(n[pS]&&!window.HandoffComplete));return Kg(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Wi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function aM(e,t,n){return y.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Wi(n)&&(n.current=s))},[t])}function cl(e){return typeof e=="string"||Array.isArray(e)}function qd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Jg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zg=["initial",...Jg];function Gd(e){return qd(e.animate)||Zg.some(t=>cl(e[t]))}function gS(e){return!!(Gd(e)||e.variants)}function oM(e,t){if(Gd(e)){const{initial:n,animate:s}=e;return{initial:n===!1||cl(n)?n:void 0,animate:cl(s)?s:void 0}}return e.inherit!==!1?t:{}}function lM(e){const{initial:t,animate:n}=oM(e,y.useContext(Ud));return y.useMemo(()=>({initial:t,animate:n}),[V0(t),V0(n)])}function V0(e){return Array.isArray(e)?e.join(" "):e}const U0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ul={};for(const e in U0)ul[e]={isEnabled:t=>U0[e].some(n=>!!t[n])};function cM(e){for(const t in e)ul[t]={...ul[t],...e[t]}}const ex=y.createContext({}),xS=y.createContext({}),uM=Symbol.for("motionComponentSymbol");function dM({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){e&&cM(e);function i(l,c){let u;const d={...y.useContext(fS),...l,layoutId:hM(l)},{isStatic:h}=d,f=lM(l),m=s(l,h);if(!h&&Hd){f.visualElement=iM(r,m,d,t);const p=y.useContext(xS),g=y.useContext(mS).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,e,p))}return y.createElement(Ud.Provider,{value:f},u&&f.visualElement?y.createElement(u,{visualElement:f.visualElement,...d}):null,n(r,l,aM(m,f.visualElement,c),m,h,f.visualElement))}const a=y.forwardRef(i);return a[uM]=r,a}function hM({layoutId:e}){const t=y.useContext(ex).id;return t&&e!==void 0?t+"-"+e:e}function fM(e){function t(s,r={}){return dM(e(s,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const mM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function tx(e){return typeof e!="string"||e.includes("-")?!1:!!(mM.indexOf(e)>-1||/[A-Z]/.test(e))}const Fu={};function pM(e){Object.assign(Fu,e)}const Il=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wi=new Set(Il);function yS(e,{layout:t,layoutId:n}){return wi.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Fu[e]||e==="opacity")}const Zt=e=>!!(e&&e.getVelocity),gM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xM=Il.length;function yM(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,r){let i="";for(let a=0;a<xM;a++){const l=Il[a];if(e[l]!==void 0){const c=gM[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,s?"":i):n&&s&&(i="none"),i}const vS=e=>t=>typeof t=="string"&&t.startsWith(e),bS=vS("--"),np=vS("var(--"),vM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,bM=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Nr=(e,t,n)=>Math.min(Math.max(n,e),t),ji={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},_o={...ji,transform:e=>Nr(0,1,e)},fc={...ji,default:1},Ao=e=>Math.round(e*1e5)/1e5,Yd=/(-)?([\d]*\.?[\d])+/g,wS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,wM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ol(e){return typeof e=="string"}const Ll=e=>({test:t=>Ol(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Hs=Ll("deg"),is=Ll("%"),ye=Ll("px"),jM=Ll("vh"),NM=Ll("vw"),W0={...is,parse:e=>is.parse(e)/100,transform:e=>is.transform(e*100)},H0={...ji,transform:Math.round},jS={borderWidth:ye,borderTopWidth:ye,borderRightWidth:ye,borderBottomWidth:ye,borderLeftWidth:ye,borderRadius:ye,radius:ye,borderTopLeftRadius:ye,borderTopRightRadius:ye,borderBottomRightRadius:ye,borderBottomLeftRadius:ye,width:ye,maxWidth:ye,height:ye,maxHeight:ye,size:ye,top:ye,right:ye,bottom:ye,left:ye,padding:ye,paddingTop:ye,paddingRight:ye,paddingBottom:ye,paddingLeft:ye,margin:ye,marginTop:ye,marginRight:ye,marginBottom:ye,marginLeft:ye,rotate:Hs,rotateX:Hs,rotateY:Hs,rotateZ:Hs,scale:fc,scaleX:fc,scaleY:fc,scaleZ:fc,skew:Hs,skewX:Hs,skewY:Hs,distance:ye,translateX:ye,translateY:ye,translateZ:ye,x:ye,y:ye,z:ye,perspective:ye,transformPerspective:ye,opacity:_o,originX:W0,originY:W0,originZ:ye,zIndex:H0,fillOpacity:_o,strokeOpacity:_o,numOctaves:H0};function nx(e,t,n,s){const{style:r,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(bS(h)){i[h]=f;continue}const m=jS[h],p=bM(f,m);if(wi.has(h)){if(c=!0,a[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):r[h]=p}if(t.transform||(c||s?r.transform=yM(e.transform,n,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;r.transformOrigin=`${h} ${f} ${m}`}}const sx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function NS(e,t,n){for(const s in t)!Zt(t[s])&&!yS(s,n)&&(e[s]=t[s])}function SM({transformTemplate:e},t,n){return y.useMemo(()=>{const s=sx();return nx(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function CM(e,t,n){const s=e.style||{},r={};return NS(r,s,e),Object.assign(r,SM(e,t,n)),e.transformValues?e.transformValues(r):r}function kM(e,t,n){const s={},r=CM(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const EM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $u(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||EM.has(e)}let SS=e=>!$u(e);function DM(e){e&&(SS=t=>t.startsWith("on")?!$u(t):e(t))}try{DM(require("@emotion/is-prop-valid").default)}catch{}function TM(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(SS(r)||n===!0&&$u(r)||!t&&!$u(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function q0(e,t,n){return typeof e=="string"?e:ye.transform(t+n*e)}function PM(e,t,n){const s=q0(t,e.x,e.width),r=q0(n,e.y,e.height);return`${s} ${r}`}const _M={offset:"stroke-dashoffset",array:"stroke-dasharray"},AM={offset:"strokeDashoffset",array:"strokeDasharray"};function MM(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?_M:AM;e[i.offset]=ye.transform(-s);const a=ye.transform(t),l=ye.transform(n);e[i.array]=`${a} ${l}`}function rx(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(nx(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:g}=e;m.transform&&(g&&(p.transform=m.transform),delete m.transform),g&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=PM(g,r!==void 0?r:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),a!==void 0&&MM(m,a,l,c,!1)}const CS=()=>({...sx(),attrs:{}}),ix=e=>typeof e=="string"&&e.toLowerCase()==="svg";function RM(e,t,n,s){const r=y.useMemo(()=>{const i=CS();return rx(i,t,{enableHardwareAcceleration:!1},ix(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};NS(i,e.style,e),r.style={...i,...r.style}}return r}function IM(e=!1){return(n,s,r,{latestValues:i},a)=>{const c=(tx(n)?RM:kM)(s,i,a,n),d={...TM(s,typeof n=="string",e),...c,ref:r},{children:h}=s,f=y.useMemo(()=>Zt(h)?h.get():h,[h]);return y.createElement(n,{...d,children:f})}}function kS(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const ES=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function DS(e,t,n,s){kS(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(ES.has(r)?r:Xg(r),t.attrs[r])}function ax(e,t){const{style:n}=e,s={};for(const r in n)(Zt(n[r])||t.style&&Zt(t.style[r])||yS(r,e))&&(s[r]=n[r]);return s}function TS(e,t){const n=ax(e,t);for(const s in e)if(Zt(e[s])||Zt(t[s])){const r=Il.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=e[s]}return n}function ox(e,t,n,s={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),t}function PS(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bu=e=>Array.isArray(e),OM=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),LM=e=>Bu(e)?e[e.length-1]||0:e;function tu(e){const t=Zt(e)?e.get():e;return OM(t)?t.toValue():t}function FM({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,r,i){const a={latestValues:$M(s,r,i,e),renderState:t()};return n&&(a.mount=l=>n(s,l,a)),a}const _S=e=>(t,n)=>{const s=y.useContext(Ud),r=y.useContext(Wd),i=()=>FM(e,t,s,r);return n?i():PS(i)};function $M(e,t,n,s){const r={},i=s(e,{});for(const f in i)r[f]=tu(i[f]);let{initial:a,animate:l}=e;const c=Gd(e),u=gS(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!qd(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=ox(e,m);if(!p)return;const{transitionEnd:g,transition:v,...w}=p;for(const b in w){let x=w[b];if(Array.isArray(x)){const N=d?x.length-1:0;x=x[N]}x!==null&&(r[b]=x)}for(const b in g)r[b]=g[b]}),r}const it=e=>e;class G0{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function BM(e){let t=new G0,n=new G0,s=0,r=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?t:n;return u&&a.add(c),f.add(c)&&h&&r&&(s=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}r=!1,i&&(i=!1,l.process(c))}};return l}const mc=["prepare","read","update","preRender","render","postRender"],zM=40;function VM(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=mc.reduce((h,f)=>(h[f]=BM(()=>n=!0),h),{}),a=h=>i[h].process(r),l=()=>{const h=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,zM),1),r.timestamp=h,r.isProcessing=!0,mc.forEach(a),r.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,r.isProcessing||e(l)};return{schedule:mc.reduce((h,f)=>{const m=i[f];return h[f]=(p,g=!1,v=!1)=>(n||c(),m.schedule(p,g,v)),h},{}),cancel:h=>mc.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:ze,cancel:Ms,state:Pt,steps:Yh}=VM(typeof requestAnimationFrame<"u"?requestAnimationFrame:it,!0),UM={useVisualState:_S({scrapeMotionValuesFromProps:TS,createRenderState:CS,onMount:(e,t,{renderState:n,latestValues:s})=>{ze.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ze.render(()=>{rx(n,s,{enableHardwareAcceleration:!1},ix(t.tagName),e.transformTemplate),DS(t,n)})}})},WM={useVisualState:_S({scrapeMotionValuesFromProps:ax,createRenderState:sx})};function HM(e,{forwardMotionProps:t=!1},n,s){return{...tx(e)?UM:WM,preloadedFeatures:n,useRender:IM(t),createVisualElement:s,Component:e}}function ws(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const AS=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Qd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const qM=e=>t=>AS(t)&&e(t,Qd(t));function Cs(e,t,n,s){return ws(e,t,qM(n),s)}const GM=(e,t)=>n=>t(e(n)),xr=(...e)=>e.reduce(GM);function MS(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Y0=MS("dragHorizontal"),Q0=MS("dragVertical");function RS(e){let t=!1;if(e==="y")t=Q0();else if(e==="x")t=Y0();else{const n=Y0(),s=Q0();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function IS(){const e=RS(!0);return e?(e(),!1):!0}class _r{constructor(t){this.isMounted=!1,this.node=t}update(){}}function K0(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),r=(i,a)=>{if(i.pointerType==="touch"||IS())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&ze.update(()=>l[s](i,a))};return Cs(e.current,n,r,{passive:!e.getProps()[s]})}class YM extends _r{mount(){this.unmount=xr(K0(this.node,!0),K0(this.node,!1))}unmount(){}}class QM extends _r{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xr(ws(this.node.current,"focus",()=>this.onFocus()),ws(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const OS=(e,t)=>t?e===t?!0:OS(e,t.parentElement):!1;function Qh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Qd(n))}class KM extends _r{constructor(){super(...arguments),this.removeStartListeners=it,this.removeEndListeners=it,this.removeAccessibleListeners=it,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=Cs(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ze.update(()=>{!h&&!OS(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),a=Cs(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=xr(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Qh("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&ze.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=ws(this.node.current,"keyup",a),Qh("down",(l,c)=>{this.startPress(l,c)})},n=ws(this.node.current,"keydown",t),s=()=>{this.isPressing&&Qh("cancel",(i,a)=>this.cancelPress(i,a))},r=ws(this.node.current,"blur",s);this.removeAccessibleListeners=xr(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&ze.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!IS()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&ze.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Cs(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=ws(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xr(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const sp=new WeakMap,Kh=new WeakMap,XM=e=>{const t=sp.get(e.target);t&&t(e)},JM=e=>{e.forEach(XM)};function ZM({root:e,...t}){const n=e||document;Kh.has(n)||Kh.set(n,{});const s=Kh.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(JM,{root:e,...t})),s[r]}function eR(e,t,n){const s=ZM(t);return sp.set(e,n),s.observe(e),()=>{sp.delete(e),s.unobserve(e)}}const tR={some:0,all:1};class nR extends _r{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:tR[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return eR(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(sR(t,n))&&this.startObserver()}unmount(){}}function sR({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const rR={inView:{Feature:nR},tap:{Feature:KM},focus:{Feature:QM},hover:{Feature:YM}};function LS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function iR(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function aR(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function Kd(e,t,n){const s=e.getProps();return ox(s,t,n!==void 0?n:s.custom,iR(e),aR(e))}let lx=it;const si=e=>e*1e3,ks=e=>e/1e3,oR={current:!1},FS=e=>Array.isArray(e)&&typeof e[0]=="number";function $S(e){return!!(!e||typeof e=="string"&&BS[e]||FS(e)||Array.isArray(e)&&e.every($S))}const po=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,BS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:po([0,.65,.55,1]),circOut:po([.55,0,1,.45]),backIn:po([.31,.01,.66,-.59]),backOut:po([.33,1.53,.69,.99])};function zS(e){if(e)return FS(e)?po(e):Array.isArray(e)?e.map(zS):BS[e]}function lR(e,t,n,{delay:s=0,duration:r,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=zS(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function cR(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const VS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,uR=1e-7,dR=12;function hR(e,t,n,s,r){let i,a,l=0;do a=t+(n-t)/2,i=VS(a,s,r)-e,i>0?n=a:t=a;while(Math.abs(i)>uR&&++l<dR);return a}function Fl(e,t,n,s){if(e===t&&n===s)return it;const r=i=>hR(i,0,1,e,n);return i=>i===0||i===1?i:VS(r(i),t,s)}const fR=Fl(.42,0,1,1),mR=Fl(0,0,.58,1),US=Fl(.42,0,.58,1),pR=e=>Array.isArray(e)&&typeof e[0]!="number",WS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,HS=e=>t=>1-e(1-t),cx=e=>1-Math.sin(Math.acos(e)),qS=HS(cx),gR=WS(cx),GS=Fl(.33,1.53,.69,.99),ux=HS(GS),xR=WS(ux),yR=e=>(e*=2)<1?.5*ux(e):.5*(2-Math.pow(2,-10*(e-1))),vR={linear:it,easeIn:fR,easeInOut:US,easeOut:mR,circIn:cx,circInOut:gR,circOut:qS,backIn:ux,backInOut:xR,backOut:GS,anticipate:yR},X0=e=>{if(Array.isArray(e)){lx(e.length===4);const[t,n,s,r]=e;return Fl(t,n,s,r)}else if(typeof e=="string")return vR[e];return e},dx=(e,t)=>n=>!!(Ol(n)&&wM.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),YS=(e,t,n)=>s=>{if(!Ol(s))return s;const[r,i,a,l]=s.match(Yd);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},bR=e=>Nr(0,255,e),Xh={...ji,transform:e=>Math.round(bR(e))},Jr={test:dx("rgb","red"),parse:YS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Xh.transform(e)+", "+Xh.transform(t)+", "+Xh.transform(n)+", "+Ao(_o.transform(s))+")"};function wR(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const rp={test:dx("#"),parse:wR,transform:Jr.transform},Hi={test:dx("hsl","hue"),parse:YS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+is.transform(Ao(t))+", "+is.transform(Ao(n))+", "+Ao(_o.transform(s))+")"},Bt={test:e=>Jr.test(e)||rp.test(e)||Hi.test(e),parse:e=>Jr.test(e)?Jr.parse(e):Hi.test(e)?Hi.parse(e):rp.parse(e),transform:e=>Ol(e)?e:e.hasOwnProperty("red")?Jr.transform(e):Hi.transform(e)},Xe=(e,t,n)=>-n*e+n*t+e;function Jh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function jR({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,i=0,a=0;if(!t)r=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=Jh(c,l,e+1/3),i=Jh(c,l,e),a=Jh(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}const Zh=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},NR=[rp,Jr,Hi],SR=e=>NR.find(t=>t.test(e));function J0(e){const t=SR(e);let n=t.parse(e);return t===Hi&&(n=jR(n)),n}const QS=(e,t)=>{const n=J0(e),s=J0(t),r={...n};return i=>(r.red=Zh(n.red,s.red,i),r.green=Zh(n.green,s.green,i),r.blue=Zh(n.blue,s.blue,i),r.alpha=Xe(n.alpha,s.alpha,i),Jr.transform(r))};function CR(e){var t,n;return isNaN(e)&&Ol(e)&&(((t=e.match(Yd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(wS))===null||n===void 0?void 0:n.length)||0)>0}const KS={regex:vM,countKey:"Vars",token:"${v}",parse:it},XS={regex:wS,countKey:"Colors",token:"${c}",parse:Bt.parse},JS={regex:Yd,countKey:"Numbers",token:"${n}",parse:ji.parse};function ef(e,{regex:t,countKey:n,token:s,parse:r}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...i.map(r)))}function zu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ef(n,KS),ef(n,XS),ef(n,JS),n}function ZS(e){return zu(e).values}function eC(e){const{values:t,numColors:n,numVars:s,tokenised:r}=zu(e),i=t.length;return a=>{let l=r;for(let c=0;c<i;c++)c<s?l=l.replace(KS.token,a[c]):c<s+n?l=l.replace(XS.token,Bt.transform(a[c])):l=l.replace(JS.token,Ao(a[c]));return l}}const kR=e=>typeof e=="number"?0:e;function ER(e){const t=ZS(e);return eC(e)(t.map(kR))}const Sr={test:CR,parse:ZS,createTransformer:eC,getAnimatableNone:ER},tC=(e,t)=>n=>`${n>0?t:e}`;function nC(e,t){return typeof e=="number"?n=>Xe(e,t,n):Bt.test(e)?QS(e,t):e.startsWith("var(")?tC(e,t):rC(e,t)}const sC=(e,t)=>{const n=[...e],s=n.length,r=e.map((i,a)=>nC(i,t[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}},DR=(e,t)=>{const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=nC(e[r],t[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}},rC=(e,t)=>{const n=Sr.createTransformer(t),s=zu(e),r=zu(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?xr(sC(s.values,r.values),n):tC(e,t)},dl=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Z0=(e,t)=>n=>Xe(e,t,n);function TR(e){return typeof e=="number"?Z0:typeof e=="string"?Bt.test(e)?QS:rC:Array.isArray(e)?sC:typeof e=="object"?DR:Z0}function PR(e,t,n){const s=[],r=n||TR(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=r(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||it:t;l=xr(c,l)}s.push(l)}return s}function iC(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(lx(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=PR(t,s,r),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=dl(e[d],e[d+1],u);return a[d](h)};return n?u=>c(Nr(e[0],e[i-1],u)):c}function _R(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=dl(0,t,s);e.push(Xe(n,1,r))}}function AR(e){const t=[0];return _R(t,e.length-1),t}function MR(e,t){return e.map(n=>n*t)}function RR(e,t){return e.map(()=>t||US).splice(0,e.length-1)}function Vu({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=pR(s)?s.map(X0):X0(s),i={done:!1,value:t[0]},a=MR(n&&n.length===t.length?n:AR(t),e),l=iC(a,t,{ease:Array.isArray(r)?r:RR(t,r)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function aC(e,t){return t?e*(1e3/t):0}const IR=5;function oC(e,t,n){const s=Math.max(t-IR,0);return aC(n-e(s),t-s)}const tf=.001,OR=.01,LR=10,FR=.05,$R=1;function BR({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let r,i,a=1-t;a=Nr(FR,$R,a),e=Nr(OR,LR,ks(e)),a<1?(r=u=>{const d=u*a,h=d*e,f=d-n,m=ip(u,a),p=Math.exp(-h);return tf-f/m*p},i=u=>{const h=u*a*e,f=h*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-h),g=ip(Math.pow(u,2),a);return(-r(u)+tf>0?-1:1)*((f-m)*p)/g}):(r=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-tf+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=VR(r,i,l);if(e=si(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:e}}}const zR=12;function VR(e,t,n){let s=n;for(let r=1;r<zR;r++)s=s-e(s)/t(s);return s}function ip(e,t){return e*Math.sqrt(1-t*t)}const UR=["duration","bounce"],WR=["stiffness","damping","mass"];function ev(e,t){return t.some(n=>e[n]!==void 0)}function HR(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ev(e,WR)&&ev(e,UR)){const n=BR(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function lC({keyframes:e,restDelta:t,restSpeed:n,...s}){const r=e[0],i=e[e.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=HR({...s,velocity:-ks(s.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-r,v=ks(Math.sqrt(l/u)),w=Math.abs(g)<5;n||(n=w?.01:2),t||(t=w?.005:.5);let b;if(p<1){const x=ip(v,p);b=N=>{const S=Math.exp(-p*v*N);return i-S*((m+p*v*g)/x*Math.sin(x*N)+g*Math.cos(x*N))}}else if(p===1)b=x=>i-Math.exp(-v*x)*(g+(m+v*g)*x);else{const x=v*Math.sqrt(p*p-1);b=N=>{const S=Math.exp(-p*v*N),k=Math.min(x*N,300);return i-S*((m+p*v*g)*Math.sinh(k)+x*g*Math.cosh(k))/x}}return{calculatedDuration:f&&d||null,next:x=>{const N=b(x);if(f)a.done=x>=d;else{let S=m;x!==0&&(p<1?S=oC(b,x,N):S=0);const k=Math.abs(S)<=n,j=Math.abs(i-N)<=t;a.done=k&&j}return a.value=a.done?i:N,a}}}function tv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=n*t;const v=h+g,w=a===void 0?v:a(v);w!==v&&(g=w-h);const b=C=>-g*Math.exp(-C/s),x=C=>w+b(C),N=C=>{const D=b(C),A=x(C);f.done=Math.abs(D)<=u,f.value=f.done?w:A};let S,k;const j=C=>{m(f.value)&&(S=C,k=lC({keyframes:[f.value,p(f.value)],velocity:oC(x,C,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:C=>{let D=!1;return!k&&S===void 0&&(D=!0,N(C),j(C)),S!==void 0&&C>S?k.next(C-S):(!D&&N(C),f)}}}const qR=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ze.update(t,!0),stop:()=>Ms(t),now:()=>Pt.isProcessing?Pt.timestamp:performance.now()}},nv=2e4;function sv(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<nv;)t+=n,s=e.next(t);return t>=nv?1/0:t}const GR={decay:tv,inertia:tv,tween:Vu,keyframes:Vu,spring:lC};function Uu({autoplay:e=!0,delay:t=0,driver:n=qR,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,g,v;const w=()=>{v=new Promise(q=>{g=q})};w();let b;const x=GR[r]||Vu;let N;x!==Vu&&typeof s[0]!="number"&&(N=iC([0,100],s,{clamp:!1}),s=[0,100]);const S=x({...f,keyframes:s});let k;l==="mirror"&&(k=x({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let j="idle",C=null,D=null,A=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=sv(S));const{calculatedDuration:F}=S;let $=1/0,L=1/0;F!==null&&($=F+a,L=$*(i+1)-a);let P=0;const B=q=>{if(D===null)return;m>0&&(D=Math.min(D,q)),m<0&&(D=Math.min(q-L/m,D)),C!==null?P=C:P=Math.round(q-D)*m;const Z=P-t*(m>=0?1:-1),ae=m>=0?Z<0:Z>L;P=Math.max(Z,0),j==="finished"&&C===null&&(P=L);let le=P,ge=S;if(i){const Y=Math.min(P,L)/$;let ie=Math.floor(Y),M=Y%1;!M&&Y>=1&&(M=1),M===1&&ie--,ie=Math.min(ie,i+1),!!(ie%2)&&(l==="reverse"?(M=1-M,a&&(M-=a/$)):l==="mirror"&&(ge=k)),le=Nr(0,1,M)*$}const we=ae?{done:!1,value:s[0]}:ge.next(le);N&&(we.value=N(we.value));let{done:I}=we;!ae&&F!==null&&(I=m>=0?P>=L:P<=0);const G=C===null&&(j==="finished"||j==="running"&&I);return h&&h(we.value),G&&T(),we},W=()=>{b&&b.stop(),b=void 0},O=()=>{j="idle",W(),g(),w(),D=A=null},T=()=>{j="finished",d&&d(),W(),g()},_=()=>{if(p)return;b||(b=n(B));const q=b.now();c&&c(),C!==null?D=q-C:(!D||j==="finished")&&(D=q),j==="finished"&&w(),A=D,C=null,j="running",b.start()};e&&_();const U={then(q,Z){return v.then(q,Z)},get time(){return ks(P)},set time(q){q=si(q),P=q,C!==null||!b||m===0?C=q:D=b.now()-q/m},get duration(){const q=S.calculatedDuration===null?sv(S):S.calculatedDuration;return ks(q)},get speed(){return m},set speed(q){q===m||!b||(m=q,U.time=ks(P))},get state(){return j},play:_,pause:()=>{j="paused",C=P},stop:()=>{p=!0,j!=="idle"&&(j="idle",u&&u(),O())},cancel:()=>{A!==null&&B(A),O()},complete:()=>{j="finished"},sample:q=>(D=0,B(q))};return U}function YR(e){let t;return()=>(t===void 0&&(t=e()),t)}const QR=YR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),KR=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pc=10,XR=2e4,JR=(e,t)=>t.type==="spring"||e==="backgroundColor"||!$S(t.ease);function ZR(e,t,{onUpdate:n,onComplete:s,...r}){if(!(QR()&&KR.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(x=>{l=x})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=r;if(JR(t,r)){const x=Uu({...r,repeat:0,delay:0});let N={done:!1,value:h[0]};const S=[];let k=0;for(;!N.done&&k<XR;)N=x.sample(k),S.push(N.value),k+=pc;p=void 0,h=S,f=k-pc,m="linear"}const g=lR(e.owner.current,t,h,{...r,duration:f,ease:m,times:p}),v=()=>{u=!1,g.cancel()},w=()=>{u=!0,ze.update(v),l(),d()};return g.onfinish=()=>{u||(e.set(cR(h,r)),s&&s(),w())},{then(x,N){return c.then(x,N)},attachTimeline(x){return g.timeline=x,g.onfinish=null,it},get time(){return ks(g.currentTime||0)},set time(x){g.currentTime=si(x)},get speed(){return g.playbackRate},set speed(x){g.playbackRate=x},get duration(){return ks(f)},play:()=>{a||(g.play(),Ms(v))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:x}=g;if(x){const N=Uu({...r,autoplay:!1});e.setWithVelocity(N.sample(x-pc).value,N.sample(x).value,pc)}w()},complete:()=>{u||g.finish()},cancel:w}}function eI({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const r=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:it,pause:it,stop:it,then:i=>(i(),Promise.resolve()),cancel:it,complete:it});return t?Uu({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const tI={type:"spring",stiffness:500,damping:25,restSpeed:10},nI=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),sI={type:"keyframes",duration:.8},rI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iI=(e,{keyframes:t})=>t.length>2?sI:wi.has(e)?e.startsWith("scale")?nI(t[1]):tI:rI,ap=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sr.test(t)||t==="0")&&!t.startsWith("url(")),aI=new Set(["brightness","contrast","saturate","opacity"]);function oI(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(Yd)||[];if(!s)return e;const r=n.replace(s,"");let i=aI.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const lI=/([a-z-]*)\(.*?\)/g,op={...Sr,getAnimatableNone:e=>{const t=e.match(lI);return t?t.map(oI).join(" "):e}},cI={...jS,color:Bt,backgroundColor:Bt,outlineColor:Bt,fill:Bt,stroke:Bt,borderColor:Bt,borderTopColor:Bt,borderRightColor:Bt,borderBottomColor:Bt,borderLeftColor:Bt,filter:op,WebkitFilter:op},hx=e=>cI[e];function cC(e,t){let n=hx(e);return n!==op&&(n=Sr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const uC=e=>/^0[^.\s]+$/.test(e);function uI(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||uC(e)}function dI(e,t,n,s){const r=ap(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),uI(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=cC(t,l)}return i}function hI({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function fx(e,t){return e[t]||e.default||e}const fI={skipAnimations:!1},mx=(e,t,n,s={})=>r=>{const i=fx(s,e)||{},a=i.delay||s.delay||0;let{elapsed:l=0}=s;l=l-si(a);const c=dI(t,e,n,i),u=c[0],d=c[c.length-1],h=ap(e,u),f=ap(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(hI(i)||(m={...m,...iI(e,m)}),m.duration&&(m.duration=si(m.duration)),m.repeatDelay&&(m.repeatDelay=si(m.repeatDelay)),!h||!f||oR.current||i.type===!1||fI.skipAnimations)return eI(m);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=ZR(t,e,m);if(p)return p}return Uu(m)};function Wu(e){return!!(Zt(e)&&e.add)}const dC=e=>/^\-?\d*\.?\d+$/.test(e);function px(e,t){e.indexOf(t)===-1&&e.push(t)}function gx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class xx{constructor(){this.subscriptions=[]}add(t){return px(this.subscriptions,t),()=>gx(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mI=e=>!isNaN(parseFloat(e));class pI{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:a}=Pt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,ze.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ze.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=mI(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new xx);const s=this.events[t].add(n);return t==="change"?()=>{s(),ze.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?aC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ua(e,t){return new pI(e,t)}const hC=e=>t=>t.test(e),gI={test:e=>e==="auto",parse:e=>e},fC=[ji,ye,is,Hs,NM,jM,gI],Ha=e=>fC.find(hC(e)),xI=[...fC,Bt,Sr],yI=e=>xI.find(hC(e));function vI(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ua(n))}function bI(e,t){const n=Kd(e,t);let{transitionEnd:s={},transition:r={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...s};for(const a in i){const l=LM(i[a]);vI(e,a,l)}}function wI(e,t,n){var s,r;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(dC(d)||uC(d))?d=parseFloat(d):!yI(d)&&Sr.test(u)&&(d=cC(c,u)),e.addValue(c,ua(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function jI(e,t){return t?(t[e]||t.default||t).from:void 0}function NI(e,t,n){const s={};for(const r in e){const i=jI(r,t);if(i!==void 0)s[r]=i;else{const a=n.getValue(r);a&&(s[r]=a.get())}}return s}function SI({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function CI(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function mC(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(i=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&SI(d,h))continue;const p={delay:n,elapsed:0,...fx(i||{},h)};if(window.HandoffAppearAnimations){const w=e.getProps()[pS];if(w){const b=window.HandoffAppearAnimations(w,h,f,ze);b!==null&&(p.elapsed=b,p.isHandoff=!0)}}let g=!p.isHandoff&&!CI(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(mx(h,f,m,e.shouldReduceMotion&&wi.has(h)?{type:!1}:p));const v=f.animation;Wu(c)&&(c.add(h),v.then(()=>c.remove(h))),u.push(v)}return a&&Promise.all(u).then(()=>{a&&bI(e,a)}),u}function lp(e,t,n={}){const s=Kd(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(mC(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return kI(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function kI(e,t,n=0,s=0,r=1,i){const a=[],l=(e.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(EI).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(lp(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function EI(e,t){return e.sortNodePosition(t)}function DI(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(i=>lp(e,i,n));s=Promise.all(r)}else if(typeof t=="string")s=lp(e,t,n);else{const r=typeof t=="function"?Kd(e,t,n.custom):t;s=Promise.all(mC(e,r,n))}return s.then(()=>e.notify("AnimationComplete",t))}const TI=[...Jg].reverse(),PI=Jg.length;function _I(e){return t=>Promise.all(t.map(({animation:n,options:s})=>DI(e,n,s)))}function AI(e){let t=_I(e);const n=RI();let s=!0;const r=(c,u)=>{const d=Kd(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},g=1/0;for(let w=0;w<PI;w++){const b=TI[w],x=n[b],N=d[b]!==void 0?d[b]:h[b],S=cl(N),k=b===u?x.isActive:null;k===!1&&(g=w);let j=N===h[b]&&N!==d[b]&&S;if(j&&s&&e.manuallyAnimateOnMount&&(j=!1),x.protectedKeys={...p},!x.isActive&&k===null||!N&&!x.prevProp||qd(N)||typeof N=="boolean")continue;let D=MI(x.prevProp,N)||b===u&&x.isActive&&!j&&S||w>g&&S,A=!1;const F=Array.isArray(N)?N:[N];let $=F.reduce(r,{});k===!1&&($={});const{prevResolvedValues:L={}}=x,P={...L,...$},B=W=>{D=!0,m.has(W)&&(A=!0,m.delete(W)),x.needsAnimating[W]=!0};for(const W in P){const O=$[W],T=L[W];if(p.hasOwnProperty(W))continue;let _=!1;Bu(O)&&Bu(T)?_=!LS(O,T):_=O!==T,_?O!==void 0?B(W):m.add(W):O!==void 0&&m.has(W)?B(W):x.protectedKeys[W]=!0}x.prevProp=N,x.prevResolvedValues=$,x.isActive&&(p={...p,...$}),s&&e.blockInitialAnimation&&(D=!1),D&&(!j||A)&&f.push(...F.map(W=>({animation:W,options:{type:b,...c}})))}if(m.size){const w={};m.forEach(b=>{const x=e.getBaseTarget(b);x!==void 0&&(w[b]=x)}),f.push({animation:w})}let v=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(v=!1),s=!1,v?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function MI(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!LS(t,e):!1}function Mr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RI(){return{animate:Mr(!0),whileInView:Mr(),whileHover:Mr(),whileTap:Mr(),whileDrag:Mr(),whileFocus:Mr(),exit:Mr()}}class II extends _r{constructor(t){super(t),t.animationState||(t.animationState=AI(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),qd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let OI=0;class LI extends _r{constructor(){super(...arguments),this.id=OI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const FI={animation:{Feature:II},exit:{Feature:LI}},rv=(e,t)=>Math.abs(e-t);function $I(e,t){const n=rv(e.x,t.x),s=rv(e.y,t.y);return Math.sqrt(n**2+s**2)}class pC{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=sf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=$I(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=Pt;this.history.push({...p,timestamp:g});const{onStart:v,onMove:w}=this.handlers;f||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=nf(f,this.transformPagePoint),ze.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=sf(h.type==="pointercancel"?this.lastMoveEventInfo:nf(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,v),p&&p(h,v)},!AS(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=Qd(t),l=nf(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Pt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,sf(l,this.history)),this.removeListeners=xr(Cs(this.contextWindow,"pointermove",this.handlePointerMove),Cs(this.contextWindow,"pointerup",this.handlePointerUp),Cs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ms(this.updatePoint)}}function nf(e,t){return t?{point:t(e.point)}:e}function iv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sf({point:e},t){return{point:e,delta:iv(e,gC(t)),offset:iv(e,BI(t)),velocity:zI(t,.1)}}function BI(e){return e[0]}function gC(e){return e[e.length-1]}function zI(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=gC(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>si(t)));)n--;if(!s)return{x:0,y:0};const i=ks(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mn(e){return e.max-e.min}function cp(e,t=0,n=.01){return Math.abs(e-t)<=n}function av(e,t,n,s=.5){e.origin=s,e.originPoint=Xe(t.min,t.max,e.origin),e.scale=mn(n)/mn(t),(cp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Xe(n.min,n.max,e.origin)-e.originPoint,(cp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Mo(e,t,n,s){av(e.x,t.x,n.x,s?s.originX:void 0),av(e.y,t.y,n.y,s?s.originY:void 0)}function ov(e,t,n){e.min=n.min+t.min,e.max=e.min+mn(t)}function VI(e,t,n){ov(e.x,t.x,n.x),ov(e.y,t.y,n.y)}function lv(e,t,n){e.min=t.min-n.min,e.max=e.min+mn(t)}function Ro(e,t,n){lv(e.x,t.x,n.x),lv(e.y,t.y,n.y)}function UI(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Xe(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Xe(n,e,s.max):Math.min(e,n)),e}function cv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function WI(e,{top:t,left:n,bottom:s,right:r}){return{x:cv(e.x,n,r),y:cv(e.y,t,s)}}function uv(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function HI(e,t){return{x:uv(e.x,t.x),y:uv(e.y,t.y)}}function qI(e,t){let n=.5;const s=mn(e),r=mn(t);return r>s?n=dl(t.min,t.max-s,e.min):s>r&&(n=dl(e.min,e.max-r,t.min)),Nr(0,1,n)}function GI(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const up=.35;function YI(e=up){return e===!1?e=0:e===!0&&(e=up),{x:dv(e,"left","right"),y:dv(e,"top","bottom")}}function dv(e,t,n){return{min:hv(e,t),max:hv(e,n)}}function hv(e,t){return typeof e=="number"?e:e[t]||0}const fv=()=>({translate:0,scale:1,origin:0,originPoint:0}),qi=()=>({x:fv(),y:fv()}),mv=()=>({min:0,max:0}),lt=()=>({x:mv(),y:mv()});function wn(e){return[e("x"),e("y")]}function xC({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function QI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KI(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function rf(e){return e===void 0||e===1}function dp({scale:e,scaleX:t,scaleY:n}){return!rf(e)||!rf(t)||!rf(n)}function zr(e){return dp(e)||yC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function yC(e){return pv(e.x)||pv(e.y)}function pv(e){return e&&e!=="0%"}function Hu(e,t,n){const s=e-n,r=t*s;return n+r}function gv(e,t,n,s,r){return r!==void 0&&(e=Hu(e,r,s)),Hu(e,n,s)+t}function hp(e,t=0,n=1,s,r){e.min=gv(e.min,t,n,s,r),e.max=gv(e.max,t,n,s,r)}function vC(e,{x:t,y:n}){hp(e.x,t.translate,t.scale,t.originPoint),hp(e.y,n.translate,n.scale,n.originPoint)}function XI(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let i,a;for(let l=0;l<r;l++){i=n[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Gi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,vC(e,a)),s&&zr(i.latestValues)&&Gi(e,i.latestValues))}t.x=xv(t.x),t.y=xv(t.y)}function xv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ys(e,t){e.min=e.min+t,e.max=e.max+t}function yv(e,t,[n,s,r]){const i=t[r]!==void 0?t[r]:.5,a=Xe(e.min,e.max,i);hp(e,t[n],t[s],a,t.scale)}const JI=["x","scaleX","originX"],ZI=["y","scaleY","originY"];function Gi(e,t){yv(e.x,t,JI),yv(e.y,t,ZI)}function bC(e,t){return xC(KI(e.getBoundingClientRect(),t))}function e4(e,t,n){const s=bC(e,n),{scroll:r}=t;return r&&(Ys(s.x,r.offset.x),Ys(s.y,r.offset.y)),s}const wC=({current:e})=>e?e.ownerDocument.defaultView:null,t4=new WeakMap;class n4{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lt(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qd(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=RS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wn(v=>{let w=this.getAxisMotionValue(v).get()||0;if(is.test(w)){const{projection:b}=this.visualElement;if(b&&b.layout){const x=b.layout.layoutBox[v];x&&(w=mn(x)*(parseFloat(w)/100))}}this.originPoint[v]=w}),p&&ze.update(()=>p(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:v}=h;if(m&&this.currentDirection===null){this.currentDirection=s4(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>wn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new pC(t,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:wC(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&ze.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!gc(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=UI(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Wi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=WI(r.layoutBox,n):this.constraints=!1,this.elastic=YI(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=GI(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Wi(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=e4(s,r.root,this.visualElement.getTransformPagePoint());let a=HI(r.layout.layoutBox,i);if(n){const l=n(QI(a));this.hasMutatedConstraints=!!l,l&&(a=xC(l))}return a}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=wn(d=>{if(!gc(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,p={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(mx(t,s,0,n))}stopAnimation(){wn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){wn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){wn(n=>{const{drag:s}=this.getProps();if(!gc(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n];i.set(t[n]-Xe(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Wi(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};wn(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();r[a]=qI({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),wn(a=>{if(!gc(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Xe(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;t4.set(this.visualElement,this);const t=this.visualElement.current,n=Cs(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Wi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const a=ws(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(wn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=up,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function gc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function s4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class r4 extends _r{constructor(t){super(t),this.removeGroupControls=it,this.removeListeners=it,this.controls=new n4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||it}unmount(){this.removeGroupControls(),this.removeListeners()}}const vv=e=>(t,n)=>{e&&ze.update(()=>e(t,n))};class i4 extends _r{constructor(){super(...arguments),this.removePointerDownListener=it}onPointerDown(t){this.session=new pC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:vv(t),onStart:vv(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&ze.update(()=>r(i,a))}}}mount(){this.removePointerDownListener=Cs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function a4(){const e=y.useContext(Wd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=y.useId();return y.useEffect(()=>s(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const nu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const qa={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ye.test(e))e=parseFloat(e);else return e;const n=bv(e,t.target.x),s=bv(e,t.target.y);return`${n}% ${s}%`}},o4={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=Sr.parse(e);if(r.length>5)return s;const i=Sr.createTransformer(e),a=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+a]/=l,r[1+a]/=c;const u=Xe(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class l4 extends ne.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=t;pM(c4),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),nu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ze.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function jC(e){const[t,n]=a4(),s=y.useContext(ex);return ne.createElement(l4,{...e,layoutGroup:s,switchLayoutGroup:y.useContext(xS),isPresent:t,safeToRemove:n})}const c4={borderRadius:{...qa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qa,borderTopRightRadius:qa,borderBottomLeftRadius:qa,borderBottomRightRadius:qa,boxShadow:o4},NC=["TopLeft","TopRight","BottomLeft","BottomRight"],u4=NC.length,wv=e=>typeof e=="string"?parseFloat(e):e,jv=e=>typeof e=="number"||ye.test(e);function d4(e,t,n,s,r,i){r?(e.opacity=Xe(0,n.opacity!==void 0?n.opacity:1,h4(s)),e.opacityExit=Xe(t.opacity!==void 0?t.opacity:1,0,f4(s))):i&&(e.opacity=Xe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let a=0;a<u4;a++){const l=`border${NC[a]}Radius`;let c=Nv(t,l),u=Nv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||jv(c)===jv(u)?(e[l]=Math.max(Xe(wv(c),wv(u),s),0),(is.test(u)||is.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Xe(t.rotate||0,n.rotate||0,s))}function Nv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const h4=SC(0,.5,qS),f4=SC(.5,.95,it);function SC(e,t,n){return s=>s<e?0:s>t?1:n(dl(e,t,s))}function Sv(e,t){e.min=t.min,e.max=t.max}function yn(e,t){Sv(e.x,t.x),Sv(e.y,t.y)}function Cv(e,t,n,s,r){return e-=t,e=Hu(e,1/n,s),r!==void 0&&(e=Hu(e,1/r,s)),e}function m4(e,t=0,n=1,s=.5,r,i=e,a=e){if(is.test(t)&&(t=parseFloat(t),t=Xe(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Xe(i.min,i.max,s);e===i&&(l-=t),e.min=Cv(e.min,t,n,l,r),e.max=Cv(e.max,t,n,l,r)}function kv(e,t,[n,s,r],i,a){m4(e,t[n],t[s],t[r],t.scale,i,a)}const p4=["x","scaleX","originX"],g4=["y","scaleY","originY"];function Ev(e,t,n,s){kv(e.x,t,p4,n?n.x:void 0,s?s.x:void 0),kv(e.y,t,g4,n?n.y:void 0,s?s.y:void 0)}function Dv(e){return e.translate===0&&e.scale===1}function CC(e){return Dv(e.x)&&Dv(e.y)}function x4(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function kC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Tv(e){return mn(e.x)/mn(e.y)}class y4{constructor(){this.members=[]}add(t){px(this.members,t),t.scheduleRender()}remove(t){if(gx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pv(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const v4=(e,t)=>e.depth-t.depth;class b4{constructor(){this.children=[],this.isDirty=!1}add(t){px(this.children,t),this.isDirty=!0}remove(t){gx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(v4),this.isDirty=!1,this.children.forEach(t)}}function w4(e,t){const n=performance.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(Ms(s),e(i-t))};return ze.read(s,!0),()=>Ms(s)}function j4(e){window.MotionDebug&&window.MotionDebug.record(e)}function N4(e){return e instanceof SVGElement&&e.tagName!=="svg"}function S4(e,t,n){const s=Zt(e)?e:ua(e);return s.start(mx("",s,t,n)),s.animation}const _v=["","X","Y","Z"],C4={visibility:"hidden"},Av=1e3;let k4=0;const Vr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function EC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},l=t==null?void 0:t()){this.id=k4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vr.totalNodes=Vr.resolvedTargetDeltas=Vr.recalculatedProjection=0,this.nodes.forEach(T4),this.nodes.forEach(R4),this.nodes.forEach(I4),this.nodes.forEach(P4),j4(Vr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new b4)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new xx),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=N4(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=w4(f,250),nu.hasAnimatedSinceResize&&(nu.hasAnimatedSinceResize=!1,this.nodes.forEach(Rv))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||B4,{onLayoutAnimationStart:v,onLayoutAnimationComplete:w}=d.getProps(),b=!this.targetLayout||!kC(this.targetLayout,p)||m,x=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,x);const N={...fx(g,"layout"),onPlay:v,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else f||Rv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ms(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Mv);return}this.isUpdating||this.nodes.forEach(A4),this.isUpdating=!1,this.nodes.forEach(M4),this.nodes.forEach(E4),this.nodes.forEach(D4),this.clearAllSnapshots();const l=performance.now();Pt.delta=Nr(0,1e3/60,l-Pt.timestamp),Pt.timestamp=l,Pt.isProcessing=!0,Yh.update.process(Pt),Yh.preRender.process(Pt),Yh.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(_4),this.sharedNodes.forEach(L4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!CC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||zr(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),z4(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return lt();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Ys(l.x,c.offset.x),Ys(l.y,c.offset.y)),l}removeElementScroll(a){const l=lt();yn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){yn(l,a);const{scroll:f}=this.root;f&&(Ys(l.x,-f.offset.x),Ys(l.y,-f.offset.y))}Ys(l.x,d.offset.x),Ys(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=lt();yn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Gi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zr(d.latestValues)&&Gi(c,d.latestValues)}return zr(this.latestValues)&&Gi(c,this.latestValues),c}removeTransform(a){const l=lt();yn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zr(u.latestValues))continue;dp(u.latestValues)&&u.updateSnapshot();const d=lt(),h=u.measurePageBox();yn(d,h),Ev(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zr(this.latestValues)&&Ev(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Pt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Ro(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=lt(),this.targetWithTransforms=lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yn(this.target,this.layout.layoutBox),vC(this.target,this.targetDelta)):yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lt(),this.relativeTargetOrigin=lt(),Ro(this.relativeTargetOrigin,this.target,m.target),yn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dp(this.parent.latestValues)||yC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;yn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;XI(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=qi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=qi(),this.projectionDeltaWithTransform=qi());const g=this.projectionTransform;Mo(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Pv(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Vr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=qi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=lt(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,v=this.getStack(),w=!v||v.members.length<=1,b=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some($4));this.animationProgress=0;let x;this.mixTargetDelta=N=>{const S=N/1e3;Iv(h.x,a.x,S),Iv(h.y,a.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ro(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F4(this.relativeTarget,this.relativeTargetOrigin,f,S),x&&x4(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=lt()),yn(x,this.relativeTarget)),g&&(this.animationValues=d,d4(d,u,this.latestValues,S,b,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ms(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ze.update(()=>{nu.hasAnimatedSinceResize=!0,this.currentAnimation=S4(0,Av,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Av),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&DC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||lt();const h=mn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=mn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}yn(l,c),Gi(l,d),Mo(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new y4),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<_v.length;d++){const h="rotate"+_v[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return C4;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=tu(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=tu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!zr(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Pv(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Fu){if(f[g]===void 0)continue;const{correct:v,applyTo:w}=Fu[g],b=u.transform==="none"?f[g]:v(f[g],h);if(w){const x=w.length;for(let N=0;N<x;N++)u[w[N]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=h===this?tu(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Mv),this.root.sharedNodes.clear()}}}function E4(e){e.updateLayout()}function D4(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?wn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=mn(f);f.min=s[h].min,f.max=f.min+m}):DC(i,n.layoutBox,s)&&wn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=mn(s[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=qi();Mo(l,s,n.layoutBox);const c=qi();a?Mo(c,e.applyTransform(r,!0),n.measuredBox):Mo(c,s,n.layoutBox);const u=!CC(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=lt();Ro(p,n.layoutBox,f.layoutBox);const g=lt();Ro(g,s,m.layoutBox),kC(p,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function T4(e){Vr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function P4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function _4(e){e.clearSnapshot()}function Mv(e){e.clearMeasurements()}function A4(e){e.isLayoutDirty=!1}function M4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Rv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function R4(e){e.resolveTargetDelta()}function I4(e){e.calcProjection()}function O4(e){e.resetRotation()}function L4(e){e.removeLeadSnapshot()}function Iv(e,t,n){e.translate=Xe(t.translate,0,n),e.scale=Xe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ov(e,t,n,s){e.min=Xe(t.min,n.min,s),e.max=Xe(t.max,n.max,s)}function F4(e,t,n,s){Ov(e.x,t.x,n.x,s),Ov(e.y,t.y,n.y,s)}function $4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const B4={duration:.45,ease:[.4,0,.1,1]},Lv=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Fv=Lv("applewebkit/")&&!Lv("chrome/")?Math.round:it;function $v(e){e.min=Fv(e.min),e.max=Fv(e.max)}function z4(e){$v(e.x),$v(e.y)}function DC(e,t,n){return e==="position"||e==="preserve-aspect"&&!cp(Tv(t),Tv(n),.2)}const V4=EC({attachResizeListener:(e,t)=>ws(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),af={current:void 0},TC=EC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!af.current){const e=new V4({});e.mount(window),e.setOptions({layoutScroll:!0}),af.current=e}return af.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),U4={pan:{Feature:i4},drag:{Feature:r4,ProjectionNode:TC,MeasureLayout:jC}},W4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function H4(e){const t=W4.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function fp(e,t,n=1){const[s,r]=H4(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const a=i.trim();return dC(a)?parseFloat(a):a}else return np(r)?fp(r,t,n+1):r}function q4(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const i=r.get();if(!np(i))return;const a=fp(i,s);a&&r.set(a)});for(const r in t){const i=t[r];if(!np(i))continue;const a=fp(i,s);a&&(t[r]=a,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:t,transitionEnd:n}}const G4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),PC=e=>G4.has(e),Y4=e=>Object.keys(e).some(PC),Bv=e=>e===ji||e===ye,zv=(e,t)=>parseFloat(e.split(", ")[t]),Vv=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return zv(r[1],t);{const i=s.match(/^matrix\((.+)\)$/);return i?zv(i[1],e):0}},Q4=new Set(["x","y","z"]),K4=Il.filter(e=>!Q4.has(e));function X4(e){const t=[];return K4.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const da={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Vv(4,13),y:Vv(5,14)};da.translateX=da.x;da.translateY=da.y;const J4=(e,t,n)=>{const s=t.measureViewportBox(),r=t.current,i=getComputedStyle(r),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=da[u](s,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=da[u](c,i)}),e},Z4=(e,t,n={},s={})=>{t={...t},s={...s};const r=Object.keys(t).filter(PC);let i=[],a=!1;const l=[];if(r.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Ha(d);const f=t[c];let m;if(Bu(f)){const p=f.length,g=f[0]===null?1:0;d=f[g],h=Ha(d);for(let v=g;v<p&&f[v]!==null;v++)m?lx(Ha(f[v])===m):m=Ha(f[v])}else m=Ha(f);if(h!==m)if(Bv(h)&&Bv(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===ye&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(a||(i=X4(e),a=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=J4(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Hd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function eO(e,t,n,s){return Y4(t)?Z4(e,t,n,s):{target:t,transitionEnd:s}}const tO=(e,t,n,s)=>{const r=q4(e,t,s);return t=r.target,s=r.transitionEnd,eO(e,t,n,s)},mp={current:null},_C={current:!1};function nO(){if(_C.current=!0,!!Hd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>mp.current=e.matches;e.addListener(t),t()}else mp.current=!1}function sO(e,t,n){const{willChange:s}=t;for(const r in t){const i=t[r],a=n[r];if(Zt(i))e.addValue(r,i),Wu(s)&&s.add(r);else if(Zt(a))e.addValue(r,ua(i,{owner:e})),Wu(s)&&s.remove(r);else if(a!==i)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(r);e.addValue(r,ua(l!==void 0?l:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Uv=new WeakMap,AC=Object.keys(ul),rO=AC.length,Wv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],iO=Zg.length;class aO{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ze.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Gd(n),this.isVariantNode=gS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&Zt(f)&&(f.set(l[h],!1),Wu(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Uv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),_C.current||nO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Uv.delete(this.current),this.projection&&this.projection.unmount(),Ms(this.notifyUpdate),Ms(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=wi.has(t),r=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ze.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,r,i){let a,l;for(let c=0;c<rO;c++){const u=AC[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=ul[u];f&&(a=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Wi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Wv.length;s++){const r=Wv[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=sO(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<iO;s++){const r=Zg[s],i=this.props[r];(cl(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=ua(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=ox(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Zt(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new xx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class MC extends aO{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:r},i){let a=NI(s,t||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),a&&(a=r(a))),i){wI(this,s,a);const l=tO(this,s,a,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function oO(e){return window.getComputedStyle(e)}class lO extends MC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(wi.has(n)){const s=hx(n);return s&&s.default||0}else{const s=oO(t),r=(bS(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return bC(t,n)}build(t,n,s,r){nx(t,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return ax(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,r){kS(t,n,s,r)}}class cO extends MC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(wi.has(n)){const s=hx(n);return s&&s.default||0}return n=ES.has(n)?n:Xg(n),t.getAttribute(n)}measureInstanceViewportBox(){return lt()}scrapeMotionValuesFromProps(t,n){return TS(t,n)}build(t,n,s,r){rx(t,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,s,r){DS(t,n,s,r)}mount(t){this.isSVGTag=ix(t.tagName),super.mount(t)}}const uO=(e,t)=>tx(e)?new cO(t,{enableHardwareAcceleration:!1}):new lO(t,{enableHardwareAcceleration:!0}),dO={layout:{ProjectionNode:TC,MeasureLayout:jC}},hO={...FI,...rR,...U4,...dO},Xs=fM((e,t)=>HM(e,t,hO,uO));function RC(){const e=y.useRef(!1);return Kg(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function fO(){const e=RC(),[t,n]=y.useState(0),s=y.useCallback(()=>{e.current&&n(t+1)},[t]);return[y.useCallback(()=>ze.postRender(s),[s]),t]}class mO extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pO({children:e,isPresent:t}){const n=y.useId(),s=y.useRef(null),r=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=r.current;if(t||!s.current||!i||!a)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),y.createElement(mO,{isPresent:t,childRef:s,sizeRef:r},y.cloneElement(e,{ref:s}))}const of=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const l=PS(gO),c=y.useId(),u=y.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return y.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),y.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),a==="popLayout"&&(e=y.createElement(pO,{isPresent:n},e)),y.createElement(Wd.Provider,{value:u},e)};function gO(){return new Map}function xO(e){return y.useEffect(()=>()=>e(),[])}const Ur=e=>e.key||"";function yO(e,t){e.forEach(n=>{const s=Ur(n);t.set(s,n)})}function vO(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const yx=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=y.useContext(ex).forceRender||fO()[0],c=RC(),u=vO(e);let d=u;const h=y.useRef(new Map).current,f=y.useRef(d),m=y.useRef(new Map).current,p=y.useRef(!0);if(Kg(()=>{p.current=!1,yO(u,m),f.current=d}),xO(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return y.createElement(y.Fragment,null,d.map(b=>y.createElement(of,{key:Ur(b),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},b)));d=[...d];const g=f.current.map(Ur),v=u.map(Ur),w=g.length;for(let b=0;b<w;b++){const x=g[b];v.indexOf(x)===-1&&!h.has(x)&&h.set(x,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((b,x)=>{if(v.indexOf(x)!==-1)return;const N=m.get(x);if(!N)return;const S=g.indexOf(x);let k=b;if(!k){const j=()=>{h.delete(x);const C=Array.from(m.keys()).filter(D=>!v.includes(D));if(C.forEach(D=>m.delete(D)),f.current=u.filter(D=>{const A=Ur(D);return A===x||C.includes(A)}),!h.size){if(c.current===!1)return;l(),s&&s()}};k=y.createElement(of,{key:Ur(N),isPresent:!1,onExitComplete:j,custom:t,presenceAffectsLayout:i,mode:a},N),h.set(x,k)}d.splice(S,0,k)}),d=d.map(b=>{const x=b.key;return h.has(x)?b:y.createElement(of,{key:Ur(b),isPresent:!0,presenceAffectsLayout:i,mode:a},b)}),y.createElement(y.Fragment,null,h.size?d:d.map(b=>y.cloneElement(b)))},bO="/assets/asp-logo-Cq2CSw-i.jpg",wO="/crane-icon.svg",jO=[{label:"Dashboard",icon:o.jsx(RA,{size:18}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:o.jsx(TA,{size:18}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:o.jsx(MA,{size:18}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:o.jsx(iS,{size:18}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:o.jsx($d,{size:18}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:o.jsx(os,{size:18}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:o.jsx(lS,{size:18}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:o.jsx(rS,{size:18}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:o.jsx(qn,{size:18}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:o.jsx(ol,{size:18}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:o.jsx(fn,{size:18}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:o.jsx(FA,{size:18}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Templates",icon:o.jsx(fn,{size:18}),href:"/admin/quotation-templates",roles:["admin","sales_agent"]}];function NO({isMobileOpen:e=!1,onMobileClose:t,isCollapsed:n,onCollapseToggle:s}){const{user:r}=qe(),i=Is(),[a,l]=y.useState(!1),c=n!==void 0,u=c?n:a;if(y.useEffect(()=>{const v=()=>{window.innerWidth<1024&&l(!0)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),!r)return null;const d=jO.filter(v=>v.roles.includes(r.role)),h=(v,w)=>w?i.pathname===v:v==="/dashboard"&&i.pathname==="/"?!0:i.pathname.startsWith(v),f=()=>{c&&s?s(!u):l(v=>!v)},m=o.jsx(yx,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(Xs.div,{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),o.jsx(Xs.aside,{className:"fixed inset-y-0 left-0 z-50 w-72 max-w-[85%] bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-2xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},role:"navigation","aria-label":"Mobile navigation",children:g(!1)})]})}),p=o.jsx("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${u?"w-16":"w-72"} bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-xl`,role:"navigation","aria-label":"Main navigation",children:g(u)});return o.jsxs(o.Fragment,{children:[m,p]});function g(v){return o.jsxs("div",{className:"flex flex-col h-full text-white",children:[o.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-white/10",children:[o.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors duration-200 focus:outline-none","aria-label":v?"Expand sidebar":"Collapse sidebar",children:o.jsx(uS,{className:"h-6 w-6 text-white"})}),o.jsxs(ts,{to:"/dashboard",className:"flex items-center group","aria-label":"Go to dashboard",children:[o.jsx("img",{src:bO,alt:"ASP Cranes",className:`object-contain transition-all duration-300 group-hover:scale-105 ${v?"h-8 w-8":"h-10 w-auto"}`,onError:w=>{w.currentTarget.src=wO,w.currentTarget.onerror=null}}),!v&&o.jsx(Xs.span,{className:"ml-3 text-xl font-bold bg-gradient-to-r from-white to-brand-gold bg-clip-text text-transparent",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"ASP CRM"})]})]}),o.jsx("nav",{className:"flex-1 py-6",role:"navigation",children:o.jsx("ul",{className:"space-y-1 px-3",role:"list",children:d.map(w=>{const b=h(w.href,w.end);return o.jsx("li",{role:"listitem",children:o.jsxs(ts,{to:w.href,className:`group flex items-center rounded-lg transition-all duration-200 ${v?"justify-center p-3":"p-3"} ${b?"bg-brand-gold text-brand-blue font-semibold shadow-lg scale-105":"text-white/90 hover:bg-white/10 hover:text-white hover:scale-[1.02]"}`,onClick:t,"aria-current":b?"page":void 0,children:[o.jsx("span",{className:`flex-shrink-0 transition-transform group-hover:scale-110 ${b?"text-brand-blue":""}`,children:w.icon}),!v&&o.jsx(Xs.span,{className:"ml-3 text-sm font-medium",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05},children:w.label}),v&&o.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50 whitespace-nowrap",children:[w.label,o.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},w.href)})})}),o.jsx("div",{className:"p-4 border-t border-white/10",children:o.jsxs("div",{className:`flex items-center ${v?"justify-center":"space-x-3"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:(r==null?void 0:r.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(r==null?void 0:r.name)||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-brand-gold/50 hover:border-brand-gold transition-colors"})}),!v&&r&&o.jsxs(Xs.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[o.jsx("p",{className:"text-sm font-semibold text-white truncate",children:r.name||"User"}),o.jsx("p",{className:"text-xs text-white/70 truncate capitalize",children:r.role?r.role.replace("_"," "):"User"}),o.jsxs("button",{onClick:()=>{t&&t();const w=new CustomEvent("sidebar-logout");document.dispatchEvent(w)},className:"mt-2 flex items-center text-xs text-white/80 hover:text-brand-gold px-2 py-1 rounded-md hover:bg-white/10 transition-all duration-200","aria-label":"Logout",children:[o.jsx(cS,{className:"h-3 w-3 mr-2"}),"Logout"]})]})]})})]})}}const re=async()=>null,ft=async()=>[],pp=async()=>({success:!0}),gp=async()=>({success:!1,error:"Service disabled in production"}),Cn=()=>{},SO=Cn,CO=Cn,kO=Cn,EO=Cn,DO=Cn,TO=Cn,PO=()=>!1,_O=Cn,AO=gp,MO=pp,RO=re,IO=re,OO=re,LO=re,FO=re,IC=re,ri=re,vx=re,bx=ft,OC=re,LC=re,$O=re,BO=re,zO=re,VO=ft,UO=re,WO=re,HO=re,qO=re,FC=re,GO=re,YO=re,QO=ft,KO=re,$C=ft,BC=re,XO=ft,JO=ft,ZO=re,e5=re,t5=re,n5=ft,s5=re,r5=ft,i5=re,a5=re,o5=re,l5=re,c5=ft,u5=re,d5=re,h5=ft,f5=re,m5=re,p5=re,g5=re,x5=ft,y5=re,v5=re,b5=ft,w5=ft,j5=re,N5=re,S5=re,C5=re,k5=re,xp=re,zC=re,E5=re,VC=re,UC=re,WC=ft,HC=re,D5=re,T5=re,P5=Cn,qC=ft,_5=re,A5=re,M5=re,GC=ft,YC=re,R5=re,I5=re,QC=ft,KC=re,XC=re,JC=re,ZC=re,O5=re,e2=(e,t)=>(t==null?void 0:t.content)||"",t2=()=>[],su=()=>({}),L5=e=>`$${e||0}`,F5=e=>e?new Date(e).toLocaleDateString():"",$5=()=>!0,B5=()=>!0,z5=e=>e||{},V5=e=>(e==null?void 0:e.id)||"",ru={get:re,post:re,put:re,delete:re,create:re,update:re,list:ft},U5={},W5={},H5={},q5={},G5={},Y5={},Q5={},K5={},X5={},J5={},Z5={},eL={},tL={signIn:gp,signOutUser:pp,getCurrentUser:re,create:re,read:re,update:re,delete:re,list:ft,createDevToken:Cn,initAuthDebug:Cn,logAuthState:Cn,noop:Cn,asyncNull:re,asyncEmptyArray:ft,asyncSuccess:pp,asyncError:gp},Hv=Object.freeze(Object.defineProperty({__proto__:null,Activity:U5,Customer:G5,Deal:Q5,Equipment:K5,Job:q5,Lead:H5,Notification:eL,Quotation:Y5,Service:J5,SiteAssessment:Z5,Template:X5,User:W5,checkAuthStatus:DO,checkForDevTokens:PO,cleanupDevArtifacts:TO,createActivity:_5,createCustomer:t5,createDeal:g5,createDevToken:SO,createEquipment:N5,createJob:YO,createLead:zO,createNotification:D5,createQuotation:l5,createService:KC,createSiteAssessment:YC,createTemplate:vx,createUser:LO,debugAuth:EO,default:tL,deleteActivity:M5,deleteContact:i5,deleteCustomer:s5,deleteDeal:y5,deleteEquipment:S5,deleteJob:KO,deleteLead:UO,deleteNotification:T5,deleteQuotation:u5,deleteService:JC,deleteSiteAssessment:I5,deleteTemplate:OC,deleteUser:FO,extractDataFromApiResponse:z5,formatCurrency:L5,formatDate:F5,getAllEquipment:XO,getAllOperators:JO,getAvailablePlaceholders:t2,getConfig:C5,getContactsByCustomer:r5,getCurrentUser:RO,getCustomer:ZO,getCustomerIdentifier:V5,getCustomers:n5,getDeal:f5,getDealById:v5,getDeals:x5,getDefaultTemplateConfig:zC,getEquipment:b5,getEquipmentByCategory:w5,getEquipmentById:BC,getHeaders:su,getJob:qO,getJobById:FC,getJobs:QO,getJobsByOperator:$C,getLead:$O,getLeads:VO,getQuotation:a5,getQuotationById:d5,getQuotationConfig:xp,getQuotations:c5,getQuotationsForLead:h5,getRecentActivities:qC,getResourceRatesConfig:VC,getServices:QC,getSiteAssessments:GC,getTemplate:IC,getTemplateById:LC,getTemplates:bx,getUserById:IO,getUserNotifications:WC,initAuthDebug:CO,jobApiClient:ru,logAuthState:kO,markNotificationAsRead:HC,mergeQuotationWithTemplate:e2,mergeTemplate:O5,monitorOperation:P5,removeDevTokens:_O,signIn:AO,signOutUser:MO,toggleServiceStatus:ZC,updateActivity:A5,updateConfig:k5,updateCustomer:e5,updateDeal:m5,updateDealStage:p5,updateDefaultTemplateConfig:E5,updateEquipment:j5,updateJob:GO,updateLead:BO,updateLeadAssignment:HO,updateLeadStatus:WO,updateQuotation:o5,updateQuotationConfig:UC,updateService:XC,updateSiteAssessment:R5,updateTemplate:ri,updateUser:OO,validateEmail:$5,validatePhone:B5},Symbol.toStringTag,{value:"Module"}));function n2(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=n2(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function s2(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=n2(e))&&(s&&(s+=" "),s+=t);return s}const qv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Gv=s2,Sa=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Gv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=qv(d)||qv(h);return r[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[g,v]=p;return Array.isArray(v)?v.includes({...i,...l}[g]):{...i,...l}[g]===v})?[...u,h,f]:u},[]);return Gv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},nL=Sa("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function hl({className:e,variant:t,size:n,...s}){return o.jsx("div",{className:nL({variant:t,size:n,className:e}),...s})}const r2=y.memo(({notification:e,onClick:t})=>o.jsx("button",{onClick:()=>t(e),className:`w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors ${e.read?"":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-brand-blue"}`,"aria-describedby":`notification-${e.id}`,children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${e.read?"bg-gray-300":"bg-brand-blue"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),e.message&&o.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt||Date.now()).toLocaleDateString()})]})]})}));r2.displayName="NotificationItem";const sL=y.memo(function({onMobileMenuClick:t}){const{user:n,logout:s}=qe(),r=en(),[i,a]=y.useState([]),[l,c]=y.useState(!1),[u,d]=y.useState(!1);y.useEffect(()=>{n&&h()},[n]),y.useEffect(()=>{const g=v=>{v.target.closest("[data-dropdown]")||(c(!1),d(!1))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=async()=>{if(n)try{const g=await WC(n.id);a(g)}catch(g){console.error("Failed to fetch notifications:",g)}},f=async()=>{try{await s(),r("/login")}catch(g){console.error("Logout error:",g),r("/login")}},m=async g=>{if(!g.read)try{await HC(g.id),await h()}catch(v){console.error("Failed to mark notification as read:",v)}g.link&&r(g.link),c(!1)},p=i.filter(g=>!g.read).length;return o.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm border-b border-gray-200/60 h-16 flex items-center justify-between px-4 lg:px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[t&&o.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Toggle navigation menu",children:o.jsx(uS,{className:"h-5 w-5 text-gray-700"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-brand-blue to-brand-blue/80 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:"ASP CRM"}),o.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Crane Management System"})]})]})]}),o.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search projects, customers, equipment...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all","aria-label":"Search"})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Quick settings",children:o.jsx(ol,{className:"h-5 w-5 text-gray-600"})}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":`Notifications ${p>0?`(${p} unread)`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[o.jsx($0,{className:"h-5 w-5 text-gray-600"}),p>0&&o.jsx(hl,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center animate-pulse",children:p>99?"99+":p})]}),l&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[p," unread"]})]})}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx($0,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):o.jsx("div",{className:"p-2 space-y-1",children:i.map(g=>o.jsx(r2,{notification:g,onClick:m},g.id))})}),i.length>0&&o.jsx("div",{className:"p-3 border-t border-gray-100",children:o.jsx("button",{className:"w-full text-sm text-brand-blue hover:text-brand-blue/80 font-medium",children:"View all notifications"})})]})]}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"User menu","aria-expanded":u,"aria-haspopup":"true",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-200 hover:border-brand-blue/30 transition-colors"}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-400 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"hidden sm:block text-left",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 leading-tight",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 capitalize leading-tight",children:n!=null&&n.role?n.role.replace("_"," "):"User"})]})]}),u&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-3 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-10 w-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:(n==null?void 0:n.email)||"user@example.com"})]})]})}),o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(ll,{className:"h-4 w-4 mr-3 text-gray-400"}),"View Profile"]}),o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(ol,{className:"h-4 w-4 mr-3 text-gray-400"}),"Account Settings"]})]}),o.jsx("div",{className:"border-t border-gray-100 py-2",children:o.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[o.jsx(cS,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]})]})]})]})}),rL=y.memo(function({requiredRole:t,children:n}){const{isAuthenticated:s,user:r,logout:i}=qe(),a=en(),[l,c]=y.useState(!1),[u,d]=y.useState(!1),[h,f]=y.useState(!1),m=y.useRef(!1);if(y.useEffect(()=>{const g=()=>{i().then(()=>{a("/login")}).catch(v=>{console.error("Logout error:",v),a("/login")})};return document.addEventListener("sidebar-logout",g),()=>{document.removeEventListener("sidebar-logout",g)}},[i,a]),y.useEffect(()=>{m.current},[a,s,r,t]),y.useEffect(()=>{const g=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),l)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-brand-gold rounded-full animate-spin",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Application"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please wait..."})]})});if(!s)return o.jsx(zn,{to:"/login"});if(t&&(r==null?void 0:r.role)!==t)return o.jsx(zn,{to:"/dashboard"});const p=()=>{d(!u)};return o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 overflow-hidden",children:[o.jsx(NO,{isMobileOpen:u,onMobileClose:()=>d(!1),isCollapsed:h,onCollapseToggle:f}),o.jsxs("div",{className:`flex flex-col flex-1 overflow-hidden transition-all duration-300 ${h?"lg:ml-16":"lg:ml-72"}`,children:[o.jsx(sL,{onMobileMenuClick:p}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-transparent",children:o.jsx("div",{className:"min-h-full",children:n||o.jsx(YN,{})})})]})]})});let lf=null;const ha=()=>{if(lf!==null)return lf;const e={viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return lf=n,n},qu=()=>!ha(),iL=(e=!1)=>{const t={"Content-Type":"application/json"};if(e)return t["x-bypass-auth"]="development-only-123",console.log("🔓 Development bypass header added, skipping JWT token"),t;const n=localStorage.getItem("auth-token")||localStorage.getItem("jwt-token")||localStorage.getItem("token");return n?(t.Authorization=`Bearer ${n}`,qu()&&console.log("🔑 Auth token found and added to headers")):qu()&&console.warn("⚠️ No auth token found in localStorage - API requests may fail with 403"),t},aL=e=>{ha()&&e()},oL=(e,...t)=>{qu()&&console.log(`[DEBUG] ${e}`,...t)},Yv=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},xc=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},lL=()=>{if(ha()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){xc("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),Yv("Removed development authentication token from storage")}catch(t){xc("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(xc("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Yv("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&xc("SECURITY RISK: Development flags found in production build!")}},cL=()=>{if(ha()){lL(),console.log("%c🔒 PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{if(typeof window<"u"&&ha()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};aL(()=>{cL()});const tt=(e=!0)=>{e=!0;const n=iL(e);if(ha()&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),qu()){const s=!!n.Authorization;oL(`API headers prepared: Auth token ${s?"present":"missing"}${e?", dev bypass enabled":""}`)}return n};async function Qv(e,t){const s=await fetch(`http://103.224.243.242:3001/api/leads/${e}/status`,{method:"PATCH",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify({status:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead status");const r=await s.json();return r.data||r}async function Kv(e,t,n){const r=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}/assign`,{method:"PATCH",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify({salesAgentId:t,salesAgentName:n}),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead assignment");const i=await r.json();return i.data||i}async function uL(e,t){const s=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}`,{method:"PATCH",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead");const r=await s.json();return r.data||r}async function dL(e){const n=await fetch("http://103.224.243.242:3001/api/leads",{method:"POST",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create lead");const s=await n.json();return s.data||s}async function $l(){const t=await fetch("http://103.224.243.242:3001/api/leads",{method:"GET",headers:tt(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch leads");const n=await t.json();return n.data||n}const Xv={getJobsByOperator:hL,getEquipmentById:a2,getAllEquipment:o2,getJobs:Xd,getAllOperators:Bl,createJob:i2,getJobEquipment:fL,getJobOperators:mL};async function i2(e){const n=await fetch("http://103.224.243.242:3001/api/jobs",{method:"POST",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create job");return n.json()}async function hL(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs?operatorId=${encodeURIComponent(e)}`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch jobs by operator");return await n.json()}async function a2(e){const n=await fetch(`http://103.224.243.242:3001/api/equipment/${encodeURIComponent(e)}`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch equipment by id");return await n.json()}async function o2(){const t=await fetch("http://103.224.243.242:3001/api/equipment",{method:"GET",headers:tt(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch equipment");return await t.json()}async function Xd(){const t=await fetch("http://103.224.243.242:3001/api/jobs",{method:"GET",headers:tt(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch jobs");return await t.json()}async function Bl(){const t=await fetch("http://103.224.243.242:3001/api/operators",{method:"GET",headers:tt(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch operators");return await t.json()}async function fL(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/equipment`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job equipment");return await n.json()}async function mL(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/operators`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job operators");return await n.json()}async function Jv(e){const n=`http://103.224.243.242:3001/api/equipment?category=${encodeURIComponent(e)}`;console.log("🔍 Fetching equipment by category:",e),console.log("🔗 API URL:",n);const s=await fetch(n,{method:"GET",headers:tt(!0),credentials:"include"});if(console.log("📡 Response status:",s.status),console.log("📡 Response ok:",s.ok),!s.ok)throw console.error("❌ Failed to fetch equipment:",s.status,s.statusText),new Error("Failed to fetch equipment by category");const r=await s.json();return console.log("📦 Equipment data received:",r),r}async function wx(){return[{id:"1",equipmentId:"EQ0001",name:"Demo Crane",category:"mobile_crane",manufacturingDate:"2022-01",registrationDate:"2022-02",maxLiftingCapacity:50,unladenWeight:20,baseRates:{micro:100,small:200,monthly:3e3,yearly:35e3},runningCostPerKm:10,description:"Sample equipment",status:"available",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),runningCost:0,_source:"client",_mockFlag:!0}]}async function Jd(){const t=await fetch("http://103.224.243.242:3001/api/deals",{method:"GET",headers:tt(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch deals");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function fl(e){const n=await fetch(`http://103.224.243.242:3001/api/deals/${e}`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch deal by ID");return n.json()}async function pL(e){const n=await fetch("http://103.224.243.242:3001/api/deals",{method:"POST",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create deal");return await n.json()}async function l2(e,t){const s=await fetch(`http://103.224.243.242:3001/api/deals/${e}/stage`,{method:"PATCH",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify({stage:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update deal stage");const r=await s.json();return r.data||r}const De=e=>isNaN(e)||e==null?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),gL=Sa("relative bg-white/80 backdrop-blur-sm border border-gray-200/60 transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5",{variants:{variant:{default:"rounded-xl shadow-sm",bordered:"rounded-xl border-2",flat:"rounded-lg",glass:"rounded-xl bg-white/60 backdrop-blur-md border-white/20 shadow-xl",gradient:"rounded-xl bg-gradient-to-br from-white to-gray-50/50 shadow-md"},padding:{none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-5",lg:"p-5 sm:p-6",xl:"p-6 sm:p-8"},size:{default:"",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"w-full"}},defaultVariants:{variant:"default",padding:"md",size:"default"}}),ee=y.memo(ne.forwardRef(({className:e="",variant:t,padding:n,size:s,as:r="div",children:i,hover:a=!0,loading:l=!1,...c},u)=>{const d=gL({variant:t,padding:n,size:s}),h=a?"hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5":"",f=l?"animate-pulse":"";return o.jsxs(r,{className:`${d} ${h} ${f} ${e}`,ref:u,role:r==="div"?"article":void 0,...c,children:[l&&o.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin"})}),i]})}));ee.displayName="Card";const fe=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pb-4 border-b border-gray-200/60 ${e}`,...n,children:t})));fe.displayName="CardHeader";const me=y.memo(ne.forwardRef(({className:e="",gradient:t=!1,level:n=2,children:s,...r},i)=>{const a=`h${n}`,l=t?"bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent":"";return o.jsx(a,{ref:i,className:`text-lg font-semibold text-gray-900 leading-tight ${l} ${e}`,...r,children:s})}));me.displayName="CardTitle";const xL=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("p",{ref:s,className:`text-sm text-gray-600 leading-relaxed ${e}`,...n,children:t})));xL.displayName="CardDescription";const se=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 ${e}`,...n,children:t})));se.displayName="CardContent";const yL=y.memo(ne.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 mt-4 border-t border-gray-200/60 ${e}`,...n,children:t})));yL.displayName="CardFooter";const vL=Sa("group relative overflow-hidden",{variants:{variant:{default:"bg-white/90 backdrop-blur-sm",primary:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",secondary:"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200",accent:"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",warning:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200",error:"bg-gradient-to-br from-red-50 to-rose-50 border-red-200",glass:"bg-white/60 backdrop-blur-md border-white/20"},size:{sm:"min-h-[100px]",default:"min-h-[120px]",lg:"min-h-[140px]"}},defaultVariants:{variant:"default",size:"default"}}),Vt=y.memo(ne.forwardRef(({className:e="",variant:t,size:n,title:s,value:r,icon:i,trend:a,subtitle:l,footer:c,loading:u=!1,gradient:d=!1,...h},f)=>{const p={primary:"bg-gradient-to-br from-blue-500 to-indigo-600",secondary:"bg-gradient-to-br from-gray-500 to-slate-600",accent:"bg-gradient-to-br from-amber-500 to-yellow-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-orange-500 to-red-600",error:"bg-gradient-to-br from-red-500 to-rose-600",glass:"bg-gradient-to-br from-brand-blue to-brand-blue/80",default:"bg-gradient-to-br from-brand-blue to-brand-blue/80"}[t||"default"],g=()=>a?a.value>0?o.jsx(tp,{className:"w-3 h-3"}):a.value<0?o.jsx(YA,{className:"w-3 h-3"}):o.jsx($A,{className:"w-3 h-3"}):null,v=()=>a?a.isPositive?"text-green-600":"text-red-600":"";return o.jsxs(ee,{ref:f,className:`${vL({variant:t,size:n})} ${e}`,variant:d?"gradient":"default",padding:"lg",hover:!u,loading:u,...h,children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-full transform translate-x-8 -translate-y-8 group-hover:scale-110 transition-transform duration-300"}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1 leading-tight",children:s}),l&&o.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:l})]}),i&&o.jsx("div",{className:`p-2.5 rounded-xl ${p} shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300`,children:o.jsx("div",{className:"text-white w-5 h-5 flex items-center justify-center",children:i})})]}),o.jsx("div",{className:"flex-1 flex items-center",children:o.jsx("div",{className:"text-2xl font-bold text-gray-900 group-hover:text-brand-blue transition-colors duration-300",children:u?o.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}):r})}),a&&o.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[o.jsxs("div",{className:`flex items-center space-x-1 ${v()}`,children:[g(),o.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.value),"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),c&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/60",children:c})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-blue/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})}));Vt.displayName="StatCard";const bL=y.memo(()=>o.jsxs(ee,{className:"min-h-[120px] animate-pulse",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"})]}),o.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}));bL.displayName="StatCardSkeleton";const wL=e=>{switch(e){case"lead":return o.jsx(ll,{className:"h-4 w-4"});case"deal":return o.jsx(_A,{className:"h-4 w-4"});case"job":return o.jsx(fn,{className:"h-4 w-4"});case"equipment":return o.jsx(cn,{className:"h-4 w-4"});case"user":return o.jsx(ll,{className:"h-4 w-4"});default:return o.jsx(yi,{className:"h-4 w-4"})}},jL=e=>{switch(e){case"success":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"info":default:return"text-blue-600 bg-blue-50"}},NL=e=>{const n=new Date().getTime()-e.getTime(),s=Math.floor(n/(1e3*60)),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s}m ago`:r<24?`${r}h ago`:i<7?`${i}d ago`:e.toLocaleDateString()},SL=[{id:"1",type:"lead",title:"New lead created",description:"John Doe submitted a crane rental inquiry",timestamp:new Date(Date.now()-1e3*60*15),status:"info",user:"System"},{id:"2",type:"deal",title:"Deal closed",description:"Construction project deal worth ₹2,50,000 closed successfully",timestamp:new Date(Date.now()-1e3*60*60*2),status:"success",user:"Sales Agent"},{id:"3",type:"job",title:"Job scheduled",description:"Crane deployment for Site A scheduled for tomorrow",timestamp:new Date(Date.now()-1e3*60*60*4),status:"info",user:"Operations Manager"},{id:"4",type:"equipment",title:"Maintenance alert",description:"Crane CR-001 requires scheduled maintenance",timestamp:new Date(Date.now()-1e3*60*60*6),status:"warning",user:"System"},{id:"5",type:"user",title:"New user registered",description:"New operator account created for Mike Johnson",timestamp:new Date(Date.now()-1e3*60*60*24),status:"info",user:"Admin"}];function CL({activities:e,className:t}){const[n,s]=y.useState([]),[r,i]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{if(e)s(e);else{const l=await qC(5);s(l)}}catch(l){console.error("Error fetching activities:",l),s(SL)}finally{i(!1)}})()},[e]),r?o.jsxs(ee,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(Vn,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),o.jsx("p",{children:"Loading activities..."})]})})]}):o.jsxs(ee,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(Vn,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(yi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"No recent activities"})]}):n.map(a=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${jL(a.status)}`,children:wL(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:NL(a.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),a.user&&o.jsx("div",{className:"flex items-center mt-2",children:o.jsx(hl,{variant:"secondary",className:"text-xs",children:a.user})})]})]},a.id))}),n.length>0&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all activities →"})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function zl(e){return e+.5|0}const sr=(e,t,n)=>Math.max(Math.min(e,n),t);function go(e){return sr(zl(e*2.55),0,255)}function yr(e){return sr(zl(e*255),0,255)}function ys(e){return sr(zl(e/2.55)/100,0,1)}function Zv(e){return sr(zl(e*100),0,100)}const vn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yp=[..."0123456789ABCDEF"],kL=e=>yp[e&15],EL=e=>yp[(e&240)>>4]+yp[e&15],yc=e=>(e&240)>>4===(e&15),DL=e=>yc(e.r)&&yc(e.g)&&yc(e.b)&&yc(e.a);function TL(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&vn[e[1]]*17,g:255&vn[e[2]]*17,b:255&vn[e[3]]*17,a:t===5?vn[e[4]]*17:255}:(t===7||t===9)&&(n={r:vn[e[1]]<<4|vn[e[2]],g:vn[e[3]]<<4|vn[e[4]],b:vn[e[5]]<<4|vn[e[6]],a:t===9?vn[e[7]]<<4|vn[e[8]]:255})),n}const PL=(e,t)=>e<255?t(e):"";function _L(e){var t=DL(e)?kL:EL;return e?"#"+t(e.r)+t(e.g)+t(e.b)+PL(e.a,t):void 0}const AL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function c2(e,t,n){const s=t*Math.min(n,1-n),r=(i,a=(i+e/30)%12)=>n-s*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function ML(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function RL(e,t,n){const s=c2(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function IL(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function jx(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),a=Math.min(n,s,r),l=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=l>.5?d/(2-i-a):d/(i+a),c=IL(n,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function Nx(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(yr)}function Sx(e,t,n){return Nx(c2,e,t,n)}function OL(e,t,n){return Nx(RL,e,t,n)}function LL(e,t,n){return Nx(ML,e,t,n)}function u2(e){return(e%360+360)%360}function FL(e){const t=AL.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?go(+t[5]):yr(+t[5]));const r=u2(+t[2]),i=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?s=OL(r,i,a):t[1]==="hsv"?s=LL(r,i,a):s=Sx(r,i,a),{r:s[0],g:s[1],b:s[2],a:n}}function $L(e,t){var n=jx(e);n[0]=u2(n[0]+t),n=Sx(n),e.r=n[0],e.g=n[1],e.b=n[2]}function BL(e){if(!e)return;const t=jx(e),n=t[0],s=Zv(t[1]),r=Zv(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${ys(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const eb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function zL(){const e={},t=Object.keys(tb),n=Object.keys(eb);let s,r,i,a,l;for(s=0;s<t.length;s++){for(a=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,eb[i]);i=parseInt(tb[a],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let vc;function VL(e){vc||(vc=zL(),vc.transparent=[0,0,0,0]);const t=vc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const UL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function WL(e){const t=UL.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const a=+t[7];n=t[8]?go(a):sr(a*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?go(s):sr(s,0,255)),r=255&(t[4]?go(r):sr(r,0,255)),i=255&(t[6]?go(i):sr(i,0,255)),{r:s,g:r,b:i,a:n}}}function HL(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${ys(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const cf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Ei=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function qL(e,t,n){const s=Ei(ys(e.r)),r=Ei(ys(e.g)),i=Ei(ys(e.b));return{r:yr(cf(s+n*(Ei(ys(t.r))-s))),g:yr(cf(r+n*(Ei(ys(t.g))-r))),b:yr(cf(i+n*(Ei(ys(t.b))-i))),a:e.a+n*(t.a-e.a)}}function bc(e,t,n){if(e){let s=jx(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Sx(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function d2(e,t){return e&&Object.assign(t||{},e)}function nb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=yr(e[3]))):(t=d2(e,{r:0,g:0,b:0,a:1}),t.a=yr(t.a)),t}function GL(e){return e.charAt(0)==="r"?WL(e):FL(e)}class ml{constructor(t){if(t instanceof ml)return t;const n=typeof t;let s;n==="object"?s=nb(t):n==="string"&&(s=TL(t)||VL(t)||GL(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=d2(this._rgb);return t&&(t.a=ys(t.a)),t}set rgb(t){this._rgb=nb(t)}rgbString(){return this._valid?HL(this._rgb):void 0}hexString(){return this._valid?_L(this._rgb):void 0}hslString(){return this._valid?BL(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=a*s.a+(1-a)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=qL(this._rgb,t._rgb,n)),this}clone(){return new ml(this.rgb)}alpha(t){return this._rgb.a=yr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=zl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return bc(this._rgb,2,t),this}darken(t){return bc(this._rgb,2,-t),this}saturate(t){return bc(this._rgb,1,t),this}desaturate(t){return bc(this._rgb,1,-t),this}rotate(t){return $L(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ds(){}const YL=(()=>{let e=0;return()=>e++})();function Me(e){return e==null}function ut(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ke(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Lt(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Xn(e,t){return Lt(e)?e:t}function be(e,t){return typeof e>"u"?t:e}const QL=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,h2=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function We(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Le(e,t,n,s){let r,i,a;if(ut(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(ke(e))for(a=Object.keys(e),i=a.length,r=0;r<i;r++)t.call(n,e[a[r]],a[r])}function Gu(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Yu(e){if(ut(e))return e.map(Yu);if(ke(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Yu(e[n[r]]);return t}return e}function f2(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function KL(e,t,n,s){if(!f2(e))return;const r=t[e],i=n[e];ke(r)&&ke(i)?pl(r,i,s):t[e]=Yu(i)}function pl(e,t,n){const s=ut(t)?t:[t],r=s.length;if(!ke(e))return e;n=n||{};const i=n.merger||KL;let a;for(let l=0;l<r;++l){if(a=s[l],!ke(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],e,a,n)}return e}function Io(e,t){return pl(e,t,{merger:XL})}function XL(e,t,n){if(!f2(e))return;const s=t[e],r=n[e];ke(s)&&ke(r)?Io(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Yu(r))}const sb={"":e=>e,x:e=>e.x,y:e=>e.y};function JL(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function ZL(e){const t=JL(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function fi(e,t){return(sb[t]||(sb[t]=ZL(t)))(e)}function Cx(e){return e.charAt(0).toUpperCase()+e.slice(1)}const gl=e=>typeof e<"u",Cr=e=>typeof e=="function",rb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function e3(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Fe=Math.PI,Je=2*Fe,t3=Je+Fe,Qu=Number.POSITIVE_INFINITY,n3=Fe/180,yt=Fe/2,Rr=Fe/4,ib=Fe*2/3,m2=Math.log10,as=Math.sign;function Oo(e,t,n){return Math.abs(e-t)<n}function ab(e){const t=Math.round(e);e=Oo(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(m2(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function s3(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function r3(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function xl(e){return!r3(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function i3(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function a3(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function js(e){return e*(Fe/180)}function o3(e){return e*(180/Fe)}function ob(e){if(!Lt(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function p2(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Fe&&(i+=Je),{angle:i,distance:r}}function vp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function l3(e,t){return(e-t+t3)%Je-Fe}function sn(e){return(e%Je+Je)%Je}function yl(e,t,n,s){const r=sn(e),i=sn(t),a=sn(n),l=sn(i-r),c=sn(a-r),u=sn(r-i),d=sn(r-a);return r===i||r===a||s&&i===a||l>c&&u<d}function Mt(e,t,n){return Math.max(t,Math.min(n,e))}function c3(e){return Mt(e,-32768,32767)}function Ns(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function kx(e,t,n){n=n||(a=>e[a]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Zr=(e,t,n,s)=>kx(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),u3=(e,t,n)=>kx(e,n,s=>e[s][t]>=n);function d3(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const g2=["push","pop","shift","splice","unshift"];function h3(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),g2.forEach(n=>{const s="_onData"+Cx(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const a=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),a}})})}function lb(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(g2.forEach(i=>{delete e[i]}),delete e._chartjs)}function x2(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const y2=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function v2(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,y2.call(window,()=>{s=!1,e.apply(t,n)}))}}function f3(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Ex=e=>e==="start"?"left":e==="end"?"right":"center",_t=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,m3=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function p3(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:a,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:h,max:f,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(r=Math.min(Zr(c,d,h).lo,n?s:Zr(t,d,a.getPixelForValue(h)).lo),u){const g=c.slice(0,r+1).reverse().findIndex(v=>!Me(v[l.axis]));r-=Math.max(0,g)}r=Mt(r,0,s-1)}if(p){let g=Math.max(Zr(c,a.axis,f,!0).hi+1,n?0:Zr(t,d,a.getPixelForValue(f),!0).hi+1);if(u){const v=c.slice(g-1).findIndex(w=>!Me(w[l.axis]));g+=Math.max(0,v)}i=Mt(g,r,s)-r}else i=s-r}return{start:r,count:i}}function g3(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const wc=e=>e===0||e===1,cb=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Je/n)),ub=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Je/n)+1,Lo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*yt)+1,easeOutSine:e=>Math.sin(e*yt),easeInOutSine:e=>-.5*(Math.cos(Fe*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>wc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>wc(e)?e:cb(e,.075,.3),easeOutElastic:e=>wc(e)?e:ub(e,.075,.3),easeInOutElastic(e){return wc(e)?e:e<.5?.5*cb(e*2,.1125,.45):.5+.5*ub(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Lo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Lo.easeInBounce(e*2)*.5:Lo.easeOutBounce(e*2-1)*.5+.5};function Dx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function db(e){return Dx(e)?e:new ml(e)}function uf(e){return Dx(e)?e:new ml(e).saturate(.5).darken(.1).hexString()}const x3=["x","y","borderWidth","radius","tension"],y3=["color","borderColor","backgroundColor"];function v3(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:y3},numbers:{type:"number",properties:x3}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function b3(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hb=new Map;function w3(e,t){t=t||{};const n=e+JSON.stringify(t);let s=hb.get(n);return s||(s=new Intl.NumberFormat(e,t),hb.set(n,s)),s}function Tx(e,t,n){return w3(t,n).format(e)}const j3={values(e){return ut(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=N3(e,n)}const a=m2(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Tx(e,s,c)}};function N3(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var b2={formatters:j3};function S3(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:b2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const mi=Object.create(null),bp=Object.create(null);function Fo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function df(e,t,n){return typeof t=="string"?pl(Fo(e,t),n):pl(Fo(e,""),t)}class C3{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>uf(r.backgroundColor),this.hoverBorderColor=(s,r)=>uf(r.borderColor),this.hoverColor=(s,r)=>uf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return df(this,t,n)}get(t){return Fo(this,t)}describe(t,n){return df(bp,t,n)}override(t,n){return df(mi,t,n)}route(t,n,s,r){const i=Fo(this,t),a=Fo(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[r];return ke(c)?Object.assign({},u,c):be(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var at=new C3({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[v3,b3,S3]);function k3(e){return!e||Me(e.size)||Me(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function fb(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Ir(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function mb(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function wp(e,t,n,s){w2(e,t,n,s,null)}function w2(e,t,n,s,r){let i,a,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,g=t.radius;let v=(p||0)*n3;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(v),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),m){default:r?e.ellipse(n,s,r/2,g,0,0,Je):e.arc(n,s,g,0,Je),e.closePath();break;case"triangle":d=r?r/2:g,e.moveTo(n+Math.sin(v)*d,s-Math.cos(v)*g),v+=ib,e.lineTo(n+Math.sin(v)*d,s-Math.cos(v)*g),v+=ib,e.lineTo(n+Math.sin(v)*d,s-Math.cos(v)*g),e.closePath();break;case"rectRounded":u=g*.516,c=g-u,a=Math.cos(v+Rr)*c,h=Math.cos(v+Rr)*(r?r/2-u:c),l=Math.sin(v+Rr)*c,f=Math.sin(v+Rr)*(r?r/2-u:c),e.arc(n-h,s-l,u,v-Fe,v-yt),e.arc(n+f,s-a,u,v-yt,v),e.arc(n+h,s+l,u,v,v+yt),e.arc(n-f,s+a,u,v+yt,v+Fe),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,d=r?r/2:c,e.rect(n-d,s-c,2*d,2*c);break}v+=Rr;case"rectRot":h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+f,s-a),e.lineTo(n+h,s+l),e.lineTo(n-f,s+a),e.closePath();break;case"crossRot":v+=Rr;case"cross":h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"star":h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a),v+=Rr,h=Math.cos(v)*(r?r/2:g),a=Math.cos(v)*g,l=Math.sin(v)*g,f=Math.sin(v)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"line":a=r?r/2:Math.cos(v)*g,l=Math.sin(v)*g,e.moveTo(n-a,s-l),e.lineTo(n+a,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(v)*(r?r/2:g),s+Math.sin(v)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function vl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Zd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function eh(e){e.restore()}function E3(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function D3(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function T3(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Me(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function P3(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),a=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function _3(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function bl(e,t,n,s,r,i={}){const a=ut(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,T3(e,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&_3(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Me(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,s,i.maxWidth)),e.fillText(u,n,s,i.maxWidth),P3(e,n,s,u,i),s+=Number(r.lineHeight);e.restore()}function Ku(e,t){const{x:n,y:s,w:r,h:i,radius:a}=t;e.arc(n+a.topLeft,s+a.topLeft,a.topLeft,1.5*Fe,Fe,!0),e.lineTo(n,s+i-a.bottomLeft),e.arc(n+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,Fe,yt,!0),e.lineTo(n+r-a.bottomRight,s+i),e.arc(n+r-a.bottomRight,s+i-a.bottomRight,a.bottomRight,yt,0,!0),e.lineTo(n+r,s+a.topRight),e.arc(n+r-a.topRight,s+a.topRight,a.topRight,0,-yt,!0),e.lineTo(n+a.topLeft,s)}const A3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,M3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function R3(e,t){const n=(""+e).match(A3);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const I3=e=>+e||0;function Px(e,t){const n={},s=ke(t),r=s?Object.keys(t):t,i=ke(e)?s?a=>be(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of r)n[a]=I3(i(a));return n}function j2(e){return Px(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ea(e){return Px(e,["topLeft","topRight","bottomLeft","bottomRight"])}function An(e){const t=j2(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Rt(e,t){e=e||{},t=t||at.font;let n=be(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=be(e.style,t.style);s&&!(""+s).match(M3)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:be(e.family,t.family),lineHeight:R3(be(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:be(e.weight,t.weight),string:""};return r.string=k3(r),r}function jc(e,t,n,s){let r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&a!==void 0)return a}function O3(e,t,n){const{min:s,max:r}=e,i=h2(t,(r-s)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(s,-Math.abs(i)),max:a(r,i)}}function Ni(e,t){return Object.assign(Object.create(e),t)}function _x(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=k2("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>_x([l,...e],t,i,s)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return S2(l,c,()=>W3(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return gb(l).includes(c)},ownKeys(l){return gb(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function fa(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:N2(e,s),setContext:i=>fa(e,i,n,s),override:i=>fa(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete e[a],!0},get(i,a,l){return S2(i,a,()=>F3(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(i,a,l){return e[a]=l,delete i[a],!0}})}function N2(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Cr(n)?n:()=>n,isIndexable:Cr(s)?s:()=>s}}const L3=(e,t)=>e?e+Cx(t):t,Ax=(e,t)=>ke(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function S2(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function F3(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:a}=e;let l=s[t];return Cr(l)&&a.isScriptable(t)&&(l=$3(t,l,e,n)),ut(l)&&l.length&&(l=B3(t,l,e,a.isIndexable)),Ax(t,l)&&(l=fa(l,r,i&&i[t],a)),l}function $3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,a||s);return l.delete(e),Ax(e,c)&&(c=Mx(r._scopes,r,e,c)),c}function B3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(ke(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Mx(u,r,e,d);t.push(fa(h,i,a&&a[e],l))}}return t}function C2(e,t,n){return Cr(e)?e(t,n):e}const z3=(e,t)=>e===!0?t:typeof e=="string"?fi(t,e):void 0;function V3(e,t,n,s,r){for(const i of t){const a=z3(n,i);if(a){e.add(a);const l=C2(a._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(a===!1&&typeof s<"u"&&n!==s)return null}return!1}function Mx(e,t,n,s){const r=t._rootScopes,i=C2(t._fallback,n,s),a=[...e,...r],l=new Set;l.add(s);let c=pb(l,a,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=pb(l,a,i,c,s),c===null)?!1:_x(Array.from(l),[""],r,i,()=>U3(t,n,s))}function pb(e,t,n,s,r){for(;n;)n=V3(e,t,n,s,r);return n}function U3(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ut(r)&&ke(n)?n:r||{}}function W3(e,t,n,s){let r;for(const i of t)if(r=k2(L3(i,e),n),typeof r<"u")return Ax(e,r)?Mx(n,s,e,r):r}function k2(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function gb(e){let t=e._keys;return t||(t=e._keys=H3(e._scopes)),t}function H3(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const q3=Number.EPSILON||1e-14,ma=(e,t)=>t<e.length&&!e[t].skip&&e[t],E2=e=>e==="x"?"y":"x";function G3(e,t,n,s){const r=e.skip?t:e,i=t,a=n.skip?t:n,l=vp(i,r),c=vp(a,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=s*u,f=s*d;return{previous:{x:i.x-h*(a.x-r.x),y:i.y-h*(a.y-r.y)},next:{x:i.x+f*(a.x-r.x),y:i.y+f*(a.y-r.y)}}}function Y3(e,t,n){const s=e.length;let r,i,a,l,c,u=ma(e,0);for(let d=0;d<s-1;++d)if(c=u,u=ma(e,d+1),!(!c||!u)){if(Oo(t[d],0,q3)){n[d]=n[d+1]=0;continue}r=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),n[d]=r*a*t[d],n[d+1]=i*a*t[d])}}function Q3(e,t,n="x"){const s=E2(n),r=e.length;let i,a,l,c=ma(e,0);for(let u=0;u<r;++u){if(a=l,l=c,c=ma(e,u+1),!l)continue;const d=l[n],h=l[s];a&&(i=(d-a[n])/3,l[`cp1${n}`]=d-i,l[`cp1${s}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${s}`]=h+i*t[u])}}function K3(e,t="x"){const n=E2(t),s=e.length,r=Array(s).fill(0),i=Array(s);let a,l,c,u=ma(e,0);for(a=0;a<s;++a)if(l=c,c=u,u=ma(e,a+1),!!c){if(u){const d=u[t]-c[t];r[a]=d!==0?(u[n]-c[n])/d:0}i[a]=l?u?as(r[a-1])!==as(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}Y3(e,r,i),Q3(e,i,t)}function Nc(e,t,n){return Math.max(Math.min(e,n),t)}function X3(e,t){let n,s,r,i,a,l=vl(e[0],t);for(n=0,s=e.length;n<s;++n)a=i,i=l,l=n<s-1&&vl(e[n+1],t),i&&(r=e[n],a&&(r.cp1x=Nc(r.cp1x,t.left,t.right),r.cp1y=Nc(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Nc(r.cp2x,t.left,t.right),r.cp2y=Nc(r.cp2y,t.top,t.bottom)))}function J3(e,t,n,s,r){let i,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")K3(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)l=e[i],c=G3(u,l,e[Math.min(i+1,a-(s?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&X3(e,n)}function Rx(){return typeof window<"u"&&typeof document<"u"}function Ix(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Xu(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const th=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Z3(e,t){return th(e).getPropertyValue(t)}const eF=["top","right","bottom","left"];function ii(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=eF[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const tF=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function nF(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let a=!1,l,c;if(tF(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function Wr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=th(n),i=r.boxSizing==="border-box",a=ii(r,"padding"),l=ii(r,"border","width"),{x:c,y:u,box:d}=nF(e,n),h=a.left+(d&&l.left),f=a.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function sF(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&Ix(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const a=i.getBoundingClientRect(),l=th(i),c=ii(l,"border","width"),u=ii(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,s=Xu(l.maxWidth,i,"clientWidth"),r=Xu(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Qu,maxHeight:r||Qu}}const Sc=e=>Math.round(e*10)/10;function rF(e,t,n,s){const r=th(e),i=ii(r,"margin"),a=Xu(r.maxWidth,e,"clientWidth")||Qu,l=Xu(r.maxHeight,e,"clientHeight")||Qu,c=sF(e,t,n);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=ii(r,"border","width"),m=ii(r,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Sc(Math.min(u,a,c.maxWidth)),d=Sc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Sc(u/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=Sc(Math.floor(d*s))),{width:u,height:d}}function xb(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||a.height!==r||a.width!==i?(e.currentDevicePixelRatio=s,a.height=r,a.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const iF=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Rx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function yb(e,t){const n=Z3(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Hr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function aF(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function oF(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Hr(e,r,n),l=Hr(r,i,n),c=Hr(i,t,n),u=Hr(a,l,n),d=Hr(l,c,n);return Hr(u,d,n)}const lF=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},cF=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ta(e,t,n){return e?lF(t,n):cF()}function D2(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function T2(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function P2(e){return e==="angle"?{between:yl,compare:l3,normalize:sn}:{between:Ns,compare:(t,n)=>t-n,normalize:t=>t}}function vb({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function uF(e,t,n){const{property:s,start:r,end:i}=n,{between:a,normalize:l}=P2(s),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&a(l(t[u%c][s]),r,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function _2(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,a=t.length,{compare:l,between:c,normalize:u}=P2(s),{start:d,end:h,loop:f,style:m}=uF(e,t,n),p=[];let g=!1,v=null,w,b,x;const N=()=>c(r,x,w)&&l(r,x)!==0,S=()=>l(i,w)===0||c(i,x,w),k=()=>g||N(),j=()=>!g||S();for(let C=d,D=d;C<=h;++C)b=t[C%a],!b.skip&&(w=u(b[s]),w!==x&&(g=c(w,r,i),v===null&&k()&&(v=l(w,r)===0?C:D),v!==null&&j()&&(p.push(vb({start:v,end:C,loop:f,count:a,style:m})),v=null),D=C,x=w));return v!==null&&p.push(vb({start:v,end:h,loop:f,count:a,style:m})),p}function A2(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=_2(s[r],e.points,t);i.length&&n.push(...i)}return n}function dF(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function hF(e,t,n,s){const r=e.length,i=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&i.push({start:t%r,end:a%r,loop:s}),i}function fF(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:a,end:l}=dF(n,r,i,s);if(s===!0)return bb(e,[{start:a,end:l,loop:i}],n,t);const c=l<a?l+r:l,u=!!e._fullLoop&&a===0&&l===r-1;return bb(e,hF(n,a,c,u),n,t)}function bb(e,t,n,s){return!s||!s.setContext||!n?t:mF(e,t,n,s)}function mF(e,t,n,s){const r=e._chart.getContext(),i=wb(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,g,v,w){const b=l?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=b;for(;n[g%c].skip;)g+=b;p%c!==g%c&&(u.push({start:p%c,end:g%c,loop:v,style:w}),d=w,h=g%c)}}for(const p of t){h=l?h:p.start;let g=n[h%c],v;for(f=h+1;f<=p.end;f++){const w=n[f%c];v=wb(s.setContext(Ni(r,{type:"segment",p0:g,p1:w,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),pF(v,d)&&m(h,f-1,p.loop,d),g=w,d=v}h<f-1&&m(h,f-1,p.loop,d)}return u}function wb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function pF(e,t){if(!t)return!1;const n=[],s=function(r,i){return Dx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Cc(e,t,n){return e.options.clip?e[n]:t[n]}function gF(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Cc(n,t,"left"),right:Cc(n,t,"right"),top:Cc(s,t,"top"),bottom:Cc(s,t,"bottom")}:t}function M2(e,t){const n=t._clip;if(n.disabled)return!1;const s=gF(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],a=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(s-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=y2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[a]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fs=new xF;const jb="transparent",yF={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=db(e||jb),r=s.valid&&db(t||jb);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class vF{constructor(t,n,s,r){const i=n[s];r=jc([t.to,r,i,t.from]);const a=jc([t.from,i,r]);this._active=!0,this._fn=t.fn||yF[t.type||typeof a],this._easing=Lo[t.easing]||Lo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,a=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=jc([t.to,n,r,t.from]),this._from=jc([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class R2{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!ke(t))return;const n=Object.keys(at.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!ke(i))return;const a={};for(const l of n)a[l]=i[l];(ut(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,a)})})}_animateOptions(t,n){const s=n.options,r=wF(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&bF(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new vF(f,t,u,d),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return fs.add(this._chart,s),!0}}function bF(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function wF(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Nb(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function jF(e,t,n){if(n===!1)return!1;const s=Nb(e,n),r=Nb(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function NF(e){let t,n,s,r;return ke(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function I2(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Sb(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===n){if(d=!0,s.all)continue;break}u=e.values[c],Lt(u)&&(i||t===0||as(t)===as(u))&&(t+=u)}return!d&&!s.all?0:t}function SF(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[r]:d,[i]:e[d]};return l}function hf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function CF(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function kF(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function EF(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function Cb(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function kb(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:l}=s,c=i.axis,u=a.axis,d=CF(i,a,s),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:g,[u]:v}=p,w=p._stacks||(p._stacks={});f=w[u]=EF(r,d,g),f[l]=v,f._top=Cb(f,a,!0,s.type),f._bottom=Cb(f,a,!1,s.type);const b=f._visualValues||(f._visualValues={});b[l]=v}}function ff(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function DF(e,t){return Ni(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function TF(e,t,n){return Ni(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Ga(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const mf=e=>e==="reset"||e==="none",Eb=(e,t)=>t?e:Object.assign({},e),PF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:I2(n,!0),values:null};class ai{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=hf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ga(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=be(s.xAxisID,ff(t,"x")),a=n.yAxisID=be(s.yAxisID,ff(t,"y")),l=n.rAxisID=be(s.rAxisID,ff(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,i,a,l),d=n.vAxisID=r(c,a,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&lb(this._data,this),t._stacked&&Ga(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(ke(n)){const r=this._cachedMeta;this._data=SF(n,r)}else if(s!==n){if(s){lb(s,this);const r=this._cachedMeta;Ga(r),r._parsed=[]}n&&Object.isExtensible(n)&&h3(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=hf(n.vScale,n),n.stack!==s.stack&&(r=!0,Ga(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(kb(this,n._parsed),n._stacked=hf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:a}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{ut(r[t])?f=this.parseArrayData(s,r,t,n):ke(r[t])?f=this.parseObjectData(s,r,t,n):f=this.parsePrimitiveData(s,r,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);s._sorted=c}a&&kb(this,f)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:a}=t,l=i.axis,c=a.axis,u=i.getLabels(),d=i===a,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+s,h[f]={[l]:d||i.parse(u[p],p),[c]:a.parse(n[p],p)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:a}=t,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:i.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,m;for(d=0,h=r;d<h;++d)f=d+s,m=n[f],u[d]={x:i.parse(fi(m,l),f),y:a.parse(fi(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,a=n[t.axis],l={keys:I2(r,!0),values:n._stacks[t.axis]._visualValues};return Sb(l,a,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let a=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,a=Sb(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,a=r.length,l=this._getOtherScale(t),c=PF(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=kF(l);let f,m;function p(){m=r[f];const g=m[l.axis];return!Lt(m[t.axis])||d>g||h<g}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,a;for(r=0,i=n.length;r<i;++r)a=n[r][t.axis],Lt(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=NF(be(this.options.clip,jF(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,i))}for(d=0;d<a.length;++d)a[d].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];i=a.$context||(a.$context=TF(this.getContext(),t,a)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=DF(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,a=t+"-"+n,l=i[a],c=this.enableOptionSharing&&gl(s);if(l)return Eb(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(at.elements[t]),p=()=>this.getContext(s,r,n),g=u.resolveNamedOptions(f,m,p,h);return g.$shared&&(g.$shared=c,i[a]=Object.freeze(Eb(g,c))),g}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,l=i[a];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,s,n))}const u=new R2(r,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||mf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),a=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:a}}updateElement(t,n,s,r){mf(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!mf(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=n.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(i),l=t;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&Ga(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(ai,"defaults",{}),ce(ai,"datasetElementType",null),ce(ai,"dataElementType",null);function _F(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=x2(s.sort((r,i)=>r-i))}return e._cache.$bar}function AF(e){const t=e.iScale,n=_F(t,e.type);let s=t._length,r,i,a,l;const c=()=>{a===32767||a===-32768||(gl(l)&&(s=Math.min(s,Math.abs(a-l)||s)),l=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),c();return s}function MF(e,t,n,s){const r=n.barThickness;let i,a;return Me(r)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=r*s,a=1),{chunk:i/s,ratio:a,start:t.pixels[e]-i/2}}function RF(e,t,n,s){const r=t.pixels,i=r[e];let a=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;a===null&&(a=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-a);const u=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/s,ratio:n.barPercentage,start:u}}function IF(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),a=Math.min(r,i),l=Math.max(r,i);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:a,max:l}}function O2(e,t,n,s){return ut(e)?IF(e,t,n,s):t[n.axis]=n.parse(e,s),t}function Db(e,t,n,s){const r=e.iScale,i=e.vScale,a=r.getLabels(),l=r===i,c=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=t[u],h={},h[r.axis]=l||r.parse(a[u],u),c.push(O2(f,h,i,u));return c}function pf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function OF(e,t,n){return e!==0?as(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function LF(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function FF(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:d}=LF(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[Tb(d,a,l,c)]=!0,r=u)),i[Tb(r,a,l,c)]=!0,e.borderSkipped=i}function Tb(e,t,n,s){return s?(e=$F(e,t,n),e=Pb(e,n,t)):e=Pb(e,t,n),e}function $F(e,t,n){return e===t?n:e===n?t:e}function Pb(e,t,n){return e==="start"?t:e==="end"?n:e}function BF(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class iu extends ai{parsePrimitiveData(t,n,s,r){return Db(t,n,s,r)}parseArrayData(t,n,s,r){return Db(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[];let f,m,p,g;for(f=s,m=s+r;f<m;++f)g=n[f],p={},p[i.axis]=i.parse(fi(g,u),f),h.push(O2(fi(g,d),p,a,f));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),a=i._custom,l=pf(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let m=n;m<n+s;m++){const p=this.getParsed(m),g=i||Me(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),v=this._calculateBarIndexPixels(m,d),w=(p._stacks||{})[l.axis],b={horizontal:u,base:g.base,enableBorderRadius:!w||pf(p._custom)||a===w._top||a===w._bottom,x:u?g.head:v.center,y:u?v.center:g.head,height:u?v.size:Math.abs(g.size),width:u?Math.abs(g.size):v.size};f&&(b.options=h||this.resolveDataElementOptions(m,t[m].active?"active":r));const x=b.options||t[m].options;FF(b,x,w,a),BF(b,x,d.ratio),this.updateElement(t[m],m,b,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{const h=d._parsed.find(m=>m[s.axis]===c),f=h&&h[d.vScale.axis];if(Me(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||a.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[be(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,a;for(i=0,a=n.data.length;i<a;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||AF(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=pf(u);let h=c[n.axis],f=0,m=s?this.applyStack(n,c,s):h,p,g;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&as(h)!==as(u.barEnd)&&(f=0),f+=h);const v=!Me(i)&&!d?i:f;let w=n.getPixelForValue(v);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=w,g=p-w,Math.abs(g)<a){g=OF(g,n,l)*a,h===l&&(w-=g/2);const b=n.getPixelForDecimal(0),x=n.getPixelForDecimal(1),N=Math.min(b,x),S=Math.max(b,x);w=Math.max(Math.min(w,S),N),p=w+g,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(w))}if(w===n.getPixelForValue(l)){const b=as(g)*n.getLineWidthForValue(l)/2;w+=b,g-=b}return{size:g,base:w,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,a=be(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?RF(t,n,r,d*u):MF(t,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(be(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}ce(iu,"id","bar"),ce(iu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ce(iu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function zF(e,t,n){let s=1,r=1,i=0,a=0;if(t<Je){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(x,N,S)=>yl(x,l,c,!0)?1:Math.max(N,N*n,S,S*n),p=(x,N,S)=>yl(x,l,c,!0)?-1:Math.min(N,N*n,S,S*n),g=m(0,u,h),v=m(yt,d,f),w=p(Fe,u,h),b=p(Fe+yt,d,f);s=(g-w)/2,r=(v-b)/2,i=-(g+w)/2,a=-(v+b)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:a}}class xo extends ai{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(ke(s[t])){const{key:c="value"}=this._parsing;i=u=>+fi(s[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)r._parsed[a]=i(a)}}_getRotation(){return js(this.options.rotation-90)}_getCircumference(){return js(this.options.circumference)}_getRotationExtents(){let t=Je,n=-Je;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),a=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(QL(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=zF(h,d,c),v=(s.width-a)/f,w=(s.height-a)/m,b=Math.max(Math.min(v,w)/2,0),x=h2(this.options.radius,b),N=Math.max(x*c,0),S=(x-N)/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=g*x,r.total=this.calculateTotal(),this.outerRadius=x-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Je)}updateElements(t,n,s,r){const i=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(n,r);let w=this._getRotation(),b;for(b=0;b<n;++b)w+=this._circumference(b,i);for(b=n;b<n+s;++b){const x=this._circumference(b,i),N=t[b],S={x:d+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+x,circumference:x,outerRadius:p,innerRadius:m};v&&(S.options=g||this.resolveDataElementOptions(b,N.active?"active":r)),w+=x,this.updateElement(N,b,S,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Je*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Tx(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,a,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),t=a.data,l=a.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(be(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ce(xo,"id","doughnut"),ce(xo,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ce(xo,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ce(xo,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=t.legend.options;return n.labels.map((i,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class au extends ai{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=p3(n,r,a);this._drawStart=l,this._drawCount=c,g3(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),f=a.axis,m=l.axis,{spanGaps:p,segment:g}=this.options,v=xl(p)?p:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||r==="none",b=n+s,x=t.length;let N=n>0&&this.getParsed(n-1);for(let S=0;S<x;++S){const k=t[S],j=w?k:{};if(S<n||S>=b){j.skip=!0;continue}const C=this.getParsed(S),D=Me(C[m]),A=j[f]=a.getPixelForValue(C[f],S),F=j[m]=i||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[m],S);j.skip=isNaN(A)||isNaN(F)||D,j.stop=S>0&&Math.abs(C[f]-N[f])>v,g&&(j.parsed=C,j.raw=u.data[S]),h&&(j.options=d||this.resolveDataElementOptions(S,k.active?"active":r)),w||this.updateElement(k,S,j,r),N=C}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ce(au,"id","line"),ce(au,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ce(au,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Or(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ox{constructor(t){ce(this,"options");this.options=t||{}}static override(t){Object.assign(Ox.prototype,t)}init(){}formats(){return Or()}parse(){return Or()}format(){return Or()}add(){return Or()}diff(){return Or()}startOf(){return Or()}endOf(){return Or()}}var VF={_date:Ox};function UF(e,t,n,s){const{controller:r,data:i,_sorted:a}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&i.length){const u=l._reversePixels?u3:Zr;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(g=>!Me(g[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(g=>!Me(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function nh(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=UF(i[l],t,a,r);for(let m=h;m<=f;++m){const p=d[m];p.skip||s(p,u,m)}}}function WF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,a=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function gf(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||nh(e,n,t,function(l,c,u){!r&&!vl(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function HF(e,t,n,s){let r=[];function i(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],s),{angle:h}=p2(a,{x:t.x,y:t.y});yl(h,u,d)&&r.push({element:a,datasetIndex:l,index:c})}return nh(e,n,t,i),r}function qF(e,t,n,s,r,i){let a=[];const l=WF(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,r);if(s&&!m)return;const p=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(p))&&!m)return;const v=l(t,p);v<c?(a=[{element:d,datasetIndex:h,index:f}],c=v):v===c&&a.push({element:d,datasetIndex:h,index:f})}return nh(e,n,t,u),a}function xf(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?HF(e,t,n,r):qF(e,t,n,s,r,i)}function _b(e,t,n,s,r){const i=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return nh(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var GF={modes:{index(e,t,n,s){const r=Wr(t,e),i=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?gf(e,r,i,s,a):xf(e,r,i,!1,s,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?gf(e,r,i,s,a):xf(e,r,i,!1,s,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return gf(e,r,i,s,a)},nearest(e,t,n,s){const r=Wr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return xf(e,r,i,n.intersect,s,a)},x(e,t,n,s){const r=Wr(t,e);return _b(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=Wr(t,e);return _b(e,r,"y",n.intersect,s)}}};const L2=["left","top","right","bottom"];function Ya(e,t){return e.filter(n=>n.pos===t)}function Ab(e,t){return e.filter(n=>L2.indexOf(n.pos)===-1&&n.box.axis===t)}function Qa(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function YF(e){const t=[];let n,s,r,i,a,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:a,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:l});return t}function QF(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!L2.includes(r))continue;const a=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}function KF(e,t){const n=QF(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,a,l;for(i=0,a=e.length;i<a;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return n}function XF(e){const t=YF(e),n=Qa(t.filter(u=>u.box.fullSize),!0),s=Qa(Ya(t,"left"),!0),r=Qa(Ya(t,"right")),i=Qa(Ya(t,"top"),!0),a=Qa(Ya(t,"bottom")),l=Ab(t,"x"),c=Ab(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:Ya(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(a).concat(l)}}function Mb(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function F2(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function JF(e,t,n,s){const{pos:r,box:i}=n,a=e.maxPadding;if(!ke(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&F2(a,i.getPadding());const l=Math.max(0,t.outerWidth-Mb(a,e,"left","right")),c=Math.max(0,t.outerHeight-Mb(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function ZF(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function e6(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{i[a]=Math.max(t[a],n[a])}),i}return s(e?["left","right"]:["top","bottom"])}function yo(e,t,n,s){const r=[];let i,a,l,c,u,d;for(i=0,a=e.length,u=0;i<a;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,e6(l.horizontal,t));const{same:h,other:f}=JF(t,n,l,s);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&yo(r,t,n,s)||d}function kc(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Rb(e,t,n,s){const r=n.padding;let{x:i,y:a}=t;for(const l of e){const c=l.box,u=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;gl(u.start)&&(a=u.start),c.fullSize?kc(c,r.left,a,n.outerWidth-r.right-r.left,f):kc(c,t.left+u.placed,a,h,f),u.start=a,u.placed+=h,a=c.bottom}else{const h=t.h*d,f=u.size||c.width;gl(u.start)&&(i=u.start),c.fullSize?kc(c,i,r.top,f,n.outerHeight-r.bottom-r.top):kc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=a}var kn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=An(e.options.layout.padding),i=Math.max(t-r.width,0),a=Math.max(n-r.height,0),l=XF(e.boxes),c=l.vertical,u=l.horizontal;Le(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},r);F2(f,An(s));const m=Object.assign({maxPadding:f,w:i,h:a,x:r.left,y:r.top},r),p=KF(c.concat(u),h);yo(l.fullSize,m,h,p),yo(c,m,h,p),yo(u,m,h,p)&&yo(c,m,h,p),ZF(m),Rb(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Rb(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Le(l.chartArea,g=>{const v=g.box;Object.assign(v,e.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class $2{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class t6 extends $2{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ou="$chartjs",n6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ib=e=>e===null||e==="";function s6(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[ou]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Ib(r)){const i=yb(e,"width");i!==void 0&&(e.width=i)}if(Ib(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=yb(e,"height");i!==void 0&&(e.height=i)}return e}const B2=iF?{passive:!0}:!1;function r6(e,t,n){e&&e.addEventListener(t,n,B2)}function i6(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,B2)}function a6(e,t){const n=n6[e.type]||e.type,{x:s,y:r}=Wr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Ju(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function o6(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Ju(l.addedNodes,s),a=a&&!Ju(l.removedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function l6(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||Ju(l.removedNodes,s),a=a&&!Ju(l.addedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const wl=new Map;let Ob=0;function z2(){const e=window.devicePixelRatio;e!==Ob&&(Ob=e,wl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function c6(e,t){wl.size||window.addEventListener("resize",z2),wl.set(e,t)}function u6(e){wl.delete(e),wl.size||window.removeEventListener("resize",z2)}function d6(e,t,n){const s=e.canvas,r=s&&Ix(s);if(!r)return;const i=v2((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(r),c6(e,i),a}function yf(e,t,n){n&&n.disconnect(),t==="resize"&&u6(e)}function h6(e,t,n){const s=e.canvas,r=v2(i=>{e.ctx!==null&&n(a6(i,e))},e);return r6(s,t,r),r}class f6 extends $2{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(s6(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[ou])return!1;const s=n[ou].initial;["height","width"].forEach(i=>{const a=s[i];Me(a)?n.removeAttribute(i):n.setAttribute(i,a)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[ou],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),a={attach:o6,detach:l6,resize:d6}[n]||h6;r[n]=a(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:yf,detach:yf,resize:yf}[n]||i6)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return rF(t,n,s,r)}isAttached(t){const n=t&&Ix(t);return!!(n&&n.isConnected)}}function m6(e){return!Rx()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?t6:f6}var Vc;let Ls=(Vc=class{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return xl(this.x)&&xl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},ce(Vc,"defaults",{}),ce(Vc,"defaultRoutes"),Vc);function p6(e,t){const n=e.options.ticks,s=g6(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?y6(t):[],a=i.length,l=i[0],c=i[a-1],u=[];if(a>r)return v6(t,u,i,a/r),u;const d=x6(i,t,r);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(Ec(t,u,d,Me(m)?0:l-m,l),h=0,f=a-1;h<f;h++)Ec(t,u,d,i[h],i[h+1]);return Ec(t,u,d,c,Me(m)?t.length:c+m),u}return Ec(t,u,d),u}function g6(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function x6(e,t,n){const s=b6(e),r=t.length/n;if(!s)return Math.max(r,1);const i=s3(s);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>r)return c}return Math.max(r,1)}function y6(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function v6(e,t,n,s){let r=0,i=n[0],a;for(s=Math.ceil(s),a=0;a<e.length;a++)a===i&&(t.push(e[a]),r++,i=n[r*s])}function Ec(e,t,n,s,r){const i=be(s,0),a=Math.min(be(r,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function b6(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const w6=e=>e==="left"?"right":e==="right"?"left":e,Lb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,Fb=(e,t)=>Math.min(t||e,e);function $b(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function j6(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(c-i,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>a+l)))return c}function N6(e,t){Le(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Ka(e){return e.drawTicks?e.tickLength:0}function Bb(e,t){if(!e.display)return 0;const n=Rt(e.font,t),s=An(e.padding);return(ut(e.text)?e.text.length:1)*n.lineHeight+s.height}function S6(e,t){return Ni(e,{scale:t,type:"scale"})}function C6(e,t,n){return Ni(e,{tick:n,index:t,type:"tick"})}function k6(e,t,n){let s=Ex(e);return(n&&t!=="right"||!n&&t==="right")&&(s=w6(s)),s}function E6(e,t,n,s){const{top:r,left:i,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const g=a-r,v=l-i;if(e.isHorizontal()){if(m=_t(s,i,l),ke(n)){const w=Object.keys(n)[0],b=n[w];p=d[w].getPixelForValue(b)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=Lb(e,n,t);f=l-i}else{if(ke(n)){const w=Object.keys(n)[0],b=n[w];m=d[w].getPixelForValue(b)-v+t}else n==="center"?m=(u.left+u.right)/2-v+t:m=Lb(e,n,t);p=_t(s,a,r),h=n==="left"?-yt:yt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class Ca extends Ls{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=Xn(t,Number.POSITIVE_INFINITY),n=Xn(n,Number.NEGATIVE_INFINITY),s=Xn(s,Number.POSITIVE_INFINITY),r=Xn(r,Number.NEGATIVE_INFINITY),{min:Xn(t,s),max:Xn(n,r),minDefined:Lt(t),maxDefined:Lt(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),a;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,a.min)),i||(s=Math.max(s,a.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Xn(n,Xn(s,n)),max:Xn(s,Xn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){We(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=O3(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?$b(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=p6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){We(this.options.afterUpdate,[this])}beforeSetDimensions(){We(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){We(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),We(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){We(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=We(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){We(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){We(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=Fb(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let a=r,l,c,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=Mt(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(t.offset?.5:1)),c=this.maxHeight-Ka(t.grid)-n.padding-Bb(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),a=o3(Math.min(Math.asin(Mt((d.highest.height+6)/l,-1,1)),Math.asin(Mt(c/u,-1,1))-Math.asin(Mt(f/u,-1,1)))),a=Math.max(r,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){We(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){We(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Bb(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=Ka(i)+c):(t.height=this.maxHeight,t.width=Ka(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,p=js(this.labelRotation),g=Math.cos(p),v=Math.sin(p);if(l){const w=s.mirror?0:v*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+w+m)}else{const w=s.mirror?0:g*h.width+v*f.height;t.width=Math.min(this.maxWidth,t.width+w+m)}this._calculatePadding(u,d,v,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=r*t.width,m=s*n.height):(f=s*t.height,m=r*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){We(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)Me(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=$b(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(n/Fb(n,s));let u=0,d=0,h,f,m,p,g,v,w,b,x,N,S;for(h=0;h<n;h+=c){if(p=t[h].label,g=this._resolveTickFontOptions(h),r.font=v=g.string,w=i[v]=i[v]||{data:{},gc:[]},b=g.lineHeight,x=N=0,!Me(p)&&!ut(p))x=fb(r,w.data,w.gc,x,p),N=b;else if(ut(p))for(f=0,m=p.length;f<m;++f)S=p[f],!Me(S)&&!ut(S)&&(x=fb(r,w.data,w.gc,x,S),N+=b);a.push(x),l.push(N),u=Math.max(x,u),d=Math.max(N,d)}N6(i,n);const k=a.indexOf(u),j=l.indexOf(d),C=D=>({width:a[D]||0,height:l[D]||0});return{first:C(0),last:C(n-1),widest:C(k),highest:C(j),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return c3(this._alignToPixels?Ir(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=C6(this.getContext(),t,s))}return this.$context||(this.$context=S6(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=js(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:a,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Ka(i),m=[],p=l.setContext(this.getContext()),g=p.display?p.width:0,v=g/2,w=function(W){return Ir(s,W,g)};let b,x,N,S,k,j,C,D,A,F,$,L;if(a==="top")b=w(this.bottom),j=this.bottom-f,D=b-v,F=w(t.top)+v,L=t.bottom;else if(a==="bottom")b=w(this.top),F=t.top,L=w(t.bottom)-v,j=b+v,D=this.top+f;else if(a==="left")b=w(this.right),k=this.right-f,C=b-v,A=w(t.left)+v,$=t.right;else if(a==="right")b=w(this.left),A=t.left,$=w(t.right)-v,k=b+v,C=this.left+f;else if(n==="x"){if(a==="center")b=w((t.top+t.bottom)/2+.5);else if(ke(a)){const W=Object.keys(a)[0],O=a[W];b=w(this.chart.scales[W].getPixelForValue(O))}F=t.top,L=t.bottom,j=b+v,D=j+f}else if(n==="y"){if(a==="center")b=w((t.left+t.right)/2);else if(ke(a)){const W=Object.keys(a)[0],O=a[W];b=w(this.chart.scales[W].getPixelForValue(O))}k=b-v,C=k-f,A=t.left,$=t.right}const P=be(r.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/P));for(x=0;x<h;x+=B){const W=this.getContext(x),O=i.setContext(W),T=l.setContext(W),_=O.lineWidth,U=O.color,q=T.dash||[],Z=T.dashOffset,ae=O.tickWidth,le=O.tickColor,ge=O.tickBorderDash||[],we=O.tickBorderDashOffset;N=j6(this,x,c),N!==void 0&&(S=Ir(s,N,_),u?k=C=A=$=S:j=D=F=L=S,m.push({tx1:k,ty1:j,tx2:C,ty2:D,x1:A,y1:F,x2:$,y2:L,width:_,color:U,borderDash:q,borderDashOffset:Z,tickWidth:ae,tickColor:le,tickBorderDash:ge,tickBorderDashOffset:we}))}return this._ticksLength=h,this._borderValue=b,m}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=Ka(s.grid),m=f+d,p=h?-d:m,g=-js(this.labelRotation),v=[];let w,b,x,N,S,k,j,C,D,A,F,$,L="middle";if(r==="top")k=this.bottom-p,j=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+p,j=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);j=B.textAlign,S=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);j=B.textAlign,S=B.x}else if(n==="x"){if(r==="center")k=(t.top+t.bottom)/2+m;else if(ke(r)){const B=Object.keys(r)[0],W=r[B];k=this.chart.scales[B].getPixelForValue(W)+m}j=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")S=(t.left+t.right)/2-m;else if(ke(r)){const B=Object.keys(r)[0],W=r[B];S=this.chart.scales[B].getPixelForValue(W)}j=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?L="top":c==="end"&&(L="bottom"));const P=this._getLabelSizes();for(w=0,b=l.length;w<b;++w){x=l[w],N=x.label;const B=i.setContext(this.getContext(w));C=this.getPixelForTick(w)+i.labelOffset,D=this._resolveTickFontOptions(w),A=D.lineHeight,F=ut(N)?N.length:1;const W=F/2,O=B.color,T=B.textStrokeColor,_=B.textStrokeWidth;let U=j;a?(S=C,j==="inner"&&(w===b-1?U=this.options.reverse?"left":"right":w===0?U=this.options.reverse?"right":"left":U="center"),r==="top"?u==="near"||g!==0?$=-F*A+A/2:u==="center"?$=-P.highest.height/2-W*A+A:$=-P.highest.height+A/2:u==="near"||g!==0?$=A/2:u==="center"?$=P.highest.height/2-W*A:$=P.highest.height-F*A,h&&($*=-1),g!==0&&!B.showLabelBackdrop&&(S+=A/2*Math.sin(g))):(k=C,$=(1-F)*A/2);let q;if(B.showLabelBackdrop){const Z=An(B.backdropPadding),ae=P.heights[w],le=P.widths[w];let ge=$-Z.top,we=0-Z.left;switch(L){case"middle":ge-=ae/2;break;case"bottom":ge-=ae;break}switch(j){case"center":we-=le/2;break;case"right":we-=le;break;case"inner":w===b-1?we-=le:w>0&&(we-=le/2);break}q={left:we,top:ge,width:le+Z.width,height:ae+Z.height,color:B.backdropColor}}v.push({label:N,font:D,textOffset:$,options:{rotation:g,color:O,strokeColor:T,strokeWidth:_,textAlign:U,textBaseline:L,translation:[S,k],backdrop:q}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-js(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,a=this._getLabelSizes(),l=t+i,c=a.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,a;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,a=r.length;i<a;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),a=s.display?i.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Ir(t,this.left,a)-a/2,d=Ir(t,this.right,l)+l/2,h=f=c):(h=Ir(t,this.top,a)-a/2,f=Ir(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Zd(s,r);const i=this.getLabelItems(t);for(const a of i){const l=a.options,c=a.font,u=a.label,d=a.textOffset;bl(s,u,0,d,c,l)}r&&eh(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Rt(s.font),a=An(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||ke(n)?(c+=a.bottom,ut(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=E6(this,c,n,l);bl(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:k6(l,n,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=be(t.grid&&t.grid.z,-1),r=be(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ca.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,a;for(i=0,a=n.length;i<a;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Rt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Dc{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;P6(n)&&(s=this.register(n));const r=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,D6(t,a,s),this.override&&at.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in at[r]&&(delete at[r][s],this.override&&delete mi[s])}}function D6(e,t,n){const s=pl(Object.create(null),[n?at.get(n):{},at.get(t),e.defaults]);at.set(t,s),e.defaultRoutes&&T6(t,e.defaultRoutes),e.descriptors&&at.describe(t,e.descriptors)}function T6(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");at.route(i,r,c,l)})}function P6(e){return"id"in e&&"defaults"in e}class _6{constructor(){this.controllers=new Dc(ai,"datasets",!0),this.elements=new Dc(Ls,"elements"),this.plugins=new Dc(Object,"plugins"),this.scales=new Dc(Ca,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Le(r,a=>{const l=s||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,s){const r=Cx(t);We(s["before"+r],[],s),n[t](s),We(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var es=new _6;class A6{constructor(){this._init=[]}notify(t,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,s,r){r=r||{};for(const i of t){const a=i.plugin,l=a[s],c=[n,r,i.options];if(We(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=be(s.options&&s.options.plugins,{}),i=M6(s);return r===!1&&!n?[]:I6(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function M6(e){const t={},n=[],s=Object.keys(es.plugins.items);for(let i=0;i<s.length;i++)n.push(es.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const a=r[i];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function R6(e,t){return!t&&e===!1?null:e===!0?{}:e}function I6(e,{plugins:t,localIds:n},s,r){const i=[],a=e.getContext();for(const l of t){const c=l.id,u=R6(s[c],r);u!==null&&i.push({plugin:l,options:O6(e.config,{plugin:l,local:n[c]},u,a)})}return i}function O6(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(s,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jp(e,t){const n=at.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function L6(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function F6(e,t){return e===t?"_index_":"_value_"}function zb(e){if(e==="x"||e==="y"||e==="r")return e}function $6(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Np(e,...t){if(zb(e))return e;for(const n of t){const s=n.axis||$6(n.position)||e.length>1&&zb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Vb(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function B6(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Vb(e,"x",n[0])||Vb(e,"y",n[0])}return{}}function z6(e,t){const n=mi[e.type]||{scales:{}},s=t.scales||{},r=jp(e.type,t),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!ke(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Np(a,l,B6(a,e),at.scales[l.type]),u=F6(c,r),d=n.scales||{};i[a]=Io(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||jp(l,t),d=(mi[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=L6(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Io(i[m],[{axis:f},s[m],d[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];Io(l,[at.scales[l.type],at.scale])}),i}function V2(e){const t=e.options||(e.options={});t.plugins=be(t.plugins,{}),t.scales=z6(e,t)}function U2(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function V6(e){return e=e||{},e.data=U2(e.data),V2(e),e}const Ub=new Map,W2=new Set;function Tc(e,t){let n=Ub.get(e);return n||(n=t(),Ub.set(e,n),W2.add(n)),n}const Xa=(e,t,n)=>{const s=fi(t,n);s!==void 0&&e.add(s)};let U6=class{constructor(t){this._config=V6(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=U2(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),V2(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Tc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Tc(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Tc(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Tc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,a=this._cachedScopes(t,s),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>Xa(c,t,h))),d.forEach(h=>Xa(c,r,h)),d.forEach(h=>Xa(c,mi[i]||{},h)),d.forEach(h=>Xa(c,at,h)),d.forEach(h=>Xa(c,bp,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),W2.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,mi[n]||{},at.datasets[n]||{},{type:n},at,bp]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=Wb(this._resolverCache,t,r);let c=a;if(H6(a,n)){i.$shared=!1,s=Cr(s)?s():s;const u=this.createResolver(t,s,l);c=fa(a,s,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,s=[""],r){const{resolver:i}=Wb(this._resolverCache,t,s);return ke(n)?fa(i,n,void 0,r):i}};function Wb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:_x(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const W6=e=>ke(e)&&Object.getOwnPropertyNames(e).some(t=>Cr(e[t]));function H6(e,t){const{isScriptable:n,isIndexable:s}=N2(e);for(const r of t){const i=n(r),a=s(r),l=(a||i)&&e[r];if(i&&(Cr(l)||W6(l))||a&&ut(l))return!0}return!1}var q6="4.5.0";const G6=["top","bottom","left","right","chartArea"];function Hb(e,t){return e==="top"||e==="bottom"||G6.indexOf(e)===-1&&t==="x"}function qb(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Gb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),We(n&&n.onComplete,[e],t)}function Y6(e){const t=e.chart,n=t.options.animation;We(n&&n.onProgress,[e],t)}function H2(e){return Rx()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const lu={},Yb=e=>{const t=H2(e);return Object.values(lu).filter(n=>n.canvas===t).pop()};function Q6(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const a=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=a)}}}function K6(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var Us;let ka=(Us=class{static register(...t){es.add(...t),Qb()}static unregister(...t){es.remove(...t),Qb()}constructor(t,n){const s=this.config=new U6(n),r=H2(t),i=Yb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||m6(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=YL(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new A6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=f3(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],lu[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}fs.listen(this,"complete",Gb),fs.listen(this,"progress",Y6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return Me(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mb(this.canvas,this.ctx),this}stop(){return fs.stop(this),this}resize(t,n){fs.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,xb(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),We(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Le(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const l=n[a],c=Np(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Le(i,a=>{const l=a.options,c=l.id,u=Np(c,l),d=be(l.type,a.dtype);(l.position===void 0||Hb(l.position,u)!==Hb(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{const f=es.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),Le(r,(a,l)=>{a||delete s[l]}),Le(s,a=>{kn.configure(this,a,a.options),kn.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(qb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let a=this.getDatasetMeta(s);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=i.indexAxis||jp(l,this.options),a.order=i.order||0,a.index=s,a.label=""+i.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=es.getController(l),{datasetElementType:u,dataElementType:d}=at.datasets[l];Object.assign(c,{dataElementType:es.getElement(d),datasetElementType:u&&es.getElement(u)}),a.controller=new c(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Le(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),r||Le(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(qb("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Le(this.scales,t=>{kn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!rb(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const a=s==="_removeElements"?-i:i;Q6(t,r,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!rb(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;kn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Le(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fs.has(this)?this.attached&&!fs.running(this)&&fs.start(this):(this.draw(),Gb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=M2(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Zd(n,r),t.controller.draw(),r&&eh(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return vl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=GF.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ni(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,r);gl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),fs.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),mb(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete lu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,a)=>{n.addEventListener(this,i,a),t[i]=a},r=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};Le(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Le(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Le(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,a,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Gu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=i(n,t),l=s?t:i(t,n);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,a=n,l=this._getActiveElements(t,r,s,a),c=e3(t),u=K6(t,this._lastEvent,s,c);s&&(this._lastEvent=null,We(i.onHover,[t,l,this],this),c&&We(i.onClick,[t,l,this],this));const d=!Gu(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},ce(Us,"defaults",at),ce(Us,"instances",lu),ce(Us,"overrides",mi),ce(Us,"registry",es),ce(Us,"version",q6),ce(Us,"getChart",Yb),Us);function Qb(){return Le(ka.instances,e=>e._plugins.invalidate())}function X6(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:a,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/a,sn(s-n));if(e.beginPath(),e.arc(r,i,a-u/2,s+h/2,n-h/2),l>0){const f=Math.min(u/l,sn(s-n));e.arc(r,i,l+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,a*sn(s-n));if(d==="round")e.arc(r,i,f,n-Fe/2,s+Fe/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Fe/2)+r,g=-m*Math.sin(n+Fe/2)+i,v=m*Math.cos(s+Fe/2)+r,w=m*Math.sin(s+Fe/2)+i;e.lineTo(p,g),e.lineTo(v,w)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function J6(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:a,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,a,l,s-u,n+u),c>r?(u=r/c,e.arc(i,a,c,n+u,s-u,!0)):e.arc(i,a,r,n+yt,s-yt),e.closePath(),e.clip()}function Z6(e){return Px(e,["outerStart","outerEnd","innerStart","innerEnd"])}function e$(e,t,n,s){const r=Z6(e.options.borderRadius),i=(n-t)/2,a=Math.min(i,s*t/2),l=c=>{const u=(n-Math.min(i,c))*s/2;return Mt(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Mt(r.innerStart,0,a),innerEnd:Mt(r.innerEnd,0,a)}}function Di(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Zu(e,t,n,s,r,i){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let m=0;const p=r-c;if(s){const B=d>0?d-s:0,W=h>0?h-s:0,O=(B+W)/2,T=O!==0?p*O/(O+s):p;m=(p-T)/2}const g=Math.max(.001,p*h-n/Fe)/h,v=(p-g)/2,w=c+v+m,b=r-v-m,{outerStart:x,outerEnd:N,innerStart:S,innerEnd:k}=e$(t,f,h,b-w),j=h-x,C=h-N,D=w+x/j,A=b-N/C,F=f+S,$=f+k,L=w+S/F,P=b-k/$;if(e.beginPath(),i){const B=(D+A)/2;if(e.arc(a,l,h,D,B),e.arc(a,l,h,B,A),N>0){const _=Di(C,A,a,l);e.arc(_.x,_.y,N,A,b+yt)}const W=Di($,b,a,l);if(e.lineTo(W.x,W.y),k>0){const _=Di($,P,a,l);e.arc(_.x,_.y,k,b+yt,P+Math.PI)}const O=(b-k/f+(w+S/f))/2;if(e.arc(a,l,f,b-k/f,O,!0),e.arc(a,l,f,O,w+S/f,!0),S>0){const _=Di(F,L,a,l);e.arc(_.x,_.y,S,L+Math.PI,w-yt)}const T=Di(j,w,a,l);if(e.lineTo(T.x,T.y),x>0){const _=Di(j,D,a,l);e.arc(_.x,_.y,x,w-yt,D)}}else{e.moveTo(a,l);const B=Math.cos(D)*h+a,W=Math.sin(D)*h+l;e.lineTo(B,W);const O=Math.cos(A)*h+a,T=Math.sin(A)*h+l;e.lineTo(O,T)}e.closePath()}function t$(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l}=t;let c=t.endAngle;if(i){Zu(e,t,n,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=a+(l%Je||Je))}return Zu(e,t,n,s,c,r),e.fill(),c}function n$(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let g=t.endAngle;if(i){Zu(e,t,n,s,g,r);for(let v=0;v<i;++v)e.stroke();isNaN(l)||(g=a+(l%Je||Je))}p&&J6(e,t,g),c.selfJoin&&g-a>=Fe&&m===0&&d!=="miter"&&X6(e,t,g),i||(Zu(e,t,n,s,g,r),e.stroke())}class vo extends Ls{constructor(n){super();ce(this,"circumference");ce(this,"endAngle");ce(this,"fullCircles");ce(this,"innerRadius");ce(this,"outerRadius");ce(this,"pixelMargin");ce(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:a,distance:l}=p2(i,{x:n,y:s}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,p=be(f,u-c),g=yl(a,c,u)&&c!==u,v=p>=Je||g,w=Ns(l,d+m,h+m);return v&&w}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+a)/2,f=(l+c+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,a=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Je?Math.floor(r/Je):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Fe,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,t$(n,this,d,a,l),n$(n,this,d,a,l),n.restore()}}ce(vo,"id","arc"),ce(vo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ce(vo,"defaultRoutes",{backgroundColor:"backgroundColor"}),ce(vo,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function q2(e,t,n=t){e.lineCap=be(n.borderCapStyle,t.borderCapStyle),e.setLineDash(be(n.borderDash,t.borderDash)),e.lineDashOffset=be(n.borderDashOffset,t.borderDashOffset),e.lineJoin=be(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=be(n.borderWidth,t.borderWidth),e.strokeStyle=be(n.borderColor,t.borderColor)}function s$(e,t,n){e.lineTo(n.x,n.y)}function r$(e){return e.stepped?E3:e.tension||e.cubicInterpolationMode==="monotone"?D3:s$}function G2(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:a,end:l}=t,c=Math.max(r,a),u=Math.min(i,l),d=r<a&&i<a||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function i$(e,t,n,s){const{points:r,options:i}=t,{count:a,start:l,loop:c,ilen:u}=G2(r,n,s),d=r$(i);let{move:h=!0,reverse:f}=s||{},m,p,g;for(m=0;m<=u;++m)p=r[(l+(f?u-m:m))%a],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,g,p,f,i.stepped),g=p);return c&&(p=r[(l+(f?u:0))%a],d(e,g,p,f,i.stepped)),!!c}function a$(e,t,n,s){const r=t.points,{count:i,start:a,ilen:l}=G2(r,n,s),{move:c=!0,reverse:u}=s||{};let d=0,h=0,f,m,p,g,v,w;const b=N=>(a+(u?l-N:N))%i,x=()=>{g!==v&&(e.lineTo(d,v),e.lineTo(d,g),e.lineTo(d,w))};for(c&&(m=r[b(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[b(f)],m.skip)continue;const N=m.x,S=m.y,k=N|0;k===p?(S<g?g=S:S>v&&(v=S),d=(h*d+N)/++h):(x(),e.lineTo(N,S),p=k,h=0,g=v=S),w=S}x()}function Sp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?a$:i$}function o$(e){return e.stepped?aF:e.tension||e.cubicInterpolationMode==="monotone"?oF:Hr}function l$(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),q2(e,t.options),e.stroke(r)}function c$(e,t,n,s){const{segments:r,options:i}=t,a=Sp(t);for(const l of r)q2(e,i,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const u$=typeof Path2D=="function";function d$(e,t,n,s){u$&&!t.options.segment?l$(e,t,n,s):c$(e,t,n,s)}class rr extends Ls{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;J3(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fF(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,a=A2(this,{property:n,start:r,end:r});if(!a.length)return;const l=[],c=o$(s);let u,d;for(u=0,d=a.length;u<d;++u){const{start:h,end:f}=a[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const g=Math.abs((r-m[n])/(p[n]-m[n])),v=c(m,p,g,s.stepped);v[n]=t[n],l.push(v)}return l.length===1?l[0]:l}pathSegment(t,n,s){return Sp(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=Sp(this);let a=this._loop;n=n||0,s=s||this.points.length-n;for(const l of r)a&=i(t,this,l,{start:n,end:n+s-1});return!!a}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),d$(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(rr,"id","line"),ce(rr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(rr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Kb(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class cu extends Ls{constructor(n){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(n-a,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return Kb(this,n,"x",s)}inYRange(n,s){return Kb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!vl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,wp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ce(cu,"id","point"),ce(cu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(cu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Y2(e,t){const{x:n,y:s,base:r,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=a/2,l=Math.min(n,r),c=Math.max(n,r),u=s-h,d=s+h):(h=i/2,l=n-h,c=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function ir(e,t,n,s){return e?0:Mt(t,n,s)}function h$(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=j2(s);return{t:ir(r.top,i.top,0,n),r:ir(r.right,i.right,0,t),b:ir(r.bottom,i.bottom,0,n),l:ir(r.left,i.left,0,t)}}function f$(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=ea(r),a=Math.min(t,n),l=e.borderSkipped,c=s||ke(r);return{topLeft:ir(!c||l.top||l.left,i.topLeft,0,a),topRight:ir(!c||l.top||l.right,i.topRight,0,a),bottomLeft:ir(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:ir(!c||l.bottom||l.right,i.bottomRight,0,a)}}function m$(e){const t=Y2(e),n=t.right-t.left,s=t.bottom-t.top,r=h$(e,n/2,s/2),i=f$(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function vf(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&Y2(e,s);return l&&(r||Ns(t,l.left,l.right))&&(i||Ns(n,l.top,l.bottom))}function p$(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function g$(e,t){e.rect(t.x,t.y,t.w,t.h)}function bf(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+a,radius:e.radius}}class uu extends Ls{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:a}=m$(this),l=p$(a.radius)?Ku:g$;t.save(),(a.w!==i.w||a.h!==i.h)&&(t.beginPath(),l(t,bf(a,n,i)),t.clip(),l(t,bf(i,-n,a)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,bf(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return vf(this,t,n,s)}inXRange(t,n){return vf(this,t,null,n)}inYRange(t,n){return vf(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ce(uu,"id","bar"),ce(uu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ce(uu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function x$(e,t,n){const s=e.segments,r=e.points,i=t.points,a=[];for(const l of s){let{start:c,end:u}=l;u=sh(c,u,r);const d=Cp(n,r[c],r[u],l.loop);if(!t.segments){a.push({source:l,target:d,start:r[c],end:r[u]});continue}const h=A2(t,d);for(const f of h){const m=Cp(n,i[f.start],i[f.end],f.loop),p=_2(l,r,m);for(const g of p)a.push({source:g,target:f,start:{[n]:Xb(d,m,"start",Math.max)},end:{[n]:Xb(d,m,"end",Math.min)}})}}return a}function Cp(e,t,n,s){if(s)return;let r=t[e],i=n[e];return e==="angle"&&(r=sn(r),i=sn(i)),{property:e,start:r,end:i}}function y$(e,t){const{x:n=null,y:s=null}=e||{},r=t.points,i=[];return t.segments.forEach(({start:a,end:l})=>{l=sh(a,l,r);const c=r[a],u=r[l];s!==null?(i.push({x:c.x,y:s}),i.push({x:u.x,y:s})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function sh(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Xb(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function Q2(e,t){let n=[],s=!1;return ut(e)?(s=!0,n=e):n=y$(e,t),n.length?new rr({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function Jb(e){return e&&e.fill!==!1}function v$(e,t,n){let r=e[t].fill;const i=[t];let a;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Lt(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function b$(e,t,n){const s=S$(e);if(ke(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return Lt(r)&&Math.floor(r)===r?w$(s[0],t,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function w$(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function j$(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:ke(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function N$(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:ke(e)?s=e.value:s=t.getBaseValue(),s}function S$(e){const t=e.options,n=t.fill;let s=be(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function C$(e){const{scale:t,index:n,line:s}=e,r=[],i=s.segments,a=s.points,l=k$(t,n);l.push(Q2({x:null,y:t.bottom},s));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)E$(r,a[d],l)}return new rr({points:r,options:{}})}function k$(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function E$(e,t,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:a,last:l,point:c}=D$(i,t,"x");if(!(!c||a&&l)){if(a)s.unshift(c);else if(e.push(c),!l)break}}e.push(...s)}function D$(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const r=s[n],i=e.segments,a=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=a[d.start][n],f=a[d.end][n];if(Ns(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:s}}class K2{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:r,y:i,radius:a}=this;return n=n||{start:0,end:Je},t.arc(r,i,a,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:r}=this,i=t.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function T$(e){const{chart:t,fill:n,line:s}=e;if(Lt(n))return P$(t,n);if(n==="stack")return C$(e);if(n==="shape")return!0;const r=_$(e);return r instanceof K2?r:Q2(r,s)}function P$(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function _$(e){return(e.scale||{}).getPointPositionForValue?M$(e):A$(e)}function A$(e){const{scale:t={},fill:n}=e,s=j$(n,t);if(Lt(s)){const r=t.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function M$(e){const{scale:t,fill:n}=e,s=t.options,r=t.getLabels().length,i=s.reverse?t.max:t.min,a=N$(n,t,i),l=[];if(s.grid.circular){const c=t.getPointPositionForValue(0,i);return new K2({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,a));return l}function wf(e,t,n){const s=T$(t),{chart:r,index:i,line:a,scale:l,axis:c}=t,u=a.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=r.getDatasetMeta(i),g=M2(r,p);s&&a.points.length&&(Zd(e,n),R$(e,{line:a,target:s,above:f,below:m,area:n,scale:l,axis:c,clip:g}),eh(e))}function R$(e,t){const{line:n,target:s,above:r,below:i,area:a,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==r&&(u==="x"?(Zb(e,s,a.top),jf(e,{line:n,target:s,color:r,scale:l,property:u,clip:c}),e.restore(),e.save(),Zb(e,s,a.bottom)):u==="y"&&(ew(e,s,a.left),jf(e,{line:n,target:s,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),ew(e,s,a.right),d=r)),jf(e,{line:n,target:s,color:d,scale:l,property:u,clip:c}),e.restore()}function Zb(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[sh(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function ew(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[sh(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function jf(e,t){const{line:n,target:s,property:r,color:i,scale:a,clip:l}=t,c=x$(n,s,r);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=s!==!0;e.save(),e.fillStyle=m,I$(e,a,l,p&&Cp(r,h,f)),e.beginPath();const g=!!n.pathSegment(e,u);let v;if(p){g?e.closePath():tw(e,s,f,r);const w=!!s.pathSegment(e,d,{move:g,reverse:!0});v=g&&w,v||tw(e,s,h,r)}e.closePath(),e.fill(v?"evenodd":"nonzero"),e.restore()}}function I$(e,t,n,s){const r=t.chart.chartArea,{property:i,start:a,end:l}=s||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=a,u=r.top,d=l,h=r.bottom):(c=r.left,u=a,d=r.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function tw(e,t,n,s){const r=t.interpolate(n,s);r&&e.lineTo(r.x,r.y)}var Lx={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,r=[];let i,a,l,c;for(a=0;a<s;++a)i=e.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof rr&&(c={visible:e.isDatasetVisible(a),index:a,fill:b$(l,a,s),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(a=0;a<s;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=v$(r,a,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),s&&l.fill&&wf(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;Jb(i)&&wf(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!Jb(s)||n.drawTime!=="beforeDatasetDraw"||wf(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const nw=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},O$=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class sw extends Ls{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=We(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Rt(s.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=nw(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,g)=>{const v=s+n/2+i.measureText(p.text).width;(g===0||u[u.length-1]+v+2*l>a)&&(h+=d,u[u.length-(g>0?0:1)]=0,m+=d,f++),c[g]={left:0,top:m,row:f,width:v,height:r},u[u.length-1]+=v+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let h=l,f=0,m=0,p=0,g=0;return this.legendItems.forEach((v,w)=>{const{itemWidth:b,itemHeight:x}=L$(s,n,i,v,r);w>0&&m+x+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,g++,f=m=0),c[w]={left:p,top:m,col:g,width:b,height:x},f=Math.max(f,b),m+=x+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,a=ta(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=_t(s,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=_t(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+r}else{let l=0,c=_t(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=_t(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Zd(t,this),this._draw(),eh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:a}=t,l=at.color,c=ta(t.rtl,this.left,this.width),u=Rt(a.font),{padding:d}=a,h=u.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:v}=nw(a,h),w=function(k,j,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();const D=be(C.lineWidth,1);if(r.fillStyle=be(C.fillStyle,l),r.lineCap=be(C.lineCap,"butt"),r.lineDashOffset=be(C.lineDashOffset,0),r.lineJoin=be(C.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=be(C.strokeStyle,l),r.setLineDash(be(C.lineDash,[])),a.usePointStyle){const A={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:D},F=c.xPlus(k,p/2),$=j+f;w2(r,A,F,$,a.pointStyleWidth&&p)}else{const A=j+Math.max((h-g)/2,0),F=c.leftForLtr(k,p),$=ea(C.borderRadius);r.beginPath(),Object.values($).some(L=>L!==0)?Ku(r,{x:F,y:A,w:p,h:g,radius:$}):r.rect(F,A,p,g),r.fill(),D!==0&&r.stroke()}r.restore()},b=function(k,j,C){bl(r,C.text,k,j+v/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},x=this.isHorizontal(),N=this._computeTitleHeight();x?m={x:_t(i,this.left+d,this.right-s[0]),y:this.top+d+N,line:0}:m={x:this.left+d,y:_t(i,this.top+N+d,this.bottom-n[0].height),line:0},D2(this.ctx,t.textDirection);const S=v+d;this.legendItems.forEach((k,j)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const C=r.measureText(k.text).width,D=c.textAlign(k.textAlign||(k.textAlign=a.textAlign)),A=p+f+C;let F=m.x,$=m.y;c.setWidth(this.width),x?j>0&&F+A+d>this.right&&($=m.y+=S,m.line++,F=m.x=_t(i,this.left+d,this.right-s[m.line])):j>0&&$+S>this.bottom&&(F=m.x=F+n[m.line].width+d,m.line++,$=m.y=_t(i,this.top+N+d,this.bottom-n[m.line].height));const L=c.x(F);if(w(L,$,k),F=m3(D,F+p+f,x?F+A:this.right,t.rtl),b(c.x(F),$,k),x)m.x+=A+d;else if(typeof k.text!="string"){const P=u.lineHeight;m.y+=X2(k,P)+d}else m.y+=S}),T2(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Rt(n.font),r=An(n.padding);if(!n.display)return;const i=ta(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=s.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=_t(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);d=u+_t(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=_t(l,h,h+f);a.textAlign=i.textAlign(Ex(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=s.string,bl(a,n.text,m,d,s)}_computeTitleHeight(){const t=this.options.title,n=Rt(t.font),s=An(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(Ns(t,this.left,this.right)&&Ns(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Ns(t,r.left,r.left+r.width)&&Ns(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!B$(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=O$(r,s);r&&!i&&We(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&We(n.onHover,[t,s,this],this)}else s&&We(n.onClick,[t,s,this],this)}}function L$(e,t,n,s,r){const i=F$(s,e,t,n),a=$$(r,s,t.lineHeight);return{itemWidth:i,itemHeight:a}}function F$(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,a)=>i.length>a.length?i:a)),t+n.size/2+s.measureText(r).width}function $$(e,t,n){let s=e;return typeof t.text!="string"&&(s=X2(t,n)),s}function X2(e,t){const n=e.text?e.text.length:0;return t*n}function B$(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Fx={id:"legend",_element:sw,start(e,t,n){const s=e.legend=new sw({ctx:e.ctx,options:n,chart:e});kn.configure(e,s,n),kn.addBox(e,s)},stop(e){kn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;kn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=An(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class J2 extends Ls{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=ut(s.text)?s.text.length:1;this._padding=An(s.padding);const i=r*Rt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:a}=this,l=a.align;let c=0,u,d,h;return this.isHorizontal()?(d=_t(l,s,i),h=n+t,u=i-s):(a.position==="left"?(d=s+t,h=_t(l,r,n),c=Fe*-.5):(d=i-t,h=_t(l,n,r),c=Fe*.5),u=r-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Rt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);bl(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:Ex(n.align),textBaseline:"middle",translation:[a,l]})}}function z$(e,t){const n=new J2({ctx:e.ctx,options:t,chart:e});kn.configure(e,n,t),kn.addBox(e,n),e.titleBlock=n}var Z2={id:"title",_element:J2,start(e,t,n){z$(e,n)},stop(e){const t=e.titleBlock;kn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;kn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bo={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=e.length;i<a;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=vp(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function Jn(e,t){return t&&(ut(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ms(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function V$(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:a,value:l}=i.getLabelAndValue(r);return{chart:e,label:a,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function rw(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:a,boxHeight:l}=t,c=Rt(t.bodyFont),u=Rt(t.titleFont),d=Rt(t.footerFont),h=i.length,f=r.length,m=s.length,p=An(t.padding);let g=p.height,v=0,w=s.reduce((N,S)=>N+S.before.length+S.lines.length+S.after.length,0);if(w+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),w){const N=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=m*N+(w-m)*c.lineHeight+(w-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let b=0;const x=function(N){v=Math.max(v,n.measureText(N).width+b)};return n.save(),n.font=u.string,Le(e.title,x),n.font=c.string,Le(e.beforeBody.concat(e.afterBody),x),b=t.displayColors?a+2+t.boxPadding:0,Le(s,N=>{Le(N.before,x),Le(N.lines,x),Le(N.after,x)}),b=0,n.font=d.string,Le(e.footer,x),n.restore(),v+=p.width,{width:v,height:g}}function U$(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function W$(e,t,n,s){const{x:r,width:i}=s,a=n.caretSize+n.caretPadding;if(e==="left"&&r+i+a>t.width||e==="right"&&r-i-a<0)return!0}function H$(e,t,n,s){const{x:r,width:i}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=a-i/2&&(u="right"),W$(u,e,t,n)&&(u="center"),u}function iw(e,t,n){const s=n.yAlign||t.yAlign||U$(e,n);return{xAlign:n.xAlign||t.xAlign||H$(e,t,n,s),yAlign:s}}function q$(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function G$(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function aw(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=ea(a);let p=q$(t,l);const g=G$(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Mt(p,0,s.width-t.width),y:Mt(g,0,s.height-t.height)}}function Pc(e,t,n){const s=An(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function ow(e){return Jn([],ms(e))}function Y$(e,t,n){return Ni(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function lw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const ek={beforeTitle:ds,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ds,beforeBody:ds,beforeLabel:ds,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Me(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ds,afterBody:ds,beforeFooter:ds,footer:ds,afterFooter:ds};function qt(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?ek[t].call(n,s):r}class kp extends Ls{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new R2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Y$(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=qt(s,"beforeTitle",this,t),i=qt(s,"title",this,t),a=qt(s,"afterTitle",this,t);let l=[];return l=Jn(l,ms(r)),l=Jn(l,ms(i)),l=Jn(l,ms(a)),l}getBeforeBody(t,n){return ow(qt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Le(t,i=>{const a={before:[],lines:[],after:[]},l=lw(s,i);Jn(a.before,ms(qt(l,"beforeLabel",this,i))),Jn(a.lines,qt(l,"label",this,i)),Jn(a.after,ms(qt(l,"afterLabel",this,i))),r.push(a)}),r}getAfterBody(t,n){return ow(qt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=qt(s,"beforeFooter",this,t),i=qt(s,"footer",this,t),a=qt(s,"afterFooter",this,t);let l=[];return l=Jn(l,ms(r)),l=Jn(l,ms(i)),l=Jn(l,ms(a)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(V$(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,s))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,s))),Le(l,d=>{const h=lw(t.callbacks,d);r.push(qt(h,"labelColor",this,d)),i.push(qt(h,"labelPointStyle",this,d)),a.push(qt(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=bo[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=rw(this,s),u=Object.assign({},l,c),d=iw(this.chart,s,u),h=aw(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=ea(l),{x:f,y:m}=t,{width:p,height:g}=n;let v,w,b,x,N,S;return i==="center"?(N=m+g/2,r==="left"?(v=f,w=v-a,x=N+a,S=N-a):(v=f+p,w=v+a,x=N-a,S=N+a),b=v):(r==="left"?w=f+Math.max(c,d)+a:r==="right"?w=f+p-Math.max(u,h)-a:w=this.caretX,i==="top"?(x=m,N=x-a,v=w-a,b=w+a):(x=m+g,N=x+a,v=w+a,b=w-a),S=x),{x1:v,x2:w,x3:b,y1:x,y2:N,y3:S}}drawTitle(t,n,s){const r=this.title,i=r.length;let a,l,c;if(i){const u=ta(s.rtl,this.x,this.width);for(t.x=Pc(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",a=Rt(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=a.string,c=0;c<i;++c)n.fillText(r[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=Rt(i.bodyFont),h=Pc(this,"left",i),f=r.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(f,u)+u/2,w=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,wp(t,g,v,w),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,wp(t,g,v,w)}else{t.lineWidth=ke(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=r.leftForLtr(f,u),v=r.leftForLtr(r.xPlus(f,1),u-2),w=ea(a.borderRadius);Object.values(w).some(b=>b!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Ku(t,{x:g,y:p,w:u,h:c,radius:w}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Ku(t,{x:v,y:p+1,w:u-2,h:c-2,radius:w}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,p,u,c),t.strokeRect(g,p,u,c),t.fillStyle=a.backgroundColor,t.fillRect(v,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=Rt(s.bodyFont);let f=h.lineHeight,m=0;const p=ta(s.rtl,this.x,this.width),g=function(C){n.fillText(C,p.x(t.x+m),t.y+f/2),t.y+=f+i},v=p.textAlign(a);let w,b,x,N,S,k,j;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,t.x=Pc(this,v,s),n.fillStyle=s.bodyColor,Le(this.beforeBody,g),m=l&&v!=="right"?a==="center"?u/2+d:u+2+d:0,N=0,k=r.length;N<k;++N){for(w=r[N],b=this.labelTextColors[N],n.fillStyle=b,Le(w.before,g),x=w.lines,l&&x.length&&(this._drawColorBox(n,t,N,p,s),f=Math.max(h.lineHeight,c)),S=0,j=x.length;S<j;++S)g(x[S]),f=h.lineHeight;Le(w.after,g)}m=0,f=h.lineHeight,Le(this.afterBody,g),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let a,l;if(i){const c=ta(s.rtl,this.x,this.width);for(t.x=Pc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",a=Rt(s.footerFont),n.fillStyle=s.footerColor,n.font=a.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=ea(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),a==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),a==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const a=bo[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=rw(this,t),c=Object.assign({},a,this._size),u=iw(n,t,c),d=aw(t,c,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=An(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),D2(t,n.textDirection),i.y+=a.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),T2(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Gu(s,r),a=this._positionChanged(r,n);(i||a)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(t,i,n,s),l=this._positionChanged(a,t),c=n||!Gu(a,i)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,a=bo[i.position].call(this,t,n);return a!==!1&&(s!==a.x||r!==a.y)}}ce(kp,"positioners",bo);var $x={id:"tooltip",_element:kp,positioners:bo,afterInit(e,t,n){n&&(e.tooltip=new kp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ek},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Q$=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function K$(e,t,n,s){const r=e.indexOf(t);if(r===-1)return Q$(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const X$=(e,t)=>e===null?null:Mt(Math.round(e),0,t);function cw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ed extends Ca{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Me(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:K$(s,t,be(n,t),this._addedLabels),X$(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=t;a<=n;a++)r.push({value:a});return r}getLabelForValue(t){return cw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ce(ed,"id","category"),ce(ed,"defaults",{ticks:{callback:cw}});function J$(e,t){const n=[],{bounds:r,step:i,min:a,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:g,max:v}=t,w=!Me(a),b=!Me(l),x=!Me(u),N=(v-g)/(h+1);let S=ab((v-g)/p/m)*m,k,j,C,D;if(S<1e-14&&!w&&!b)return[{value:g},{value:v}];D=Math.ceil(v/S)-Math.floor(g/S),D>p&&(S=ab(D*S/p/m)*m),Me(c)||(k=Math.pow(10,c),S=Math.ceil(S*k)/k),r==="ticks"?(j=Math.floor(g/S)*S,C=Math.ceil(v/S)*S):(j=g,C=v),w&&b&&i&&i3((l-a)/i,S/1e3)?(D=Math.round(Math.min((l-a)/S,d)),S=(l-a)/D,j=a,C=l):x?(j=w?a:j,C=b?l:C,D=u-1,S=(C-j)/D):(D=(C-j)/S,Oo(D,Math.round(D),S/1e3)?D=Math.round(D):D=Math.ceil(D));const A=Math.max(ob(S),ob(j));k=Math.pow(10,Me(c)?A:c),j=Math.round(j*k)/k,C=Math.round(C*k)/k;let F=0;for(w&&(f&&j!==a?(n.push({value:a}),j<a&&F++,Oo(Math.round((j+F*S)*k)/k,a,uw(a,N,e))&&F++):j<a&&F++);F<D;++F){const $=Math.round((j+F*S)*k)/k;if(b&&$>l)break;n.push({value:$})}return b&&f&&C!==l?n.length&&Oo(n[n.length-1].value,l,uw(l,N,e))?n[n.length-1].value=l:n.push({value:l}):(!b||C===l)&&n.push({value:C}),n}function uw(e,t,{horizontal:n,minRotation:s}){const r=js(s),i=(n?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+e).length;return Math.min(t/i,a)}class Z$ extends Ca{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Me(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const a=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=as(r),u=as(i);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||a(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=J$(r,i);return t.bounds==="ticks"&&a3(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Tx(t,this.chart.options.locale,this.options.ticks.format)}}class td extends Z${determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Lt(t)?t:0,this.max=Lt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=js(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ce(td,"id","linear"),ce(td,"defaults",{ticks:{callback:b2.formatters.numeric}});const rh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(rh);function dw(e,t){return e-t}function hw(e,t){if(Me(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let a=t;return typeof s=="function"&&(a=s(a)),Lt(a)||(a=typeof s=="string"?n.parse(a,s):n.parse(a)),a===null?null:(r&&(a=r==="week"&&(xl(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,r)),+a)}function fw(e,t,n,s){const r=Yt.length;for(let i=Yt.indexOf(e);i<r-1;++i){const a=rh[Yt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=s)return Yt[i]}return Yt[r-1]}function eB(e,t,n,s,r){for(let i=Yt.length-1;i>=Yt.indexOf(n);i--){const a=Yt[i];if(rh[a].common&&e._adapter.diff(r,s,a)>=t-1)return a}return Yt[n?Yt.indexOf(n):0]}function tB(e){for(let t=Yt.indexOf(e)+1,n=Yt.length;t<n;++t)if(rh[Yt[t]].common)return Yt[t]}function mw(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=kx(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function nB(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),a=t[t.length-1].value;let l,c;for(l=i;l<=a;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function pw(e,t,n){const s=[],r={},i=t.length;let a,l;for(a=0;a<i;++a)l=t[a],r[l]=a,s.push({value:l,major:!1});return i===0||!n?s:nB(e,s,r,n)}class nd extends Ca{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new VF._date(t.adapters.date);r.init(n),Io(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:hw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Lt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Lt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=this.max,l=d3(r,i,a);return this._unit=n.unit||(s.autoSkip?fw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):eB(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:tB(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),pw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Mt(n,0,a),s=Mt(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,a=i.unit||fw(i.minUnit,n,s,this._getLabelCapacity(n)),l=be(r.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=xl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(s,n,a)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+a);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+t.add(f,l,a),m++)mw(d,f,p);return(f===s||r.bounds==="ticks"||m===1)&&mw(d,f,p),Object.keys(d).sort(dw).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,a=n||r[i];return this._adapter.format(t,a)}_tickFormatFunction(t,n,s,r){const i=this.options,a=i.ticks.callback;if(a)return We(a,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=s[n],m=u&&h&&f&&f.major;return this._adapter.format(t,r||(m?h:d))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=js(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*a,h:s*a+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,pw(this,[t],this._majorUnit),r),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(hw(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return x2(t.sort(dw))}}ce(nd,"id","time"),ce(nd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function _c(e,t,n){let s=0,r=e.length-1,i,a,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Zr(e,"pos",t)),{pos:i,time:l}=e[s],{pos:a,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Zr(e,"time",t)),{time:i,pos:l}=e[s],{time:a,pos:c}=e[r]);const u=a-i;return u?l+(c-l)*(t-i)/u:l}class gw extends nd{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=_c(n,this.min),this._tableRange=_c(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(a=0,l=r.length;a<l;++a)d=r[a+1],c=r[a-1],u=r[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(_c(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return _c(this._table,s*this._tableRange+this._minPos,!0)}}ce(gw,"id","timeseries"),ce(gw,"defaults",nd.defaults);const tk="label";function xw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function sB(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function nk(e,t){e.labels=t}function sk(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tk;const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(a=>a[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function rB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tk;const n={labels:[],datasets:[]};return nk(n,e.labels),sk(n,e.datasets,t),n}function iB(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=y.useRef(null),p=y.useRef(null),g=()=>{m.current&&(p.current=new ka(m.current,{type:a,data:rB(l,i),options:c&&{...c},plugins:u}),xw(t,p.current))},v=()=>{xw(t,null),p.current&&(p.current.destroy(),p.current=null)};return y.useEffect(()=>{!r&&p.current&&c&&sB(p.current,c)},[r,c]),y.useEffect(()=>{!r&&p.current&&nk(p.current.config.data,l.labels)},[r,l.labels]),y.useEffect(()=>{!r&&p.current&&l.datasets&&sk(p.current.config.data,l.datasets,i)},[r,l.datasets]),y.useEffect(()=>{p.current&&(r?(v(),setTimeout(g)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),y.useEffect(()=>{p.current&&(v(),setTimeout(g))},[a]),y.useEffect(()=>(g(),()=>v()),[]),ne.createElement("canvas",{ref:m,role:"img",height:n,width:s,...f},d)}const aB=y.forwardRef(iB);function Bx(e,t){return ka.register(t),y.forwardRef((n,s)=>ne.createElement(aB,{...n,ref:s,type:e}))}const oB=Bx("line",au),lB=Bx("bar",iu),cB=Bx("doughnut",xo);ka.register(ed,td,uu,Z2,$x,Fx,Lx);function rk({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(lB,{data:e,options:r})})}ka.register(ed,td,cu,rr,Z2,$x,Fx,Lx);function uB({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(oB,{data:e,options:r})})}ka.register(vo,$x,Fx,Lx);function dB({data:e,options:t,height:n=250}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const a=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${a}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(cB,{data:e,options:r})})}const hB=y.memo(uB),fB=y.memo(rk),mB=y.memo(dB);function Nf(){const{user:e,isAuthenticated:t}=qe(),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState(0),[c,u]=y.useState(0),[d,h]=y.useState(!0),[f,m]=y.useState([]),[p,g]=y.useState([]),[v,w]=y.useState(null);y.useEffect(()=>{(async()=>{if(!t||!e){console.log("⏸️ Skipping data fetch - user not authenticated"),h(!1);return}try{console.log("🔄 AdminDashboard: Starting data fetch..."),w(null);const[C,D,A,F,$]=await Promise.all([$l().catch(_=>(console.error("Leads error:",_),[])),Xd().catch(_=>(console.error("Jobs error:",_),[])),wx().catch(_=>(console.error("Equipment error:",_),[])),Bl().catch(_=>(console.error("Operators error:",_),[])),Jd().catch(_=>(console.error("Deals error:",_),[]))]),L=_=>Array.isArray(_)?_:_&&typeof _=="object"&&_.data&&Array.isArray(_.data)||_&&typeof _=="object"&&_.success&&Array.isArray(_.data)?_.data:[],P=L(C),B=L(D),W=L(A),O=L(F),T=L($);s(P),i(B),l(W.length),u(O.length),m(W),g(T)}catch(C){console.error("❌ Error fetching dashboard data:",C),w(`Failed to load dashboard data: ${(C==null?void 0:C.message)||C}`)}finally{h(!1)}})()},[t,e]);const b=y.useMemo(()=>{try{if(Array.isArray(p)&&p.length>0)return p.filter(j=>j&&j.stage==="won").reduce((j,C)=>j+(C.value||0),0)}catch(j){console.error("Error calculating revenue:",j)}return 0},[p]),x=y.useMemo(()=>Array.isArray(r)?r.filter(j=>j.status==="in_progress"||j.status==="scheduled").length/(a||1)*100:0,[r,a]),N=y.useMemo(()=>({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[15e4,2e5,18e4,22e4,25e4,b>0?b:3e5],backgroundColor:"rgba(56, 81, 159, 0.1)",borderColor:"#38519F",pointBackgroundColor:"#FFCC3F",pointBorderColor:"#38519F",pointHoverBackgroundColor:"#38519F",pointHoverBorderColor:"#FFCC3F",borderWidth:3,tension:.4,fill:!0}]}),[b]),S=y.useMemo(()=>({labels:["Available","In Use","Maintenance"],datasets:[{data:[Array.isArray(f)?f.filter(j=>j.status==="available").length:0,Array.isArray(f)?f.filter(j=>j.status==="in_use").length:0,Array.isArray(f)?f.filter(j=>j.status==="maintenance").length:0],backgroundColor:["#22C55E","#38519F","#FFCC3F"],borderColor:["#16A34A","#38519F","#FFCC3F"],borderWidth:2,hoverBorderWidth:4}]}),[f]),k=y.useMemo(()=>({labels:["Scheduled","In Progress","Completed","Cancelled"],datasets:[{label:"Jobs by Status",data:[Array.isArray(r)?r.filter(j=>j.status==="scheduled").length:0,Array.isArray(r)?r.filter(j=>j.status==="in_progress").length:0,Array.isArray(r)?r.filter(j=>j.status==="completed").length:0,Array.isArray(r)?r.filter(j=>j.status==="cancelled").length:0],backgroundColor:["rgba(56, 81, 159, 0.8)","rgba(34, 197, 94, 0.8)","rgba(64, 64, 64, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#38519F","#22C55E","#404040","#EF4444"],borderWidth:2,borderRadius:8}]}),[r]);return d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-20 w-20 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 h-20 w-20 border-4 border-transparent border-t-brand-gold rounded-full animate-spin animate-reverse",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Dashboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fetching your data..."})]})]})}):v?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(ee,{variant:"bordered",className:"max-w-md bg-red-50 border-red-200",children:o.jsxs(se,{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(JA,{className:"w-8 h-8 text-red-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),o.jsx("p",{className:"text-red-600 mb-6",children:v}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20",children:o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin"]}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your business today."})]}),o.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Last updated"}),o.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleTimeString()})]})})]})}),o.jsxs("section",{className:"grid gap-6 auto-fit-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},role:"region","aria-label":"Key Performance Indicators",children:[o.jsx(Vt,{title:"Total Revenue",value:De(b),icon:o.jsx(Bd,{className:"h-5 w-5"}),variant:"primary",trend:{value:12.5,isPositive:!0},loading:d}),o.jsx(Vt,{title:"Equipment Fleet",value:a,subtitle:"Active units",icon:o.jsx(cn,{className:"h-5 w-5"}),variant:"success",trend:{value:8.2,isPositive:!0},loading:d}),o.jsx(Vt,{title:"Active Jobs",value:r.length,subtitle:"In progress",icon:o.jsx(vA,{className:"h-5 w-5"}),variant:"warning",trend:{value:3.1,isPositive:!1},loading:d}),o.jsx(Vt,{title:"Operators",value:c,subtitle:"Available staff",icon:o.jsx(qn,{className:"h-5 w-5"}),variant:"accent",trend:{value:5.7,isPositive:!0},loading:d})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",role:"region","aria-label":"Analytics Charts",children:[o.jsxs(ee,{variant:"glass",className:"col-span-1",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(HA,{className:"h-4 w-4 text-green-600"})}),o.jsx(me,{className:"text-lg",children:"Equipment Status"})]})}),o.jsx(se,{children:o.jsx("div",{className:"h-64",children:o.jsx(mB,{data:S,height:240})})})]}),o.jsxs(ee,{variant:"glass",className:"col-span-1",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(tp,{className:"h-4 w-4 text-blue-600"})}),o.jsx(me,{className:"text-lg",children:"Monthly Revenue"})]})}),o.jsx(se,{children:o.jsx("div",{className:"h-64",children:o.jsx(hB,{data:N,height:240})})})]}),o.jsxs(ee,{variant:"glass",className:"col-span-1",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(sS,{className:"h-4 w-4 text-purple-600"})}),o.jsx(me,{className:"text-lg",children:"Jobs by Status"})]})}),o.jsx(se,{children:o.jsx("div",{className:"h-64",children:o.jsx(fB,{data:k,height:240})})})]})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx(CL,{className:"h-full"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{variant:"gradient",className:"h-fit",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-blue/10 rounded-lg",children:o.jsx(cn,{className:"h-4 w-4 text-brand-blue"})}),o.jsx(me,{className:"text-lg",children:"Equipment Summary"})]})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Available Equipment:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(f)?f.filter(j=>j.status==="available").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"In Use:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Array.isArray(f)?f.filter(j=>j.status==="in_use").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Under Maintenance:"}),o.jsx("span",{className:"text-sm font-semibold text-orange-600",children:Array.isArray(f)?f.filter(j=>j.status==="maintenance").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Utilization Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[a>0?Math.round(x):0,"%"]})]})})]})})]}),o.jsxs(ee,{variant:"gradient",className:"h-fit",children:[o.jsx(fe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-gold/10 rounded-lg",children:o.jsx(tp,{className:"h-4 w-4 text-brand-gold"})}),o.jsx(me,{className:"text-lg",children:"Business Overview"})]})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:n.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Active Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Won Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.filter(j=>j.stage==="won").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[n.length>0?Math.round((Array.isArray(p)?p.length:0)/n.length*100):0,"%"]})]})})]})})]})]})]})]})})}const zx="-",pB=e=>{const t=xB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(zx);return l[0]===""&&l.length!==1&&l.shift(),ik(l,t)||gB(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},ik=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?ik(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(zx);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},yw=/^\[(.+)\]$/,gB=e=>{if(yw.test(e)){const t=yw.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},xB=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)Ep(n[r],s,r,t);return s},Ep=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:vw(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(yB(r)){Ep(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{Ep(a,vw(t,i),n,s)})})},vw=(e,t)=>{let n=e;return t.split(zx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},yB=e=>e.isThemeGetter,vB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},Dp="!",Tp=":",bB=Tp.length,wB=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let a=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let g=r[p];if(a===0&&l===0){if(g===Tp){i.push(r.slice(c,p)),c=p+bB;continue}if(g==="/"){u=p;continue}}g==="["?a++:g==="]"?a--:g==="("?l++:g===")"&&l--}const d=i.length===0?r:r.substring(c),h=jB(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const r=t+Tp,i=s;s=a=>a.startsWith(r)?i(a.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},jB=e=>e.endsWith(Dp)?e.substring(0,e.length-1):e.startsWith(Dp)?e.substring(1):e,NB=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(a=>{a[0]==="["||t[a]?(r.push(...i.sort(),a),i=[]):i.push(a)}),r.push(...i.sort()),r}},SB=e=>({cache:vB(e.cacheSize),parseClassName:wB(e),sortModifiers:NB(e),...pB(e)}),CB=/\s+/,kB=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,a=[],l=e.trim().split(CB);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let v=!!g,w=s(v?p.substring(0,g):p);if(!w){if(!v){c=d+(c.length>0?" "+c:c);continue}if(w=s(p),!w){c=d+(c.length>0?" "+c:c);continue}v=!1}const b=i(f).join(":"),x=m?b+Dp:b,N=x+w;if(a.includes(N))continue;a.push(N);const S=r(w,v);for(let k=0;k<S.length;++k){const j=S[k];a.push(x+j)}c=d+(c.length>0?" "+c:c)}return c};function EB(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=ak(t))&&(s&&(s+=" "),s+=n);return s}const ak=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=ak(e[s]))&&(n&&(n+=" "),n+=t);return n};function DB(e,...t){let n,s,r,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=SB(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=kB(c,n);return r(c,d),d}return function(){return i(EB.apply(null,arguments))}}const pt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ok=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,TB=/^\d+\/\d+$/,PB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_B=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,MB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ti=e=>TB.test(e),je=e=>!!e&&!Number.isNaN(Number(e)),Bs=e=>!!e&&Number.isInteger(Number(e)),Sf=e=>e.endsWith("%")&&je(e.slice(0,-1)),hs=e=>PB.test(e),IB=()=>!0,OB=e=>_B.test(e)&&!AB.test(e),ck=()=>!1,LB=e=>MB.test(e),FB=e=>RB.test(e),$B=e=>!ue(e)&&!de(e),BB=e=>Ea(e,hk,ck),ue=e=>ok.test(e),Lr=e=>Ea(e,fk,OB),Cf=e=>Ea(e,HB,je),bw=e=>Ea(e,uk,ck),zB=e=>Ea(e,dk,FB),Ac=e=>Ea(e,mk,LB),de=e=>lk.test(e),Ja=e=>Da(e,fk),VB=e=>Da(e,qB),ww=e=>Da(e,uk),UB=e=>Da(e,hk),WB=e=>Da(e,dk),Mc=e=>Da(e,mk,!0),Ea=(e,t,n)=>{const s=ok.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Da=(e,t,n=!1)=>{const s=lk.exec(e);return s?s[1]?t(s[1]):n:!1},uk=e=>e==="position"||e==="percentage",dk=e=>e==="image"||e==="url",hk=e=>e==="length"||e==="size"||e==="bg-size",fk=e=>e==="length",HB=e=>e==="number",qB=e=>e==="family-name",mk=e=>e==="shadow",GB=()=>{const e=pt("color"),t=pt("font"),n=pt("text"),s=pt("font-weight"),r=pt("tracking"),i=pt("leading"),a=pt("breakpoint"),l=pt("container"),c=pt("spacing"),u=pt("radius"),d=pt("shadow"),h=pt("inset-shadow"),f=pt("text-shadow"),m=pt("drop-shadow"),p=pt("blur"),g=pt("perspective"),v=pt("aspect"),w=pt("ease"),b=pt("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...N(),de,ue],k=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],C=()=>[de,ue,c],D=()=>[Ti,"full","auto",...C()],A=()=>[Bs,"none","subgrid",de,ue],F=()=>["auto",{span:["full",Bs,de,ue]},Bs,de,ue],$=()=>[Bs,"auto",de,ue],L=()=>["auto","min","max","fr",de,ue],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],W=()=>["auto",...C()],O=()=>[Ti,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],T=()=>[e,de,ue],_=()=>[...N(),ww,bw,{position:[de,ue]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",UB,BB,{size:[de,ue]}],Z=()=>[Sf,Ja,Lr],ae=()=>["","none","full",u,de,ue],le=()=>["",je,Ja,Lr],ge=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>[je,Sf,ww,bw],G=()=>["","none",p,de,ue],Y=()=>["none",je,de,ue],ie=()=>["none",je,de,ue],M=()=>[je,de,ue],E=()=>[Ti,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[hs],breakpoint:[hs],color:[IB],container:[hs],"drop-shadow":[hs],ease:["in","out","in-out"],font:[$B],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[hs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[hs],shadow:[hs],spacing:["px",je],text:[hs],"text-shadow":[hs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ti,ue,de,v]}],container:["container"],columns:[{columns:[je,ue,de,l]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Bs,"auto",de,ue]}],basis:[{basis:[Ti,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,Ti,"auto","initial","none",ue]}],grow:[{grow:["",je,de,ue]}],shrink:[{shrink:["",je,de,ue]}],order:[{order:[Bs,"first","last","none",de,ue]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:W()}],mx:[{mx:W()}],my:[{my:W()}],ms:[{ms:W()}],me:[{me:W()}],mt:[{mt:W()}],mr:[{mr:W()}],mb:[{mb:W()}],ml:[{ml:W()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:O()}],w:[{w:[l,"screen",...O()]}],"min-w":[{"min-w":[l,"screen","none",...O()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...O()]}],h:[{h:["screen","lh",...O()]}],"min-h":[{"min-h":["screen","lh","none",...O()]}],"max-h":[{"max-h":["screen","lh",...O()]}],"font-size":[{text:["base",n,Ja,Lr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,de,Cf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sf,ue]}],"font-family":[{font:[VB,ue,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,de,ue]}],"line-clamp":[{"line-clamp":[je,"none",de,Cf]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",de,ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",de,ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",de,Lr]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[je,"auto",de,ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de,ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de,ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bs,de,ue],radial:["",de,ue],conic:[Bs,de,ue]},WB,zB]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,de,ue]}],"outline-w":[{outline:["",je,Ja,Lr]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,Mc,Ac]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",h,Mc,Ac]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[je,Lr]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",f,Mc,Ac]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[je,de,ue]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":I()}],"mask-image-linear-to-pos":[{"mask-linear-to":I()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":I()}],"mask-image-t-to-pos":[{"mask-t-to":I()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":I()}],"mask-image-r-to-pos":[{"mask-r-to":I()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":I()}],"mask-image-b-to-pos":[{"mask-b-to":I()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":I()}],"mask-image-l-to-pos":[{"mask-l-to":I()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":I()}],"mask-image-x-to-pos":[{"mask-x-to":I()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":I()}],"mask-image-y-to-pos":[{"mask-y-to":I()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[de,ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":I()}],"mask-image-radial-to-pos":[{"mask-radial-to":I()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":I()}],"mask-image-conic-to-pos":[{"mask-conic-to":I()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",de,ue]}],filter:[{filter:["","none",de,ue]}],blur:[{blur:G()}],brightness:[{brightness:[je,de,ue]}],contrast:[{contrast:[je,de,ue]}],"drop-shadow":[{"drop-shadow":["","none",m,Mc,Ac]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",je,de,ue]}],"hue-rotate":[{"hue-rotate":[je,de,ue]}],invert:[{invert:["",je,de,ue]}],saturate:[{saturate:[je,de,ue]}],sepia:[{sepia:["",je,de,ue]}],"backdrop-filter":[{"backdrop-filter":["","none",de,ue]}],"backdrop-blur":[{"backdrop-blur":G()}],"backdrop-brightness":[{"backdrop-brightness":[je,de,ue]}],"backdrop-contrast":[{"backdrop-contrast":[je,de,ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,de,ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,de,ue]}],"backdrop-invert":[{"backdrop-invert":["",je,de,ue]}],"backdrop-opacity":[{"backdrop-opacity":[je,de,ue]}],"backdrop-saturate":[{"backdrop-saturate":[je,de,ue]}],"backdrop-sepia":[{"backdrop-sepia":["",je,de,ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",de,ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",de,ue]}],ease:[{ease:["linear","initial",w,de,ue]}],delay:[{delay:[je,de,ue]}],animate:[{animate:["none",b,de,ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,de,ue]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Y()}],"rotate-x":[{"rotate-x":Y()}],"rotate-y":[{"rotate-y":Y()}],"rotate-z":[{"rotate-z":Y()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:M()}],"skew-x":[{"skew-x":M()}],"skew-y":[{"skew-y":M()}],transform:[{transform:[de,ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:E()}],"translate-x":[{"translate-x":E()}],"translate-y":[{"translate-y":E()}],"translate-z":[{"translate-z":E()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de,ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de,ue]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[je,Ja,Lr,Cf]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},YB=DB(GB);function QB(...e){return YB(s2(e))}function Vl({status:e,className:t}){const n=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("span",{className:QB("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}async function KB(e,t){const s=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"PATCH",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update quotation");return s.json()}async function XB(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotation by ID");return n.json()}async function JB(e){const n=await fetch("http://103.224.243.242:3001/api/quotations",{method:"POST",headers:{...tt(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create quotation");return n.json()}async function ZB(){const t=await fetch("http://103.224.243.242:3001/api/quotations",{method:"GET",headers:tt(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quotations");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function sd(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations?leadId=${encodeURIComponent(e)}`,{method:"GET",headers:tt(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotations");return await n.json()}const ez=Sa("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function tz({stages:e,height:t=250}){const n=Math.max(...e.map(r=>r.value)),s=e.reduce((r,i)=>r+i.value,0);return o.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((r,i)=>{const a=n===0?40:Math.max(40,Math.min(100,r.value/n*100)),l=s===0?0:Math.round(r.value/s*100),c=i===0?"first":i===e.length-1?"last":"middle";return o.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${a}%`},children:[o.jsx("div",{className:ez({position:c}),style:{backgroundColor:r.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:o.jsx("span",{className:"text-white text-xs font-medium",children:r.value})}),o.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[o.jsx("span",{className:"font-medium text-gray-800",children:r.label}),o.jsxs("span",{children:[l,"%"]})]})]},r.label)})})}function nz(){const[e,t]=y.useState([]),[n,s]=y.useState([]),[r,i]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const g=await $l(),w=(x=>Array.isArray(x)?x:x&&typeof x=="object"&&x.data&&Array.isArray(x.data)||x&&typeof x=="object"&&x.success&&Array.isArray(x.data)?x.data:[])(g);t(w);const b=w.filter(x=>x.status==="converted");if(b.length>0){const x=b[0],N=await sd(x.id);s(N)}}catch(g){console.error("Error fetching dashboard data:",g),t([]),s([])}finally{i(!1)}})()},[]);const a=Array.isArray(e)?e.filter(p=>p.status==="new").length:0,l=Array.isArray(e)?e.filter(p=>p.status==="in_process").length:0,c=Array.isArray(e)?e.filter(p=>p.status==="qualified").length:0,u=Array.isArray(e)?e.filter(p=>p.status==="converted").length:0,d=Array.isArray(n)?n.reduce((p,g)=>p+g.totalRent,0):0,h=Array.isArray(e)?[...e].sort((p,g)=>new Date(g.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5):[],f=[{label:"New",value:a,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return r?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Vt,{title:"New Leads",value:a,icon:o.jsx(B0,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Vt,{title:"In Process",value:l,icon:o.jsx(qn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Vt,{title:"Qualified Leads",value:c,icon:o.jsx(B0,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Vt,{title:"Quotation Value",value:De(d),icon:o.jsx(Bd,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Lead Conversion Funnel"})}),o.jsx(se,{className:"flex justify-center",children:o.jsx(tz,{stages:f,height:250})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Weekly Lead Generation"})}),o.jsx(se,{children:o.jsx(rk,{data:m,height:250})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(me,{children:"Recent Leads"}),o.jsx(ts,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),o.jsx(se,{children:h.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Vl,{status:p.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ee,{className:"h-full",children:[o.jsx(fe,{children:o.jsx(me,{children:"Upcoming Tasks"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(iS,{className:"h-5 w-5 text-primary-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(jA,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(sS,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}const sz=Sa("inline-flex items-center justify-center font-medium transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden",{variants:{variant:{default:"bg-gradient-to-r from-brand-blue to-brand-blue/90 text-white shadow-lg hover:shadow-xl hover:shadow-brand-blue/25 hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:scale-[1.02] focus:ring-red-500/30 active:scale-[0.98]",outline:"border-2 border-brand-blue text-brand-blue bg-transparent hover:bg-brand-blue hover:text-white hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:shadow-md hover:from-gray-200 hover:to-gray-300 hover:scale-[1.02] focus:ring-gray-400/30 active:scale-[0.98]",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-400/30 hover:scale-[1.02] active:scale-[0.98]",link:"text-brand-blue underline-offset-4 hover:underline hover:text-brand-blue/80 focus:ring-brand-blue/30",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:shadow-green-500/25 hover:scale-[1.02] focus:ring-green-500/30 active:scale-[0.98]",warning:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:shadow-amber-500/25 hover:scale-[1.02] focus:ring-amber-500/30 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-blue via-purple-600 to-brand-blue text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 hover:scale-[1.02] focus:ring-purple-500/30 active:scale-[0.98]",accent:"bg-gradient-to-r from-brand-gold via-brand-gold to-brand-gold/95 text-brand-dark shadow-xl hover:shadow-2xl hover:shadow-brand-gold/40 hover:scale-[1.05] hover:from-brand-gold/90 hover:to-brand-gold hover:brightness-110 focus:ring-brand-gold/50 active:scale-[0.98] font-semibold transform"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-lg",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-6 text-base rounded-xl",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-xs":"h-7 w-7 rounded-md","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),V=y.memo(ne.forwardRef(({className:e="",variant:t,size:n,leftIcon:s,rightIcon:r,isLoading:i=!1,loadingText:a,fullWidth:l=!1,disabled:c,children:u,asChild:d=!1,...h},f)=>{const m=sz({variant:t,size:n}),p=l?"w-full":"",g=c||i,v=o.jsxs(o.Fragment,{children:[(t==="default"||t==="gradient")&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 ease-in-out"}),i?o.jsxs(o.Fragment,{children:[o.jsx(OA,{className:"w-4 h-4 animate-spin mr-2"}),a||"Loading..."]}):o.jsxs(o.Fragment,{children:[s&&o.jsx("span",{className:"mr-2 flex-shrink-0",children:s}),u,r&&o.jsx("span",{className:"ml-2 flex-shrink-0",children:r})]})]});return d?o.jsx("span",{className:`${m} ${p} ${e}`,children:v}):o.jsx("button",{className:`${m} ${p} ${e}`,ref:f,disabled:g,"aria-busy":i,...h,children:v})}));V.displayName="Button";const rz=y.memo(ne.forwardRef(({icon:e,className:t="",size:n="icon",...s},r)=>o.jsx(V,{ref:r,size:n,className:t,...s,children:e})));rz.displayName="IconButton";const iz=y.memo(({children:e,className:t="",orientation:n="horizontal",size:s="default"})=>{const r=n==="horizontal"?"flex-row":"flex-col",i={sm:"space-x-2 space-y-0",default:"space-x-3 space-y-0",lg:"space-x-4 space-y-0"}[s];return o.jsx("div",{className:`flex ${r} ${i} ${t}`,role:"group",children:e})});iz.displayName="ButtonGroup";function az(){const[e,t]=y.useState([]),[n,s]=y.useState([]),[r,i]=y.useState(0),[a,l]=y.useState(0),[c,u]=y.useState(!0);y.useEffect(()=>{(async()=>{try{const[f,m,p,g]=await Promise.all([$l(),Xd(),wx(),Bl()]);t(f),s(m),i(p.length),l(g.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return c?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Vt,{title:"Scheduled Jobs",value:d,icon:o.jsx(os,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Vt,{title:"Equipment",value:r,icon:o.jsx(cn,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),o.jsx(Vt,{title:"Operators",value:a,icon:o.jsx(qn,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(me,{children:"Recent Won Leads"}),o.jsx(ts,{to:"/jobs",children:o.jsx(V,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),o.jsx(se,{children:e.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(V,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ee,{className:"h-full",children:[o.jsx(fe,{children:o.jsx(me,{children:"Quick Actions"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(ts,{to:"/config/equipment",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(cn,{size:16}),children:"Manage Equipment"})}),o.jsx(ts,{to:"/config/operators",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(qn,{size:16}),children:"Manage Operators"})}),o.jsx(ts,{to:"/jobs",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(os,{size:16}),children:"View Job Calendar"})}),o.jsx(ts,{to:"/feedback",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(gr,{size:16}),children:"Review Completed Jobs"})}),o.jsx(ts,{to:"/config",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(rS,{size:16}),children:"System Configuration"})}),o.jsx(ts,{to:"/config/maintenance",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(Qg,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Recent Job Activity"})}),o.jsx(se,{children:n.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.scheduledStartDate).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Vl,{status:h.status==="scheduled"?"pending":h.status})})]},h.id))})]})})})]})]})}const oz=Sa("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function mt({className:e,variant:t,title:n,description:s,onClose:r,duration:i=5e3,isVisible:a=!0,...l}){const[c,u]=y.useState(a);y.useEffect(()=>{u(a)},[a]),y.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),r==null||r()},i);return()=>clearTimeout(f)}},[c,i,r]);const d=()=>{u(!1),r==null||r()},h=()=>{switch(t){case"success":return o.jsx(gr,{className:"h-5 w-5 text-success-500"});case"error":return o.jsx(zd,{className:"h-5 w-5 text-error-500"});case"warning":return o.jsx(yi,{className:"h-5 w-5 text-warning-500"});case"info":return o.jsx(nr,{className:"h-5 w-5 text-primary-500"});default:return null}};return o.jsx(yx,{children:c&&o.jsx(Xs.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:`pointer-events-auto ${oz({variant:t,className:e})}`,...l,children:o.jsxs("div",{className:"flex items-start",children:[t&&o.jsx("div",{className:"flex-shrink-0",children:h()}),o.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[o.jsx("p",{className:"text-sm font-medium",children:n}),s&&o.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:s})]}),o.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:o.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Vd,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function lz(){const{user:e}=qe(),[t,n]=y.useState([]),[s,r]=y.useState({}),[i,a]=y.useState(!0),[l,c]=y.useState({show:!1,title:""});y.useEffect(()=>{(async()=>{if(e)try{const g=await $C(e.id);n(g);const v={};for(const w of g)if(!v[w.equipmentId]){const b=await BC(w.equipmentId);b&&(v[w.equipmentId]=b)}r(v)}catch(g){console.error("Error fetching operator data:",g)}finally{a(!1)}})()},[e]);const u=(p,g)=>{var v;n(w=>w.map(b=>b.id===p?{...b,status:g==="accept"?"accepted":g==="reject"?"rejected":"completed"}:b)),c({show:!0,title:g==="accept"?"Job Accepted":g==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(v=t.find(w=>w.id===p))==null?void 0:v.customerName} has been ${g}ed.`,variant:g==="reject"?"warning":"success"}),setTimeout(()=>{c(w=>({...w,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,g)=>new Date(p.startDate).getTime()-new Date(g.startDate).getTime());return i?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(Vt,{title:"Scheduled Jobs",value:d,icon:o.jsx(os,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Vt,{title:"Accepted Jobs",value:h,icon:o.jsx(gr,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Vt,{title:"Completed Jobs",value:f,icon:o.jsx(Vn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Upcoming Jobs"})}),o.jsx(se,{children:m.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):o.jsx("div",{className:"space-y-4",children:m.map(p=>{var g;return o.jsx(ee,{variant:"bordered",className:"overflow-hidden",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),o.jsx(Vl,{status:p.status})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(cn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:((g=s[p.equipmentId])==null?void 0:g.name)||"Equipment"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Yg,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:p.location})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(os,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Vn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),o.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&o.jsxs(o.Fragment,{children:[o.jsx(V,{variant:"success",size:"sm",leftIcon:o.jsx(gr,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),o.jsx(V,{variant:"destructive",size:"sm",leftIcon:o.jsx(zd,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&o.jsx(V,{variant:"secondary",size:"sm",leftIcon:o.jsx(gr,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Equipment Assignment"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[Object.values(s).map(p=>o.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[o.jsx(cn,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(s).length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Operator Information"})}),o.jsxs(se,{children:[o.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[o.jsx("div",{className:"mr-4",children:o.jsx(DA,{className:"h-16 w-16 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),o.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),o.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx(V,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&o.jsx(mt,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function _e({label:e,error:t,className:n="",leftIcon:s,rightIcon:r,name:i,id:a,...l}){var d;const c={...l},u=i||a||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return o.jsxs("div",{className:"space-y-1.5",children:[e&&o.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[s&&o.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s}),o.jsx("input",{name:u,id:a||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-[#222] placeholder:text-[#888]
            text-base
            py-2 px-3 border border-[#CAC0B0] bg-white
            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${s?"pl-8 sm:pl-10":""}
            ${r?"pr-8 sm:pr-10":""}
            ${n}
          `,style:{color:"#222",WebkitTextFillColor:"#222",background:"#fff",borderColor:"#CAC0B0",fontWeight:600,letterSpacing:"0.08em"},placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),r&&o.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r})]}),t&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}function he({label:e,helperText:t,error:n,fullWidth:s=!0,className:r="",type:i="text",id:a,name:l,...c}){const u=a||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return o.jsxs("div",{className:`${s?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&o.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx(_e,{id:u,name:l||u,type:i,className:`${s?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${r}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&o.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function Se({options:e,value:t,onChange:n,label:s,error:r,leftIcon:i,className:a="",...l}){return o.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[s&&o.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[s,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[i&&o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",o.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${r?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${a}
          `,...l,children:e.map(c=>o.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:o.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:r})]})}function Mn({label:e,error:t,helperText:n,className:s="",...r}){const i=r.id||`textarea-${r.name||Math.random().toString(36).substring(2,9)}`;return o.jsxs("div",{className:"space-y-2",children:[e&&o.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${r.required?"text-blue-700":"text-green-700"}`,children:[e,r.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!r.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${r.required?"bg-blue-50 border-blue-200 focus:bg-white":r.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${s}`,placeholder:r.placeholder?`${r.placeholder}${r.required?" *":""}`:"",...r}),t&&o.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}Mn.displayName="TextArea";var cz=Object.defineProperty,uz=(e,t,n)=>t in e?cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kf=(e,t,n)=>(uz(e,typeof t!="symbol"?t+"":t,n),n);let dz=class{constructor(){kf(this,"current",this.detect()),kf(this,"handoffState","pending"),kf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Es=new dz,Rn=(e,t)=>{Es.isServer?y.useEffect(e,t):y.useLayoutEffect(e,t)};function Ds(e){let t=y.useRef(e);return Rn(()=>{t.current=e},[e]),t}let Qe=function(e){let t=Ds(e);return ne.useCallback((...n)=>t.current(...n),[t])};function ih(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Si(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return ih(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=Si();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function Vx(){let[e]=y.useState(Si);return y.useEffect(()=>()=>e.dispose(),[e]),e}function hz(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(Kp)(()=>()=>{},()=>!1,()=>!e)}function Ta(){let e=hz(),[t,n]=y.useState(Es.isHandoffComplete);return t&&Es.isHandoffComplete===!1&&n(!1),y.useEffect(()=>{t!==!0&&n(!0)},[t]),y.useEffect(()=>Es.handoff(),[]),e?!1:t}var jw;let Pa=(jw=ne.useId)!=null?jw:function(){let e=Ta(),[t,n]=ne.useState(e?()=>Es.nextId():null);return Rn(()=>{t===null&&n(Es.nextId())},[t]),t!=null?""+t:void 0};function It(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,It),s}function pk(e){return Es.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Pp=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Yr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Yr||{}),gk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(gk||{}),fz=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(fz||{});function mz(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Pp)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var xk=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(xk||{});function pz(e,t=0){var n;return e===((n=pk(e))==null?void 0:n.body)?!1:It(t,{0(){return e.matches(Pp)},1(){let s=e;for(;s!==null;){if(s.matches(Pp))return!0;s=s.parentElement}return!1}})}var gz=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(gz||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oi(e){e==null||e.focus({preventScroll:!0})}let xz=["textarea","input"].join(",");function yz(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,xz))!=null?n:!1}function vz(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function du(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?vz(e):e:mz(e);r.length>0&&a.length>1&&(a=a.filter(m=>!r.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(s))-1;if(t&4)return Math.max(0,a.indexOf(s))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=a.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=a[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&yz(f)&&f.select(),2}function yk(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function bz(){return/Android/gi.test(window.navigator.userAgent)}function wz(){return yk()||bz()}function Rc(e,t,n){let s=Ds(t);y.useEffect(()=>{function r(i){s.current(i)}return document.addEventListener(e,r,n),()=>document.removeEventListener(e,r,n)},[e,n])}function vk(e,t,n){let s=Ds(t);y.useEffect(()=>{function r(i){s.current(i)}return window.addEventListener(e,r,n),()=>window.removeEventListener(e,r,n)},[e,n])}function jz(e,t,n=!0){let s=y.useRef(!1);y.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function r(a,l){if(!s.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||a.composed&&a.composedPath().includes(h))return}return!pz(c,xk.Loose)&&c.tabIndex!==-1&&a.preventDefault(),t(a,c)}let i=y.useRef(null);Rc("pointerdown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Rc("mousedown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Rc("click",a=>{wz()||i.current&&(r(a,()=>i.current),i.current=null)},!0),Rc("touchend",a=>r(a,()=>a.target instanceof HTMLElement?a.target:null),!0),vk("blur",a=>r(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ul(...e){return y.useMemo(()=>pk(...e),[...e])}let bk=Symbol();function Nz(e,t=!0){return Object.assign(e,{[bk]:t})}function Qn(...e){let t=y.useRef(e);y.useEffect(()=>{t.current=e},[e]);let n=Qe(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||(s==null?void 0:s[bk]))?void 0:n}function Ux(e,t){let n=y.useRef([]),s=Qe(e);y.useEffect(()=>{let r=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let l=s(t,r);return n.current=t,l}},[s,...t])}function rd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var id=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(id||{}),ar=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ar||{});function In({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:a,mergeRefs:l}){l=l??Sz;let c=wk(t,e);if(i)return Ic(c,n,s,a,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Ic(h,n,s,a,l)}if(u&1){let{unmount:d=!0,...h}=c;return It(d?0:1,{0(){return null},1(){return Ic({...h,hidden:!0,style:{display:"none"}},n,s,a,l)}})}return Ic(c,n,s,a,l)}function Ic(e,t={},n,s,r){let{as:i=n,children:a,refName:l="ref",...c}=Ef(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===y.Fragment&&Object.keys(Nw(c)).length>0){if(!y.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...g)=>rd(f==null?void 0:f.className(...g),c.className):rd(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return y.cloneElement(d,Object.assign({},wk(d.props,Nw(Ef(c,["ref"]))),h,u,{ref:r(d.ref,u.ref)},p))}return y.createElement(i,Object.assign({},Ef(c,["ref"]),i!==y.Fragment&&u,i!==y.Fragment&&h),d)}function Sz(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function wk(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](r,...i){let a=n[s];for(let l of a){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function xn(e){var t;return Object.assign(y.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Nw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ef(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let Cz="div";var ad=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ad||{});function kz(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return In({ourProps:i,theirProps:r,slot:{},defaultTag:Cz,name:"Hidden"})}let _p=xn(kz),Wx=y.createContext(null);Wx.displayName="OpenClosedContext";var rn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(rn||{});function Hx(){return y.useContext(Wx)}function Ez({value:e,children:t}){return ne.createElement(Wx.Provider,{value:e},t)}function Dz(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Js=[];Dz(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Js[0]!==t.target&&(Js.unshift(t.target),Js=Js.filter(n=>n!=null&&n.isConnected),Js.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Tz(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&Pz(n)?!1:s}function Pz(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var jk=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(jk||{});function Nk(e,t,n,s){let r=Ds(n);y.useEffect(()=>{e=e??window;function i(a){r.current(a)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function Wl(){let e=y.useRef(!1);return Rn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Sk(e){let t=Qe(e),n=y.useRef(!1);y.useEffect(()=>(n.current=!1,()=>{n.current=!0,ih(()=>{n.current&&t()})}),[t])}var wo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(wo||{});function _z(){let e=y.useRef(0);return vk("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Ck(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Az="div";var kk=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(kk||{});function Mz(e,t){let n=y.useRef(null),s=Qn(n,t),{initialFocus:r,containers:i,features:a=30,...l}=e;Ta()||(a=1);let c=Ul(n);Oz({ownerDocument:c},!!(a&16));let u=Lz({ownerDocument:c,container:n,initialFocus:r},!!(a&2));Fz({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(a&8));let d=_z(),h=Qe(g=>{let v=n.current;v&&(w=>w())(()=>{It(d.current,{[wo.Forwards]:()=>{du(v,Yr.First,{skipElements:[g.relatedTarget]})},[wo.Backwards]:()=>{du(v,Yr.Last,{skipElements:[g.relatedTarget]})}})})}),f=Vx(),m=y.useRef(!1),p={ref:s,onKeyDown(g){g.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let v=Ck(i);n.current instanceof HTMLElement&&v.add(n.current);let w=g.relatedTarget;w instanceof HTMLElement&&w.dataset.headlessuiFocusGuard!=="true"&&(Ek(v,w)||(m.current?du(n.current,It(d.current,{[wo.Forwards]:()=>Yr.Next,[wo.Backwards]:()=>Yr.Previous})|Yr.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&oi(g.target)))}};return ne.createElement(ne.Fragment,null,!!(a&4)&&ne.createElement(_p,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:ad.Focusable}),In({ourProps:p,theirProps:l,defaultTag:Az,name:"FocusTrap"}),!!(a&4)&&ne.createElement(_p,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:ad.Focusable}))}let Rz=xn(Mz),Za=Object.assign(Rz,{features:kk});function Iz(e=!0){let t=y.useRef(Js.slice());return Ux(([n],[s])=>{s===!0&&n===!1&&ih(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Js.slice())},[e,Js,t]),Qe(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function Oz({ownerDocument:e},t){let n=Iz(t);Ux(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&oi(n())},[t]),Sk(()=>{t&&oi(n())})}function Lz({ownerDocument:e,container:t,initialFocus:n},s){let r=y.useRef(null),i=Wl();return Ux(()=>{if(!s)return;let a=t.current;a&&ih(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){r.current=l;return}}else if(a.contains(l)){r.current=l;return}n!=null&&n.current?oi(n.current):du(a,Yr.First)===gk.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.current=e==null?void 0:e.activeElement})},[s]),r}function Fz({ownerDocument:e,container:t,containers:n,previousActiveElement:s},r){let i=Wl();Nk(e==null?void 0:e.defaultView,"focus",a=>{if(!r||!i.current)return;let l=Ck(n);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?Ek(l,u)?(s.current=u,oi(u)):(a.preventDefault(),a.stopPropagation(),oi(c)):oi(s.current)},!0)}function Ek(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Dk=y.createContext(!1);function $z(){return y.useContext(Dk)}function Ap(e){return ne.createElement(Dk.Provider,{value:e.force},e.children)}function Bz(e){let t=$z(),n=y.useContext(Tk),s=Ul(e),[r,i]=y.useState(()=>{if(!t&&n!==null||Es.isServer)return null;let a=s==null?void 0:s.getElementById("headlessui-portal-root");if(a)return a;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return y.useEffect(()=>{r!==null&&(s!=null&&s.body.contains(r)||s==null||s.body.appendChild(r))},[r,s]),y.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let zz=y.Fragment;function Vz(e,t){let n=e,s=y.useRef(null),r=Qn(Nz(d=>{s.current=d}),t),i=Ul(s),a=Bz(s),[l]=y.useState(()=>{var d;return Es.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=y.useContext(Mp),u=Ta();return Rn(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),Rn(()=>{if(l&&c)return c.register(l)},[c,l]),Sk(()=>{var d;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a)))}),u?!a||!l?null:Rl.createPortal(In({ourProps:{ref:r},theirProps:n,defaultTag:zz,name:"Portal"}),l):null}let Uz=y.Fragment,Tk=y.createContext(null);function Wz(e,t){let{target:n,...s}=e,r={ref:Qn(t)};return ne.createElement(Tk.Provider,{value:n},In({ourProps:r,theirProps:s,defaultTag:Uz,name:"Popover.Group"}))}let Mp=y.createContext(null);function Hz(){let e=y.useContext(Mp),t=y.useRef([]),n=Qe(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Qe(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),r=y.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,y.useMemo(()=>function({children:i}){return ne.createElement(Mp.Provider,{value:r},i)},[r])]}let qz=xn(Vz),Gz=xn(Wz),Rp=Object.assign(qz,{Group:Gz});const Yz=(e=>e.useSyncExternalStore)(Kp);function Qz(e){return Yz(e.subscribe,e.getSnapshot,e.getSnapshot)}function Kz(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let a=t[r].call(n,...i);a&&(n=a,s.forEach(l=>l()))}}}function Xz(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,r=s.clientWidth-s.offsetWidth,i=e-r;n.style(s,"paddingRight",`${i}px`)}}}function Jz(){return yk()?{before({doc:e,d:t,meta:n}){function s(r){return n.containers.flatMap(i=>i()).some(i=>i.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Si();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!s(d)&&(a=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Zz(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function eV(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ei=Kz(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Si(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:eV(n)},r=[Jz(),Xz(),Zz()];r.forEach(({before:i})=>i==null?void 0:i(s)),r.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ei.subscribe(()=>{let e=ei.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&ei.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ei.dispatch("TEARDOWN",n)}});function tV(e,t,n){let s=Qz(ei),r=e?s.get(e):void 0,i=r?r.count>0:!1;return Rn(()=>{if(!(!e||!t))return ei.dispatch("PUSH",e,n),()=>ei.dispatch("POP",e,n)},[t,e]),i}let Df=new Map,eo=new Map;function Sw(e,t=!0){Rn(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function r(){var a;if(!s)return;let l=(a=eo.get(s))!=null?a:1;if(l===1?eo.delete(s):eo.set(s,l-1),l!==1)return;let c=Df.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,Df.delete(s))}let i=(n=eo.get(s))!=null?n:0;return eo.set(s,i+1),i!==0||(Df.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),r},[e,t])}function nV({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let r=y.useRef((s=n==null?void 0:n.current)!=null?s:null),i=Ul(r),a=Qe(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(r.current)||h.contains((u=(c=r.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:a,contains:Qe(l=>a().some(c=>c.contains(l))),mainTreeNodeRef:r,MainTreeNode:y.useMemo(()=>function(){return n!=null?null:ne.createElement(_p,{features:ad.Hidden,ref:r})},[r,n])}}let qx=y.createContext(()=>{});qx.displayName="StackContext";var Ip=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Ip||{});function sV(){return y.useContext(qx)}function rV({children:e,onUpdate:t,type:n,element:s,enabled:r}){let i=sV(),a=Qe((...l)=>{t==null||t(...l),i(...l)});return Rn(()=>{let l=r===void 0||r===!0;return l&&a(0,n,s),()=>{l&&a(1,n,s)}},[a,n,s,r]),ne.createElement(qx.Provider,{value:a},e)}let Pk=y.createContext(null);function _k(){let e=y.useContext(Pk);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,_k),t}return e}function iV(){let[e,t]=y.useState([]);return[e.length>0?e.join(" "):void 0,y.useMemo(()=>function(n){let s=Qe(i=>(t(a=>[...a,i]),()=>t(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=y.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return ne.createElement(Pk.Provider,{value:r},n.children)},[t])]}let aV="p";function oV(e,t){let n=Pa(),{id:s=`headlessui-description-${n}`,...r}=e,i=_k(),a=Qn(t);Rn(()=>i.register(s),[s,i.register]);let l={ref:a,...i.props,id:s};return In({ourProps:l,theirProps:r,slot:i.slot||{},defaultTag:aV,name:i.name||"Description"})}let lV=xn(oV),cV=Object.assign(lV,{});var uV=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(uV||{}),dV=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(dV||{});let hV={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},od=y.createContext(null);od.displayName="DialogContext";function Hl(e){let t=y.useContext(od);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Hl),n}return t}function fV(e,t,n=()=>[document.body]){tV(e,t,s=>{var r;return{containers:[...(r=s.containers)!=null?r:[],n]}})}function mV(e,t){return It(t.type,hV,e,t)}let pV="div",gV=id.RenderStrategy|id.Static;function xV(e,t){let n=Pa(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:a,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=y.useState(0),f=y.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Hx();r===void 0&&m!==null&&(r=(m&rn.Open)===rn.Open);let p=y.useRef(null),g=Qn(p,t),v=Ul(p),w=e.hasOwnProperty("open")||m!==null,b=e.hasOwnProperty("onClose");if(!w&&!b)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!w)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!b)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof r!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let x=r?0:1,[N,S]=y.useReducer(mV,{titleId:null,descriptionId:null,panelRef:y.createRef()}),k=Qe(()=>i(!1)),j=Qe(M=>S({type:0,id:M})),C=Ta()?c?!1:x===0:!1,D=d>1,A=y.useContext(od)!==null,[F,$]=Hz(),L={get current(){var M;return(M=N.panelRef.current)!=null?M:p.current}},{resolveContainers:P,mainTreeNodeRef:B,MainTreeNode:W}=nV({portals:F,defaultContainers:[L]}),O=D?"parent":"leaf",T=m!==null?(m&rn.Closing)===rn.Closing:!1,_=A||T?!1:C,U=y.useCallback(()=>{var M,E;return(E=Array.from((M=v==null?void 0:v.querySelectorAll("body > *"))!=null?M:[]).find(R=>R.id==="headlessui-portal-root"?!1:R.contains(B.current)&&R instanceof HTMLElement))!=null?E:null},[B]);Sw(U,_);let q=D?!0:C,Z=y.useCallback(()=>{var M,E;return(E=Array.from((M=v==null?void 0:v.querySelectorAll("[data-headlessui-portal]"))!=null?M:[]).find(R=>R.contains(B.current)&&R instanceof HTMLElement))!=null?E:null},[B]);Sw(Z,q),jz(P,M=>{M.preventDefault(),k()},!(!C||D));let le=!(D||x!==0);Nk(v==null?void 0:v.defaultView,"keydown",M=>{le&&(M.defaultPrevented||M.key===jk.Escape&&(M.preventDefault(),M.stopPropagation(),k()))}),fV(v,!(T||x!==0||A),P),y.useEffect(()=>{if(x!==0||!p.current)return;let M=new ResizeObserver(E=>{for(let R of E){let z=R.target.getBoundingClientRect();z.x===0&&z.y===0&&z.width===0&&z.height===0&&k()}});return M.observe(p.current),()=>M.disconnect()},[x,p,k]);let[we,I]=iV(),G=y.useMemo(()=>[{dialogState:x,close:k,setTitleId:j},N],[x,N,k,j]),Y=y.useMemo(()=>({open:x===0}),[x]),ie={ref:g,id:s,role:l,"aria-modal":x===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":we};return ne.createElement(rV,{type:"Dialog",enabled:x===0,element:p,onUpdate:Qe((M,E)=>{E==="Dialog"&&It(M,{[Ip.Add]:()=>h(R=>R+1),[Ip.Remove]:()=>h(R=>R-1)})})},ne.createElement(Ap,{force:!0},ne.createElement(Rp,null,ne.createElement(od.Provider,{value:G},ne.createElement(Rp.Group,{target:p},ne.createElement(Ap,{force:!1},ne.createElement(I,{slot:Y,name:"Dialog.Description"},ne.createElement(Za,{initialFocus:a,containers:P,features:C?It(O,{parent:Za.features.RestoreFocus,leaf:Za.features.All&~Za.features.FocusLock}):Za.features.None},ne.createElement($,null,In({ourProps:ie,theirProps:u,slot:Y,defaultTag:pV,features:gV,visible:x===0,name:"Dialog"}))))))))),ne.createElement(W,null))}let yV="div";function vV(e,t){let n=Pa(),{id:s=`headlessui-dialog-overlay-${n}`,...r}=e,[{dialogState:i,close:a}]=Hl("Dialog.Overlay"),l=Qn(t),c=Qe(d=>{if(d.target===d.currentTarget){if(Tz(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),a()}}),u=y.useMemo(()=>({open:i===0}),[i]);return In({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:r,slot:u,defaultTag:yV,name:"Dialog.Overlay"})}let bV="div";function wV(e,t){let n=Pa(),{id:s=`headlessui-dialog-backdrop-${n}`,...r}=e,[{dialogState:i},a]=Hl("Dialog.Backdrop"),l=Qn(t);y.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let c=y.useMemo(()=>({open:i===0}),[i]);return ne.createElement(Ap,{force:!0},ne.createElement(Rp,null,In({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:r,slot:c,defaultTag:bV,name:"Dialog.Backdrop"})))}let jV="div";function NV(e,t){let n=Pa(),{id:s=`headlessui-dialog-panel-${n}`,...r}=e,[{dialogState:i},a]=Hl("Dialog.Panel"),l=Qn(t,a.panelRef),c=y.useMemo(()=>({open:i===0}),[i]),u=Qe(d=>{d.stopPropagation()});return In({ourProps:{ref:l,id:s,onClick:u},theirProps:r,slot:c,defaultTag:jV,name:"Dialog.Panel"})}let SV="h2";function CV(e,t){let n=Pa(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:a}]=Hl("Dialog.Title"),l=Qn(t);y.useEffect(()=>(a(s),()=>a(null)),[s,a]);let c=y.useMemo(()=>({open:i===0}),[i]);return In({ourProps:{ref:l,id:s},theirProps:r,slot:c,defaultTag:SV,name:"Dialog.Title"})}let kV=xn(xV),EV=xn(wV),DV=xn(NV),TV=xn(vV),PV=xn(CV),Oc=Object.assign(kV,{Backdrop:EV,Panel:DV,Overlay:TV,Title:PV,Description:cV});function _V(e=0){let[t,n]=y.useState(e),s=Wl(),r=y.useCallback(c=>{s.current&&n(u=>u|c)},[t,s]),i=y.useCallback(c=>!!(t&c),[t]),a=y.useCallback(c=>{s.current&&n(u=>u&~c)},[n,s]),l=y.useCallback(c=>{s.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:r,hasFlag:i,removeFlag:a,toggleFlag:l}}function AV(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Tf(e,...t){e&&t.length>0&&e.classList.add(...t)}function Pf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function MV(e,t){let n=Si();if(!e)return n.dispose;let{transitionDuration:s,transitionDelay:r}=getComputedStyle(e),[i,a]=[s,r].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+a;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function RV(e,t,n,s){let r=n?"enter":"leave",i=Si(),a=s!==void 0?AV(s):()=>{};r==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=It(r,{enter:()=>t.enter,leave:()=>t.leave}),c=It(r,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=It(r,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Pf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Tf(e,...t.base,...l,...u),i.nextFrame(()=>{Pf(e,...t.base,...l,...u),Tf(e,...t.base,...l,...c),MV(e,()=>(Pf(e,...t.base,...l),Tf(e,...t.base,...t.entered),a()))}),i.dispose}function IV({immediate:e,container:t,direction:n,classes:s,onStart:r,onStop:i}){let a=Wl(),l=Vx(),c=Ds(n);Rn(()=>{e&&(c.current="enter")},[e]),Rn(()=>{let u=Si();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&a.current)return u.dispose(),r.current(c.current),u.add(RV(d,s.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function zs(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let ah=y.createContext(null);ah.displayName="TransitionContext";var OV=(e=>(e.Visible="visible",e.Hidden="hidden",e))(OV||{});function LV(){let e=y.useContext(ah);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function FV(){let e=y.useContext(oh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let oh=y.createContext(null);oh.displayName="NestingContext";function lh(e){return"children"in e?lh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Ak(e,t){let n=Ds(e),s=y.useRef([]),r=Wl(),i=Vx(),a=Qe((m,p=ar.Hidden)=>{let g=s.current.findIndex(({el:v})=>v===m);g!==-1&&(It(p,{[ar.Unmount](){s.current.splice(g,1)},[ar.Hidden](){s.current[g].state="hidden"}}),i.microTask(()=>{var v;!lh(s)&&r.current&&((v=n.current)==null||v.call(n))}))}),l=Qe(m=>{let p=s.current.find(({el:g})=>g===m);return p?p.state!=="visible"&&(p.state="visible"):s.current.push({el:m,state:"visible"}),()=>a(m,ar.Unmount)}),c=y.useRef([]),u=y.useRef(Promise.resolve()),d=y.useRef({enter:[],leave:[],idle:[]}),h=Qe((m,p,g)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([v])=>v!==m)),t==null||t.chains.current[p].push([m,new Promise(v=>{c.current.push(v)})]),t==null||t.chains.current[p].push([m,new Promise(v=>{Promise.all(d.current[p].map(([w,b])=>b)).then(()=>v())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(p)):g(p)}),f=Qe((m,p,g)=>{Promise.all(d.current[p].splice(0).map(([v,w])=>w)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>g(p))});return y.useMemo(()=>({children:s,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d}),[l,a,s,h,f,d,u])}function $V(){}let BV=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Cw(e){var t;let n={};for(let s of BV)n[s]=(t=e[s])!=null?t:$V;return n}function zV(e){let t=y.useRef(Cw(e));return y.useEffect(()=>{t.current=Cw(e)},[e]),t}let VV="div",Mk=id.RenderStrategy;function UV(e,t){var n,s;let{beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...g}=e,v=y.useRef(null),w=Qn(v,t),b=(n=g.unmount)==null||n?ar.Unmount:ar.Hidden,{show:x,appear:N,initial:S}=LV(),[k,j]=y.useState(x?"visible":"hidden"),C=FV(),{register:D,unregister:A}=C;y.useEffect(()=>D(v),[D,v]),y.useEffect(()=>{if(b===ar.Hidden&&v.current){if(x&&k!=="visible"){j("visible");return}return It(k,{hidden:()=>A(v),visible:()=>D(v)})}},[k,v,D,A,x,b]);let F=Ds({base:zs(g.className),enter:zs(c),enterFrom:zs(u),enterTo:zs(d),entered:zs(h),leave:zs(f),leaveFrom:zs(m),leaveTo:zs(p)}),$=zV({beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l}),L=Ta();y.useEffect(()=>{if(L&&k==="visible"&&v.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,k,L]);let P=S&&!N,B=N&&x&&S,W=!L||P?"idle":x?"enter":"leave",O=_V(0),T=Qe(le=>It(le,{enter:()=>{O.addFlag(rn.Opening),$.current.beforeEnter()},leave:()=>{O.addFlag(rn.Closing),$.current.beforeLeave()},idle:()=>{}})),_=Qe(le=>It(le,{enter:()=>{O.removeFlag(rn.Opening),$.current.afterEnter()},leave:()=>{O.removeFlag(rn.Closing),$.current.afterLeave()},idle:()=>{}})),U=Ak(()=>{j("hidden"),A(v)},C),q=y.useRef(!1);IV({immediate:B,container:v,classes:F,direction:W,onStart:Ds(le=>{q.current=!0,U.onStart(v,le,T)}),onStop:Ds(le=>{q.current=!1,U.onStop(v,le,_),le==="leave"&&!lh(U)&&(j("hidden"),A(v))})});let Z=g,ae={ref:w};return B?Z={...Z,className:rd(g.className,...F.current.enter,...F.current.enterFrom)}:q.current&&(Z.className=rd(g.className,(s=v.current)==null?void 0:s.className),Z.className===""&&delete Z.className),ne.createElement(oh.Provider,{value:U},ne.createElement(Ez,{value:It(k,{visible:rn.Open,hidden:rn.Closed})|O.flags},In({ourProps:ae,theirProps:Z,defaultTag:VV,features:Mk,visible:k==="visible",name:"Transition.Child"})))}function WV(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,a=y.useRef(null),l=Qn(a,t);Ta();let c=Hx();if(n===void 0&&c!==null&&(n=(c&rn.Open)===rn.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=y.useState(n?"visible":"hidden"),h=Ak(()=>{d("hidden")}),[f,m]=y.useState(!0),p=y.useRef([n]);Rn(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let g=y.useMemo(()=>({show:n,appear:s,initial:f}),[n,s,f]);y.useEffect(()=>{if(n)d("visible");else if(!lh(h))d("hidden");else{let x=a.current;if(!x)return;let N=x.getBoundingClientRect();N.x===0&&N.y===0&&N.width===0&&N.height===0&&d("hidden")}},[n,h]);let v={unmount:r},w=Qe(()=>{var x;f&&m(!1),(x=e.beforeEnter)==null||x.call(e)}),b=Qe(()=>{var x;f&&m(!1),(x=e.beforeLeave)==null||x.call(e)});return ne.createElement(oh.Provider,{value:h},ne.createElement(ah.Provider,{value:g},In({ourProps:{...v,as:y.Fragment,children:ne.createElement(Rk,{ref:l,...v,...i,beforeEnter:w,beforeLeave:b})},theirProps:{},defaultTag:y.Fragment,features:Mk,visible:u==="visible",name:"Transition"})))}function HV(e,t){let n=y.useContext(ah)!==null,s=Hx()!==null;return ne.createElement(ne.Fragment,null,!n&&s?ne.createElement(Op,{ref:t,...e}):ne.createElement(Rk,{ref:t,...e}))}let Op=xn(WV),Rk=xn(UV),qV=xn(HV),_f=Object.assign(Op,{Child:qV,Root:Op});const GV={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function dt({isOpen:e,onClose:t,title:n,description:s,children:r,size:i="md"}){return o.jsx(_f,{show:e,as:y.Fragment,children:o.jsxs(Oc,{as:"div",className:"relative z-50",onClose:t,children:[o.jsx(_f.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),o.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:o.jsx(_f.Child,{as:y.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:o.jsxs(Oc.Panel,{className:`w-full ${GV[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[o.jsxs("div",{children:[n&&o.jsx(Oc.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),s&&o.jsx(Oc.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:s})]}),o.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Vd,{className:"h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:r})]})})})})]})})}const Af="http://103.224.243.242:3001/api",YV=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},to=async(e,t={})=>{var n,s;try{console.log(`📞 API Call: ${t.method||"GET"} ${Af}${e}`);let r="";try{r=YV()}catch(c){throw c}const i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers||{}},a=await fetch(`${Af}${e}`,{...t,headers:i});if(console.log(`📩 API Response: ${a.status} ${a.statusText} for ${e}`),e==="/quotations"){const c=a.clone();try{const u=await c.json();if(console.log(`📊 Quotations API Response Data (${e}):`,u),u&&u.length>0){console.log("📝 First quotation details:",{id:u[0].id,customerName:u[0].customerName,customerId:u[0].customerId,customerContact:JSON.stringify(u[0].customerContact).substring(0,100),selectedEquipment:u[0].selectedEquipment?`${u[0].selectedEquipment.name||"Unnamed"} (${u[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const d=u[0].selectedEquipment&&u[0].selectedEquipment.name,h=u[0].selectedMachines&&Array.isArray(u[0].selectedMachines)&&u[0].selectedMachines.length>0;console.log("📋 Equipment data check:",{hasEquipment:!!d,hasMachines:!!h,machineCount:h?u[0].selectedMachines.length:0,firstMachine:h?u[0].selectedMachines[0].name:"N/A"});const f=!!u[0].customerId,m=!!u[0].customerName,p=u[0].customerContact&&typeof u[0].customerContact=="object"&&Object.keys(u[0].customerContact).length>0;console.log("👤 Customer data check:",{hasCustomerId:f,hasCustomerName:m,hasCustomerContact:p,customerType:p?typeof u[0].customerContact:"N/A"})}}catch(u){console.error("Error parsing response data:",u)}}if(!a.ok){let c=`API Error: ${a.status} ${a.statusText}`;const u=a.headers.get("content-type");console.error(`API Error: ${a.status} ${a.statusText} for ${Af}${e}`),console.error("Response Headers:",{"content-type":u,"content-length":a.headers.get("content-length")});try{if(u&&u.includes("application/json")){const d=await a.json();if(c=d.error||c,d.details&&(c+=` - ${d.details}`),console.error("API Error JSON:",d),a.status===401)throw console.warn("👮‍♂️ Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((s=t.headers)==null?void 0:s["X-Bypass-Auth"])||"Not present"},environment:"production",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const d=await a.text();d&&(console.error("API Error Text:",d.substring(0,300)),c+=` - ${d.substring(0,100)}`)}}catch(d){console.error("Error parsing API error response:",d),c+=" (Error response could not be parsed)"}throw new Error(`${c} (${e})`)}const l=await a.json();return l&&typeof l=="object"&&"success"in l&&"data"in l?l.data:l}catch(r){throw console.error(`API call failed: ${e}`,r),r}},On={get:e=>to(e,{method:"GET"}),post:(e,t)=>to(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>to(e,{method:"PUT",body:JSON.stringify(t)}),patch:(e,t)=>to(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>to(e,{method:"DELETE"})},Ik=async()=>{try{console.log("🔍 DEBUG: customerService.getCustomers() called"),console.log('🔍 DEBUG: About to call api.get("/customers")');const e=await On.get("/customers");return console.log("🔍 DEBUG: api.get response received:",e),console.log("🔍 DEBUG: Response type:",typeof e,"Array?",Array.isArray(e)),e}catch(e){return console.error("❌ DEBUG: Failed to fetch customers:",e),console.error("❌ DEBUG: Error details:",e.message,e.stack),[]}},Ok=async e=>{try{console.log("Creating customer via API:",e);const t=await On.post("/customers",e);return console.log("Customer created successfully:",t),t}catch(t){throw console.error("Failed to create customer:",t),new Error(t.message||"Failed to create customer")}},QV=async(e,t)=>{try{return await On.put(`/customers/${e}`,t)}catch(n){throw console.error(`Failed to update customer ${e}:`,n),new Error(n.message||"Failed to update customer")}},KV=async e=>{try{return await On.delete(`/customers/${e}`),!0}catch(t){throw console.error(`Failed to delete customer ${e}:`,t),new Error(t.message||"Failed to delete customer")}};function XV({isOpen:e,onClose:t,onSelect:n,initialCustomerData:s}){const[r,i]=y.useState("select"),[a,l]=y.useState([]),[c,u]=y.useState(""),[d,h]=y.useState(!0),[f,m]=y.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""});y.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{console.log("🔍 Fetching customers for modal...");const b=await Ik();console.log("✅ Received customers:",b),l(b)}catch(b){console.error("❌ Error fetching customers:",b)}finally{h(!1)}},g=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const b=await Ok({...f,name:f.name.trim(),contactName:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A",type:"other",notes:""});console.log("Created new customer:",b),n(b)}catch(b){console.error("Error creating customer:",b),alert("Error creating customer")}},v=b=>{console.log("Selected existing customer:",b),n(b)},w=a.filter(b=>{var x;return b.name.toLowerCase().includes(c.toLowerCase())||b.email.toLowerCase().includes(c.toLowerCase())||((x=b.id)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))});return o.jsx(dt,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(V,{variant:r==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),o.jsx(V,{variant:r==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),r==="select"?o.jsxs(o.Fragment,{children:["            ",o.jsxs("div",{className:"relative mb-2",children:[o.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),o.jsx(he,{placeholder:"Search customers...",value:c,onChange:b=>u(b.target.value),className:"pl-10"}),c&&o.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),o.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?o.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):w.length===0?o.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):w.map(b=>o.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>v(b),children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"font-semibold text-base text-gray-900",children:b.name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[b.companyName&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:b.companyName}),b.designation&&b.companyName&&o.jsx("div",{className:"hidden sm:inline-block text-gray-700",children:"•"}),b.designation&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:b.designation})]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-700 truncate",children:b.email}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mt-0.5",children:["ID: ",b.id]})]})},b.id))})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(he,{label:"Customer Name",value:f.name,onChange:b=>m(x=>({...x,name:b.target.value})),placeholder:"Enter customer name",required:!0}),o.jsx(he,{label:"Company Name",value:f.companyName,onChange:b=>m(x=>({...x,companyName:b.target.value})),placeholder:"Enter company name",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(he,{label:"Designation",value:f.designation,onChange:b=>m(x=>({...x,designation:b.target.value})),placeholder:"Enter designation",required:!0}),o.jsx(he,{label:"Email",type:"email",value:f.email,onChange:b=>m(x=>({...x,email:b.target.value})),placeholder:"Enter email address",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(he,{label:"Phone",value:f.phone,onChange:b=>m(x=>({...x,phone:b.target.value})),placeholder:"Enter phone number",required:!0}),o.jsx(he,{label:"Address",value:f.address,onChange:b=>m(x=>({...x,address:b.target.value})),placeholder:"Enter address",required:!0})]}),"            ",o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[o.jsx(V,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(V,{onClick:g,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function ld(){return o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx(nr,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",o.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[o.jsx(nr,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",o.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const JV=({data:e,dataType:t,className:n})=>{const[s,r]=y.useState(!1);return y.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),a=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});r(i||a)},[e]),s?o.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),o.jsxs("p",{children:["You are currently viewing ",o.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",o.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsx("li",{children:"Check that the API server is running"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),o.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[o.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},ZV=e=>{if(!e)return console.warn("API response is null or undefined"),[];if(Array.isArray(e))return e;if(e.data&&Array.isArray(e.data)||e.success&&e.data&&Array.isArray(e.data))return e.data;if(e.items&&Array.isArray(e.items))return e.items;if(typeof e=="object"&&!Array.isArray(e)){const t=Object.values(e);if(t.length===1&&Array.isArray(t[0]))return t[0]}return console.warn("Unable to extract array from API response:",e),[]},e8=e=>{if(!e)return"No item";const t=e.customerName||e.customer_name||e.customer&&e.customer.name||"Unknown",n=e.email||e.customer&&e.customer.email||"",s=e.customerId||e.customer_id||e.id||"";return`${t}${n?` (${n})`:""}${s?` [${s}]`:""}`},kw=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],t8=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],n8=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function s8(){const{user:e}=qe(),t=en(),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState([]),[c,u]=y.useState(""),[d,h]=y.useState("all"),[f,m]=y.useState(!0),[p,g]=y.useState(!1),[v,w]=y.useState(!1),[b,x]=y.useState(!1),[N,S]=y.useState(null),[k,j]=y.useState({show:!1,title:""}),C=new Date().toISOString().split("T")[0],[D,A]=y.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[F,$]=y.useState(0),[L,P]=y.useState(null),[B,W]=y.useState(!1),[O,T]=y.useState({fullName:"",companyName:"",phoneNumber:"",email:"",serviceNeeded:"",siteLocation:"",startDate:"",rentalDays:1,shiftTiming:"",status:"new",source:"",designation:"",notes:""});y.useEffect(()=>{_(),U()},[]),y.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),q()},[n,c,d]),y.useEffect(()=>{if(b&&N){const M=new Date().toISOString().split("T")[0];T({fullName:N.customerName||"",companyName:N.companyName||"",phoneNumber:N.phone||"",email:N.email||"",serviceNeeded:N.serviceNeeded||"",siteLocation:N.siteLocation||"",startDate:N.startDate||M,rentalDays:N.rentalDays||1,shiftTiming:N.shiftTiming||"",status:N.status||"new",source:N.source||"",designation:N.designation||"",notes:N.notes||""})}},[b,N]);const _=async()=>{try{console.log("Fetching leads from API...");const M=await $l(),E=ZV(M);console.log("🧪 Debug leads response:",{originalResponse:M,extractedData:E,isArray:Array.isArray(E),length:Array.isArray(E)?E.length:"not array",firstLead:E.length>0?e8(E[0]):"none"}),console.log("Leads data received:",E),s(E||[]),m(!1)}catch(M){console.error("Error fetching leads:",M),Y("Error fetching leads","error"),s([]),m(!1)}},U=async()=>{try{const E=`${"http://103.224.243.242:3001/api".replace(/\/$/,"")}/auth/sales-agents`;console.log("Fetching sales agents from API at:",E);const R=await fetch(E,{headers:{"Content-Type":"application/json","X-Bypass-Auth":"development-only-123"}});if(R.ok){const z=await R.json();console.log("Sales agents fetched:",z),i(z)}else console.error("Failed to fetch sales agents:",R.status),i([])}catch(M){console.error("Error fetching sales agents:",M),i([])}},q=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads. Current filters:`,{searchTerm:c,statusFilter:d});let M=[...n];c&&(M=M.filter(E=>{var R,z,H,X;return((R=E==null?void 0:E.customerName)==null?void 0:R.toLowerCase().includes(c.toLowerCase()))||!1||((z=E==null?void 0:E.companyName)==null?void 0:z.toLowerCase().includes(c.toLowerCase()))||!1||((H=E==null?void 0:E.email)==null?void 0:H.toLowerCase().includes(c.toLowerCase()))||!1||((X=E==null?void 0:E.phone)==null?void 0:X.includes(c))||!1}),console.log(`After search filter: ${M.length} leads`)),d!=="all"?(M=M.filter(E=>(E==null?void 0:E.status)===d),console.log(`After status filter (${d}): ${M.length} leads`)):(M=M.filter(E=>(E==null?void 0:E.status)!=="converted"),console.log(`After excluding converted leads: ${M.length} leads`)),console.log(`Final filtered leads: ${M.length} leads match criteria`),l(M)},Z=async M=>{var z;if(M.preventDefault(),!D.fullName||!D.phoneNumber||!D.email||!D.machineryType||!D.location||!D.startDate||!D.rentalDays){Y("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.email)){Y("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(D.phoneNumber)){Y("Please enter a valid phone number","error");return}try{const H=(e==null?void 0:e.role)==="sales_agent"?e.id:D.assignedTo,X=(e==null?void 0:e.role)==="sales_agent"?e.name:((z=r.find(Ne=>Ne.id===D.assignedTo))==null?void 0:z.name)||"",ve={customerName:D.fullName,companyName:D.companyName,email:D.email,phone:D.phoneNumber,serviceNeeded:D.machineryType,siteLocation:D.location,startDate:D.startDate,rentalDays:parseInt(D.rentalDays),shiftTiming:D.shiftTiming,status:"new",notes:D.notes,designation:D.designation,...H&&H.trim()!==""?{assignedTo:H,assignedToName:X}:{}};console.log("Creating lead with data:",ve);const K=await dL(ve);s(Ne=>[...Ne,K]),g(!1),G(),Y("Lead created successfully","success")}catch(H){console.error("Error creating lead:",H),Y("Error creating lead","error")}},ae=async(M,E)=>{try{const R=await Qv(M,E);R&&(s(z=>z.map(H=>H.id===M?R:H)),Y("Lead status updated","success"))}catch(R){console.error("Error updating lead status:",R),Y("Error updating lead status","error")}},le=M=>{console.log("Selected customer:",M),P(M),w(!1),setTimeout(()=>{W(!0)},100)},ge=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:N,selectedCustomer:L,dealValue:F}),!N){Y("No lead selected","error");return}if(!L){Y("No customer selected","error");return}const M=await pL({title:`Deal for ${L.name}`,description:`Deal created from lead for ${L.name}${L.companyName?` (${L.companyName})`:""}`,leadId:N.id,customerId:L.id,stage:"qualification",value:F,expectedCloseDate:new Date().toISOString(),customer:{name:L.name,email:L.email||N.email,phone:L.phone||N.phone,company:L.companyName||"",address:L.address||"",designation:L.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:N.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",M),await Qv(N.id,"converted"),s(E=>E.map(R=>R.id===N.id?{...R,status:"converted"}:R)),Y("Lead converted to deal successfully","success"),W(!1),w(!1),S(null),P(null),$(0),t("/deals")}catch(M){console.error("Error converting lead to deal:",M),Y("Error converting lead to deal","error")}finally{m(!1)}},we=async M=>{if(M.status!=="qualified"){Y("Only qualified leads can be converted to deals","warning");return}S(M),w(!0)},I=async(M,E)=>{try{if(E===""){console.log("Unassigning lead",M);const H=await Kv(M,"","Unassigned");H&&(s(X=>X.map(ve=>ve.id===M?H:ve)),Y("Lead unassigned successfully","success"));return}const R=r.find(H=>H.id===E);if(!R){Y("Selected sales agent not found","error");return}const z=await Kv(M,E,R.name);z&&(s(H=>H.map(X=>X.id===M?z:X)),Y("Lead assignment updated","success"))}catch(R){console.error("Error updating lead assignment:",R),Y("Error updating lead assignment","error")}},G=()=>{A({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},Y=(M,E="success")=>{j({show:!0,title:M,variant:E}),setTimeout(()=>j({show:!1,title:""}),3e3)},ie=async M=>{if(M.preventDefault(),!O.fullName||!O.phoneNumber||!O.email||!O.serviceNeeded||!O.siteLocation||!O.startDate||!O.rentalDays||O.rentalDays<1){Y("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.email)){Y("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(O.phoneNumber)){Y("Please enter a valid phone number","error");return}try{const z=await uL(N.id,{customerName:O.fullName,companyName:O.companyName,email:O.email,phone:O.phoneNumber,serviceNeeded:O.serviceNeeded,siteLocation:O.siteLocation,startDate:O.startDate,rentalDays:O.rentalDays,shiftTiming:O.shiftTiming,status:O.status,source:O.source,designation:O.designation,notes:O.notes});console.log("Update response:",z),z?s(H=>{const X=H.map(ve=>ve.id===N.id?z:ve);return console.log("Updated leads array:",X),X}):(console.log("No updated lead returned, refetching all leads"),await _()),x(!1),S(null),Y("Lead updated successfully","success")}catch(z){console.error("Error updating lead:",z),Y("Error updating lead","error")}};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(JV,{data:n,dataType:"leads"}),o.jsxs(ee,{children:[o.jsxs(fe,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4",children:[o.jsx(me,{className:"text-xl font-semibold text-gray-900",children:"Leads Pipeline"}),o.jsx(V,{onClick:()=>g(!0),className:"whitespace-nowrap self-start sm:self-auto",leftIcon:o.jsx(ls,{className:"h-4 w-4"}),variant:"accent",children:"Add Lead"})]}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4 p-4 bg-gradient-to-r from-gray-50/80 to-gray-100/50 rounded-xl border border-gray-200/60 shadow-sm relative z-10",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx(Os,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),o.jsx(_e,{type:"text",placeholder:"Search leads...",value:c,onChange:M=>u(M.target.value),className:"w-full bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 min-w-0 text-gray-900 placeholder:text-gray-500"})]}),o.jsx("div",{className:"relative z-20 w-full sm:w-[180px] flex-shrink-0",children:o.jsx(Se,{value:d,onChange:M=>h(M),options:[{value:"all",label:"All Status"},...kw],className:"w-full bg-white border-gray-200"})})]})]}),o.jsx(se,{children:f?o.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):a.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):o.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200/60 bg-white shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assigned To"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(M=>o.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/30 transition-all duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:M.customerName||"Unknown Customer"}),M.companyName&&o.jsx("div",{className:"text-sm text-gray-500",children:M.companyName}),!M.customerName&&!M.companyName&&M.id&&o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",M.id.substring(0,8),"..."]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:M.serviceNeeded||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:M.siteLocation||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Se,{value:M.status,onChange:E=>ae(M.id,E),options:kw,className:"min-w-[130px]"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?o.jsx(Se,{value:M.assignedTo||"",onChange:E=>I(M.id,E),options:[{value:"",label:"Unassigned"},...r.map(E=>({value:E.id,label:E.name}))],className:"min-w-[160px]"}):o.jsx("div",{className:"text-sm text-gray-900",children:!M.assignedTo||M.assignedTo===""?"Unassigned":M.assignedToName||"Unassigned"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{S(M),x(!0)},leftIcon:o.jsx(vi,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Edit"}),M.status==="qualified"&&o.jsx(V,{variant:"outline",size:"sm",onClick:()=>we(M),leftIcon:o.jsx(bA,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Convert to Deal"})]})})]},M.id))})]})})})]}),o.jsx(dt,{isOpen:p,onClose:()=>{g(!1),G()},title:"Create New Lead",size:"lg",children:o.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[o.jsx(ld,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(he,{label:"Full Name",value:D.fullName,onChange:M=>A(E=>({...E,fullName:M.target.value})),required:!0}),o.jsx(he,{label:"Company Name",value:D.companyName,onChange:M=>A(E=>({...E,companyName:M.target.value})),helperText:"Optional"}),o.jsx(he,{label:"Phone Number",type:"tel",value:D.phoneNumber,onChange:M=>A(E=>({...E,phoneNumber:M.target.value})),required:!0}),o.jsx(he,{label:"Email Address",type:"email",value:D.email,onChange:M=>A(E=>({...E,email:M.target.value})),required:!0}),o.jsx(Se,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...t8],value:D.machineryType,onChange:M=>A(E=>({...E,machineryType:M})),required:!0}),o.jsx(he,{label:"Site Location",value:D.location,onChange:M=>A(E=>({...E,location:M.target.value})),required:!0}),o.jsx(he,{label:"Start Date",type:"date",value:D.startDate,min:C,onChange:M=>A(E=>({...E,startDate:M.target.value})),required:!0}),o.jsx(he,{label:"Number of Rental Days",type:"number",min:"1",value:D.rentalDays,onChange:M=>{const E=Math.max(1,parseInt(M.target.value)||1);A(R=>({...R,rentalDays:E.toString()}))},required:!0}),o.jsx(Se,{label:"Shift Timing",options:n8,value:D.shiftTiming,onChange:M=>A(E=>({...E,shiftTiming:M})),required:!0}),o.jsx(he,{label:"Designation",value:D.designation,onChange:M=>A(E=>({...E,designation:M.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&o.jsx(Se,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...r.map(M=>({value:M.id,label:M.name}))],value:D.assignedTo,onChange:M=>A(E=>({...E,assignedTo:M})),required:!0})]}),o.jsx(Mn,{label:"Additional Notes",value:D.notes,onChange:M=>A(E=>({...E,notes:M.target.value})),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>{g(!1),G()},children:"Cancel"}),"            ",o.jsx(V,{type:"submit",variant:"accent",children:"Create Lead"})]})]})}),o.jsx(XV,{isOpen:v,onClose:()=>{w(!1),S(null),P(null),$(0)},onSelect:le,initialCustomerData:N?{name:N.customerName,email:N.email||"",phone:N.phone||"",companyName:N.companyName||"",address:"",designation:N.designation||""}:void 0}),o.jsx(dt,{isOpen:B,onClose:()=>{W(!1),S(null),P(null),$(0)},title:"Enter Deal Value",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(he,{label:"Deal Value",type:"number",value:F===0?"":F,onChange:M=>{const E=M.target.value;$(E===""?0:Number(E))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>{W(!1),S(null),P(null),$(0)},children:"Cancel"}),o.jsx(V,{onClick:ge,variant:"accent",children:"Create Deal"})]})]})}),o.jsx(dt,{isOpen:b,onClose:()=>{x(!1),S(null)},title:"Edit Lead Details",size:"lg",children:N&&o.jsxs("form",{onSubmit:ie,className:"space-y-6",children:[o.jsx(ld,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(he,{label:"Full Name",value:O.fullName,onChange:M=>T(E=>({...E,fullName:M.target.value})),required:!0}),o.jsx(he,{label:"Company Name",value:O.companyName,onChange:M=>T(E=>({...E,companyName:M.target.value})),helperText:"Optional"}),o.jsx(he,{label:"Phone Number",type:"tel",value:O.phoneNumber,onChange:M=>T(E=>({...E,phoneNumber:M.target.value})),required:!0}),o.jsx(he,{label:"Email Address",type:"email",value:O.email,onChange:M=>T(E=>({...E,email:M.target.value})),required:!0}),o.jsx(he,{label:"Service Needed",value:O.serviceNeeded,onChange:M=>T(E=>({...E,serviceNeeded:M.target.value})),required:!0}),o.jsx(he,{label:"Site Location",value:O.siteLocation,onChange:M=>T(E=>({...E,siteLocation:M.target.value})),required:!0}),o.jsx(he,{label:"Start Date",type:"date",value:O.startDate,onChange:M=>T(E=>({...E,startDate:M.target.value})),required:!0}),o.jsx(he,{label:"Rental Days",type:"number",min:"1",value:O.rentalDays.toString(),onChange:M=>T(E=>({...E,rentalDays:parseInt(M.target.value)||1})),required:!0}),o.jsx(he,{label:"Shift Timing",value:O.shiftTiming,onChange:M=>T(E=>({...E,shiftTiming:M.target.value})),placeholder:"e.g., Day Shift, Night Shift"}),o.jsx(Se,{label:"Status",value:O.status,onChange:M=>T(E=>({...E,status:M})),options:[{label:"New",value:"new"},{label:"In Process",value:"in_process"},{label:"Qualified",value:"qualified"},{label:"Unqualified",value:"unqualified"},{label:"Lost",value:"lost"},{label:"Converted",value:"converted"}],required:!0}),o.jsx(Se,{label:"Source",value:O.source,onChange:M=>T(E=>({...E,source:M})),options:[{label:"Select Source",value:""},{label:"Website",value:"website"},{label:"Referral",value:"referral"},{label:"Direct",value:"direct"},{label:"Social Media",value:"social"},{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Other",value:"other"}]})]}),o.jsx("div",{children:o.jsx(he,{label:"Designation",value:O.designation,onChange:M=>T(E=>({...E,designation:M.target.value})),placeholder:"Job title or role"})}),o.jsx("div",{children:o.jsx(Mn,{label:"Notes",value:O.notes,onChange:M=>T(E=>({...E,notes:M.target.value})),placeholder:"Additional notes or comments...",rows:3})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>{x(!1),S(null)},children:"Cancel"}),o.jsx(V,{type:"submit",variant:"accent",children:"Save Changes"})]})]})}),k.show&&o.jsx(mt,{title:k.title,variant:k.variant,isVisible:k.show,onClose:()=>j({show:!1,title:""})})]})}const r8="modulepreload",i8=function(e){return"/"+e},Ew={},Dw=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=i8(c),c in Ew)return;Ew[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":r8,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},a8={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1},{id:"sample-equipment-2",machineType:"mobile_crane",equipmentId:"crane-002",name:"100T Mobile Crane",baseRates:{micro:8e3,small:7500,monthly:7e3,yearly:6500},baseRate:7e3,runningCostPerKm:150,quantity:2}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",workingCost:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile_crane",otherFactors:["rigger","area","customer_reputation"],dealType:"credit",sundayWorking:"no"};function o8({template:e,quotation:t,onDownloadPDF:n,onSendEmail:s,className:r=""}){const[i,a]=y.useState(!1),[l,c]=y.useState(null),[u,d]=y.useState({show:!1,title:""});y.useEffect(()=>{if(!e){c("Template is required");return}if(!e.content){c("Template content is required");return}c(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t)},[e,t]);const h=t||a8,f=(w,b="success")=>{d({show:!0,title:w,variant:b}),setTimeout(()=>d({show:!1,title:""}),3e3)};let m="";try{e&&e.content?(m=e2(h,e),console.log("Generated merged content:",m?m.substring(0,100)+"...":"empty")):(console.warn("Cannot merge template - missing template or content"),m='<div style="padding: 20px;">Template content could not be loaded</div>')}catch(w){console.error("Error merging template:",w),c("Failed to merge template with quotation data"),m='<div style="padding: 20px; color: red;">Error generating preview</div>'}const g=t2().reduce((w,b)=>(w[b.category]||(w[b.category]=[]),w[b.category].push(b),w),{}),v=()=>{if(!m){f("No content to copy","error");return}navigator.clipboard.writeText(m).then(()=>{f("Content copied to clipboard","success")}).catch(()=>{f("Failed to copy content","error")})};return l?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[o.jsx("strong",{children:"Error:"})," ",l]})}):o.jsxs("div",{className:`space-y-4 sm:space-y-6 ${r}`,children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[o.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),o.jsxs(ee,{children:[o.jsx(fe,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o.jsx(fn,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsxs(V,{variant:"outline",size:"xs",onClick:()=>a(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(nr,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),o.jsx(V,{variant:"outline",size:"xs",onClick:v,disabled:!m,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&o.jsx(se,{className:"px-3 sm:px-6",children:o.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&o.jsxs(ee,{children:[o.jsx(fe,{className:"p-3 sm:p-6",children:o.jsx(me,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),o.jsxs(se,{className:"p-3 sm:p-6",children:[o.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(g).map(([w,b])=>o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:w}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:b.map(x=>o.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:x.description,onClick:()=>{navigator.clipboard.writeText(`{{${x.key}}}`),f(`Copied {{${x.key}}}`,"success")},children:`{{${x.key}}}`},x.key))})]},w))}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsx(me,{className:"text-base sm:text-lg",children:"Quotation Preview"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n&&o.jsxs(V,{variant:"outline",size:"xs",onClick:n,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(Gg,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),s&&o.jsxs(V,{variant:"outline",size:"xs",onClick:s,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(al,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),o.jsxs(se,{className:"p-3 sm:p-6",children:[l?o.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[o.jsxs("p",{className:"font-medium",children:["Error: ",l]}),o.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,m?o.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:m}}):o.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[o.jsx(Ye,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),o.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}),e&&!e.content&&o.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[o.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),o.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]}),u.show&&o.jsx(mt,{title:u.title,variant:u.variant,isVisible:u.show,onClose:()=>d({show:!1,title:""})})]})}const l8=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function c8(){const{user:e}=qe(),t=en(),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState([]),[c,u]=y.useState(""),[d,h]=y.useState("all"),[f,m]=y.useState(!0),[p,g]=y.useState(null),[v,w]=y.useState(null),[b,x]=y.useState(null),[N,S]=y.useState(!1),[k,j]=y.useState(!1),[C,D]=y.useState(""),[A,F]=y.useState(!1),[$,L]=y.useState(!1),[P,B]=y.useState({show:!1,title:""}),[W,O]=y.useState(null);y.useEffect(()=>{T()},[]),y.useEffect(()=>{U()},[n,c,d]);const T=async()=>{try{m(!0),g(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:I}=await Dw(async()=>{const{getCustomers:z}=await Promise.resolve().then(()=>Hv);return{getCustomers:z}},void 0);let G=[],Y=[],ie=[];try{G=await ZB(),console.log("QuotationManagement: Fetched quotations:",(G==null?void 0:G.length)||0)}catch(z){console.error("Error fetching quotations:",z),q("Warning: Could not load quotations","warning")}try{Y=await Jd(),console.log("QuotationManagement: Fetched deals:",(Y==null?void 0:Y.length)||0)}catch(z){console.error("Error fetching deals:",z),q("Warning: Could not load deals.","warning"),Y=[]}try{ie=await I(),console.log("QuotationManagement: Fetched customers:",(ie==null?void 0:ie.length)||0)}catch(z){console.error("Error fetching customers:",z),q("Warning: Could not load customers","warning")}const M=new Map;ie.forEach(z=>{M.set(z.id,z)}),G.length>0&&console.log("Sample quotation data:",{id:G[0].id,customerId:G[0].customerId,customerName:G[0].customerName,customerContact:G[0].customerContact,selectedEquipment:G[0].selectedEquipment}),ie.length>0&&console.log("Sample customer data:",{id:ie[0].id,name:ie[0].name});const E=G.map(z=>{const H={...z},X=M.get(z.customerId);return X?(console.log(`Found matching customer for quotation ${z.id}: ${X.name}`),H.customerName=H.customerName||X.name,H.customerContact=H.customerContact||{},H.customerContact.name||(H.customerContact.name=X.contactName),H.customerContact.company||(H.customerContact.company=X.name),H.customerContact.email||(H.customerContact.email=X.email),H.customerContact.phone||(H.customerContact.phone=X.phone),H.customerContact.address||(H.customerContact.address=X.address)):console.log(`No matching customer found for quotation ${z.id} with customerId ${z.customerId}`),H.customerName=H.customerName||"Unknown Customer",H.customerContact=H.customerContact||{},H.customerContact.name=H.customerContact.name||"Contact Not Available",H.customerContact.company=H.customerContact.company||"No Company",H});s(E);const R=Y.filter(z=>z.stage==="qualification"||z.stage==="proposal");i(R),await _()}catch(I){console.error("Error fetching data:",I),g("Failed to load quotations. Please try again."),q("Error fetching data","error")}finally{m(!1)}},_=async()=>{try{const I=await zC();if(I&&I.defaultTemplateId){const Y=await LC(I.defaultTemplateId);if(Y){console.log("Loaded template from config:",Y),x(Y);return}}try{const ie=await(await Dw(()=>Promise.resolve().then(()=>Hv),void 0)).getTemplates();if(ie&&ie.length>0){const M=ie.find(E=>E.isDefault)||ie[0];console.log("Loaded template from templateService:",M),x(M);return}}catch(Y){console.error("Error loading templates from service:",Y)}const G={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),x(G)}catch(I){console.error("Error loading default template:",I);const G={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};x(G)}},U=()=>{let I=[...n];c&&(I=I.filter(G=>{var Y,ie,M;return(((Y=G.customerContact)==null?void 0:Y.name)||G.customerName||"").toLowerCase().includes(c.toLowerCase())||(((ie=G.customerContact)==null?void 0:ie.company)||"").toLowerCase().includes(c.toLowerCase())||(G.machineType||"").toLowerCase().includes(c.toLowerCase())||G.selectedMachines&&G.selectedMachines.some(E=>(E.name||"").toLowerCase().includes(c.toLowerCase()))||(((M=G.selectedEquipment)==null?void 0:M.name)||"").toLowerCase().includes(c.toLowerCase())})),d!=="all"&&(I=I.filter(G=>G.status===d)),l(I)},q=(I,G="success",Y)=>{B({show:!0,title:I,description:Y,variant:G}),setTimeout(()=>{B({show:!1,title:""})},5e3)},Z=()=>{if(!C){q("Please select a deal","warning");return}console.log("[handleProceedWithDeal] Navigating to /quotations/create?dealId="+C),t(`/quotations/create?dealId=${C}`),j(!1),D("")},ae=async I=>{try{if(O(I.id),console.log("Editing quotation:",I),!I.leadId){q("Invalid quotation data","error","Missing lead ID");return}if(!await fl(I.leadId)){q("Associated deal not found","error","The deal associated with this quotation no longer exists");return}console.log("Navigating to:",`/quotations/create?dealId=${I.leadId}&quotationId=${I.id}`),t(`/quotations/create?dealId=${I.leadId}&quotationId=${I.id}`)}catch(G){console.error("Error preparing quotation edit:",G),q("Error preparing quotation edit","error")}finally{O(null)}},le=async I=>{var G,Y,ie,M;try{if(F(!0),!b){q("No default template configured","warning","Please set a default template in Configuration settings.");return}let E=b.content;E=E.replace(/\{\{customer_name\}\}/g,((G=I.customerContact)==null?void 0:G.name)||I.customerName||""),E=E.replace(/\{\{equipment_name\}\}/g,((Y=I.selectedEquipment)==null?void 0:Y.name)||""),E=E.replace(/\{\{project_duration\}\}/g,`${I.numberOfDays} days`),E=E.replace(/\{\{total_amount\}\}/g,((ie=I.totalRent)==null?void 0:ie.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");const R=window.open("","_blank");if(!R){q("Popup blocked","error","Please allow popups to download PDF.");return}R.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((M=I.customerContact)==null?void 0:M.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${E}
        </body>
        </html>
      `),await new Promise(z=>setTimeout(z,1e3)),R.document.close(),R.print(),R.close(),q("PDF generated successfully","success")}catch(E){console.error("Error generating PDF:",E),q("Failed to generate PDF","error")}finally{F(!1)}},ge=async I=>{var G,Y,ie,M,E,R;try{if(L(!0),!b){q("No default template configured","warning","Please set a default template in Configuration settings.");return}let z=b.content;z=z.replace(/\{\{customer_name\}\}/g,((G=I.customerContact)==null?void 0:G.name)||I.customerName||""),z=z.replace(/\{\{equipment_name\}\}/g,((Y=I.selectedEquipment)==null?void 0:Y.name)||""),z=z.replace(/\{\{project_duration\}\}/g,`${I.numberOfDays} days`),z=z.replace(/\{\{total_amount\}\}/g,((ie=I.totalRent)==null?void 0:ie.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");let H="Equipment";I.selectedMachines&&I.selectedMachines.length>1?H=`${I.selectedMachines.length} machines (${I.selectedMachines.map(xe=>xe.name).join(", ")})`:I.selectedMachines&&I.selectedMachines.length===1?H=I.selectedMachines[0].name:(M=I.selectedEquipment)!=null&&M.name?H=I.selectedEquipment.name:I.machineType&&(H=I.machineType);const X=`Quotation from ASP Cranes - ${I.id.slice(0,8).toUpperCase()}`,ve=((E=I.customerContact)==null?void 0:E.name)||I.customerName||"Customer",K=((R=I.customerContact)==null?void 0:R.email)||"",Ne=`Dear ${ve},

Please find your quotation details for ${H} below:

${z}

Best regards,
ASP Cranes Team`,Ae=`mailto:${K}?subject=${encodeURIComponent(X)}&body=${encodeURIComponent(Ne)}`;window.open(Ae),q("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(z){console.error("Error sending to customer:",z),q("Error preparing email","error")}finally{L(!1)}},we=y.useMemo(()=>r.length===0?[{value:"",label:"No deals available"}]:r.map(I=>{var G,Y;return{value:I.id,label:`${((G=I.customer)==null?void 0:G.name)||"Unnamed"} - ${((Y=I.customer)==null?void 0:Y.company)||"No Company"} (${De(I.value)})`}}),[r]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",o.jsx(V,{onClick:()=>j(!0),className:"w-full sm:w-auto",leftIcon:o.jsx(ls,{className:"w-4 h-4"}),variant:"accent",children:"Create New Quotation"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[o.jsx("div",{className:"flex-1",children:o.jsx(_e,{placeholder:"Search by customer, company or equipment...",value:c,onChange:I=>u(I.target.value),leftIcon:o.jsx(Os,{className:"w-4 h-4"}),disabled:f})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsx(Se,{options:l8,value:d,onChange:h,leftIcon:o.jsx(AA,{className:"w-4 h-4"}),disabled:f})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Quotation History"})}),o.jsx(se,{className:"px-0 sm:px-6",children:f?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(Ye,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"text-center py-8 text-red-500",children:[o.jsx(Vd,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),o.jsx("p",{className:"text-lg font-medium",children:p}),o.jsx(V,{variant:"outline",size:"sm",onClick:T,className:"mt-4",children:"Try Again"})]}):a.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(fn,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),o.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(I=>{var G,Y,ie,M;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-start flex-col",children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((G=I.customerContact)==null?void 0:G.name)||I.customerName||"Customer"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((Y=I.customerContact)==null?void 0:Y.company)||I.customerName||"No Company"}),o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",I.customerId?I.customerId.substring(0,8):"None"]}),o.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:I.selectedMachines&&I.selectedMachines.length>0?I.selectedMachines.length===1?I.selectedMachines[0].name:`${I.selectedMachines.length} machines`:((ie=I.selectedEquipment)==null?void 0:ie.name)||I.machineType||"No equipment data"}),o.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:De(I.totalRent)})]})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:I.selectedMachines&&I.selectedMachines.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:I.selectedMachines.map(E=>E.name).join(", ")}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[I.selectedMachines.length," machine",I.selectedMachines.length>1?"s":""]})]}):(M=I.selectedEquipment)!=null&&M.name?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:I.selectedEquipment.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment"})]}):I.machineType?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:I.machineType}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment Type"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Type not specified"})]})}),o.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[o.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[I.numberOfDays," days"]}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[I.workingHours," hrs/day"]})]}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:De(I.totalRent)}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsx(Vl,{status:I.status})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(V,{variant:"ghost",size:"xs",onClick:()=>ae(I),title:"Edit Quotation",disabled:f||W===I.id,children:W===I.id?o.jsx(Ye,{size:14,className:"animate-spin"}):o.jsx(vi,{size:14})}),o.jsx(V,{variant:"ghost",size:"xs",onClick:()=>{w(I),S(!0)},title:"Preview Quotation",disabled:!b||f,children:o.jsx(oS,{size:14})}),o.jsx(V,{variant:"ghost",size:"xs",onClick:()=>le(I),disabled:A||!b||f,title:"Download PDF",children:A?o.jsx(Ye,{size:14,className:"animate-spin"}):o.jsx(Gg,{size:14})}),o.jsx(V,{variant:"ghost",size:"xs",onClick:()=>ge(I),disabled:$||!b||f,title:"Send to Customer",children:$?o.jsx(Ye,{size:14,className:"animate-spin"}):o.jsx(al,{size:14})})]})})]},I.id)})})]})})})]}),o.jsx(dt,{isOpen:k,onClose:()=>{j(!1),D("")},title:"Create New Quotation",size:"lg",children:o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",o.jsx(Se,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...we.filter(I=>I.value!=="")],value:C,onChange:D,label:"Available Deals",disabled:f,required:!0}),C&&o.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const I=r.find(G=>G.id===C);return I?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),o.jsx("p",{className:"text-blue-800",children:I.customer.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),o.jsx("p",{className:"text-blue-800",children:I.customer.company})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),o.jsx("p",{className:"text-blue-800",children:De(I.value)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),o.jsx("p",{className:"text-blue-800 capitalize",children:I.stage})]})]})]}):null})()})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[o.jsx(V,{variant:"outline",onClick:()=>{j(!1),D("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),o.jsxs(V,{onClick:Z,disabled:!C||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",variant:"accent",children:[f?o.jsx(Ye,{className:"w-4 h-4 animate-spin"}):o.jsx(ls,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),o.jsx(dt,{isOpen:N,onClose:()=>S(!1),title:"Quotation Preview",size:"full",children:v&&b&&o.jsx(o8,{quotation:v,template:b,onDownloadPDF:()=>le(v),onSendEmail:()=>ge(v)})}),P.show&&o.jsx(mt,{title:P.title,variant:P.variant,isVisible:P.show,onClose:()=>B({show:!1,title:""})})]})})}const Tw={micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:30},yearly:{minDays:31,maxDays:366}},u8=eS(e=>({orderTypeLimits:Tw,isLoading:!1,error:null,fetchConfig:async()=>{try{e({isLoading:!0,error:null});const t=await xp();t&&t.orderTypeLimits?e({orderTypeLimits:t.orderTypeLimits}):(console.log("Using default quotation config limits"),e({orderTypeLimits:Tw}))}catch(t){console.error("Error fetching quotation config:",t),e({error:"Failed to fetch quotation configuration"})}finally{e({isLoading:!1})}},updateConfig:async t=>{try{e({isLoading:!0,error:null}),e({orderTypeLimits:t}),await UC({orderTypeLimits:t})}catch(n){console.error("Error updating quotation config:",n),e({error:"Failed to update quotation configuration"});const s=await xp();s!=null&&s.orderTypeLimits&&e({orderTypeLimits:s.orderTypeLimits})}finally{e({isLoading:!1})}}})),d8=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],h8=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],f8=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],m8=[{value:"day",label:"Day"},{value:"night",label:"Night"}],p8=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],Lc=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],g8=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],x8=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],Fc=[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}],Mf=4e4,Rf=12e3;function y8(){var ge,we,I,G,Y,ie,M;const{user:e}=qe(),t=en(),[n]=L_(),s=n.get("dealId")||"",r=n.get("quotationId");y.useEffect(()=>{console.log("[QuotationCreation] Loaded with dealId:",s,"quotationId:",r),s||console.warn("[QuotationCreation] No dealId provided - creating new quotation")},[s,r,t]);const{orderTypeLimits:i,fetchConfig:a}=u8(),[l,c]=y.useState(null),[u,d]=y.useState([]),[h,f]=y.useState(!0),[m,p]=y.useState(!1),[g,v]=y.useState(0),[w,b]=y.useState({foodRate:0,accommodationRate:0,transportRate:0}),[x,N]=y.useState({duration:!0,orderType:!0,machineSelection:!0,workingHours:!0,accommodation:!0,mobDemob:!0,additional:!0}),[S,k]=y.useState({show:!1,title:""}),[j,C]=y.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:Lc[0].value,sundayWorking:"no"}),[D,A]=y.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});y.useEffect(()=>{F()},[s,r]),y.useEffect(()=>{L()},[j,g]),y.useEffect(()=>{j.workingHours!==void 0&&L()},[j.workingHours]),y.useEffect(()=>{var E;if(j.orderType&&((E=j.selectedEquipment)!=null&&E.id)&&Array.isArray(u)&&u.length>0){const R=u.find(z=>z.id===j.selectedEquipment.id);if(R!=null&&R.baseRates){const z=R.baseRates[j.orderType];v(z)}}j.selectedMachines.length>0&&Array.isArray(u)&&u.length>0&&C(R=>({...R,selectedMachines:R.selectedMachines.map(z=>{const H=u.find(X=>X.id===z.id);return H!=null&&H.baseRates?{...z,baseRate:H.baseRates[j.orderType]||z.baseRate}:z})}))},[j.orderType,u.length]),y.useEffect(()=>{j.machineType?(async()=>{try{const R=await Jv(j.machineType);d(Array.isArray(R)?R:[])}catch(R){console.error("Error fetching equipment:",R),d([])}})():d([])},[j.machineType]),y.useEffect(()=>{if(j.selectedEquipment&&Array.isArray(u)&&u.length>0){const E=u.find(R=>R.id===j.selectedEquipment.id);if(E!=null&&E.baseRates){const R=E.baseRates[j.orderType];v(R),C(z=>({...z,baseRate:R,runningCostPerKm:E.runningCostPerKm||0}))}}},[j.orderType,j.selectedEquipment,u]);const F=async()=>{var E,R,z,H;try{if(f(!0),console.log("[QuotationCreation] Fetching data with dealId:",s,"quotationId:",r),s){let K=null;try{K=await fl(s),console.log("[QuotationCreation] Fetched deal data:",K),c(K)}catch(Ne){console.error("[QuotationCreation] Error fetching deal by ID:",Ne),T("Warning: Could not load deal details. You can still create a quotation.","warning"),c({id:s,customer:{name:"Unknown Customer",email:"",phone:"",company:"Unknown Company",address:"",designation:""},title:"Unknown Deal",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()})}}else c({id:"new",customer:{name:"New Customer",email:"",phone:"",company:"",address:"",designation:""},title:"New Quotation",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()});const X=await wx();console.log("Fetched equipment data:",X);const ve=await VC();if(console.log("Fetched resource rates:",ve),b(ve),r){console.log("Fetching existing quotation:",r);const K=await XB(r);if(console.log("Fetched quotation data:",K),K){C(xe=>({...xe,machineType:K.machineType||""})),await new Promise(xe=>setTimeout(xe,100));const Ne=await Jv(K.machineType);d(Ne),await new Promise(xe=>setTimeout(xe,100));let Ae=[];if(K.selectedMachines&&K.selectedMachines.length>0)Ae=K.selectedMachines.map(xe=>{var Pe;const Ie=Ne.find(Fs=>Fs.id===xe.id);return{...xe,machineType:xe.machineType||K.machineType||"",name:(Ie==null?void 0:Ie.name)||xe.name||"Unknown Equipment",baseRates:(Ie==null?void 0:Ie.baseRates)||xe.baseRates,baseRate:((Pe=Ie==null?void 0:Ie.baseRates)==null?void 0:Pe[K.orderType])||xe.baseRate||0,quantity:xe.quantity||1}}),console.log("Loaded machines from selectedMachines:",Ae);else if(K.selectedEquipment){const xe=Ne.find(Ie=>Ie.id===K.selectedEquipment.id);Ae=[{id:K.selectedEquipment.id,machineType:K.machineType||"",equipmentId:K.selectedEquipment.equipmentId,name:(xe==null?void 0:xe.name)||K.selectedEquipment.name||"Unknown Equipment",baseRates:(xe==null?void 0:xe.baseRates)||K.selectedEquipment.baseRates,baseRate:((E=xe==null?void 0:xe.baseRates)==null?void 0:E[K.orderType])||((z=(R=K.selectedEquipment)==null?void 0:R.baseRates)==null?void 0:z[K.orderType])||0,runningCostPerKm:K.runningCostPerKm||0,quantity:1}],console.log("Created machine from selectedEquipment:",Ae)}if(C({machineType:K.machineType||"",selectedEquipment:K.selectedEquipment||{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:Ae,orderType:K.orderType||"micro",numberOfDays:K.numberOfDays||0,workingHours:K.workingHours||8,foodResources:K.foodResources||0,accomResources:K.accomResources||0,siteDistance:K.siteDistance||0,usage:K.usage||"normal",riskFactor:K.riskFactor||"low",extraCharge:K.extraCharge||0,incidentalCharges:K.incidentalCharges||[],otherFactorsCharge:K.otherFactorsCharge||0,billing:K.billing||"gst",includeGst:K.includeGst??!0,shift:K.shift||"single",dayNight:K.dayNight||"day",mobDemob:K.mobDemob||0,mobRelaxation:K.mobRelaxation||0,runningCostPerKm:K.runningCostPerKm||0,version:K.version||1,createdBy:K.createdBy||(e==null?void 0:e.id)||"",status:K.status||"draft",otherFactors:K.otherFactors||[],dealType:K.dealType,sundayWorking:K.sundayWorking}),Ae.length>0){const xe=Ae[0];v(xe.baseRate),console.log("Setting selected equipment base rate to:",xe.baseRate)}else if((H=K.selectedEquipment)!=null&&H.baseRates){const xe=K.selectedEquipment.baseRates[K.orderType];v(xe),console.log("Setting selected equipment base rate from baseRates:",xe)}console.log("Form data updated with quotation data")}else{T("Quotation not found","error"),t("/quotations");return}}await a(),console.log("Quotation config fetched")}catch(X){console.error("Error fetching data:",X),T("Error fetching data","error")}finally{f(!1)}},$=E=>E<=0?"micro":E>=i.yearly.minDays?"yearly":E>=i.monthly.minDays?"monthly":E>=i.small.minDays?"small":"micro",L=()=>{console.log("Calculating quotation with working hours:",j.workingHours);const E=j.selectedMachines.length>0,R=g;if(!j.numberOfDays||!E&&!R){A({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const z=Number(j.numberOfDays),H=z>25,X=H?26:z,ve=P(X),K=j.shift==="double"?2:1;let Ne=0;const Ae=j.workingHours===0?8:Number(j.workingHours)||8;E?j.selectedMachines.forEach(tn=>{const Ci=tn.baseRate,Ia=tn.quantity;let Oa=0;H?Oa=Ci/26/Ae*Ae*X*K*Ia:Oa=Ci*Ae*X*K*Ia,Ne+=Oa}):H?Ne=R/26/Ae*Ae*X*K:Ne=R*Ae*X*K;const xe=j.usage==="heavy"?.1:.05;let Ie=0;E?j.selectedMachines.forEach(tn=>{Ie+=tn.baseRate*tn.quantity*xe}):Ie=R*xe;let Pe;if(H)Pe=Number(j.foodResources)*((w==null?void 0:w.foodRate)??0)+Number(j.accomResources)*((w==null?void 0:w.accommodationRate)??0);else{const tn=((w==null?void 0:w.foodRate)??0)/26,Ci=((w==null?void 0:w.accommodationRate)??0)/26;Pe=(Number(j.foodResources)*tn+Number(j.accomResources)*Ci)*X}const Fs=B();let us=0;const py=j.riskFactor==="high"?.15:j.riskFactor==="medium"?.1:.05;E?j.selectedMachines.forEach(tn=>{us+=tn.baseRate*tn.quantity*py}):us=R*py;const nD=j.incidentalCharges.reduce((tn,Ci)=>{const Ia=Fc.find(Oa=>Oa.value===Ci);return tn+(Ia?Ia.amount:0)},0);let xh=0;j.otherFactors.includes("rigger")&&(xh+=Mf),j.otherFactors.includes("helper")&&(xh+=Rf);const gy=Number(j.extraCharge)+nD+xh,xy=Ne+Pe+Fs+us+Ie+gy,yy=j.includeGst?xy*.18:0,sD=xy+yy;A({baseRate:R,totalHours:H?0:ve,workingCost:Ne,mobDemobCost:Fs,foodAccomCost:Pe,usageLoadFactor:Ie,extraCharges:gy,riskAdjustment:us,gstAmount:yy,totalAmount:sD})},P=E=>{const R=j.workingHours===0?8:Number(j.workingHours)||8,z=j.shift==="double"?2:1;return R*E*z},B=()=>{const E=Number(j.siteDistance),R=Number(j.mobDemob)||0,z=Number(j.mobRelaxation)||0;if(j.selectedMachines.length>0){let H=0;return j.selectedMachines.forEach(X=>{let ve=X.runningCostPerKm||0;if(ve===0&&Array.isArray(u)){const xe=u.find(Ie=>Ie.id===X.id);xe&&(ve=(xe==null?void 0:xe.runningCostPerKm)??0)}const K=E*ve*2*X.quantity,Ne=K*z/100,Ae=K-Ne+R*X.quantity;H+=Ae}),H}else{const H=Array.isArray(u)?u.find(Ae=>Ae.id===j.selectedEquipment.id):null,X=(H==null?void 0:H.runningCostPerKm)??0,ve=E*X*2,K=ve*z/100;return ve-K+R}},W=E=>{N(R=>({...R,[E]:!R[E]}))},O=async E=>{var R,z,H,X,ve,K,Ne,Ae,xe,Ie;if(E.preventDefault(),!l&&s&&T("Deal information is not available. Creating quotation with available data.","warning"),j.selectedMachines.length===0&&!j.selectedEquipment.id){T("Please select at least one machine","error");return}if(j.numberOfDays<=0){T("Please enter valid number of days","error");return}try{p(!0),console.log("Current calculations:",D);const Pe={...j,dealId:(l==null?void 0:l.id)||s||"new",leadId:(l==null?void 0:l.leadId)||"",customerId:(l==null?void 0:l.customerId)||"",customerName:((R=l==null?void 0:l.customer)==null?void 0:R.name)||"New Customer",customerContact:{name:((z=l==null?void 0:l.customer)==null?void 0:z.name)||"New Customer",email:((H=l==null?void 0:l.customer)==null?void 0:H.email)||"",phone:((X=l==null?void 0:l.customer)==null?void 0:X.phone)||"",company:((ve=l==null?void 0:l.customer)==null?void 0:ve.company)||"",address:((K=l==null?void 0:l.customer)==null?void 0:K.address)||"",designation:((Ne=l==null?void 0:l.customer)==null?void 0:Ne.designation)||""},selectedEquipment:j.selectedEquipment,selectedMachines:j.selectedMachines,totalRent:D.totalAmount,baseRate:D.baseRate,workingCost:D.workingCost,mobDemobCost:D.mobDemobCost,foodAccomCost:D.foodAccomCost,usageLoadFactor:D.usageLoadFactor,extraCharges:D.extraCharges,riskAdjustment:D.riskAdjustment,gstAmount:D.gstAmount,sundayWorking:j.sundayWorking||"no"};console.log("Submitting quotation data:",Pe);let Fs;r?(Fs=await KB(r,{...Pe,version:j.version+1}),T("Quotation updated successfully","success")):(console.log("🔍 Creating quotation with data:",{...Pe,selectedMachines:((Ae=Pe.selectedMachines)==null?void 0:Ae.map(us=>({id:us.id,name:us.name,quantity:us.quantity,baseRate:us.baseRate})))||[]}),Fs=await JB(Pe),T("Quotation created successfully","success")),console.log("Saved quotation:",Fs),t("/quotations")}catch(Pe){console.error("❌ Error saving quotation:",Pe),console.error("❌ Error details:",{message:Pe==null?void 0:Pe.message,response:((xe=Pe==null?void 0:Pe.response)==null?void 0:xe.data)||(Pe==null?void 0:Pe.response),status:(Ie=Pe==null?void 0:Pe.response)==null?void 0:Ie.status}),T("Error saving quotation","error")}finally{p(!1)}},T=(E,R="success",z)=>{k({show:!0,title:E,variant:R,description:z}),setTimeout(()=>k({show:!1,title:""}),3e3)},_=E=>{const R=Array.isArray(u)?u.find(z=>z.id===E):null;if(R&&R.baseRates){const z=R.baseRates[j.orderType];v(z),C(H=>({...H,selectedEquipment:{id:R.id,equipmentId:R.equipmentId,name:R.name,baseRates:R.baseRates},runningCostPerKm:R.runningCostPerKm||0}))}},U=E=>{C(R=>({...R,machineType:E,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}}})),v(0)},q=()=>{var H;if(!j.machineType||!j.selectedEquipment.id){T("Please select a machine type and equipment first","warning");return}if(j.selectedMachines.some(X=>X.id===j.selectedEquipment.id)){ae(j.selectedEquipment.id,1);return}const R=Array.isArray(u)?u.find(X=>X.id===j.selectedEquipment.id):null;if(!R){T("Selected equipment not found","error");return}const z={id:R.id,machineType:j.machineType,equipmentId:R.equipmentId,name:R.name,baseRates:R.baseRates||{},baseRate:((H=R.baseRates)==null?void 0:H[j.orderType])||0,runningCostPerKm:R.runningCostPerKm||0,quantity:1};C(X=>({...X,selectedMachines:[...X.selectedMachines,z]})),C(X=>({...X,machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},baseRate:0})),v(0)},Z=E=>{C(R=>({...R,selectedMachines:R.selectedMachines.filter(z=>z.id!==E)}))},ae=(E,R)=>{C(z=>({...z,selectedMachines:z.selectedMachines.map(H=>{if(H.id===E){const X=Math.max(1,H.quantity+R);return{...H,quantity:X}}return H})}))},le=(E,R)=>{C(z=>({...z,selectedMachines:z.selectedMachines.map(H=>H.id===E?{...H,baseRate:R}:H)}))};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):h?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsx("style",{children:`
          /* Remove number input spinners */
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:o.jsx(qg,{size:16}),className:"self-start",children:"Back"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:r?"Edit Quotation":"Create Quotation"}),o.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",((ge=l==null?void 0:l.customer)==null?void 0:ge.name)||"New Customer"," - ",(l==null?void 0:l.title)||"New Quotation"]})]})]})}),o.jsxs("div",{className:"max-w-full md:max-w-7xl mx-auto px-2 sm:px-4",children:[o.jsxs(ee,{className:"mb-4 sm:mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),o.jsx(me,{className:"text-base sm:text-lg font-medium",children:"Customer Information"})]})}),o.jsx(se,{children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Customer Name"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(we=l==null?void 0:l.customer)!=null&&we.name?l.customer.name:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Company"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(I=l==null?void 0:l.customer)!=null&&I.company?l.customer.company:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Designation"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(G=l==null?void 0:l.customer)!=null&&G.designation?l.customer.designation:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Email"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900 break-all",children:(Y=l==null?void 0:l.customer)!=null&&Y.email?l.customer.email:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Phone"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(ie=l==null?void 0:l.customer)!=null&&ie.phone?l.customer.phone:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Address"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:(M=l==null?void 0:l.customer)!=null&&M.address?l.customer.address:o.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})})]}),o.jsxs("form",{onSubmit:O,children:[o.jsx(ld,{}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"col-span-7 space-y-6",children:[o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("duration"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(os,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Duration"})]}),x.duration?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.duration&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(he,{type:"number",label:"Number of Days",value:j.numberOfDays||"",onChange:E=>{const R=E.target.value===""?0:Number(E.target.value),z=$(R);console.log(`Days: ${R}, Order Type: ${z}`),C(H=>{const X=R>0&&z!==H.orderType;let ve=[...H.selectedMachines];return X&&(ve=H.selectedMachines.map(K=>{var Ne;return{...K,baseRate:((Ne=K.baseRates)==null?void 0:Ne[z])||K.baseRate}})),{...H,numberOfDays:R,orderType:R>0?z:H.orderType,selectedMachines:ve}})},required:!0,min:"1",placeholder:"Enter number of days"}),j.numberOfDays>0&&g>0&&o.jsxs("div",{className:"mt-2 space-y-1",children:[j.orderType!=="monthly"?o.jsxs("div",{className:"text-sm text-gray-600",children:["Daily Rate: ",De(g*(j.workingHours===0?8:Number(j.workingHours)||8)),"/day"]}):o.jsxs("div",{className:"text-sm text-gray-600",children:["Monthly Rate: ",De(g),"/month"]}),o.jsx("div",{className:"text-sm font-medium text-primary-600",children:Number(j.numberOfDays)>=i.yearly.minDays?"Yearly rate":Number(j.numberOfDays)>=i.monthly.minDays?"Monthly rate":Number(j.numberOfDays)>=i.small.minDays?"Small order rate":"Micro order rate"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("orderType"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(fn,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Order Type"})]}),x.orderType?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.orderType&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(Se,{label:"Order Type",options:d8,value:j.orderType,onChange:E=>{Number(j.numberOfDays)===0&&C(R=>({...R,orderType:E}))},disabled:Number(j.numberOfDays)>0}),Number(j.numberOfDays)>0?o.jsx("div",{className:"mt-2 text-sm text-amber-600",children:Number(j.numberOfDays)>=i.yearly.minDays?"Order type is set to Yearly as duration exceeds "+(i.yearly.minDays-1)+" days":Number(j.numberOfDays)>=i.monthly.minDays?"Order type is set to Monthly as duration exceeds "+(i.monthly.minDays-1)+" days":Number(j.numberOfDays)>=i.small.minDays?"Order type is set to Small as duration is between "+i.small.minDays+"-"+i.small.maxDays+" days":"Order type is set to Micro as duration is "+i.micro.maxDays+" days or less"}):o.jsxs("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[o.jsx(nr,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Order type will be automatically set based on the number of days"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("machineSelection"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(cn,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx(me,{className:"text-lg font-medium",children:"Machine Selection"}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:["You can add multiple machines to this quotation",o.jsxs("span",{className:"ml-1 cursor-help text-gray-400 hover:text-gray-600 relative group",children:[o.jsx(nr,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden group-hover:block absolute left-full ml-2 top-0 bg-gray-800 text-white text-xs rounded p-2 w-48",children:"Add different types of machines or multiple units of the same machine using the Add Machine button"})]})]})]})]}),x.machineSelection?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.machineSelection&&o.jsxs(se,{className:"pt-4 space-y-4",children:[Array.isArray(j.selectedMachines)&&j.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",j.selectedMachines.length,")"]}),o.jsx("span",{className:"text-xs text-gray-500 mb-2",children:"You can edit the base rate and quantity for each machine"})]}),o.jsx("div",{className:"space-y-3 bg-gray-50 p-3 rounded-md border border-gray-200",children:(Array.isArray(j.selectedMachines)?j.selectedMachines:[]).map(E=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("div",{className:"font-semibold text-gray-900",children:E.name}),o.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["ID: ",E.equipmentId]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-gray-50 p-2 rounded-md border border-gray-100",children:[o.jsx("label",{className:"text-xs font-medium text-gray-900",children:"Base Rate:"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-sm text-gray-900",value:E.baseRate,onChange:R=>{const z=Number(R.target.value);isNaN(z)||le(E.id,z)}}),o.jsx("span",{className:"text-xs text-gray-700",children:j.orderType==="monthly"?"/month":"/hr"})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-3",children:[o.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-error-500 transition-colors duration-150",onClick:()=>Z(E.id),title:"Remove machine",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Quantity"}),o.jsxs("div",{className:"flex items-center border rounded-md overflow-hidden",children:[o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>ae(E.id,-1),disabled:E.quantity<=1,children:"-"}),o.jsx("span",{className:"px-3 py-1 font-medium",children:E.quantity}),o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>ae(E.id,1),children:"+"})]})]})]})]},E.id))})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Add Machine"}),o.jsx(Se,{label:"Machine Type",options:h8,value:j.machineType,onChange:E=>{U(E)}}),j.machineType&&o.jsx("div",{className:"mt-3",children:o.jsx(Se,{label:"Select Equipment",options:[{value:"",label:"Select equipment..."},...(Array.isArray(u)?u:[]).map(E=>{var R;return{value:E.id,label:`${E.equipmentId} - ${E.name} (${De(((R=E.baseRates)==null?void 0:R[j.orderType])||0)}${j.orderType==="monthly"?"/month":"/hr"})`}})],value:j.selectedEquipment.id,onChange:E=>{_(E)}})}),!(Array.isArray(u)&&u.length)&&j.machineType&&o.jsx("div",{className:"text-sm text-amber-600 mt-2",children:"No available equipment found for this machine type"}),o.jsxs("div",{className:"mt-4",children:[o.jsx(V,{type:"button",variant:"default",onClick:q,leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),disabled:!j.machineType||!j.selectedEquipment.id,className:"w-full",size:"default",children:j.selectedMachines.length===0?"Add Machine to Quotation":"Add Another Machine"}),j.selectedMachines.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 text-center mt-2",children:["You have added ",j.selectedMachines.length," machine",j.selectedMachines.length>1?"s":""," to this quotation"]})]})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("workingHours"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Vn,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Working Hours"})]}),x.workingHours?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.workingHours&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(Se,{label:"Shift",options:f8,value:j.shift,onChange:E=>{C(R=>({...R,shift:E}))}}),o.jsxs("div",{children:[o.jsx(he,{type:"number",label:"Number of Hours",value:j.workingHours===0?"":j.workingHours,onChange:E=>{const R=E.target.value;if(R==="")C(z=>({...z,workingHours:0}));else if(/^\d+$/.test(R)){const z=parseInt(R,10);z>=1&&z<=24&&C(H=>({...H,workingHours:z}))}},required:!0,min:"1",max:"24",placeholder:"Enter hours (default: 8)",step:"1",autoComplete:"off"}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(Vn,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Standard single shift duration is 8 hours"})]})]}),o.jsx(Se,{label:"Day/Night",options:m8,value:j.dayNight,onChange:E=>C(R=>({...R,dayNight:E}))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"sundayWorking",checked:j.sundayWorking==="yes",onChange:E=>C(R=>({...R,sundayWorking:E.target.checked?"yes":"no"})),className:"rounded border-gray-300"}),o.jsx("label",{htmlFor:"sundayWorking",className:"text-sm",children:"Sunday Working"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("accommodation"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx($d,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Accommodation"})]}),x.accommodation?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.accommodation&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx(he,{type:"number",label:"Number of Resources",value:j.foodResources||"",onChange:E=>C(R=>({...R,foodResources:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: ₹2500/month per resource"})]}),o.jsxs("div",{children:[o.jsx(he,{type:"number",label:"Number of Resources",value:j.accomResources||"",onChange:E=>C(R=>({...R,accomResources:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: ₹4000/month per resource"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("mobDemob"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(cn,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Mob - Demob"})]}),x.mobDemob?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.mobDemob&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx("div",{children:o.jsx(he,{type:"number",label:"Distance to Site (km)",value:j.siteDistance||"",onChange:E=>C(R=>({...R,siteDistance:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter distance in kilometers"})}),o.jsx("div",{children:o.jsx(he,{type:"number",label:"Trailer Cost",value:j.mobDemob||"",onChange:E=>C(R=>({...R,mobDemob:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter additional trailer charges"})}),o.jsxs("div",{children:[o.jsx(he,{type:"number",label:"Mob Relaxation",value:j.mobRelaxation||"",onChange:E=>C(R=>({...R,mobRelaxation:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter relaxation value (X%)"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Enter percentage value for discount on distance cost"})]})]})]}),o.jsxs(ee,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>W("additional"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ol,{className:"w-5 h-5 text-gray-500"}),o.jsx(me,{className:"text-lg font-medium",children:"Additional Parameters"})]}),x.additional?o.jsx(Ar,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ws,{className:"h-5 w-5 text-gray-400"})]})}),x.additional&&o.jsxs(se,{className:"pt-4 space-y-4",children:[o.jsx(Se,{label:"Usage",options:p8,value:j.usage,onChange:E=>C(R=>({...R,usage:E}))}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(ep,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Usage rates: Normal - 5% of base rate | Heavy - 10% of base rate"})]}),o.jsx(Se,{label:"Deal Type",options:Lc,value:j.dealType||Lc[0].value,onChange:E=>C(R=>({...R,dealType:E||Lc[0].value}))}),o.jsx(he,{type:"number",label:"Extra Commercial Charges",value:j.extraCharge||"",onChange:E=>C(R=>({...R,extraCharge:E.target.value===""?0:Number(E.target.value)})),placeholder:"Enter extra charges"}),o.jsx(Se,{label:"Risk Factor",options:g8,value:j.riskFactor,onChange:E=>C(R=>({...R,riskFactor:E}))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Incidental Charges"}),o.jsx("div",{className:"space-y-2",children:Fc.map(E=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.incidentalCharges.includes(E.value),onChange:R=>{C(z=>({...z,incidentalCharges:R.target.checked?[...z.incidentalCharges,E.value]:z.incidentalCharges.filter(H=>H!==E.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:E.label})]},E.value))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Other Factors"}),o.jsx("div",{className:"space-y-2",children:x8.map(E=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.otherFactors.includes(E.value),onChange:R=>{C(z=>({...z,otherFactors:R.target.checked?[...z.otherFactors,E.value]:z.otherFactors.filter(H=>H!==E.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[E.label,E.value==="rigger"&&" (₹40,000)",E.value==="helper"&&" (₹12,000)"]})]},E.value))})]})]})]})]}),o.jsxs("div",{className:"col-span-5 space-y-6 sticky top-6",children:[o.jsxs(ee,{className:"shadow-lg border-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80",children:[o.jsx(fe,{className:"border-b border-gray-100 pb-6",children:o.jsxs(me,{className:"text-xl font-semibold flex items-center gap-2",children:[o.jsx(wA,{className:"w-5 h-5 text-primary-500"}),"Quotation Summary"]})}),o.jsxs(se,{children:[g>0&&!j.selectedMachines.length&&o.jsxs("div",{className:"mb-6 p-4 bg-primary-50/50 rounded-xl border border-primary-100",children:[o.jsx("div",{className:"text-sm font-medium text-primary-900 mb-2",children:"Equipment Details"}),o.jsxs("div",{className:"text-2xl font-bold text-primary-700",children:["₹",De(g).replace("₹",""),o.jsx("span",{className:"text-base font-medium text-primary-600 ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]}),o.jsxs("div",{className:"text-sm text-primary-600 mt-1",children:[j.orderType.charAt(0).toUpperCase()+j.orderType.slice(1)," Rate"]}),j.orderType==="monthly"&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{children:"Hourly Rate: "}),o.jsxs("span",{className:"font-medium ml-1",children:["₹",De(g/26/(parseFloat(j.workingHours.toString())||8)).replace("₹",""),"/hr"]})]})}),j.numberOfDays&&o.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Total Days:"}),o.jsx("span",{className:"font-medium",children:Number(j.numberOfDays)>25?"26 (Monthly)":j.numberOfDays})]}),j.orderType!=="monthly"&&o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Hours per Day:"}),o.jsx("span",{className:"font-medium",children:j.workingHours===0?8:j.workingHours||8})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:"Order Type:"}),o.jsx("span",{className:"font-medium",children:j.orderType.charAt(0).toUpperCase()+j.orderType.slice(1)})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[j.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",j.selectedMachines.length,")"]}),o.jsxs("div",{className:"space-y-2 bg-primary-50 p-3 rounded-md border border-primary-100",children:[j.selectedMachines.map(E=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:E.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[E.quantity," unit",E.quantity>1?"s":""," × ",De(E.baseRate),j.orderType==="monthly"?"/month":"/hr"]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"font-semibold text-primary-700",children:[De(E.baseRate*E.quantity),o.jsx("span",{className:"text-xs ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]})})]},E.id)),o.jsxs("div",{className:"flex justify-between items-center p-2 mt-2 border-t border-primary-200",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total machines value"}),o.jsxs("div",{className:"font-semibold text-primary-700",children:[De(j.selectedMachines.reduce((E,R)=>E+R.baseRate*R.quantity,0)),o.jsx("span",{className:"text-xs ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vn,{className:"w-4 h-4 text-primary-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Working Cost"})]}),o.jsx("span",{className:"font-semibold",children:De(D.workingCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?D.workingCost/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qn,{className:"w-4 h-4 text-success-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Food & Accommodation"})]}),o.jsx("span",{className:"font-semibold",children:De(D.foodAccomCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-success-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?D.foodAccomCost/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cn,{className:"w-4 h-4 text-warning-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Mob/Demob Cost"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(nr,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Cost calculated for each machine based on distance, running cost per km, and trailer cost."})]})]}),o.jsx("span",{className:"font-semibold",children:De(D.mobDemobCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-warning-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?D.mobDemobCost/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ep,{className:"w-4 h-4 text-error-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Risk & Usage"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(nr,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Risk factor (5-15%) and usage load (5-10%) calculated for each machine based on its base rate and quantity."})]})]}),o.jsx("span",{className:"font-semibold",children:De(D.riskAdjustment+D.usageLoadFactor)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-error-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?(D.riskAdjustment+D.usageLoadFactor)/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bd,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Extra Commercial Charges"})]}),o.jsx("span",{className:"font-semibold",children:De(Number(j.extraCharge))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?Number(j.extraCharge)/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yi,{className:"w-4 h-4 text-indigo-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Incidental Charges"})]}),o.jsx("span",{className:"font-semibold",children:De(j.incidentalCharges.reduce((E,R)=>{const z=Fc.find(H=>H.value===R);return E+(z?z.amount:0)},0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?j.incidentalCharges.reduce((E,R)=>{const z=Fc.find(H=>H.value===R);return E+(z?z.amount:0)},0)/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qn,{className:"w-4 h-4 text-cyan-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Other Factors"})]}),o.jsx("span",{className:"font-semibold",children:De((j.otherFactors.includes("rigger")?Mf:0)+(j.otherFactors.includes("helper")?Rf:0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-cyan-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?((j.otherFactors.includes("rigger")?Mf:0)+(j.otherFactors.includes("helper")?Rf:0))/D.totalAmount*100:.5}%`}})})]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{className:"font-medium",children:De(D.totalAmount-D.gstAmount)})]}),j.includeGst&&o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"GST (18%)"}),o.jsx("span",{className:"font-medium",children:De(D.gstAmount)})]}),o.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[o.jsx("span",{className:"text-lg font-semibold",children:"Total Amount"}),o.jsx("span",{className:"text-2xl font-bold text-primary-600",children:De(D.totalAmount)})]})]})}),o.jsx("div",{className:"mt-6",children:o.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.includeGst,onChange:E=>C(R=>({...R,includeGst:E.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),o.jsx("div",{className:"text-sm text-gray-500",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1 order-2 sm:order-1",size:"default",children:"Cancel"}),o.jsxs("div",{className:"sm:flex-1 order-1 sm:order-2",children:[o.jsx(V,{type:"submit",disabled:m||j.selectedMachines.length===0&&!j.selectedEquipment.id,className:"w-full bg-primary-600 hover:bg-primary-700",leftIcon:m?o.jsx(Vn,{className:"animate-spin"}):o.jsx(bi,{}),size:"default",variant:"accent",children:m?"Saving...":r?"Update Quotation":"Create Quotation"}),j.selectedMachines.length===0&&!j.selectedEquipment.id&&o.jsx("div",{className:"mt-1 text-xs text-center text-amber-600",children:"Please add at least one machine"})]})]})]})]})]})]}),S.show&&o.jsx(mt,{title:S.title,description:S.description,variant:S.variant,isVisible:S.show,onClose:()=>k({show:!1,title:""})})]})}function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function Yn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function nt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ht(e){nt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||cd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Pw(e,t){nt(2,arguments);var n=ht(e),s=Yn(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Lk(e,t){nt(2,arguments);var n=ht(e).getTime(),s=Yn(t);return new Date(n+s)}var v8=36e5;function Fk(e,t){nt(2,arguments);var n=Yn(t);return Lk(e,n*v8)}var b8={};function _a(){return b8}function w8(e,t){var n,s,r,i,a,l,c,u;nt(1,arguments);var d=_a(),h=Yn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ht(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function j8(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function _w(e){nt(1,arguments);var t=ht(e);return t.setHours(0,0,0,0),t}function N8(e,t){nt(2,arguments);var n=_w(e),s=_w(t);return n.getTime()===s.getTime()}function S8(e){return nt(1,arguments),e instanceof Date||cd(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function C8(e){if(nt(1,arguments),!S8(e)&&typeof e!="number")return!1;var t=ht(e);return!isNaN(Number(t))}function k8(e,t){var n;nt(1,arguments);var s=e||{},r=ht(s.start),i=ht(s.end),a=i.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var l=[],c=r;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=a;)l.push(ht(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function E8(e,t){var n,s,r,i,a,l,c,u;nt(1,arguments);var d=_a(),h=Yn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ht(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function D8(e,t){nt(2,arguments);var n=Yn(t);return Lk(e,-n)}var T8=864e5;function P8(e){nt(1,arguments);var t=ht(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),r=n-s;return Math.floor(r/T8)+1}function ud(e){nt(1,arguments);var t=1,n=ht(e),s=n.getUTCDay(),r=(s<t?7:0)+s-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function $k(e){nt(1,arguments);var t=ht(e),n=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var r=ud(s),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=ud(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function _8(e){nt(1,arguments);var t=$k(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var s=ud(n);return s}var A8=6048e5;function M8(e){nt(1,arguments);var t=ht(e),n=ud(t).getTime()-_8(t).getTime();return Math.round(n/A8)+1}function dd(e,t){var n,s,r,i,a,l,c,u;nt(1,arguments);var d=_a(),h=Yn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ht(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Bk(e,t){var n,s,r,i,a,l,c,u;nt(1,arguments);var d=ht(e),h=d.getUTCFullYear(),f=_a(),m=Yn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var g=dd(p,t),v=new Date(0);v.setUTCFullYear(h,0,m),v.setUTCHours(0,0,0,0);var w=dd(v,t);return d.getTime()>=g.getTime()?h+1:d.getTime()>=w.getTime()?h:h-1}function R8(e,t){var n,s,r,i,a,l,c,u;nt(1,arguments);var d=_a(),h=Yn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=Bk(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=dd(m,t);return p}var I8=6048e5;function O8(e,t){nt(1,arguments);var n=ht(e),s=dd(n,t).getTime()-R8(n,t).getTime();return Math.round(s/I8)+1}function Oe(e,t){for(var n=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return n+s}var Vs={y:function(t,n){var s=t.getUTCFullYear(),r=s>0?s:1-s;return Oe(n==="yy"?r%100:r,n.length)},M:function(t,n){var s=t.getUTCMonth();return n==="M"?String(s+1):Oe(s+1,2)},d:function(t,n){return Oe(t.getUTCDate(),n.length)},a:function(t,n){var s=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,n){return Oe(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Oe(t.getUTCHours(),n.length)},m:function(t,n){return Oe(t.getUTCMinutes(),n.length)},s:function(t,n){return Oe(t.getUTCSeconds(),n.length)},S:function(t,n){var s=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,s-3));return Oe(i,n.length)}},Pi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},L8={G:function(t,n,s){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return Vs.y(t,n)},Y:function(t,n,s,r){var i=Bk(t,r),a=i>0?i:1-i;if(n==="YY"){var l=a%100;return Oe(l,2)}return n==="Yo"?s.ordinalNumber(a,{unit:"year"}):Oe(a,n.length)},R:function(t,n){var s=$k(t);return Oe(s,n.length)},u:function(t,n){var s=t.getUTCFullYear();return Oe(s,n.length)},Q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Oe(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Oe(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,s){var r=t.getUTCMonth();switch(n){case"M":case"MM":return Vs.M(t,n);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,s){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Oe(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,s,r){var i=O8(t,r);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):Oe(i,n.length)},I:function(t,n,s){var r=M8(t);return n==="Io"?s.ordinalNumber(r,{unit:"week"}):Oe(r,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):Vs.d(t,n)},D:function(t,n,s){var r=P8(t);return n==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Oe(r,n.length)},E:function(t,n,s){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Oe(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Oe(a,n.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Oe(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,s){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){var r=t.getUTCHours(),i;switch(r===12?i=Pi.noon:r===0?i=Pi.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){var r=t.getUTCHours(),i;switch(r>=17?i=Pi.evening:r>=12?i=Pi.afternoon:r>=4?i=Pi.morning:i=Pi.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return Vs.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Vs.H(t,n)},K:function(t,n,s){var r=t.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Oe(r,n.length)},k:function(t,n,s){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?s.ordinalNumber(r,{unit:"hour"}):Oe(r,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Vs.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Vs.s(t,n)},S:function(t,n){return Vs.S(t,n)},X:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Mw(a);case"XXXX":case"XX":return qr(a);case"XXXXX":case"XXX":default:return qr(a,":")}},x:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Mw(a);case"xxxx":case"xx":return qr(a);case"xxxxx":case"xxx":default:return qr(a,":")}},O:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Aw(a,":");case"OOOO":default:return"GMT"+qr(a,":")}},z:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Aw(a,":");case"zzzz":default:return"GMT"+qr(a,":")}},t:function(t,n,s,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return Oe(a,n.length)},T:function(t,n,s,r){var i=r._originalDate||t,a=i.getTime();return Oe(a,n.length)}};function Aw(e,t){var n=e>0?"-":"+",s=Math.abs(e),r=Math.floor(s/60),i=s%60;if(i===0)return n+String(r);var a=t;return n+String(r)+a+Oe(i,2)}function Mw(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Oe(Math.abs(e)/60,2)}return qr(e,t)}function qr(e,t){var n=t||"",s=e>0?"-":"+",r=Math.abs(e),i=Oe(Math.floor(r/60),2),a=Oe(r%60,2);return s+i+n+a}var Rw=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},zk=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},F8=function(t,n){var s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return Rw(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Rw(r,n)).replace("{{time}}",zk(i,n))},$8={p:zk,P:F8},B8=["D","DD"],z8=["YY","YYYY"];function V8(e){return B8.indexOf(e)!==-1}function U8(e){return z8.indexOf(e)!==-1}function Iw(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var W8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},H8=function(t,n,s){var r,i=W8[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function If(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,s=e.formats[n]||e.formats[e.defaultWidth];return s}}var q8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},G8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Q8={date:If({formats:q8,defaultWidth:"full"}),time:If({formats:G8,defaultWidth:"full"}),dateTime:If({formats:Y8,defaultWidth:"full"})},K8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},X8=function(t,n,s,r){return K8[t]};function no(e){return function(t,n){var s=n!=null&&n.context?String(n.context):"standalone",r;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var J8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Z8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rU=function(t,n){var s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},iU={ordinalNumber:rU,era:no({values:J8,defaultWidth:"wide"}),quarter:no({values:Z8,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:no({values:eU,defaultWidth:"wide"}),day:no({values:tU,defaultWidth:"wide"}),dayPeriod:no({values:nU,defaultWidth:"wide",formattingValues:sU,defaultFormattingWidth:"wide"})};function so(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var a=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?oU(l,function(h){return h.test(a)}):aU(l,function(h){return h.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function aU(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function oU(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function lU(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var r=s[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(r.length);return{value:a,rest:l}}}var cU=/^(\d+)(th|st|nd|rd)?/i,uU=/\d+/i,dU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hU={any:[/^b/i,/^(a|c)/i]},fU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mU={any:[/1/i,/2/i,/3/i,/4/i]},pU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wU={ordinalNumber:lU({matchPattern:cU,parsePattern:uU,valueCallback:function(t){return parseInt(t,10)}}),era:so({matchPatterns:dU,defaultMatchWidth:"wide",parsePatterns:hU,defaultParseWidth:"any"}),quarter:so({matchPatterns:fU,defaultMatchWidth:"wide",parsePatterns:mU,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:so({matchPatterns:pU,defaultMatchWidth:"wide",parsePatterns:gU,defaultParseWidth:"any"}),day:so({matchPatterns:xU,defaultMatchWidth:"wide",parsePatterns:yU,defaultParseWidth:"any"}),dayPeriod:so({matchPatterns:vU,defaultMatchWidth:"any",parsePatterns:bU,defaultParseWidth:"any"})},jU={code:"en-US",formatDistance:H8,formatLong:Q8,formatRelative:X8,localize:iU,match:wU,options:{weekStartsOn:0,firstWeekContainsDate:1}},NU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CU=/^'([^]*?)'?$/,kU=/''/g,EU=/[a-zA-Z]/;function gs(e,t,n){var s,r,i,a,l,c,u,d,h,f,m,p,g,v;nt(2,arguments);var w=String(t),b=_a(),x=(s=(r=void 0)!==null&&r!==void 0?r:b.locale)!==null&&s!==void 0?s:jU,N=Yn((i=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:b.firstWeekContainsDate)!==null&&a!==void 0?a:(u=b.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(N>=1&&N<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=Yn((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:b.weekStartsOn)!==null&&f!==void 0?f:(g=b.locale)===null||g===void 0||(v=g.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&h!==void 0?h:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var k=ht(e);if(!C8(k))throw new RangeError("Invalid time value");var j=j8(k),C=D8(k,j),D={firstWeekContainsDate:N,weekStartsOn:S,locale:x,_originalDate:k},A=w.match(SU).map(function(F){var $=F[0];if($==="p"||$==="P"){var L=$8[$];return L(F,x.formatLong)}return F}).join("").match(NU).map(function(F){if(F==="''")return"'";var $=F[0];if($==="'")return DU(F);var L=L8[$];if(L)return U8(F)&&Iw(F,t,String(e)),V8(F)&&Iw(F,t,String(e)),L(C,F,x.localize,D);if($.match(EU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return F}).join("");return A}function DU(e){var t=e.match(CU);return t?t[1].replace(kU,"'"):e}function TU(e,t){nt(2,arguments);var n=ht(e).getTime(),s=ht(t.start).getTime(),r=ht(t.end).getTime();if(!(s<=r))throw new RangeError("Invalid interval");return n>=s&&n<=r}const Ow=Array.from({length:15},(e,t)=>Fk(new Date().setHours(6,0,0,0),t));function PU(){const{user:e}=qe(),[t,n]=y.useState("week"),[s,r]=y.useState(new Date),[i,a]=y.useState([]),[l,c]=y.useState([]),[u,d]=y.useState([]),[h,f]=y.useState([]),[m,p]=y.useState(!0),[g,v]=y.useState(!1),[w,b]=y.useState(null),[x,N]=y.useState(null),[S,k]=y.useState(null),[j,C]=y.useState([]),[D,A]=y.useState(!1),F=Is(),$=en(),[L,P]=y.useState({show:!1,title:""}),[B,W]=y.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),[O,T]=y.useState("");y.useEffect(()=>{_();const I=new URLSearchParams(F.search),G=I.get("dealId"),Y=I.get("action"),ie=I.get("customerName");if(G&&Y==="schedule"){if(N(G),ie){const M=decodeURIComponent(ie);k(M),P({show:!0,title:`Deal won with ${M}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}U(G),$("/jobs",{replace:!0})}},[F]),y.useEffect(()=>{B.operatorId&&B.startDate&&B.endDate&&(ge().some(Y=>Y.id===B.operatorId)||W(Y=>({...Y,operatorId:""})))},[B.startDate,B.endDate,i]);const _=async()=>{try{const[I,G,Y,ie,M]=await Promise.all([Xd(),o2(),Bl(),$l(),Jd()]);a(I),c(G),d(Y);const R=M.filter(H=>H.stage==="won").map(H=>H.leadId),z=ie.filter(H=>H.status==="converted"&&R.includes(H.id));if(f(z),x)try{const H=await fl(x);if(H){W(K=>{var Ne;return{...K,leadId:H.leadId||"",location:((Ne=H.customer)==null?void 0:Ne.address)||"",notes:H.description||""}});const X=new Date,ve=new Date;ve.setDate(X.getDate()+7),W(K=>({...K,startDate:X.toISOString().slice(0,16),endDate:ve.toISOString().slice(0,16)}))}}catch(H){console.error("Error fetching deal data:",H)}}catch(I){console.error("Error fetching data:",I),ae("Error fetching data","error")}finally{p(!1)}},U=async I=>{var G,Y,ie,M,E;try{const R=await fl(I);if(R){const z=new Date,H=new Date;H.setDate(z.getDate()+7);const X=z.toISOString().slice(0,16),ve=H.toISOString().slice(0,16);N(I),(G=R.customer)!=null&&G.name&&k(R.customer.name),A(!0);try{const K=await sd(R.leadId);if(K&&K.length>0){const Ne=[];K.forEach(Ae=>{if(Ae.selectedEquipment&&Ae.selectedEquipment.equipmentId){const xe=l.find(Ie=>Ie.id===Ae.selectedEquipment.equipmentId);xe&&!Ne.some(Ie=>Ie.id===xe.id)&&Ne.push(xe)}Ae.selectedMachines&&Ae.selectedMachines.length>0&&Ae.selectedMachines.forEach(xe=>{if(xe.equipmentId){const Ie=l.find(Pe=>Pe.id===xe.equipmentId);Ie&&!Ne.some(Pe=>Pe.id===Ie.id)&&Ne.push(Ie)}})}),C(Ne),Ne.length>0?W({leadId:R.leadId,equipmentId:Ne[0].id,operatorId:"",startDate:X,endDate:ve,location:((Y=R.customer)==null?void 0:Y.address)||"",notes:R.description||""}):W({leadId:R.leadId,equipmentId:"",operatorId:"",startDate:X,endDate:ve,location:((ie=R.customer)==null?void 0:ie.address)||"",notes:R.description||""})}else W({leadId:R.leadId,equipmentId:"",operatorId:"",startDate:X,endDate:ve,location:((M=R.customer)==null?void 0:M.address)||"",notes:R.description||""})}catch(K){console.error("Error fetching quotations:",K),W({leadId:R.leadId,equipmentId:"",operatorId:"",startDate:X,endDate:ve,location:((E=R.customer)==null?void 0:E.address)||"",notes:R.description||""})}finally{A(!1)}v(!0)}else ae("Deal not found","error")}catch(R){console.error("Error fetching deal:",R),ae("Error fetching deal","error")}},q=async()=>{try{if(!B.leadId||!B.equipmentId||!B.operatorId||!B.startDate||!B.endDate||!B.location){ae("Please fill in all required fields","error");return}let I="";const G=h.find(Y=>Y.id===B.leadId);if(G)I=G.customerName;else if(S)I=S;else{ae("Customer information is missing","error");return}await i2({title:"Scheduled Job",leadId:B.leadId,customerId:(G==null?void 0:G.customerId)||"",customerName:I,equipmentIds:[B.equipmentId],operatorIds:[B.operatorId],scheduledStartDate:B.startDate,scheduledEndDate:B.endDate,location:B.location,status:"scheduled",notes:B.notes,dealId:x||void 0,createdBy:(e==null?void 0:e.id)||""}),await _(),v(!1),Z(),N(null),k(null),ae("Job scheduled successfully","success")}catch(I){console.error("Error creating job:",I),ae("Error creating job","error")}},Z=()=>{W({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),C([])},ae=(I,G="success")=>{P({show:!0,title:I,variant:G}),setTimeout(()=>P({show:!1,title:""}),3e3)},le=(I,G,Y,ie)=>i.filter(E=>{const R=new Date(E.scheduledStartDate),z=new Date(E.scheduledEndDate),H=new Date(Y),X=new Date(ie);return(E.equipmentIds.includes(I)||E.operatorIds.includes(G))&&E.status!=="completed"&&E.status!=="cancelled"&&(H>=R&&H<z||X>R&&X<=z||H<=R&&X>=z)}),ge=()=>{if(!B.startDate||!B.endDate)return u;const I=new Date(B.startDate),G=new Date(B.endDate);return u.filter(Y=>i.filter(M=>{const E=new Date(M.scheduledStartDate),R=new Date(M.scheduledEndDate);return M.operatorIds.includes(Y.id)&&M.status!=="completed"&&M.status!=="cancelled"&&(I>=E&&I<R||G>E&&G<=R||I<=E&&G>=R)}).length===0)},we=()=>{const I=w8(s,{weekStartsOn:1}),G=E8(s,{weekStartsOn:1}),Y=k8({start:I,end:G});return o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[o.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[o.jsx("div",{className:"h-12"}),Ow.map((ie,M)=>o.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-900",children:gs(ie,"h:mm a")},M))]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[Y.map((ie,M)=>o.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-gray-900",children:gs(ie,"EEE")}),o.jsx("div",{className:"text-xs text-gray-700",children:gs(ie,"MMM d")})]})},M)),Ow.map((ie,M)=>o.jsx(ne.Fragment,{children:Y.map((E,R)=>{const z=new Date(E.setHours(ie.getHours(),ie.getMinutes())),H=i.filter(X=>{const ve=new Date(X.scheduledStartDate),K=new Date(X.scheduledEndDate);return(!O||X.operatorIds.includes(O))&&N8(z,ve)&&TU(z,{start:ve,end:K})});return o.jsx("div",{className:`border-b border-r border-gray-100 relative ${M===0?"border-t":""} ${R===0?"border-l":""}`,style:{minHeight:`${Math.max(80,H.length*44+8)}px`},onClick:()=>{v(!0),W(X=>({...X,startDate:z.toISOString().slice(0,16),endDate:Fk(z,2).toISOString().slice(0,16)}))},children:H.map((X,ve)=>o.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:`${4+ve*44}px`,minHeight:"40px",zIndex:10+ve,right:ve>0?`${ve*8}px`:"4px"},onClick:K=>{K.stopPropagation(),b(X)},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-sm truncate",children:X.customerName}),o.jsx(Vl,{status:X.status,className:"ml-2"})]}),o.jsxs("div",{className:"text-xs text-black mt-1",children:[gs(new Date(X.scheduledStartDate),"h:mm a")," - ",gs(new Date(X.scheduledEndDate),"h:mm a")]})]},X.id))},`${M}-${R}`)})},M))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-900",children:"Loading job scheduling data..."})]}):o.jsxs("div",{className:"space-y-6 font-sans",children:[o.jsxs("div",{className:"flex flex-wrap items-center mb-2 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(V,{variant:"outline",size:"sm",onClick:()=>r(I=>Pw(I,-7)),children:o.jsx(kA,{className:"h-4 w-4"})}),o.jsx("h2",{className:"text-lg font-semibold font-sans",children:gs(s,"MMMM yyyy")}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>r(I=>Pw(I,7)),children:o.jsx(EA,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end min-w-0",children:[o.jsx(Se,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:I=>n(I),className:"w-24 min-w-0"}),o.jsx(Se,{label:"Operator",options:[{value:"",label:"All Operators"},...u.map(I=>({value:I.id,label:I.name}))],value:O,onChange:T,className:"w-32 min-w-0"}),o.jsx(V,{size:"lg",className:"ml-2 font-bold px-6 py-2",onClick:()=>{h.length===0?P({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):v(!0)},leftIcon:o.jsx(ls,{size:20}),children:"New Job"})]})]}),o.jsx(ee,{children:o.jsxs(se,{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Schedule"})}),m?o.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-sans",children:"No Won Deals Yet"}),o.jsx("p",{className:"text-gray-700 font-sans",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):we()]})}),o.jsxs(dt,{isOpen:g,onClose:()=>{v(!1),Z()},title:x?`Schedule Job for Won Deal: ${S||""}`:"Schedule Job for Won Deal",size:"lg",children:[o.jsxs("div",{className:"space-y-6",children:[x&&o.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[o.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),o.jsxs("p",{className:"text-green-700",children:[o.jsx("span",{className:"font-medium",children:"Customer:"})," ",S||"Unknown customer"]}),o.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),o.jsx(Se,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...Array.isArray(h)?h.map(I=>({value:I.id,label:`${I.customerName} - Won Deal`})):[]],value:B.leadId,onChange:I=>{W(G=>({...G,leadId:I})),I?(async()=>{A(!0);try{const Y=await sd(I);if(Y&&Y.length>0){const ie=[];Y.forEach(M=>{if(M.selectedEquipment&&M.selectedEquipment.equipmentId){const E=l.find(R=>R.id===M.selectedEquipment.equipmentId);E&&!ie.some(R=>R.id===E.id)&&ie.push(E)}M.selectedMachines&&M.selectedMachines.length>0&&M.selectedMachines.forEach(E=>{if(E.equipmentId){const R=l.find(z=>z.id===E.equipmentId);R&&!ie.some(z=>z.id===R.id)&&ie.push(R)}})}),C(ie),ie.length>0&&W(M=>({...M,equipmentId:ie[0].id}))}}catch(Y){console.error("Error loading equipment for lead:",Y)}finally{A(!1)}})():(C([]),W(G=>({...G,equipmentId:""})))},required:!0,className:"text-black"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Se,{label:"Equipment",options:j.length>0&&x?[{value:"",label:"-- Select deal-specific equipment --"},...Array.isArray(j)?j.map(I=>({value:I.id,label:`${I.name} (From Deal)`})):[]]:[{value:"",label:"-- Select equipment --"},...Array.isArray(l)?l.map(I=>({value:I.id,label:I.name})):[]],value:B.equipmentId,onChange:I=>W(G=>({...G,equipmentId:I})),required:!0,className:"text-black"}),D?o.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):j.length>0?o.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[j.length," equipment item",j.length!==1?"s":""," from deal quotation",j.length!==1?"s":""]}):B.leadId?o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),o.jsx(Se,{label:"Operator",options:[{value:"",label:"-- Select operator --"},...ge().map(I=>({value:I.id,label:I.name}))],value:B.operatorId,onChange:I=>W(G=>({...G,operatorId:I})),required:!0,className:"text-black"}),B.startDate&&B.endDate&&o.jsx("p",{className:"mt-1 text-xs text-gray-600",children:(()=>{const I=ge(),G=u.length,Y=G-I.length;return Y===0?`All ${G} operators are available`:I.length===0?"No operators available for this time slot":`${I.length} of ${G} operators available (${Y} busy)`})()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(_e,{type:"datetime-local",label:"Start Date & Time",value:B.startDate,onChange:I=>W(G=>({...G,startDate:I.target.value})),required:!0,className:"text-black"}),o.jsx(_e,{type:"datetime-local",label:"End Date & Time",value:B.endDate,onChange:I=>W(G=>({...G,endDate:I.target.value})),required:!0,className:"text-black"})]}),o.jsx(_e,{label:"Location",value:B.location,onChange:I=>W(G=>({...G,location:I.target.value})),required:!0,className:"text-black"}),o.jsx(Mn,{label:"Notes",value:B.notes,onChange:I=>W(G=>({...G,notes:I.target.value})),rows:4,className:"text-black"}),B.equipmentId&&B.operatorId&&B.startDate&&B.endDate&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[o.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const I=le(B.equipmentId,B.operatorId,B.startDate,B.endDate);return I.length>0?o.jsxs("div",{className:"text-error-600",children:[o.jsx("p",{children:"Conflicts found:"}),o.jsx("ul",{className:"list-disc list-inside text-sm",children:I.map(G=>o.jsxs("li",{children:[G.customerName," - ",gs(new Date(G.scheduledStartDate),"MMM d, h:mm a")]},G.id))})]}):o.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(V,{variant:"outline",onClick:()=>{v(!1),Z()},children:"Cancel"}),o.jsx(V,{onClick:q,variant:"accent",children:"Schedule Job"})]})]}),o.jsx(dt,{isOpen:!!w,onClose:()=>b(null),title:"Job Details",size:"lg",children:w&&o.jsx(_U,{selectedJob:w})}),L.show&&o.jsx(mt,{title:L.title,description:L.description,variant:L.variant,isVisible:L.show,duration:3e3,onClose:()=>P({show:!1,title:""})})]})}function _U({selectedJob:e}){const[t,n]=ne.useState(""),[s,r]=ne.useState("");return ne.useEffect(()=>{async function i(){try{const a=await Xv.getJobEquipment(e.id);if(!a||a.length===0){n("No equipment assigned");return}const l=[];for(const c of a){const u=await a2(c.id);u&&u.name&&l.push(u.name)}n(l.length>0?l.join(", "):"No equipment assigned")}catch(a){console.error("Error fetching equipment names:",a),n("Error loading equipment")}}i()},[e.id]),ne.useEffect(()=>{async function i(){try{const a=await Xv.getJobOperators(e.id);if(!a||a.length===0){r("No operator assigned");return}const l=[];for(const c of a){const d=(await Bl()).find(h=>h.id===c.id);d&&d.name&&l.push(d.name)}r(l.length>0?l.join(", "):"No operator assigned")}catch(a){console.error("Error fetching operator names:",a),r("Error loading operators")}}i()},[e.id]),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Customer"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.customerName,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Status"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.status,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Equipment"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:t,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Operator"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:s,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Start Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:gs(new Date(e.scheduledStartDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"End Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:gs(new Date(e.scheduledEndDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Location"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.location,disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Notes"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.notes||"No notes",disabled:!0,readOnly:!0})]})]})})}function AU(){const[e,t]=y.useState([]),[n,s]=y.useState([]),[r,i]=y.useState([]),[a,l]=y.useState(!0),[c,u]=y.useState(null);y.useEffect(()=>{d()},[]);const d=async()=>{try{l(!0),u(null);const[h,f,m]=await Promise.all([ru.getAllJobs(),ru.getAllEquipment(),ru.getAllOperators()]);t(h),s(f),i(m)}catch(h){u(h instanceof Error?h.message:"An error occurred"),console.error("Error loading data:",h)}finally{l(!1)}};return a?o.jsx("div",{className:"p-4",children:"Loading job data..."}):c?o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",c]}),o.jsx(V,{onClick:d,children:"Try Again"})]}):o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Job Scheduling System"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Jobs"}),o.jsx("p",{className:"text-2xl font-bold",children:e.length})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Equipment"}),o.jsx("p",{className:"text-2xl font-bold",children:n.length})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Operators"}),o.jsx("p",{className:"text-2xl font-bold",children:r.length})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Recent Jobs"}),e.length===0?o.jsx("p",{className:"text-gray-500",children:"No jobs found."}):o.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.title}),o.jsx("p",{className:"text-sm text-gray-600",children:h.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:h.location})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="in_progress"?"bg-blue-100 text-blue-800":h.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status})]},h.id))})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Equipment"}),n.length===0?o.jsx("p",{className:"text-gray-500",children:"No equipment found."}):o.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.type})]}),o.jsxs("p",{className:"text-sm font-medium",children:["$",h.baseRate,"/day"]})]},h.id))})]})}),o.jsx(ee,{children:o.jsxs(se,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Operators"}),r.length===0?o.jsx("p",{className:"text-gray-500",children:"No operators found."}):o.jsx("div",{className:"space-y-2",children:r.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.specialization})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.availability==="available"?"bg-green-100 text-green-800":h.availability==="assigned"?"bg-blue-100 text-blue-800":h.availability==="on_leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.availability||"available"})]},h.id))})]})})]})]})}function MU(){const[e,t]=y.useState("loading"),[n,s]=y.useState("");y.useEffect(()=>{r()},[]);const r=async()=>{try{t("loading"),s("");const i=await fetch("http://localhost:3001/api/health");i.ok?t("success"):(t("error"),s(`API returned status ${i.status}`))}catch(i){t("error"),s(i instanceof Error?i.message:"Unknown error")}};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Job Scheduling System Test"}),o.jsx("p",{className:"text-gray-600",children:"Testing the complete job scheduling implementation"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(ee,{children:o.jsx(se,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"API Connection Status"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[e==="loading"&&"Testing API connection...",e==="success"&&"API connection successful",e==="error"&&`API connection failed: ${n}`]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${e==="loading"?"bg-yellow-500":e==="success"?"bg-green-500":"bg-red-500"}`}),o.jsx(V,{onClick:r,size:"sm",children:"Test Again"})]})]})})})}),e==="success"&&o.jsx(AU,{}),e==="error"&&o.jsx(ee,{children:o.jsx(se,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"Connection Error"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Please make sure the backend server is running on port 3001"}),o.jsx(V,{onClick:r,children:"Retry Connection"})]})})})]})}const RU=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function IU(){const{user:e}=qe(),[t,n]=y.useState(""),[s,r]=y.useState(""),[i,a]=y.useState(""),[l,c]=y.useState(""),[u,d]=y.useState([]),[h,f]=y.useState([]),[m,p]=y.useState(""),[g,v]=y.useState(!1),[w,b]=y.useState(null),[x,N]=y.useState([]),[S,k]=y.useState(!0),[j,C]=y.useState({show:!1,title:""}),D=y.useRef(null);y.useEffect(()=>{(async()=>{try{const U=await GC();N(U),k(!1)}catch(U){console.error("Error fetching site assessments:",U),O("Error loading site assessments","error"),k(!1)}})()},[]);const A=_=>{const Z=Array.from(_.target.files||[]).filter(ae=>{const le=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(ae.type),ge=ae.size<=10*1024*1024;return!le||!ge?(O("Invalid file",`${ae.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(ae=>({id:Math.random().toString(36).substring(2,9),file:ae,preview:URL.createObjectURL(ae),annotations:[]}));d(ae=>[...ae,...Z])},F=_=>{_.preventDefault();const U=Array.from(_.dataTransfer.files),q=D.current;if(q){const Z=new DataTransfer;U.forEach(le=>Z.items.add(le)),q.files=Z.files;const ae=new Event("change",{bubbles:!0});q.dispatchEvent(ae)}},$=_=>{_.preventDefault()},L=_=>{d(U=>{const q=U.filter(Z=>Z.id!==_);return U.forEach(Z=>{Z.id===_&&URL.revokeObjectURL(Z.preview)}),q})},P=_=>{f(U=>U.find(Z=>Z.id===_.id)?U.filter(Z=>Z.id!==_.id):[...U,{..._}])},B=(_,U)=>{f(q=>q.map(Z=>Z.id===_?{...Z,notes:U}:Z))},W=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){O("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(_=>setTimeout(_,1e3)),O("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{O("Error sending link","Please try again later","error")}},O=(_,U,q="success")=>{C({show:!0,title:_,description:U,variant:q}),setTimeout(()=>C({show:!1,title:""}),3e3)},T=async()=>{if(!e){O("Error","You need to be logged in to submit a site assessment","error");return}if(!t){O("Missing title","Please provide a title for the site assessment","warning");return}if(!i){O("Missing location","Please provide the site location","warning");return}if(u.length===0){O("Missing files","Please upload at least one site photo or video","warning");return}try{const _=u.filter(ge=>ge.file.type.startsWith("image/")).map(ge=>`mock-url-${ge.id}`),U=u.filter(ge=>ge.file.type.startsWith("video/")).map(ge=>`mock-url-${ge.id}`),q=h.map(ge=>ge.id),Z=h.filter(ge=>ge.notes).map(ge=>`${ge.label}: ${ge.notes}`).join(`
`),ae={title:t,description:s,customerId:l||"unknown",location:i,constraints:q,notes:Z,images:_,videos:U,createdBy:e.id},le=await YC(ae);N(ge=>[...ge,le]),n(""),r(""),c(""),a(""),d([]),f([]),p(""),O("Site assessment submitted successfully",void 0,"success")}catch(_){console.error("Error submitting site assessment:",_),O("Error submitting assessment","Please try again later","error")}};return ne.useEffect(()=>()=>{u.forEach(_=>{URL.revokeObjectURL(_.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Upload Media"})}),o.jsxs(se,{children:[o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:F,onDragOver:$,children:[o.jsx("input",{ref:D,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:A}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(hS,{className:"h-12 w-12 text-gray-400"})}),o.jsxs("div",{children:[o.jsx(V,{variant:"outline",onClick:()=>{var _;return(_=D.current)==null?void 0:_.click()},children:"Choose Files"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&o.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(_=>o.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[_.file.type.startsWith("image/")?o.jsx("img",{src:_.preview,alt:"Preview",className:"w-full h-32 object-cover"}):o.jsx("video",{src:_.preview,className:"w-full h-32 object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[_.file.type.startsWith("image/")&&o.jsx(V,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{b(_),v(!0)},children:o.jsx(z0,{size:16})}),o.jsx(V,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>L(_.id),children:o.jsx(Na,{size:16})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:_.file.name})]},_.id))})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Site Constraints"})}),o.jsx(se,{children:o.jsx("div",{className:"space-y-4",children:RU.map(_=>{var U;return o.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(q=>q.id===_.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(q=>q.id===_.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>P(_),children:h.some(q=>q.id===_.id)&&o.jsx(CA,{className:"text-white h-4 w-4"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"font-medium text-gray-900",children:_.label}),_.description&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:_.description}),h.some(q=>q.id===_.id)&&o.jsx(Mn,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((U=h.find(q=>q.id===_.id))==null?void 0:U.notes)||"",onChange:q=>B(_.id,q.target.value),rows:2})]})]})},_.id)})})})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Remote Site Assessment"})}),o.jsx(se,{children:o.jsxs("div",{className:"max-w-md",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx(_e,{type:"tel",placeholder:"Enter phone number",value:m,onChange:_=>p(_.target.value)}),o.jsx(V,{onClick:W,leftIcon:o.jsx(al,{size:16}),children:"Send Link"})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Site Details"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx(_e,{value:t,onChange:_=>n(_.target.value),placeholder:"Site assessment title",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),o.jsx(_e,{value:l,onChange:_=>c(_.target.value),placeholder:"Enter customer ID if available"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),o.jsx(_e,{value:i,onChange:_=>a(_.target.value),placeholder:"Enter site address/location",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx(Mn,{value:s,onChange:_=>r(_.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsxs(V,{onClick:T,className:"flex items-center gap-2",children:[o.jsx(al,{size:16}),"Submit Assessment"]})}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Assessment Summary"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(_=>o.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[_.file.type.startsWith("image/")?o.jsx(NA,{size:14}):o.jsx(z0,{size:14}),o.jsx("span",{className:"truncate max-w-[200px]",children:_.file.name})]},_.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?o.jsx("div",{className:"space-y-3",children:h.map(_=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[o.jsx(dS,{size:14}),_.label]}),_.notes&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:_.notes})]},_.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),o.jsx(yx,{children:g&&w&&o.jsx(Xs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:o.jsxs(Xs.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{v(!1),b(null)},children:o.jsx(Vd,{size:20})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:w.preview,alt:"Annotation",className:"max-w-full h-auto"})}),o.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>{v(!1),b(null)},children:"Cancel"}),o.jsx(V,{onClick:()=>{v(!1),b(null),O("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),j.show&&o.jsx(mt,{title:j.title,description:j.description,variant:j.variant,isVisible:j.show,onClose:()=>C({show:!1,title:""})})]})}const OU=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function LU(){const{id:e}=Hg(),{user:t}=qe(),[n,s]=y.useState(null),[r,i]=y.useState(!0),[a,l]=y.useState(OU),[c,u]=y.useState(""),[d,h]=y.useState(!1),[f,m]=y.useState(""),[p,g]=y.useState(""),[v,w]=y.useState(!1),[b,x]=y.useState(null),[N,S]=y.useState({show:!1,title:""});y.useEffect(()=>{e&&k()},[e]);const k=async()=>{try{const $=await FC(e);s($),x({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch($){console.error("Error fetching job details:",$),F("Error fetching job details","error")}finally{i(!1)}},j=$=>{l(L=>L.map(P=>P.id===$?{...P,checked:!P.checked}:P))},C=async()=>{try{await new Promise($=>setTimeout($,1e3)),F("Feedback request sent successfully","success")}catch{F("Error sending feedback request","error")}},D=async()=>{if(!f||!p){F("Please fill in all discount request fields","error");return}try{await new Promise($=>setTimeout($,1e3)),F("Discount request submitted for approval","success")}catch{F("Error submitting discount request","error")}},A=()=>{F("Summary downloaded successfully","success")},F=($,L="success")=>{S({show:!0,title:$,variant:L}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):r?o.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),o.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),o.jsx(V,{variant:"outline",leftIcon:o.jsx(Gg,{size:16}),onClick:A,children:"Download Summary"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Job Details"})}),o.jsx(se,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),o.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(Yg,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:n.location})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(cn,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(ll,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Mike Operator"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),o.jsxs("div",{className:"mt-1 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(os,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:new Date(n.startDate).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vn,{className:"h-5 w-5 text-gray-400"}),o.jsxs("span",{children:[new Date(n.startDate).toLocaleTimeString()," - ",new Date(n.endDate).toLocaleTimeString()]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Safety Observations"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map($=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${$.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>j($.id),children:$.checked&&o.jsx(gr,{className:"text-white h-4 w-4"})}),o.jsx("span",{className:"text-gray-700",children:$.label})]},$.id))}),o.jsx(Mn,{label:"Safety Notes",value:c,onChange:$=>u($.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(me,{children:"Customer Feedback"}),o.jsx(V,{variant:"outline",leftIcon:o.jsx(al,{size:16}),onClick:C,children:"Request Feedback"})]})}),o.jsx(se,{children:b?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex",children:[1,2,3,4,5].map($=>o.jsx("svg",{className:`h-5 w-5 ${$<=b.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},$))}),o.jsx("span",{className:"text-lg font-medium",children:b.rating})]}),o.jsx("p",{className:"text-gray-600",children:b.comments}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(b.submittedAt).toLocaleDateString()]})]}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Discount Request"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"requestDiscount",checked:d,onChange:$=>h($.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&o.jsxs("div",{className:"space-y-4",children:[o.jsx(Mn,{label:"Reason for Discount",value:f,onChange:$=>m($.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),o.jsx("div",{className:"w-48",children:o.jsx(_e,{type:"number",label:"Discount Percentage",value:p,onChange:$=>g($.target.value),min:"0",max:"100",placeholder:"Enter %"})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(V,{onClick:D,children:"Submit for Approval"})})]})]})})]}),N.show&&o.jsx(mt,{title:N.title,variant:N.variant,isVisible:N.show,onClose:()=>S({show:!1,title:""})})]}):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const FU=async()=>{try{return await On.get("/equipment")}catch(e){return console.error("Failed to fetch equipment:",e),[]}},$U=async e=>{try{return await On.post("/equipment",e)}catch(t){throw console.error("Failed to create equipment:",t),new Error(t.message||"Failed to create equipment")}},BU=async(e,t)=>{try{return await On.put(`/equipment/${e}`,t)}catch(n){return console.error(`Failed to update equipment ${e}:`,n),null}},zU=async e=>{try{return await On.delete(`/equipment/${e}`),!0}catch(t){return console.error(`Failed to delete equipment ${e}:`,t),!1}},Of=e=>{var t,n,s,r;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((s=e.baseRates)==null?void 0:s.monthly)||0,yearly:((r=e.baseRates)==null?void 0:r.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},Lf=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],Ff=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],VU=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function UU(){const{user:e}=qe(),[t,n]=y.useState([]),[s,r]=y.useState([]),[i,a]=y.useState(""),[l,c]=y.useState("all"),[u,d]=y.useState("all"),[h,f]=y.useState(!0),[m,p]=y.useState(!1),[g,v]=y.useState(!1),[w,b]=y.useState(null),[x,N]=y.useState({show:!1,title:""}),[S,k]=y.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"});y.useEffect(()=>{j()},[]),y.useEffect(()=>{C()},[t,i,l,u]);const j=async()=>{try{let P=await FU();P=P.map(Of),n(P),console.log("Successfully connected to equipment API"),f(!1)}catch(P){console.error("Error fetching equipment:",P),L("Error fetching equipment","error"),f(!1)}},C=()=>{let P=[...t];i&&(P=P.filter(B=>B.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(P=P.filter(B=>B.status===l)),u!=="all"&&(P=P.filter(B=>B.category===u)),r(P)},D=()=>{if(!S.name||!S.manufacturingDate||!S.registrationDate||!S.maxLiftingCapacity||!S.unladenWeight||!S.runningCostPerKm||!S.baseRates.micro||!S.baseRates.small||!S.baseRates.monthly||!S.baseRates.yearly)return L("Please fill in all required fields","error"),!1;const P=/^\d{4}-\d{2}$/;return!P.test(S.manufacturingDate)||!P.test(S.registrationDate)?(L("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(S.maxLiftingCapacity))||isNaN(Number(S.unladenWeight))||isNaN(Number(S.runningCostPerKm))||isNaN(Number(S.baseRates.micro))||isNaN(Number(S.baseRates.small))||isNaN(Number(S.baseRates.monthly))||isNaN(Number(S.baseRates.yearly))?(L("Please enter valid numbers for numeric fields","error"),!1):!0},A=async P=>{if(P.preventDefault(),!!D())try{const B={...S,equipmentId:(w==null?void 0:w.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(S.maxLiftingCapacity),unladenWeight:Number(S.unladenWeight),baseRates:{micro:Number(S.baseRates.micro),small:Number(S.baseRates.small),monthly:Number(S.baseRates.monthly),yearly:Number(S.baseRates.yearly)},runningCost:Number(S.runningCostPerKm),runningCostPerKm:Number(S.runningCostPerKm)};if(console.log("Form submission data:",B),w){console.log(`Updating equipment ${w.id}`,B);let W=await BU(w.id,B);W?(console.log("Update successful:",W),W=Of(W),n(O=>O.map(T=>T.id===w.id?W:T)),L("Equipment updated successfully","success")):L("Failed to update equipment","error")}else{console.log("Creating new equipment",B);let W=await $U(B);W=Of(W),console.log("Creation successful:",W),n(O=>[...O,W]),L("Equipment added successfully","success")}setTimeout(()=>{j()},500),p(!1),$()}catch(B){console.error("Error saving equipment:",B),L("Error saving equipment","error")}},F=async()=>{if(w)try{await zU(w.id),n(P=>P.filter(B=>B.id!==w.id)),v(!1),b(null),L("Equipment deleted successfully","success")}catch{L("Error deleting equipment","error")}},$=()=>{k({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),b(null)},L=(P,B="success")=>{N({show:!0,title:P,variant:B}),setTimeout(()=>N({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(he,{placeholder:"Search equipment...",value:i,onChange:P=>a(P.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(Se,{value:u,onChange:P=>d(P),options:[{value:"all",label:"All Categories"},...Ff],className:"w-full sm:w-48"}),o.jsx(Se,{value:l,onChange:P=>c(P),options:[{value:"all",label:"All Status"},...Lf],className:"w-full sm:w-48"})]})]}),o.jsx(V,{onClick:()=>{$(),p(!0)},leftIcon:o.jsx(ls,{className:"w-4 h-4"}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Equipment"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Equipment Inventory"})}),o.jsx(se,{children:h?o.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sm:px-6",children:"Rates"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(P=>{var B,W;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:P.name}),o.jsx("div",{className:"text-sm text-gray-500",children:P.equipmentId}),P.description&&o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:P.description})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(hl,{variant:"secondary",className:"w-full justify-center",children:(B=Ff.find(O=>O.value===P.category))==null?void 0:B.label}),o.jsx(hl,{variant:P.status==="available"?"success":P.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(W=Lf.find(O=>O.value===P.status))==null?void 0:W.label})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"text-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(os,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Mfg: ",P.manufacturingDate||"N/A"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(XA,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:P.maxLiftingCapacity?`${P.maxLiftingCapacity} tons max lift`:"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:P.unladenWeight?`${P.unladenWeight} tons unladen`:"N/A"})]}),P.registrationDate&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(os,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Reg: ",P.registrationDate]})]})]})}),o.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:o.jsxs("div",{className:"text-sm",children:["                          ",o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),o.jsx("div",{className:"space-y-2.5",children:VU.map(O=>o.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[o.jsx("span",{className:"text-gray-600",children:O.label}),o.jsxs("div",{className:"flex items-baseline gap-1.5",children:[o.jsx("span",{className:"text-gray-400 text-sm",children:"₹"}),o.jsx("span",{className:"text-gray-900 font-medium",children:P.baseRates&&P.baseRates[O.value]!==void 0?De(P.baseRates[O.value]):"N/A"}),o.jsx("span",{className:"text-gray-500 text-sm",children:O.value==="monthly"||O.value==="yearly"?o.jsxs("div",{children:["per",o.jsx("br",{}),"month"]}):"per hour"})]})]},O.value))})]}),"                            ",o.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[o.jsx(cn,{className:"h-4 w-4"}),o.jsx("span",{children:"Running:"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-gray-400",children:"₹"}),o.jsx("span",{className:"text-gray-900",children:P.runningCostPerKm!==void 0?De(P.runningCostPerKm):"N/A"}),o.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{b(P),k({name:P.name||"",category:P.category||"mobile_crane",manufacturingDate:P.manufacturingDate||"",registrationDate:P.registrationDate||"",maxLiftingCapacity:P.maxLiftingCapacity!==void 0?String(P.maxLiftingCapacity):"",unladenWeight:P.unladenWeight!==void 0?String(P.unladenWeight):"",baseRates:{micro:P.baseRates&&P.baseRates.micro!==void 0?String(P.baseRates.micro):"",small:P.baseRates&&P.baseRates.small!==void 0?String(P.baseRates.small):"",monthly:P.baseRates&&P.baseRates.monthly!==void 0?String(P.baseRates.monthly):"",yearly:P.baseRates&&P.baseRates.yearly!==void 0?String(P.baseRates.yearly):""},runningCostPerKm:P.runningCostPerKm!==void 0?String(P.runningCostPerKm):"",description:P.description||"",status:P.status||"available"}),p(!0)},children:o.jsx(vi,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{b(P),v(!0)},children:o.jsx(Na,{className:"h-4 w-4"})})]})})]},P.id)})})]})})})]}),o.jsx(dt,{title:w?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),$()},size:"lg",children:o.jsxs("form",{onSubmit:A,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(he,{label:"Name",value:S.name,onChange:P=>k({...S,name:P.target.value}),required:!0}),o.jsx(he,{label:"Max Lifting Capacity (tons)",type:"number",value:S.maxLiftingCapacity,onChange:P=>k({...S,maxLiftingCapacity:P.target.value}),required:!0}),o.jsx(Se,{label:"Category",value:S.category,onChange:P=>k({...S,category:P}),options:Ff,className:"w-full"}),o.jsx(he,{label:"Unladen Weight (tons)",type:"number",value:S.unladenWeight,onChange:P=>k({...S,unladenWeight:P.target.value}),required:!0}),o.jsx(he,{label:"Manufacturing Date (YYYY-MM)",value:S.manufacturingDate,onChange:P=>k({...S,manufacturingDate:P.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(he,{label:"Running Cost (₹/km)",type:"number",value:S.runningCostPerKm,onChange:P=>k({...S,runningCostPerKm:P.target.value}),required:!0}),o.jsx(he,{label:"Registration Date (YYYY-MM)",value:S.registrationDate,onChange:P=>k({...S,registrationDate:P.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(Se,{label:"Status",value:S.status,onChange:P=>k({...S,status:P}),options:Lf,className:"w-full"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(he,{label:"Micro Rate (₹ per hour)",type:"number",value:S.baseRates.micro,onChange:P=>k({...S,baseRates:{...S.baseRates,micro:P.target.value}}),required:!0}),o.jsx(he,{label:"Small Rate (₹ per hour)",type:"number",value:S.baseRates.small,onChange:P=>k({...S,baseRates:{...S.baseRates,small:P.target.value}}),required:!0}),o.jsx(he,{label:"Monthly Rate (₹ per month)",type:"number",value:S.baseRates.monthly,onChange:P=>k({...S,baseRates:{...S.baseRates,monthly:P.target.value}}),required:!0}),o.jsx(he,{label:"Yearly Rate (₹ per month)",type:"number",value:S.baseRates.yearly,onChange:P=>k({...S,baseRates:{...S.baseRates,yearly:P.target.value}}),required:!0})]})]}),o.jsx(Mn,{label:"Description",value:S.description,onChange:P=>k({...S,description:P.target.value}),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>{p(!1),$()},children:"Cancel"}),o.jsx(V,{type:"submit",variant:"accent",children:w?"Update Equipment":"Add Equipment"})]})]})}),o.jsx(dt,{title:"Delete Equipment",isOpen:g,onClose:()=>{v(!1),b(null)},children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this equipment? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>{v(!1),b(null)},children:"Cancel"}),o.jsx(V,{variant:"destructive",onClick:F,children:"Delete Equipment"})]})]})}),o.jsx(mt,{title:x.title,variant:x.variant,isVisible:x.show,onClose:()=>N({show:!1,title:""})})]})}const $f=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],WU=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function HU(){const{user:e}=qe(),[t,n]=y.useState([]),[s,r]=y.useState([]),[i,a]=y.useState(""),[l,c]=y.useState("all"),[u,d]=y.useState("all"),[h,f]=y.useState(!1),[m,p]=y.useState(!1),[g,v]=y.useState(null),[w,b]=y.useState(!0),[x,N]=y.useState({show:!1,title:""}),S=(L,P="success",B)=>{N({show:!0,title:L,variant:P,description:B}),setTimeout(()=>N({show:!1,title:""}),3e3)},[k,j]=y.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});y.useEffect(()=>{(async()=>{try{b(!0);const P=await QC();n(P),b(!1)}catch(P){console.error("Error fetching services:",P),S("Error fetching services","error"),b(!1)}})()},[]),y.useEffect(()=>{C()},[t,i,l,u]);const C=()=>{let L=[...t];i&&(L=L.filter(P=>P.name.toLowerCase().includes(i.toLowerCase())||P.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(L=L.filter(P=>P.type===l)),u!=="all"&&(L=L.filter(P=>u==="active"?P.isActive:!P.isActive)),r(L)},D=async L=>{if(L.preventDefault(),!k.name||!k.type||!k.baseRate||!k.unit){S("Please fill in all required fields","error");return}try{const P={name:k.name,type:k.type,baseRate:parseFloat(k.baseRate),unit:k.unit,description:k.description,isActive:k.isActive};if(g){const B=await XC(g.id,P);n(W=>W.map(O=>O.id===g.id?B:O)),S("Service updated successfully","success")}else{const B=await KC(P);n(W=>[...W,B]),S("Service added successfully","success")}f(!1),F()}catch{S("Error saving service","error")}},A=async()=>{if(g)try{await JC(g.id),n(L=>L.filter(P=>P.id!==g.id)),p(!1),v(null),S("Service deleted successfully","success")}catch(L){console.error("Error deleting service:",L),S("Error deleting service","error")}},F=()=>{j({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),v(null)},$=async L=>{try{const P=await ZC(L.id);n(B=>B.map(W=>W.id===L.id?P:W)),S(`Service ${L.isActive?"deactivated":"activated"}`,"success")}catch(P){console.error("Error toggling service status:",P),S("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(he,{placeholder:"Search services...",value:i,onChange:L=>a(L.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(Se,{options:[{value:"all",label:"All Types"},...$f],value:l,onChange:c,className:"w-40"}),o.jsx(Se,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:L=>d(L),className:"w-40"})]})]}),o.jsx(V,{onClick:()=>{F(),f(!0)},leftIcon:o.jsx(ls,{size:16}),children:"Add Service"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Services Catalog"})}),"        ",o.jsx(se,{children:w?o.jsx("div",{className:"text-center py-4",children:"Loading services..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(L=>{var P;return o.jsx(ee,{variant:"bordered",className:"h-full",children:o.jsxs(se,{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:L.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(dS,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-500",children:(P=$f.find(B=>B.value===L.type))==null?void 0:P.label})]})]}),o.jsx(V,{variant:L.isActive?"default":"ghost",size:"sm",onClick:()=>$(L),children:L.isActive?o.jsx(gr,{className:"h-4 w-4"}):o.jsx(zd,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:L.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[o.jsx(Bd,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:De(L.baseRate)})]}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(Vn,{className:"h-4 w-4"}),o.jsxs("span",{children:["Per ",L.unit]})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{v(L),j({name:L.name,type:L.type,baseRate:L.baseRate.toString(),unit:L.unit,description:L.description||"",isActive:L.isActive}),f(!0)},children:o.jsx(vi,{className:"h-4 w-4"})}),o.jsx(V,{variant:"destructive",size:"sm",onClick:()=>{v(L),p(!0)},children:o.jsx(Na,{className:"h-4 w-4"})})]})]})},L.id)})})})]}),o.jsx(dt,{isOpen:h,onClose:()=>{f(!1),F()},title:g?"Edit Service":"Add New Service",size:"lg",children:o.jsxs("form",{onSubmit:D,className:"space-y-6",children:[o.jsx(he,{label:"Service Name",value:k.name,onChange:L=>j(P=>({...P,name:L.target.value})),required:!0}),o.jsx(Se,{label:"Service Type",options:$f,value:k.type,onChange:L=>j(P=>({...P,type:L})),required:!0}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(he,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:k.baseRate,onChange:L=>j(P=>({...P,baseRate:L.target.value})),required:!0}),o.jsx(Se,{label:"Rate Unit",options:WU,value:k.unit,onChange:L=>j(P=>({...P,unit:L})),required:!0})]}),o.jsx(Mn,{label:"Description",value:k.description,onChange:L=>j(P=>({...P,description:L.target.value})),rows:3}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:L=>j(P=>({...P,isActive:L.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>{f(!1),F()},children:"Cancel"}),o.jsx(V,{type:"submit",children:g?"Update Service":"Add Service"})]})]})}),o.jsx(dt,{isOpen:m,onClose:()=>{p(!1),v(null)},title:"Delete Service",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>{p(!1),v(null)},children:"Cancel"}),o.jsx(V,{variant:"destructive",onClick:A,children:"Delete"})]})]})}),x.show&&o.jsx(mt,{title:x.title,variant:x.variant,isVisible:x.show,onClose:()=>N({show:!1,title:""})})]})}const qU=async()=>await On.get("/users"),GU=async e=>await On.post("/users",e),Lw=async(e,t)=>await On.put(`/users/${e}`,t),YU=async e=>{await On.delete(`/users/${e}`)},Bf=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],QU=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],ro=10,zf=e=>{const t=e.split("").reduce((a,l)=>a+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],s=t%n.length,r=n[s];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${r}&color=fff&size=128`};function KU(){const{user:e}=qe(),[t,n]=y.useState([]),[s,r]=y.useState([]),[i,a]=y.useState(1),[l,c]=y.useState(""),[u,d]=y.useState("all"),[h,f]=y.useState("all"),[m,p]=y.useState(!0),[g,v]=y.useState(!1),[w,b]=y.useState(!1),[x,N]=y.useState(null),[S,k]=y.useState({show:!1,title:""}),[j,C]=y.useState({name:"",email:"",password:"",role:"operator",status:"active"});y.useEffect(()=>{(async()=>{try{if(p(!0),!e){A("Authentication Required","You need to log in to view users","warning"),p(!1);return}try{const _=(await qU()).map(U=>({id:U.id,name:U.name,email:U.email,role:U.role,status:U.status==="active"?"active":"inactive"}));n(_),r(_)}catch(T){console.error("Error fetching users:",T),T.message&&T.message.includes("Authentication required")?A("Authentication Error","You need to log in to view users","error"):A("Error loading users",T.message||"Please try again later","error");const _=[{id:"1",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"2",name:"Sales Agent",email:"sales@example.com",role:"sales_agent",status:"active"}];n(_),r(_)}}finally{p(!1)}})()},[]),y.useEffect(()=>{D()},[t,l,u,h]);const D=()=>{let O=[...t];if(l){const T=l.toLowerCase();O=O.filter(_=>_&&typeof _.name=="string"&&typeof _.email=="string"&&(_.name.toLowerCase().includes(T)||_.email.toLowerCase().includes(T)))}u!=="all"&&(O=O.filter(T=>T.role===u)),h!=="all"&&(O=O.filter(T=>T.status===h)),r(O),a(1)},A=(O,T,_="success")=>{k({show:!0,title:O,description:T,variant:_}),setTimeout(()=>k({show:!1,title:""}),3e3)},F=async O=>{const T=O.status==="active"?"inactive":"active";try{await Lw(O.id,{}),n(_=>_.map(U=>U.id===O.id?{...U,status:T}:U)),A(`User ${O.status==="active"?"deactivated":"activated"}`,"success")}catch(_){console.error("Error toggling user status:",_),A("Error updating user status","error")}},$=async O=>{if(O.preventDefault(),!j.name||!j.email||!j.role){A("Please fill in all required fields","error");return}if(!x&&!j.password){A("Password is required for new users","error");return}try{if(x){const T={...x,name:j.name,email:j.email,role:j.role,status:j.status};await Lw(x.id,{name:j.name,email:j.email,role:j.role,isActive:j.status==="active"}),n(_=>_.map(U=>U.id===x.id?T:U)),A("User updated successfully","success")}else try{const T=await GU({email:j.email,name:j.name,role:j.role,isActive:j.status==="active"}),_={id:T.id,name:T.name,email:T.email,role:T.role,status:T.isActive?"active":"inactive",avatar:zf(j.name)};n(U=>[...U,_]),A("User added successfully","success")}catch(T){A(`Error creating user account: ${T.message||"Unknown error"}`,"error");return}v(!1),P()}catch(T){A(`Error saving user: ${T.message||"Unknown error"}`,"error")}},L=async()=>{if(x)try{await YU(x.id),n(O=>O.filter(T=>T.id!==x.id)),b(!1),N(null),A("User deleted successfully","success")}catch(O){console.error("Error deleting user:",O),A("Error deleting user","error")}},P=()=>{C({name:"",email:"",password:"",role:"operator",status:"active"}),N(null)},B=Math.ceil(s.length/ro),W=s.slice((i-1)*ro,i*ro);return!e||e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(he,{placeholder:"Search users...",value:l,onChange:O=>c(O.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(Se,{options:[{value:"all",label:"All Roles"},...Bf],value:u,onChange:O=>d(O),className:"w-full sm:w-40"}),o.jsx(Se,{options:[{value:"all",label:"All Status"},...QU],value:h,onChange:O=>f(O),className:"w-full sm:w-40"})]})]}),o.jsx(V,{onClick:()=>{P(),v(!0)},leftIcon:o.jsx(KA,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add User"})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"User Management"})}),o.jsx(se,{children:m?o.jsx("div",{className:"text-center py-4",children:"Loading users..."}):W.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(O=>{var T;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:O.avatar||zf(O.name),alt:O.name,className:"h-10 w-10 rounded-full object-cover",onError:_=>{const U=_.target;U.onerror=null,U.src=zf(O.name)}}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium text-gray-900",children:O.name}),o.jsx("div",{className:"text-sm text-gray-500",children:O.email})]})]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(T=Bf.find(_=>_.value===O.role))==null?void 0:T.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${O.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:O.status==="active"?"Active":"Inactive"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>F(O),children:O.status==="active"?o.jsx(zd,{size:16}):o.jsx(gr,{size:16})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{N(O),C({name:O.name,email:O.email,password:"",role:O.role,status:O.status}),v(!0)},children:o.jsx(vi,{size:16})}),o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{N(O),b(!0)},children:o.jsx(Na,{size:16})})]})})]},O.id)})})]})}),B>1&&o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*ro+1," to"," ",Math.min(i*ro,s.length)," of"," ",s.length," users"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(V,{variant:"outline",size:"sm",onClick:()=>a(O=>Math.max(1,O-1)),disabled:i===1,children:"Previous"}),o.jsx(V,{variant:"outline",size:"sm",onClick:()=>a(O=>Math.min(B,O+1)),disabled:i===B,children:"Next"})]})]})]})})]}),"      ",o.jsx(dt,{isOpen:g,onClose:()=>{v(!1),P()},title:x?"Edit User":"Add New User",size:"lg",children:o.jsxs("form",{onSubmit:$,className:"space-y-6",children:[o.jsx(ld,{}),o.jsx(he,{label:"Full Name",value:j.name,onChange:O=>C(T=>({...T,name:O.target.value})),required:!0}),"          ",o.jsx(he,{label:"Email Address",type:"email",value:j.email,onChange:O=>C(T=>({...T,email:O.target.value})),required:!0}),o.jsx(he,{label:"Password",type:"password",value:j.password||"",onChange:O=>C(T=>({...T,password:O.target.value})),required:!x,placeholder:x?"Leave blank to keep current password":""}),o.jsx(Se,{label:"Role",options:Bf,value:j.role,onChange:O=>C(T=>({...T,role:O})),required:!0}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:j.status==="active",onChange:O=>C(T=>({...T,status:O.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>{v(!1),P()},children:"Cancel"}),o.jsx(V,{type:"submit",variant:"accent",children:x?"Update User":"Add User"})]})]})}),"      ",o.jsx(dt,{isOpen:w,onClose:()=>{b(!1),N(null)},title:"Delete User",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[o.jsx(yi,{className:"h-5 w-5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>{b(!1),N(null)},children:"Cancel"}),o.jsx(V,{variant:"destructive",onClick:L,children:"Delete User"})]})]})}),S.show&&o.jsx(mt,{title:S.title,variant:S.variant,isVisible:S.show,onClose:()=>k({show:!1,title:""})})]})}function _i({children:e,title:t,defaultExpanded:n=!1,icon:s,className:r="",onToggle:i}){const[a,l]=y.useState(n),c=()=>{const u=!a;l(u),i==null||i(u)};return o.jsxs(ee,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${r}`,children:[o.jsx(fe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[s&&o.jsx("div",{className:"text-gray-500 flex-shrink-0",children:s}),o.jsx(me,{className:"text-base sm:text-lg font-medium",children:t})]}),o.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${a?"rotate-180":""}`,children:o.jsx(Ws,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),o.jsx("div",{className:`transition-all duration-300 overflow-hidden ${a?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:o.jsx(se,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}const Fw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},ch=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("authToken");return t&&(e.Authorization=`Bearer ${t}`),e},XU=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:ch()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||Fw}catch(e){return console.error("Error fetching quotation config:",e),Fw}},JU=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:ch(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.message||"Failed to update quotation config")}return(await t.json()).data}catch(t){throw console.error("Error updating quotation config:",t),t}},Vk=async e=>{try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:ch()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},Uk=async(e,t)=>{try{const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:ch(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||`Failed to update ${e} config`)}return(await n.json()).data}catch(n){throw console.error(`Error updating ${e} config:`,n),n}},ZU=async()=>Vk("resourceRates"),eW=async e=>Uk("resourceRates",e),tW=async()=>Vk("additionalParams"),nW=async e=>Uk("additionalParams",e);function sW(){const[e,t]=y.useState(!0),[n,s]=y.useState(!1),[r,i]=y.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[a,l]=y.useState({show:!1,title:""});y.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await XU();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const g of f){const v=r[g];if(v.minDays<=p){u(`${g.charAt(0).toUpperCase()+g.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(v.maxDays<=v.minDays){u(`${g.charAt(0).toUpperCase()+g.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=v.maxDays}if(!m)return;await JU({orderTypeLimits:r}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{s(!1)}},h=(f,m,p)=>{const g=parseInt(p)||0;i(v=>({...v,[f]:{...v[f],[m]:g}}))};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(Ye,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>o.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(_e,{type:"number",label:"Minimum Days",value:r[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),o.jsx("div",{children:o.jsx(_e,{type:"number",label:"Maximum Days",value:r[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:r[f].minDays+1})})]})]},f))}),o.jsx("div",{className:"flex justify-end",children:o.jsx(V,{onClick:d,disabled:n,leftIcon:n?o.jsx(Ye,{className:"animate-spin"}):o.jsx(bi,{}),children:n?"Saving...":"Save Changes"})}),a.show&&o.jsx(mt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function rW(){const[e,t]=y.useState(!0),[n,s]=y.useState(!1),[r,i]=y.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[a,l]=y.useState({show:!1,title:""});y.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await ZU();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(s(!0),r.foodRatePerMonth<=0||r.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await eW(r),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{s(!1)}};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(Ye,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(qn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(_e,{type:"number",value:r.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(r.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(qn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(_e,{type:"number",value:r.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(r.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(V,{onClick:d,disabled:n,leftIcon:n?o.jsx(Ye,{className:"animate-spin"}):o.jsx(bi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(mt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function iW(){const[e,t]=y.useState(!0),[n,s]=y.useState(!1),[r,i]=y.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[a,l]=y.useState({show:!1,title:""});y.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await tW(),m={...r,...f,usageFactors:{...r.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0),await nW(r),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{s(!1)}};if(e)return o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(Ye,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:g=!1})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),o.jsxs("div",{className:"relative mt-1",children:[!g&&o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(_e,{type:"number",value:f,onChange:v=>m(Number(v.target.value)),className:g?"pr-8":"pl-7",min:"0"}),g&&o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx(UA,{className:"h-4 w-4 text-gray-400"})})]})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Qg,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Usage Rates"})]})}),"          ",o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Normal Usage Factor",value:r.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Usage Factor",value:r.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"Heavy Usage Factor",value:r.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ep,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Risk Factors"})]})}),o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Low Risk",value:r.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Risk",value:r.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"High Risk",value:r.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vn,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Shift Factors"})]})}),o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Single Shift",value:r.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),o.jsx(h,{label:"Double Shift",value:r.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(BA,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Day/Night Factors"})]})}),o.jsxs(se,{className:"space-y-4",children:[o.jsx(h,{label:"Day Factor",value:r.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),o.jsx(h,{label:"Night Factor",value:r.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(V,{onClick:d,disabled:n,leftIcon:n?o.jsx(Ye,{className:"animate-spin"}):o.jsx(bi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(mt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function aW(){const e=oW();return e?{Authorization:`Bearer ${e}`}:{}}const oW=()=>{try{return localStorage.getItem("jwt-token")||localStorage.getItem("authToken")||sessionStorage.getItem("jwt-token")||sessionStorage.getItem("authToken")}catch(e){return console.error("Error accessing storage for auth token:",e),null}};async function lW(e,t){const n=await fetch("/api/templates/merge",{method:"POST",headers:{"Content-Type":"application/json",...aW()},body:JSON.stringify({templateId:e,data:t})});if(!n.ok)throw new Error("Failed to merge template");return(await n.json()).mergedContent||""}const $w={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["10000"],otherFactorsCharge:2e3,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile",dealType:"rental",sundayWorking:"no",otherFactors:[]};function cW({onSave:e}){var x,N;const[t,n]=y.useState([]),[s,r]=y.useState(""),[i,a]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState(!1),[h,f]=y.useState({show:!1,title:""}),[m,p]=y.useState("");y.useEffect(()=>{async function S(){if(i&&$w)try{const k=await lW(i.id,$w);p(k)}catch{p('<div style="color:red">Error generating preview</div>')}else p("")}S()},[i]),y.useEffect(()=>{g()},[]),y.useEffect(()=>{if(s){const S=t.find(k=>k.id===s);a(S||null)}else a(null)},[s,t]);const g=async()=>{try{c(!0);const S=await bx();n(S);const k=S.find(j=>j.isDefault);k&&r(k.id)}catch(S){console.error("Error loading templates and config:",S),v("Error loading configuration","error")}finally{c(!1)}},v=(S,k="success")=>{f({show:!0,title:S,variant:k}),setTimeout(()=>f({show:!1,title:""}),3e3)},w=async()=>{try{d(!0);const S=t.find(k=>k.isDefault);if(S&&S.id!==s&&await ri(S.id,{isDefault:!1}),s){const k=t.find(j=>j.id===s);k&&await ri(k.id,{isDefault:!0})}await g(),v("Default template configuration saved successfully"),e==null||e()}catch(S){console.error("Error saving default template config:",S),v("Error saving configuration","error")}finally{d(!1)}},b=[{value:"",label:"No default template selected"},...t.map(S=>({value:S.id,label:S.name}))];return l?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx(Ye,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fn,{className:"h-5 w-5 text-primary-500"}),o.jsx(me,{children:"Default Quotation Template"})]})}),o.jsxs(se,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),o.jsx(Se,{options:b,value:s,onChange:r,className:"w-full max-w-md"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),s&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(fn,{className:"h-5 w-5 text-blue-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),o.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(x=t.find(S=>S.id===s))==null?void 0:x.name}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(N=t.find(S=>S.id===s))==null?void 0:N.description})]})]})}),t.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ye,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),o.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(V,{onClick:w,disabled:u||t.length===0,leftIcon:u?o.jsx(Ye,{className:"animate-spin"}):o.jsx(bi,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Preview"})}),o.jsx(se,{children:o.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:o.jsx("div",{dangerouslySetInnerHTML:{__html:m}})})})]}),h.show&&o.jsx(mt,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const uW=()=>{const[e,t]=y.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,s]=y.useState(!0),[r,i]=y.useState(!1),[a,l]=y.useState(!1),[c,u]=y.useState("untested"),[d,h]=y.useState({show:!1,title:""}),f=(w,b="success")=>{h({show:!0,title:w,variant:b}),setTimeout(()=>h({show:!1,title:""}),b==="success"?5e3:3e3)};y.useEffect(()=>{m()},[]);const m=async()=>{s(!0);try{const w=await fetch("/api/dbconfig",{method:"GET",headers:su()});if(!w.ok)throw new Error("Failed to fetch database configuration");const b=await w.json();b.success&&b.data&&t({host:b.data.host||"localhost",port:b.data.port||5432,database:b.data.database||"asp_crm",user:b.data.user||"postgres",password:"",ssl:b.data.ssl||!1})}catch(w){console.error("Failed to fetch database config:",w),f("Failed to load database configuration","error")}finally{s(!1)}},p=w=>{const{name:b,value:x,type:N,checked:S}=w.target;t(k=>({...k,[b]:N==="checkbox"?S:N==="number"?parseInt(x)||0:x}))},g=async()=>{l(!0);try{const w=await fetch("/api/dbconfig",{method:"PUT",headers:su(),body:JSON.stringify(e)}),b=await w.json();if(w.ok&&b.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(b.message||"Unknown error")}catch(w){console.error("Failed to save database config:",w),f(`Failed to save database configuration: ${w instanceof Error?w.message:"Unknown error"}`,"error")}finally{l(!1)}},v=async()=>{var w,b;i(!0),u("untested");try{const x=await fetch("/api/dbconfig/test",{method:"POST",headers:su(),body:JSON.stringify(e)}),N=await x.json();x.ok&&N.success?(u("success"),f(`Connection successful! PostgreSQL ${((b=(w=N.data)==null?void 0:w.version)==null?void 0:b.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${N.message||"Unknown error"}`,"error"))}catch(x){console.error("Connection test error:",x),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?o.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),o.jsx(_e,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:o.jsx(qA,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),o.jsx(_e,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),o.jsx(_e,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:o.jsx(aS,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx(_e,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),o.jsx(_e,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsx("input",{type:"checkbox",id:"ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),o.jsx("label",{htmlFor:"ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsx(V,{variant:"outline",onClick:v,disabled:r,leftIcon:r?o.jsx(Ye,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?o.jsx(SA,{className:"h-4 w-4 text-green-500"}):void 0,children:r?"Testing...":"Test Connection"}),o.jsx(V,{onClick:g,disabled:a,leftIcon:a?o.jsx(Ye,{className:"h-4 w-4 animate-spin"}):o.jsx(bi,{className:"h-4 w-4"}),children:a?"Saving...":"Save Configuration"})]}),d.show&&o.jsx(mt,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function dW(){const{user:e}=qe();return!e||e.role!=="admin"&&e.role!=="operations_manager"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),o.jsx(ol,{className:"h-6 w-6 text-gray-400"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(_i,{icon:o.jsx(fn,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:o.jsx(cW,{})}),o.jsx(_i,{icon:o.jsx(os,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:o.jsx(sW,{})}),o.jsx(_i,{icon:o.jsx(fn,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:o.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),o.jsx(_i,{icon:o.jsx(qn,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:o.jsx(rW,{})}),o.jsx(_i,{icon:o.jsx(Qg,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:o.jsx(iW,{})}),o.jsx(_i,{icon:o.jsx(aS,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:o.jsx(uW,{})})]})]})}function hW(){const{user:e}=qe(),[t,n]=y.useState([]),[s,r]=y.useState(""),[i,a]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(null),[h,f]=y.useState(!0),[m,p]=y.useState({show:!1,title:""}),[g,v]=y.useState({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""});y.useEffect(()=>{w()},[]);const w=async()=>{try{const j=await Ik();j&&Array.isArray(j)?n(j):S("Error fetching customers: Invalid data format","error")}catch{S("Error fetching customers","error")}finally{f(!1)}},b=async j=>{if(j.preventDefault(),!g.name||!g.companyName||!g.contactName||!g.email||!g.phone||!g.address||!g.type){S("Please fill in all required fields","error");return}try{if(u){const C=await QV(u.id,g);C&&n(D=>D.map(A=>A.id===u.id?C:A)),S("Customer updated successfully","success")}else{const C=await Ok(g);n(D=>[...D,C]),S("Customer added successfully","success")}a(!1),N()}catch{S("Error saving customer","error")}},x=async()=>{if(u)try{await KV(u.id),n(j=>j.filter(C=>C.id!==u.id)),c(!1),d(null),S("Customer deleted successfully","success")}catch{S("Error deleting customer","error")}},N=()=>{v({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""}),d(null)},S=(j,C="success")=>{p({show:!0,title:j,variant:C}),setTimeout(()=>p({show:!1,title:""}),3e3)},k=t.filter(j=>j&&typeof j.name=="string"&&typeof j.email=="string"&&(j.name.toLowerCase().includes(s.toLowerCase())||j.email.toLowerCase().includes(s.toLowerCase())||j.companyName&&typeof j.companyName=="string"&&j.companyName.toLowerCase().includes(s.toLowerCase())));return!e||e.role!=="admin"&&e.role!=="sales_agent"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 max-w-md relative",children:[o.jsx(Os,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(he,{placeholder:"Search customers...",value:s,onChange:j=>r(j.target.value),className:"pl-10 w-full"})]}),o.jsx(V,{onClick:()=>{N(),a(!0)},leftIcon:o.jsx(ls,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Customer"})]}),o.jsx(ee,{children:o.jsx(se,{children:h?o.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):k.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(j=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.contactName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.companyName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.designation||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.type}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.email}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.phone}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.address}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{d(j),v({name:j.name,companyName:j.companyName,contactName:j.contactName,email:j.email,phone:j.phone,address:j.address,type:j.type,designation:j.designation||"",notes:j.notes||""}),a(!0)},title:"Edit Customer",children:o.jsx(vi,{className:"h-4 w-4"})}),o.jsx(V,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{d(j),c(!0)},title:"Delete Customer",children:o.jsx(Na,{className:"h-4 w-4"})})]})})]},j.id))})]})})})}),o.jsx(dt,{isOpen:i,onClose:()=>{a(!1),N()},title:u?"Edit Customer":"Add New Customer",size:"lg",children:o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsx(he,{label:"Customer Name",value:g.name,onChange:j=>v(C=>({...C,name:j.target.value})),required:!0}),o.jsx(he,{label:"Company Name",value:g.companyName,onChange:j=>v(C=>({...C,companyName:j.target.value})),required:!0}),o.jsx(he,{label:"Contact Name",value:g.contactName,onChange:j=>v(C=>({...C,contactName:j.target.value})),required:!0}),o.jsx(he,{label:"Designation",value:g.designation,onChange:j=>v(C=>({...C,designation:j.target.value}))}),o.jsx(he,{label:"Type",value:g.type,onChange:j=>v(C=>({...C,type:j.target.value})),required:!0}),o.jsx(he,{label:"Email",type:"email",value:g.email,onChange:j=>v(C=>({...C,email:j.target.value})),required:!0}),o.jsx(he,{label:"Phone",value:g.phone,onChange:j=>v(C=>({...C,phone:j.target.value})),required:!0}),o.jsx(he,{label:"Address",value:g.address,onChange:j=>v(C=>({...C,address:j.target.value})),required:!0}),o.jsx(he,{label:"Notes",value:g.notes,onChange:j=>v(C=>({...C,notes:j.target.value}))}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{type:"button",variant:"outline",onClick:()=>{a(!1),N()},children:"Cancel"}),o.jsx(V,{type:"submit",variant:"accent",children:u?"Update Customer":"Add Customer"})]})]})}),o.jsx(dt,{isOpen:l,onClose:()=>{c(!1),d(null)},title:"Delete Customer",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(V,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),o.jsx(V,{variant:"destructive",onClick:x,children:"Delete"})]})]})}),m.show&&o.jsx(mt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]})}function $t(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fW=typeof Symbol=="function"&&Symbol.observable||"@@observable",Bw=fW,zw=()=>Math.random().toString(36).substring(7).split("").join("."),mW={INIT:`@@redux/INIT${zw()}`,REPLACE:`@@redux/REPLACE${zw()}`},Vw=mW;function pW(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Wk(e,t,n){if(typeof e!="function")throw new Error($t(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($t(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($t(1));return n(Wk)(e,t)}let s=e,r=t,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((v,w)=>{a.set(w,v)}))}function d(){if(c)throw new Error($t(3));return r}function h(v){if(typeof v!="function")throw new Error($t(4));if(c)throw new Error($t(5));let w=!0;u();const b=l++;return a.set(b,v),function(){if(w){if(c)throw new Error($t(6));w=!1,u(),a.delete(b),i=null}}}function f(v){if(!pW(v))throw new Error($t(7));if(typeof v.type>"u")throw new Error($t(8));if(typeof v.type!="string")throw new Error($t(17));if(c)throw new Error($t(9));try{c=!0,r=s(r,v)}finally{c=!1}return(i=a).forEach(b=>{b()}),v}function m(v){if(typeof v!="function")throw new Error($t(10));s=v,f({type:Vw.REPLACE})}function p(){const v=h;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error($t(11));function b(){const N=w;N.next&&N.next(d())}return b(),{unsubscribe:v(b)}},[Bw](){return this}}}return f({type:Vw.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[Bw]:p}}function Uw(e,t){return function(...n){return t(e.apply(this,n))}}function Ww(e,t){if(typeof e=="function")return Uw(e,t);if(typeof e!="object"||e===null)throw new Error($t(16));const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=Uw(r,t))}return n}function Hk(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function gW(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error($t(15))};const a={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(a));return i=Hk(...l)(r.dispatch),{...r,dispatch:i}}}var xW={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql=y;function yW(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vW=typeof Object.is=="function"?Object.is:yW,bW=ql.useSyncExternalStore,wW=ql.useRef,jW=ql.useEffect,NW=ql.useMemo,SW=ql.useDebugValue;xW.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=wW(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=NW(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,vW(d,m))return p;var g=s(m);return r!==void 0&&r(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=bW(e,i[0],i[1]);return jW(function(){a.hasValue=!0,a.value=l},[l]),SW(l),l};var CW=y.version.startsWith("19"),kW=Symbol.for(CW?"react.transitional.element":"react.element"),EW=Symbol.for("react.portal"),DW=Symbol.for("react.fragment"),TW=Symbol.for("react.strict_mode"),PW=Symbol.for("react.profiler"),_W=Symbol.for("react.consumer"),AW=Symbol.for("react.context"),qk=Symbol.for("react.forward_ref"),MW=Symbol.for("react.suspense"),RW=Symbol.for("react.suspense_list"),Gx=Symbol.for("react.memo"),IW=Symbol.for("react.lazy"),OW=qk,LW=Gx;function FW(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case kW:switch(e=e.type,e){case DW:case PW:case TW:case MW:case RW:return e;default:switch(e=e&&e.$$typeof,e){case AW:case qk:case IW:case Gx:return e;case _W:return e;default:return t}}case EW:return t}}}function $W(e){return FW(e)===Gx}function BW(e,t,n,s,{areStatesEqual:r,areOwnPropsEqual:i,areStatePropsEqual:a}){let l=!1,c,u,d,h,f;function m(b,x){return c=b,u=x,d=e(c,u),h=t(s,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function g(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function v(){const b=e(c,u),x=!a(b,d);return d=b,x&&(f=n(d,h,u)),f}function w(b,x){const N=!i(x,u),S=!r(b,c,x,u);return c=b,u=x,N&&S?p():N?g():S?v():f}return function(x,N){return l?w(x,N):m(x,N)}}function zW(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...r}){const i=t(e,r),a=n(e,r),l=s(e,r);return BW(i,a,l,e,r)}function VW(e,t){const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=(...i)=>t(r(...i)))}return n}function Lp(e){return function(n){const s=e(n);function r(){return s}return r.dependsOnOwnProps=!1,r}}function Hw(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function Gk(e,t){return function(s,{displayName:r}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=Hw(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=Hw(u),u=i(l,c)),u},i}}function Yx(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function UW(e){return e&&typeof e=="object"?Lp(t=>VW(e,t)):e?typeof e=="function"?Gk(e):Yx(e,"mapDispatchToProps"):Lp(t=>({dispatch:t}))}function WW(e){return e?typeof e=="function"?Gk(e):Yx(e,"mapStateToProps"):Lp(()=>({}))}function HW(e,t,n){return{...n,...e,...t}}function qW(e){return function(n,{displayName:s,areMergedPropsEqual:r}){let i=!1,a;return function(c,u,d){const h=e(c,u,d);return i?r(h,a)||(a=h):(i=!0,a=h),a}}}function GW(e){return e?typeof e=="function"?qW(e):Yx(e,"mergeProps"):()=>HW}function YW(e){e()}function QW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){YW(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var qw={notify(){},get:()=>[]};function Yk(e,t){let n,s=qw,r=0,i=!1;function a(g){d();const v=s.subscribe(g);let w=!1;return()=>{w||(w=!0,v(),h())}}function l(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){r++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=QW())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=qw)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>s};return p}var KW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XW=KW(),JW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ZW=JW(),eH=()=>XW||ZW?y.useLayoutEffect:y.useEffect,hd=eH();function Gw(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Vf(e,t){if(Gw(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Gw(e[n[r]],t[n[r]]))return!1;return!0}var tH={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nH={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},sH={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Qk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},rH={[OW]:sH,[LW]:Qk};function Yw(e){return $W(e)?Qk:rH[e.$$typeof]||tH}var iH=Object.defineProperty,aH=Object.getOwnPropertyNames,Qw=Object.getOwnPropertySymbols,oH=Object.getOwnPropertyDescriptor,lH=Object.getPrototypeOf,Kw=Object.prototype;function Fp(e,t){if(typeof t!="string"){if(Kw){const i=lH(t);i&&i!==Kw&&Fp(e,i)}let n=aH(t);Qw&&(n=n.concat(Qw(t)));const s=Yw(e),r=Yw(t);for(let i=0;i<n.length;++i){const a=n[i];if(!nH[a]&&!(r&&r[a])&&!(s&&s[a])){const l=oH(t,a);try{iH(e,a,l)}catch{}}}}return e}var Uf=Symbol.for("react-redux-context"),Wf=typeof globalThis<"u"?globalThis:{};function cH(){if(!y.createContext)return{};const e=Wf[Uf]??(Wf[Uf]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var Kk=cH(),uH=[null,null];function dH(e,t,n){hd(()=>e(...t),n)}function hH(e,t,n,s,r,i){e.current=s,n.current=!1,r.current&&(r.current=null,i())}function fH(e,t,n,s,r,i,a,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const g=t.getState();let v,w;try{v=s(g,r.current)}catch(b){w=b,f=b}w||(f=null),v===i.current?a.current||u():(i.current=v,c.current=v,a.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function mH(e,t){return e===t}function pH(e,t,n,{pure:s,areStatesEqual:r=mH,areOwnPropsEqual:i=Vf,areStatePropsEqual:a=Vf,areMergedPropsEqual:l=Vf,forwardRef:c=!1,context:u=Kk}={}){const d=u,h=WW(e),f=UW(t),m=GW(n),p=!!e;return v=>{const w=v.displayName||v.name||"Component",b=`Connect(${w})`,x={shouldHandleStateChanges:p,displayName:b,wrappedComponentName:w,WrappedComponent:v,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:r,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:l};function N(j){const[C,D,A]=y.useMemo(()=>{const{reactReduxForwardedRef:E,...R}=j;return[j.context,E,R]},[j]),F=y.useMemo(()=>{let E=d;return C!=null&&C.Consumer,E},[C,d]),$=y.useContext(F),L=!!j.store&&!!j.store.getState&&!!j.store.dispatch,P=!!$&&!!$.store,B=L?j.store:$.store,W=P?$.getServerState:B.getState,O=y.useMemo(()=>zW(B.dispatch,x),[B]),[T,_]=y.useMemo(()=>{if(!p)return uH;const E=Yk(B,L?void 0:$.subscription),R=E.notifyNestedSubs.bind(E);return[E,R]},[B,L,$]),U=y.useMemo(()=>L?$:{...$,subscription:T},[L,$,T]),q=y.useRef(void 0),Z=y.useRef(A),ae=y.useRef(void 0),le=y.useRef(!1),ge=y.useRef(!1),we=y.useRef(void 0);hd(()=>(ge.current=!0,()=>{ge.current=!1}),[]);const I=y.useMemo(()=>()=>ae.current&&A===Z.current?ae.current:O(B.getState(),A),[B,A]),G=y.useMemo(()=>R=>T?fH(p,B,T,O,Z,q,le,ge,ae,_,R):()=>{},[T]);dH(hH,[Z,q,le,A,ae,_]);let Y;try{Y=y.useSyncExternalStore(G,I,W?()=>O(W(),A):I)}catch(E){throw we.current&&(E.message+=`
The error may be correlated with this previous error:
${we.current.stack}

`),E}hd(()=>{we.current=void 0,ae.current=void 0,q.current=Y});const ie=y.useMemo(()=>y.createElement(v,{...Y,ref:D}),[D,v,Y]);return y.useMemo(()=>p?y.createElement(F.Provider,{value:U},ie):ie,[F,ie,U])}const k=y.memo(N);if(k.WrappedComponent=v,k.displayName=N.displayName=b,c){const C=y.forwardRef(function(A,F){return y.createElement(k,{...A,reactReduxForwardedRef:F})});return C.displayName=b,C.WrappedComponent=v,Fp(C,v)}return Fp(k,v)}}var Xk=pH;function gH(e){const{children:t,context:n,serverState:s,store:r}=e,i=y.useMemo(()=>{const c=Yk(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),a=y.useMemo(()=>r.getState(),[r]);hd(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=n||Kk;return y.createElement(l.Provider,{value:i},t)}var xH=gH,yH="Invariant failed";function vH(e,t){throw new Error(yH)}var Un=function(t){var n=t.top,s=t.right,r=t.bottom,i=t.left,a=s-i,l=r-n,c={top:n,right:s,bottom:r,left:i,width:a,height:l,x:i,y:n,center:{x:(s+i)/2,y:(r+n)/2}};return c},Qx=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Xw=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},bH=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Hf={top:0,right:0,bottom:0,left:0},Kx=function(t){var n=t.borderBox,s=t.margin,r=s===void 0?Hf:s,i=t.border,a=i===void 0?Hf:i,l=t.padding,c=l===void 0?Hf:l,u=Un(Qx(n,r)),d=Un(Xw(n,a)),h=Un(Xw(d,c));return{marginBox:u,borderBox:Un(n),paddingBox:d,contentBox:h,margin:r,border:a,padding:c}},bn=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var r=Number(n);return isNaN(r)&&vH(),r},wH=function(){return{x:window.pageXOffset,y:window.pageYOffset}},fd=function(t,n){var s=t.borderBox,r=t.border,i=t.margin,a=t.padding,l=bH(s,n);return Kx({borderBox:l,border:r,margin:i,padding:a})},md=function(t,n){return n===void 0&&(n=wH()),fd(t,n)},Jk=function(t,n){var s={top:bn(n.marginTop),right:bn(n.marginRight),bottom:bn(n.marginBottom),left:bn(n.marginLeft)},r={top:bn(n.paddingTop),right:bn(n.paddingRight),bottom:bn(n.paddingBottom),left:bn(n.paddingLeft)},i={top:bn(n.borderTopWidth),right:bn(n.borderRightWidth),bottom:bn(n.borderBottomWidth),left:bn(n.borderLeftWidth)};return Kx({borderBox:t,margin:s,padding:r,border:i})},Zk=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return Jk(n,s)},jl=function(t){var n=[],s=null,r=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return r.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},r};function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pd.apply(null,arguments)}function eE(e,t){}eE.bind(null,"warn");eE.bind(null,"error");function vr(){}function jH(e,t){return{...e,...t}}function En(e,t,n){const s=t.map(r=>{const i=jH(n,r.options);return e.addEventListener(r.eventName,r.fn,i),function(){e.removeEventListener(r.eventName,r.fn,i)}});return function(){s.forEach(i=>{i()})}}const NH="Invariant failed";class gd extends Error{}gd.prototype.toString=function(){return this.message};function J(e,t){throw new gd(NH)}class SH extends ne.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=vr,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof gd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=En(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof gd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const CH=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,xd=e=>e+1,kH=e=>`
  You have lifted an item in position ${xd(e.source.index)}
`,tE=(e,t)=>{const n=e.droppableId===t.droppableId,s=xd(e.index),r=xd(t.index);return n?`
      You have moved the item from position ${s}
      to position ${r}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${r}
  `},nE=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,EH=e=>{const t=e.destination;if(t)return tE(e.source,t);const n=e.combine;return n?nE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},Jw=e=>`
  The item has returned to its starting position
  of ${xd(e.index)}
`,DH=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Jw(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${tE(e.source,t)}
    `:n?`
      You have dropped the item.
      ${nE(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Jw(e.source)}
  `},hu={dragHandleUsageInstructions:CH,onDragStart:kH,onDragUpdate:EH,onDragEnd:DH};function TH(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function sE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!TH(e[n],t[n]))return!1;return!0}function Ee(e,t){const n=y.useState(()=>({inputs:t,result:e()}))[0],s=y.useRef(!0),r=y.useRef(n),a=s.current||!!(t&&r.current.inputs&&sE(t,r.current.inputs))?r.current:{inputs:t,result:e()};return y.useEffect(()=>{s.current=!1,r.current=a},[a]),a.result}function pe(e,t){return Ee(()=>e,t)}const jt={x:0,y:0},Ct=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),on=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),br=(e,t)=>e.x===t.x&&e.y===t.y,Aa=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),pi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Nl=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Zw=(e,t)=>Math.min(...t.map(n=>Nl(e,n))),rE=e=>t=>({x:e(t.x),y:e(t.y)});var PH=(e,t)=>{const n=Un({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Gl=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),e1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],_H={top:0,right:0,bottom:0,left:0},AH=(e,t)=>t?Gl(e,t.scroll.diff.displacement):e,MH=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,RH=(e,t)=>t&&t.shouldClipSubject?PH(t.pageMarginBox,e):Un(e);var pa=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const r=AH(e.marginBox,s),i=MH(r,n,t),a=RH(i,s);return{page:e,withPlaceholder:t,active:a}},Xx=(e,t)=>{e.frame||J();const n=e.frame,s=on(t,n.scroll.initial),r=Aa(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:r},max:n.scroll.max}},a=pa({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:a}};function wt(e,t=sE){let n=null;function s(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;const i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return s.clear=function(){n=null},s}const iE=wt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),aE=wt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),uh=wt(e=>Object.values(e)),IH=wt(e=>Object.values(e));var Ma=wt((e,t)=>IH(t).filter(s=>e===s.descriptor.droppableId).sort((s,r)=>s.descriptor.index-r.descriptor.index));function Jx(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function dh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var hh=wt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),OH=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:r})=>{if(!n.isCombineEnabled||!Jx(r))return null;function a(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...r,at:p}}const l=r.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=hh(t,s);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&J();const h=d-1;if(h<0)return null;const f=u[h];return a(f.descriptor.id)},Ra=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const oE={point:jt,value:0},Sl={invisible:{},visible:{},all:[]},LH={displaced:Sl,displacedBy:oE,at:null};var Tn=(e,t)=>n=>e<=n&&n<=t,lE=e=>{const t=Tn(e.top,e.bottom),n=Tn(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),a=n(s.left)||n(s.right);if(i&&a)return!0;const c=s.top<e.top&&s.bottom>e.bottom,u=s.left<e.left&&s.right>e.right;return c&&u?!0:c&&a||u&&i}},FH=e=>{const t=Tn(e.top,e.bottom),n=Tn(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const Zx={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},cE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var $H=e=>t=>{const n=Tn(t.top,t.bottom),s=Tn(t.left,t.right);return r=>e===Zx?n(r.top)&&n(r.bottom):s(r.left)&&s(r.right)};const BH=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:jt;return Gl(e,n)},zH=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,VH=(e,t,n)=>n(t)(e),ey=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:r})=>{const i=s?BH(e,t):e;return zH(i,t,r)&&VH(i,n,r)},UH=e=>ey({...e,isVisibleThroughFrameFn:lE}),uE=e=>ey({...e,isVisibleThroughFrameFn:FH}),WH=e=>ey({...e,isVisibleThroughFrameFn:$H(e.destination.axis)}),HH=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:r}=t;if(s[e])return!1;const i=r[e];return i?i.shouldAnimate:!0};function qH(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Un(Qx(n,s))}function Cl({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:r,last:i}){return e.reduce(function(l,c){const u=qH(c,n),d=c.descriptor.id;if(l.all.push(d),!UH({target:u,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=HH(d,i,r),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function GH(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function t1({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const r=GH(e,{inHomeList:t});return{displaced:Sl,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:r}}}}function yd({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:r,last:i,index:a,forceShouldAnimate:l}){const c=Ra(e,n);if(a==null)return t1({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const u=t.find(p=>p.descriptor.index===a);if(!u)return t1({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const d=hh(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:Cl({afterDragging:f,destination:n,displacedBy:r,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function kr(e,t){return!!t.effected[e]}var YH=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:r})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return kr(i,r)?e?l:l-1:e?l+1:l},QH=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const r=s.index,i=e?r+1:r-1,a=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<a||i>c?null:i},KH=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:r,insideDestination:i,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||J(),u.type==="REORDER"){const h=QH({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:yd({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})}const d=YH({isMovingForward:e,destination:r,displaced:a.displaced,draggables:s,combine:u.combine,afterCritical:c});return d==null?null:yd({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})},XH=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const r=!!(e.visible[n]||e.invisible[n]);return kr(n,t)?r?jt:Aa(s.point):r?s.point:jt},JH=({afterCritical:e,impact:t,draggables:n})=>{const s=dh(t);s||J();const r=s.draggableId,i=n[r].page.borderBox.center,a=XH({displaced:t.displaced,afterCritical:e,combineWith:r,displacedBy:t.displacedBy});return Ct(i,a)};const dE=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,ZH=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,ty=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,n1=({axis:e,moveRelativeTo:t,isMoving:n})=>pi(e.line,t.marginBox[e.end]+dE(e,n),ty(e,t.marginBox,n)),s1=({axis:e,moveRelativeTo:t,isMoving:n})=>pi(e.line,t.marginBox[e.start]-ZH(e,n),ty(e,t.marginBox,n)),eq=({axis:e,moveInto:t,isMoving:n})=>pi(e.line,t.contentBox[e.start]+dE(e,n),ty(e,t.contentBox,n));var tq=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:r})=>{const i=Ma(s.descriptor.id,n),a=t.page,l=s.axis;if(!i.length)return eq({axis:l,moveInto:s.page,isMoving:a});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(kr(d,r))return s1({axis:l,moveRelativeTo:f.page,isMoving:a});const m=fd(f.page,u.point);return s1({axis:l,moveRelativeTo:m,isMoving:a})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return a.borderBox.center;if(kr(h.descriptor.id,r)){const f=fd(h.page,Aa(r.displacedBy.point));return n1({axis:l,moveRelativeTo:f,isMoving:a})}return n1({axis:l,moveRelativeTo:h.page,isMoving:a})},$p=(e,t)=>{const n=e.frame;return n?Ct(t,n.scroll.diff.displacement):t};const nq=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:r})=>{const i=t.page.borderBox.center,a=e.at;return!n||!a?i:a.type==="REORDER"?tq({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:r}):JH({impact:e,draggables:s,afterCritical:r})};var fh=e=>{const t=nq(e),n=e.droppable;return n?$p(n,t):t},hE=(e,t)=>{const n=on(t,e.scroll.initial),s=Aa(n);return{frame:Un({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function r1(e,t){return e.map(n=>t[n])}function sq(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var rq=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:r})=>{const i=hE(t,Ct(t.scroll.current,r)),a=n.frame?Xx(n,Ct(n.frame.scroll.current,r)):n,l=e.displaced,c=Cl({afterDragging:r1(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=Cl({afterDragging:r1(l.all,s),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const g=sq(p,f);if(g){h[p]=g;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},iq=(e,t)=>Ct(e.scroll.diff.displacement,t),ny=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=iq(n,e),r=on(s,t.page.borderBox.center);return Ct(t.client.borderBox.center,r)},fE=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:r,onlyOnMainAxis:i=!1})=>{const a=on(n,e.page.borderBox.center),c={target:Gl(e.page.borderBox,a),destination:t,withDroppableDisplacement:r,viewport:s};return i?WH(c):uE(c)},aq=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:r,viewport:i,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=Ma(n.descriptor.id,s),d=Ra(t,n),h=OH({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:r})||KH({isMovingForward:e,isInHomeList:d,draggable:t,draggables:s,destination:n,insideDestination:u,previousImpact:r,viewport:i,afterCritical:c});if(!h)return null;const f=fh({impact:h,draggable:t,droppable:n,draggables:s,afterCritical:c});if(fE({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ny({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=on(f,a),g=rq({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:p});return{clientSelection:l,impact:g,scrollJumpRequest:p}};const Ft=e=>{const t=e.subject.active;return t||J(),t};var oq=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:r})=>{const i=n.subject.active;if(!i)return null;const a=n.axis,l=Tn(i[a.start],i[a.end]),c=uh(s).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>lE(r.frame)(Ft(d))).filter(d=>{const h=Ft(d);return e?i[a.crossAxisEnd]<h[a.crossAxisEnd]:h[a.crossAxisStart]<i[a.crossAxisStart]}).filter(d=>{const h=Ft(d),f=Tn(h[a.start],h[a.end]);return l(h[a.start])||l(h[a.end])||f(i[a.start])||f(i[a.end])}).sort((d,h)=>{const f=Ft(d)[a.crossAxisStart],m=Ft(h)[a.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>Ft(d)[a.crossAxisStart]===Ft(f[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>Tn(Ft(d)[a.start],Ft(d)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>Ft(d)[a.start]-Ft(h)[a.start])[0]:c.sort((d,h)=>{const f=Zw(t,e1(Ft(d))),m=Zw(t,e1(Ft(h)));return f!==m?f-m:Ft(d)[a.start]-Ft(h)[a.start]})[0]};const i1=(e,t)=>{const n=e.page.borderBox.center;return kr(e.descriptor.id,t)?on(n,t.displacedBy.point):n},lq=(e,t)=>{const n=e.page.borderBox;return kr(e.descriptor.id,t)?Gl(n,Aa(t.displacedBy.point)):n};var cq=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:r})=>s.filter(a=>uE({target:lq(a,r),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=Nl(e,$p(n,i1(a,r))),u=Nl(e,$p(n,i1(l,r)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Yl=wt(function(t,n){const s=n[t.line];return{value:s,point:pi(t.line,s)}});const uq=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return pi(s.line,t[s.line]);const r=e.subject.page.contentBox[s.size],c=Ma(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[s.size],0)+t[s.line]-r;return c<=0?null:pi(s.line,c)},mE=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),pE=(e,t,n)=>{const s=e.frame;Ra(t,e)&&J(),e.subject.withPlaceholder&&J();const r=Yl(e.axis,t.displaceBy).point,i=uq(e,r,n),a={placeholderSize:r,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const d=pa({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?Ct(s.scroll.max,i):s.scroll.max,c=mE(s,l),u=pa({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},dq=e=>{const t=e.subject.withPlaceholder;t||J();const n=e.frame;if(!n){const a=pa({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const s=t.oldFrameMaxScroll;s||J();const r=mE(n,s),i=pa({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null});return{...e,subject:i,frame:r}};var hq=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:r,destination:i,viewport:a,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:Sl,displacedBy:oE,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=fh({impact:h,draggable:s,droppable:i,draggables:r,afterCritical:l}),m=Ra(s,i)?i:pE(i,s,r);return fE({draggable:s,destination:m,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?h:h+1})(),d=Yl(i.axis,s.displaceBy);return yd({draggable:s,insideDestination:n,destination:i,viewport:a,displacedBy:d,last:Sl,index:u})},fq=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:r,droppables:i,viewport:a,afterCritical:l})=>{const c=oq({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:a});if(!c)return null;const u=Ma(c.descriptor.id,r),d=cq({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=hq({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:r,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;const f=fh({impact:h,draggable:n,droppable:c,draggables:r,afterCritical:l});return{clientSelection:ny({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null}},un=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const mq=(e,t)=>{const n=un(e);return n?t[n]:null};var pq=({state:e,type:t})=>{const n=mq(e.impact,e.dimensions.droppables),s=!!n,r=e.dimensions.droppables[e.critical.droppable.id],i=n||r,a=i.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?aq({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):fq({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Gr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function gE(e){const t=Tn(e.top,e.bottom),n=Tn(e.left,e.right);return function(r){return t(r.y)&&n(r.x)}}function gq(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function xq({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,r=n.map(i=>{const a=i.axis,l=pi(i.axis.line,e.center[a.line],i.page.borderBox.center[a.crossAxisLine]);return{id:i.descriptor.id,distance:Nl(s,l)}}).sort((i,a)=>a.distance-i.distance);return r[0]?r[0].id:null}function yq({pageBorderBox:e,draggable:t,droppables:n}){const s=uh(n).filter(r=>{if(!r.isEnabled)return!1;const i=r.subject.active;if(!i||!gq(e,i))return!1;if(gE(i)(e.center))return!0;const a=r.axis,l=i.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],d=Tn(i[a.crossAxisStart],i[a.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return s.length?s.length===1?s[0].descriptor.id:xq({pageBorderBox:e,draggable:t,candidates:s}):null}const xE=(e,t)=>Un(Gl(e,t));var vq=(e,t)=>{const n=e.frame;return n?xE(t,n.scroll.diff.value):t};function yE({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function bq({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var wq=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:r,viewport:i,afterCritical:a})=>{const l=n.axis,c=Yl(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=hh(t,s).find(g=>{const v=g.descriptor.id,w=g.page.borderBox.center[l.line],b=kr(v,a),x=yE({displaced:r,id:v});return b?x?h<=w:d<w-u:x?h<=w+u:d<w})||null,p=bq({draggable:t,closest:m,inHomeList:Ra(t,n)});return yd({draggable:t,insideDestination:s,destination:n,viewport:i,last:r,displacedBy:c,index:p})};const jq=4;var Nq=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const a=s.axis,l=Yl(s.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=hh(e,r).find(p=>{const g=p.descriptor.id,v=p.page.borderBox,b=v[a.size]/jq,x=kr(g,i),N=yE({displaced:n.displaced,id:g});return x?N?d>v[a.start]+b&&d<v[a.end]-b:u>v[a.start]-c+b&&u<v[a.end]-c-b:N?d>v[a.start]+c+b&&d<v[a.end]+c-b:u>v[a.start]+b&&u<v[a.end]-b});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:s.descriptor.id}}}:null},vE=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:r,viewport:i,afterCritical:a})=>{const l=xE(t.page.borderBox,e),c=yq({pageBorderBox:l,draggable:t,droppables:s});if(!c)return LH;const u=s[c],d=Ma(u.descriptor.id,n),h=vq(u,l);return Nq({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:r,destination:u,insideDestination:d,afterCritical:a})||wq({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:r.displaced,viewport:i,afterCritical:a})},sy=(e,t)=>({...e,[t.descriptor.id]:t});const Sq=({previousImpact:e,impact:t,droppables:n})=>{const s=un(e),r=un(t);if(!s||s===r)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const a=dq(i);return sy(n,a)};var Cq=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:r})=>{const i=Sq({previousImpact:s,impact:r,droppables:n}),a=un(r);if(!a)return i;const l=n[a];if(Ra(e,l)||l.subject.withPlaceholder)return i;const c=pE(l,e,t);return sy(i,c)},$o=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:r,scrollJumpRequest:i})=>{const a=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=on(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:Ct(e.initial.client.borderBoxCenter,u)},h={selection:Ct(d.selection,a.scroll.current),borderBoxCenter:Ct(d.borderBoxCenter,a.scroll.current),offset:Ct(d.offset,a.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:f};const m=l.draggables[e.critical.draggable.id],p=r||vE({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),g=Cq({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:g},impact:p,viewport:a,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function kq(e,t){return e.map(n=>t[n])}var bE=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:r})=>{const i=e.displaced,a=kq(i.all,n),l=Cl({afterDragging:a,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:r,last:i});return{...e,displaced:l}},wE=({impact:e,draggable:t,droppable:n,draggables:s,viewport:r,afterCritical:i})=>{const a=fh({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return ny({pageBorderBoxCenter:a,draggable:t,viewport:r})},jE=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&J();const s=e.impact,r=n||e.viewport,i=t||e.dimensions,{draggables:a,droppables:l}=i,c=a[e.critical.draggable.id],u=un(s);u||J();const d=l[u],h=bE({impact:s,viewport:r,destination:d,draggables:a}),f=wE({impact:h,draggable:c,droppable:d,draggables:a,viewport:r,afterCritical:e.afterCritical});return $o({impact:h,clientSelection:f,state:e,dimensions:i,viewport:r})},Eq=e=>({index:e.index,droppableId:e.droppableId}),NE=({draggable:e,home:t,draggables:n,viewport:s})=>{const r=Yl(t.axis,e.displaceBy),i=Ma(t.descriptor.id,n),a=i.indexOf(e);a===-1&&J();const l=i.slice(a+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:r,effected:c};return{impact:{displaced:Cl({afterDragging:l,destination:t,displacedBy:r,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:Eq(e.descriptor)}},afterCritical:u}},Dq=(e,t)=>({draggables:e.draggables,droppables:sy(e.droppables,t)}),Tq=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=fd(e.client,t),r=md(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:r}},Pq=e=>{const t=e.frame;return t||J(),t},_q=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(r=>{const i=r.descriptor.droppableId,a=t[i],c=Pq(a).scroll.diff.value,u=Ct(s,c);return Tq({draggable:r,offset:u,initialWindowScroll:n.scroll.initial})})},Aq=({state:e,published:t})=>{const n=t.modified.map(w=>{const b=e.dimensions.droppables[w.droppableId];return Xx(b,w.scroll)}),s={...e.dimensions.droppables,...iE(n)},r=aE(_q({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...r};t.removals.forEach(w=>{delete i[w]});const a={droppables:s,draggables:i},l=un(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],d=a.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=NE({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=vE({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),g={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Bp=e=>e.movementMode==="SNAP",qf=(e,t,n)=>{const s=Dq(e.dimensions,t);return!Bp(e)||n?$o({state:e,dimensions:s}):jE({state:e,dimensions:s})};function Gf(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const a1={phase:"IDLE",completed:null,shouldFlush:!1};var Mq=(e=a1,t)=>{if(t.type==="FLUSH")return{...a1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&J();const{critical:n,clientSelection:s,viewport:r,dimensions:i,movementMode:a}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:s,borderBoxCenter:l.client.borderBox.center,offset:jt},d={client:u,page:{selection:Ct(u.selection,r.scroll.initial),borderBoxCenter:Ct(u.selection,r.scroll.initial),offset:Ct(u.selection,r.scroll.diff.value)}},h=uh(i.droppables).every(g=>!g.isFixedOnPage),{impact:f,afterCritical:m}=NE({draggable:l,home:c,draggables:i.draggables,viewport:r});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&J(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||J(),Aq({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Gr(e)||J();const{client:n}=t.payload;return br(n,e.current.client.selection)?e:$o({state:e,clientSelection:n,impact:Bp(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Gf(e);Gr(e)||J();const{id:n,newScroll:s}=t.payload,r=e.dimensions.droppables[n];if(!r)return e;const i=Xx(r,s);return qf(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gr(e)||J();const{id:n,isEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||J(),r.isEnabled===s&&J();const i={...r,isEnabled:s};return qf(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gr(e)||J();const{id:n,isCombineEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||J(),r.isCombineEnabled===s&&J();const i={...r,isCombineEnabled:s};return qf(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Gr(e)||J(),e.isWindowScrollAllowed||J();const n=t.payload.newScroll;if(br(e.viewport.scroll.current,n))return Gf(e);const s=hE(e.viewport,n);return Bp(e)?jE({state:e,viewport:s}):$o({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Gr(e))return e;const n=t.payload.maxScroll;if(br(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&J();const n=pq({state:e,type:t.type});return n?$o({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&J(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:r}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||J(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:r,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Re(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Rq=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Iq=e=>({type:"LIFT",payload:e}),Oq=e=>({type:"INITIAL_PUBLISH",payload:e}),Lq=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Fq=()=>({type:"COLLECTION_STARTING",payload:null}),$q=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Bq=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),zq=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),SE=e=>({type:"MOVE",payload:e}),Vq=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Uq=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Wq=()=>({type:"MOVE_UP",payload:null}),Hq=()=>({type:"MOVE_DOWN",payload:null}),qq=()=>({type:"MOVE_RIGHT",payload:null}),Gq=()=>({type:"MOVE_LEFT",payload:null}),ry=()=>({type:"FLUSH",payload:null}),Yq=e=>({type:"DROP_ANIMATE",payload:e}),iy=e=>({type:"DROP_COMPLETE",payload:e}),CE=e=>({type:"DROP",payload:e}),Qq=e=>({type:"DROP_PENDING",payload:e}),kE=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Kq=e=>({getState:t,dispatch:n})=>s=>r=>{if(!Re(r,"LIFT")){s(r);return}const{id:i,clientSelection:a,movementMode:l}=r.payload,c=t();c.phase==="DROP_ANIMATING"&&n(iy({completed:c.completed})),t().phase!=="IDLE"&&J(),n(ry()),n(Rq({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(Oq({critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:m}))},Xq=e=>()=>t=>n=>{Re(n,"INITIAL_PUBLISH")&&e.dragging(),Re(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Re(n,"FLUSH")||Re(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const ay={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},kl={opacity:{drop:0,combining:.7},scale:{drop:.75}},EE={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fr=`${EE.outOfTheWay}s ${ay.outOfTheWay}`,Bo={fluid:`opacity ${Fr}`,snap:`transform ${Fr}, opacity ${Fr}`,drop:e=>{const t=`${e}s ${ay.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fr}`,placeholder:`height ${Fr}, width ${Fr}, margin ${Fr}`},o1=e=>br(e,jt)?void 0:`translate(${e.x}px, ${e.y}px)`,zp={moveTo:o1,drop:(e,t)=>{const n=o1(e);if(n)return t?`${n} scale(${kl.scale.drop})`:n}},{minDropTime:Vp,maxDropTime:DE}=EE,Jq=DE-Vp,l1=1500,Zq=.6;var e7=({current:e,destination:t,reason:n})=>{const s=Nl(e,t);if(s<=0)return Vp;if(s>=l1)return DE;const r=s/l1,i=Vp+Jq*r,a=n==="CANCEL"?i*Zq:i;return Number(a.toFixed(2))},t7=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:r})=>{const{draggables:i,droppables:a}=n,l=un(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],d=wE({impact:e,draggable:t,draggables:i,afterCritical:r,droppable:c||u,viewport:s});return on(d,t.client.borderBox.center)},n7=({draggables:e,reason:t,lastImpact:n,home:s,viewport:r,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:bE({draggables:e,impact:i,destination:s,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Sl},didDropInsideDroppable:!0};const s7=({getState:e,dispatch:t})=>n=>s=>{if(!Re(s,"DROP")){n(s);return}const r=e(),i=s.payload.reason;if(r.phase==="COLLECTING"){t(Qq({reason:i}));return}if(r.phase==="IDLE")return;r.phase==="DROP_PENDING"&&r.isWaiting&&J(),r.phase==="DRAGGING"||r.phase==="DROP_PENDING"||J();const l=r.critical,c=r.dimensions,u=c.draggables[r.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=n7({reason:i,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),f=h?Jx(d):null,m=h?dh(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:r.movementMode,destination:f,combine:m},v=t7({impact:d,draggable:u,dimensions:c,viewport:r.viewport,afterCritical:r.afterCritical}),w={critical:r.critical,afterCritical:r.afterCritical,result:g,impact:d};if(!(!br(r.current.client.offset,v)||!!g.combine)){t(iy({completed:w}));return}const x=e7({current:r.current.client.offset,destination:v,reason:i});t(Yq({newHomeClientOffset:v,dropDuration:x,completed:w}))};var TE=()=>({x:window.pageXOffset,y:window.pageYOffset});function r7(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function i7({onWindowScroll:e}){function t(){e(TE())}const n=jl(t),s=r7(n);let r=vr;function i(){return r!==vr}function a(){i()&&J(),r=En(window,[s])}function l(){i()||J(),n.cancel(),r(),r=vr}return{start:a,stop:l,isActive:i}}const a7=e=>Re(e,"DROP_COMPLETE")||Re(e,"DROP_ANIMATE")||Re(e,"FLUSH"),o7=e=>{const t=i7({onWindowScroll:n=>{e.dispatch(Vq({newScroll:n}))}});return n=>s=>{!t.isActive()&&Re(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&a7(s)&&t.stop(),n(s)}};var l7=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),r=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return r.wasCalled=()=>t,r},c7=()=>{const e=[],t=r=>{const i=e.findIndex(l=>l.timerId===r);i===-1&&J();const[a]=e.splice(i,1);a.callback()};return{add:r=>{const i=setTimeout(()=>t(i)),a={timerId:i,callback:r};e.push(a)},flush:()=>{if(!e.length)return;const r=[...e];e.length=0,r.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const u7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,d7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,h7=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},io=(e,t)=>{t()},$c=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Yf(e,t,n,s){if(!e){n(s(t));return}const r=l7(n);e(t,{announce:r}),r.wasCalled()||n(s(t))}var f7=(e,t)=>{const n=c7();let s=null;const r=(h,f)=>{s&&J(),io("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{s&&J(),io("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m($c(h,f))})},a=(h,f)=>{s&&J();const m=$c(h,f);s={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{io("onDragStart",()=>Yf(e().onDragStart,m,t,hu.onDragStart))})},l=(h,f)=>{const m=Jx(f),p=dh(f);s||J();const g=!h7(h,s.lastCritical);g&&(s.lastCritical=h);const v=!u7(s.lastLocation,m);v&&(s.lastLocation=m);const w=!d7(s.lastCombine,p);if(w&&(s.lastCombine=p),!g&&!v&&!w)return;const b={...$c(h,s.mode),combine:p,destination:m};n.add(()=>{io("onDragUpdate",()=>Yf(e().onDragUpdate,b,t,hu.onDragUpdate))})},c=()=>{s||J(),n.flush()},u=h=>{s||J(),s=null,io("onDragEnd",()=>Yf(e().onDragEnd,h,t,hu.onDragEnd))};return{beforeCapture:r,beforeStart:i,start:a,update:l,flush:c,drop:u,abort:()=>{if(!s)return;const h={...$c(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},m7=(e,t)=>{const n=f7(e,t);return s=>r=>i=>{if(Re(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Re(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),r(i),n.start(l,i.payload.movementMode);return}if(Re(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),r(i),n.drop(l);return}if(r(i),Re(i,"FLUSH")){n.abort();return}const a=s.getState();a.phase==="DRAGGING"&&n.update(a.critical,a.impact)}};const p7=e=>t=>n=>{if(!Re(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&J(),e.dispatch(iy({completed:s.completed}))},g7=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return r=>i=>{if((Re(i,"FLUSH")||Re(i,"DROP_COMPLETE")||Re(i,"DROP_ANIMATION_FINISHED"))&&s(),r(i),!Re(i,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(kE())}};n=requestAnimationFrame(()=>{n=null,t=En(window,[a])})}};var x7=e=>()=>t=>n=>{(Re(n,"DROP_COMPLETE")||Re(n,"FLUSH")||Re(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},y7=e=>{let t=!1;return()=>n=>s=>{if(Re(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Re(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Re(s,"DROP_COMPLETE")){t=!1;const r=s.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const v7=e=>Re(e,"DROP_COMPLETE")||Re(e,"DROP_ANIMATE")||Re(e,"FLUSH");var b7=e=>t=>n=>s=>{if(v7(s)){e.stop(),n(s);return}if(Re(s,"INITIAL_PUBLISH")){n(s);const r=t.getState();r.phase!=="DRAGGING"&&J(),e.start(r);return}n(s),e.scroll(t.getState())};const w7=e=>t=>n=>{if(t(n),!Re(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(CE({reason:s.reason})))},j7=Hk;var N7=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:r,autoScroller:i})=>Wk(Mq,j7(gW(Xq(n),x7(e),Kq(e),s7,p7,g7,w7,b7(i),o7,y7(t),m7(s,r))));const Qf=()=>({additions:{},removals:{},modified:{}});function S7({registry:e,callbacks:t}){let n=Qf(),s=null;const r=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(jt)).sort((p,g)=>p.descriptor.index-g.descriptor.index),f=Object.keys(d).map(p=>{const v=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:v}}),m={additions:h,removals:Object.keys(u),modified:f};n=Qf(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],r()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],r()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=Qf())}}}var PE=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const r=on({x:t,y:e},{x:s,y:n});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},_E=()=>{const e=document.documentElement;return e||J(),e},AE=()=>{const e=_E();return PE({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},C7=()=>{const e=TE(),t=AE(),n=e.y,s=e.x,r=_E(),i=r.clientWidth,a=r.clientHeight,l=s+i,c=n+a;return{frame:Un({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:jt,displacement:jt}}}},k7=({critical:e,scrollOptions:t,registry:n})=>{const s=C7(),r=s.scroll.current,i=e.droppable,a=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(r,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(r));return{dimensions:{draggables:aE(l),droppables:iE(a)},critical:e,viewport:s}};function c1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var E7=(e,t)=>{let n=null;const s=S7({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=(f,m)=>{e.droppable.exists(f)||J(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},a=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;s.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||J();const m=n.critical.draggable;f.type==="ADDITION"&&c1(e,m,f.value)&&s.add(f.value),f.type==="REMOVAL"&&c1(e,m,f.value)&&s.remove(f.value)};return{updateDroppableIsEnabled:r,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:a,startPublishing:f=>{n&&J();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),g={draggable:m.descriptor,droppable:p.descriptor},v=e.subscribe(u);return n={critical:g,unsubscribe:v},k7({critical:g,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},ME=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",D7=e=>{window.scrollBy(e.x,e.y)};const T7=wt(e=>uh(e).filter(t=>!(!t.isEnabled||!t.frame))),P7=(e,t)=>T7(t).find(s=>(s.frame||J(),gE(s.frame.pageMarginBox)(e)))||null;var _7=({center:e,destination:t,droppables:n})=>{if(t){const r=n[t];return r.frame?r:null}return P7(e,n)};const El={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var A7=(e,t,n=()=>El)=>{const s=n(),r=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:r,maxScrollValueAt:i}},RE=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},oy=1,M7=(e,t,n=()=>El)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return oy;const i=1-RE({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=s.maxPixelScroll*s.ease(i);return Math.ceil(a)},R7=(e,t,n)=>{const s=n(),r=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,a=t,l=i,u=Date.now()-a;if(u>=i)return e;if(u<r)return oy;const d=RE({startOfRange:r,endOfRange:l,current:u}),h=e*s.ease(d);return Math.ceil(h)},u1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:r})=>{const i=M7(e,t,r);return i===0?0:s?Math.max(R7(i,n,r),oy):i},d1=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=A7(e,s,i);return t[s.end]<t[s.start]?u1({distanceToEdge:t[s.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i}):-1*u1({distanceToEdge:t[s.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})},I7=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,r=t.width>e.width;return!r&&!s?n:r&&s?null:{x:r?0:n.x,y:s?0:n.y}};const O7=rE(e=>e===0?0:e);var IE=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=d1({container:t,distanceToEdges:a,dragStartTime:e,axis:Zx,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),c=d1({container:t,distanceToEdges:a,dragStartTime:e,axis:cE,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),u=O7({x:c,y:l});if(br(u,jt))return null;const d=I7({container:t,subject:n,proposedScroll:u});return d?br(d,jt)?null:d:null};const L7=rE(e=>e===0?0:e>0?1:-1),ly=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const r=Ct(t,s),i={x:e(r.x,n.x),y:e(r.y,n.y)};return br(i,jt)?null:i}})(),OE=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},r=L7(n),i=ly({max:s,current:t,change:r});return!i||r.x!==0&&i.x===0||r.y!==0&&i.y===0},cy=(e,t)=>OE({current:e.scroll.current,max:e.scroll.max,change:t}),F7=(e,t)=>{if(!cy(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return ly({current:s,max:n,change:t})},uy=(e,t)=>{const n=e.frame;return n?OE({current:n.scroll.current,max:n.scroll.max,change:t}):!1},$7=(e,t)=>{const n=e.frame;return!n||!uy(e,t)?null:ly({current:n.scroll.current,max:n.scroll.max,change:t})};var B7=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=IE({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return a&&cy(e,a)?a:null},z7=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=e.frame;if(!a)return null;const l=IE({dragStartTime:s,container:a.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return l&&uy(e,l)?l:null},h1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:r,getAutoScrollerOptions:i})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=B7({dragStartTime:t,viewport:h,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){s(f);return}}const u=_7({center:a,destination:un(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=z7({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&r(u.descriptor.id,d)},V7=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>El})=>{const s=jl(e),r=jl(t);let i=null;const a=u=>{i||J();const{shouldUseTimeDampening:d,dragStartTime:h}=i;h1({state:u,scrollWindow:s,scrollDroppable:r,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&J();const d=Date.now();let h=!1;const f=()=>{h=!0};h1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&a(u)},stop:()=>{i&&(s.cancel(),r.cancel(),i=null)},scroll:a}},U7=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const u=Ct(l.current.client.selection,c);e({client:u})},r=(l,c)=>{if(!uy(l,c))return c;const u=$7(l,c);if(!u)return t(l.descriptor.id,c),null;const d=on(c,u);return t(l.descriptor.id,d),on(c,d)},i=(l,c,u)=>{if(!l||!cy(c,u))return u;const d=F7(c,u);if(!d)return n(u),null;const h=on(u,d);return n(h),on(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=un(l.impact);u||J();const d=r(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&s(l,f)}},W7=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const r=V7({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=U7({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){r.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:r.start,stop:r.stop}};const ga="data-rfd",xa=(()=>{const e=`${ga}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Up=(()=>{const e=`${ga}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),H7=(()=>{const e=`${ga}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),f1={contextId:`${ga}-scroll-container-context-id`},q7=e=>t=>`[${t}="${e}"]`,ao=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),G7="pointer-events: none;";var Y7=e=>{const t=q7(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(xa.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:G7,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${Bo.outOfTheWay};
    `;return{selector:t(Up.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),r={selector:t(H7.contextId),styles:{always:"overflow-anchor: none;"}},a=[s,n,r,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ao(a,"always"),resting:ao(a,"resting"),dragging:ao(a,"dragging"),dropAnimating:ao(a,"dropAnimating"),userCancel:ao(a,"userCancel")}};const dn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect,Kf=()=>{const e=document.querySelector("head");return e||J(),e},m1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Q7(e,t){const n=Ee(()=>Y7(e),[e]),s=y.useRef(null),r=y.useRef(null),i=pe(wt(h=>{const f=r.current;f||J(),f.textContent=h}),[]),a=pe(h=>{const f=s.current;f||J(),f.textContent=h},[]);dn(()=>{!s.current&&!r.current||J();const h=m1(t),f=m1(t);return s.current=h,r.current=f,h.setAttribute(`${ga}-always`,e),f.setAttribute(`${ga}-dynamic`,e),Kf().appendChild(h),Kf().appendChild(f),a(n.always),i(n.resting),()=>{const m=p=>{const g=p.current;g||J(),Kf().removeChild(g),p.current=null};m(s),m(r)}},[t,a,i,n.always,n.resting,e]);const l=pe(()=>i(n.dragging),[i,n.dragging]),c=pe(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=pe(()=>{r.current&&i(n.resting)},[i,n.resting]);return Ee(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function LE(e,t){return Array.from(e.querySelectorAll(t))}var FE=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function mh(e){return e instanceof FE(e).HTMLElement}function K7(e,t){const n=`[${xa.contextId}="${e}"]`,s=LE(document,n);if(!s.length)return null;const r=s.find(i=>i.getAttribute(xa.draggableId)===t);return!r||!mh(r)?null:r}function X7(e){const t=y.useRef({}),n=y.useRef(null),s=y.useRef(null),r=y.useRef(!1),i=pe(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const v=t.current;v[f]!==p&&delete v[f]}},[]),a=pe(function(f){const m=K7(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=pe(function(f,m){n.current===f&&(n.current=m)},[]),c=pe(function(){s.current||r.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const f=n.current;f&&a(f)}))},[a]),u=pe(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(xa.draggableId)===f&&(n.current=f)},[]);return dn(()=>(r.current=!0,function(){r.current=!1;const f=s.current;f&&cancelAnimationFrame(f)}),[]),Ee(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function J7(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function s(h){t.length&&t.forEach(f=>f(h))}function r(h){return e.draggables[h]||null}function i(h){const f=r(h);return f||J(),f}const a={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=r(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:r,exists:h=>!!r(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||J(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function Z7(){const e=Ee(J7,[]);return y.useEffect(()=>function(){e.clean()},[e]),e}var dy=ne.createContext(null),vd=()=>{const e=document.body;return e||J(),e};const e9={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},t9=e=>`rfd-announcement-${e}`;function n9(e){const t=Ee(()=>t9(e),[e]),n=y.useRef(null);return y.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),pd(i.style,e9),vd().appendChild(i),function(){setTimeout(function(){const c=vd();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),pe(r=>{const i=n.current;if(i){i.textContent=r;return}},[])}const s9={separator:"::"};function hy(e,t=s9){const n=ne.useId();return Ee(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function r9({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function i9({contextId:e,text:t}){const n=hy("hidden-text",{separator:"-"}),s=Ee(()=>r9({contextId:e,uniqueId:n}),[n,e]);return y.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",vd().appendChild(i),function(){const l=vd();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var ph=ne.createContext(null);function $E(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function a9(){let e=null;function t(){return!!e}function n(a){return a===e}function s(a){e&&J();const l={abandon:a};return e=l,l}function r(){e||J(),e=null}function i(){e&&(e.abandon(),r())}return{isClaimed:t,isActive:n,claim:s,release:r,tryAbandon:i}}function Dl(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const o9=9,l9=13,fy=27,BE=32,c9=33,u9=34,d9=35,h9=36,f9=37,m9=38,p9=39,g9=40,x9={[l9]:!0,[o9]:!0};var zE=e=>{x9[e.keyCode]&&e.preventDefault()};const gh=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),VE=0,p1=5;function y9(e,t){return Math.abs(t.x-e.x)>=p1||Math.abs(t.y-e.y)>=p1}const g1={type:"IDLE"};function v9({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:r=>{const{button:i,clientX:a,clientY:l}=r;if(i!==VE)return;const c={x:a,y:l},u=n();if(u.type==="DRAGGING"){r.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&J();const d=u.point;if(!y9(d,c))return;r.preventDefault();const h=u.actions.fluidLift(c);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:r=>{n().type==="DRAGGING"&&r.preventDefault(),e()}},{eventName:"keydown",fn:r=>{if(n().type==="PENDING"){e();return}if(r.keyCode===fy){r.preventDefault(),e();return}zE(r)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:r=>{const i=n();if(i.type==="IDLE"&&J(),i.actions.shouldRespectForcePress()){e();return}r.preventDefault()}},{eventName:gh,fn:e}]}function b9(e){const t=y.useRef(g1),n=y.useRef(vr),s=Ee(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==VE||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,a,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),r=Ee(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=pe(function(){const h={passive:!1,capture:!0};n.current=En(window,[r,s],h)},[r,s]),a=pe(()=>{t.current.type!=="IDLE"&&(t.current=g1,n.current(),i())},[i]),l=pe(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=pe(function(){const h={capture:!0,passive:!1},f=v9({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=En(window,f,h)},[l,a]),u=pe(function(h,f){t.current.type!=="IDLE"&&J(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);dn(function(){return i(),function(){n.current()}},[i])}function w9(){}const j9={[u9]:!0,[c9]:!0,[h9]:!0,[d9]:!0};function N9(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:r=>{if(r.keyCode===fy){r.preventDefault(),n();return}if(r.keyCode===BE){r.preventDefault(),s();return}if(r.keyCode===g9){r.preventDefault(),e.moveDown();return}if(r.keyCode===m9){r.preventDefault(),e.moveUp();return}if(r.keyCode===p9){r.preventDefault(),e.moveRight();return}if(r.keyCode===f9){r.preventDefault(),e.moveLeft();return}if(j9[r.keyCode]){r.preventDefault();return}zE(r)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:gh,fn:n}]}function S9(e){const t=y.useRef(w9),n=Ee(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==BE)return;const a=e.findClosestDraggableId(i);if(!a)return;const l=e.tryGetLock(a,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||J(),c=!1,t.current(),s()}t.current=En(window,N9(u,d),{capture:!0,passive:!1})}}),[e]),s=pe(function(){const i={passive:!1,capture:!0};t.current=En(window,[n],i)},[n]);dn(function(){return s(),function(){t.current()}},[s])}const Xf={type:"IDLE"},C9=120,k9=.15;function E9({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===fy&&n.preventDefault(),e()}},{eventName:gh,fn:e}]}function D9({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}r.hasMoved=!0;const{clientX:i,clientY:a}=s.touches[0],l={x:i,y:a};s.preventDefault(),r.actions.move(l)}},{eventName:"touchend",fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}s.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const r=n();r.type==="IDLE"&&J();const i=s.touches[0];if(!i||!(i.force>=k9))return;const l=r.actions.shouldRespectForcePress();if(r.type==="PENDING"){l&&e();return}if(l){if(r.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:gh,fn:e}]}function T9(e){const t=y.useRef(Xf),n=y.useRef(vr),s=pe(function(){return t.current},[]),r=pe(function(m){t.current=m},[]),i=Ee(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const g=e.tryGetLock(p,l,{sourceEvent:m});if(!g)return;const v=m.touches[0],{clientX:w,clientY:b}=v,x={x:w,y:b};n.current(),h(g,x)}}),[e]),a=pe(function(){const m={capture:!0,passive:!1};n.current=En(window,[i],m)},[i]),l=pe(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),r(Xf),n.current(),a())},[a,r]),c=pe(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=pe(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:s},g=En(window,D9(p),m),v=En(window,E9(p),m);n.current=function(){g(),v()}},[c,s,l]),d=pe(function(){const m=s();m.type!=="PENDING"&&J();const p=m.actions.fluidLift(m.point);r({type:"DRAGGING",actions:p,hasMoved:!1})},[s,r]),h=pe(function(m,p){s().type!=="IDLE"&&J();const g=setTimeout(d,C9);r({type:"PENDING",point:p,actions:m,longPressTimerId:g}),u()},[u,s,r,d]);dn(function(){return a(),function(){n.current();const p=s();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),r(Xf))}},[s,a,r]),dn(function(){return En(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const P9=["input","button","textarea","select","option","optgroup","video","audio"];function UE(e,t){if(t==null)return!1;if(P9.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:UE(e,t.parentElement)}function _9(e,t){const n=t.target;return mh(n)?UE(e,n):!1}var A9=e=>Un(e.getBoundingClientRect()).center;function M9(e){return e instanceof FE(e).Element}const R9=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function WE(e,t){return e==null?null:e[R9](t)?e:WE(e.parentElement,t)}function I9(e,t){return e.closest?e.closest(t):WE(e,t)}function O9(e){return`[${xa.contextId}="${e}"]`}function L9(e,t){const n=t.target;if(!M9(n))return null;const s=O9(e),r=I9(n,s);return!r||!mh(r)?null:r}function F9(e,t){const n=L9(e,t);return n?n.getAttribute(xa.draggableId):null}function $9(e,t){const n=`[${Up.contextId}="${e}"]`,r=LE(document,n).find(i=>i.getAttribute(Up.id)===t);return!r||!mh(r)?null:r}function B9(e){e.preventDefault()}function Bc({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function HE({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const r=n.draggable.findById(s);return!(!r||!r.options.isEnabled||!ME(t.getState(),s))}function z9({lockAPI:e,contextId:t,store:n,registry:s,draggableId:r,forceSensorStop:i,sourceEvent:a}){if(!HE({lockAPI:e,store:n,registry:s,draggableId:r}))return null;const c=s.draggable.getById(r),u=$9(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&_9(u,a))return null;const d=e.claim(i||vr);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(S,k){Bc({expected:S,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(k())}const g=p.bind(null,"DRAGGING");function v(S){function k(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(k(),J()),n.dispatch(Iq(S.liftActionArgs)),h="DRAGGING";function j(C,D={shouldBlockNextClick:!1}){if(S.cleanup(),D.shouldBlockNextClick){const A=En(window,[{eventName:"click",fn:B9,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}k(),n.dispatch(CE({reason:C}))}return{isActive:()=>Bc({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:C=>j("DROP",C),cancel:C=>j("CANCEL",C),...S.actions}}function w(S){const k=jl(C=>{g(()=>SE({client:C}))});return{...v({liftActionArgs:{id:r,clientSelection:S,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function b(){const S={moveUp:()=>g(Wq),moveRight:()=>g(qq),moveDown:()=>g(Hq),moveLeft:()=>g(Gq)};return v({liftActionArgs:{id:r,clientSelection:A9(u),movementMode:"SNAP"},cleanup:vr,actions:S})}function x(){Bc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Bc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:w,snapLift:b,abort:x}}const V9=[b9,S9,T9];function U9({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:r}){const i=[...r?V9:[],...s||[]],a=y.useState(()=>a9())[0],l=pe(function(v,w){Dl(v)&&!Dl(w)&&a.tryAbandon()},[a]);dn(function(){let v=t.getState();return t.subscribe(()=>{const b=t.getState();l(v,b),v=b})},[a,t,l]),dn(()=>a.tryAbandon,[a.tryAbandon]);const c=pe(g=>HE({lockAPI:a,registry:n,store:t,draggableId:g}),[a,n,t]),u=pe((g,v,w)=>z9({lockAPI:a,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:v||null,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null}),[e,a,n,t]),d=pe(g=>F9(e,g),[e]),h=pe(g=>{const v=n.draggable.findById(g);return v?v.options:null},[n.draggable]),f=pe(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(ry()))},[a,t]),m=pe(()=>a.isClaimed(),[a]),p=Ee(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let g=0;g<i.length;g++)i[g](p)}const W9=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Rl.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),H9=e=>({...El,...e.autoScrollerOptions,durationDampening:{...El.durationDampening,...e.autoScrollerOptions}});function oo(e){return e.current||J(),e.current}function q9(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:r,dragHandleUsageInstructions:i}=e,a=y.useRef(null),l=$E(e),c=pe(()=>W9(l.current),[l]),u=pe(()=>H9(l.current),[l]),d=n9(t),h=i9({contextId:t,text:i}),f=Q7(t,r),m=pe(A=>{oo(a).dispatch(A)},[]),p=Ee(()=>Ww({publishWhileDragging:Lq,updateDroppableScroll:$q,updateDroppableIsEnabled:Bq,updateDroppableIsCombineEnabled:zq,collectionStarting:Fq},m),[m]),g=Z7(),v=Ee(()=>E7(g,p),[g,p]),w=Ee(()=>W7({scrollWindow:D7,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:u,...Ww({move:SE},m)}),[v.scrollDroppable,m,u]),b=X7(t),x=Ee(()=>N7({announce:d,autoScroller:w,dimensionMarshal:v,focusMarshal:b,getResponders:c,styleMarshal:f}),[d,w,v,b,c,f]);a.current=x;const N=pe(()=>{const A=oo(a);A.getState().phase!=="IDLE"&&A.dispatch(ry())},[]),S=pe(()=>{const A=oo(a).getState();return A.phase==="DROP_ANIMATING"?!0:A.phase==="IDLE"?!1:A.isDragging},[]),k=Ee(()=>({isDragging:S,tryAbort:N}),[S,N]);n(k);const j=pe(A=>ME(oo(a).getState(),A),[]),C=pe(()=>Gr(oo(a).getState()),[]),D=Ee(()=>({marshal:v,focus:b,contextId:t,canLift:j,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:g}),[t,v,h,b,j,C,g]);return U9({contextId:t,store:x,registry:g,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>N,[N]),ne.createElement(ph.Provider,{value:D},ne.createElement(xH,{context:dy,store:x},e.children))}function G9(){return ne.useId()}function Y9(e){const t=G9(),n=e.dragHandleUsageInstructions||hu.dragHandleUsageInstructions;return ne.createElement(SH,null,s=>ne.createElement(q9,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const x1={dragging:5e3,dropAnimating:4500},Q9=(e,t)=>t?Bo.drop(t.duration):e?Bo.snap:Bo.fluid,K9=(e,t)=>{if(e)return t?kl.opacity.drop:kl.opacity.combining},X9=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function J9(e){const n=e.dimension.client,{offset:s,combineWith:r,dropping:i}=e,a=!!r,l=X9(e),c=!!i,u=c?zp.drop(s,a):zp.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Q9(l,i),transform:u,opacity:K9(a,c),zIndex:c?x1.dropAnimating:x1.dragging,pointerEvents:"none"}}function Z9(e){return{transform:zp.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function eG(e){return e.type==="DRAGGING"?J9(e):Z9(e)}function tG(e,t,n=jt){const s=window.getComputedStyle(t),r=t.getBoundingClientRect(),i=Jk(r,s),a=md(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:a}}function nG(e){const t=hy("draggable"),{descriptor:n,registry:s,getDraggableRef:r,canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}=e,c=Ee(()=>({canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}),[i,l,a]),u=pe(m=>{const p=r();return p||J(),tG(n,p,m)},[n,r]),d=Ee(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=y.useRef(d),f=y.useRef(!0);dn(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),dn(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,s.draggable.update(d,m)},[d,s.draggable])}var my=ne.createContext(null);function bd(e){const t=y.useContext(e);return t||J(),t}function sG(e){e.preventDefault()}const rG=e=>{const t=y.useRef(null),n=pe((k=null)=>{t.current=k},[]),s=pe(()=>t.current,[]),{contextId:r,dragHandleUsageInstructionsId:i,registry:a}=bd(ph),{type:l,droppableId:c}=bd(my),u=Ee(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:g,mapped:v,dropAnimationFinished:w}=e;if(!g){const k=Ee(()=>({descriptor:u,registry:a,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,a,s,p,m,f]);nG(k)}const b=Ee(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":r,draggable:!1,onDragStart:sG}:null,[r,i,h,f]),x=pe(k=>{v.type==="DRAGGING"&&v.dropping&&k.propertyName==="transform"&&Rl.flushSync(w)},[w,v]),N=Ee(()=>{const k=eG(v),j=v.type==="DRAGGING"&&v.dropping?x:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":r,"data-rfd-draggable-id":h,style:k,onTransitionEnd:j},dragHandleProps:b}},[r,b,h,v,x,n]),S=Ee(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return ne.createElement(ne.Fragment,null,d(N,v.snapshot,S))};var qE=(e,t)=>e===t,GE=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const iG=e=>e.combine?e.combine.draggableId:null,aG=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function oG(){const e=wt((r,i)=>({x:r,y:i})),t=wt((r,i,a=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:r,draggingOver:a,combineWith:l,combineTargetFor:null})),n=wt((r,i,a,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:r,dimension:a,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(r,i)=>{if(Dl(r)){if(r.critical.draggable.id!==i.draggableId)return null;const a=r.current.client.offset,l=r.dimensions.draggables[i.draggableId],c=un(r.impact),u=aG(r.impact),d=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,l,i.isClone,c,u,d)}if(r.phase==="DROP_ANIMATING"){const a=r.completed;if(a.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=r.dimensions.draggables[i.draggableId],u=a.result,d=u.mode,h=GE(u),f=iG(u),p={duration:r.dropDuration,curve:ay.drop,moveTo:r.newHomeClientOffset,opacity:f?kl.opacity.drop:null,scale:f?kl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function YE(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const lG={mapped:{type:"SECONDARY",offset:jt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:YE(null)}};function cG(){const e=wt((a,l)=>({x:a,y:l})),t=wt(YE),n=wt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=a=>a?n(jt,a,!0):null,r=(a,l,c,u)=>{const d=c.displaced.visible[a],h=!!(u.inVirtualList&&u.effected[a]),f=dh(c),m=f&&f.draggableId===a?l:null;if(!d){if(!h)return s(m);if(c.displaced.invisible[a])return null;const v=Aa(u.displacedBy.point),w=e(v.x,v.y);return n(w,m,!0)}if(h)return s(m);const p=c.displacedBy.point,g=e(p.x,p.y);return n(g,m,d.shouldAnimate)};return(a,l)=>{if(Dl(a))return a.critical.draggable.id===l.draggableId?null:r(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:r(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const uG=()=>{const e=oG(),t=cG();return(s,r)=>e(s,r)||t(s,r)||lG},dG={dropAnimationFinished:kE},hG=Xk(uG,dG,null,{context:dy,areStatePropsEqual:qE})(rG);function QE(e){return bd(my).isUsingCloneFor===e.draggableId&&!e.isClone?null:ne.createElement(hG,e)}function fG(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return ne.createElement(QE,pd({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const KE=e=>t=>e===t,mG=KE("scroll"),pG=KE("auto"),y1=(e,t)=>t(e.overflowX)||t(e.overflowY),gG=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return y1(n,mG)||y1(n,pG)},xG=()=>!1,XE=e=>e==null?null:e===document.body?xG()?e:null:e===document.documentElement?null:gG(e)?e:XE(e.parentElement);var Wp=e=>({x:e.scrollLeft,y:e.scrollTop});const JE=e=>e?window.getComputedStyle(e).position==="fixed"?!0:JE(e.parentElement):!1;var yG=e=>{const t=XE(e),n=JE(e);return{closestScrollable:t,isFixedOnPage:n}},vG=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:r,client:i,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=PE({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:jt,displacement:jt}}}})(),u=r==="vertical"?Zx:cE,d=pa({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:u,isEnabled:t,client:i,page:a,frame:c,subject:d}};const bG=(e,t)=>{const n=Zk(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,r=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,a=r+t.scrollWidth,c=Qx({top:s,right:a,bottom:i,left:r},n.border);return Kx({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var wG=({ref:e,descriptor:t,env:n,windowScroll:s,direction:r,isDropDisabled:i,isCombineEnabled:a,shouldClipSubject:l})=>{const c=n.closestScrollable,u=bG(e,c),d=md(u,s),h=(()=>{if(!c)return null;const m=Zk(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:md(m,s),scroll:Wp(c),scrollSize:p,shouldClipSubject:l}})();return vG({descriptor:t,isEnabled:!i,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:r,client:u,page:d,closest:h})};const jG={passive:!1},NG={passive:!0};var v1=e=>e.shouldPublishImmediately?jG:NG;const zc=e=>e&&e.env.closestScrollable||null;function SG(e){const t=y.useRef(null),n=bd(ph),s=hy("droppable"),{registry:r,marshal:i}=n,a=$E(e),l=Ee(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=y.useRef(l),u=Ee(()=>wt((N,S)=>{t.current||J();const k={x:N,y:S};i.updateDroppableScroll(l.id,k)}),[l.id,i]),d=pe(()=>{const N=t.current;return!N||!N.env.closestScrollable?jt:Wp(N.env.closestScrollable)},[]),h=pe(()=>{const N=d();u(N.x,N.y)},[d,u]),f=Ee(()=>jl(h),[h]),m=pe(()=>{const N=t.current,S=zc(N);if(N&&S||J(),N.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=pe((N,S)=>{t.current&&J();const k=a.current,j=k.getDroppableRef();j||J();const C=yG(j),D={ref:j,descriptor:l,env:C,scrollOptions:S};t.current=D;const A=wG({ref:j,descriptor:l,env:C,windowScroll:N,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),F=C.closestScrollable;return F&&(F.setAttribute(f1.contextId,n.contextId),F.addEventListener("scroll",m,v1(D.scrollOptions))),A},[n.contextId,l,m,a]),g=pe(()=>{const N=t.current,S=zc(N);return N&&S||J(),Wp(S)},[]),v=pe(()=>{const N=t.current;N||J();const S=zc(N);t.current=null,S&&(f.cancel(),S.removeAttribute(f1.contextId),S.removeEventListener("scroll",m,v1(N.scrollOptions)))},[m,f]),w=pe(N=>{const S=t.current;S||J();const k=zc(S);k||J(),k.scrollTop+=N.y,k.scrollLeft+=N.x},[]),b=Ee(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:g,dragStopped:v,scroll:w}),[v,p,g,w]),x=Ee(()=>({uniqueId:s,descriptor:l,callbacks:b}),[b,l,s]);dn(()=>(c.current=x.descriptor,r.droppable.register(x),()=>{t.current&&v(),r.droppable.unregister(x)}),[b,l,v,x,i,r.droppable]),dn(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),dn(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Jf(){}const b1={width:0,height:0,margin:_H},CG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?b1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},kG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=CG({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Bo.placeholder:null}},EG=e=>{const t=y.useRef(null),n=pe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:r,onClose:i,contextId:a}=e,[l,c]=y.useState(e.animate==="open");y.useEffect(()=>l?s!=="open"?(n(),c(!1),Jf):t.current?Jf:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):Jf,[s,l,n]);const u=pe(h=>{h.propertyName==="height"&&(r(),s==="close"&&i())},[s,i,r]),d=kG({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return ne.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var DG=ne.memo(EG);class TG extends ne.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const PG=e=>{const t=y.useContext(ph);t||J();const{contextId:n,isMovementAllowed:s}=t,r=y.useRef(null),i=y.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:g,updateViewportMaxScroll:v,getContainerForClone:w}=e,b=pe(()=>r.current,[]),x=pe((F=null)=>{r.current=F},[]);pe(()=>i.current,[]);const N=pe((F=null)=>{i.current=F},[]),S=pe(()=>{s()&&v({maxScroll:AE()})},[s,v]);SG({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:b});const k=Ee(()=>ne.createElement(TG,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:F,data:$,animate:L})=>ne.createElement(DG,{placeholder:$,onClose:F,innerRef:N,animate:L,contextId:n,onTransitionEnd:S})),[n,S,e.placeholder,e.shouldAnimatePlaceholder,N]),j=Ee(()=>({innerRef:x,placeholder:k,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,k,x]),C=g?g.dragging.draggableId:null,D=Ee(()=>({droppableId:l,type:c,isUsingCloneFor:C}),[l,C,c]);function A(){if(!g)return null;const{dragging:F,render:$}=g,L=ne.createElement(QE,{draggableId:F.draggableId,index:F.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(P,B)=>$(P,B,F));return AP.createPortal(L,w())}return ne.createElement(my.Provider,{value:D},a(j,p),A())};function _G(){return document.body||J(),document.body}const w1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_G},ZE=e=>{let t={...e},n;for(n in w1)e[n]===void 0&&(t={...t,[n]:w1[n]});return t},Zf=(e,t)=>e===t.droppable.type,j1=(e,t)=>t.draggables[e.draggable.id],AG=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=wt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=wt((i,a,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:p}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,a)=>{const l=ZE(a),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(Dl(i)){const f=i.critical;if(!Zf(u,f))return t;const m=j1(f,i.dimensions),p=un(i.impact)===c;return s(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!Zf(u,f.critical))return t;const m=j1(f.critical,i.dimensions);return s(c,d,GE(f.result)===c,un(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!Zf(u,f.critical))return t;const m=un(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),g=f.critical.droppable.id===c;return m?p?e:t:g?e:t}return t}},MG={updateViewportMaxScroll:Uq},RG=Xk(AG,MG,(e,t,n)=>({...ZE(n),...e,...t}),{context:dy,areStatePropsEqual:qE})(PG),em=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function IG(){const{user:e}=qe(),[t,n]=y.useState([]),[s,r]=y.useState(!0),[i,a]=y.useState(!1),[l,c]=y.useState(""),[u,d]=y.useState(null),[h,f]=y.useState({show:!1,title:""}),m=en();y.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0),d(null);const C=await Jd(),A=(F=>Array.isArray(F)?F:F&&typeof F=="object"&&F.data&&Array.isArray(F.data)||F&&typeof F=="object"&&F.success&&Array.isArray(F.data)?F.data:[])(C);console.log("🧪 Debug deals response:",{originalResponse:C,extractedData:A,isArray:Array.isArray(A),length:Array.isArray(A)?A.length:"not array"}),!A||A.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${A.length} deals`),n(A),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(C){console.error("Error fetching deals:",C),d(C instanceof Error?C:new Error("Unknown error fetching deals"));let D="Please check your network connection and ensure the server is running.";C instanceof Error&&(D+=` Error details: ${C.message}`),v("Error fetching deals","error",D),n([])}finally{r(!1)}},g=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},v=(C,D="success",A)=>{f({show:!0,title:C,variant:D,description:A}),setTimeout(()=>f({show:!1,title:""}),5e3)},w=async C=>{var T,_;if(a(!1),console.log("Drag end event:",C),!C.destination){console.log("No destination provided in drag result");return}if(C.source.droppableId===C.destination.droppableId&&C.source.index===C.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:D,destination:A,source:F}=C,$=A.droppableId,L=F.droppableId;console.log(`Moving deal ${D} from ${L} to ${$}`);const P=`Moving deal to ${((T=em.find(U=>U.id===$))==null?void 0:T.label)||$}...`;v(P,"warning");const B=[...t];if(!t.find(U=>U.id===D)){console.error(`Deal with ID ${D} not found`),v("Error updating deal","error","Could not find the deal in the current view");return}const O=t.map(U=>U.id===D?{...U,stage:$}:U);n(O);try{console.log(`Calling API to update deal ${D} to stage ${$}`);const U=await l2(D,$);if(U){console.log("Deal updated successfully:",U),n(ae=>ae.map(le=>le.id===D?U:le));const q=((_=em.find(ae=>ae.id===$))==null?void 0:_.label)||$,Z=U.title||"Deal";v(`Deal moved to ${q}`,"success",`"${Z}" has been successfully moved to the ${q} stage.`),$==="won"&&x(U)}else console.error("Server returned null for updated deal"),n(B),v("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(U){console.error("Error updating deal stage:",U),n(B);const q=U instanceof Error?`Error: ${U.message}`:"An unknown error occurred while updating the deal";v("Error updating deal stage","error",q)}},b=()=>{a(!0),h.show&&f({show:!1,title:""})},x=C=>{v("Schedule a job for this deal","success",`You've won the deal with ${C.customer.name}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${C.id}&action=schedule&customerName=${encodeURIComponent(C.customer.name)}`)},1500)},N=Array.isArray(t)?t.filter(C=>{var F;const D=C.title||"",A=((F=C.customer)==null?void 0:F.name)||"";return D.toLowerCase().includes(l.toLowerCase())||A.toLowerCase().includes(l.toLowerCase())}):[],S=C=>N.filter(D=>D.stage===C),k=C=>S(C).reduce((D,A)=>D+A.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const j=({deal:C,provided:D,snapshot:A})=>{var F,$;return o.jsxs("div",{ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,style:{...D.draggableProps.style,opacity:A.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${A.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:C.title||`Deal for ${((F=C.customer)==null?void 0:F.name)||"Customer"}`}),o.jsx("div",{className:"flex space-x-1",children:o.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6",children:o.jsx(zA,{className:"h-3 w-3"})})})]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[o.jsx($d,{className:"h-3 w-3 mr-1"}),o.jsx("span",{className:"line-clamp-1",children:(($=C.customer)==null?void 0:$.name)||"Unknown Customer"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-bold text-base text-primary-800",children:De(C.value)}),o.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[C.probability||50,"%"]})]})]})};return o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&o.jsx(mt,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),o.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:p,disabled:s,className:"flex items-center gap-1",children:[o.jsx(Ye,{className:`w-4 h-4 ${s?"animate-spin":""}`}),s?"Loading...":"Refresh"]}),o.jsxs("div",{className:"relative flex-grow",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Os,{className:"w-4 h-4 text-gray-500"})}),o.jsx(_e,{type:"text",placeholder:"Search deals...",value:l,onChange:C=>c(C.target.value),className:"pl-10 w-full"})]})]})]}),u&&!s&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx(yi,{className:"h-5 w-5 text-red-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:o.jsx("p",{children:u.message})}),o.jsxs("div",{className:"mt-4",children:[o.jsx(V,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),o.jsx(V,{onClick:g,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):o.jsx(Y9,{onDragEnd:w,onDragStart:b,children:o.jsx("div",{className:"overflow-x-auto pb-6",children:o.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:em.map(C=>o.jsxs("div",{className:`rounded-lg ${C.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:C.label}),o.jsx(hl,{variant:"outline",className:"text-xs",children:De(k(C.id))})]}),o.jsx(RG,{droppableId:C.id,children:D=>o.jsxs("div",{ref:D.innerRef,...D.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[S(C.id).map((A,F)=>o.jsx(fG,{draggableId:A.id,index:F,isDragDisabled:i&&A.stage!==C.id,children:($,L)=>o.jsx(j,{deal:A,provided:$,snapshot:L})},A.id)),D.placeholder,S(C.id).length===0&&!i&&o.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},C.id))})})})]})}const OG=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function LG(){const{id:e}=Hg(),t=en(),{user:n}=qe(),[s,r]=y.useState(null),[i,a]=y.useState(!0),[l,c]=y.useState([]),[u,d]=y.useState([]),[h,f]=y.useState(!1),[m,p]=y.useState({show:!1,title:""});y.useEffect(()=>{e&&g()},[e]),y.useEffect(()=>{s!=null&&s.leadId&&v(s.leadId)},[s]);const g=async()=>{try{a(!0);const x=await fl(e);if(!x){b("Deal not found","error"),t("/deals");return}r(x)}catch(x){console.error("Error fetching deal:",x),b("Error fetching deal details","error")}finally{a(!1)}},v=async x=>{try{f(!0);const N=await sd(x);c(N);const S=[];N.forEach(k=>{if(k.selectedMachines&&k.selectedMachines.length>0)k.selectedMachines.forEach(j=>{S.some(C=>C.id===j.id)||S.push(j)});else if(k.selectedEquipment&&k.selectedEquipment.id){const j={id:k.selectedEquipment.id,machineType:k.machineType,equipmentId:k.selectedEquipment.equipmentId,name:k.selectedEquipment.name,baseRates:k.selectedEquipment.baseRates,baseRate:k.selectedEquipment.baseRates[k.orderType],runningCostPerKm:k.runningCostPerKm,quantity:1};S.some(C=>C.id===j.id)||S.push(j)}}),d(S)}catch(N){console.error("Error fetching deal equipment:",N)}finally{f(!1)}},w=async x=>{if(s)try{const N=await l2(s.id,x);N&&(r(N),b(`Deal stage updated to ${x}`,"success"))}catch(N){console.error("Error updating deal stage:",N),b("Error updating deal stage","error")}},b=(x,N="success")=>{p({show:!0,title:x,variant:N}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Ye,{className:"h-8 w-8 animate-spin text-primary-600"})}):s?o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(V,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[o.jsx(qg,{size:16,className:"sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),o.jsx("div",{className:"sm:hidden",children:o.jsx(ee,{children:o.jsx(se,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-700 font-medium",children:"Value"}),o.jsx("div",{className:"text-lg font-bold text-primary-700",children:De(s.value)})]}),o.jsx(V,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})]})})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Deal Information"})}),o.jsxs(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:s.title}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),o.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:De(s.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),o.jsx("div",{className:"mt-1",children:o.jsx(Se,{value:s.stage,onChange:x=>w(x),options:OG,className:"w-full sm:w-[200px] text-sm"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.expectedCloseDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),o.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[s.probability,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:s.assignedTo})]})]})]})]}),o.jsxs(ee,{children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Notes"})}),o.jsx(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:o.jsx("p",{className:"text-sm text-gray-600",children:s.notes||"No notes available."})})]})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs(ee,{children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Customer Information"})}),o.jsxs(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ll,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm sm:text-base",children:s.customer.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:s.customer.designation})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($d,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600 break-words",children:s.customer.company})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(LA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.customer.email})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(WA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.phone})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Yg,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.address})]})]})]}),"          ",o.jsxs(ee,{className:"mb-4",children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsxs(me,{className:"flex items-center",children:[o.jsx(VA,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),o.jsx(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx(Ye,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?o.jsx("div",{className:"space-y-2",children:u.map(x=>o.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm",children:x.name}),o.jsx("p",{className:"text-xs text-gray-500",children:x.machineType})]}),o.jsx("div",{className:"text-sm text-right",children:o.jsxs("span",{className:"font-medium",children:["Qty: ",x.quantity]})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[o.jsxs("div",{children:["Base Rate: ",De(x.baseRate)]}),o.jsxs("div",{children:["Cost/Km: ",De(x.runningCostPerKm)]})]})]},x.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),o.jsxs(ee,{className:"hidden sm:block",children:[o.jsx(fe,{className:"p-4 sm:p-6",children:o.jsx(me,{children:"Actions"})}),o.jsx(se,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:o.jsx(V,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})})]})]})]}),m.show&&o.jsx(mt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const tm=e=>"text"in e&&"level"in e,nm=e=>"text"in e&&!("level"in e),lo=e=>"rows"in e,FG=e=>"items"in e,co=e=>"url"in e;function $G(){return[{key:"company_name",category:"Company"},{key:"company_address",category:"Company"},{key:"company_email",category:"Company"},{key:"company_phone",category:"Company"},{key:"customer_name",category:"Customer"},{key:"customer_email",category:"Customer"},{key:"customer_phone",category:"Customer"},{key:"quotation_number",category:"Quotation"},{key:"quotation_date",category:"Quotation"},{key:"quotation_valid_until",category:"Quotation"},{key:"quotation_total",category:"Quotation"}]}function N1(e){switch(e){case"header":return{text:"New Header",level:2,align:"left"};case"text":return{text:"New text block",align:"left"};case"table":return{rows:[{cells:[{content:"Header 1",header:!0},{content:"Header 2",header:!0}]},{cells:[{content:"Cell 1"},{content:"Cell 2"}]}],styles:{borders:!0,striped:!1}};case"list":return{items:["Item 1","Item 2"],type:"unordered"};case"image":return{url:"",alt:"",align:"center"};case"divider":return{text:""};default:return{text:"",align:"left"}}}function eD({template:e,onChange:t}){const[n,s]=y.useState(()=>{if(e.content)try{const N=new DOMParser().parseFromString(e.content,"text/html");return Array.from(N.body.children).map((S,k)=>{const j=S.tagName.toLowerCase()==="img"?"image":S.tagName.toLowerCase()==="h1"||S.tagName.toLowerCase()==="h2"||S.tagName.toLowerCase()==="h3"?"header":S.tagName.toLowerCase()==="table"?"table":S.tagName.toLowerCase()==="ul"||S.tagName.toLowerCase()==="ol"?"list":"text";return{id:`${j}-${k}`,type:j,content:N1(j)}})}catch(x){return console.error("Error parsing template content:",x),[]}return[]}),[r,i]=y.useState(null),a=y.useRef(null),[l,c]=y.useState(null),[u,d]=y.useState(null),h=y.useRef(null),[f,m]=y.useState(null);y.useEffect(()=>{const x=S=>{if(l&&r){const k=n.find(L=>L.id===r);if(!k||!co(k.content))return;let j=l.origWidth,C=l.origHeight,D=l.origX,A=l.origY;const F=S.clientX-l.startX,$=S.clientY-l.startY;switch(l.direction){case"se":j=Math.max(30,l.origWidth+F),C=Math.max(30,l.origHeight+$);break;case"sw":j=Math.max(30,l.origWidth-F),C=Math.max(30,l.origHeight+$),D=l.origX+F;break;case"ne":j=Math.max(30,l.origWidth+F),C=Math.max(30,l.origHeight-$),A=l.origY+$;break;case"nw":j=Math.max(30,l.origWidth-F),C=Math.max(30,l.origHeight-$),D=l.origX+F,A=l.origY+$;break}g(r,{...k.content,width:`${j}px`,height:`${C}px`,x:D,y:A})}else if(u&&r){const k=n.find(D=>D.id===r);if(!k||!co(k.content))return;const j=S.clientX-u.startX,C=S.clientY-u.startY;g(r,{...k.content,x:u.origX+j,y:u.origY+C})}},N=()=>{c(null),d(null)};return(l||u)&&(document.addEventListener("mousemove",x),document.addEventListener("mouseup",N)),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",N)}},[l,u,r,n]),y.useEffect(()=>{l||u?(document.body.style.cursor=l?"nwse-resize":"move",document.body.style.userSelect="none"):(document.body.style.cursor="",document.body.style.userSelect="")},[l,u]);const p=x=>{const N={id:`${x}-${Date.now()}`,type:x,content:N1(x)};s([...n,N]),i(N.id)},g=(x,N)=>{s(n.map(S=>S.id===x?{...S,content:N}:S))},v=async(x,N)=>{try{const S=new FileReader;S.onload=k=>{var D;const j=(D=k.target)==null?void 0:D.result,C=n.find(A=>A.id===N);C&&co(C.content)&&g(N,{...C.content,url:j})},S.readAsDataURL(x)}catch(S){console.error("Error uploading image:",S)}},w=x=>{switch(x.type){case"header":return tm(x.content)?o.jsxs("div",{style:{textAlign:x.content.align},children:[x.content.level===1&&o.jsx("h1",{className:"text-3xl font-bold",children:x.content.text}),x.content.level===2&&o.jsx("h2",{className:"text-2xl font-semibold",children:x.content.text}),x.content.level===3&&o.jsx("h3",{className:"text-xl font-medium",children:x.content.text})]}):null;case"table":return lo(x.content)?o.jsx("table",{className:"w-full border-collapse",children:o.jsx("tbody",{children:x.content.rows.map((N,S)=>o.jsx("tr",{children:N.cells.map((k,j)=>o.jsx("td",{className:`border p-2 ${k.header?"font-semibold bg-gray-50":""}`,children:k.content},j))},S))})}):null;case"text":{if(!nm(x.content))return null;const N=x.content.x??100,S=x.content.y??200,k=x.content.width?parseInt(x.content.width):250,j=x.content.height?parseInt(x.content.height):40,C=f===x.id;return o.jsxs("div",{className:`absolute group border-2 ${r===x.id?"border-blue-400":"border-transparent"} bg-white`,style:{left:N,top:S,width:k,height:j,zIndex:r===x.id?10:1,cursor:u?"move":"pointer",display:"flex",alignItems:"center",justifyContent:x.content.align||"left",pointerEvents:"auto"},onMouseDown:D=>{!C&&r===x.id&&d({startX:D.clientX,startY:D.clientY,origX:N,origY:S})},onClick:D=>{D.stopPropagation(),i(x.id)},onDoubleClick:()=>m(x.id),children:[C?o.jsx("input",{autoFocus:!0,className:"w-full h-full border-none outline-none bg-transparent text-base",value:x.content.text,onChange:D=>g(x.id,{...x.content,text:D.target.value}),onBlur:()=>m(null),onKeyDown:D=>{D.key==="Enter"&&m(null)},style:{pointerEvents:"auto"}}):o.jsx("span",{className:"w-full h-full px-2 text-base select-none",style:{textAlign:x.content.align||"left",whiteSpace:"pre-wrap",wordBreak:"break-word",pointerEvents:"none"},children:x.content.text||"Double-click to edit text"}),r===x.id&&o.jsx(o.Fragment,{children:["nw","ne","sw","se"].map(D=>o.jsx("div",{className:`absolute w-3 h-3 bg-blue-500 rounded-full cursor-nwse-resize ${D==="nw"?"left-0 top-0 -translate-x-1/2 -translate-y-1/2":D==="ne"?"right-0 top-0 translate-x-1/2 -translate-y-1/2":D==="sw"?"left-0 bottom-0 -translate-x-1/2 translate-y-1/2":"right-0 bottom-0 translate-x-1/2 translate-y-1/2"}`,onMouseDown:A=>{A.stopPropagation(),c({direction:D,startX:A.clientX,startY:A.clientY,origWidth:k,origHeight:j,origX:N,origY:S})}},D))})]})}case"image":{if(!co(x.content))return null;const N=x.content.x??100,S=x.content.y??100,k=x.content.width?parseInt(x.content.width):200,j=x.content.height?parseInt(x.content.height):120;return o.jsxs("div",{className:`absolute group border-2 ${r===x.id?"border-blue-400":"border-transparent"}`,style:{left:N,top:S,width:k,height:j,zIndex:r===x.id?10:1,cursor:u?"move":"pointer"},onMouseDown:C=>{r===x.id&&C.target===C.currentTarget&&d({startX:C.clientX,startY:C.clientY,origX:N,origY:S})},onClick:C=>{C.stopPropagation(),i(x.id)},children:[o.jsx("img",{ref:r===x.id?h:null,src:x.content.url,alt:x.content.alt,style:{width:"100%",height:"100%",objectFit:"contain",display:"block",pointerEvents:"none"},draggable:!1}),r===x.id&&o.jsx(o.Fragment,{children:["nw","ne","sw","se"].map(C=>o.jsx("div",{className:`absolute w-3 h-3 bg-blue-500 rounded-full cursor-nwse-resize ${C==="nw"?"left-0 top-0 -translate-x-1/2 -translate-y-1/2":C==="ne"?"right-0 top-0 translate-x-1/2 -translate-y-1/2":C==="sw"?"left-0 bottom-0 -translate-x-1/2 translate-y-1/2":"right-0 bottom-0 translate-x-1/2 translate-y-1/2"}`,onMouseDown:D=>{D.stopPropagation(),c({direction:C,startX:D.clientX,startY:D.clientY,origWidth:k,origHeight:j,origX:N,origY:S})}},C))})]})}default:return null}},b=x=>{if(!x)return null;switch(x.type){case"header":return tm(x.content)?o.jsxs("div",{className:"space-y-4",children:[o.jsx(_e,{label:"Text",value:x.content.text,onChange:N=>g(x.id,{...x.content,text:N.target.value})}),o.jsx(Se,{label:"Level",value:x.content.level.toString(),options:[{value:"1",label:"Heading 1 (Large)"},{value:"2",label:"Heading 2 (Medium)"},{value:"3",label:"Heading 3 (Small)"}],onChange:N=>g(x.id,{...x.content,level:parseInt(N,10)})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),o.jsx(V,{variant:x.content.align==="left"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"left"}),children:o.jsx(hc,{className:"h-4 w-4"})}),o.jsx(V,{variant:x.content.align==="center"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"center"}),children:o.jsx(qh,{className:"h-4 w-4"})}),o.jsx(V,{variant:x.content.align==="right"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"right"}),children:o.jsx(Gh,{className:"h-4 w-4"})})]})]}):null;case"text":return nm(x.content)?o.jsxs("div",{className:"space-y-4",children:[o.jsx(Mn,{label:"Text",value:x.content.text,onChange:N=>g(x.id,{...x.content,text:N.target.value})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),o.jsx(V,{variant:x.content.align==="left"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"left"}),children:o.jsx(hc,{className:"h-4 w-4"})}),o.jsx(V,{variant:x.content.align==="center"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"center"}),children:o.jsx(qh,{className:"h-4 w-4"})}),o.jsx(V,{variant:x.content.align==="right"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"right"}),children:o.jsx(Gh,{className:"h-4 w-4"})})]})]}):null;case"table":return lo(x.content)?o.jsxs("div",{className:"space-y-4",children:[x.content.rows.map((N,S)=>o.jsxs("div",{className:"flex gap-2",children:[N.cells.map((k,j)=>o.jsx(_e,{value:k.content,onChange:C=>{if(!lo(x.content))return;const D=[...x.content.rows];D[S].cells[j].content=C.target.value,g(x.id,{...x.content,rows:D})}},j)),o.jsx(V,{variant:"outline",onClick:()=>{if(!lo(x.content))return;const k=[...x.content.rows];k[S].cells.push({content:""}),g(x.id,{...x.content,rows:k})},children:o.jsx(ls,{className:"h-4 w-4"})})]},S)),o.jsx(V,{variant:"outline",onClick:()=>{if(!lo(x.content))return;const N=[...x.content.rows];N.push({cells:[{content:""}]}),g(x.id,{...x.content,rows:N})},children:"Add Row"})]}):null;case"list":return FG(x.content)?o.jsx("div",{className:"space-y-4"}):null;case"image":return co(x.content)?o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:a,onChange:N=>{var k;const S=(k=N.target.files)==null?void 0:k[0];S&&v(S,x.id)}}),o.jsxs(V,{variant:"outline",onClick:()=>{var N;return(N=a.current)==null?void 0:N.click()},className:"w-full",children:[o.jsx(hS,{className:"w-4 h-4 mr-2"}),"Upload Image"]}),o.jsx(_e,{label:"Image URL",value:x.content.url,onChange:N=>g(x.id,{...x.content,url:N.target.value}),placeholder:"Enter image URL or upload an image"}),o.jsx(_e,{label:"Alt Text",value:x.content.alt,onChange:N=>g(x.id,{...x.content,alt:N.target.value}),placeholder:"Enter image description"}),o.jsx(_e,{label:"Width",value:x.content.width||"",onChange:N=>g(x.id,{...x.content,width:N.target.value}),placeholder:"e.g., 100%, 300px"}),o.jsx(_e,{label:"Height",value:x.content.height||"",onChange:N=>g(x.id,{...x.content,height:N.target.value}),placeholder:"e.g., 100%, 300px"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium",children:"Alignment:"}),o.jsx(V,{variant:x.content.align==="left"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"left"}),children:o.jsx(hc,{className:"h-4 w-4"})}),o.jsx(V,{variant:x.content.align==="center"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"center"}),children:o.jsx(qh,{className:"h-4 w-4"})}),o.jsx(V,{variant:x.content.align==="right"?"default":"outline",size:"sm",onClick:()=>g(x.id,{...x.content,align:"right"}),children:o.jsx(Gh,{className:"h-4 w-4"})})]})]}):null;default:return null}};return o.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[o.jsxs("div",{className:"col-span-5 space-y-4",children:[o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Add Elements"})}),o.jsx(se,{children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>p("header"),className:"flex items-center gap-2",children:[o.jsx(QA,{className:"h-4 w-4"}),"Header"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>p("text"),className:"flex items-center gap-2",children:[o.jsx(hc,{className:"h-4 w-4"}),"Text"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>p("table"),className:"flex items-center gap-2",children:[o.jsx(GA,{className:"h-4 w-4"}),"Table"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>p("list"),className:"flex items-center gap-2",children:[o.jsx(IA,{className:"h-4 w-4"}),"List"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:()=>p("image"),className:"flex items-center gap-2",children:[o.jsx(lS,{className:"h-4 w-4"}),"Image"]})]})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Properties"})}),o.jsx(se,{children:r?b(n.find(x=>x.id===r)):o.jsx("p",{className:"text-gray-500 text-sm",children:"Select an element to edit its properties"})})]}),o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Available Placeholders"})}),o.jsx(se,{children:o.jsx("div",{className:"grid grid-cols-2 gap-2",children:$G().map(x=>o.jsx("div",{className:"text-xs bg-gray-50 p-2 rounded cursor-pointer hover:bg-gray-100",onClick:()=>{if(r){const N=n.find(S=>S.id===r);N&&(tm(N.content)||nm(N.content))&&g(N.id,{...N.content,text:`{{${x.key}}}`})}},children:`{{${x.key}}}`},x.key))})})]})]}),o.jsx("div",{className:"col-span-7",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Preview"})}),o.jsx(se,{children:o.jsx("div",{className:"min-h-[600px] p-6 border rounded-lg relative",style:{position:"relative"},children:n.map((x,N)=>w(x))})})]})})]})}const BG={company_name:"ASP Cranes",company_address:"123 Industrial Park, Mumbai, India",company_phone:"+91 98765 43210",company_email:"info@aspcranes.com",company_gst:"GST123456789",customer_name:"John Smith",customer_designation:"Project Manager",customer_company:"ABC Construction Ltd.",customer_address:"456 Construction Site, Delhi, India",customer_phone:"+91 98765 12345",customer_email:"john@abcconstruction.com",quotation_number:"QT-2024-001",valid_until:"2024-04-30",quotation_date:"2024-03-31",order_type:"Rental",equipment_name:"Mobile Crane - 50T",project_duration:"30 days",working_hours:"8 hours per day",shift_type:"Single Shift",base_rate:"₹25,000 per day",subtotal:"₹750,000",gst_amount:"₹135,000",total_amount:"₹885,000",payment_terms:"50% advance, 50% within 30 days",validity_period:"30 days"};function zG({isOpen:e,onClose:t,template:n}){if(!e)return null;if(!n||!n.content)return o.jsx(dt,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-500",children:[o.jsx(Ye,{className:"w-8 h-8 animate-spin mb-4"}),o.jsx("p",{children:"Loading template..."})]})});try{const s=Object.entries(BG).reduce((r,[i,a])=>{const l=new RegExp(`{{${i}}}`,"g");return r.replace(l,a)},n.content);return o.jsx(dt,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:o.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:s}})})}catch(s){return console.error("Error rendering template preview:",s),o.jsx(dt,{isOpen:e,onClose:t,title:"Template Preview",size:"lg",children:o.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-red-500",children:[o.jsx("p",{children:"Error rendering template preview"}),o.jsx("p",{className:"text-sm mt-2",children:"Please check the template content for any issues."})]})})}}function VG({template:e,onEdit:t,onDelete:n,onPreview:s,onSetDefault:r}){return o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden h-full flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex items-center",children:[o.jsx(fn,{className:"h-5 w-5 text-gray-700 mr-3"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 flex-1",children:e.name})]}),o.jsxs("div",{className:"p-4 flex-1",children:[e.description&&o.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-3",children:e.description}),e.isDefault&&o.jsx("span",{className:"inline-block bg-blue-50 text-blue-700 text-xs font-medium px-2.5 py-0.5 rounded-md",children:"Default Template"})]}),o.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex flex-wrap gap-2",children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:t,className:"flex items-center",children:[o.jsx(vi,{className:"h-4 w-4 mr-1.5"}),"Edit"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:s,className:"flex items-center",children:[o.jsx(oS,{className:"h-4 w-4 mr-1.5"}),"Preview"]}),!e.isDefault&&o.jsxs(o.Fragment,{children:[o.jsxs(V,{variant:"outline",size:"sm",onClick:r,className:"flex items-center",children:[o.jsx(PA,{className:"h-4 w-4 mr-1.5"}),"Set Default"]}),o.jsxs(V,{variant:"outline",size:"sm",onClick:n,className:"flex items-center text-red-500 hover:text-red-700 hover:border-red-300",children:[o.jsx(Na,{className:"h-4 w-4 mr-1.5"}),"Delete"]})]})]})]})}function tD(){const[e,t]=y.useState(null);return{toast:e,showToast:r=>{t(r),r.duration!==0&&setTimeout(()=>{t(null)},r.duration||3e3)},hideToast:()=>{t(null)}}}const S1={content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
    <div style="text-align: center; margin-bottom: 15px;">
      <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
      <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
      <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
    </div>

    <table style="width: 100%; margin-bottom: 15px; font-size: 13px;">
      <tr>
        <td style="width: 50%; vertical-align: top;">
          <strong style="color: #42526E;">From:</strong><br>
          <strong>{{company_name}}</strong><br>
          {{company_address}}<br>
          Phone: {{company_phone}}<br>
          Email: {{company_email}}<br>
          GST: {{company_gst}}
        </td>
        <td style="width: 50%; vertical-align: top;">
          <strong style="color: #42526E;">To:</strong><br>
          <strong>{{customer_name}}</strong><br>
          {{customer_designation}}<br>
          {{customer_company}}<br>
          {{customer_address}}<br>
          Phone: {{customer_phone}}<br>
          Email: {{customer_email}}
        </td>
      </tr>
    </table>

    <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 13px;">
      <tr>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Quotation ID:</strong> {{quotation_number}}</td>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Valid Until:</strong> {{valid_until}}</td>
      </tr>
      <tr>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Date:</strong> {{quotation_date}}</td>
        <td style="padding: 6px 10px; border: 1px solid #DFE1E6;"><strong>Order Type:</strong> {{order_type}}</td>
      </tr>
    </table>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Equipment & Project Details</strong>
      <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA; width: 160px;"><strong>Equipment</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{equipment_name}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Duration</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{project_duration}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Working Hours</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{working_hours}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Shift Type</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{shift_type}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;"><strong>Base Rate</strong></td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">{{base_rate}}</td>
        </tr>
      </table>
    </div>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Pricing Summary</strong>
      <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6;">Subtotal</td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; text-align: right; width: 160px;">{{subtotal}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA;">GST (18%)</td>
          <td style="padding: 6px 10px; border: 1px solid #DFE1E6; background: #F8F9FA; text-align: right;">{{gst_amount}}</td>
        </tr>
        <tr>
          <td style="padding: 6px 10px; border: 1px solid #0052CC; background: #0052CC; color: white; font-weight: 600;">Total Amount</td>
          <td style="padding: 6px 10px; border: 1px solid #0052CC; background: #0052CC; color: white; text-align: right; font-weight: 600;">{{total_amount}}</td>
        </tr>
      </table>
    </div>

    <div style="margin-bottom: 15px;">
      <strong style="color: #172B4D; font-size: 13px; display: block; margin-bottom: 8px;">Terms & Conditions</strong>
      <ol style="margin: 0; padding-left: 20px; font-size: 13px; color: #42526E;">
        <li style="margin-bottom: 2px;">Payment Terms: {{payment_terms}}</li>
        <li style="margin-bottom: 2px;">GST @18% will be charged extra as applicable</li>
        <li style="margin-bottom: 2px;">Mobilization charges will be billed extra based on distance</li>
        <li style="margin-bottom: 2px;">Working hours: Standard 8-hour shift. Additional hours will be charged extra</li>
        <li style="margin-bottom: 2px;">Operator & fuel will be provided by ASP Cranes</li>
        <li style="margin-bottom: 2px;">Client to provide necessary permissions & clearances</li>
        <li style="margin-bottom: 2px;">Rate validity: {{validity_period}}</li>
        <li style="margin-bottom: 2px;">Insurance coverage as per standard terms</li>
      </ol>
    </div>

    <div style="text-align: center; margin-top: 20px; color: #42526E; font-size: 13px;">
      <p style="margin: 0 0 2px 0;"><strong>Thank you for your business!</strong></p>
      <p style="margin: 0;">For any queries, please contact us at {{company_phone}} or email at {{company_email}}</p>
    </div>
  </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};function UG(){const{user:e,isAuthenticated:t}=qe(),n=en(),{showToast:s}=tD(),[r,i]=y.useState([]),[a,l]=y.useState(!1),[c,u]=y.useState(!1),[d,h]=y.useState("new"),[f,m]=y.useState(!0),[p,g]=y.useState(null),[v,w]=y.useState({show:!1,title:""}),[b,x]=y.useState(!1),[N,S]=y.useState(!1),[k,j]=y.useState({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1}),[C,D]=y.useState(null);y.useEffect(()=>{if(!t||!e){n("/login");return}if(e.role!=="admin"&&e.role!=="sales_agent"){n("/dashboard");return}A()},[t,e,n]);const A=async()=>{try{m(!0),g(null);const T=await bx();i(T)}catch(T){console.error("Error loading templates:",T),g("Failed to load templates"),s({title:"Error",message:"Failed to load templates",type:"error"})}finally{m(!1)}},F=()=>{n("/templates/new")},$=T=>{n(`/templates/edit/${T.id}`)},L=T=>{D(T),u(!0)},P=async T=>{try{await OC(T),s({title:"Success",message:"Template deleted successfully",type:"success"}),A()}catch(_){console.error("Error deleting template:",_),s({title:"Error",message:"Failed to delete template",type:"error"})}},B=async T=>{T.preventDefault(),m(!0);try{if(k.id)await ri(k.id,{...k,updatedAt:new Date().toISOString()}),w({show:!0,title:"Template updated successfully",variant:"success"});else{const _=new Date().toISOString(),U={...k,id:`template-${Date.now()}`,createdAt:_,updatedAt:_};await vx(U),w({show:!0,title:"Template created successfully",variant:"success"})}W(),A()}catch(_){console.error("Error saving template:",_),w({show:!0,title:"Failed to save template",variant:"error"})}finally{m(!1)}},W=()=>{x(!1),l(!1),j({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1}),S(!1)},O=async T=>{try{const _=r.find(U=>U.id===T);_&&(await Promise.all(r.filter(U=>U.isDefault).map(U=>ri(U.id,{...U,isDefault:!1}))),await ri(T,{..._,isDefault:!0}),s({title:"Success",message:"Default template updated successfully",type:"success"}),A())}catch(_){console.error("Error setting default template:",_),s({title:"Error",message:"Failed to set default template",type:"error"})}};return f?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(Ye,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx("div",{className:"text-red-500",children:p}),o.jsx(V,{onClick:A,children:"Retry"})]}):!t||!e||e.role!=="admin"&&e.role!=="sales_agent"?null:r.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx("div",{className:"text-gray-500",children:"No templates found"}),o.jsx(V,{onClick:F,children:"Create Template"})]}):o.jsxs("div",{className:"container px-4 sm:px-6 py-6 sm:py-8 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Templates"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage quotation templates for your business"})]}),o.jsxs(V,{onClick:()=>{x(!0),h("new"),j({id:"",name:"",description:"",content:S1.content,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1})},className:"w-full sm:w-auto flex items-center gap-2",children:[o.jsx(ls,{className:"w-4 h-4"}),"Create Template"]})]}),f?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(Ye,{className:"w-10 h-10 text-primary-500 animate-spin"})}):p?o.jsx(ee,{children:o.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(fn,{className:"w-12 h-12 text-red-500 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load templates"}),o.jsx("p",{className:"text-gray-500 mb-4 text-center",children:"There was an error loading your templates."}),o.jsx(V,{onClick:A,children:"Try Again"})]})}):r.length===0?o.jsx(ee,{children:o.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[o.jsx(fn,{className:"w-12 h-12 text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),o.jsx("p",{className:"text-gray-500 mb-4 text-center",children:"Create your first quotation template to get started."}),o.jsxs(V,{onClick:()=>{x(!0),h("new"),j({id:"",name:"",description:"",content:S1.content,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(e==null?void 0:e.email)||"unknown",isDefault:!1})},children:[o.jsx(ls,{className:"w-4 h-4 mr-2"}),"Create Template"]})]})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(T=>o.jsx(VG,{template:T,onEdit:()=>$(T),onDelete:()=>P(T.id),onPreview:()=>L(T),onSetDefault:()=>O(T.id)},T.id))}),o.jsx(dt,{isOpen:b||a,onClose:W,title:a?"Edit Template":"Create Template",size:"full",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(_e,{label:"Template Name",value:k.name,onChange:T=>j({...k,name:T.target.value})}),o.jsxs("div",{className:"flex gap-2 sm:gap-4 mb-4",children:[o.jsx(V,{variant:N?"default":"outline",onClick:()=>S(!0),size:"sm",className:"flex-1 sm:flex-none",children:"Visual Editor"}),o.jsx(V,{variant:N?"outline":"default",onClick:()=>S(!1),size:"sm",className:"flex-1 sm:flex-none",children:"HTML Editor"})]}),N?o.jsx(eD,{template:k,onChange:T=>j(T)}):o.jsxs("div",{className:"space-y-4",children:[o.jsx(Mn,{label:"HTML Content",value:k.content,onChange:T=>j({...k,content:T.target.value}),rows:20}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:["Use double curly braces for placeholders, e.g. ","{{customer_name}}"]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-4 mt-6",children:[o.jsx(V,{variant:"outline",onClick:W,className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(V,{onClick:B,disabled:f,className:"w-full sm:w-auto",children:f?"Saving...":"Save Template"})]})]})}),o.jsx(zG,{isOpen:c,onClose:()=>u(!1),template:C}),v.show&&o.jsx(mt,{title:v.title,variant:v.variant,isVisible:v.show,onClose:()=>w({show:!1,title:""})})]})}function WG(){const e=en(),{id:t}=Hg(),{showToast:n}=tD(),[s,r]=y.useState(!1),[i,a]=y.useState({id:"",name:"",description:"",content:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"",isDefault:!1});y.useEffect(()=>{t&&l(t)},[t]);const l=async u=>{try{const d=await IC(u);d&&a(d)}catch(d){console.error("Error loading template:",d),n({title:"Error",message:"Failed to load template",type:"error"}),e("/templates")}},c=async()=>{r(!0);try{if(i.id)await ri(i.id,{...i,updatedAt:new Date().toISOString()}),n({title:"Success",message:"Template updated successfully",type:"success"});else{const u={...i,id:`template-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await vx(u),n({title:"Success",message:"Template created successfully",type:"success"})}e("/templates")}catch(u){console.error("Error saving template:",u),n({title:"Error",message:"Failed to save template",type:"error"})}finally{r(!1)}};return o.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(V,{variant:"ghost",onClick:()=>e("/templates"),children:[o.jsx(qg,{className:"h-4 w-4 mr-2"}),"Back to Templates"]}),o.jsx("h1",{className:"text-2xl font-bold",children:t?"Edit Template":"Create Template"})]}),o.jsxs(V,{onClick:c,disabled:s,children:[o.jsx(bi,{className:"h-4 w-4 mr-2"}),s?"Saving...":"Save Template"]})]}),o.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[o.jsx("div",{className:"col-span-12",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Details"})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(_e,{label:"Template Name",value:i.name,onChange:u=>a({...i,name:u.target.value}),placeholder:"Enter template name"}),o.jsx(_e,{label:"Description",value:i.description||"",onChange:u=>a({...i,description:u.target.value}),placeholder:"Enter template description"})]})})]})}),o.jsx("div",{className:"col-span-12",children:o.jsxs(ee,{children:[o.jsx(fe,{children:o.jsx(me,{children:"Template Editor"})}),o.jsx(se,{children:o.jsx(eD,{template:i,onChange:u=>a(u)})})]})})]})]})}const HG=({children:e})=>{const{isAuthenticated:t,user:n,setUser:s}=qe();return y.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await nS();i&&s(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,s]),o.jsx(o.Fragment,{children:e})};function Nt({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:s,isAuthenticated:r,setUser:i}=qe(),[a,l]=y.useState(!0);return y.useEffect(()=>{(async()=>{try{const u=await nS();u?(!s||s.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[s,i]),a?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(`🔒 Protected Route Check - Authenticated: ${r}, User: ${(s==null?void 0:s.name)||"none"}`),!r||!s?(console.log(`❌ Route protection failed - redirecting to ${t}`),o.jsx(zn,{to:t,replace:!0})):n&&!n.includes(s.role)?(console.log(`❌ Role protection failed - user has ${s.role} but needs one of [${n.join(",")}]`),o.jsx(zn,{to:"/dashboard",replace:!0})):(console.log("✅ Route protection passed - rendering protected content"),e?o.jsx(o.Fragment,{children:e}):o.jsx(YN,{})))}function qG(){const{user:e,isAuthenticated:t}=qe();if(console.log("🎯 DashboardRouter called"),console.log("🔍 Authentication state:",{isAuthenticated:t}),console.log("👤 User object:",JSON.stringify(e,null,2)),console.log("🏷️ User role:",e==null?void 0:e.role),!t||!e)return console.log("❌ DashboardRouter: Not authenticated, redirecting to login"),o.jsx(zn,{to:"/login",replace:!0});if(!e.role)return console.error("❌ DashboardRouter: User authenticated but role is undefined!"),console.error("📊 Full user object:",e),console.log("🔄 Fallback: Showing AdminDashboard due to missing role"),o.jsx(Nf,{});switch(console.log("✅ DashboardRouter: User role is",e.role),e.role){case"admin":return console.log("📊 Rendering AdminDashboard"),o.jsx(Nf,{});case"sales_agent":return console.log("📊 Rendering SalesAgentDashboard"),o.jsx(nz,{});case"operations_manager":return console.log("📊 Rendering OperationsManagerDashboard"),o.jsx(az,{});case"operator":return console.log("📊 Rendering OperatorDashboard"),o.jsx(lz,{});default:return console.log("❌ Unknown user role:",e.role,"showing AdminDashboard as fallback"),o.jsx(Nf,{})}}function GG(){const e=window.location.pathname==="/"||window.location.pathname==="";if(console.log("🔍 AppContent - Current pathname:",window.location.pathname),console.log("🔍 AppContent - Is root URL:",e),e)return console.log("📍 Redirecting from root to /login"),o.jsx(zn,{to:"/login",replace:!0});const t=o.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),o.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return o.jsx(y.Suspense,{fallback:t,children:o.jsxs(C_,{children:[o.jsx(Ue,{path:"/blank-check.html",element:o.jsx(zn,{to:"/blank-check.html",replace:!0})}),o.jsx(Ue,{path:"/api-test.html",element:o.jsx(zn,{to:"/api-test.html",replace:!0})}),o.jsx(Ue,{path:"/login",element:o.jsx(sM,{})}),o.jsx(Ue,{element:o.jsx(Nt,{}),children:o.jsxs(Ue,{path:"/",element:o.jsx(rL,{}),children:[o.jsx(Ue,{index:!0,element:o.jsx(zn,{to:"/dashboard",replace:!0})}),o.jsx(Ue,{path:"dashboard",element:o.jsx(qG,{})}),o.jsx(Ue,{path:"admin/users",element:o.jsx(Nt,{allowedRoles:["admin"],children:o.jsx(KU,{})})}),o.jsx(Ue,{path:"admin/config",element:o.jsx(Nt,{allowedRoles:["admin"],children:o.jsx(dW,{})})}),o.jsx(Ue,{path:"admin/equipment",element:o.jsx(Nt,{allowedRoles:["admin","operations_manager"],children:o.jsx(UU,{})})}),o.jsx(Ue,{path:"admin/services",element:o.jsx(Nt,{allowedRoles:["admin","operations_manager"],children:o.jsx(HU,{})})}),o.jsx(Ue,{path:"admin/quotation-templates",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent"],children:o.jsx(UG,{})})}),o.jsx(Ue,{path:"admin/quotation-templates/edit/:id",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent"],children:o.jsx(WG,{})})}),o.jsx(Ue,{path:"leads",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(s8,{})})}),o.jsx(Ue,{path:"customers",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(hW,{})})}),o.jsx(Ue,{path:"deals",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(IG,{})})}),o.jsx(Ue,{path:"deals/:id",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(LG,{})})}),o.jsx(Ue,{path:"quotations",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(c8,{})})}),o.jsx(Ue,{path:"quotations/create",element:o.jsx(Nt,{allowedRoles:["admin","sales_agent"],children:o.jsx(y8,{})})}),o.jsx(Ue,{path:"jobs",element:o.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(PU,{})})}),o.jsx(Ue,{path:"job-test",element:o.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(MU,{})})}),o.jsx(Ue,{path:"site-assessments",element:o.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(IU,{})})}),o.jsx(Ue,{path:"job-summary",element:o.jsx(Nt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(LU,{})})}),o.jsx(Ue,{path:"*",element:o.jsx(zn,{to:"/dashboard",replace:!0})})]})})]})})}function YG(){return o.jsx(M_,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(HG,{children:o.jsx($_,{children:o.jsx(GG,{})})})})}console.log("🚀 Starting ASP Cranes CRM...");console.log("🔍 Current URL:",window.location.href);console.log("💾 localStorage contents:",{"jwt-token":localStorage.getItem("jwt-token")?"Present":"Missing","explicit-login-performed":localStorage.getItem("explicit-login-performed"),"auth-storage":localStorage.getItem("auth-storage")?"Present":"Missing"});console.log("🔄 Auth store hydration temporarily disabled for debugging");document.body.classList.contains("dark")||document.body.classList.add("dark");const sm=document.getElementById("root");if(!sm)console.error("❌ Failed to find root element"),document.body.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">Error: Root element not found</div>';else{console.log("✅ Root element found, creating React app...");try{LN(sm).render(o.jsx(y.StrictMode,{children:o.jsx(y.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading ASP Cranes CRM..."})]})}),children:o.jsx(YG,{})})})),console.log("🎉 React application rendered successfully")}catch(e){console.error("❌ React render error:",e),sm.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">React render error: '+e+"</div>"}}
