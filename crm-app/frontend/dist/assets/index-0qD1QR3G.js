var cD=Object.defineProperty;var uD=(e,t,n)=>t in e?cD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var de=(e,t,n)=>uD(e,typeof t!="symbol"?t+"":t,n);function dD(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var D1={exports:{}},Sd={},T1={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),hD=Symbol.for("react.portal"),fD=Symbol.for("react.fragment"),mD=Symbol.for("react.strict_mode"),pD=Symbol.for("react.profiler"),gD=Symbol.for("react.provider"),xD=Symbol.for("react.context"),yD=Symbol.for("react.forward_ref"),vD=Symbol.for("react.suspense"),bD=Symbol.for("react.memo"),wD=Symbol.for("react.lazy"),py=Symbol.iterator;function jD(e){return e===null||typeof e!="object"?null:(e=py&&e[py]||e["@@iterator"],typeof e=="function"?e:null)}var P1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_1=Object.assign,A1={};function Ca(e,t,n){this.props=e,this.context=t,this.refs=A1,this.updater=n||P1}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ca.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function M1(){}M1.prototype=Ca.prototype;function Hp(e,t,n){this.props=e,this.context=t,this.refs=A1,this.updater=n||P1}var qp=Hp.prototype=new M1;qp.constructor=Hp;_1(qp,Ca.prototype);qp.isPureReactComponent=!0;var gy=Array.isArray,R1=Object.prototype.hasOwnProperty,Gp={current:null},I1={key:!0,ref:!0,__self:!0,__source:!0};function O1(e,t,n){var s,r={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)R1.call(t,s)&&!I1.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Al,type:e,key:i,ref:a,props:r,_owner:Gp.current}}function ND(e,t){return{$$typeof:Al,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Al}function SD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xy=/\/+/g;function bh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SD(""+e.key):t.toString(36)}function Hc(e,t,n,s,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Al:case hD:a=!0}}if(a)return a=e,r=r(a),e=s===""?"."+bh(a,0):s,gy(r)?(n="",e!=null&&(n=e.replace(xy,"$&/")+"/"),Hc(r,t,n,"",function(u){return u})):r!=null&&(Yp(r)&&(r=ND(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(xy,"$&/")+"/")+e)),t.push(r)),1;if(a=0,s=s===""?".":s+":",gy(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+bh(i,l);a+=Hc(i,t,n,c,r)}else if(c=jD(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+bh(i,l++),a+=Hc(i,t,n,c,r);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Zl(e,t,n){if(e==null)return e;var s=[],r=0;return Hc(e,s,"","",function(i){return t.call(n,i,r++)}),s}function CD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},qc={transition:null},kD={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:qc,ReactCurrentOwner:Gp};function L1(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Zl,forEach:function(e,t,n){Zl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Zl(e,function(){t++}),t},toArray:function(e){return Zl(e,function(t){return t})||[]},only:function(e){if(!Yp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=Ca;Ce.Fragment=fD;Ce.Profiler=pD;Ce.PureComponent=Hp;Ce.StrictMode=mD;Ce.Suspense=vD;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kD;Ce.act=L1;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=_1({},e.props),r=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Gp.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)R1.call(t,c)&&!I1.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Al,type:e.type,key:r,ref:i,props:s,_owner:a}};Ce.createContext=function(e){return e={$$typeof:xD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gD,_context:e},e.Consumer=e};Ce.createElement=O1;Ce.createFactory=function(e){var t=O1.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:yD,render:e}};Ce.isValidElement=Yp;Ce.lazy=function(e){return{$$typeof:wD,_payload:{_status:-1,_result:e},_init:CD}};Ce.memo=function(e,t){return{$$typeof:bD,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=qc.transition;qc.transition={};try{e()}finally{qc.transition=t}};Ce.unstable_act=L1;Ce.useCallback=function(e,t){return qt.current.useCallback(e,t)};Ce.useContext=function(e){return qt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return qt.current.useEffect(e,t)};Ce.useId=function(){return qt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return qt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return qt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return qt.current.useReducer(e,t,n)};Ce.useRef=function(e){return qt.current.useRef(e)};Ce.useState=function(e){return qt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return qt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return qt.current.useTransition()};Ce.version="18.3.1";T1.exports=Ce;var x=T1.exports;const se=Wp(x),Qp=dD({__proto__:null,default:se},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ED=x,DD=Symbol.for("react.element"),TD=Symbol.for("react.fragment"),PD=Object.prototype.hasOwnProperty,_D=ED.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AD={key:!0,ref:!0,__self:!0,__source:!0};function F1(e,t,n){var s,r={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)PD.call(t,s)&&!AD.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)r[s]===void 0&&(r[s]=t[s]);return{$$typeof:DD,type:e,key:i,ref:a,props:r,_owner:_D.current}}Sd.Fragment=TD;Sd.jsx=F1;Sd.jsxs=F1;D1.exports=Sd;var o=D1.exports,$1={exports:{}},xn={},B1={exports:{}},z1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,M){var U=T.length;T.push(M);e:for(;0<U;){var H=U-1>>>1,Z=T[H];if(0<r(Z,M))T[H]=M,T[U]=Z,U=H;else break e}}function n(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var M=T[0],U=T.pop();if(U!==M){T[0]=U;e:for(var H=0,Z=T.length,oe=Z>>>1;H<oe;){var ue=2*(H+1)-1,ve=T[ue],Ne=ue+1,A=T[Ne];if(0>r(ve,U))Ne<Z&&0>r(A,ve)?(T[H]=A,T[Ne]=U,H=Ne):(T[H]=ve,T[ue]=U,H=ue);else if(Ne<Z&&0>r(A,U))T[H]=A,T[Ne]=U,H=Ne;else break e}}return M}function r(T,M){var U=T.sortIndex-M.sortIndex;return U!==0?U:T.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var M=n(u);M!==null;){if(M.callback===null)s(u);else if(M.startTime<=T)s(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(u)}}function S(T){if(g=!1,w(T),!p)if(n(c)!==null)p=!0,V(N);else{var M=n(u);M!==null&&R(S,M.startTime-T)}}function N(T,M){p=!1,g&&(g=!1,b(C),C=-1),m=!0;var U=f;try{for(w(M),h=n(c);h!==null&&(!(h.expirationTime>M)||T&&!O());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var Z=H(h.expirationTime<=M);M=e.unstable_now(),typeof Z=="function"?h.callback=Z:h===n(c)&&s(c),w(M)}else s(c);h=n(c)}if(h!==null)var oe=!0;else{var ue=n(u);ue!==null&&R(S,ue.startTime-M),oe=!1}return oe}finally{h=null,f=U,m=!1}}var k=!1,j=null,C=-1,D=5,E=-1;function O(){return!(e.unstable_now()-E<D)}function F(){if(j!==null){var T=e.unstable_now();E=T;var M=!0;try{M=j(!0,T)}finally{M?L():(k=!1,j=null)}}else k=!1}var L;if(typeof v=="function")L=function(){v(F)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,B=P.port2;P.port1.onmessage=F,L=function(){B.postMessage(null)}}else L=function(){y(F,0)};function V(T){j=T,k||(k=!0,L())}function R(T,M){C=y(function(){T(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,V(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var U=f;f=M;try{return T()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,M){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=f;f=T;try{return M()}finally{f=U}},e.unstable_scheduleCallback=function(T,M,U){var H=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?H+U:H):U=H,T){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=U+Z,T={id:d++,callback:M,priorityLevel:T,startTime:U,expirationTime:Z,sortIndex:-1},U>H?(T.sortIndex=U,t(u,T),n(c)===null&&T===n(u)&&(g?(b(C),C=-1):g=!0,R(S,U-H))):(T.sortIndex=Z,t(c,T),p||m||(p=!0,V(N))),T},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(T){var M=f;return function(){var U=f;f=M;try{return T.apply(this,arguments)}finally{f=U}}}})(z1);B1.exports=z1;var MD=B1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RD=x,pn=MD;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V1=new Set,Go={};function bi(e,t){aa(e,t),aa(e+"Capture",t)}function aa(e,t){for(Go[e]=t,e=0;e<t.length;e++)V1.add(t[e])}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nm=Object.prototype.hasOwnProperty,ID=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},vy={};function OD(e){return nm.call(vy,e)?!0:nm.call(yy,e)?!1:ID.test(e)?vy[e]=!0:(yy[e]=!0,!1)}function LD(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function FD(e,t,n,s){if(t===null||typeof t>"u"||LD(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gt(e,t,n,s,r,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new Gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new Gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new Gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kt[e]=new Gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new Gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new Gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kt[e]=new Gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kt[e]=new Gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kt[e]=new Gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kp=/[\-:]([a-z])/g;function Xp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kp,Xp);kt[t]=new Gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kp,Xp);kt[t]=new Gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kp,Xp);kt[t]=new Gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kt[e]=new Gt(e,1,!1,e.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kt[e]=new Gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jp(e,t,n,s){var r=kt.hasOwnProperty(t)?kt[t]:null;(r!==null?r.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(FD(t,n,r,s)&&(n=null),s||r===null?OD(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,s=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var zs=RD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ec=Symbol.for("react.element"),Oi=Symbol.for("react.portal"),Li=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),W1=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),rm=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),Ks=Symbol.for("react.lazy"),H1=Symbol.for("react.offscreen"),by=Symbol.iterator;function Wa(e){return e===null||typeof e!="object"?null:(e=by&&e[by]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,wh;function xo(e){if(wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wh=t&&t[1]||""}return`
`+wh+e}var jh=!1;function Nh(e,t){if(!e||jh)return"";jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{jh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xo(e):""}function $D(e){switch(e.tag){case 5:return xo(e.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return e=Nh(e.type,!1),e;case 11:return e=Nh(e.type.render,!1),e;case 1:return e=Nh(e.type,!0),e;default:return""}}function am(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Li:return"Fragment";case Oi:return"Portal";case sm:return"Profiler";case Zp:return"StrictMode";case rm:return"Suspense";case im:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W1:return(e.displayName||"Context")+".Consumer";case U1:return(e._context.displayName||"Context")+".Provider";case eg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tg:return t=e.displayName||null,t!==null?t:am(e.type)||"Memo";case Ks:t=e._payload,e=e._init;try{return am(e(t))}catch{}}return null}function BD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(t);case 8:return t===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zD(e){var t=q1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tc(e){e._valueTracker||(e._valueTracker=zD(e))}function G1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=q1(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function pu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function om(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wy(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y1(e,t){t=t.checked,t!=null&&Jp(e,"checked",t,!1)}function lm(e,t){Y1(e,t);var n=Cr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cm(e,t.type,n):t.hasOwnProperty("defaultValue")&&cm(e,t.type,Cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cm(e,t,n){(t!=="number"||pu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yo=Array.isArray;function Ji(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Cr(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function um(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ny(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(yo(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cr(n)}}function Q1(e,t){var n=Cr(t.value),s=Cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Sy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function K1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?K1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nc,X1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nc=nc||document.createElement("div"),nc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VD=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(e){VD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Do[t]=Do[e]})});function J1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Do.hasOwnProperty(e)&&Do[e]?(""+t).trim():t+"px"}function Z1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=J1(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}var UD=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hm(e,t){if(t){if(UD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function fm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function ng(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pm=null,Zi=null,ea=null;function Cy(e){if(e=Il(e)){if(typeof pm!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Td(t),pm(e.stateNode,e.type,t))}}function ej(e){Zi?ea?ea.push(e):ea=[e]:Zi=e}function tj(){if(Zi){var e=Zi,t=ea;if(ea=Zi=null,Cy(e),t)for(e=0;e<t.length;e++)Cy(t[e])}}function nj(e,t){return e(t)}function sj(){}var Sh=!1;function rj(e,t,n){if(Sh)return e(t,n);Sh=!0;try{return nj(e,t,n)}finally{Sh=!1,(Zi!==null||ea!==null)&&(sj(),tj())}}function Qo(e,t){var n=e.stateNode;if(n===null)return null;var s=Td(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var gm=!1;if(Os)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){gm=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{gm=!1}function WD(e,t,n,s,r,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var To=!1,gu=null,xu=!1,xm=null,HD={onError:function(e){To=!0,gu=e}};function qD(e,t,n,s,r,i,a,l,c){To=!1,gu=null,WD.apply(HD,arguments)}function GD(e,t,n,s,r,i,a,l,c){if(qD.apply(this,arguments),To){if(To){var u=gu;To=!1,gu=null}else throw Error(K(198));xu||(xu=!0,xm=u)}}function wi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ij(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ky(e){if(wi(e)!==e)throw Error(K(188))}function YD(e){var t=e.alternate;if(!t){if(t=wi(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return ky(r),e;if(i===s)return ky(r),t;i=i.sibling}throw Error(K(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,s=i;break}if(l===s){a=!0,s=r,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,s=r;break}if(l===s){a=!0,s=i,n=r;break}l=l.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==s)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function aj(e){return e=YD(e),e!==null?oj(e):null}function oj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oj(e);if(t!==null)return t;e=e.sibling}return null}var lj=pn.unstable_scheduleCallback,Ey=pn.unstable_cancelCallback,QD=pn.unstable_shouldYield,KD=pn.unstable_requestPaint,st=pn.unstable_now,XD=pn.unstable_getCurrentPriorityLevel,sg=pn.unstable_ImmediatePriority,cj=pn.unstable_UserBlockingPriority,yu=pn.unstable_NormalPriority,JD=pn.unstable_LowPriority,uj=pn.unstable_IdlePriority,Cd=null,as=null;function ZD(e){if(as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(Cd,e,void 0,(e.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:nT,eT=Math.log,tT=Math.LN2;function nT(e){return e>>>=0,e===0?32:31-(eT(e)/tT|0)|0}var sc=64,rc=4194304;function vo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,r=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~r;l!==0?s=vo(l):(i&=a,i!==0&&(s=vo(i)))}else a=n&~r,a!==0?s=vo(a):i!==0&&(s=vo(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&r)&&(r=s&-s,i=t&-t,r>=i||r===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-qn(t),r=1<<n,s|=e[n],t&=~r;return s}function sT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rT(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-qn(i),l=1<<a,c=r[a];c===-1?(!(l&n)||l&s)&&(r[a]=sT(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ym(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dj(){var e=sc;return sc<<=1,!(sc&4194240)&&(sc=64),e}function Ch(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ml(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qn(t),e[t]=n}function iT(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-qn(n),i=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~i}}function rg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-qn(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var Oe=0;function hj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fj,ig,mj,pj,gj,vm=!1,ic=[],dr=null,hr=null,fr=null,Ko=new Map,Xo=new Map,Zs=[],aT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(e,t){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(t.pointerId)}}function qa(e,t,n,s,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Il(t),t!==null&&ig(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function oT(e,t,n,s,r){switch(t){case"focusin":return dr=qa(dr,e,t,n,s,r),!0;case"dragenter":return hr=qa(hr,e,t,n,s,r),!0;case"mouseover":return fr=qa(fr,e,t,n,s,r),!0;case"pointerover":var i=r.pointerId;return Ko.set(i,qa(Ko.get(i)||null,e,t,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Xo.set(i,qa(Xo.get(i)||null,e,t,n,s,r)),!0}return!1}function xj(e){var t=ei(e.target);if(t!==null){var n=wi(t);if(n!==null){if(t=n.tag,t===13){if(t=ij(n),t!==null){e.blockedOn=t,gj(e.priority,function(){mj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);mm=s,n.target.dispatchEvent(s),mm=null}else return t=Il(n),t!==null&&ig(t),e.blockedOn=n,!1;t.shift()}return!0}function Ty(e,t,n){Gc(e)&&n.delete(t)}function lT(){vm=!1,dr!==null&&Gc(dr)&&(dr=null),hr!==null&&Gc(hr)&&(hr=null),fr!==null&&Gc(fr)&&(fr=null),Ko.forEach(Ty),Xo.forEach(Ty)}function Ga(e,t){e.blockedOn===t&&(e.blockedOn=null,vm||(vm=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,lT)))}function Jo(e){function t(r){return Ga(r,e)}if(0<ic.length){Ga(ic[0],e);for(var n=1;n<ic.length;n++){var s=ic[n];s.blockedOn===e&&(s.blockedOn=null)}}for(dr!==null&&Ga(dr,e),hr!==null&&Ga(hr,e),fr!==null&&Ga(fr,e),Ko.forEach(t),Xo.forEach(t),n=0;n<Zs.length;n++)s=Zs[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Zs.length&&(n=Zs[0],n.blockedOn===null);)xj(n),n.blockedOn===null&&Zs.shift()}var ta=zs.ReactCurrentBatchConfig,bu=!0;function cT(e,t,n,s){var r=Oe,i=ta.transition;ta.transition=null;try{Oe=1,ag(e,t,n,s)}finally{Oe=r,ta.transition=i}}function uT(e,t,n,s){var r=Oe,i=ta.transition;ta.transition=null;try{Oe=4,ag(e,t,n,s)}finally{Oe=r,ta.transition=i}}function ag(e,t,n,s){if(bu){var r=bm(e,t,n,s);if(r===null)Ih(e,t,s,wu,n),Dy(e,s);else if(oT(r,e,t,n,s))s.stopPropagation();else if(Dy(e,s),t&4&&-1<aT.indexOf(e)){for(;r!==null;){var i=Il(r);if(i!==null&&fj(i),i=bm(e,t,n,s),i===null&&Ih(e,t,s,wu,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Ih(e,t,s,null,n)}}var wu=null;function bm(e,t,n,s){if(wu=null,e=ng(s),e=ei(e),e!==null)if(t=wi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ij(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wu=e,null}function yj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XD()){case sg:return 1;case cj:return 4;case yu:case JD:return 16;case uj:return 536870912;default:return 16}default:return 16}}var sr=null,og=null,Yc=null;function vj(){if(Yc)return Yc;var e,t=og,n=t.length,s,r="value"in sr?sr.value:sr.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(s=1;s<=a&&t[n-s]===r[i-s];s++);return Yc=r.slice(e,1<s?1-s:void 0)}function Qc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ac(){return!0}function Py(){return!1}function yn(e){function t(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ac:Py,this.isPropagationStopped=Py,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),t}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=yn(ka),Rl=et({},ka,{view:0,detail:0}),dT=yn(Rl),kh,Eh,Ya,kd=et({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ya&&(Ya&&e.type==="mousemove"?(kh=e.screenX-Ya.screenX,Eh=e.screenY-Ya.screenY):Eh=kh=0,Ya=e),kh)},movementY:function(e){return"movementY"in e?e.movementY:Eh}}),_y=yn(kd),hT=et({},kd,{dataTransfer:0}),fT=yn(hT),mT=et({},Rl,{relatedTarget:0}),Dh=yn(mT),pT=et({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),gT=yn(pT),xT=et({},ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yT=yn(xT),vT=et({},ka,{data:0}),Ay=yn(vT),bT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jT[e])?!!t[e]:!1}function cg(){return NT}var ST=et({},Rl,{key:function(e){if(e.key){var t=bT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(e){return e.type==="keypress"?Qc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CT=yn(ST),kT=et({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),My=yn(kT),ET=et({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),DT=yn(ET),TT=et({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),PT=yn(TT),_T=et({},kd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),AT=yn(_T),MT=[9,13,27,32],ug=Os&&"CompositionEvent"in window,Po=null;Os&&"documentMode"in document&&(Po=document.documentMode);var RT=Os&&"TextEvent"in window&&!Po,bj=Os&&(!ug||Po&&8<Po&&11>=Po),Ry=" ",Iy=!1;function wj(e,t){switch(e){case"keyup":return MT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fi=!1;function IT(e,t){switch(e){case"compositionend":return jj(t);case"keypress":return t.which!==32?null:(Iy=!0,Ry);case"textInput":return e=t.data,e===Ry&&Iy?null:e;default:return null}}function OT(e,t){if(Fi)return e==="compositionend"||!ug&&wj(e,t)?(e=vj(),Yc=og=sr=null,Fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bj&&t.locale!=="ko"?null:t.data;default:return null}}var LT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!LT[e.type]:t==="textarea"}function Nj(e,t,n,s){ej(s),t=ju(t,"onChange"),0<t.length&&(n=new lg("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var _o=null,Zo=null;function FT(e){Rj(e,0)}function Ed(e){var t=zi(e);if(G1(t))return e}function $T(e,t){if(e==="change")return t}var Sj=!1;if(Os){var Th;if(Os){var Ph="oninput"in document;if(!Ph){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),Ph=typeof Ly.oninput=="function"}Th=Ph}else Th=!1;Sj=Th&&(!document.documentMode||9<document.documentMode)}function Fy(){_o&&(_o.detachEvent("onpropertychange",Cj),Zo=_o=null)}function Cj(e){if(e.propertyName==="value"&&Ed(Zo)){var t=[];Nj(t,Zo,e,ng(e)),rj(FT,t)}}function BT(e,t,n){e==="focusin"?(Fy(),_o=t,Zo=n,_o.attachEvent("onpropertychange",Cj)):e==="focusout"&&Fy()}function zT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ed(Zo)}function VT(e,t){if(e==="click")return Ed(t)}function UT(e,t){if(e==="input"||e==="change")return Ed(t)}function WT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qn=typeof Object.is=="function"?Object.is:WT;function el(e,t){if(Qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!nm.call(t,r)||!Qn(e[r],t[r]))return!1}return!0}function $y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function By(e,t){var n=$y(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$y(n)}}function kj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ej(){for(var e=window,t=pu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pu(e.document)}return t}function dg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HT(e){var t=Ej(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kj(n.ownerDocument.documentElement,n)){if(s!==null&&dg(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!e.extend&&i>s&&(r=s,s=i,i=r),r=By(n,i);var a=By(n,s);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qT=Os&&"documentMode"in document&&11>=document.documentMode,$i=null,wm=null,Ao=null,jm=!1;function zy(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jm||$i==null||$i!==pu(s)||(s=$i,"selectionStart"in s&&dg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ao&&el(Ao,s)||(Ao=s,s=ju(wm,"onSelect"),0<s.length&&(t=new lg("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=$i)))}function oc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Bi={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},_h={},Dj={};Os&&(Dj=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Dd(e){if(_h[e])return _h[e];if(!Bi[e])return e;var t=Bi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dj)return _h[e]=t[n];return e}var Tj=Dd("animationend"),Pj=Dd("animationiteration"),_j=Dd("animationstart"),Aj=Dd("transitionend"),Mj=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Mj.set(e,t),bi(t,[e])}for(var Ah=0;Ah<Vy.length;Ah++){var Mh=Vy[Ah],GT=Mh.toLowerCase(),YT=Mh[0].toUpperCase()+Mh.slice(1);Ar(GT,"on"+YT)}Ar(Tj,"onAnimationEnd");Ar(Pj,"onAnimationIteration");Ar(_j,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Aj,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QT=new Set("cancel close invalid load scroll toggle".split(" ").concat(bo));function Uy(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,GD(s,t,void 0,e),e.currentTarget=null}function Rj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Uy(r,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Uy(r,l,u),i=c}}}if(xu)throw e=xm,xu=!1,xm=null,e}function ze(e,t){var n=t[Em];n===void 0&&(n=t[Em]=new Set);var s=e+"__bubble";n.has(s)||(Ij(t,e,2,!1),n.add(s))}function Rh(e,t,n){var s=0;t&&(s|=4),Ij(n,e,s,t)}var lc="_reactListening"+Math.random().toString(36).slice(2);function tl(e){if(!e[lc]){e[lc]=!0,V1.forEach(function(n){n!=="selectionchange"&&(QT.has(n)||Rh(n,!1,e),Rh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lc]||(t[lc]=!0,Rh("selectionchange",!1,t))}}function Ij(e,t,n,s){switch(yj(t)){case 1:var r=cT;break;case 4:r=uT;break;default:r=ag}n=r.bind(null,t,n,e),r=void 0,!gm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ih(e,t,n,s,r){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=ei(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}rj(function(){var u=i,d=ng(n),h=[];e:{var f=Mj.get(e);if(f!==void 0){var m=lg,p=e;switch(e){case"keypress":if(Qc(n)===0)break e;case"keydown":case"keyup":m=CT;break;case"focusin":p="focus",m=Dh;break;case"focusout":p="blur",m=Dh;break;case"beforeblur":case"afterblur":m=Dh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=_y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=fT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=DT;break;case Tj:case Pj:case _j:m=gT;break;case Aj:m=PT;break;case"scroll":m=dT;break;case"wheel":m=AT;break;case"copy":case"cut":case"paste":m=yT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=My}var g=(t&4)!==0,y=!g&&e==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Qo(v,b),S!=null&&g.push(nl(v,S,w)))),y)break;v=v.return}0<g.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==mm&&(p=n.relatedTarget||n.fromElement)&&(ei(p)||p[Ls]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?ei(p):null,p!==null&&(y=wi(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(g=_y,S="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=My,S="onPointerLeave",b="onPointerEnter",v="pointer"),y=m==null?f:zi(m),w=p==null?f:zi(p),f=new g(S,v+"leave",m,n,d),f.target=y,f.relatedTarget=w,S=null,ei(d)===u&&(g=new g(b,v+"enter",p,n,d),g.target=w,g.relatedTarget=y,S=g),y=S,m&&p)t:{for(g=m,b=p,v=0,w=g;w;w=Pi(w))v++;for(w=0,S=b;S;S=Pi(S))w++;for(;0<v-w;)g=Pi(g),v--;for(;0<w-v;)b=Pi(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=Pi(g),b=Pi(b)}g=null}else g=null;m!==null&&Wy(h,f,m,g,!1),p!==null&&y!==null&&Wy(h,y,p,g,!0)}}e:{if(f=u?zi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=$T;else if(Oy(f))if(Sj)N=UT;else{N=zT;var k=BT}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=VT);if(N&&(N=N(e,u))){Nj(h,N,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&cm(f,"number",f.value)}switch(k=u?zi(u):window,e){case"focusin":(Oy(k)||k.contentEditable==="true")&&($i=k,wm=u,Ao=null);break;case"focusout":Ao=wm=$i=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,zy(h,n,d);break;case"selectionchange":if(qT)break;case"keydown":case"keyup":zy(h,n,d)}var j;if(ug)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Fi?wj(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(bj&&n.locale!=="ko"&&(Fi||C!=="onCompositionStart"?C==="onCompositionEnd"&&Fi&&(j=vj()):(sr=d,og="value"in sr?sr.value:sr.textContent,Fi=!0)),k=ju(u,C),0<k.length&&(C=new Ay(C,e,null,n,d),h.push({event:C,listeners:k}),j?C.data=j:(j=jj(n),j!==null&&(C.data=j)))),(j=RT?IT(e,n):OT(e,n))&&(u=ju(u,"onBeforeInput"),0<u.length&&(d=new Ay("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=j))}Rj(h,t)})}function nl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ju(e,t){for(var n=t+"Capture",s=[];e!==null;){var r=e,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Qo(e,n),i!=null&&s.unshift(nl(e,i,r)),i=Qo(e,t),i!=null&&s.push(nl(e,i,r))),e=e.return}return s}function Pi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wy(e,t,n,s,r){for(var i=t._reactName,a=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Qo(n,i),c!=null&&a.unshift(nl(n,c,l))):r||(c=Qo(n,i),c!=null&&a.push(nl(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var KT=/\r\n?/g,XT=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace(KT,`
`).replace(XT,"")}function cc(e,t,n){if(t=Hy(t),Hy(e)!==t&&n)throw Error(K(425))}function Nu(){}var Nm=null,Sm=null;function Cm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var km=typeof setTimeout=="function"?setTimeout:void 0,JT=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,ZT=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(e){return qy.resolve(null).then(e).catch(eP)}:km;function eP(e){setTimeout(function(){throw e})}function Oh(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){e.removeChild(r),Jo(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Jo(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ea=Math.random().toString(36).slice(2),is="__reactFiber$"+Ea,sl="__reactProps$"+Ea,Ls="__reactContainer$"+Ea,Em="__reactEvents$"+Ea,tP="__reactListeners$"+Ea,nP="__reactHandles$"+Ea;function ei(e){var t=e[is];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ls]||n[is]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gy(e);e!==null;){if(n=e[is])return n;e=Gy(e)}return t}e=n,n=e.parentNode}return null}function Il(e){return e=e[is]||e[Ls],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Td(e){return e[sl]||null}var Dm=[],Vi=-1;function Mr(e){return{current:e}}function We(e){0>Vi||(e.current=Dm[Vi],Dm[Vi]=null,Vi--)}function $e(e,t){Vi++,Dm[Vi]=e.current,e.current=t}var kr={},Lt=Mr(kr),Zt=Mr(!1),hi=kr;function oa(e,t){var n=e.type.contextTypes;if(!n)return kr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function en(e){return e=e.childContextTypes,e!=null}function Su(){We(Zt),We(Lt)}function Yy(e,t,n){if(Lt.current!==kr)throw Error(K(168));$e(Lt,t),$e(Zt,n)}function Oj(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in t))throw Error(K(108,BD(e)||"Unknown",r));return et({},n,s)}function Cu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,hi=Lt.current,$e(Lt,e),$e(Zt,Zt.current),!0}function Qy(e,t,n){var s=e.stateNode;if(!s)throw Error(K(169));n?(e=Oj(e,t,hi),s.__reactInternalMemoizedMergedChildContext=e,We(Zt),We(Lt),$e(Lt,e)):We(Zt),$e(Zt,n)}var Ss=null,Pd=!1,Lh=!1;function Lj(e){Ss===null?Ss=[e]:Ss.push(e)}function sP(e){Pd=!0,Lj(e)}function Rr(){if(!Lh&&Ss!==null){Lh=!0;var e=0,t=Oe;try{var n=Ss;for(Oe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Ss=null,Pd=!1}catch(r){throw Ss!==null&&(Ss=Ss.slice(e+1)),lj(sg,Rr),r}finally{Oe=t,Lh=!1}}return null}var Ui=[],Wi=0,ku=null,Eu=0,Sn=[],Cn=0,fi=null,ks=1,Es="";function Wr(e,t){Ui[Wi++]=Eu,Ui[Wi++]=ku,ku=e,Eu=t}function Fj(e,t,n){Sn[Cn++]=ks,Sn[Cn++]=Es,Sn[Cn++]=fi,fi=e;var s=ks;e=Es;var r=32-qn(s)-1;s&=~(1<<r),n+=1;var i=32-qn(t)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,ks=1<<32-qn(t)+r|n<<r|s,Es=i+e}else ks=1<<i|n<<r|s,Es=e}function hg(e){e.return!==null&&(Wr(e,1),Fj(e,1,0))}function fg(e){for(;e===ku;)ku=Ui[--Wi],Ui[Wi]=null,Eu=Ui[--Wi],Ui[Wi]=null;for(;e===fi;)fi=Sn[--Cn],Sn[Cn]=null,Es=Sn[--Cn],Sn[Cn]=null,ks=Sn[--Cn],Sn[Cn]=null}var dn=null,cn=null,Ge=!1,Un=null;function $j(e,t){var n=kn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ky(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dn=e,cn=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dn=e,cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fi!==null?{id:ks,overflow:Es}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,dn=e,cn=null,!0):!1;default:return!1}}function Tm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pm(e){if(Ge){var t=cn;if(t){var n=t;if(!Ky(e,t)){if(Tm(e))throw Error(K(418));t=mr(n.nextSibling);var s=dn;t&&Ky(e,t)?$j(s,n):(e.flags=e.flags&-4097|2,Ge=!1,dn=e)}}else{if(Tm(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ge=!1,dn=e}}}function Xy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dn=e}function uc(e){if(e!==dn)return!1;if(!Ge)return Xy(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cm(e.type,e.memoizedProps)),t&&(t=cn)){if(Tm(e))throw Bj(),Error(K(418));for(;t;)$j(e,t),t=mr(t.nextSibling)}if(Xy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){cn=mr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}cn=null}}else cn=dn?mr(e.stateNode.nextSibling):null;return!0}function Bj(){for(var e=cn;e;)e=mr(e.nextSibling)}function la(){cn=dn=null,Ge=!1}function mg(e){Un===null?Un=[e]:Un.push(e)}var rP=zs.ReactCurrentBatchConfig;function Qa(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var s=n.stateNode}if(!s)throw Error(K(147,e));var r=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function dc(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jy(e){var t=e._init;return t(e._payload)}function zj(e){function t(b,v){if(e){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function s(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function r(b,v){return b=yr(b,v),b.index=0,b.sibling=null,b}function i(b,v,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,S){return v===null||v.tag!==6?(v=Wh(w,b.mode,S),v.return=b,v):(v=r(v,w),v.return=b,v)}function c(b,v,w,S){var N=w.type;return N===Li?d(b,v,w.props.children,S,w.key):v!==null&&(v.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ks&&Jy(N)===v.type)?(S=r(v,w.props),S.ref=Qa(b,v,w),S.return=b,S):(S=nu(w.type,w.key,w.props,null,b.mode,S),S.ref=Qa(b,v,w),S.return=b,S)}function u(b,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Hh(w,b.mode,S),v.return=b,v):(v=r(v,w.children||[]),v.return=b,v)}function d(b,v,w,S,N){return v===null||v.tag!==7?(v=oi(w,b.mode,S,N),v.return=b,v):(v=r(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Wh(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ec:return w=nu(v.type,v.key,v.props,null,b.mode,w),w.ref=Qa(b,null,v),w.return=b,w;case Oi:return v=Hh(v,b.mode,w),v.return=b,v;case Ks:var S=v._init;return h(b,S(v._payload),w)}if(yo(v)||Wa(v))return v=oi(v,b.mode,w,null),v.return=b,v;dc(b,v)}return null}function f(b,v,w,S){var N=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ec:return w.key===N?c(b,v,w,S):null;case Oi:return w.key===N?u(b,v,w,S):null;case Ks:return N=w._init,f(b,v,N(w._payload),S)}if(yo(w)||Wa(w))return N!==null?null:d(b,v,w,S,null);dc(b,w)}return null}function m(b,v,w,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,l(v,b,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ec:return b=b.get(S.key===null?w:S.key)||null,c(v,b,S,N);case Oi:return b=b.get(S.key===null?w:S.key)||null,u(v,b,S,N);case Ks:var k=S._init;return m(b,v,w,k(S._payload),N)}if(yo(S)||Wa(S))return b=b.get(w)||null,d(v,b,S,N,null);dc(v,S)}return null}function p(b,v,w,S){for(var N=null,k=null,j=v,C=v=0,D=null;j!==null&&C<w.length;C++){j.index>C?(D=j,j=null):D=j.sibling;var E=f(b,j,w[C],S);if(E===null){j===null&&(j=D);break}e&&j&&E.alternate===null&&t(b,j),v=i(E,v,C),k===null?N=E:k.sibling=E,k=E,j=D}if(C===w.length)return n(b,j),Ge&&Wr(b,C),N;if(j===null){for(;C<w.length;C++)j=h(b,w[C],S),j!==null&&(v=i(j,v,C),k===null?N=j:k.sibling=j,k=j);return Ge&&Wr(b,C),N}for(j=s(b,j);C<w.length;C++)D=m(j,b,C,w[C],S),D!==null&&(e&&D.alternate!==null&&j.delete(D.key===null?C:D.key),v=i(D,v,C),k===null?N=D:k.sibling=D,k=D);return e&&j.forEach(function(O){return t(b,O)}),Ge&&Wr(b,C),N}function g(b,v,w,S){var N=Wa(w);if(typeof N!="function")throw Error(K(150));if(w=N.call(w),w==null)throw Error(K(151));for(var k=N=null,j=v,C=v=0,D=null,E=w.next();j!==null&&!E.done;C++,E=w.next()){j.index>C?(D=j,j=null):D=j.sibling;var O=f(b,j,E.value,S);if(O===null){j===null&&(j=D);break}e&&j&&O.alternate===null&&t(b,j),v=i(O,v,C),k===null?N=O:k.sibling=O,k=O,j=D}if(E.done)return n(b,j),Ge&&Wr(b,C),N;if(j===null){for(;!E.done;C++,E=w.next())E=h(b,E.value,S),E!==null&&(v=i(E,v,C),k===null?N=E:k.sibling=E,k=E);return Ge&&Wr(b,C),N}for(j=s(b,j);!E.done;C++,E=w.next())E=m(j,b,C,E.value,S),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?C:E.key),v=i(E,v,C),k===null?N=E:k.sibling=E,k=E);return e&&j.forEach(function(F){return t(b,F)}),Ge&&Wr(b,C),N}function y(b,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Li&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ec:e:{for(var N=w.key,k=v;k!==null;){if(k.key===N){if(N=w.type,N===Li){if(k.tag===7){n(b,k.sibling),v=r(k,w.props.children),v.return=b,b=v;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ks&&Jy(N)===k.type){n(b,k.sibling),v=r(k,w.props),v.ref=Qa(b,k,w),v.return=b,b=v;break e}n(b,k);break}else t(b,k);k=k.sibling}w.type===Li?(v=oi(w.props.children,b.mode,S,w.key),v.return=b,b=v):(S=nu(w.type,w.key,w.props,null,b.mode,S),S.ref=Qa(b,v,w),S.return=b,b=S)}return a(b);case Oi:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(b,v.sibling),v=r(v,w.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else t(b,v);v=v.sibling}v=Hh(w,b.mode,S),v.return=b,b=v}return a(b);case Ks:return k=w._init,y(b,v,k(w._payload),S)}if(yo(w))return p(b,v,w,S);if(Wa(w))return g(b,v,w,S);dc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(b,v.sibling),v=r(v,w),v.return=b,b=v):(n(b,v),v=Wh(w,b.mode,S),v.return=b,b=v),a(b)):n(b,v)}return y}var ca=zj(!0),Vj=zj(!1),Du=Mr(null),Tu=null,Hi=null,pg=null;function gg(){pg=Hi=Tu=null}function xg(e){var t=Du.current;We(Du),e._currentValue=t}function _m(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function na(e,t){Tu=e,pg=Hi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jt=!0),e.firstContext=null)}function Mn(e){var t=e._currentValue;if(pg!==e)if(e={context:e,memoizedValue:t,next:null},Hi===null){if(Tu===null)throw Error(K(308));Hi=e,Tu.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ti=null;function yg(e){ti===null?ti=[e]:ti.push(e)}function Uj(e,t,n,s){var r=t.interleaved;return r===null?(n.next=n,yg(t)):(n.next=r.next,r.next=n),t.interleaved=n,Fs(e,s)}function Fs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xs=!1;function vg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Pe&2){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,Fs(e,n)}return r=s.interleaved,r===null?(t.next=t,yg(s)):(t.next=r.next,r.next=t),s.interleaved=t,Fs(e,n)}function Kc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,rg(e,n)}}function Zy(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pu(e,t,n,s){var r=e.updateQueue;Xs=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=et({},h,f);break e;case 2:Xs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else i===null&&(r.shared.lanes=0);pi|=a,e.lanes=a,e.memoizedState=h}}function e0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(K(191,r));r.call(s)}}}var Ol={},os=Mr(Ol),rl=Mr(Ol),il=Mr(Ol);function ni(e){if(e===Ol)throw Error(K(174));return e}function bg(e,t){switch($e(il,t),$e(rl,e),$e(os,Ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dm(t,e)}We(os),$e(os,t)}function ua(){We(os),We(rl),We(il)}function Hj(e){ni(il.current);var t=ni(os.current),n=dm(t,e.type);t!==n&&($e(rl,e),$e(os,n))}function wg(e){rl.current===e&&(We(os),We(rl))}var Ke=Mr(0);function _u(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fh=[];function jg(){for(var e=0;e<Fh.length;e++)Fh[e]._workInProgressVersionPrimary=null;Fh.length=0}var Xc=zs.ReactCurrentDispatcher,$h=zs.ReactCurrentBatchConfig,mi=0,Ze=null,gt=null,vt=null,Au=!1,Mo=!1,al=0,iP=0;function Et(){throw Error(K(321))}function Ng(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Sg(e,t,n,s,r,i){if(mi=i,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=e===null||e.memoizedState===null?cP:uP,e=n(s,r),Mo){i=0;do{if(Mo=!1,al=0,25<=i)throw Error(K(301));i+=1,vt=gt=null,t.updateQueue=null,Xc.current=dP,e=n(s,r)}while(Mo)}if(Xc.current=Mu,t=gt!==null&&gt.next!==null,mi=0,vt=gt=Ze=null,Au=!1,t)throw Error(K(300));return e}function Cg(){var e=al!==0;return al=0,e}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=e:vt=vt.next=e,vt}function Rn(){if(gt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=vt===null?Ze.memoizedState:vt.next;if(t!==null)vt=t,gt=e;else{if(e===null)throw Error(K(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},vt===null?Ze.memoizedState=vt=e:vt=vt.next=e}return vt}function ol(e,t){return typeof t=="function"?t(e):t}function Bh(e){var t=Rn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var s=gt,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((mi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,Ze.lanes|=d,pi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,Qn(s,t.memoizedState)||(Jt=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){r=e;do i=r.lane,Ze.lanes|=i,pi|=i,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zh(e){var t=Rn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=e(i,a.action),a=a.next;while(a!==r);Qn(i,t.memoizedState)||(Jt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function qj(){}function Gj(e,t){var n=Ze,s=Rn(),r=t(),i=!Qn(s.memoizedState,r);if(i&&(s.memoizedState=r,Jt=!0),s=s.queue,kg(Kj.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,ll(9,Qj.bind(null,n,s,r,t),void 0,null),bt===null)throw Error(K(349));mi&30||Yj(n,t,r)}return r}function Yj(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qj(e,t,n,s){t.value=n,t.getSnapshot=s,Xj(t)&&Jj(e)}function Kj(e,t,n){return n(function(){Xj(t)&&Jj(e)})}function Xj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch{return!0}}function Jj(e){var t=Fs(e,1);t!==null&&Gn(t,e,1,-1)}function t0(e){var t=ns();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=lP.bind(null,Ze,e),[t.memoizedState,e]}function ll(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Zj(){return Rn().memoizedState}function Jc(e,t,n,s){var r=ns();Ze.flags|=e,r.memoizedState=ll(1|t,n,void 0,s===void 0?null:s)}function _d(e,t,n,s){var r=Rn();s=s===void 0?null:s;var i=void 0;if(gt!==null){var a=gt.memoizedState;if(i=a.destroy,s!==null&&Ng(s,a.deps)){r.memoizedState=ll(t,n,i,s);return}}Ze.flags|=e,r.memoizedState=ll(1|t,n,i,s)}function n0(e,t){return Jc(8390656,8,e,t)}function kg(e,t){return _d(2048,8,e,t)}function eN(e,t){return _d(4,2,e,t)}function tN(e,t){return _d(4,4,e,t)}function nN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sN(e,t,n){return n=n!=null?n.concat([e]):null,_d(4,4,nN.bind(null,t,e),n)}function Eg(){}function rN(e,t){var n=Rn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ng(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function iN(e,t){var n=Rn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ng(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function aN(e,t,n){return mi&21?(Qn(n,t)||(n=dj(),Ze.lanes|=n,pi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jt=!0),e.memoizedState=n)}function aP(e,t){var n=Oe;Oe=n!==0&&4>n?n:4,e(!0);var s=$h.transition;$h.transition={};try{e(!1),t()}finally{Oe=n,$h.transition=s}}function oN(){return Rn().memoizedState}function oP(e,t,n){var s=xr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},lN(e))cN(t,n);else if(n=Uj(e,t,n,s),n!==null){var r=Wt();Gn(n,e,s,r),uN(n,t,s)}}function lP(e,t,n){var s=xr(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(lN(e))cN(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(r.hasEagerState=!0,r.eagerState=l,Qn(l,a)){var c=t.interleaved;c===null?(r.next=r,yg(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Uj(e,t,r,s),n!==null&&(r=Wt(),Gn(n,e,s,r),uN(n,t,s))}}function lN(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function cN(e,t){Mo=Au=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uN(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,rg(e,n)}}var Mu={readContext:Mn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},cP={readContext:Mn,useCallback:function(e,t){return ns().memoizedState=[e,t===void 0?null:t],e},useContext:Mn,useEffect:n0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jc(4194308,4,nN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jc(4,2,e,t)},useMemo:function(e,t){var n=ns();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ns();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=oP.bind(null,Ze,e),[s.memoizedState,e]},useRef:function(e){var t=ns();return e={current:e},t.memoizedState=e},useState:t0,useDebugValue:Eg,useDeferredValue:function(e){return ns().memoizedState=e},useTransition:function(){var e=t0(!1),t=e[0];return e=aP.bind(null,e[1]),ns().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ze,r=ns();if(Ge){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),bt===null)throw Error(K(349));mi&30||Yj(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,n0(Kj.bind(null,s,i,e),[e]),s.flags|=2048,ll(9,Qj.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=ns(),t=bt.identifierPrefix;if(Ge){var n=Es,s=ks;n=(s&~(1<<32-qn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=al++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=iP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uP={readContext:Mn,useCallback:rN,useContext:Mn,useEffect:kg,useImperativeHandle:sN,useInsertionEffect:eN,useLayoutEffect:tN,useMemo:iN,useReducer:Bh,useRef:Zj,useState:function(){return Bh(ol)},useDebugValue:Eg,useDeferredValue:function(e){var t=Rn();return aN(t,gt.memoizedState,e)},useTransition:function(){var e=Bh(ol)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:qj,useSyncExternalStore:Gj,useId:oN,unstable_isNewReconciler:!1},dP={readContext:Mn,useCallback:rN,useContext:Mn,useEffect:kg,useImperativeHandle:sN,useInsertionEffect:eN,useLayoutEffect:tN,useMemo:iN,useReducer:zh,useRef:Zj,useState:function(){return zh(ol)},useDebugValue:Eg,useDeferredValue:function(e){var t=Rn();return gt===null?t.memoizedState=e:aN(t,gt.memoizedState,e)},useTransition:function(){var e=zh(ol)[0],t=Rn().memoizedState;return[e,t]},useMutableSource:qj,useSyncExternalStore:Gj,useId:oN,unstable_isNewReconciler:!1};function zn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Am(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ad={isMounted:function(e){return(e=e._reactInternals)?wi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Wt(),r=xr(e),i=_s(s,r);i.payload=t,n!=null&&(i.callback=n),t=pr(e,i,r),t!==null&&(Gn(t,e,r,s),Kc(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Wt(),r=xr(e),i=_s(s,r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=pr(e,i,r),t!==null&&(Gn(t,e,r,s),Kc(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wt(),s=xr(e),r=_s(n,s);r.tag=2,t!=null&&(r.callback=t),t=pr(e,r,s),t!==null&&(Gn(t,e,s,n),Kc(t,e,s))}};function s0(e,t,n,s,r,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!el(n,s)||!el(r,i):!0}function dN(e,t,n){var s=!1,r=kr,i=t.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(r=en(t)?hi:Lt.current,s=t.contextTypes,i=(s=s!=null)?oa(e,r):kr),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ad,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function r0(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ad.enqueueReplaceState(t,t.state,null)}function Mm(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},vg(e);var i=t.contextType;typeof i=="object"&&i!==null?r.context=Mn(i):(i=en(t)?hi:Lt.current,r.context=oa(e,i)),r.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Am(e,t,i,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Ad.enqueueReplaceState(r,r.state,null),Pu(e,n,r,s),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function da(e,t){try{var n="",s=t;do n+=$D(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:r,digest:null}}function Vh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Rm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hP=typeof WeakMap=="function"?WeakMap:Map;function hN(e,t,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Iu||(Iu=!0,Wm=s),Rm(e,t)},n}function fN(e,t,n){n=_s(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){Rm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rm(e,t),typeof s!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function i0(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new hP;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=kP.bind(null,e,t,n),t.then(e,e))}function a0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function o0(e,t,n,s,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_s(-1,1),t.tag=2,pr(n,t,1))),n.lanes|=1),e)}var fP=zs.ReactCurrentOwner,Jt=!1;function Vt(e,t,n,s){t.child=e===null?Vj(t,null,n,s):ca(t,e.child,n,s)}function l0(e,t,n,s,r){n=n.render;var i=t.ref;return na(t,r),s=Sg(e,t,n,s,i,r),n=Cg(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,$s(e,t,r)):(Ge&&n&&hg(t),t.flags|=1,Vt(e,t,s,r),t.child)}function c0(e,t,n,s,r){if(e===null){var i=n.type;return typeof i=="function"&&!Ig(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,mN(e,t,i,s,r)):(e=nu(n.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(a,s)&&e.ref===t.ref)return $s(e,t,r)}return t.flags|=1,e=yr(i,s),e.ref=t.ref,e.return=t,t.child=e}function mN(e,t,n,s,r){if(e!==null){var i=e.memoizedProps;if(el(i,s)&&e.ref===t.ref)if(Jt=!1,t.pendingProps=s=i,(e.lanes&r)!==0)e.flags&131072&&(Jt=!0);else return t.lanes=e.lanes,$s(e,t,r)}return Im(e,t,n,s,r)}function pN(e,t,n){var s=t.pendingProps,r=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Gi,an),an|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(Gi,an),an|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,$e(Gi,an),an|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,$e(Gi,an),an|=s;return Vt(e,t,r,n),t.child}function gN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Im(e,t,n,s,r){var i=en(n)?hi:Lt.current;return i=oa(t,i),na(t,r),n=Sg(e,t,n,s,i,r),s=Cg(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,$s(e,t,r)):(Ge&&s&&hg(t),t.flags|=1,Vt(e,t,n,r),t.child)}function u0(e,t,n,s,r){if(en(n)){var i=!0;Cu(t)}else i=!1;if(na(t,r),t.stateNode===null)Zc(e,t),dN(t,n,s),Mm(t,n,s,r),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Mn(u):(u=en(n)?hi:Lt.current,u=oa(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&r0(t,a,s,u),Xs=!1;var f=t.memoizedState;a.state=f,Pu(t,s,a,r),c=t.memoizedState,l!==s||f!==c||Zt.current||Xs?(typeof d=="function"&&(Am(t,n,d,s),c=t.memoizedState),(l=Xs||s0(t,n,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Wj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:zn(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=en(n)?hi:Lt.current,c=oa(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&r0(t,a,s,c),Xs=!1,f=t.memoizedState,a.state=f,Pu(t,s,a,r);var p=t.memoizedState;l!==h||f!==p||Zt.current||Xs?(typeof m=="function"&&(Am(t,n,m,s),p=t.memoizedState),(u=Xs||s0(t,n,u,s,f,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,p,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),a.props=s,a.state=p,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Om(e,t,n,s,i,r)}function Om(e,t,n,s,r,i){gN(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return r&&Qy(t,n,!1),$s(e,t,i);s=t.stateNode,fP.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=ca(t,e.child,null,i),t.child=ca(t,null,l,i)):Vt(e,t,l,i),t.memoizedState=s.state,r&&Qy(t,n,!0),t.child}function xN(e){var t=e.stateNode;t.pendingContext?Yy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yy(e,t.context,!1),bg(e,t.containerInfo)}function d0(e,t,n,s,r){return la(),mg(r),t.flags|=256,Vt(e,t,n,s),t.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Fm(e){return{baseLanes:e,cachePool:null,transitions:null}}function yN(e,t,n){var s=t.pendingProps,r=Ke.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),$e(Ke,r&1),e===null)return Pm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Id(a,s,0,null),e=oi(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Fm(n),t.memoizedState=Lm,e):Dg(t,a));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return mP(e,t,a,s,l,r,n);if(i){i=s.fallback,a=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==r?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=yr(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=yr(l,i):(i=oi(i,a,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?Fm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Lm,s}return i=e.child,e=i.sibling,s=yr(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Dg(e,t){return t=Id({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hc(e,t,n,s){return s!==null&&mg(s),ca(t,e.child,null,n),e=Dg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mP(e,t,n,s,r,i,a){if(n)return t.flags&256?(t.flags&=-257,s=Vh(Error(K(422))),hc(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Id({mode:"visible",children:s.children},r,0,null),i=oi(i,r,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&ca(t,e.child,null,a),t.child.memoizedState=Fm(a),t.memoizedState=Lm,i);if(!(t.mode&1))return hc(e,t,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(K(419)),s=Vh(i,s,void 0),hc(e,t,a,s)}if(l=(a&e.childLanes)!==0,Jt||l){if(s=bt,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Fs(e,r),Gn(s,e,r,-1))}return Rg(),s=Vh(Error(K(421))),hc(e,t,a,s)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=EP.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,cn=mr(r.nextSibling),dn=t,Ge=!0,Un=null,e!==null&&(Sn[Cn++]=ks,Sn[Cn++]=Es,Sn[Cn++]=fi,ks=e.id,Es=e.overflow,fi=t),t=Dg(t,s.children),t.flags|=4096,t)}function h0(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),_m(e.return,t,n)}function Uh(e,t,n,s,r){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function vN(e,t,n){var s=t.pendingProps,r=s.revealOrder,i=s.tail;if(Vt(e,t,s.children,n),s=Ke.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h0(e,n,t);else if(e.tag===19)h0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if($e(Ke,s),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&_u(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Uh(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&_u(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Uh(t,!0,n,null,i);break;case"together":Uh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $s(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=yr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pP(e,t,n){switch(t.tag){case 3:xN(t),la();break;case 5:Hj(t);break;case 1:en(t.type)&&Cu(t);break;case 4:bg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;$e(Du,s._currentValue),s._currentValue=r;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?($e(Ke,Ke.current&1),t.flags|=128,null):n&t.child.childLanes?yN(e,t,n):($e(Ke,Ke.current&1),e=$s(e,t,n),e!==null?e.sibling:null);$e(Ke,Ke.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return vN(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(Ke,Ke.current),s)break;return null;case 22:case 23:return t.lanes=0,pN(e,t,n)}return $s(e,t,n)}var bN,$m,wN,jN;bN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};wN=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,ni(os.current);var i=null;switch(n){case"input":r=om(e,r),s=om(e,s),i=[];break;case"select":r=et({},r,{value:void 0}),s=et({},s,{value:void 0}),i=[];break;case"textarea":r=um(e,r),s=um(e,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Nu)}hm(n,s);var a;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Go.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Go.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ze("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};jN=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ka(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function gP(e,t,n){var s=t.pendingProps;switch(fg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return en(t.type)&&Su(),Dt(t),null;case 3:return s=t.stateNode,ua(),We(Zt),We(Lt),jg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(uc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Un!==null&&(Gm(Un),Un=null))),$m(e,t),Dt(t),null;case 5:wg(t);var r=ni(il.current);if(n=t.type,e!==null&&t.stateNode!=null)wN(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(K(166));return Dt(t),null}if(e=ni(os.current),uc(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[is]=t,s[sl]=i,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(r=0;r<bo.length;r++)ze(bo[r],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":wy(s,i),ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ze("invalid",s);break;case"textarea":Ny(s,i),ze("invalid",s)}hm(n,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&cc(s.textContent,l,e),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&cc(s.textContent,l,e),r=["children",""+l]):Go.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ze("scroll",s)}switch(n){case"input":tc(s),jy(s,i,!0);break;case"textarea":tc(s),Sy(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Nu)}s=r,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=K1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=a.createElement(n,{is:s.is}):(e=a.createElement(n),n==="select"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,n),e[is]=t,e[sl]=s,bN(e,t,!1,!1),t.stateNode=e;e:{switch(a=fm(n,s),n){case"dialog":ze("cancel",e),ze("close",e),r=s;break;case"iframe":case"object":case"embed":ze("load",e),r=s;break;case"video":case"audio":for(r=0;r<bo.length;r++)ze(bo[r],e);r=s;break;case"source":ze("error",e),r=s;break;case"img":case"image":case"link":ze("error",e),ze("load",e),r=s;break;case"details":ze("toggle",e),r=s;break;case"input":wy(e,s),r=om(e,s),ze("invalid",e);break;case"option":r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=et({},s,{value:void 0}),ze("invalid",e);break;case"textarea":Ny(e,s),r=um(e,s),ze("invalid",e);break;default:r=s}hm(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Z1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&X1(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yo(e,c):typeof c=="number"&&Yo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Go.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",e):c!=null&&Jp(e,i,c,a))}switch(n){case"input":tc(e),jy(e,s,!1);break;case"textarea":tc(e),Sy(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Cr(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Ji(e,!!s.multiple,i,!1):s.defaultValue!=null&&Ji(e,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Nu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)jN(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(K(166));if(n=ni(il.current),ni(os.current),uc(t)){if(s=t.stateNode,n=t.memoizedProps,s[is]=t,(i=s.nodeValue!==n)&&(e=dn,e!==null))switch(e.tag){case 3:cc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cc(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[is]=t,t.stateNode=s}return Dt(t),null;case 13:if(We(Ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&cn!==null&&t.mode&1&&!(t.flags&128))Bj(),la(),t.flags|=98560,i=!1;else if(i=uc(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[is]=t}else la(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dt(t),i=!1}else Un!==null&&(Gm(Un),Un=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ke.current&1?xt===0&&(xt=3):Rg())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return ua(),$m(e,t),e===null&&tl(t.stateNode.containerInfo),Dt(t),null;case 10:return xg(t.type._context),Dt(t),null;case 17:return en(t.type)&&Su(),Dt(t),null;case 19:if(We(Ke),i=t.memoizedState,i===null)return Dt(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)Ka(i,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=_u(e),a!==null){for(t.flags|=128,Ka(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return $e(Ke,Ke.current&1|2),t.child}e=e.sibling}i.tail!==null&&st()>ha&&(t.flags|=128,s=!0,Ka(i,!1),t.lanes=4194304)}else{if(!s)if(e=_u(a),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ka(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ge)return Dt(t),null}else 2*st()-i.renderingStartTime>ha&&n!==1073741824&&(t.flags|=128,s=!0,Ka(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=st(),t.sibling=null,n=Ke.current,$e(Ke,s?n&1|2:n&1),t):(Dt(t),null);case 22:case 23:return Mg(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?an&1073741824&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function xP(e,t){switch(fg(t),t.tag){case 1:return en(t.type)&&Su(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ua(),We(Zt),We(Lt),jg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wg(t),null;case 13:if(We(Ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));la()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Ke),null;case 4:return ua(),null;case 10:return xg(t.type._context),null;case 22:case 23:return Mg(),null;case 24:return null;default:return null}}var fc=!1,At=!1,yP=typeof WeakSet=="function"?WeakSet:Set,ce=null;function qi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){nt(e,t,s)}else n.current=null}function Bm(e,t,n){try{n()}catch(s){nt(e,t,s)}}var f0=!1;function vP(e,t){if(Nm=bu,e=Ej(),dg(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||r!==0&&h.nodeType!==3||(l=a+r),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===i&&++d===s&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sm={focusedElem:e,selectionRange:n},bu=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:zn(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(S){nt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return p=f0,f0=!1,p}function Ro(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,i!==void 0&&Bm(t,n,i)}r=r.next}while(r!==s)}}function Md(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function zm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function NN(e){var t=e.alternate;t!==null&&(e.alternate=null,NN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[is],delete t[sl],delete t[Em],delete t[tP],delete t[nP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SN(e){return e.tag===5||e.tag===3||e.tag===4}function m0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nu));else if(s!==4&&(e=e.child,e!==null))for(Vm(e,t,n),e=e.sibling;e!==null;)Vm(e,t,n),e=e.sibling}function Um(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Um(e,t,n),e=e.sibling;e!==null;)Um(e,t,n),e=e.sibling}var Nt=null,Vn=!1;function Us(e,t,n){for(n=n.child;n!==null;)CN(e,t,n),n=n.sibling}function CN(e,t,n){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(Cd,n)}catch{}switch(n.tag){case 5:At||qi(n,t);case 6:var s=Nt,r=Vn;Nt=null,Us(e,t,n),Nt=s,Vn=r,Nt!==null&&(Vn?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Vn?(e=Nt,n=n.stateNode,e.nodeType===8?Oh(e.parentNode,n):e.nodeType===1&&Oh(e,n),Jo(e)):Oh(Nt,n.stateNode));break;case 4:s=Nt,r=Vn,Nt=n.stateNode.containerInfo,Vn=!0,Us(e,t,n),Nt=s,Vn=r;break;case 0:case 11:case 14:case 15:if(!At&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Bm(n,t,a),r=r.next}while(r!==s)}Us(e,t,n);break;case 1:if(!At&&(qi(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){nt(n,t,l)}Us(e,t,n);break;case 21:Us(e,t,n);break;case 22:n.mode&1?(At=(s=At)||n.memoizedState!==null,Us(e,t,n),At=s):Us(e,t,n);break;default:Us(e,t,n)}}function p0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new yP),t.forEach(function(s){var r=DP.bind(null,e,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Bn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Nt=l.stateNode,Vn=!1;break e;case 3:Nt=l.stateNode.containerInfo,Vn=!0;break e;case 4:Nt=l.stateNode.containerInfo,Vn=!0;break e}l=l.return}if(Nt===null)throw Error(K(160));CN(i,a,r),Nt=null,Vn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){nt(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kN(t,e),t=t.sibling}function kN(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bn(t,e),Zn(e),s&4){try{Ro(3,e,e.return),Md(3,e)}catch(g){nt(e,e.return,g)}try{Ro(5,e,e.return)}catch(g){nt(e,e.return,g)}}break;case 1:Bn(t,e),Zn(e),s&512&&n!==null&&qi(n,n.return);break;case 5:if(Bn(t,e),Zn(e),s&512&&n!==null&&qi(n,n.return),e.flags&32){var r=e.stateNode;try{Yo(r,"")}catch(g){nt(e,e.return,g)}}if(s&4&&(r=e.stateNode,r!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Y1(r,i),fm(l,a);var u=fm(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Z1(r,h):d==="dangerouslySetInnerHTML"?X1(r,h):d==="children"?Yo(r,h):Jp(r,d,h,u)}switch(l){case"input":lm(r,i);break;case"textarea":Q1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ji(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ji(r,!!i.multiple,i.defaultValue,!0):Ji(r,!!i.multiple,i.multiple?[]:"",!1))}r[sl]=i}catch(g){nt(e,e.return,g)}}break;case 6:if(Bn(t,e),Zn(e),s&4){if(e.stateNode===null)throw Error(K(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){nt(e,e.return,g)}}break;case 3:if(Bn(t,e),Zn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(g){nt(e,e.return,g)}break;case 4:Bn(t,e),Zn(e);break;case 13:Bn(t,e),Zn(e),r=e.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(_g=st())),s&4&&p0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(At=(u=At)||d,Bn(t,e),At=u):Bn(t,e),Zn(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ce=e,d=e.child;d!==null;){for(h=ce=d;ce!==null;){switch(f=ce,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ro(4,f,f.return);break;case 1:qi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){nt(s,n,g)}}break;case 5:qi(f,f.return);break;case 22:if(f.memoizedState!==null){x0(h);continue}}m!==null?(m.return=f,ce=m):x0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=J1("display",a))}catch(g){nt(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){nt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bn(t,e),Zn(e),s&4&&p0(e);break;case 21:break;default:Bn(t,e),Zn(e)}}function Zn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(SN(n)){var s=n;break e}n=n.return}throw Error(K(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Yo(r,""),s.flags&=-33);var i=m0(e);Um(e,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=m0(e);Vm(e,l,a);break;default:throw Error(K(161))}}catch(c){nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bP(e,t,n){ce=e,EN(e)}function EN(e,t,n){for(var s=(e.mode&1)!==0;ce!==null;){var r=ce,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||fc;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||At;l=fc;var u=At;if(fc=a,(At=c)&&!u)for(ce=r;ce!==null;)a=ce,c=a.child,a.tag===22&&a.memoizedState!==null?y0(r):c!==null?(c.return=a,ce=c):y0(r);for(;i!==null;)ce=i,EN(i),i=i.sibling;ce=r,fc=l,At=u}g0(e)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ce=i):g0(e)}}function g0(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:At||Md(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!At)if(n===null)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:zn(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&e0(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}e0(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Jo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}At||t.flags&512&&zm(t)}catch(f){nt(t,t.return,f)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function x0(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function y0(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Md(4,t)}catch(c){nt(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var r=t.return;try{s.componentDidMount()}catch(c){nt(t,r,c)}}var i=t.return;try{zm(t)}catch(c){nt(t,i,c)}break;case 5:var a=t.return;try{zm(t)}catch(c){nt(t,a,c)}}}catch(c){nt(t,t.return,c)}if(t===e){ce=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ce=l;break}ce=t.return}}var wP=Math.ceil,Ru=zs.ReactCurrentDispatcher,Tg=zs.ReactCurrentOwner,_n=zs.ReactCurrentBatchConfig,Pe=0,bt=null,ut=null,Ct=0,an=0,Gi=Mr(0),xt=0,cl=null,pi=0,Rd=0,Pg=0,Io=null,Kt=null,_g=0,ha=1/0,js=null,Iu=!1,Wm=null,gr=null,mc=!1,rr=null,Ou=0,Oo=0,Hm=null,eu=-1,tu=0;function Wt(){return Pe&6?st():eu!==-1?eu:eu=st()}function xr(e){return e.mode&1?Pe&2&&Ct!==0?Ct&-Ct:rP.transition!==null?(tu===0&&(tu=dj()),tu):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:yj(e.type)),e):1}function Gn(e,t,n,s){if(50<Oo)throw Oo=0,Hm=null,Error(K(185));Ml(e,n,s),(!(Pe&2)||e!==bt)&&(e===bt&&(!(Pe&2)&&(Rd|=n),xt===4&&er(e,Ct)),tn(e,s),n===1&&Pe===0&&!(t.mode&1)&&(ha=st()+500,Pd&&Rr()))}function tn(e,t){var n=e.callbackNode;rT(e,t);var s=vu(e,e===bt?Ct:0);if(s===0)n!==null&&Ey(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Ey(n),t===1)e.tag===0?sP(v0.bind(null,e)):Lj(v0.bind(null,e)),ZT(function(){!(Pe&6)&&Rr()}),n=null;else{switch(hj(s)){case 1:n=sg;break;case 4:n=cj;break;case 16:n=yu;break;case 536870912:n=uj;break;default:n=yu}n=IN(n,DN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function DN(e,t){if(eu=-1,tu=0,Pe&6)throw Error(K(327));var n=e.callbackNode;if(sa()&&e.callbackNode!==n)return null;var s=vu(e,e===bt?Ct:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Lu(e,s);else{t=s;var r=Pe;Pe|=2;var i=PN();(bt!==e||Ct!==t)&&(js=null,ha=st()+500,ai(e,t));do try{SP();break}catch(l){TN(e,l)}while(!0);gg(),Ru.current=i,Pe=r,ut!==null?t=0:(bt=null,Ct=0,t=xt)}if(t!==0){if(t===2&&(r=ym(e),r!==0&&(s=r,t=qm(e,r))),t===1)throw n=cl,ai(e,0),er(e,s),tn(e,st()),n;if(t===6)er(e,s);else{if(r=e.current.alternate,!(s&30)&&!jP(r)&&(t=Lu(e,s),t===2&&(i=ym(e),i!==0&&(s=i,t=qm(e,i))),t===1))throw n=cl,ai(e,0),er(e,s),tn(e,st()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(K(345));case 2:Hr(e,Kt,js);break;case 3:if(er(e,s),(s&130023424)===s&&(t=_g+500-st(),10<t)){if(vu(e,0)!==0)break;if(r=e.suspendedLanes,(r&s)!==s){Wt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=km(Hr.bind(null,e,Kt,js),t);break}Hr(e,Kt,js);break;case 4:if(er(e,s),(s&4194240)===s)break;for(t=e.eventTimes,r=-1;0<s;){var a=31-qn(s);i=1<<a,a=t[a],a>r&&(r=a),s&=~i}if(s=r,s=st()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*wP(s/1960))-s,10<s){e.timeoutHandle=km(Hr.bind(null,e,Kt,js),s);break}Hr(e,Kt,js);break;case 5:Hr(e,Kt,js);break;default:throw Error(K(329))}}}return tn(e,st()),e.callbackNode===n?DN.bind(null,e):null}function qm(e,t){var n=Io;return e.current.memoizedState.isDehydrated&&(ai(e,t).flags|=256),e=Lu(e,t),e!==2&&(t=Kt,Kt=n,t!==null&&Gm(t)),e}function Gm(e){Kt===null?Kt=e:Kt.push.apply(Kt,e)}function jP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Qn(i(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~Pg,t&=~Rd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qn(t),s=1<<n;e[n]=-1,t&=~s}}function v0(e){if(Pe&6)throw Error(K(327));sa();var t=vu(e,0);if(!(t&1))return tn(e,st()),null;var n=Lu(e,t);if(e.tag!==0&&n===2){var s=ym(e);s!==0&&(t=s,n=qm(e,s))}if(n===1)throw n=cl,ai(e,0),er(e,t),tn(e,st()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hr(e,Kt,js),tn(e,st()),null}function Ag(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(ha=st()+500,Pd&&Rr())}}function gi(e){rr!==null&&rr.tag===0&&!(Pe&6)&&sa();var t=Pe;Pe|=1;var n=_n.transition,s=Oe;try{if(_n.transition=null,Oe=1,e)return e()}finally{Oe=s,_n.transition=n,Pe=t,!(Pe&6)&&Rr()}}function Mg(){an=Gi.current,We(Gi)}function ai(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,JT(n)),ut!==null)for(n=ut.return;n!==null;){var s=n;switch(fg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Su();break;case 3:ua(),We(Zt),We(Lt),jg();break;case 5:wg(s);break;case 4:ua();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:xg(s.type._context);break;case 22:case 23:Mg()}n=n.return}if(bt=e,ut=e=yr(e.current,null),Ct=an=t,xt=0,cl=null,Pg=Rd=pi=0,Kt=Io=null,ti!==null){for(t=0;t<ti.length;t++)if(n=ti[t],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}n.pending=s}ti=null}return e}function TN(e,t){do{var n=ut;try{if(gg(),Xc.current=Mu,Au){for(var s=Ze.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Au=!1}if(mi=0,vt=gt=Ze=null,Mo=!1,al=0,Tg.current=null,n===null||n.return===null){xt=1,cl=t,ut=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=a0(a);if(m!==null){m.flags&=-257,o0(m,a,l,i,t),m.mode&1&&i0(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){i0(i,u,t),Rg();break e}c=Error(K(426))}}else if(Ge&&l.mode&1){var y=a0(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),o0(y,a,l,i,t),mg(da(c,l));break e}}i=c=da(c,l),xt!==4&&(xt=2),Io===null?Io=[i]:Io.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=hN(i,c,t);Zy(i,b);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gr===null||!gr.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=fN(i,l,t);Zy(i,S);break e}}i=i.return}while(i!==null)}AN(n)}catch(N){t=N,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function PN(){var e=Ru.current;return Ru.current=Mu,e===null?Mu:e}function Rg(){(xt===0||xt===3||xt===2)&&(xt=4),bt===null||!(pi&268435455)&&!(Rd&268435455)||er(bt,Ct)}function Lu(e,t){var n=Pe;Pe|=2;var s=PN();(bt!==e||Ct!==t)&&(js=null,ai(e,t));do try{NP();break}catch(r){TN(e,r)}while(!0);if(gg(),Pe=n,Ru.current=s,ut!==null)throw Error(K(261));return bt=null,Ct=0,xt}function NP(){for(;ut!==null;)_N(ut)}function SP(){for(;ut!==null&&!QD();)_N(ut)}function _N(e){var t=RN(e.alternate,e,an);e.memoizedProps=e.pendingProps,t===null?AN(e):ut=t,Tg.current=null}function AN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=xP(n,t),n!==null){n.flags&=32767,ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,ut=null;return}}else if(n=gP(n,t,an),n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);xt===0&&(xt=5)}function Hr(e,t,n){var s=Oe,r=_n.transition;try{_n.transition=null,Oe=1,CP(e,t,n,s)}finally{_n.transition=r,Oe=s}return null}function CP(e,t,n,s){do sa();while(rr!==null);if(Pe&6)throw Error(K(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(iT(e,i),e===bt&&(ut=bt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mc||(mc=!0,IN(yu,function(){return sa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var a=Oe;Oe=1;var l=Pe;Pe|=4,Tg.current=null,vP(e,n),kN(n,e),HT(Sm),bu=!!Nm,Sm=Nm=null,e.current=n,bP(n),KD(),Pe=l,Oe=a,_n.transition=i}else e.current=n;if(mc&&(mc=!1,rr=e,Ou=r),i=e.pendingLanes,i===0&&(gr=null),ZD(n.stateNode),tn(e,st()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Iu)throw Iu=!1,e=Wm,Wm=null,e;return Ou&1&&e.tag!==0&&sa(),i=e.pendingLanes,i&1?e===Hm?Oo++:(Oo=0,Hm=e):Oo=0,Rr(),null}function sa(){if(rr!==null){var e=hj(Ou),t=_n.transition,n=Oe;try{if(_n.transition=null,Oe=16>e?16:e,rr===null)var s=!1;else{if(e=rr,rr=null,Ou=0,Pe&6)throw Error(K(331));var r=Pe;for(Pe|=4,ce=e.current;ce!==null;){var i=ce,a=i.child;if(ce.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ce=u;ce!==null;){var d=ce;switch(d.tag){case 0:case 11:case 15:Ro(8,d,i)}var h=d.child;if(h!==null)h.return=d,ce=h;else for(;ce!==null;){d=ce;var f=d.sibling,m=d.return;if(NN(d),d===u){ce=null;break}if(f!==null){f.return=m,ce=f;break}ce=m}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ce=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ce=a;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ro(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ce=b;break e}ce=i.return}}var v=e.current;for(ce=v;ce!==null;){a=ce;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,ce=w;else e:for(a=v;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Md(9,l)}}catch(N){nt(l,l.return,N)}if(l===a){ce=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,ce=S;break e}ce=l.return}}if(Pe=r,Rr(),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(Cd,e)}catch{}s=!0}return s}finally{Oe=n,_n.transition=t}}return!1}function b0(e,t,n){t=da(n,t),t=hN(e,t,1),e=pr(e,t,1),t=Wt(),e!==null&&(Ml(e,1,t),tn(e,t))}function nt(e,t,n){if(e.tag===3)b0(e,e,n);else for(;t!==null;){if(t.tag===3){b0(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gr===null||!gr.has(s))){e=da(n,e),e=fN(t,e,1),t=pr(t,e,1),e=Wt(),t!==null&&(Ml(t,1,e),tn(t,e));break}}t=t.return}}function kP(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&n,bt===e&&(Ct&n)===n&&(xt===4||xt===3&&(Ct&130023424)===Ct&&500>st()-_g?ai(e,0):Pg|=n),tn(e,t)}function MN(e,t){t===0&&(e.mode&1?(t=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):t=1);var n=Wt();e=Fs(e,t),e!==null&&(Ml(e,t,n),tn(e,n))}function EP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),MN(e,n)}function DP(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(K(314))}s!==null&&s.delete(t),MN(e,n)}var RN;RN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zt.current)Jt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Jt=!1,pP(e,t,n);Jt=!!(e.flags&131072)}else Jt=!1,Ge&&t.flags&1048576&&Fj(t,Eu,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Zc(e,t),e=t.pendingProps;var r=oa(t,Lt.current);na(t,n),r=Sg(null,t,s,e,r,n);var i=Cg();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,en(s)?(i=!0,Cu(t)):i=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vg(t),r.updater=Ad,t.stateNode=r,r._reactInternals=t,Mm(t,s,e,n),t=Om(null,t,s,!0,i,n)):(t.tag=0,Ge&&i&&hg(t),Vt(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Zc(e,t),e=t.pendingProps,r=s._init,s=r(s._payload),t.type=s,r=t.tag=PP(s),e=zn(s,e),r){case 0:t=Im(null,t,s,e,n);break e;case 1:t=u0(null,t,s,e,n);break e;case 11:t=l0(null,t,s,e,n);break e;case 14:t=c0(null,t,s,zn(s.type,e),n);break e}throw Error(K(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:zn(s,r),Im(e,t,s,r,n);case 1:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:zn(s,r),u0(e,t,s,r,n);case 3:e:{if(xN(t),e===null)throw Error(K(387));s=t.pendingProps,i=t.memoizedState,r=i.element,Wj(e,t),Pu(t,s,null,n);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){r=da(Error(K(423)),t),t=d0(e,t,s,n,r);break e}else if(s!==r){r=da(Error(K(424)),t),t=d0(e,t,s,n,r);break e}else for(cn=mr(t.stateNode.containerInfo.firstChild),dn=t,Ge=!0,Un=null,n=Vj(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(la(),s===r){t=$s(e,t,n);break e}Vt(e,t,s,n)}t=t.child}return t;case 5:return Hj(t),e===null&&Pm(t),s=t.type,r=t.pendingProps,i=e!==null?e.memoizedProps:null,a=r.children,Cm(s,r)?a=null:i!==null&&Cm(s,i)&&(t.flags|=32),gN(e,t),Vt(e,t,a,n),t.child;case 6:return e===null&&Pm(t),null;case 13:return yN(e,t,n);case 4:return bg(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ca(t,null,s,n):Vt(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:zn(s,r),l0(e,t,s,r,n);case 7:return Vt(e,t,t.pendingProps,n),t.child;case 8:return Vt(e,t,t.pendingProps.children,n),t.child;case 12:return Vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,a=r.value,$e(Du,s._currentValue),s._currentValue=a,i!==null)if(Qn(i.value,a)){if(i.children===r.children&&!Zt.current){t=$s(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=_s(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),_m(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(K(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),_m(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Vt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,na(t,n),r=Mn(r),s=s(r),t.flags|=1,Vt(e,t,s,n),t.child;case 14:return s=t.type,r=zn(s,t.pendingProps),r=zn(s.type,r),c0(e,t,s,r,n);case 15:return mN(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:zn(s,r),Zc(e,t),t.tag=1,en(s)?(e=!0,Cu(t)):e=!1,na(t,n),dN(t,s,r),Mm(t,s,r,n),Om(null,t,s,!0,e,n);case 19:return vN(e,t,n);case 22:return pN(e,t,n)}throw Error(K(156,t.tag))};function IN(e,t){return lj(e,t)}function TP(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(e,t,n,s){return new TP(e,t,n,s)}function Ig(e){return e=e.prototype,!(!e||!e.isReactComponent)}function PP(e){if(typeof e=="function")return Ig(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eg)return 11;if(e===tg)return 14}return 2}function yr(e,t){var n=e.alternate;return n===null?(n=kn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nu(e,t,n,s,r,i){var a=2;if(s=e,typeof e=="function")Ig(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Li:return oi(n.children,r,i,t);case Zp:a=8,r|=8;break;case sm:return e=kn(12,n,t,r|2),e.elementType=sm,e.lanes=i,e;case rm:return e=kn(13,n,t,r),e.elementType=rm,e.lanes=i,e;case im:return e=kn(19,n,t,r),e.elementType=im,e.lanes=i,e;case H1:return Id(n,r,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U1:a=10;break e;case W1:a=9;break e;case eg:a=11;break e;case tg:a=14;break e;case Ks:a=16,s=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=kn(a,n,t,r),t.elementType=e,t.type=s,t.lanes=i,t}function oi(e,t,n,s){return e=kn(7,e,s,t),e.lanes=n,e}function Id(e,t,n,s){return e=kn(22,e,s,t),e.elementType=H1,e.lanes=n,e.stateNode={isHidden:!1},e}function Wh(e,t,n){return e=kn(6,e,null,t),e.lanes=n,e}function Hh(e,t,n){return t=kn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _P(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Og(e,t,n,s,r,i,a,l,c){return e=new _P(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=kn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vg(i),e}function AP(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oi,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function ON(e){if(!e)return kr;e=e._reactInternals;e:{if(wi(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(en(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(en(n))return Oj(e,n,t)}return t}function LN(e,t,n,s,r,i,a,l,c){return e=Og(n,s,!0,e,r,i,a,l,c),e.context=ON(null),n=e.current,s=Wt(),r=xr(n),i=_s(s,r),i.callback=t??null,pr(n,i,r),e.current.lanes=r,Ml(e,r,s),tn(e,s),e}function Od(e,t,n,s){var r=t.current,i=Wt(),a=xr(r);return n=ON(n),t.context===null?t.context=n:t.pendingContext=n,t=_s(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=pr(r,t,a),e!==null&&(Gn(e,r,a,i),Kc(e,r,a)),a}function Fu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function w0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lg(e,t){w0(e,t),(e=e.alternate)&&w0(e,t)}function MP(){return null}var FN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fg(e){this._internalRoot=e}Ld.prototype.render=Fg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Od(e,t,null,null)};Ld.prototype.unmount=Fg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gi(function(){Od(null,e,null,null)}),t[Ls]=null}};function Ld(e){this._internalRoot=e}Ld.prototype.unstable_scheduleHydration=function(e){if(e){var t=pj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zs.length&&t!==0&&t<Zs[n].priority;n++);Zs.splice(n,0,e),n===0&&xj(e)}};function $g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function j0(){}function RP(e,t,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Fu(a);i.call(u)}}var a=LN(t,s,e,0,null,!1,!1,"",j0);return e._reactRootContainer=a,e[Ls]=a.current,tl(e.nodeType===8?e.parentNode:e),gi(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=Fu(c);l.call(u)}}var c=Og(e,0,!1,null,null,!1,!1,"",j0);return e._reactRootContainer=c,e[Ls]=c.current,tl(e.nodeType===8?e.parentNode:e),gi(function(){Od(t,c,n,s)}),c}function $d(e,t,n,s,r){var i=n._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=Fu(a);l.call(c)}}Od(t,a,e,r)}else a=RP(n,t,e,r,s);return Fu(a)}fj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vo(t.pendingLanes);n!==0&&(rg(t,n|1),tn(t,st()),!(Pe&6)&&(ha=st()+500,Rr()))}break;case 13:gi(function(){var s=Fs(e,1);if(s!==null){var r=Wt();Gn(s,e,1,r)}}),Lg(e,1)}};ig=function(e){if(e.tag===13){var t=Fs(e,134217728);if(t!==null){var n=Wt();Gn(t,e,134217728,n)}Lg(e,134217728)}};mj=function(e){if(e.tag===13){var t=xr(e),n=Fs(e,t);if(n!==null){var s=Wt();Gn(n,e,t,s)}Lg(e,t)}};pj=function(){return Oe};gj=function(e,t){var n=Oe;try{return Oe=e,t()}finally{Oe=n}};pm=function(e,t,n){switch(t){case"input":if(lm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=Td(s);if(!r)throw Error(K(90));G1(s),lm(s,r)}}}break;case"textarea":Q1(e,n);break;case"select":t=n.value,t!=null&&Ji(e,!!n.multiple,t,!1)}};nj=Ag;sj=gi;var IP={usingClientEntryPoint:!1,Events:[Il,zi,Td,ej,tj,Ag]},Xa={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OP={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aj(e),e===null?null:e.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||MP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Cd=pc.inject(OP),as=pc}catch{}}xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IP;xn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$g(t))throw Error(K(200));return AP(e,t,null,n)};xn.createRoot=function(e,t){if(!$g(e))throw Error(K(299));var n=!1,s="",r=FN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Og(e,1,!1,null,null,n,!1,s,r),e[Ls]=t.current,tl(e.nodeType===8?e.parentNode:e),new Fg(t)};xn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=aj(t),e=e===null?null:e.stateNode,e};xn.flushSync=function(e){return gi(e)};xn.hydrate=function(e,t,n){if(!Fd(t))throw Error(K(200));return $d(null,e,t,!0,n)};xn.hydrateRoot=function(e,t,n){if(!$g(e))throw Error(K(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",a=FN;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=LN(t,null,e,1,n??null,r,!1,i,a),e[Ls]=t.current,tl(e),s)for(e=0;e<s.length;e++)n=s[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Ld(t)};xn.render=function(e,t,n){if(!Fd(t))throw Error(K(200));return $d(null,e,t,!1,n)};xn.unmountComponentAtNode=function(e){if(!Fd(e))throw Error(K(40));return e._reactRootContainer?(gi(function(){$d(null,null,e,!1,function(){e._reactRootContainer=null,e[Ls]=null})}),!0):!1};xn.unstable_batchedUpdates=Ag;xn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Fd(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return $d(e,t,n,!1,s)};xn.version="18.3.1-next-f1338f8080-20240426";function $N(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($N)}catch(e){console.error(e)}}$N(),$1.exports=xn;var Ll=$1.exports;const LP=Wp(Ll);var BN,N0=Ll;BN=N0.createRoot,N0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ul.apply(this,arguments)}var ir;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ir||(ir={}));const S0="popstate";function FP(e){e===void 0&&(e={});function t(s,r){let{pathname:i,search:a,hash:l}=s.location;return Ym("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:$u(r)}return BP(t,n,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $P(){return Math.random().toString(36).substr(2,8)}function C0(e,t){return{usr:e.state,key:e.key,idx:t}}function Ym(e,t,n,s){return n===void 0&&(n=null),ul({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Da(t):t,{state:n,key:t&&t.key||s||$P()})}function $u(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Da(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function BP(e,t,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=ir.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(ul({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=ir.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:b})}function f(y,b){l=ir.Push;let v=Ym(g.location,y,b);u=d()+1;let w=C0(v,u),S=g.createHref(v);try{a.pushState(w,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function m(y,b){l=ir.Replace;let v=Ym(g.location,y,b);u=d();let w=C0(v,u),S=g.createHref(v);a.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function p(y){let b=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof y=="string"?y:$u(y);return v=v.replace(/ $/,"%20"),ot(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return l},get location(){return e(r,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(S0,h),c=y,()=>{r.removeEventListener(S0,h),c=null}},createHref(y){return t(r,y)},createURL:p,encodeLocation(y){let b=p(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(y){return a.go(y)}};return g}var k0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(k0||(k0={}));function zP(e,t,n){return n===void 0&&(n="/"),VP(e,t,n)}function VP(e,t,n,s){let r=typeof t=="string"?Da(t):t,i=Bg(r.pathname||"/",n);if(i==null)return null;let a=VN(e);UP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=t_(i);l=JP(a[c],u)}return l}function VN(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ot(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=vr([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),VN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:KP(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of UN(i.path))r(i,a,c)}),t}function UN(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=UN(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function UP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:XP(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const WP=/^:[\w-]+$/,HP=3,qP=2,GP=1,YP=10,QP=-2,E0=e=>e==="*";function KP(e,t){let n=e.split("/"),s=n.length;return n.some(E0)&&(s+=QP),t&&(s+=qP),n.filter(r=>!E0(r)).reduce((r,i)=>r+(WP.test(i)?HP:i===""?GP:YP),s)}function XP(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function JP(e,t,n){let{routesMeta:s}=e,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=ZP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:vr([i,h.pathname]),pathnameBase:i_(vr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=vr([i,h.pathnameBase]))}return a}function ZP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=e_(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function e_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),zN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function t_(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Bg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function n_(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?Da(e):e;return{pathname:n?n.startsWith("/")?n:s_(n,t):t,search:a_(s),hash:o_(r)}}function s_(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function qh(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r_(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zg(e,t){let n=r_(e);return t?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function Vg(e,t,n,s){s===void 0&&(s=!1);let r;typeof e=="string"?r=Da(e):(r=ul({},e),ot(!r.pathname||!r.pathname.includes("?"),qh("?","pathname","search",r)),ot(!r.pathname||!r.pathname.includes("#"),qh("#","pathname","hash",r)),ot(!r.search||!r.search.includes("#"),qh("#","search","hash",r)));let i=e===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=n_(r,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const vr=e=>e.join("/").replace(/\/\/+/g,"/"),i_=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),a_=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,o_=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function l_(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const WN=["post","put","patch","delete"];new Set(WN);const c_=["get",...WN];new Set(c_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dl.apply(this,arguments)}const Ug=x.createContext(null),u_=x.createContext(null),Ir=x.createContext(null),Bd=x.createContext(null),fs=x.createContext({outlet:null,matches:[],isDataRoute:!1}),HN=x.createContext(null);function d_(e,t){let{relative:n}=t===void 0?{}:t;Ta()||ot(!1);let{basename:s,navigator:r}=x.useContext(Ir),{hash:i,pathname:a,search:l}=YN(e,{relative:n}),c=a;return s!=="/"&&(c=a==="/"?s:vr([s,a])),r.createHref({pathname:c,search:l,hash:i})}function Ta(){return x.useContext(Bd)!=null}function ms(){return Ta()||ot(!1),x.useContext(Bd).location}function qN(e){x.useContext(Ir).static||x.useLayoutEffect(e)}function Ln(){let{isDataRoute:e}=x.useContext(fs);return e?k_():h_()}function h_(){Ta()||ot(!1);let e=x.useContext(Ug),{basename:t,future:n,navigator:s}=x.useContext(Ir),{matches:r}=x.useContext(fs),{pathname:i}=ms(),a=JSON.stringify(zg(r,n.v7_relativeSplatPath)),l=x.useRef(!1);return qN(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=Vg(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:vr([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,a,i,e])}const f_=x.createContext(null);function m_(e){let t=x.useContext(fs).outlet;return t&&x.createElement(f_.Provider,{value:e},t)}function GN(){let{matches:e}=x.useContext(fs),t=e[e.length-1];return t?t.params:{}}function YN(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=x.useContext(Ir),{matches:r}=x.useContext(fs),{pathname:i}=ms(),a=JSON.stringify(zg(r,s.v7_relativeSplatPath));return x.useMemo(()=>Vg(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function p_(e,t){return g_(e,t)}function g_(e,t,n,s){Ta()||ot(!1);let{navigator:r}=x.useContext(Ir),{matches:i}=x.useContext(fs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=ms(),d;if(t){var h;let y=typeof t=="string"?Da(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ot(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=zP(e,{pathname:m}),g=w_(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:vr([c,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:vr([c,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,s);return t&&g?x.createElement(Bd.Provider,{value:{location:dl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ir.Pop}},g):g}function x_(){let e=C_(),t=l_(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:r},n):null,null)}const y_=x.createElement(x_,null);class v_ extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(fs.Provider,{value:this.props.routeContext},x.createElement(HN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function b_(e){let{routeContext:t,match:n,children:s}=e,r=x.useContext(Ug);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(fs.Provider,{value:t},s)}function w_(e,t,n,s){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(r=n)==null?void 0:r.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ot(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,p=!1,g=null,y=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||y_,c&&(u<0&&f===0?(E_("route-fallback"),p=!0,y=null):u===f&&(p=!0,y=h.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,f+1)),v=()=>{let w;return m?w=g:p?w=y:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,x.createElement(b_,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?x.createElement(v_,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var QN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(QN||{}),KN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(KN||{});function j_(e){let t=x.useContext(Ug);return t||ot(!1),t}function N_(e){let t=x.useContext(u_);return t||ot(!1),t}function S_(e){let t=x.useContext(fs);return t||ot(!1),t}function XN(e){let t=S_(),n=t.matches[t.matches.length-1];return n.route.id||ot(!1),n.route.id}function C_(){var e;let t=x.useContext(HN),n=N_(),s=XN();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function k_(){let{router:e}=j_(QN.UseNavigateStable),t=XN(KN.UseNavigateStable),n=x.useRef(!1);return qN(()=>{n.current=!0}),x.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,dl({fromRouteId:t},i)))},[e,t])}const D0={};function E_(e,t,n){D0[e]||(D0[e]=!0)}function D_(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Wn(e){let{to:t,replace:n,state:s,relative:r}=e;Ta()||ot(!1);let{future:i,static:a}=x.useContext(Ir),{matches:l}=x.useContext(fs),{pathname:c}=ms(),u=Ln(),d=Vg(t,zg(l,i.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:r}),[u,h,r,n,s]),null}function JN(e){return m_(e.context)}function qe(e){ot(!1)}function T_(e){let{basename:t="/",children:n=null,location:s,navigationType:r=ir.Pop,navigator:i,static:a=!1,future:l}=e;Ta()&&ot(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:i,static:a,future:dl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=Da(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=s,g=x.useMemo(()=>{let y=Bg(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:p},navigationType:r}},[c,d,h,f,m,p,r]);return g==null?null:x.createElement(Ir.Provider,{value:u},x.createElement(Bd.Provider,{children:n,value:g}))}function P_(e){let{children:t,location:n}=e;return p_(Qm(t),n)}new Promise(()=>{});function Qm(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(s,r)=>{if(!x.isValidElement(s))return;let i=[...t,r];if(s.type===x.Fragment){n.push.apply(n,Qm(s.props.children,i));return}s.type!==qe&&ot(!1),!s.props.index||!s.props.children||ot(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=Qm(s.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Km.apply(this,arguments)}function __(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,i;for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function A_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function M_(e,t){return e.button===0&&(!t||t==="_self")&&!A_(e)}function Xm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function R_(e,t){let n=Xm(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}const I_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],O_="6";try{window.__reactRouterVersion=O_}catch{}const L_="startTransition",T0=Qp[L_];function F_(e){let{basename:t,children:n,future:s,window:r}=e,i=x.useRef();i.current==null&&(i.current=FP({window:r,v5Compat:!0}));let a=i.current,[l,c]=x.useState({action:a.action,location:a.location}),{v7_startTransition:u}=s||{},d=x.useCallback(h=>{u&&T0?T0(()=>c(h)):c(h)},[c,u]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.useEffect(()=>D_(s),[s]),x.createElement(T_,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:s})}const $_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rs=x.forwardRef(function(t,n){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=__(t,I_),{basename:m}=x.useContext(Ir),p,g=!1;if(typeof u=="string"&&B_.test(u)&&(p=u,$_))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),N=Bg(S.pathname,m);S.origin===w.origin&&N!=null?u=N+S.search+S.hash:g=!0}catch{}let y=d_(u,{relative:r}),b=z_(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h});function v(w){s&&s(w),w.defaultPrevented||b(w)}return x.createElement("a",Km({},f,{href:p||y,onClick:g||i?s:v,ref:n,target:c}))});var P0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(P0||(P0={}));var _0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_0||(_0={}));function z_(e,t){let{target:n,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Ln(),u=ms(),d=YN(e,{relative:a});return x.useCallback(h=>{if(M_(h,n)){h.preventDefault();let f=s!==void 0?s:$u(u)===$u(d);c(e,{replace:f,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,s,r,n,e,i,a,l])}function V_(e){let t=x.useRef(Xm(e)),n=x.useRef(!1),s=ms(),r=x.useMemo(()=>R_(s.search,n.current?null:t.current),[s.search]),i=Ln(),a=x.useCallback((l,c)=>{const u=Xm(typeof l=="function"?l(r):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,a]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(e,t)=>{const n=x.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>x.createElement("svg",{ref:d,...U_,width:r,height:r,stroke:s,strokeWidth:a?Number(i)*24/Number(r):i,className:["lucide",`lucide-${W_(e)}`,l].join(" "),...u},[...t.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=ee("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ee("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=ee("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=ee("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=ee("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=ee("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ee("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ee("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ee("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ee("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ee("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=ee("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ee("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=ee("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=ee("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ee("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=ee("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ee("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=ee("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ee("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=ee("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=ee("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=ee("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=ee("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=ee("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=ee("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ee("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=ee("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ee("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=ee("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ee("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ee("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),SA=380,CA=520,$0=320,B0=320,z0=600,V0=700,kA=()=>{const[e,t]=x.useState(!1),[n,s]=x.useState([{sender:"ai",text:"Hi! I am your Sales Agent AI. How can I help you today?"}]),[r,i]=x.useState(""),[a,l]=x.useState({width:SA,height:CA}),[c,u]=x.useState(!1),d=x.useRef(null),h=x.useRef(null),f=x.useRef(null);x.useEffect(()=>{e&&f.current&&f.current.scrollIntoView({behavior:"smooth"})},[n,e]),x.useEffect(()=>{const p=y=>{if(!c||!h.current)return;const b=y.clientX-h.current.x,v=y.clientY-h.current.y;l({width:Math.min(Math.max(h.current.width+b,$0),z0),height:Math.min(Math.max(h.current.height+v,B0),V0)})},g=()=>u(!1);return c&&(window.addEventListener("mousemove",p),window.addEventListener("mouseup",g)),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g)}},[c]);const m=async()=>{if(!r.trim())return;const p={sender:"user",text:r};s(g=>[...g,p]),i("");try{const g=await fetch("/agent/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r})});if(!g.ok)throw new Error("Network error");const y=await g.json();s(b=>[...b,{sender:"ai",text:y.reply||"No response from agent."}])}catch{s(y=>[...y,{sender:"ai",text:"Sorry, there was a problem connecting to the agent."}])}};return o.jsxs(o.Fragment,{children:[!e&&o.jsx("button",{className:"fixed bottom-8 right-8 z-50 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg p-4 flex items-center justify-center transition-all",style:{boxShadow:"0 4px 24px 0 rgba(0,0,0,0.18)"},onClick:()=>t(!0),"aria-label":"Open Chat",children:o.jsx(O0,{className:"h-7 w-7"})}),e&&o.jsxs("div",{ref:d,className:"fixed bottom-8 right-8 z-50 bg-white rounded-2xl shadow-2xl flex flex-col border border-gray-200",style:{width:a.width,height:a.height,minWidth:$0,minHeight:B0,maxWidth:z0,maxHeight:V0,boxShadow:"0 8px 32px 0 rgba(0,0,0,0.22)"},children:[o.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-blue-500 rounded-t-2xl",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O0,{className:"h-5 w-5 text-white"}),o.jsx("span",{className:"text-white font-semibold text-lg",children:"Sales Agent AI"}),o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded bg-yellow-400 text-gray-900 font-semibold",title:"This module is in development",children:"In development"})]}),o.jsx("button",{onClick:()=>t(!1),className:"text-white hover:text-gray-200 p-1 rounded-full",children:o.jsx(Fl,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 bg-gray-50",style:{fontFamily:"Inter, sans-serif"},children:[n.map((p,g)=>o.jsx("div",{className:`mb-3 flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:o.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-xl shadow-sm text-base leading-relaxed break-words ${p.sender==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-white text-gray-900 border border-gray-200 rounded-bl-sm"}`,style:{wordBreak:"break-word"},children:p.text})},g)),o.jsx("div",{ref:f})]}),o.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-100 flex items-center gap-2 rounded-b-2xl",children:[o.jsx("input",{type:"text",className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-900 bg-gray-50 placeholder-gray-400 text-base",placeholder:"Type your message...",value:r,onChange:p=>i(p.target.value),onKeyDown:p=>{p.key==="Enter"&&m()},"aria-label":"Type your message",autoFocus:!0}),o.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg p-2 flex items-center justify-center transition-all disabled:opacity-50",onClick:m,disabled:!r.trim(),"aria-label":"Send",children:o.jsx(fa,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"absolute bottom-2 right-2 w-5 h-5 cursor-nwse-resize z-50",style:{userSelect:"none"},onMouseDown:p=>{u(!0),h.current={x:p.clientX,y:p.clientY,width:a.width,height:a.height},p.preventDefault()},title:"Resize",children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:o.jsx("path",{d:"M3 17L17 3M10 17H17V10",stroke:"#60A5FA",strokeWidth:"2",strokeLinecap:"round"})})})]})]})};class EA extends x.Component{constructor(n){super(n);de(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});de(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?o.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:o.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),o.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:o.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),o.jsxs("div",{className:"flex flex-col space-y-3",children:[o.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),o.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function DA({children:e}){return o.jsx(EA,{children:e})}const TA={},U0=e=>{let t;const n=new Set,s=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},r=()=>t,c={setState:s,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(TA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(s,r,c);return c},PA=e=>e?U0(e):U0;var cS={exports:{}},uS={},dS={exports:{}},hS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=x;function _A(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var AA=typeof Object.is=="function"?Object.is:_A,MA=pa.useState,RA=pa.useEffect,IA=pa.useLayoutEffect,OA=pa.useDebugValue;function LA(e,t){var n=t(),s=MA({inst:{value:n,getSnapshot:t}}),r=s[0].inst,i=s[1];return IA(function(){r.value=n,r.getSnapshot=t,Gh(r)&&i({inst:r})},[e,n,t]),RA(function(){return Gh(r)&&i({inst:r}),e(function(){Gh(r)&&i({inst:r})})},[e]),OA(n),n}function Gh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!AA(e,n)}catch{return!0}}function FA(e,t){return t()}var $A=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FA:LA;hS.useSyncExternalStore=pa.useSyncExternalStore!==void 0?pa.useSyncExternalStore:$A;dS.exports=hS;var BA=dS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd=x,zA=BA;function VA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var UA=typeof Object.is=="function"?Object.is:VA,WA=zA.useSyncExternalStore,HA=Wd.useRef,qA=Wd.useEffect,GA=Wd.useMemo,YA=Wd.useDebugValue;uS.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=HA(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=GA(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,UA(d,m))return p;var g=s(m);return r!==void 0&&r(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=WA(e,i[0],i[1]);return qA(function(){a.hasValue=!0,a.value=l},[l]),YA(l),l};cS.exports=uS;var QA=cS.exports;const KA=Wp(QA),fS={},{useDebugValue:XA}=se,{useSyncExternalStoreWithSelector:JA}=KA;let W0=!1;const ZA=e=>e;function eM(e,t=ZA,n){(fS?"production":void 0)!=="production"&&n&&!W0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),W0=!0);const s=JA(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return XA(s),s}const H0=e=>{(fS?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?PA(e):e,n=(s,r)=>eM(t,s,r);return Object.assign(n,t),n},mS=e=>e?H0(e):H0;function tM(e){try{const t=e.split(".")[1];return JSON.parse(atob(t.replace(/-/g,"+").replace(/_/g,"/")))}catch{return{}}}const pS=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("jwt-token");return t&&(e.Authorization=`Bearer ${t}`),e},nM=async(e,t)=>{try{console.log("🔑 Starting sign in process for:",e);const n="http://103.224.243.242:3001/api",s=`${n}/auth/login`;console.log("Login URL:",s);const r=await fetch(s,{method:"POST",headers:pS(),body:JSON.stringify({email:e,password:t})});if(!r.ok){let c="Authentication failed";try{const u=await r.json();u&&u.message&&(c=u.message)}catch{}throw new Error(c)}let i;try{i=await r.json()}catch{throw new Error("Invalid response from server.")}const{token:a,user:l}=i;if(!l||!l.id||!l.email||!a)throw new Error("Invalid user data received from server");return(!l.role||!["admin","sales_agent","operations_manager","operator","support"].includes(l.role))&&(console.warn("⚠️ User role missing or invalid, assigning default role"),l.role="admin"),localStorage.setItem("jwt-token",a),console.log("✅ Authentication successful"),l}catch(n){throw console.error("Error signing in:",n),n}},sM=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:pS()}),localStorage.removeItem("jwt-token")}catch(e){console.error("Error signing out:",e),localStorage.removeItem("jwt-token")}},gS=async()=>{try{const e=localStorage.getItem("jwt-token");if(!e)return null;const t=tM(e);if(t.exp&&t.exp*1e3<Date.now())return localStorage.removeItem("jwt-token"),null;console.log("🔍 getCurrentUser: Decoding JWT token directly");const n={id:t.id,email:t.email,name:t.name,role:t.role};return console.log("✅ getCurrentUser: User from JWT:",JSON.stringify(n,null,2)),!n.id||!n.email||!n.role?(console.error("❌ getCurrentUser: Invalid user data in JWT"),localStorage.removeItem("jwt-token"),null):n}catch(e){return console.error("Error getting current user:",e),localStorage.removeItem("jwt-token"),null}},rM=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},iM=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")},Qe=mS()(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const s=await nM(t,n);if(console.log("🔐 Login successful - User data received:",JSON.stringify(s,null,2)),console.log("🏷️ User role check:",s==null?void 0:s.role),!s||!s.role)throw console.error("❌ User object missing or role undefined:",s),new Error("Invalid user data - role missing");if(!["admin","sales_agent","operations_manager","operator","support"].includes(s.role))throw console.error("❌ Invalid user role:",s.role),new Error(`Invalid user role: ${s.role}`);console.log("✅ User role validation passed:",s.role);const r=localStorage.getItem("jwt-token")||"";e({user:s,token:r,isAuthenticated:!0,error:null}),rM(s,r),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(s){throw e({error:s.message}),s}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await sM(),e({user:null,token:null,isAuthenticated:!1,error:null}),iM(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}));function aM(){var v,w;const[e,t]=x.useState(""),[n,s]=x.useState(""),[r,i]=x.useState(!1),[a,l]=x.useState(null),[c,u]=x.useState("loading"),{login:d,error:h,isAuthenticated:f,user:m}=Qe();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),x.useEffect(()=>{console.log("LoginForm mounted");const S="http://103.224.243.242:3001/api";fetch(`${S}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(N=>(console.log("API health check response:",N.status),u(N.ok?"available":"error"),N.text())).then(N=>{console.log("API health check data:",N)}).catch(N=>{console.error("API health check failed:",N),u("error"),l(`API connection error: ${N.message}. Make sure the API server is running at ${S}`)}),console.log("Environment variables check:",{apiUrl:"http://103.224.243.242:3001/api",dbHost:"crm-db"})},[]);const p=Ln(),g=ms(),y=((w=(v=g.state)==null?void 0:v.from)==null?void 0:w.pathname)||"/dashboard";x.useEffect(()=>{console.log("🔍 LoginForm useEffect - Authentication check:",{isAuthenticated:f,user:m==null?void 0:m.name}),f&&m&&(console.log("✅ User is authenticated, navigating to:",y),p(y,{replace:!0}))},[f,m,p,y]),x.useEffect(()=>{g.pathname==="/login"&&localStorage.removeItem("jwt-token")},[g.pathname]);const b=async S=>{if(S.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log("🔑 Login attempt for:",e);try{const N="http://103.224.243.242:3001/api";try{const k=await fetch(`${N}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok)throw console.error("API health check failed before login attempt:",await k.text()),u("error"),new Error(`API server is not responding correctly. Status: ${k.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(k){throw console.error("Failed to connect to API:",k),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}console.log("🔐 Calling auth store login..."),await d(e,n),console.log("✅ Login attempt successful, auth state should be updated"),setTimeout(()=>{var j,C;const k=Qe.getState();console.log("🔍 Current auth state after login:",{isAuthenticated:k.isAuthenticated,user:(j=k.user)==null?void 0:j.name,userRole:(C=k.user)==null?void 0:C.role,token:k.token?"Present":"Missing",fullUser:k.user}),k.isAuthenticated&&k.user?(console.log("🚀 Forcing navigation to dashboard..."),console.log("👤 User object before navigation:",JSON.stringify(k.user,null,2)),p("/dashboard",{replace:!0})):console.log("❌ Auth state not updated properly, user may need to refresh")},500)}catch(N){console.error("Login error:",N),N instanceof Error&&(N.message.includes("<!DOCTYPE")||N.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://103.224.243.242:3001/api.`):(N.message.includes("NetworkError")||N.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),s("")}finally{i(!1)}};if(a)return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),o.jsx("p",{className:"text-gray-700 mb-4",children:a}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:o.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),o.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",o.jsx("br",{}),"API URL: ","http://103.224.243.242:3001/api"]}),o.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[o.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"Make sure the API server is running"}),o.jsx("li",{children:"Check your .env file configuration"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsx("li",{children:"Check browser console for network errors"})]})]}),o.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsx("div",{children:o.jsx("input",{id:"email",name:"email",type:"email",value:e,onChange:S=>t(S.target.value),required:!0,autoComplete:"email",placeholder:"Email address",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})}),o.jsx("div",{children:o.jsx("input",{id:"password",name:"password",type:"password",value:n,onChange:S=>s(S.target.value),required:!0,autoComplete:"current-password",placeholder:"Password",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})})]}),o.jsx("div",{className:"flex justify-end text-xs mt-1",children:o.jsxs("a",{href:"#",className:"text-blue-700 hover:underline",children:["Forget password ",o.jsx("span",{className:"font-bold",children:"Click here"})]})}),o.jsx("button",{type:"submit",disabled:r,className:"w-full h-12 bg-black text-white rounded-md text-lg font-semibold mt-2 transition-colors duration-150 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-50",children:r?"Logging in...":"Login Now"}),h&&o.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[o.jsx(ji,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:h})]})]})}catch(S){return console.error("Error rendering login form:",S),l(`Error rendering login form: ${S instanceof Error?S.message:String(S)}`),null}}function oM({error:e,resetError:t}){return o.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:o.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),o.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),o.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:o.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),o.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class lM extends x.Component{constructor(n){super(n);de(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?o.jsx(oM,{error:this.state.error,resetError:this.resetError}):this.props.children}}function cM(){const{isAuthenticated:e}=Qe();return e?o.jsx(Wn,{to:"/dashboard"}):o.jsxs("div",{className:"h-screen overflow-hidden flex flex-col lg:flex-row bg-[#F2EEE7]",children:[o.jsxs("div",{className:"relative flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-[#385197] to-[#404040] text-white px-8 py-12 overflow-hidden",children:[o.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M0 800 Q400 400 800 800",stroke:"white",strokeWidth:"2"}),o.jsx("path",{d:"M0 600 Q400 200 800 600",stroke:"white",strokeWidth:"1.5"}),o.jsx("path",{d:"M0 400 Q400 0 800 400",stroke:"white",strokeWidth:"1"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col items-start max-w-lg w-full",children:[o.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight flex items-center gap-2",children:[o.jsx("span",{className:"text-white drop-shadow-lg",children:"Hello,"}),o.jsx("span",{className:"text-[#FFCC3F] drop-shadow-[0_2px_8px_rgba(255,204,63,0.7)]",children:"ASP Cranes!"}),o.jsx("span",{className:"inline-block text-5xl ml-2 align-middle",children:"👋"})]}),o.jsx("p",{className:"text-xl md:text-2xl font-bold mb-8 text-white drop-shadow-lg tracking-wide",children:"The all-in-one platform to supercharge your heavy equipment rental business."}),o.jsxs("p",{className:"text-xs opacity-60 mt-12",children:["© ",new Date().getFullYear()," ASP Cranes. All rights reserved."]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center items-center bg-[#F2EEE7] px-6",children:o.jsxs("div",{className:"w-full max-w-md mx-auto relative",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/10 backdrop-blur-xl border border-[#CAC0B0]/60 shadow-2xl",style:{zIndex:1}}),o.jsxs("div",{className:"relative z-10 p-10 flex flex-col",children:[o.jsxs("h2",{className:"text-2xl font-bold text-[#404040] mb-2 flex items-center gap-2",children:["Welcome Back! ",o.jsx("span",{className:"text-[#FFCC3F]",children:"●"})]}),o.jsxs("p",{className:"text-[#385197] mb-6 text-sm",children:["Don't have an account? ",o.jsx("a",{href:"#",className:"text-[#FFCC3F] font-medium hover:underline",children:"Create a new account now"}),".",o.jsx("br",{}),"It's FREE! Takes less than a minute."]}),o.jsx(aM,{})]}),o.jsxs("svg",{className:"absolute -top-8 -right-8 w-32 h-32 opacity-30",viewBox:"0 0 100 100",fill:"none",children:[o.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"#FFCC3F",strokeWidth:"2"}),o.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#385197",strokeWidth:"1"})]}),o.jsx("svg",{className:"absolute -bottom-8 -left-8 w-24 h-24 opacity-20",viewBox:"0 0 100 100",fill:"none",children:o.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"20",stroke:"#404040",strokeWidth:"2"})})]})})]})}function uM(){return x.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://103.224.243.242:3001/api")},[]),o.jsx(lM,{children:o.jsx(cM,{})})}const xS=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Hd=x.createContext({}),qd=x.createContext(null),Gd=typeof document<"u",Yg=Gd?x.useLayoutEffect:x.useEffect,yS=x.createContext({strict:!1}),Qg=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),dM="framerAppearId",vS="data-"+Qg(dM);function hM(e,t,n,s){const{visualElement:r}=x.useContext(Hd),i=x.useContext(yS),a=x.useContext(qd),l=x.useContext(xS).reducedMotion,c=x.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(n,a)});const d=x.useRef(!!(n[vS]&&!window.HandoffComplete));return Yg(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Yi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function fM(e,t,n){return x.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Yi(n)&&(n.current=s))},[t])}function fl(e){return typeof e=="string"||Array.isArray(e)}function Yd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Kg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xg=["initial",...Kg];function Qd(e){return Yd(e.animate)||Xg.some(t=>fl(e[t]))}function bS(e){return!!(Qd(e)||e.variants)}function mM(e,t){if(Qd(e)){const{initial:n,animate:s}=e;return{initial:n===!1||fl(n)?n:void 0,animate:fl(s)?s:void 0}}return e.inherit!==!1?t:{}}function pM(e){const{initial:t,animate:n}=mM(e,x.useContext(Hd));return x.useMemo(()=>({initial:t,animate:n}),[q0(t),q0(n)])}function q0(e){return Array.isArray(e)?e.join(" "):e}const G0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ml={};for(const e in G0)ml[e]={isEnabled:t=>G0[e].some(n=>!!t[n])};function gM(e){for(const t in e)ml[t]={...ml[t],...e[t]}}const Jg=x.createContext({}),wS=x.createContext({}),xM=Symbol.for("motionComponentSymbol");function yM({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){e&&gM(e);function i(l,c){let u;const d={...x.useContext(xS),...l,layoutId:vM(l)},{isStatic:h}=d,f=pM(l),m=s(l,h);if(!h&&Gd){f.visualElement=hM(r,m,d,t);const p=x.useContext(wS),g=x.useContext(yS).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,e,p))}return x.createElement(Hd.Provider,{value:f},u&&f.visualElement?x.createElement(u,{visualElement:f.visualElement,...d}):null,n(r,l,fM(m,f.visualElement,c),m,h,f.visualElement))}const a=x.forwardRef(i);return a[xM]=r,a}function vM({layoutId:e}){const t=x.useContext(Jg).id;return t&&e!==void 0?t+"-"+e:e}function bM(e){function t(s,r={}){return yM(e(s,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const wM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zg(e){return typeof e!="string"||e.includes("-")?!1:!!(wM.indexOf(e)>-1||/[A-Z]/.test(e))}const zu={};function jM(e){Object.assign(zu,e)}const $l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Si=new Set($l);function jS(e,{layout:t,layoutId:n}){return Si.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!zu[e]||e==="opacity")}const nn=e=>!!(e&&e.getVelocity),NM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},SM=$l.length;function CM(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,r){let i="";for(let a=0;a<SM;a++){const l=$l[a];if(e[l]!==void 0){const c=NM[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(e,s?"":i):n&&s&&(i="none"),i}const NS=e=>t=>typeof t=="string"&&t.startsWith(e),SS=NS("--"),ep=NS("var(--"),kM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,EM=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Dr=(e,t,n)=>Math.min(Math.max(n,e),t),Ci={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Lo={...Ci,transform:e=>Dr(0,1,e)},gc={...Ci,default:1},Fo=e=>Math.round(e*1e5)/1e5,Kd=/(-)?([\d]*\.?[\d])+/g,CS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,DM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Bl(e){return typeof e=="string"}const zl=e=>({test:t=>Bl(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Qs=zl("deg"),ls=zl("%"),we=zl("px"),TM=zl("vh"),PM=zl("vw"),Y0={...ls,parse:e=>ls.parse(e)/100,transform:e=>ls.transform(e*100)},Q0={...Ci,transform:Math.round},kS={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:Qs,rotateX:Qs,rotateY:Qs,rotateZ:Qs,scale:gc,scaleX:gc,scaleY:gc,scaleZ:gc,skew:Qs,skewX:Qs,skewY:Qs,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Lo,originX:Y0,originY:Y0,originZ:we,zIndex:Q0,fillOpacity:Lo,strokeOpacity:Lo,numOctaves:Q0};function ex(e,t,n,s){const{style:r,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(SS(h)){i[h]=f;continue}const m=kS[h],p=EM(f,m);if(Si.has(h)){if(c=!0,a[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):r[h]=p}if(t.transform||(c||s?r.transform=CM(e.transform,n,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;r.transformOrigin=`${h} ${f} ${m}`}}const tx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ES(e,t,n){for(const s in t)!nn(t[s])&&!jS(s,n)&&(e[s]=t[s])}function _M({transformTemplate:e},t,n){return x.useMemo(()=>{const s=tx();return ex(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function AM(e,t,n){const s=e.style||{},r={};return ES(r,s,e),Object.assign(r,_M(e,t,n)),e.transformValues?e.transformValues(r):r}function MM(e,t,n){const s={},r=AM(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const RM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RM.has(e)}let DS=e=>!Vu(e);function IM(e){e&&(DS=t=>t.startsWith("on")?!Vu(t):e(t))}try{IM(require("@emotion/is-prop-valid").default)}catch{}function OM(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(DS(r)||n===!0&&Vu(r)||!t&&!Vu(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function K0(e,t,n){return typeof e=="string"?e:we.transform(t+n*e)}function LM(e,t,n){const s=K0(t,e.x,e.width),r=K0(n,e.y,e.height);return`${s} ${r}`}const FM={offset:"stroke-dashoffset",array:"stroke-dasharray"},$M={offset:"strokeDashoffset",array:"strokeDasharray"};function BM(e,t,n=1,s=0,r=!0){e.pathLength=1;const i=r?FM:$M;e[i.offset]=we.transform(-s);const a=we.transform(t),l=we.transform(n);e[i.array]=`${a} ${l}`}function nx(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(ex(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:g}=e;m.transform&&(g&&(p.transform=m.transform),delete m.transform),g&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=LM(g,r!==void 0?r:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),a!==void 0&&BM(m,a,l,c,!1)}const TS=()=>({...tx(),attrs:{}}),sx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function zM(e,t,n,s){const r=x.useMemo(()=>{const i=TS();return nx(i,t,{enableHardwareAcceleration:!1},sx(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};ES(i,e.style,e),r.style={...i,...r.style}}return r}function VM(e=!1){return(n,s,r,{latestValues:i},a)=>{const c=(Zg(n)?zM:MM)(s,i,a,n),d={...OM(s,typeof n=="string",e),...c,ref:r},{children:h}=s,f=x.useMemo(()=>nn(h)?h.get():h,[h]);return x.createElement(n,{...d,children:f})}}function PS(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const i in n)e.style.setProperty(i,n[i])}const _S=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AS(e,t,n,s){PS(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(_S.has(r)?r:Qg(r),t.attrs[r])}function rx(e,t){const{style:n}=e,s={};for(const r in n)(nn(n[r])||t.style&&nn(t.style[r])||jS(r,e))&&(s[r]=n[r]);return s}function MS(e,t){const n=rx(e,t);for(const s in e)if(nn(e[s])||nn(t[s])){const r=$l.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=e[s]}return n}function ix(e,t,n,s={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,r)),t}function RS(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const Uu=e=>Array.isArray(e),UM=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),WM=e=>Uu(e)?e[e.length-1]||0:e;function su(e){const t=nn(e)?e.get():e;return UM(t)?t.toValue():t}function HM({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,r,i){const a={latestValues:qM(s,r,i,e),renderState:t()};return n&&(a.mount=l=>n(s,l,a)),a}const IS=e=>(t,n)=>{const s=x.useContext(Hd),r=x.useContext(qd),i=()=>HM(e,t,s,r);return n?i():RS(i)};function qM(e,t,n,s){const r={},i=s(e,{});for(const f in i)r[f]=su(i[f]);let{initial:a,animate:l}=e;const c=Qd(e),u=bS(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Yd(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=ix(e,m);if(!p)return;const{transitionEnd:g,transition:y,...b}=p;for(const v in b){let w=b[v];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(r[v]=w)}for(const v in g)r[v]=g[v]}),r}const it=e=>e;class X0{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function GM(e){let t=new X0,n=new X0,s=0,r=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?t:n;return u&&a.add(c),f.add(c)&&h&&r&&(s=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let u=0;u<s;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}r=!1,i&&(i=!1,l.process(c))}};return l}const xc=["prepare","read","update","preRender","render","postRender"],YM=40;function QM(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=xc.reduce((h,f)=>(h[f]=GM(()=>n=!0),h),{}),a=h=>i[h].process(r),l=()=>{const h=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,YM),1),r.timestamp=h,r.isProcessing=!0,xc.forEach(a),r.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,r.isProcessing||e(l)};return{schedule:xc.reduce((h,f)=>{const m=i[f];return h[f]=(p,g=!1,y=!1)=>(n||c(),m.schedule(p,g,y)),h},{}),cancel:h=>xc.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:Be,cancel:Bs,state:Pt,steps:Yh}=QM(typeof requestAnimationFrame<"u"?requestAnimationFrame:it,!0),KM={useVisualState:IS({scrapeMotionValuesFromProps:MS,createRenderState:TS,onMount:(e,t,{renderState:n,latestValues:s})=>{Be.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Be.render(()=>{nx(n,s,{enableHardwareAcceleration:!1},sx(t.tagName),e.transformTemplate),AS(t,n)})}})},XM={useVisualState:IS({scrapeMotionValuesFromProps:rx,createRenderState:tx})};function JM(e,{forwardMotionProps:t=!1},n,s){return{...Zg(e)?KM:XM,preloadedFeatures:n,useRender:VM(t),createVisualElement:s,Component:e}}function Ds(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const OS=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Xd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ZM=e=>t=>OS(t)&&e(t,Xd(t));function As(e,t,n,s){return Ds(e,t,ZM(n),s)}const eR=(e,t)=>n=>t(e(n)),wr=(...e)=>e.reduce(eR);function LS(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const J0=LS("dragHorizontal"),Z0=LS("dragVertical");function FS(e){let t=!1;if(e==="y")t=Z0();else if(e==="x")t=J0();else{const n=J0(),s=Z0();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function $S(){const e=FS(!0);return e?(e(),!1):!0}class Or{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ev(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),r=(i,a)=>{if(i.pointerType==="touch"||$S())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&Be.update(()=>l[s](i,a))};return As(e.current,n,r,{passive:!e.getProps()[s]})}class tR extends Or{mount(){this.unmount=wr(ev(this.node,!0),ev(this.node,!1))}unmount(){}}class nR extends Or{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wr(Ds(this.node.current,"focus",()=>this.onFocus()),Ds(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const BS=(e,t)=>t?e===t?!0:BS(e,t.parentElement):!1;function Qh(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Xd(n))}class sR extends Or{constructor(){super(...arguments),this.removeStartListeners=it,this.removeEndListeners=it,this.removeAccessibleListeners=it,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=As(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Be.update(()=>{!h&&!BS(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),a=As(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=wr(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Qh("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Be.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Ds(this.node.current,"keyup",a),Qh("down",(l,c)=>{this.startPress(l,c)})},n=Ds(this.node.current,"keydown",t),s=()=>{this.isPressing&&Qh("cancel",(i,a)=>this.cancelPress(i,a))},r=Ds(this.node.current,"blur",s);this.removeAccessibleListeners=wr(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Be.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$S()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Be.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=As(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Ds(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=wr(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const tp=new WeakMap,Kh=new WeakMap,rR=e=>{const t=tp.get(e.target);t&&t(e)},iR=e=>{e.forEach(rR)};function aR({root:e,...t}){const n=e||document;Kh.has(n)||Kh.set(n,{});const s=Kh.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(iR,{root:e,...t})),s[r]}function oR(e,t,n){const s=aR(t);return tp.set(e,n),s.observe(e),()=>{tp.delete(e),s.unobserve(e)}}const lR={some:0,all:1};class cR extends Or{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:lR[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return oR(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(uR(t,n))&&this.startObserver()}unmount(){}}function uR({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const dR={inView:{Feature:cR},tap:{Feature:sR},focus:{Feature:nR},hover:{Feature:tR}};function zS(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function hR(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function fR(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function Jd(e,t,n){const s=e.getProps();return ix(s,t,n!==void 0?n:s.custom,hR(e),fR(e))}let ax=it;const li=e=>e*1e3,Ms=e=>e/1e3,mR={current:!1},VS=e=>Array.isArray(e)&&typeof e[0]=="number";function US(e){return!!(!e||typeof e=="string"&&WS[e]||VS(e)||Array.isArray(e)&&e.every(US))}const wo=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,WS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wo([0,.65,.55,1]),circOut:wo([.55,0,1,.45]),backIn:wo([.31,.01,.66,-.59]),backOut:wo([.33,1.53,.69,.99])};function HS(e){if(e)return VS(e)?wo(e):Array.isArray(e)?e.map(HS):WS[e]}function pR(e,t,n,{delay:s=0,duration:r,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=HS(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function gR(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const qS=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,xR=1e-7,yR=12;function vR(e,t,n,s,r){let i,a,l=0;do a=t+(n-t)/2,i=qS(a,s,r)-e,i>0?n=a:t=a;while(Math.abs(i)>xR&&++l<yR);return a}function Vl(e,t,n,s){if(e===t&&n===s)return it;const r=i=>vR(i,0,1,e,n);return i=>i===0||i===1?i:qS(r(i),t,s)}const bR=Vl(.42,0,1,1),wR=Vl(0,0,.58,1),GS=Vl(.42,0,.58,1),jR=e=>Array.isArray(e)&&typeof e[0]!="number",YS=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,QS=e=>t=>1-e(1-t),ox=e=>1-Math.sin(Math.acos(e)),KS=QS(ox),NR=YS(ox),XS=Vl(.33,1.53,.69,.99),lx=QS(XS),SR=YS(lx),CR=e=>(e*=2)<1?.5*lx(e):.5*(2-Math.pow(2,-10*(e-1))),kR={linear:it,easeIn:bR,easeInOut:GS,easeOut:wR,circIn:ox,circInOut:NR,circOut:KS,backIn:lx,backInOut:SR,backOut:XS,anticipate:CR},tv=e=>{if(Array.isArray(e)){ax(e.length===4);const[t,n,s,r]=e;return Vl(t,n,s,r)}else if(typeof e=="string")return kR[e];return e},cx=(e,t)=>n=>!!(Bl(n)&&DM.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),JS=(e,t,n)=>s=>{if(!Bl(s))return s;const[r,i,a,l]=s.match(Kd);return{[e]:parseFloat(r),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},ER=e=>Dr(0,255,e),Xh={...Ci,transform:e=>Math.round(ER(e))},si={test:cx("rgb","red"),parse:JS("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Xh.transform(e)+", "+Xh.transform(t)+", "+Xh.transform(n)+", "+Fo(Lo.transform(s))+")"};function DR(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const np={test:cx("#"),parse:DR,transform:si.transform},Qi={test:cx("hsl","hue"),parse:JS("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+ls.transform(Fo(t))+", "+ls.transform(Fo(n))+", "+Fo(Lo.transform(s))+")"},zt={test:e=>si.test(e)||np.test(e)||Qi.test(e),parse:e=>si.test(e)?si.parse(e):Qi.test(e)?Qi.parse(e):np.parse(e),transform:e=>Bl(e)?e:e.hasOwnProperty("red")?si.transform(e):Qi.transform(e)},Xe=(e,t,n)=>-n*e+n*t+e;function Jh(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function TR({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,i=0,a=0;if(!t)r=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;r=Jh(c,l,e+1/3),i=Jh(c,l,e),a=Jh(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}const Zh=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},PR=[np,si,Qi],_R=e=>PR.find(t=>t.test(e));function nv(e){const t=_R(e);let n=t.parse(e);return t===Qi&&(n=TR(n)),n}const ZS=(e,t)=>{const n=nv(e),s=nv(t),r={...n};return i=>(r.red=Zh(n.red,s.red,i),r.green=Zh(n.green,s.green,i),r.blue=Zh(n.blue,s.blue,i),r.alpha=Xe(n.alpha,s.alpha,i),si.transform(r))};function AR(e){var t,n;return isNaN(e)&&Bl(e)&&(((t=e.match(Kd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(CS))===null||n===void 0?void 0:n.length)||0)>0}const eC={regex:kM,countKey:"Vars",token:"${v}",parse:it},tC={regex:CS,countKey:"Colors",token:"${c}",parse:zt.parse},nC={regex:Kd,countKey:"Numbers",token:"${n}",parse:Ci.parse};function ef(e,{regex:t,countKey:n,token:s,parse:r}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...i.map(r)))}function Wu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ef(n,eC),ef(n,tC),ef(n,nC),n}function sC(e){return Wu(e).values}function rC(e){const{values:t,numColors:n,numVars:s,tokenised:r}=Wu(e),i=t.length;return a=>{let l=r;for(let c=0;c<i;c++)c<s?l=l.replace(eC.token,a[c]):c<s+n?l=l.replace(tC.token,zt.transform(a[c])):l=l.replace(nC.token,Fo(a[c]));return l}}const MR=e=>typeof e=="number"?0:e;function RR(e){const t=sC(e);return rC(e)(t.map(MR))}const Tr={test:AR,parse:sC,createTransformer:rC,getAnimatableNone:RR},iC=(e,t)=>n=>`${n>0?t:e}`;function aC(e,t){return typeof e=="number"?n=>Xe(e,t,n):zt.test(e)?ZS(e,t):e.startsWith("var(")?iC(e,t):lC(e,t)}const oC=(e,t)=>{const n=[...e],s=n.length,r=e.map((i,a)=>aC(i,t[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}},IR=(e,t)=>{const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=aC(e[r],t[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}},lC=(e,t)=>{const n=Tr.createTransformer(t),s=Wu(e),r=Wu(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?wr(oC(s.values,r.values),n):iC(e,t)},pl=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},sv=(e,t)=>n=>Xe(e,t,n);function OR(e){return typeof e=="number"?sv:typeof e=="string"?zt.test(e)?ZS:lC:Array.isArray(e)?oC:typeof e=="object"?IR:sv}function LR(e,t,n){const s=[],r=n||OR(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=r(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||it:t;l=wr(c,l)}s.push(l)}return s}function cC(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const i=e.length;if(ax(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=LR(t,s,r),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=pl(e[d],e[d+1],u);return a[d](h)};return n?u=>c(Dr(e[0],e[i-1],u)):c}function FR(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=pl(0,t,s);e.push(Xe(n,1,r))}}function $R(e){const t=[0];return FR(t,e.length-1),t}function BR(e,t){return e.map(n=>n*t)}function zR(e,t){return e.map(()=>t||GS).splice(0,e.length-1)}function Hu({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=jR(s)?s.map(tv):tv(s),i={done:!1,value:t[0]},a=BR(n&&n.length===t.length?n:$R(t),e),l=cC(a,t,{ease:Array.isArray(r)?r:zR(t,r)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function uC(e,t){return t?e*(1e3/t):0}const VR=5;function dC(e,t,n){const s=Math.max(t-VR,0);return uC(n-e(s),t-s)}const tf=.001,UR=.01,WR=10,HR=.05,qR=1;function GR({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let r,i,a=1-t;a=Dr(HR,qR,a),e=Dr(UR,WR,Ms(e)),a<1?(r=u=>{const d=u*a,h=d*e,f=d-n,m=sp(u,a),p=Math.exp(-h);return tf-f/m*p},i=u=>{const h=u*a*e,f=h*n+n,m=Math.pow(a,2)*Math.pow(u,2)*e,p=Math.exp(-h),g=sp(Math.pow(u,2),a);return(-r(u)+tf>0?-1:1)*((f-m)*p)/g}):(r=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-tf+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=QR(r,i,l);if(e=li(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:e}}}const YR=12;function QR(e,t,n){let s=n;for(let r=1;r<YR;r++)s=s-e(s)/t(s);return s}function sp(e,t){return e*Math.sqrt(1-t*t)}const KR=["duration","bounce"],XR=["stiffness","damping","mass"];function rv(e,t){return t.some(n=>e[n]!==void 0)}function JR(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!rv(e,XR)&&rv(e,KR)){const n=GR(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function hC({keyframes:e,restDelta:t,restSpeed:n,...s}){const r=e[0],i=e[e.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=JR({...s,velocity:-Ms(s.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-r,y=Ms(Math.sqrt(l/u)),b=Math.abs(g)<5;n||(n=b?.01:2),t||(t=b?.005:.5);let v;if(p<1){const w=sp(y,p);v=S=>{const N=Math.exp(-p*y*S);return i-N*((m+p*y*g)/w*Math.sin(w*S)+g*Math.cos(w*S))}}else if(p===1)v=w=>i-Math.exp(-y*w)*(g+(m+y*g)*w);else{const w=y*Math.sqrt(p*p-1);v=S=>{const N=Math.exp(-p*y*S),k=Math.min(w*S,300);return i-N*((m+p*y*g)*Math.sinh(k)+w*g*Math.cosh(k))/w}}return{calculatedDuration:f&&d||null,next:w=>{const S=v(w);if(f)a.done=w>=d;else{let N=m;w!==0&&(p<1?N=dC(v,w,S):N=0);const k=Math.abs(N)<=n,j=Math.abs(i-S)<=t;a.done=k&&j}return a.value=a.done?i:S,a}}}function iv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=n*t;const y=h+g,b=a===void 0?y:a(y);b!==y&&(g=b-h);const v=C=>-g*Math.exp(-C/s),w=C=>b+v(C),S=C=>{const D=v(C),E=w(C);f.done=Math.abs(D)<=u,f.value=f.done?b:E};let N,k;const j=C=>{m(f.value)&&(N=C,k=hC({keyframes:[f.value,p(f.value)],velocity:dC(w,C,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:C=>{let D=!1;return!k&&N===void 0&&(D=!0,S(C),j(C)),N!==void 0&&C>N?k.next(C-N):(!D&&S(C),f)}}}const ZR=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Be.update(t,!0),stop:()=>Bs(t),now:()=>Pt.isProcessing?Pt.timestamp:performance.now()}},av=2e4;function ov(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<av;)t+=n,s=e.next(t);return t>=av?1/0:t}const eI={decay:iv,inertia:iv,tween:Hu,keyframes:Hu,spring:hC};function qu({autoplay:e=!0,delay:t=0,driver:n=ZR,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,g,y;const b=()=>{y=new Promise(H=>{g=H})};b();let v;const w=eI[r]||Hu;let S;w!==Hu&&typeof s[0]!="number"&&(S=cC([0,100],s,{clamp:!1}),s=[0,100]);const N=w({...f,keyframes:s});let k;l==="mirror"&&(k=w({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let j="idle",C=null,D=null,E=null;N.calculatedDuration===null&&i&&(N.calculatedDuration=ov(N));const{calculatedDuration:O}=N;let F=1/0,L=1/0;O!==null&&(F=O+a,L=F*(i+1)-a);let P=0;const B=H=>{if(D===null)return;m>0&&(D=Math.min(D,H)),m<0&&(D=Math.min(H-L/m,D)),C!==null?P=C:P=Math.round(H-D)*m;const Z=P-t*(m>=0?1:-1),oe=m>=0?Z<0:Z>L;P=Math.max(Z,0),j==="finished"&&C===null&&(P=L);let ue=P,ve=N;if(i){const G=Math.min(P,L)/F;let ie=Math.floor(G),_=G%1;!_&&G>=1&&(_=1),_===1&&ie--,ie=Math.min(ie,i+1),!!(ie%2)&&(l==="reverse"?(_=1-_,a&&(_-=a/F)):l==="mirror"&&(ve=k)),ue=Dr(0,1,_)*F}const Ne=oe?{done:!1,value:s[0]}:ve.next(ue);S&&(Ne.value=S(Ne.value));let{done:A}=Ne;!oe&&O!==null&&(A=m>=0?P>=L:P<=0);const q=C===null&&(j==="finished"||j==="running"&&A);return h&&h(Ne.value),q&&T(),Ne},V=()=>{v&&v.stop(),v=void 0},R=()=>{j="idle",V(),g(),b(),D=E=null},T=()=>{j="finished",d&&d(),V(),g()},M=()=>{if(p)return;v||(v=n(B));const H=v.now();c&&c(),C!==null?D=H-C:(!D||j==="finished")&&(D=H),j==="finished"&&b(),E=D,C=null,j="running",v.start()};e&&M();const U={then(H,Z){return y.then(H,Z)},get time(){return Ms(P)},set time(H){H=li(H),P=H,C!==null||!v||m===0?C=H:D=v.now()-H/m},get duration(){const H=N.calculatedDuration===null?ov(N):N.calculatedDuration;return Ms(H)},get speed(){return m},set speed(H){H===m||!v||(m=H,U.time=Ms(P))},get state(){return j},play:M,pause:()=>{j="paused",C=P},stop:()=>{p=!0,j!=="idle"&&(j="idle",u&&u(),R())},cancel:()=>{E!==null&&B(E),R()},complete:()=>{j="finished"},sample:H=>(D=0,B(H))};return U}function tI(e){let t;return()=>(t===void 0&&(t=e()),t)}const nI=tI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sI=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),yc=10,rI=2e4,iI=(e,t)=>t.type==="spring"||e==="backgroundColor"||!US(t.ease);function aI(e,t,{onUpdate:n,onComplete:s,...r}){if(!(nI()&&sI.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=r;if(iI(t,r)){const w=qu({...r,repeat:0,delay:0});let S={done:!1,value:h[0]};const N=[];let k=0;for(;!S.done&&k<rI;)S=w.sample(k),N.push(S.value),k+=yc;p=void 0,h=N,f=k-yc,m="linear"}const g=pR(e.owner.current,t,h,{...r,duration:f,ease:m,times:p}),y=()=>{u=!1,g.cancel()},b=()=>{u=!0,Be.update(y),l(),d()};return g.onfinish=()=>{u||(e.set(gR(h,r)),s&&s(),b())},{then(w,S){return c.then(w,S)},attachTimeline(w){return g.timeline=w,g.onfinish=null,it},get time(){return Ms(g.currentTime||0)},set time(w){g.currentTime=li(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return Ms(f)},play:()=>{a||(g.play(),Bs(y))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const S=qu({...r,autoplay:!1});e.setWithVelocity(S.sample(w-yc).value,S.sample(w).value,yc)}b()},complete:()=>{u||g.finish()},cancel:b}}function oI({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const r=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:it,pause:it,stop:it,then:i=>(i(),Promise.resolve()),cancel:it,complete:it});return t?qu({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const lI={type:"spring",stiffness:500,damping:25,restSpeed:10},cI=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),uI={type:"keyframes",duration:.8},dI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hI=(e,{keyframes:t})=>t.length>2?uI:Si.has(e)?e.startsWith("scale")?cI(t[1]):lI:dI,rp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Tr.test(t)||t==="0")&&!t.startsWith("url(")),fI=new Set(["brightness","contrast","saturate","opacity"]);function mI(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(Kd)||[];if(!s)return e;const r=n.replace(s,"");let i=fI.has(t)?1:0;return s!==n&&(i*=100),t+"("+i+r+")"}const pI=/([a-z-]*)\(.*?\)/g,ip={...Tr,getAnimatableNone:e=>{const t=e.match(pI);return t?t.map(mI).join(" "):e}},gI={...kS,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:ip,WebkitFilter:ip},ux=e=>gI[e];function fC(e,t){let n=ux(e);return n!==ip&&(n=Tr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const mC=e=>/^0[^.\s]+$/.test(e);function xI(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||mC(e)}function yI(e,t,n,s){const r=rp(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=s.from!==void 0?s.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),xI(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=fC(t,l)}return i}function vI({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function dx(e,t){return e[t]||e.default||e}const bI={skipAnimations:!1},hx=(e,t,n,s={})=>r=>{const i=dx(s,e)||{},a=i.delay||s.delay||0;let{elapsed:l=0}=s;l=l-li(a);const c=yI(t,e,n,i),u=c[0],d=c[c.length-1],h=rp(e,u),f=rp(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(vI(i)||(m={...m,...hI(e,m)}),m.duration&&(m.duration=li(m.duration)),m.repeatDelay&&(m.repeatDelay=li(m.repeatDelay)),!h||!f||mR.current||i.type===!1||bI.skipAnimations)return oI(m);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=aI(t,e,m);if(p)return p}return qu(m)};function Gu(e){return!!(nn(e)&&e.add)}const pC=e=>/^\-?\d*\.?\d+$/.test(e);function fx(e,t){e.indexOf(t)===-1&&e.push(t)}function mx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class px{constructor(){this.subscriptions=[]}add(t){return fx(this.subscriptions,t),()=>mx(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wI=e=>!isNaN(parseFloat(e));class jI{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:a}=Pt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Be.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Be.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=wI(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new px);const s=this.events[t].add(n);return t==="change"?()=>{s(),Be.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?uC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ga(e,t){return new jI(e,t)}const gC=e=>t=>t.test(e),NI={test:e=>e==="auto",parse:e=>e},xC=[Ci,we,ls,Qs,PM,TM,NI],Ja=e=>xC.find(gC(e)),SI=[...xC,zt,Tr],CI=e=>SI.find(gC(e));function kI(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ga(n))}function EI(e,t){const n=Jd(e,t);let{transitionEnd:s={},transition:r={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...s};for(const a in i){const l=WM(i[a]);kI(e,a,l)}}function DI(e,t,n){var s,r;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(pC(d)||mC(d))?d=parseFloat(d):!CI(d)&&Tr.test(u)&&(d=fC(c,u)),e.addValue(c,ga(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function TI(e,t){return t?(t[e]||t.default||t).from:void 0}function PI(e,t,n){const s={};for(const r in e){const i=TI(r,t);if(i!==void 0)s[r]=i;else{const a=n.getValue(r);a&&(s[r]=a.get())}}return s}function _I({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function AI(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function yC(e,t,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(i=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&_I(d,h))continue;const p={delay:n,elapsed:0,...dx(i||{},h)};if(window.HandoffAppearAnimations){const b=e.getProps()[vS];if(b){const v=window.HandoffAppearAnimations(b,h,f,Be);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!AI(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(hx(h,f,m,e.shouldReduceMotion&&Si.has(h)?{type:!1}:p));const y=f.animation;Gu(c)&&(c.add(h),y.then(()=>c.remove(h))),u.push(y)}return a&&Promise.all(u).then(()=>{a&&EI(e,a)}),u}function ap(e,t,n={}){const s=Jd(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(yC(e,s,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return MI(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(n.delay)])}function MI(e,t,n=0,s=0,r=1,i){const a=[],l=(e.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(e.variantChildren).sort(RI).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(ap(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function RI(e,t){return e.sortNodePosition(t)}function II(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(i=>ap(e,i,n));s=Promise.all(r)}else if(typeof t=="string")s=ap(e,t,n);else{const r=typeof t=="function"?Jd(e,t,n.custom):t;s=Promise.all(yC(e,r,n))}return s.then(()=>e.notify("AnimationComplete",t))}const OI=[...Kg].reverse(),LI=Kg.length;function FI(e){return t=>Promise.all(t.map(({animation:n,options:s})=>II(e,n,s)))}function $I(e){let t=FI(e);const n=zI();let s=!0;const r=(c,u)=>{const d=Jd(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},g=1/0;for(let b=0;b<LI;b++){const v=OI[b],w=n[v],S=d[v]!==void 0?d[v]:h[v],N=fl(S),k=v===u?w.isActive:null;k===!1&&(g=b);let j=S===h[v]&&S!==d[v]&&N;if(j&&s&&e.manuallyAnimateOnMount&&(j=!1),w.protectedKeys={...p},!w.isActive&&k===null||!S&&!w.prevProp||Yd(S)||typeof S=="boolean")continue;let D=BI(w.prevProp,S)||v===u&&w.isActive&&!j&&N||b>g&&N,E=!1;const O=Array.isArray(S)?S:[S];let F=O.reduce(r,{});k===!1&&(F={});const{prevResolvedValues:L={}}=w,P={...L,...F},B=V=>{D=!0,m.has(V)&&(E=!0,m.delete(V)),w.needsAnimating[V]=!0};for(const V in P){const R=F[V],T=L[V];if(p.hasOwnProperty(V))continue;let M=!1;Uu(R)&&Uu(T)?M=!zS(R,T):M=R!==T,M?R!==void 0?B(V):m.add(V):R!==void 0&&m.has(V)?B(V):w.protectedKeys[V]=!0}w.prevProp=S,w.prevResolvedValues=F,w.isActive&&(p={...p,...F}),s&&e.blockInitialAnimation&&(D=!1),D&&(!j||E)&&f.push(...O.map(V=>({animation:V,options:{type:v,...c}})))}if(m.size){const b={};m.forEach(v=>{const w=e.getBaseTarget(v);w!==void 0&&(b[v]=w)}),f.push({animation:b})}let y=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n}}function BI(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!zS(t,e):!1}function Fr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zI(){return{animate:Fr(!0),whileInView:Fr(),whileHover:Fr(),whileTap:Fr(),whileDrag:Fr(),whileFocus:Fr(),exit:Fr()}}class VI extends Or{constructor(t){super(t),t.animationState||(t.animationState=$I(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let UI=0;class WI extends Or{constructor(){super(...arguments),this.id=UI++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const HI={animation:{Feature:VI},exit:{Feature:WI}},lv=(e,t)=>Math.abs(e-t);function qI(e,t){const n=lv(e.x,t.x),s=lv(e.y,t.y);return Math.sqrt(n**2+s**2)}class vC{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=sf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=qI(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=Pt;this.history.push({...p,timestamp:g});const{onStart:y,onMove:b}=this.handlers;f||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=nf(f,this.transformPagePoint),Be.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=sf(h.type==="pointercancel"?this.lastMoveEventInfo:nf(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,y),p&&p(h,y)},!OS(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=Xd(t),l=nf(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Pt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,sf(l,this.history)),this.removeListeners=wr(As(this.contextWindow,"pointermove",this.handlePointerMove),As(this.contextWindow,"pointerup",this.handlePointerUp),As(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bs(this.updatePoint)}}function nf(e,t){return t?{point:t(e.point)}:e}function cv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sf({point:e},t){return{point:e,delta:cv(e,bC(t)),offset:cv(e,GI(t)),velocity:YI(t,.1)}}function GI(e){return e[0]}function bC(e){return e[e.length-1]}function YI(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=bC(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>li(t)));)n--;if(!s)return{x:0,y:0};const i=Ms(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function gn(e){return e.max-e.min}function op(e,t=0,n=.01){return Math.abs(e-t)<=n}function uv(e,t,n,s=.5){e.origin=s,e.originPoint=Xe(t.min,t.max,e.origin),e.scale=gn(n)/gn(t),(op(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Xe(n.min,n.max,e.origin)-e.originPoint,(op(e.translate)||isNaN(e.translate))&&(e.translate=0)}function $o(e,t,n,s){uv(e.x,t.x,n.x,s?s.originX:void 0),uv(e.y,t.y,n.y,s?s.originY:void 0)}function dv(e,t,n){e.min=n.min+t.min,e.max=e.min+gn(t)}function QI(e,t,n){dv(e.x,t.x,n.x),dv(e.y,t.y,n.y)}function hv(e,t,n){e.min=t.min-n.min,e.max=e.min+gn(t)}function Bo(e,t,n){hv(e.x,t.x,n.x),hv(e.y,t.y,n.y)}function KI(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Xe(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Xe(n,e,s.max):Math.min(e,n)),e}function fv(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function XI(e,{top:t,left:n,bottom:s,right:r}){return{x:fv(e.x,n,r),y:fv(e.y,t,s)}}function mv(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function JI(e,t){return{x:mv(e.x,t.x),y:mv(e.y,t.y)}}function ZI(e,t){let n=.5;const s=gn(e),r=gn(t);return r>s?n=pl(t.min,t.max-s,e.min):s>r&&(n=pl(e.min,e.max-r,t.min)),Dr(0,1,n)}function e4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const lp=.35;function t4(e=lp){return e===!1?e=0:e===!0&&(e=lp),{x:pv(e,"left","right"),y:pv(e,"top","bottom")}}function pv(e,t,n){return{min:gv(e,t),max:gv(e,n)}}function gv(e,t){return typeof e=="number"?e:e[t]||0}const xv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ki=()=>({x:xv(),y:xv()}),yv=()=>({min:0,max:0}),ct=()=>({x:yv(),y:yv()});function Nn(e){return[e("x"),e("y")]}function wC({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function n4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function s4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function rf(e){return e===void 0||e===1}function cp({scale:e,scaleX:t,scaleY:n}){return!rf(e)||!rf(t)||!rf(n)}function qr(e){return cp(e)||jC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function jC(e){return vv(e.x)||vv(e.y)}function vv(e){return e&&e!=="0%"}function Yu(e,t,n){const s=e-n,r=t*s;return n+r}function bv(e,t,n,s,r){return r!==void 0&&(e=Yu(e,r,s)),Yu(e,n,s)+t}function up(e,t=0,n=1,s,r){e.min=bv(e.min,t,n,s,r),e.max=bv(e.max,t,n,s,r)}function NC(e,{x:t,y:n}){up(e.x,t.translate,t.scale,t.originPoint),up(e.y,n.translate,n.scale,n.originPoint)}function r4(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let i,a;for(let l=0;l<r;l++){i=n[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Xi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,NC(e,a)),s&&qr(i.latestValues)&&Xi(e,i.latestValues))}t.x=wv(t.x),t.y=wv(t.y)}function wv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Js(e,t){e.min=e.min+t,e.max=e.max+t}function jv(e,t,[n,s,r]){const i=t[r]!==void 0?t[r]:.5,a=Xe(e.min,e.max,i);up(e,t[n],t[s],a,t.scale)}const i4=["x","scaleX","originX"],a4=["y","scaleY","originY"];function Xi(e,t){jv(e.x,t,i4),jv(e.y,t,a4)}function SC(e,t){return wC(s4(e.getBoundingClientRect(),t))}function o4(e,t,n){const s=SC(e,n),{scroll:r}=t;return r&&(Js(s.x,r.offset.x),Js(s.y,r.offset.y)),s}const CC=({current:e})=>e?e.ownerDocument.defaultView:null,l4=new WeakMap;class c4{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Xd(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=FS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nn(y=>{let b=this.getAxisMotionValue(y).get()||0;if(ls.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[y];w&&(b=gn(w)*(parseFloat(b)/100))}}this.originPoint[y]=b}),p&&Be.update(()=>p(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=u4(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Nn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new vC(t,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:CC(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Be.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!vc(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(a=KI(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Yi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=XI(r.layoutBox,n):this.constraints=!1,this.elastic=t4(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=e4(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Yi(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=o4(s,r.root,this.visualElement.getTransformPagePoint());let a=JI(r.layout.layoutBox,i);if(n){const l=n(n4(a));this.hasMutatedConstraints=!!l,l&&(a=wC(l))}return a}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Nn(d=>{if(!vc(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,p={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(hx(t,s,0,n))}stopAnimation(){Nn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Nn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Nn(n=>{const{drag:s}=this.getProps();if(!vc(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[n];i.set(t[n]-Xe(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Yi(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Nn(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();r[a]=ZI({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Nn(a=>{if(!vc(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Xe(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;l4.set(this.visualElement,this);const t=this.visualElement.current,n=As(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Yi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const a=Ds(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Nn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=lp,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function vc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function u4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class d4 extends Or{constructor(t){super(t),this.removeGroupControls=it,this.removeListeners=it,this.controls=new c4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||it}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nv=e=>(t,n)=>{e&&Be.update(()=>e(t,n))};class h4 extends Or{constructor(){super(...arguments),this.removePointerDownListener=it}onPointerDown(t){this.session=new vC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Nv(t),onStart:Nv(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&Be.update(()=>r(i,a))}}}mount(){this.removePointerDownListener=As(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function f4(){const e=x.useContext(qd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,r=x.useId();return x.useEffect(()=>s(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const ru={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Za={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(we.test(e))e=parseFloat(e);else return e;const n=Sv(e,t.target.x),s=Sv(e,t.target.y);return`${n}% ${s}%`}},m4={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=Tr.parse(e);if(r.length>5)return s;const i=Tr.createTransformer(e),a=typeof r[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;r[0+a]/=l,r[1+a]/=c;const u=Xe(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class p4 extends se.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=t;jM(g4),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ru.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Be.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function kC(e){const[t,n]=f4(),s=x.useContext(Jg);return se.createElement(p4,{...e,layoutGroup:s,switchLayoutGroup:x.useContext(wS),isPresent:t,safeToRemove:n})}const g4={borderRadius:{...Za,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Za,borderTopRightRadius:Za,borderBottomLeftRadius:Za,borderBottomRightRadius:Za,boxShadow:m4},EC=["TopLeft","TopRight","BottomLeft","BottomRight"],x4=EC.length,Cv=e=>typeof e=="string"?parseFloat(e):e,kv=e=>typeof e=="number"||we.test(e);function y4(e,t,n,s,r,i){r?(e.opacity=Xe(0,n.opacity!==void 0?n.opacity:1,v4(s)),e.opacityExit=Xe(t.opacity!==void 0?t.opacity:1,0,b4(s))):i&&(e.opacity=Xe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let a=0;a<x4;a++){const l=`border${EC[a]}Radius`;let c=Ev(t,l),u=Ev(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||kv(c)===kv(u)?(e[l]=Math.max(Xe(Cv(c),Cv(u),s),0),(ls.test(u)||ls.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Xe(t.rotate||0,n.rotate||0,s))}function Ev(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const v4=DC(0,.5,KS),b4=DC(.5,.95,it);function DC(e,t,n){return s=>s<e?0:s>t?1:n(pl(e,t,s))}function Dv(e,t){e.min=t.min,e.max=t.max}function bn(e,t){Dv(e.x,t.x),Dv(e.y,t.y)}function Tv(e,t,n,s,r){return e-=t,e=Yu(e,1/n,s),r!==void 0&&(e=Yu(e,1/r,s)),e}function w4(e,t=0,n=1,s=.5,r,i=e,a=e){if(ls.test(t)&&(t=parseFloat(t),t=Xe(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Xe(i.min,i.max,s);e===i&&(l-=t),e.min=Tv(e.min,t,n,l,r),e.max=Tv(e.max,t,n,l,r)}function Pv(e,t,[n,s,r],i,a){w4(e,t[n],t[s],t[r],t.scale,i,a)}const j4=["x","scaleX","originX"],N4=["y","scaleY","originY"];function _v(e,t,n,s){Pv(e.x,t,j4,n?n.x:void 0,s?s.x:void 0),Pv(e.y,t,N4,n?n.y:void 0,s?s.y:void 0)}function Av(e){return e.translate===0&&e.scale===1}function TC(e){return Av(e.x)&&Av(e.y)}function S4(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function PC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Mv(e){return gn(e.x)/gn(e.y)}class C4{constructor(){this.members=[]}add(t){fx(this.members,t),t.scheduleRender()}remove(t){if(mx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Rv(e,t,n){let s="";const r=e.x.translate/t.x,i=e.y.translate/t.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const k4=(e,t)=>e.depth-t.depth;class E4{constructor(){this.children=[],this.isDirty=!1}add(t){fx(this.children,t),this.isDirty=!0}remove(t){mx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(k4),this.isDirty=!1,this.children.forEach(t)}}function D4(e,t){const n=performance.now(),s=({timestamp:r})=>{const i=r-n;i>=t&&(Bs(s),e(i-t))};return Be.read(s,!0),()=>Bs(s)}function T4(e){window.MotionDebug&&window.MotionDebug.record(e)}function P4(e){return e instanceof SVGElement&&e.tagName!=="svg"}function _4(e,t,n){const s=nn(e)?e:ga(e);return s.start(hx("",s,t,n)),s.animation}const Iv=["","X","Y","Z"],A4={visibility:"hidden"},Ov=1e3;let M4=0;const Gr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _C({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},l=t==null?void 0:t()){this.id=M4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gr.totalNodes=Gr.resolvedTargetDeltas=Gr.recalculatedProjection=0,this.nodes.forEach(O4),this.nodes.forEach(z4),this.nodes.forEach(V4),this.nodes.forEach(L4),T4(Gr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new E4)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new px),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=P4(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=D4(f,250),ru.hasAnimatedSinceResize&&(ru.hasAnimatedSinceResize=!1,this.nodes.forEach(Fv))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||G4,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=d.getProps(),v=!this.targetLayout||!PC(this.targetLayout,p)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const S={...dx(g,"layout"),onPlay:y,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||Fv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(U4),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Lv);return}this.isUpdating||this.nodes.forEach($4),this.isUpdating=!1,this.nodes.forEach(B4),this.nodes.forEach(R4),this.nodes.forEach(I4),this.clearAllSnapshots();const l=performance.now();Pt.delta=Dr(0,1e3/60,l-Pt.timestamp),Pt.timestamp=l,Pt.isProcessing=!0,Yh.update.process(Pt),Yh.preRender.process(Pt),Yh.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(F4),this.sharedNodes.forEach(W4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!TC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||qr(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),Y4(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ct();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Js(l.x,c.offset.x),Js(l.y,c.offset.y)),l}removeElementScroll(a){const l=ct();bn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){bn(l,a);const{scroll:f}=this.root;f&&(Js(l.x,-f.offset.x),Js(l.y,-f.offset.y))}Js(l.x,d.offset.x),Js(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=ct();bn(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),qr(d.latestValues)&&Xi(c,d.latestValues)}return qr(this.latestValues)&&Xi(c,this.latestValues),c}removeTransform(a){const l=ct();bn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!qr(u.latestValues))continue;cp(u.latestValues)&&u.updateSnapshot();const d=ct(),h=u.measurePageBox();bn(d,h),_v(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return qr(this.latestValues)&&_v(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Pt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Bo(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),QI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bn(this.target,this.layout.layoutBox),NC(this.target,this.targetDelta)):bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Bo(this.relativeTargetOrigin,this.target,m.target),bn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cp(this.parent.latestValues)||jC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;bn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;r4(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=Ki(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ki(),this.projectionDeltaWithTransform=Ki());const g=this.projectionTransform;$o(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Rv(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Gr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Ki();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ct(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,y=this.getStack(),b=!y||y.members.length<=1,v=!!(g&&!b&&this.options.crossfade===!0&&!this.path.some(q4));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const N=S/1e3;$v(h.x,a.x,N),$v(h.y,a.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bo(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H4(this.relativeTarget,this.relativeTargetOrigin,f,N),w&&S4(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ct()),bn(w,this.relativeTarget)),g&&(this.animationValues=d,y4(d,u,this.latestValues,N,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Be.update(()=>{ru.hasAnimatedSinceResize=!0,this.currentAnimation=_4(0,Ov,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ov),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&AC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ct();const h=gn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=gn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}bn(l,c),Xi(l,d),$o(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new C4),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Iv.length;d++){const h="rotate"+Iv[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return A4;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=su(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=su(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!qr(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Rv(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in zu){if(f[g]===void 0)continue;const{correct:y,applyTo:b}=zu[g],v=u.transform==="none"?f[g]:y(f[g],h);if(b){const w=b.length;for(let S=0;S<w;S++)u[b[S]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=h===this?su(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Lv),this.root.sharedNodes.clear()}}}function R4(e){e.updateLayout()}function I4(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?Nn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=gn(f);f.min=s[h].min,f.max=f.min+m}):AC(i,n.layoutBox,s)&&Nn(h=>{const f=a?n.measuredBox[h]:n.layoutBox[h],m=gn(s[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Ki();$o(l,s,n.layoutBox);const c=Ki();a?$o(c,e.applyTransform(r,!0),n.measuredBox):$o(c,s,n.layoutBox);const u=!TC(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=ct();Bo(p,n.layoutBox,f.layoutBox);const g=ct();Bo(g,s,m.layoutBox),PC(p,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function O4(e){Gr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function L4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function F4(e){e.clearSnapshot()}function Lv(e){e.clearMeasurements()}function $4(e){e.isLayoutDirty=!1}function B4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Fv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function z4(e){e.resolveTargetDelta()}function V4(e){e.calcProjection()}function U4(e){e.resetRotation()}function W4(e){e.removeLeadSnapshot()}function $v(e,t,n){e.translate=Xe(t.translate,0,n),e.scale=Xe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Bv(e,t,n,s){e.min=Xe(t.min,n.min,s),e.max=Xe(t.max,n.max,s)}function H4(e,t,n,s){Bv(e.x,t.x,n.x,s),Bv(e.y,t.y,n.y,s)}function q4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const G4={duration:.45,ease:[.4,0,.1,1]},zv=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Vv=zv("applewebkit/")&&!zv("chrome/")?Math.round:it;function Uv(e){e.min=Vv(e.min),e.max=Vv(e.max)}function Y4(e){Uv(e.x),Uv(e.y)}function AC(e,t,n){return e==="position"||e==="preserve-aspect"&&!op(Mv(t),Mv(n),.2)}const Q4=_C({attachResizeListener:(e,t)=>Ds(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),af={current:void 0},MC=_C({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!af.current){const e=new Q4({});e.mount(window),e.setOptions({layoutScroll:!0}),af.current=e}return af.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),K4={pan:{Feature:h4},drag:{Feature:d4,ProjectionNode:MC,MeasureLayout:kC}},X4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function J4(e){const t=X4.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function dp(e,t,n=1){const[s,r]=J4(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const a=i.trim();return pC(a)?parseFloat(a):a}else return ep(r)?dp(r,t,n+1):r}function Z4(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const i=r.get();if(!ep(i))return;const a=dp(i,s);a&&r.set(a)});for(const r in t){const i=t[r];if(!ep(i))continue;const a=dp(i,s);a&&(t[r]=a,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:t,transitionEnd:n}}const eO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),RC=e=>eO.has(e),tO=e=>Object.keys(e).some(RC),Wv=e=>e===Ci||e===we,Hv=(e,t)=>parseFloat(e.split(", ")[t]),qv=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return Hv(r[1],t);{const i=s.match(/^matrix\((.+)\)$/);return i?Hv(i[1],e):0}},nO=new Set(["x","y","z"]),sO=$l.filter(e=>!nO.has(e));function rO(e){const t=[];return sO.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const xa={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:qv(4,13),y:qv(5,14)};xa.translateX=xa.x;xa.translateY=xa.y;const iO=(e,t,n)=>{const s=t.measureViewportBox(),r=t.current,i=getComputedStyle(r),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=xa[u](s,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=xa[u](c,i)}),e},aO=(e,t,n={},s={})=>{t={...t},s={...s};const r=Object.keys(t).filter(RC);let i=[],a=!1;const l=[];if(r.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Ja(d);const f=t[c];let m;if(Uu(f)){const p=f.length,g=f[0]===null?1:0;d=f[g],h=Ja(d);for(let y=g;y<p&&f[y]!==null;y++)m?ax(Ja(f[y])===m):m=Ja(f[y])}else m=Ja(f);if(h!==m)if(Wv(h)&&Wv(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===we&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(a||(i=rO(e),a=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=iO(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Gd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:t,transitionEnd:s}};function oO(e,t,n,s){return tO(t)?aO(e,t,n,s):{target:t,transitionEnd:s}}const lO=(e,t,n,s)=>{const r=Z4(e,t,s);return t=r.target,s=r.transitionEnd,oO(e,t,n,s)},hp={current:null},IC={current:!1};function cO(){if(IC.current=!0,!!Gd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>hp.current=e.matches;e.addListener(t),t()}else hp.current=!1}function uO(e,t,n){const{willChange:s}=t;for(const r in t){const i=t[r],a=n[r];if(nn(i))e.addValue(r,i),Gu(s)&&s.add(r);else if(nn(a))e.addValue(r,ga(i,{owner:e})),Gu(s)&&s.remove(r);else if(a!==i)if(e.hasValue(r)){const l=e.getValue(r);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(r);e.addValue(r,ga(l!==void 0?l:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Gv=new WeakMap,OC=Object.keys(ml),dO=OC.length,Yv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],hO=Xg.length;class fO{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Be.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.isControllingVariants=Qd(n),this.isVariantNode=bS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&nn(f)&&(f.set(l[h],!1),Gu(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Gv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),IC.current||cO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gv.delete(this.current),this.projection&&this.projection.unmount(),Bs(this.notifyUpdate),Bs(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=Si.has(t),r=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Be.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,r,i){let a,l;for(let c=0;c<dO;c++){const u=OC[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=ml[u];f&&(a=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Yi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Yv.length;s++){const r=Yv[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=t["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=uO(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<hO;s++){const r=Xg[s],i=this.props[r];(fl(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=ga(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=ix(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!nn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new px),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class LC extends fO{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:r},i){let a=PI(s,t||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),a&&(a=r(a))),i){DI(this,s,a);const l=lO(this,s,a,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function mO(e){return window.getComputedStyle(e)}class pO extends LC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Si.has(n)){const s=ux(n);return s&&s.default||0}else{const s=mO(t),r=(SS(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return SC(t,n)}build(t,n,s,r){ex(t,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return rx(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,r){PS(t,n,s,r)}}class gO extends LC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Si.has(n)){const s=ux(n);return s&&s.default||0}return n=_S.has(n)?n:Qg(n),t.getAttribute(n)}measureInstanceViewportBox(){return ct()}scrapeMotionValuesFromProps(t,n){return MS(t,n)}build(t,n,s,r){nx(t,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,s,r){AS(t,n,s,r)}mount(t){this.isSVGTag=sx(t.tagName),super.mount(t)}}const xO=(e,t)=>Zg(e)?new gO(t,{enableHardwareAcceleration:!1}):new pO(t,{enableHardwareAcceleration:!0}),yO={layout:{ProjectionNode:MC,MeasureLayout:kC}},vO={...HI,...dR,...K4,...yO},tr=bM((e,t)=>JM(e,t,vO,xO));function FC(){const e=x.useRef(!1);return Yg(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function bO(){const e=FC(),[t,n]=x.useState(0),s=x.useCallback(()=>{e.current&&n(t+1)},[t]);return[x.useCallback(()=>Be.postRender(s),[s]),t]}class wO extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jO({children:e,isPresent:t}){const n=x.useId(),s=x.useRef(null),r=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=r.current;if(t||!s.current||!i||!a)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement(wO,{isPresent:t,childRef:s,sizeRef:r},x.cloneElement(e,{ref:s}))}const of=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const l=RS(NO),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;s&&s()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return x.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),x.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),a==="popLayout"&&(e=x.createElement(jO,{isPresent:n},e)),x.createElement(qd.Provider,{value:u},e)};function NO(){return new Map}function SO(e){return x.useEffect(()=>()=>e(),[])}const Yr=e=>e.key||"";function CO(e,t){e.forEach(n=>{const s=Yr(n);t.set(s,n)})}function kO(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const gx=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=x.useContext(Jg).forceRender||bO()[0],c=FC(),u=kO(e);let d=u;const h=x.useRef(new Map).current,f=x.useRef(d),m=x.useRef(new Map).current,p=x.useRef(!0);if(Yg(()=>{p.current=!1,CO(u,m),f.current=d}),SO(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return x.createElement(x.Fragment,null,d.map(v=>x.createElement(of,{key:Yr(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},v)));d=[...d];const g=f.current.map(Yr),y=u.map(Yr),b=g.length;for(let v=0;v<b;v++){const w=g[v];y.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((v,w)=>{if(y.indexOf(w)!==-1)return;const S=m.get(w);if(!S)return;const N=g.indexOf(w);let k=v;if(!k){const j=()=>{h.delete(w);const C=Array.from(m.keys()).filter(D=>!y.includes(D));if(C.forEach(D=>m.delete(D)),f.current=u.filter(D=>{const E=Yr(D);return E===w||C.includes(E)}),!h.size){if(c.current===!1)return;l(),s&&s()}};k=x.createElement(of,{key:Yr(S),isPresent:!1,onExitComplete:j,custom:t,presenceAffectsLayout:i,mode:a},S),h.set(w,k)}d.splice(N,0,k)}),d=d.map(v=>{const w=v.key;return h.has(w)?v:x.createElement(of,{key:Yr(v),isPresent:!0,presenceAffectsLayout:i,mode:a},v)}),x.createElement(x.Fragment,null,h.size?d:d.map(v=>x.cloneElement(v)))},EO="/assets/asp-logo-Cq2CSw-i.jpg",DO="/crane-icon.svg",TO=[{label:"Dashboard",icon:o.jsx(aA,{size:18}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:o.jsx(tA,{size:18}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:o.jsx(iA,{size:18}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:o.jsx(nS,{size:18}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:o.jsx(zd,{size:18}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:o.jsx(us,{size:18}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:o.jsx(Hg,{size:18}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:o.jsx(tS,{size:18}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:o.jsx(Yn,{size:18}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:o.jsx(hl,{size:18}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:o.jsx(Ht,{size:18}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:o.jsx(uA,{size:18}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Template Builder",icon:o.jsx(Ht,{size:18}),href:"/admin/templates",roles:["admin","sales_agent"]}];function PO({isMobileOpen:e=!1,onMobileClose:t,isCollapsed:n,onCollapseToggle:s}){const{user:r}=Qe(),i=ms(),[a,l]=x.useState(!1),c=n!==void 0,u=c?n:a;if(x.useEffect(()=>{const y=()=>{window.innerWidth<1024&&l(!0)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),!r)return null;const d=TO.filter(y=>y.roles.includes(r.role)),h=(y,b)=>b?i.pathname===y:y==="/dashboard"&&i.pathname==="/"?!0:i.pathname.startsWith(y),f=()=>{c&&s?s(!u):l(y=>!y)},m=o.jsx(gx,{children:e&&o.jsxs(o.Fragment,{children:[o.jsx(tr.div,{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),o.jsx(tr.aside,{className:"fixed inset-y-0 left-0 z-50 w-72 max-w-[85%] bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-2xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},role:"navigation","aria-label":"Mobile navigation",children:g(!1)})]})}),p=o.jsx("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${u?"w-16":"w-72"} bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-xl`,role:"navigation","aria-label":"Main navigation",children:g(u)});return o.jsxs(o.Fragment,{children:[m,p]});function g(y){return o.jsxs("div",{className:"flex flex-col h-full text-white",children:[o.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-white/10",children:[o.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors duration-200 focus:outline-none","aria-label":y?"Expand sidebar":"Collapse sidebar",children:o.jsx(iS,{className:"h-6 w-6 text-white"})}),o.jsxs(rs,{to:"/dashboard",className:"flex items-center group","aria-label":"Go to dashboard",children:[o.jsx("img",{src:EO,alt:"ASP Cranes",className:`object-contain transition-all duration-300 group-hover:scale-105 ${y?"h-8 w-8":"h-10 w-auto"}`,onError:b=>{b.currentTarget.src=DO,b.currentTarget.onerror=null}}),!y&&o.jsx(tr.span,{className:"ml-3 text-xl font-bold bg-gradient-to-r from-white to-brand-gold bg-clip-text text-transparent",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"ASP CRM"})]})]}),o.jsx("nav",{className:"flex-1 py-6",role:"navigation",children:o.jsx("ul",{className:"space-y-1 px-3",role:"list",children:d.map(b=>{const v=h(b.href,b.end);return o.jsx("li",{role:"listitem",children:o.jsxs(rs,{to:b.href,className:`group flex items-center rounded-lg transition-all duration-200 ${y?"justify-center p-3":"p-3"} ${v?"bg-brand-gold text-brand-blue font-semibold shadow-lg scale-105":"text-white/90 hover:bg-white/10 hover:text-white hover:scale-[1.02]"}`,onClick:t,"aria-current":v?"page":void 0,children:[o.jsx("span",{className:`flex-shrink-0 transition-transform group-hover:scale-110 ${v?"text-brand-blue":""}`,children:b.icon}),!y&&o.jsx(tr.span,{className:"ml-3 text-sm font-medium",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05},children:b.label}),y&&o.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50 whitespace-nowrap",children:[b.label,o.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},b.href)})})}),o.jsx("div",{className:"p-4 border-t border-white/10",children:o.jsxs("div",{className:`flex items-center ${y?"justify-center":"space-x-3"}`,children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:(r==null?void 0:r.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(r==null?void 0:r.name)||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-brand-gold/50 hover:border-brand-gold transition-colors"})}),!y&&r&&o.jsxs(tr.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[o.jsx("p",{className:"text-sm font-semibold text-white truncate",children:r.name||"User"}),o.jsx("p",{className:"text-xs text-white/70 truncate capitalize",children:r.role?r.role.replace("_"," "):"User"}),o.jsxs("button",{onClick:()=>{t&&t();const b=new CustomEvent("sidebar-logout");document.dispatchEvent(b)},className:"mt-2 flex items-center text-xs text-white/80 hover:text-brand-gold px-2 py-1 rounded-md hover:bg-white/10 transition-all duration-200","aria-label":"Logout",children:[o.jsx(rS,{className:"h-3 w-3 mr-2"}),"Logout"]})]})]})})]})}}const re=async()=>null,ft=async()=>[],fp=async()=>({success:!0}),mp=async()=>({success:!1,error:"Service disabled in production"}),Dn=()=>{},_O=Dn,AO=Dn,MO=Dn,RO=Dn,IO=Dn,OO=Dn,LO=()=>!1,FO=Dn,$O=mp,BO=fp,zO=re,VO=re,UO=re,WO=re,HO=re,qO=re,pp=re,GO=re,$C=ft,YO=re,BC=re,QO=re,KO=re,XO=re,JO=ft,ZO=re,eL=re,tL=re,nL=re,zC=re,sL=re,rL=re,iL=ft,aL=re,VC=ft,UC=re,oL=ft,lL=ft,cL=re,uL=re,dL=re,hL=ft,fL=re,mL=ft,pL=re,gL=re,xL=re,yL=re,vL=ft,bL=re,wL=re,jL=ft,NL=re,SL=re,CL=re,kL=re,EL=ft,DL=re,TL=re,PL=ft,_L=ft,AL=re,ML=re,RL=re,IL=re,OL=re,WC=re,HC=re,qC=re,GC=re,YC=re,QC=re,KC=re,LL=re,XC=ft,JC=re,FL=re,$L=re,BL=Dn,ZC=ft,zL=re,VL=re,UL=re,e2=ft,t2=re,WL=re,HL=re,n2=ft,s2=re,r2=re,i2=re,a2=re,qL=re,o2=(e,t)=>(t==null?void 0:t.content)||"",GL=()=>[],iu=()=>({}),YL=e=>`$${e||0}`,QL=e=>e?new Date(e).toLocaleDateString():"",KL=()=>!0,XL=()=>!0,JL=e=>e||{},ZL=e=>(e==null?void 0:e.id)||"",au={get:re,post:re,put:re,delete:re,create:re,update:re,list:ft},e5={},t5={},n5={},s5={},r5={},i5={},a5={},o5={},l5={},c5={},u5={},d5={},h5={signIn:mp,signOutUser:fp,getCurrentUser:re,create:re,read:re,update:re,delete:re,list:ft,createDevToken:Dn,initAuthDebug:Dn,logAuthState:Dn,noop:Dn,asyncNull:re,asyncEmptyArray:ft,asyncSuccess:fp,asyncError:mp},Qv=Object.freeze(Object.defineProperty({__proto__:null,Activity:e5,Customer:r5,Deal:a5,Equipment:o5,Job:s5,Lead:n5,Notification:d5,Quotation:i5,Service:c5,SiteAssessment:u5,Template:l5,User:t5,checkAuthStatus:IO,checkForDevTokens:LO,cleanupDevArtifacts:OO,createActivity:zL,createCustomer:dL,createDeal:kL,createDevToken:_O,createEquipment:ML,createJob:rL,createLead:XO,createNotification:FL,createQuotation:yL,createService:s2,createSiteAssessment:t2,createTemplate:GO,createUser:WO,debugAuth:RO,default:h5,deleteActivity:UL,deleteContact:pL,deleteCustomer:fL,deleteDeal:DL,deleteEquipment:RL,deleteJob:aL,deleteLead:ZO,deleteNotification:$L,deleteQuotation:bL,deleteService:i2,deleteSiteAssessment:HL,deleteTemplate:YO,deleteUser:HO,extractDataFromApiResponse:JL,formatCurrency:YL,formatDate:QL,getAdditionalParamsConfig:YC,getAllEquipment:oL,getAllOperators:lL,getAvailablePlaceholders:GL,getConfig:IL,getContactsByCustomer:mL,getCurrentUser:zO,getCustomer:cL,getCustomerIdentifier:ZL,getCustomers:hL,getDeal:NL,getDealById:TL,getDeals:EL,getDefaultTemplateConfig:KC,getEquipment:PL,getEquipmentByCategory:_L,getEquipmentById:UC,getHeaders:iu,getJob:nL,getJobById:zC,getJobs:iL,getJobsByOperator:VC,getLead:QO,getLeads:JO,getQuotation:gL,getQuotationById:wL,getQuotationConfig:WC,getQuotations:vL,getQuotationsForLead:jL,getRecentActivities:ZC,getResourceRatesConfig:qC,getServices:n2,getSiteAssessments:e2,getTemplate:qO,getTemplateById:BC,getTemplates:$C,getUserById:VO,getUserNotifications:XC,initAuthDebug:AO,jobApiClient:au,logAuthState:MO,markNotificationAsRead:JC,mergeQuotationWithTemplate:o2,mergeTemplate:qL,monitorOperation:BL,removeDevTokens:FO,signIn:$O,signOutUser:BO,toggleServiceStatus:a2,updateActivity:VL,updateAdditionalParamsConfig:QC,updateConfig:OL,updateCustomer:uL,updateDeal:SL,updateDealStage:CL,updateDefaultTemplateConfig:LL,updateEquipment:AL,updateJob:sL,updateLead:KO,updateLeadAssignment:tL,updateLeadStatus:eL,updateQuotation:xL,updateQuotationConfig:HC,updateResourceRatesConfig:GC,updateService:r2,updateSiteAssessment:WL,updateTemplate:pp,updateUser:UO,validateEmail:KL,validatePhone:XL},Symbol.toStringTag,{value:"Module"}));function l2(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=l2(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function c2(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=l2(e))&&(s&&(s+=" "),s+=t);return s}const Kv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Xv=c2,_a=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return Xv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:i}=t,a=Object.keys(r).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=Kv(d)||Kv(h);return r[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[g,y]=p;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...u,h,f]:u},[]);return Xv(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},f5=_a("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function gl({className:e,variant:t,size:n,...s}){return o.jsx("div",{className:f5({variant:t,size:n,className:e}),...s})}const u2=x.memo(({notification:e,onClick:t})=>o.jsx("button",{onClick:()=>t(e),className:`w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors ${e.read?"":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-brand-blue"}`,"aria-describedby":`notification-${e.id}`,children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${e.read?"bg-gray-300":"bg-brand-blue"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),e.message&&o.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt||Date.now()).toLocaleDateString()})]})]})}));u2.displayName="NotificationItem";const m5=x.memo(function({onMobileMenuClick:t}){const{user:n,logout:s}=Qe(),r=Ln(),[i,a]=x.useState([]),[l,c]=x.useState(!1),[u,d]=x.useState(!1);x.useEffect(()=>{n&&h()},[n]),x.useEffect(()=>{const g=y=>{y.target.closest("[data-dropdown]")||(c(!1),d(!1))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=async()=>{if(n)try{const g=await XC(n.id);a(g)}catch(g){console.error("Failed to fetch notifications:",g)}},f=async()=>{try{await s(),r("/login")}catch(g){console.error("Logout error:",g),r("/login")}},m=async g=>{if(!g.read)try{await JC(g.id),await h()}catch(y){console.error("Failed to mark notification as read:",y)}g.link&&r(g.link),c(!1)},p=i.filter(g=>!g.read).length;return o.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm border-b border-gray-200/60 h-16 flex items-center justify-between px-4 lg:px-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[t&&o.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Toggle navigation menu",children:o.jsx(iS,{className:"h-5 w-5 text-gray-700"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-brand-blue to-brand-blue/80 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:"ASP CRM"}),o.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Crane Management System"})]})]})]}),o.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search projects, customers, equipment...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all","aria-label":"Search"})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Quick settings",children:o.jsx(hl,{className:"h-5 w-5 text-gray-600"})}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":`Notifications ${p>0?`(${p} unread)`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[o.jsx(A0,{className:"h-5 w-5 text-gray-600"}),p>0&&o.jsx(gl,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center animate-pulse",children:p>99?"99+":p})]}),l&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),o.jsxs("span",{className:"text-xs text-gray-500",children:[p," unread"]})]})}),o.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(A0,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):o.jsx("div",{className:"p-2 space-y-1",children:i.map(g=>o.jsx(u2,{notification:g,onClick:m},g.id))})}),i.length>0&&o.jsx("div",{className:"p-3 border-t border-gray-100",children:o.jsx("button",{className:"w-full text-sm text-brand-blue hover:text-brand-blue/80 font-medium",children:"View all notifications"})})]})]}),o.jsxs("div",{className:"relative","data-dropdown":!0,children:[o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"User menu","aria-expanded":u,"aria-haspopup":"true",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-200 hover:border-brand-blue/30 transition-colors"}),o.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-400 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"hidden sm:block text-left",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 leading-tight",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 capitalize leading-tight",children:n!=null&&n.role?n.role.replace("_"," "):"User"})]})]}),u&&o.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[o.jsx("div",{className:"p-3 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-10 w-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(n==null?void 0:n.name)||"User"}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:(n==null?void 0:n.email)||"user@example.com"})]})]})}),o.jsxs("div",{className:"py-2",children:[o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(ma,{className:"h-4 w-4 mr-3 text-gray-400"}),"View Profile"]}),o.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[o.jsx(hl,{className:"h-4 w-4 mr-3 text-gray-400"}),"Account Settings"]})]}),o.jsx("div",{className:"border-t border-gray-100 py-2",children:o.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[o.jsx(rS,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]})]})]})]})}),p5=x.memo(function({requiredRole:t,children:n}){const{isAuthenticated:s,user:r,logout:i}=Qe(),a=Ln(),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[h,f]=x.useState(!1),m=x.useRef(!1);if(x.useEffect(()=>{const g=()=>{i().then(()=>{a("/login")}).catch(y=>{console.error("Logout error:",y),a("/login")})};return document.addEventListener("sidebar-logout",g),()=>{document.removeEventListener("sidebar-logout",g)}},[i,a]),x.useEffect(()=>{m.current},[a,s,r,t]),x.useEffect(()=>{const g=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),l)return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-brand-gold rounded-full animate-spin",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Application"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please wait..."})]})});if(!s)return o.jsx(Wn,{to:"/login"});if(t&&(r==null?void 0:r.role)!==t)return o.jsx(Wn,{to:"/dashboard"});const p=()=>{d(!u)};return o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 overflow-hidden",children:[o.jsx(PO,{isMobileOpen:u,onMobileClose:()=>d(!1),isCollapsed:h,onCollapseToggle:f}),o.jsxs("div",{className:`flex flex-col flex-1 overflow-hidden transition-all duration-300 ${h?"lg:ml-16":"lg:ml-72"}`,children:[o.jsx(m5,{onMobileMenuClick:p}),o.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-transparent",children:o.jsx("div",{className:"min-h-full",children:n||o.jsx(JN,{})})})]})]})});let lf=null;const ya=()=>{if(lf!==null)return lf;const e={viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return lf=n,n},Qu=()=>!ya(),g5=(e=!1)=>{const t={"Content-Type":"application/json"};if(e)return t["x-bypass-auth"]="development-only-123",console.log("🔓 Development bypass header added, skipping JWT token"),t;const n=localStorage.getItem("auth-token")||localStorage.getItem("jwt-token")||localStorage.getItem("token");return n?(t.Authorization=`Bearer ${n}`,Qu()&&console.log("🔑 Auth token found and added to headers")):Qu()&&console.warn("⚠️ No auth token found in localStorage - API requests may fail with 403"),t},x5=e=>{ya()&&e()},y5=(e,...t)=>{Qu()&&console.log(`[DEBUG] ${e}`,...t)},Jv=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},bc=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},v5=()=>{if(ya()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){bc("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),Jv("Removed development authentication token from storage")}catch(t){bc("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(bc("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Jv("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&bc("SECURITY RISK: Development flags found in production build!")}},b5=()=>{if(ya()){v5(),console.log("%c🔒 PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{if(typeof window<"u"&&ya()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};x5(()=>{b5()});const Le=(e=!0)=>{e=!0;const n=g5(e);if(ya()&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),Qu()){const s=!!n.Authorization;y5(`API headers prepared: Auth token ${s?"present":"missing"}${e?", dev bypass enabled":""}`)}return n};async function Zv(e,t){const s=await fetch(`http://103.224.243.242:3001/api/leads/${e}/status`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify({status:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead status");const r=await s.json();return r.data||r}async function eb(e,t,n){const r=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}/assign`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify({salesAgentId:t,salesAgentName:n}),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead assignment");const i=await r.json();return i.data||i}async function w5(e,t){const s=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead");const r=await s.json();return r.data||r}async function j5(e){const n=await fetch("http://103.224.243.242:3001/api/leads",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create lead");const s=await n.json();return s.data||s}async function Ul(){const t=await fetch("http://103.224.243.242:3001/api/leads",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch leads");const n=await t.json();return n.data||n}const tb={getJobsByOperator:N5,getEquipmentById:h2,getAllEquipment:f2,getJobs:Zd,getAllOperators:Wl,createJob:d2,getJobEquipment:S5,getJobOperators:C5};async function d2(e){const n=await fetch("http://103.224.243.242:3001/api/jobs",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create job");return n.json()}async function N5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs?operatorId=${encodeURIComponent(e)}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch jobs by operator");return await n.json()}async function h2(e){const n=await fetch(`http://103.224.243.242:3001/api/equipment/${encodeURIComponent(e)}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch equipment by id");return await n.json()}async function f2(){const t=await fetch("http://103.224.243.242:3001/api/equipment",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch equipment");return await t.json()}async function Zd(){const t=await fetch("http://103.224.243.242:3001/api/jobs",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch jobs");return await t.json()}async function Wl(){const t=await fetch("http://103.224.243.242:3001/api/operators",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch operators");return await t.json()}async function S5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/equipment`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job equipment");return await n.json()}async function C5(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/operators`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job operators");return await n.json()}async function k5(e){const n=`http://103.224.243.242:3001/api/equipment?category=${encodeURIComponent(e)}`;console.log("🔍 Fetching equipment by category:",e),console.log("🔗 API URL:",n);const s=await fetch(n,{method:"GET",headers:Le(!0),credentials:"include"});if(console.log("📡 Response status:",s.status),console.log("📡 Response ok:",s.ok),!s.ok)throw console.error("❌ Failed to fetch equipment:",s.status,s.statusText),new Error("Failed to fetch equipment by category");const r=await s.json();return console.log("📦 Equipment data received:",r),r&&Array.isArray(r.data)?r.data:r}async function xx(){return[{id:"1",equipmentId:"EQ0001",name:"Demo Crane",category:"mobile_crane",manufacturingDate:"2022-01",registrationDate:"2022-02",maxLiftingCapacity:50,unladenWeight:20,baseRates:{micro:100,small:200,monthly:3e3,yearly:35e3},runningCostPerKm:10,description:"Sample equipment",status:"available",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),runningCost:0,_source:"client",_mockFlag:!0}]}async function eh(){const t=await fetch("http://103.224.243.242:3001/api/deals",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch deals");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function va(e){const n=await fetch(`http://103.224.243.242:3001/api/deals/${e}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch deal by ID");const s=await n.json();return s&&s.data?s.data:s}async function E5(e){const n=await fetch("http://103.224.243.242:3001/api/deals",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create deal");return await n.json()}async function m2(e,t){const s=await fetch(`http://103.224.243.242:3001/api/deals/${e}/stage`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify({stage:t}),credentials:"include"});if(!s.ok)throw new Error("Failed to update deal stage");const r=await s.json();return r.data||r}const Te=e=>isNaN(e)||e==null?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),D5=_a("relative bg-white/80 backdrop-blur-sm border border-gray-200/60 transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5",{variants:{variant:{default:"rounded-xl shadow-sm",bordered:"rounded-xl border-2",flat:"rounded-lg",glass:"rounded-xl bg-white/60 backdrop-blur-md border-white/20 shadow-xl",gradient:"rounded-xl bg-gradient-to-br from-white to-gray-50/50 shadow-md"},padding:{none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-5",lg:"p-5 sm:p-6",xl:"p-6 sm:p-8"},size:{default:"",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"w-full"}},defaultVariants:{variant:"default",padding:"md",size:"default"}}),ae=x.memo(se.forwardRef(({className:e="",variant:t,padding:n,size:s,as:r="div",children:i,hover:a=!0,loading:l=!1,...c},u)=>{const d=D5({variant:t,padding:n,size:s}),h=a?"hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5":"",f=l?"animate-pulse":"";return o.jsxs(r,{className:`${d} ${h} ${f} ${e}`,ref:u,role:r==="div"?"article":void 0,...c,children:[l&&o.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin"})}),i]})}));ae.displayName="Card";const xe=x.memo(se.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pb-4 border-b border-gray-200/60 ${e}`,...n,children:t})));xe.displayName="CardHeader";const ye=x.memo(se.forwardRef(({className:e="",gradient:t=!1,level:n=2,children:s,...r},i)=>{const a=`h${n}`,l=t?"bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent":"";return o.jsx(a,{ref:i,className:`text-lg font-semibold text-gray-900 leading-tight ${l} ${e}`,...r,children:s})}));ye.displayName="CardTitle";const T5=x.memo(se.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("p",{ref:s,className:`text-sm text-gray-600 leading-relaxed ${e}`,...n,children:t})));T5.displayName="CardDescription";const le=x.memo(se.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 ${e}`,...n,children:t})));le.displayName="CardContent";const P5=x.memo(se.forwardRef(({className:e="",children:t,...n},s)=>o.jsx("div",{ref:s,className:`pt-4 mt-4 border-t border-gray-200/60 ${e}`,...n,children:t})));P5.displayName="CardFooter";const _5=_a("group relative overflow-hidden",{variants:{variant:{default:"bg-white/90 backdrop-blur-sm",primary:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",secondary:"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200",accent:"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",warning:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200",error:"bg-gradient-to-br from-red-50 to-rose-50 border-red-200",glass:"bg-white/60 backdrop-blur-md border-white/20"},size:{sm:"min-h-[100px]",default:"min-h-[120px]",lg:"min-h-[140px]"}},defaultVariants:{variant:"default",size:"default"}}),Ut=x.memo(se.forwardRef(({className:e="",variant:t,size:n,title:s,value:r,icon:i,trend:a,subtitle:l,footer:c,loading:u=!1,gradient:d=!1,...h},f)=>{const p={primary:"bg-gradient-to-br from-blue-500 to-indigo-600",secondary:"bg-gradient-to-br from-gray-500 to-slate-600",accent:"bg-gradient-to-br from-amber-500 to-yellow-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-orange-500 to-red-600",error:"bg-gradient-to-br from-red-500 to-rose-600",glass:"bg-gradient-to-br from-brand-blue to-brand-blue/80",default:"bg-gradient-to-br from-brand-blue to-brand-blue/80"}[t||"default"],g=()=>a?a.value>0?o.jsx(Zm,{className:"w-3 h-3"}):a.value<0?o.jsx(vA,{className:"w-3 h-3"}):o.jsx(aS,{className:"w-3 h-3"}):null,y=()=>a?a.isPositive?"text-green-600":"text-red-600":"";return o.jsxs(ae,{ref:f,className:`${_5({variant:t,size:n})} ${e}`,variant:d?"gradient":"default",padding:"lg",hover:!u,loading:u,...h,children:[o.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-full transform translate-x-8 -translate-y-8 group-hover:scale-110 transition-transform duration-300"}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1 leading-tight",children:s}),l&&o.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:l})]}),i&&o.jsx("div",{className:`p-2.5 rounded-xl ${p} shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300`,children:o.jsx("div",{className:"text-white w-5 h-5 flex items-center justify-center",children:i})})]}),o.jsx("div",{className:"flex-1 flex items-center",children:o.jsx("div",{className:"text-2xl font-bold text-gray-900 group-hover:text-brand-blue transition-colors duration-300",children:u?o.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}):r})}),a&&o.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[o.jsxs("div",{className:`flex items-center space-x-1 ${y()}`,children:[g(),o.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(a.value),"%"]})]}),o.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),c&&o.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/60",children:c})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-blue/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})}));Ut.displayName="StatCard";const A5=x.memo(()=>o.jsxs(ae,{className:"min-h-[120px] animate-pulse",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),o.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"})]}),o.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-2"}),o.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}));A5.displayName="StatCardSkeleton";const M5=e=>{switch(e){case"lead":return o.jsx(ma,{className:"h-4 w-4"});case"deal":return o.jsx(nA,{className:"h-4 w-4"});case"job":return o.jsx(Ht,{className:"h-4 w-4"});case"equipment":return o.jsx(hn,{className:"h-4 w-4"});case"user":return o.jsx(ma,{className:"h-4 w-4"});default:return o.jsx(ji,{className:"h-4 w-4"})}},R5=e=>{switch(e){case"success":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"info":default:return"text-blue-600 bg-blue-50"}},I5=e=>{const n=new Date().getTime()-e.getTime(),s=Math.floor(n/(1e3*60)),r=Math.floor(s/60),i=Math.floor(r/24);return s<1?"Just now":s<60?`${s}m ago`:r<24?`${r}h ago`:i<7?`${i}d ago`:e.toLocaleDateString()},O5=[{id:"1",type:"lead",title:"New lead created",description:"John Doe submitted a crane rental inquiry",timestamp:new Date(Date.now()-1e3*60*15),status:"info",user:"System"},{id:"2",type:"deal",title:"Deal closed",description:"Construction project deal worth ₹2,50,000 closed successfully",timestamp:new Date(Date.now()-1e3*60*60*2),status:"success",user:"Sales Agent"},{id:"3",type:"job",title:"Job scheduled",description:"Crane deployment for Site A scheduled for tomorrow",timestamp:new Date(Date.now()-1e3*60*60*4),status:"info",user:"Operations Manager"},{id:"4",type:"equipment",title:"Maintenance alert",description:"Crane CR-001 requires scheduled maintenance",timestamp:new Date(Date.now()-1e3*60*60*6),status:"warning",user:"System"},{id:"5",type:"user",title:"New user registered",description:"New operator account created for Mike Johnson",timestamp:new Date(Date.now()-1e3*60*60*24),status:"info",user:"Admin"}];function L5({activities:e,className:t}){const[n,s]=x.useState([]),[r,i]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{if(e)s(e);else{const l=await ZC(5);s(l)}}catch(l){console.error("Error fetching activities:",l),s(O5)}finally{i(!1)}})()},[e]),r?o.jsxs(ae,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(En,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),o.jsx("p",{children:"Loading activities..."})]})})]}):o.jsxs(ae,{className:`p-6 ${t}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),o.jsx(En,{className:"h-5 w-5 text-gray-400"})]}),o.jsx("div",{className:"space-y-4",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(ji,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"No recent activities"})]}):n.map(a=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${R5(a.status)}`,children:M5(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),o.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:I5(a.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),a.user&&o.jsx("div",{className:"flex items-center mt-2",children:o.jsx(gl,{variant:"secondary",className:"text-xs",children:a.user})})]})]},a.id))}),n.length>0&&o.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:o.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all activities →"})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Hl(e){return e+.5|0}const or=(e,t,n)=>Math.max(Math.min(e,n),t);function jo(e){return or(Hl(e*2.55),0,255)}function jr(e){return or(Hl(e*255),0,255)}function Cs(e){return or(Hl(e/2.55)/100,0,1)}function nb(e){return or(Hl(e*100),0,100)}const wn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},gp=[..."0123456789ABCDEF"],F5=e=>gp[e&15],$5=e=>gp[(e&240)>>4]+gp[e&15],wc=e=>(e&240)>>4===(e&15),B5=e=>wc(e.r)&&wc(e.g)&&wc(e.b)&&wc(e.a);function z5(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&wn[e[1]]*17,g:255&wn[e[2]]*17,b:255&wn[e[3]]*17,a:t===5?wn[e[4]]*17:255}:(t===7||t===9)&&(n={r:wn[e[1]]<<4|wn[e[2]],g:wn[e[3]]<<4|wn[e[4]],b:wn[e[5]]<<4|wn[e[6]],a:t===9?wn[e[7]]<<4|wn[e[8]]:255})),n}const V5=(e,t)=>e<255?t(e):"";function U5(e){var t=B5(e)?F5:$5;return e?"#"+t(e.r)+t(e.g)+t(e.b)+V5(e.a,t):void 0}const W5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function p2(e,t,n){const s=t*Math.min(n,1-n),r=(i,a=(i+e/30)%12)=>n-s*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function H5(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function q5(e,t,n){const s=p2(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function G5(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function yx(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),a=Math.min(n,s,r),l=(i+a)/2;let c,u,d;return i!==a&&(d=i-a,u=l>.5?d/(2-i-a):d/(i+a),c=G5(n,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function vx(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(jr)}function bx(e,t,n){return vx(p2,e,t,n)}function Y5(e,t,n){return vx(q5,e,t,n)}function Q5(e,t,n){return vx(H5,e,t,n)}function g2(e){return(e%360+360)%360}function K5(e){const t=W5.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?jo(+t[5]):jr(+t[5]));const r=g2(+t[2]),i=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?s=Y5(r,i,a):t[1]==="hsv"?s=Q5(r,i,a):s=bx(r,i,a),{r:s[0],g:s[1],b:s[2],a:n}}function X5(e,t){var n=yx(e);n[0]=g2(n[0]+t),n=bx(n),e.r=n[0],e.g=n[1],e.b=n[2]}function J5(e){if(!e)return;const t=yx(e),n=t[0],s=nb(t[1]),r=nb(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${Cs(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const sb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Z5(){const e={},t=Object.keys(rb),n=Object.keys(sb);let s,r,i,a,l;for(s=0;s<t.length;s++){for(a=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,sb[i]);i=parseInt(rb[a],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let jc;function e3(e){jc||(jc=Z5(),jc.transparent=[0,0,0,0]);const t=jc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const t3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function n3(e){const t=t3.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const a=+t[7];n=t[8]?jo(a):or(a*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?jo(s):or(s,0,255)),r=255&(t[4]?jo(r):or(r,0,255)),i=255&(t[6]?jo(i):or(i,0,255)),{r:s,g:r,b:i,a:n}}}function s3(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Cs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const cf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,_i=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function r3(e,t,n){const s=_i(Cs(e.r)),r=_i(Cs(e.g)),i=_i(Cs(e.b));return{r:jr(cf(s+n*(_i(Cs(t.r))-s))),g:jr(cf(r+n*(_i(Cs(t.g))-r))),b:jr(cf(i+n*(_i(Cs(t.b))-i))),a:e.a+n*(t.a-e.a)}}function Nc(e,t,n){if(e){let s=yx(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=bx(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function x2(e,t){return e&&Object.assign(t||{},e)}function ib(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=jr(e[3]))):(t=x2(e,{r:0,g:0,b:0,a:1}),t.a=jr(t.a)),t}function i3(e){return e.charAt(0)==="r"?n3(e):K5(e)}class xl{constructor(t){if(t instanceof xl)return t;const n=typeof t;let s;n==="object"?s=ib(t):n==="string"&&(s=z5(t)||e3(t)||i3(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=x2(this._rgb);return t&&(t.a=Cs(t.a)),t}set rgb(t){this._rgb=ib(t)}rgbString(){return this._valid?s3(this._rgb):void 0}hexString(){return this._valid?U5(this._rgb):void 0}hslString(){return this._valid?J5(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=a*s.a+(1-a)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=r3(this._rgb,t._rgb,n)),this}clone(){return new xl(this.rgb)}alpha(t){return this._rgb.a=jr(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Hl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Nc(this._rgb,2,t),this}darken(t){return Nc(this._rgb,2,-t),this}saturate(t){return Nc(this._rgb,1,t),this}desaturate(t){return Nc(this._rgb,1,-t),this}rotate(t){return X5(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ys(){}const a3=(()=>{let e=0;return()=>e++})();function _e(e){return e==null}function dt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ee(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ft(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function es(e,t){return Ft(e)?e:t}function je(e,t){return typeof e>"u"?t:e}const o3=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,y2=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ve(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Re(e,t,n,s){let r,i,a;if(dt(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(Ee(e))for(a=Object.keys(e),i=a.length,r=0;r<i;r++)t.call(n,e[a[r]],a[r])}function Ku(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Xu(e){if(dt(e))return e.map(Xu);if(Ee(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Xu(e[n[r]]);return t}return e}function v2(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function l3(e,t,n,s){if(!v2(e))return;const r=t[e],i=n[e];Ee(r)&&Ee(i)?yl(r,i,s):t[e]=Xu(i)}function yl(e,t,n){const s=dt(t)?t:[t],r=s.length;if(!Ee(e))return e;n=n||{};const i=n.merger||l3;let a;for(let l=0;l<r;++l){if(a=s[l],!Ee(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)i(c[u],e,a,n)}return e}function zo(e,t){return yl(e,t,{merger:c3})}function c3(e,t,n){if(!v2(e))return;const s=t[e],r=n[e];Ee(s)&&Ee(r)?zo(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Xu(r))}const ab={"":e=>e,x:e=>e.x,y:e=>e.y};function u3(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function d3(e){const t=u3(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function xi(e,t){return(ab[t]||(ab[t]=d3(t)))(e)}function wx(e){return e.charAt(0).toUpperCase()+e.slice(1)}const vl=e=>typeof e<"u",Pr=e=>typeof e=="function",ob=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function h3(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ie=Math.PI,Je=2*Ie,f3=Je+Ie,Ju=Number.POSITIVE_INFINITY,m3=Ie/180,yt=Ie/2,$r=Ie/4,lb=Ie*2/3,b2=Math.log10,cs=Math.sign;function Vo(e,t,n){return Math.abs(e-t)<n}function cb(e){const t=Math.round(e);e=Vo(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(b2(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function p3(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function g3(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function bl(e){return!g3(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function x3(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function y3(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Ts(e){return e*(Ie/180)}function v3(e){return e*(180/Ie)}function ub(e){if(!Ft(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function w2(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Ie&&(i+=Je),{angle:i,distance:r}}function xp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function b3(e,t){return(e-t+f3)%Je-Ie}function on(e){return(e%Je+Je)%Je}function wl(e,t,n,s){const r=on(e),i=on(t),a=on(n),l=on(i-r),c=on(a-r),u=on(r-i),d=on(r-a);return r===i||r===a||s&&i===a||l>c&&u<d}function Mt(e,t,n){return Math.max(t,Math.min(n,e))}function w3(e){return Mt(e,-32768,32767)}function Ps(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function jx(e,t,n){n=n||(a=>e[a]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const ri=(e,t,n,s)=>jx(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),j3=(e,t,n)=>jx(e,n,s=>e[s][t]>=n);function N3(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const j2=["push","pop","shift","splice","unshift"];function S3(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),j2.forEach(n=>{const s="_onData"+wx(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const a=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),a}})})}function db(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(j2.forEach(i=>{delete e[i]}),delete e._chartjs)}function N2(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const S2=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function C2(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,S2.call(window,()=>{s=!1,e.apply(t,n)}))}}function C3(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const Nx=e=>e==="start"?"left":e==="end"?"right":"center",_t=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,k3=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function E3(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:a,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:h,max:f,minDefined:m,maxDefined:p}=a.getUserBounds();if(m){if(r=Math.min(ri(c,d,h).lo,n?s:ri(t,d,a.getPixelForValue(h)).lo),u){const g=c.slice(0,r+1).reverse().findIndex(y=>!_e(y[l.axis]));r-=Math.max(0,g)}r=Mt(r,0,s-1)}if(p){let g=Math.max(ri(c,a.axis,f,!0).hi+1,n?0:ri(t,d,a.getPixelForValue(f),!0).hi+1);if(u){const y=c.slice(g-1).findIndex(b=>!_e(b[l.axis]));g+=Math.max(0,y)}i=Mt(g,r,s)-r}else i=s-r}return{start:r,count:i}}function D3(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Sc=e=>e===0||e===1,hb=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Je/n)),fb=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Je/n)+1,Uo={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*yt)+1,easeOutSine:e=>Math.sin(e*yt),easeInOutSine:e=>-.5*(Math.cos(Ie*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Sc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Sc(e)?e:hb(e,.075,.3),easeOutElastic:e=>Sc(e)?e:fb(e,.075,.3),easeInOutElastic(e){return Sc(e)?e:e<.5?.5*hb(e*2,.1125,.45):.5+.5*fb(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Uo.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Uo.easeInBounce(e*2)*.5:Uo.easeOutBounce(e*2-1)*.5+.5};function Sx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function mb(e){return Sx(e)?e:new xl(e)}function uf(e){return Sx(e)?e:new xl(e).saturate(.5).darken(.1).hexString()}const T3=["x","y","borderWidth","radius","tension"],P3=["color","borderColor","backgroundColor"];function _3(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:P3},numbers:{type:"number",properties:T3}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function A3(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const pb=new Map;function M3(e,t){t=t||{};const n=e+JSON.stringify(t);let s=pb.get(n);return s||(s=new Intl.NumberFormat(e,t),pb.set(n,s)),s}function Cx(e,t,n){return M3(t,n).format(e)}const R3={values(e){return dt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=I3(e,n)}const a=b2(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Cx(e,s,c)}};function I3(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var k2={formatters:R3};function O3(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:k2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const yi=Object.create(null),yp=Object.create(null);function Wo(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function df(e,t,n){return typeof t=="string"?yl(Wo(e,t),n):yl(Wo(e,""),t)}class L3{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>uf(r.backgroundColor),this.hoverBorderColor=(s,r)=>uf(r.borderColor),this.hoverColor=(s,r)=>uf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return df(this,t,n)}get(t){return Wo(this,t)}describe(t,n){return df(yp,t,n)}override(t,n){return df(yi,t,n)}route(t,n,s,r){const i=Wo(this,t),a=Wo(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=a[r];return Ee(c)?Object.assign({},u,c):je(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var at=new L3({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_3,A3,O3]);function F3(e){return!e||_e(e.size)||_e(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function gb(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Br(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function xb(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function vp(e,t,n,s){E2(e,t,n,s,null)}function E2(e,t,n,s,r){let i,a,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,g=t.radius;let y=(p||0)*m3;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(y),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),m){default:r?e.ellipse(n,s,r/2,g,0,0,Je):e.arc(n,s,g,0,Je),e.closePath();break;case"triangle":d=r?r/2:g,e.moveTo(n+Math.sin(y)*d,s-Math.cos(y)*g),y+=lb,e.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*g),y+=lb,e.lineTo(n+Math.sin(y)*d,s-Math.cos(y)*g),e.closePath();break;case"rectRounded":u=g*.516,c=g-u,a=Math.cos(y+$r)*c,h=Math.cos(y+$r)*(r?r/2-u:c),l=Math.sin(y+$r)*c,f=Math.sin(y+$r)*(r?r/2-u:c),e.arc(n-h,s-l,u,y-Ie,y-yt),e.arc(n+f,s-a,u,y-yt,y),e.arc(n+h,s+l,u,y,y+yt),e.arc(n-f,s+a,u,y+yt,y+Ie),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,d=r?r/2:c,e.rect(n-d,s-c,2*d,2*c);break}y+=$r;case"rectRot":h=Math.cos(y)*(r?r/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+f,s-a),e.lineTo(n+h,s+l),e.lineTo(n-f,s+a),e.closePath();break;case"crossRot":y+=$r;case"cross":h=Math.cos(y)*(r?r/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"star":h=Math.cos(y)*(r?r/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a),y+=$r,h=Math.cos(y)*(r?r/2:g),a=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(r?r/2:g),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+f,s-a),e.lineTo(n-f,s+a);break;case"line":a=r?r/2:Math.cos(y)*g,l=Math.sin(y)*g,e.moveTo(n-a,s-l),e.lineTo(n+a,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(y)*(r?r/2:g),s+Math.sin(y)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function jl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function th(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function nh(e){e.restore()}function $3(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function B3(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function z3(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),_e(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function V3(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),a=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,d),e.lineTo(l,d),e.stroke()}}function U3(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Nl(e,t,n,s,r,i={}){const a=dt(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,z3(e,i),c=0;c<a.length;++c)u=a[c],i.backdrop&&U3(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),_e(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,s,i.maxWidth)),e.fillText(u,n,s,i.maxWidth),V3(e,n,s,u,i),s+=Number(r.lineHeight);e.restore()}function Zu(e,t){const{x:n,y:s,w:r,h:i,radius:a}=t;e.arc(n+a.topLeft,s+a.topLeft,a.topLeft,1.5*Ie,Ie,!0),e.lineTo(n,s+i-a.bottomLeft),e.arc(n+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,Ie,yt,!0),e.lineTo(n+r-a.bottomRight,s+i),e.arc(n+r-a.bottomRight,s+i-a.bottomRight,a.bottomRight,yt,0,!0),e.lineTo(n+r,s+a.topRight),e.arc(n+r-a.topRight,s+a.topRight,a.topRight,0,-yt,!0),e.lineTo(n+a.topLeft,s)}const W3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,H3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function q3(e,t){const n=(""+e).match(W3);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const G3=e=>+e||0;function kx(e,t){const n={},s=Ee(t),r=s?Object.keys(t):t,i=Ee(e)?s?a=>je(e[a],e[t[a]]):a=>e[a]:()=>e;for(const a of r)n[a]=G3(i(a));return n}function D2(e){return kx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ra(e){return kx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function In(e){const t=D2(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Rt(e,t){e=e||{},t=t||at.font;let n=je(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=je(e.style,t.style);s&&!(""+s).match(H3)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:je(e.family,t.family),lineHeight:q3(je(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:je(e.weight,t.weight),string:""};return r.string=F3(r),r}function Cc(e,t,n,s){let r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&a!==void 0)return a}function Y3(e,t,n){const{min:s,max:r}=e,i=y2(t,(r-s)/2),a=(l,c)=>n&&l===0?0:l+c;return{min:a(s,-Math.abs(i)),max:a(r,i)}}function ki(e,t){return Object.assign(Object.create(e),t)}function Ex(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=A2("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>Ex([l,...e],t,i,s)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return P2(l,c,()=>nF(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return vb(l).includes(c)},ownKeys(l){return vb(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function ba(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:T2(e,s),setContext:i=>ba(e,i,n,s),override:i=>ba(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete e[a],!0},get(i,a,l){return P2(i,a,()=>K3(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,a){return Reflect.has(e,a)},ownKeys(){return Reflect.ownKeys(e)},set(i,a,l){return e[a]=l,delete i[a],!0}})}function T2(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Pr(n)?n:()=>n,isIndexable:Pr(s)?s:()=>s}}const Q3=(e,t)=>e?e+wx(t):t,Dx=(e,t)=>Ee(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function P2(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function K3(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:a}=e;let l=s[t];return Pr(l)&&a.isScriptable(t)&&(l=X3(t,l,e,n)),dt(l)&&l.length&&(l=J3(t,l,e,a.isIndexable)),Dx(t,l)&&(l=ba(l,r,i&&i[t],a)),l}function X3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,a||s);return l.delete(e),Dx(e,c)&&(c=Tx(r._scopes,r,e,c)),c}function J3(e,t,n,s){const{_proxy:r,_context:i,_subProxy:a,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(Ee(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Tx(u,r,e,d);t.push(ba(h,i,a&&a[e],l))}}return t}function _2(e,t,n){return Pr(e)?e(t,n):e}const Z3=(e,t)=>e===!0?t:typeof e=="string"?xi(t,e):void 0;function eF(e,t,n,s,r){for(const i of t){const a=Z3(n,i);if(a){e.add(a);const l=_2(a._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(a===!1&&typeof s<"u"&&n!==s)return null}return!1}function Tx(e,t,n,s){const r=t._rootScopes,i=_2(t._fallback,n,s),a=[...e,...r],l=new Set;l.add(s);let c=yb(l,a,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=yb(l,a,i,c,s),c===null)?!1:Ex(Array.from(l),[""],r,i,()=>tF(t,n,s))}function yb(e,t,n,s,r){for(;n;)n=eF(e,t,n,s,r);return n}function tF(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return dt(r)&&Ee(n)?n:r||{}}function nF(e,t,n,s){let r;for(const i of t)if(r=A2(Q3(i,e),n),typeof r<"u")return Dx(e,r)?Tx(n,s,e,r):r}function A2(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function vb(e){let t=e._keys;return t||(t=e._keys=sF(e._scopes)),t}function sF(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const rF=Number.EPSILON||1e-14,wa=(e,t)=>t<e.length&&!e[t].skip&&e[t],M2=e=>e==="x"?"y":"x";function iF(e,t,n,s){const r=e.skip?t:e,i=t,a=n.skip?t:n,l=xp(i,r),c=xp(a,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=s*u,f=s*d;return{previous:{x:i.x-h*(a.x-r.x),y:i.y-h*(a.y-r.y)},next:{x:i.x+f*(a.x-r.x),y:i.y+f*(a.y-r.y)}}}function aF(e,t,n){const s=e.length;let r,i,a,l,c,u=wa(e,0);for(let d=0;d<s-1;++d)if(c=u,u=wa(e,d+1),!(!c||!u)){if(Vo(t[d],0,rF)){n[d]=n[d+1]=0;continue}r=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),n[d]=r*a*t[d],n[d+1]=i*a*t[d])}}function oF(e,t,n="x"){const s=M2(n),r=e.length;let i,a,l,c=wa(e,0);for(let u=0;u<r;++u){if(a=l,l=c,c=wa(e,u+1),!l)continue;const d=l[n],h=l[s];a&&(i=(d-a[n])/3,l[`cp1${n}`]=d-i,l[`cp1${s}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${s}`]=h+i*t[u])}}function lF(e,t="x"){const n=M2(t),s=e.length,r=Array(s).fill(0),i=Array(s);let a,l,c,u=wa(e,0);for(a=0;a<s;++a)if(l=c,c=u,u=wa(e,a+1),!!c){if(u){const d=u[t]-c[t];r[a]=d!==0?(u[n]-c[n])/d:0}i[a]=l?u?cs(r[a-1])!==cs(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}aF(e,r,i),oF(e,i,t)}function kc(e,t,n){return Math.max(Math.min(e,n),t)}function cF(e,t){let n,s,r,i,a,l=jl(e[0],t);for(n=0,s=e.length;n<s;++n)a=i,i=l,l=n<s-1&&jl(e[n+1],t),i&&(r=e[n],a&&(r.cp1x=kc(r.cp1x,t.left,t.right),r.cp1y=kc(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=kc(r.cp2x,t.left,t.right),r.cp2y=kc(r.cp2y,t.top,t.bottom)))}function uF(e,t,n,s,r){let i,a,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")lF(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,a=e.length;i<a;++i)l=e[i],c=iF(u,l,e[Math.min(i+1,a-(s?0:1))%a],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&cF(e,n)}function Px(){return typeof window<"u"&&typeof document<"u"}function _x(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ed(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const sh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function dF(e,t){return sh(e).getPropertyValue(t)}const hF=["top","right","bottom","left"];function ci(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=hF[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const fF=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function mF(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let a=!1,l,c;if(fF(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,a=!0}return{x:l,y:c,box:a}}function Qr(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=sh(n),i=r.boxSizing==="border-box",a=ci(r,"padding"),l=ci(r,"border","width"),{x:c,y:u,box:d}=mF(e,n),h=a.left+(d&&l.left),f=a.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=a.width+l.width,p-=a.height+l.height),{x:Math.round((c-h)/m*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function pF(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&_x(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const a=i.getBoundingClientRect(),l=sh(i),c=ci(l,"border","width"),u=ci(l,"padding");t=a.width-u.width-c.width,n=a.height-u.height-c.height,s=ed(l.maxWidth,i,"clientWidth"),r=ed(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Ju,maxHeight:r||Ju}}const Ec=e=>Math.round(e*10)/10;function gF(e,t,n,s){const r=sh(e),i=ci(r,"margin"),a=ed(r.maxWidth,e,"clientWidth")||Ju,l=ed(r.maxHeight,e,"clientHeight")||Ju,c=pF(e,t,n);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const f=ci(r,"border","width"),m=ci(r,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=Ec(Math.min(u,a,c.maxWidth)),d=Ec(Math.min(d,l,c.maxHeight)),u&&!d&&(d=Ec(u/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=Ec(Math.floor(d*s))),{width:u,height:d}}function bb(e,t,n){const s=t||1,r=Math.floor(e.height*s),i=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||a.height!==r||a.width!==i?(e.currentDevicePixelRatio=s,a.height=r,a.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const xF=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Px()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function wb(e,t){const n=dF(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Kr(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function yF(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function vF(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},a=Kr(e,r,n),l=Kr(r,i,n),c=Kr(i,t,n),u=Kr(a,l,n),d=Kr(l,c,n);return Kr(u,d,n)}const bF=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},wF=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ia(e,t,n){return e?bF(t,n):wF()}function R2(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function I2(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function O2(e){return e==="angle"?{between:wl,compare:b3,normalize:on}:{between:Ps,compare:(t,n)=>t-n,normalize:t=>t}}function jb({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function jF(e,t,n){const{property:s,start:r,end:i}=n,{between:a,normalize:l}=O2(s),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&a(l(t[u%c][s]),r,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function L2(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,a=t.length,{compare:l,between:c,normalize:u}=O2(s),{start:d,end:h,loop:f,style:m}=jF(e,t,n),p=[];let g=!1,y=null,b,v,w;const S=()=>c(r,w,b)&&l(r,w)!==0,N=()=>l(i,b)===0||c(i,w,b),k=()=>g||S(),j=()=>!g||N();for(let C=d,D=d;C<=h;++C)v=t[C%a],!v.skip&&(b=u(v[s]),b!==w&&(g=c(b,r,i),y===null&&k()&&(y=l(b,r)===0?C:D),y!==null&&j()&&(p.push(jb({start:y,end:C,loop:f,count:a,style:m})),y=null),D=C,w=b));return y!==null&&p.push(jb({start:y,end:h,loop:f,count:a,style:m})),p}function F2(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=L2(s[r],e.points,t);i.length&&n.push(...i)}return n}function NF(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function SF(e,t,n,s){const r=e.length,i=[];let a=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=a=u.stop?c:null):(a=c,l.skip&&(t=c)),l=u}return a!==null&&i.push({start:t%r,end:a%r,loop:s}),i}function CF(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:a,end:l}=NF(n,r,i,s);if(s===!0)return Nb(e,[{start:a,end:l,loop:i}],n,t);const c=l<a?l+r:l,u=!!e._fullLoop&&a===0&&l===r-1;return Nb(e,SF(n,a,c,u),n,t)}function Nb(e,t,n,s){return!s||!s.setContext||!n?t:kF(e,t,n,s)}function kF(e,t,n,s){const r=e._chart.getContext(),i=Sb(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,g,y,b){const v=l?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=v;for(;n[g%c].skip;)g+=v;p%c!==g%c&&(u.push({start:p%c,end:g%c,loop:y,style:b}),d=b,h=g%c)}}for(const p of t){h=l?h:p.start;let g=n[h%c],y;for(f=h+1;f<=p.end;f++){const b=n[f%c];y=Sb(s.setContext(ki(r,{type:"segment",p0:g,p1:b,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),EF(y,d)&&m(h,f-1,p.loop,d),g=b,d=y}h<f-1&&m(h,f-1,p.loop,d)}return u}function Sb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function EF(e,t){if(!t)return!1;const n=[],s=function(r,i){return Sx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Dc(e,t,n){return e.options.clip?e[n]:t[n]}function DF(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Dc(n,t,"left"),right:Dc(n,t,"right"),top:Dc(s,t,"top"),bottom:Dc(s,t,"bottom")}:t}function $2(e,t){const n=t._clip;if(n.disabled)return!1;const s=DF(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class TF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],a=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:a,currentStep:Math.min(s-n.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=S2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[a]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var bs=new TF;const Cb="transparent",PF={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=mb(e||Cb),r=s.valid&&mb(t||Cb);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class _F{constructor(t,n,s,r){const i=n[s];r=Cc([t.to,r,i,t.from]);const a=Cc([t.from,i,r]);this._active=!0,this._fn=t.fn||PF[t.type||typeof a],this._easing=Uo[t.easing]||Uo.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,a=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Cc([t.to,n,r,t.from]),this._from=Cc([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class B2{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ee(t))return;const n=Object.keys(at.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Ee(i))return;const a={};for(const l of n)a[l]=i[l];(dt(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,a)})})}_animateOptions(t,n){const s=n.options,r=MF(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&AF(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),a=Object.keys(n),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=s.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new _F(f,t,u,d),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return bs.add(this._chart,s),!0}}function AF(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function MF(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function kb(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function RF(e,t,n){if(n===!1)return!1;const s=kb(e,n),r=kb(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function IF(e){let t,n,s,r;return Ee(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function z2(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Eb(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let a,l,c,u;if(t===null)return;let d=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===n){if(d=!0,s.all)continue;break}u=e.values[c],Ft(u)&&(i||t===0||cs(t)===cs(u))&&(t+=u)}return!d&&!s.all?0:t}function OF(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",a=Object.keys(e),l=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],l[c]={[r]:d,[i]:e[d]};return l}function hf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function LF(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function FF(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function $F(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function Db(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function Tb(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:a,index:l}=s,c=i.axis,u=a.axis,d=LF(i,a,s),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:g,[u]:y}=p,b=p._stacks||(p._stacks={});f=b[u]=$F(r,d,g),f[l]=y,f._top=Db(f,a,!0,s.type),f._bottom=Db(f,a,!1,s.type);const v=f._visualValues||(f._visualValues={});v[l]=y}}function ff(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function BF(e,t){return ki(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function zF(e,t,n){return ki(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function eo(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const mf=e=>e==="reset"||e==="none",Pb=(e,t)=>t?e:Object.assign({},e),VF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:z2(n,!0),values:null};class ui{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=hf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&eo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=je(s.xAxisID,ff(t,"x")),a=n.yAxisID=je(s.yAxisID,ff(t,"y")),l=n.rAxisID=je(s.rAxisID,ff(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,i,a,l),d=n.vAxisID=r(c,a,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&db(this._data,this),t._stacked&&eo(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Ee(n)){const r=this._cachedMeta;this._data=OF(n,r)}else if(s!==n){if(s){db(s,this);const r=this._cachedMeta;eo(r),r._parsed=[]}n&&Object.isExtensible(n)&&S3(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=hf(n.vScale,n),n.stack!==s.stack&&(r=!0,eo(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(Tb(this,n._parsed),n._stacked=hf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:a}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{dt(r[t])?f=this.parseArrayData(s,r,t,n):Ee(r[t])?f=this.parseObjectData(s,r,t,n):f=this.parsePrimitiveData(s,r,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);s._sorted=c}a&&Tb(this,f)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:a}=t,l=i.axis,c=a.axis,u=i.getLabels(),d=i===a,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+s,h[f]={[l]:d||i.parse(u[p],p),[c]:a.parse(n[p],p)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:a}=t,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:i.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,f,m;for(d=0,h=r;d<h;++d)f=d+s,m=n[f],u[d]={x:i.parse(xi(m,l),f),y:a.parse(xi(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,a=n[t.axis],l={keys:z2(r,!0),values:n._stacks[t.axis]._visualValues};return Eb(l,a,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let a=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,a=Eb(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,a=r.length,l=this._getOtherScale(t),c=VF(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=FF(l);let f,m;function p(){m=r[f];const g=m[l.axis];return!Ft(m[t.axis])||d>g||h<g}for(f=0;f<a&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,a;for(r=0,i=n.length;r<i;++r)a=n[r][t.axis],Ft(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=IF(je(this.options.clip,RF(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,i))}for(d=0;d<a.length;++d)a[d].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];i=a.$context||(a.$context=zF(this.getContext(),t,a)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=BF(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,a=t+"-"+n,l=i[a],c=this.enableOptionSharing&&vl(s);if(l)return Pb(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(at.elements[t]),p=()=>this.getContext(s,r,n),g=u.resolveNamedOptions(f,m,p,h);return g.$shared&&(g.$shared=c,i[a]=Object.freeze(Pb(g,c))),g}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,a=`animation-${n}`,l=i[a];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,s,n))}const u=new B2(r,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||mf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),a=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:a}}updateElement(t,n,s,r){mf(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!mf(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=n.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,a=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(i),l=t;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&eo(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}de(ui,"defaults",{}),de(ui,"datasetElementType",null),de(ui,"dataElementType",null);function UF(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=N2(s.sort((r,i)=>r-i))}return e._cache.$bar}function WF(e){const t=e.iScale,n=UF(t,e.type);let s=t._length,r,i,a,l;const c=()=>{a===32767||a===-32768||(vl(l)&&(s=Math.min(s,Math.abs(a-l)||s)),l=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),c();return s}function HF(e,t,n,s){const r=n.barThickness;let i,a;return _e(r)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=r*s,a=1),{chunk:i/s,ratio:a,start:t.pixels[e]-i/2}}function qF(e,t,n,s){const r=t.pixels,i=r[e];let a=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;a===null&&(a=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-a);const u=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/s,ratio:n.barPercentage,start:u}}function GF(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),a=Math.min(r,i),l=Math.max(r,i);let c=a,u=l;Math.abs(a)>Math.abs(l)&&(c=l,u=a),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:a,max:l}}function V2(e,t,n,s){return dt(e)?GF(e,t,n,s):t[n.axis]=n.parse(e,s),t}function _b(e,t,n,s){const r=e.iScale,i=e.vScale,a=r.getLabels(),l=r===i,c=[];let u,d,h,f;for(u=n,d=n+s;u<d;++u)f=t[u],h={},h[r.axis]=l||r.parse(a[u],u),c.push(V2(f,h,i,u));return c}function pf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function YF(e,t,n){return e!==0?cs(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function QF(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function KF(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:u,bottom:d}=QF(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[Ab(d,a,l,c)]=!0,r=u)),i[Ab(r,a,l,c)]=!0,e.borderSkipped=i}function Ab(e,t,n,s){return s?(e=XF(e,t,n),e=Mb(e,n,t)):e=Mb(e,t,n),e}function XF(e,t,n){return e===t?n:e===n?t:e}function Mb(e,t,n){return e==="start"?t:e==="end"?n:e}function JF(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class ou extends ui{parsePrimitiveData(t,n,s,r){return _b(t,n,s,r)}parseArrayData(t,n,s,r){return _b(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[];let f,m,p,g;for(f=s,m=s+r;f<m;++f)g=n[f],p={},p[i.axis]=i.parse(xi(g,u),f),h.push(V2(xi(g,d),p,a,f));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),a=i._custom,l=pf(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let m=n;m<n+s;m++){const p=this.getParsed(m),g=i||_e(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),y=this._calculateBarIndexPixels(m,d),b=(p._stacks||{})[l.axis],v={horizontal:u,base:g.base,enableBorderRadius:!b||pf(p._custom)||a===b._top||a===b._bottom,x:u?g.head:y.center,y:u?y.center:g.head,height:u?y.size:Math.abs(g.size),width:u?Math.abs(g.size):y.size};f&&(v.options=h||this.resolveDataElementOptions(m,t[m].active?"active":r));const w=v.options||t[m].options;KF(v,w,b,a),JF(v,w,d.ratio),this.updateElement(t[m],m,v,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{const h=d._parsed.find(m=>m[s.axis]===c),f=h&&h[d.vScale.axis];if(_e(f)||isNaN(f))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||a.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[je(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,a;for(i=0,a=n.data.length;i<a;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||WF(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=pf(u);let h=c[n.axis],f=0,m=s?this.applyStack(n,c,s):h,p,g;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&cs(h)!==cs(u.barEnd)&&(f=0),f+=h);const y=!_e(i)&&!d?i:f;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=b,g=p-b,Math.abs(g)<a){g=YF(g,n,l)*a,h===l&&(b-=g/2);const v=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(v,w),N=Math.max(v,w);b=Math.max(Math.min(b,N),S),p=b+g,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(p)-n.getValueForPixel(b))}if(b===n.getPixelForValue(l)){const v=cs(g)*n.getLineWidthForValue(l)/2;b+=v,g-=v}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,a=je(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?qF(t,n,r,d*u):HF(t,n,r,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(je(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}de(ou,"id","bar"),de(ou,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),de(ou,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function ZF(e,t,n){let s=1,r=1,i=0,a=0;if(t<Je){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(w,S,N)=>wl(w,l,c,!0)?1:Math.max(S,S*n,N,N*n),p=(w,S,N)=>wl(w,l,c,!0)?-1:Math.min(S,S*n,N,N*n),g=m(0,u,h),y=m(yt,d,f),b=p(Ie,u,h),v=p(Ie+yt,d,f);s=(g-b)/2,r=(y-v)/2,i=-(g+b)/2,a=-(y+v)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:a}}class No extends ui{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(Ee(s[t])){const{key:c="value"}=this._parsing;i=u=>+xi(s[u],c)}let a,l;for(a=t,l=t+n;a<l;++a)r._parsed[a]=i(a)}}_getRotation(){return Ts(this.options.rotation-90)}_getCircumference(){return Ts(this.options.circumference)}_getRotationExtents(){let t=Je,n=-Je;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),a=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+a)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(o3(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=ZF(h,d,c),y=(s.width-a)/f,b=(s.height-a)/m,v=Math.max(Math.min(y,b)/2,0),w=y2(this.options.radius,v),S=Math.max(w*c,0),N=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,r.total=this.calculateTotal(),this.outerRadius=w-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Je)}updateElements(t,n,s,r){const i=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,r);let b=this._getRotation(),v;for(v=0;v<n;++v)b+=this._circumference(v,i);for(v=n;v<n+s;++v){const w=this._circumference(v,i),S=t[v],N={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:p,innerRadius:m};y&&(N.options=g||this.resolveDataElementOptions(v,S.active?"active":r)),b+=w,this.updateElement(S,v,N,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Je*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Cx(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,a,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),t=a.data,l=a.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(je(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}de(No,"id","doughnut"),de(No,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),de(No,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),de(No,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=t.legend.options;return n.labels.map((i,a)=>{const c=t.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class lu extends ui{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,a=this.chart._animationsDisabled;let{start:l,count:c}=E3(n,r,a);this._drawStart=l,this._drawCount=c,D3(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),f=a.axis,m=l.axis,{spanGaps:p,segment:g}=this.options,y=bl(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||r==="none",v=n+s,w=t.length;let S=n>0&&this.getParsed(n-1);for(let N=0;N<w;++N){const k=t[N],j=b?k:{};if(N<n||N>=v){j.skip=!0;continue}const C=this.getParsed(N),D=_e(C[m]),E=j[f]=a.getPixelForValue(C[f],N),O=j[m]=i||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[m],N);j.skip=isNaN(E)||isNaN(O)||D,j.stop=N>0&&Math.abs(C[f]-S[f])>y,g&&(j.parsed=C,j.raw=u.data[N]),h&&(j.options=d||this.resolveDataElementOptions(N,k.active?"active":r)),b||this.updateElement(k,N,j,r),S=C}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}de(lu,"id","line"),de(lu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),de(lu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function zr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ax{constructor(t){de(this,"options");this.options=t||{}}static override(t){Object.assign(Ax.prototype,t)}init(){}formats(){return zr()}parse(){return zr()}format(){return zr()}add(){return zr()}diff(){return zr()}startOf(){return zr()}endOf(){return zr()}}var e6={_date:Ax};function t6(e,t,n,s){const{controller:r,data:i,_sorted:a}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&a&&i.length){const u=l._reversePixels?j3:ri;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(g=>!_e(g[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(g=>!_e(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function rh(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),a=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=t6(i[l],t,a,r);for(let m=h;m<=f;++m){const p=d[m];p.skip||s(p,u,m)}}}function n6(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,a=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function gf(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||rh(e,n,t,function(l,c,u){!r&&!jl(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function s6(e,t,n,s){let r=[];function i(a,l,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],s),{angle:h}=w2(a,{x:t.x,y:t.y});wl(h,u,d)&&r.push({element:a,datasetIndex:l,index:c})}return rh(e,n,t,i),r}function r6(e,t,n,s,r,i){let a=[];const l=n6(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,r);if(s&&!m)return;const p=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(p))&&!m)return;const y=l(t,p);y<c?(a=[{element:d,datasetIndex:h,index:f}],c=y):y===c&&a.push({element:d,datasetIndex:h,index:f})}return rh(e,n,t,u),a}function xf(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?s6(e,t,n,r):r6(e,t,n,s,r,i)}function Rb(e,t,n,s,r){const i=[],a=n==="x"?"inXRange":"inYRange";let l=!1;return rh(e,n,t,(c,u,d)=>{c[a]&&c[a](t[n],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var i6={modes:{index(e,t,n,s){const r=Qr(t,e),i=n.axis||"x",a=n.includeInvisible||!1,l=n.intersect?gf(e,r,i,s,a):xf(e,r,i,!1,s,a),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,s){const r=Qr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;let l=n.intersect?gf(e,r,i,s,a):xf(e,r,i,!1,s,a);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,s){const r=Qr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return gf(e,r,i,s,a)},nearest(e,t,n,s){const r=Qr(t,e),i=n.axis||"xy",a=n.includeInvisible||!1;return xf(e,r,i,n.intersect,s,a)},x(e,t,n,s){const r=Qr(t,e);return Rb(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=Qr(t,e);return Rb(e,r,"y",n.intersect,s)}}};const U2=["left","top","right","bottom"];function to(e,t){return e.filter(n=>n.pos===t)}function Ib(e,t){return e.filter(n=>U2.indexOf(n.pos)===-1&&n.box.axis===t)}function no(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function a6(e){const t=[];let n,s,r,i,a,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:a,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:l});return t}function o6(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!U2.includes(r))continue;const a=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}function l6(e,t){const n=o6(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,a,l;for(i=0,a=e.length;i<a;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return n}function c6(e){const t=a6(e),n=no(t.filter(u=>u.box.fullSize),!0),s=no(to(t,"left"),!0),r=no(to(t,"right")),i=no(to(t,"top"),!0),a=no(to(t,"bottom")),l=Ib(t,"x"),c=Ib(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:to(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(a).concat(l)}}function Ob(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function W2(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function u6(e,t,n,s){const{pos:r,box:i}=n,a=e.maxPadding;if(!Ee(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&W2(a,i.getPadding());const l=Math.max(0,t.outerWidth-Ob(a,e,"left","right")),c=Math.max(0,t.outerHeight-Ob(a,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function d6(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function h6(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{i[a]=Math.max(t[a],n[a])}),i}return s(e?["left","right"]:["top","bottom"])}function So(e,t,n,s){const r=[];let i,a,l,c,u,d;for(i=0,a=e.length,u=0;i<a;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,h6(l.horizontal,t));const{same:h,other:f}=u6(t,n,l,s);u|=h&&r.length,d=d||f,c.fullSize||r.push(l)}return u&&So(r,t,n,s)||d}function Tc(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function Lb(e,t,n,s){const r=n.padding;let{x:i,y:a}=t;for(const l of e){const c=l.box,u=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;vl(u.start)&&(a=u.start),c.fullSize?Tc(c,r.left,a,n.outerWidth-r.right-r.left,f):Tc(c,t.left+u.placed,a,h,f),u.start=a,u.placed+=h,a=c.bottom}else{const h=t.h*d,f=u.size||c.width;vl(u.start)&&(i=u.start),c.fullSize?Tc(c,i,r.top,f,n.outerHeight-r.bottom-r.top):Tc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=a}var Tn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=In(e.options.layout.padding),i=Math.max(t-r.width,0),a=Math.max(n-r.height,0),l=c6(e.boxes),c=l.vertical,u=l.horizontal;Re(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/d,hBoxMaxHeight:a/2}),f=Object.assign({},r);W2(f,In(s));const m=Object.assign({maxPadding:f,w:i,h:a,x:r.left,y:r.top},r),p=l6(c.concat(u),h);So(l.fullSize,m,h,p),So(c,m,h,p),So(u,m,h,p)&&So(c,m,h,p),d6(m),Lb(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Lb(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Re(l.chartArea,g=>{const y=g.box;Object.assign(y,e.chartArea),y.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class H2{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class f6 extends H2{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cu="$chartjs",m6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fb=e=>e===null||e==="";function p6(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[cu]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Fb(r)){const i=wb(e,"width");i!==void 0&&(e.width=i)}if(Fb(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=wb(e,"height");i!==void 0&&(e.height=i)}return e}const q2=xF?{passive:!0}:!1;function g6(e,t,n){e&&e.addEventListener(t,n,q2)}function x6(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,q2)}function y6(e,t){const n=m6[e.type]||e.type,{x:s,y:r}=Qr(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function td(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function v6(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||td(l.addedNodes,s),a=a&&!td(l.removedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function b6(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||td(l.removedNodes,s),a=a&&!td(l.addedNodes,s);a&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Sl=new Map;let $b=0;function G2(){const e=window.devicePixelRatio;e!==$b&&($b=e,Sl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function w6(e,t){Sl.size||window.addEventListener("resize",G2),Sl.set(e,t)}function j6(e){Sl.delete(e),Sl.size||window.removeEventListener("resize",G2)}function N6(e,t,n){const s=e.canvas,r=s&&_x(s);if(!r)return;const i=C2((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),a=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return a.observe(r),w6(e,i),a}function yf(e,t,n){n&&n.disconnect(),t==="resize"&&j6(e)}function S6(e,t,n){const s=e.canvas,r=C2(i=>{e.ctx!==null&&n(y6(i,e))},e);return g6(s,t,r),r}class C6 extends H2{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(p6(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[cu])return!1;const s=n[cu].initial;["height","width"].forEach(i=>{const a=s[i];_e(a)?n.removeAttribute(i):n.setAttribute(i,a)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[cu],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),a={attach:v6,detach:b6,resize:N6}[n]||S6;r[n]=a(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:yf,detach:yf,resize:yf}[n]||x6)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return gF(t,n,s,r)}isAttached(t){const n=t&&_x(t);return!!(n&&n.isConnected)}}function k6(e){return!Px()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?f6:C6}var Wc;let Vs=(Wc=class{constructor(){de(this,"x");de(this,"y");de(this,"active",!1);de(this,"options");de(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return bl(this.x)&&bl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},de(Wc,"defaults",{}),de(Wc,"defaultRoutes"),Wc);function E6(e,t){const n=e.options.ticks,s=D6(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?P6(t):[],a=i.length,l=i[0],c=i[a-1],u=[];if(a>r)return _6(t,u,i,a/r),u;const d=T6(i,t,r);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(Pc(t,u,d,_e(m)?0:l-m,l),h=0,f=a-1;h<f;h++)Pc(t,u,d,i[h],i[h+1]);return Pc(t,u,d,c,_e(m)?t.length:c+m),u}return Pc(t,u,d),u}function D6(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function T6(e,t,n){const s=A6(e),r=t.length/n;if(!s)return Math.max(r,1);const i=p3(s);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>r)return c}return Math.max(r,1)}function P6(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function _6(e,t,n,s){let r=0,i=n[0],a;for(s=Math.ceil(s),a=0;a<e.length;a++)a===i&&(t.push(e[a]),r++,i=n[r*s])}function Pc(e,t,n,s,r){const i=je(s,0),a=Math.min(je(r,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<a;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function A6(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const M6=e=>e==="left"?"right":e==="right"?"left":e,Bb=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,zb=(e,t)=>Math.min(t||e,e);function Vb(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function R6(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,a=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(c-i,a-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>a+l)))return c}function I6(e,t){Re(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function so(e){return e.drawTicks?e.tickLength:0}function Ub(e,t){if(!e.display)return 0;const n=Rt(e.font,t),s=In(e.padding);return(dt(e.text)?e.text.length:1)*n.lineHeight+s.height}function O6(e,t){return ki(e,{scale:t,type:"scale"})}function L6(e,t,n){return ki(e,{tick:n,index:t,type:"tick"})}function F6(e,t,n){let s=Nx(e);return(n&&t!=="right"||!n&&t==="right")&&(s=M6(s)),s}function $6(e,t,n,s){const{top:r,left:i,bottom:a,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const g=a-r,y=l-i;if(e.isHorizontal()){if(m=_t(s,i,l),Ee(n)){const b=Object.keys(n)[0],v=n[b];p=d[b].getPixelForValue(v)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=Bb(e,n,t);f=l-i}else{if(Ee(n)){const b=Object.keys(n)[0],v=n[b];m=d[b].getPixelForValue(v)-y+t}else n==="center"?m=(u.left+u.right)/2-y+t:m=Bb(e,n,t);p=_t(s,a,r),h=n==="left"?-yt:yt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class Aa extends Vs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=es(t,Number.POSITIVE_INFINITY),n=es(n,Number.NEGATIVE_INFINITY),s=es(s,Number.POSITIVE_INFINITY),r=es(r,Number.NEGATIVE_INFINITY),{min:es(t,s),max:es(n,r),minDefined:Ft(t),maxDefined:Ft(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),a;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)a=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,a.min)),i||(s=Math.max(s,a.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:es(n,es(s,n)),max:es(s,es(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ve(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Y3(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Vb(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=E6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ve(this.options.afterUpdate,[this])}beforeSetDimensions(){Ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ve(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ve(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=Ve(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){Ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=zb(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let a=r,l,c,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=Mt(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(t.offset?.5:1)),c=this.maxHeight-so(t.grid)-n.padding-Ub(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),a=v3(Math.min(Math.asin(Mt((d.highest.height+6)/l,-1,1)),Math.asin(Mt(c/u,-1,1))-Math.asin(Mt(f/u,-1,1)))),a=Math.max(r,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){Ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ve(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Ub(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=so(i)+c):(t.height=this.maxHeight,t.width=so(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,p=Ts(this.labelRotation),g=Math.cos(p),y=Math.sin(p);if(l){const b=s.mirror?0:y*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+b+m)}else{const b=s.mirror?0:g*h.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+b+m)}this._calculatePadding(u,d,y,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=r*t.width,m=s*n.height):(f=s*t.height,m=r*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ve(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)_e(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Vb(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(n/zb(n,s));let u=0,d=0,h,f,m,p,g,y,b,v,w,S,N;for(h=0;h<n;h+=c){if(p=t[h].label,g=this._resolveTickFontOptions(h),r.font=y=g.string,b=i[y]=i[y]||{data:{},gc:[]},v=g.lineHeight,w=S=0,!_e(p)&&!dt(p))w=gb(r,b.data,b.gc,w,p),S=v;else if(dt(p))for(f=0,m=p.length;f<m;++f)N=p[f],!_e(N)&&!dt(N)&&(w=gb(r,b.data,b.gc,w,N),S+=v);a.push(w),l.push(S),u=Math.max(w,u),d=Math.max(S,d)}I6(i,n);const k=a.indexOf(u),j=l.indexOf(d),C=D=>({width:a[D]||0,height:l[D]||0});return{first:C(0),last:C(n-1),widest:C(k),highest:C(j),widths:a,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return w3(this._alignToPixels?Br(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=L6(this.getContext(),t,s))}return this.$context||(this.$context=O6(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ts(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),a=t.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:a,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=so(i),m=[],p=l.setContext(this.getContext()),g=p.display?p.width:0,y=g/2,b=function(V){return Br(s,V,g)};let v,w,S,N,k,j,C,D,E,O,F,L;if(a==="top")v=b(this.bottom),j=this.bottom-f,D=v-y,O=b(t.top)+y,L=t.bottom;else if(a==="bottom")v=b(this.top),O=t.top,L=b(t.bottom)-y,j=v+y,D=this.top+f;else if(a==="left")v=b(this.right),k=this.right-f,C=v-y,E=b(t.left)+y,F=t.right;else if(a==="right")v=b(this.left),E=t.left,F=b(t.right)-y,k=v+y,C=this.left+f;else if(n==="x"){if(a==="center")v=b((t.top+t.bottom)/2+.5);else if(Ee(a)){const V=Object.keys(a)[0],R=a[V];v=b(this.chart.scales[V].getPixelForValue(R))}O=t.top,L=t.bottom,j=v+y,D=j+f}else if(n==="y"){if(a==="center")v=b((t.left+t.right)/2);else if(Ee(a)){const V=Object.keys(a)[0],R=a[V];v=b(this.chart.scales[V].getPixelForValue(R))}k=v-y,C=k-f,E=t.left,F=t.right}const P=je(r.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/P));for(w=0;w<h;w+=B){const V=this.getContext(w),R=i.setContext(V),T=l.setContext(V),M=R.lineWidth,U=R.color,H=T.dash||[],Z=T.dashOffset,oe=R.tickWidth,ue=R.tickColor,ve=R.tickBorderDash||[],Ne=R.tickBorderDashOffset;S=R6(this,w,c),S!==void 0&&(N=Br(s,S,M),u?k=C=E=F=N:j=D=O=L=N,m.push({tx1:k,ty1:j,tx2:C,ty2:D,x1:E,y1:O,x2:F,y2:L,width:M,color:U,borderDash:H,borderDashOffset:Z,tickWidth:oe,tickColor:ue,tickBorderDash:ve,tickBorderDashOffset:Ne}))}return this._ticksLength=h,this._borderValue=v,m}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=so(s.grid),m=f+d,p=h?-d:m,g=-Ts(this.labelRotation),y=[];let b,v,w,S,N,k,j,C,D,E,O,F,L="middle";if(r==="top")k=this.bottom-p,j=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+p,j=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);j=B.textAlign,N=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);j=B.textAlign,N=B.x}else if(n==="x"){if(r==="center")k=(t.top+t.bottom)/2+m;else if(Ee(r)){const B=Object.keys(r)[0],V=r[B];k=this.chart.scales[B].getPixelForValue(V)+m}j=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")N=(t.left+t.right)/2-m;else if(Ee(r)){const B=Object.keys(r)[0],V=r[B];N=this.chart.scales[B].getPixelForValue(V)}j=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?L="top":c==="end"&&(L="bottom"));const P=this._getLabelSizes();for(b=0,v=l.length;b<v;++b){w=l[b],S=w.label;const B=i.setContext(this.getContext(b));C=this.getPixelForTick(b)+i.labelOffset,D=this._resolveTickFontOptions(b),E=D.lineHeight,O=dt(S)?S.length:1;const V=O/2,R=B.color,T=B.textStrokeColor,M=B.textStrokeWidth;let U=j;a?(N=C,j==="inner"&&(b===v-1?U=this.options.reverse?"left":"right":b===0?U=this.options.reverse?"right":"left":U="center"),r==="top"?u==="near"||g!==0?F=-O*E+E/2:u==="center"?F=-P.highest.height/2-V*E+E:F=-P.highest.height+E/2:u==="near"||g!==0?F=E/2:u==="center"?F=P.highest.height/2-V*E:F=P.highest.height-O*E,h&&(F*=-1),g!==0&&!B.showLabelBackdrop&&(N+=E/2*Math.sin(g))):(k=C,F=(1-O)*E/2);let H;if(B.showLabelBackdrop){const Z=In(B.backdropPadding),oe=P.heights[b],ue=P.widths[b];let ve=F-Z.top,Ne=0-Z.left;switch(L){case"middle":ve-=oe/2;break;case"bottom":ve-=oe;break}switch(j){case"center":Ne-=ue/2;break;case"right":Ne-=ue;break;case"inner":b===v-1?Ne-=ue:b>0&&(Ne-=ue/2);break}H={left:Ne,top:ve,width:ue+Z.width,height:oe+Z.height,color:B.backdropColor}}y.push({label:S,font:D,textOffset:F,options:{rotation:g,color:R,strokeColor:T,strokeWidth:M,textAlign:U,textBaseline:L,translation:[N,k],backdrop:H}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ts(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,a=this._getLabelSizes(),l=t+i,c=a.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:a}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,a),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,a;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,a=r.length;i<a;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),a=s.display?i.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Br(t,this.left,a)-a/2,d=Br(t,this.right,l)+l/2,h=f=c):(h=Br(t,this.top,a)-a/2,f=Br(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&th(s,r);const i=this.getLabelItems(t);for(const a of i){const l=a.options,c=a.font,u=a.label,d=a.textOffset;Nl(s,u,0,d,c,l)}r&&nh(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Rt(s.font),a=In(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Ee(n)?(c+=a.bottom,dt(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=$6(this,c,n,l);Nl(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:F6(l,n,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=je(t.grid&&t.grid.z,-1),r=je(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Aa.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,a;for(i=0,a=n.length;i<a;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Rt(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class _c{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;V6(n)&&(s=this.register(n));const r=this.items,i=t.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,B6(t,a,s),this.override&&at.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in at[r]&&(delete at[r][s],this.override&&delete yi[s])}}function B6(e,t,n){const s=yl(Object.create(null),[n?at.get(n):{},at.get(t),e.defaults]);at.set(t,s),e.defaultRoutes&&z6(t,e.defaultRoutes),e.descriptors&&at.describe(t,e.descriptors)}function z6(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),a=t[n].split("."),l=a.pop(),c=a.join(".");at.route(i,r,c,l)})}function V6(e){return"id"in e&&"defaults"in e}class U6{constructor(){this.controllers=new _c(ui,"datasets",!0),this.elements=new _c(Vs,"elements"),this.plugins=new _c(Object,"plugins"),this.scales=new _c(Aa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Re(r,a=>{const l=s||this._getRegistryForType(a);this._exec(t,l,a)})})}_exec(t,n,s){const r=wx(t);Ve(s["before"+r],[],s),n[t](s),Ve(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var ss=new U6;class W6{constructor(){this._init=[]}notify(t,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),a=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,n,s,r){r=r||{};for(const i of t){const a=i.plugin,l=a[s],c=[n,r,i.options];if(Ve(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=je(s.options&&s.options.plugins,{}),i=H6(s);return r===!1&&!n?[]:G6(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function H6(e){const t={},n=[],s=Object.keys(ss.plugins.items);for(let i=0;i<s.length;i++)n.push(ss.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const a=r[i];n.indexOf(a)===-1&&(n.push(a),t[a.id]=!0)}return{plugins:n,localIds:t}}function q6(e,t){return!t&&e===!1?null:e===!0?{}:e}function G6(e,{plugins:t,localIds:n},s,r){const i=[],a=e.getContext();for(const l of t){const c=l.id,u=q6(s[c],r);u!==null&&i.push({plugin:l,options:Y6(e.config,{plugin:l,local:n[c]},u,a)})}return i}function Y6(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),a=e.getOptionScopes(s,i);return n&&t.defaults&&a.push(t.defaults),e.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function bp(e,t){const n=at.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Q6(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function K6(e,t){return e===t?"_index_":"_value_"}function Wb(e){if(e==="x"||e==="y"||e==="r")return e}function X6(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function wp(e,...t){if(Wb(e))return e;for(const n of t){const s=n.axis||X6(n.position)||e.length>1&&Wb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Hb(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function J6(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return Hb(e,"x",n[0])||Hb(e,"y",n[0])}return{}}function Z6(e,t){const n=yi[e.type]||{scales:{}},s=t.scales||{},r=bp(e.type,t),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!Ee(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=wp(a,l,J6(a,e),at.scales[l.type]),u=K6(c,r),d=n.scales||{};i[a]=zo(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,c=a.indexAxis||bp(l,t),d=(yi[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=Q6(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),zo(i[m],[{axis:f},s[m],d[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];zo(l,[at.scales[l.type],at.scale])}),i}function Y2(e){const t=e.options||(e.options={});t.plugins=je(t.plugins,{}),t.scales=Z6(e,t)}function Q2(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function e$(e){return e=e||{},e.data=Q2(e.data),Y2(e),e}const qb=new Map,K2=new Set;function Ac(e,t){let n=qb.get(e);return n||(n=t(),qb.set(e,n),K2.add(n)),n}const ro=(e,t,n)=>{const s=xi(t,n);s!==void 0&&e.add(s)};let t$=class{constructor(t){this._config=e$(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Q2(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Y2(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ac(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Ac(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Ac(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Ac(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,a=this._cachedScopes(t,s),l=a.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>ro(c,t,h))),d.forEach(h=>ro(c,r,h)),d.forEach(h=>ro(c,yi[i]||{},h)),d.forEach(h=>ro(c,at,h)),d.forEach(h=>ro(c,yp,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),K2.has(n)&&a.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,yi[n]||{},at.datasets[n]||{},{type:n},at,yp]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=Gb(this._resolverCache,t,r);let c=a;if(s$(a,n)){i.$shared=!1,s=Pr(s)?s():s;const u=this.createResolver(t,s,l);c=ba(a,s,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,s=[""],r){const{resolver:i}=Gb(this._resolverCache,t,s);return Ee(n)?ba(i,n,void 0,r):i}};function Gb(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:Ex(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const n$=e=>Ee(e)&&Object.getOwnPropertyNames(e).some(t=>Pr(e[t]));function s$(e,t){const{isScriptable:n,isIndexable:s}=T2(e);for(const r of t){const i=n(r),a=s(r),l=(a||i)&&e[r];if(i&&(Pr(l)||n$(l))||a&&dt(l))return!0}return!1}var r$="4.5.0";const i$=["top","bottom","left","right","chartArea"];function Yb(e,t){return e==="top"||e==="bottom"||i$.indexOf(e)===-1&&t==="x"}function Qb(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function Kb(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ve(n&&n.onComplete,[e],t)}function a$(e){const t=e.chart,n=t.options.animation;Ve(n&&n.onProgress,[e],t)}function X2(e){return Px()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const uu={},Xb=e=>{const t=X2(e);return Object.values(uu).filter(n=>n.canvas===t).pop()};function o$(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const a=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=a)}}}function l$(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}var Gs;let Ma=(Gs=class{static register(...t){ss.add(...t),Jb()}static unregister(...t){ss.remove(...t),Jb()}constructor(t,n){const s=this.config=new t$(n),r=X2(t),i=Xb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||k6(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=a3(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new W6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=C3(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],uu[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}bs.listen(this,"complete",Kb),bs.listen(this,"progress",a$),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return _e(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xb(this.canvas,this.ctx),this}stop(){return bs.stop(this),this}resize(t,n){bs.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,bb(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Ve(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Re(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{});let i=[];n&&(i=i.concat(Object.keys(n).map(a=>{const l=n[a],c=wp(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Re(i,a=>{const l=a.options,c=l.id,u=wp(c,l),d=je(l.type,a.dtype);(l.position===void 0||Yb(l.position,u)!==Yb(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{const f=ss.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),Re(r,(a,l)=>{a||delete s[l]}),Re(s,a=>{Tn.configure(this,a,a.options),Tn.addBox(this,a)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(Qb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let a=this.getDatasetMeta(s);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=i.indexAxis||bp(l,this.options),a.order=i.order||0,a.index=s,a.label=""+i.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=ss.getController(l),{datasetElementType:u,dataElementType:d}=at.datasets[l];Object.assign(c,{dataElementType:ss.getElement(d),datasetElementType:u&&ss.getElement(u)}),a.controller=new c(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Re(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),r||Re(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Qb("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Re(this.scales,t=>{Tn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!ob(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const a=s==="_removeElements"?-i:i;o$(t,r,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!ob(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Tn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Re(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Pr(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bs.has(this)?this.attached&&!bs.running(this)&&bs.start(this):(this.draw(),Kb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=$2(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&th(n,r),t.controller.draw(),r&&nh(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return jl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=i6.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=ki(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),a=i.controller._resolveAnimations(void 0,r);vl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),bs.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),xb(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete uu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,a)=>{n.addEventListener(this,i,a),t[i]=a},r=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};Re(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Re(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Re(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,a,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!Ku(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=i(n,t),l=s?t:i(t,n);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,a=n,l=this._getActiveElements(t,r,s,a),c=h3(t),u=l$(t,this._lastEvent,s,c);s&&(this._lastEvent=null,Ve(i.onHover,[t,l,this],this),c&&Ve(i.onClick,[t,l,this],this));const d=!Ku(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}},de(Gs,"defaults",at),de(Gs,"instances",uu),de(Gs,"overrides",yi),de(Gs,"registry",ss),de(Gs,"version",r$),de(Gs,"getChart",Xb),Gs);function Jb(){return Re(Ma.instances,e=>e._plugins.invalidate())}function c$(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:a,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/a,on(s-n));if(e.beginPath(),e.arc(r,i,a-u/2,s+h/2,n-h/2),l>0){const f=Math.min(u/l,on(s-n));e.arc(r,i,l+u/2,n-f/2,s+f/2,!0)}else{const f=Math.min(u/2,a*on(s-n));if(d==="round")e.arc(r,i,f,n-Ie/2,s+Ie/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Ie/2)+r,g=-m*Math.sin(n+Ie/2)+i,y=m*Math.cos(s+Ie/2)+r,b=m*Math.sin(s+Ie/2)+i;e.lineTo(p,g),e.lineTo(y,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function u$(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:a,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,a,l,s-u,n+u),c>r?(u=r/c,e.arc(i,a,c,n+u,s-u,!0)):e.arc(i,a,r,n+yt,s-yt),e.closePath(),e.clip()}function d$(e){return kx(e,["outerStart","outerEnd","innerStart","innerEnd"])}function h$(e,t,n,s){const r=d$(e.options.borderRadius),i=(n-t)/2,a=Math.min(i,s*t/2),l=c=>{const u=(n-Math.min(i,c))*s/2;return Mt(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Mt(r.innerStart,0,a),innerEnd:Mt(r.innerEnd,0,a)}}function Ai(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function nd(e,t,n,s,r,i){const{x:a,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+s+n-u,0),f=d>0?d+s+n+u:0;let m=0;const p=r-c;if(s){const B=d>0?d-s:0,V=h>0?h-s:0,R=(B+V)/2,T=R!==0?p*R/(R+s):p;m=(p-T)/2}const g=Math.max(.001,p*h-n/Ie)/h,y=(p-g)/2,b=c+y+m,v=r-y-m,{outerStart:w,outerEnd:S,innerStart:N,innerEnd:k}=h$(t,f,h,v-b),j=h-w,C=h-S,D=b+w/j,E=v-S/C,O=f+N,F=f+k,L=b+N/O,P=v-k/F;if(e.beginPath(),i){const B=(D+E)/2;if(e.arc(a,l,h,D,B),e.arc(a,l,h,B,E),S>0){const M=Ai(C,E,a,l);e.arc(M.x,M.y,S,E,v+yt)}const V=Ai(F,v,a,l);if(e.lineTo(V.x,V.y),k>0){const M=Ai(F,P,a,l);e.arc(M.x,M.y,k,v+yt,P+Math.PI)}const R=(v-k/f+(b+N/f))/2;if(e.arc(a,l,f,v-k/f,R,!0),e.arc(a,l,f,R,b+N/f,!0),N>0){const M=Ai(O,L,a,l);e.arc(M.x,M.y,N,L+Math.PI,b-yt)}const T=Ai(j,b,a,l);if(e.lineTo(T.x,T.y),w>0){const M=Ai(j,D,a,l);e.arc(M.x,M.y,w,b-yt,D)}}else{e.moveTo(a,l);const B=Math.cos(D)*h+a,V=Math.sin(D)*h+l;e.lineTo(B,V);const R=Math.cos(E)*h+a,T=Math.sin(E)*h+l;e.lineTo(R,T)}e.closePath()}function f$(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l}=t;let c=t.endAngle;if(i){nd(e,t,n,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=a+(l%Je||Je))}return nd(e,t,n,s,c,r),e.fill(),c}function m$(e,t,n,s,r){const{fullCircles:i,startAngle:a,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let g=t.endAngle;if(i){nd(e,t,n,s,g,r);for(let y=0;y<i;++y)e.stroke();isNaN(l)||(g=a+(l%Je||Je))}p&&u$(e,t,g),c.selfJoin&&g-a>=Ie&&m===0&&d!=="miter"&&c$(e,t,g),i||(nd(e,t,n,s,g,r),e.stroke())}class Co extends Vs{constructor(n){super();de(this,"circumference");de(this,"endAngle");de(this,"fullCircles");de(this,"innerRadius");de(this,"outerRadius");de(this,"pixelMargin");de(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:a,distance:l}=w2(i,{x:n,y:s}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,p=je(f,u-c),g=wl(a,c,u)&&c!==u,y=p>=Je||g,b=Ps(l,d+m,h+m);return y&&b}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+a)/2,f=(l+c+d+u)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,a=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>Je?Math.floor(r/Je):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Ie,r||0)),d=i*u;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,f$(n,this,d,a,l),m$(n,this,d,a,l),n.restore()}}de(Co,"id","arc"),de(Co,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),de(Co,"defaultRoutes",{backgroundColor:"backgroundColor"}),de(Co,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function J2(e,t,n=t){e.lineCap=je(n.borderCapStyle,t.borderCapStyle),e.setLineDash(je(n.borderDash,t.borderDash)),e.lineDashOffset=je(n.borderDashOffset,t.borderDashOffset),e.lineJoin=je(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=je(n.borderWidth,t.borderWidth),e.strokeStyle=je(n.borderColor,t.borderColor)}function p$(e,t,n){e.lineTo(n.x,n.y)}function g$(e){return e.stepped?$3:e.tension||e.cubicInterpolationMode==="monotone"?B3:p$}function Z2(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:a,end:l}=t,c=Math.max(r,a),u=Math.min(i,l),d=r<a&&i<a||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function x$(e,t,n,s){const{points:r,options:i}=t,{count:a,start:l,loop:c,ilen:u}=Z2(r,n,s),d=g$(i);let{move:h=!0,reverse:f}=s||{},m,p,g;for(m=0;m<=u;++m)p=r[(l+(f?u-m:m))%a],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,g,p,f,i.stepped),g=p);return c&&(p=r[(l+(f?u:0))%a],d(e,g,p,f,i.stepped)),!!c}function y$(e,t,n,s){const r=t.points,{count:i,start:a,ilen:l}=Z2(r,n,s),{move:c=!0,reverse:u}=s||{};let d=0,h=0,f,m,p,g,y,b;const v=S=>(a+(u?l-S:S))%i,w=()=>{g!==y&&(e.lineTo(d,y),e.lineTo(d,g),e.lineTo(d,b))};for(c&&(m=r[v(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[v(f)],m.skip)continue;const S=m.x,N=m.y,k=S|0;k===p?(N<g?g=N:N>y&&(y=N),d=(h*d+S)/++h):(w(),e.lineTo(S,N),p=k,h=0,g=y=N),b=N}w()}function jp(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?y$:x$}function v$(e){return e.stepped?yF:e.tension||e.cubicInterpolationMode==="monotone"?vF:Kr}function b$(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),J2(e,t.options),e.stroke(r)}function w$(e,t,n,s){const{segments:r,options:i}=t,a=jp(t);for(const l of r)J2(e,i,l.style),e.beginPath(),a(e,t,l,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const j$=typeof Path2D=="function";function N$(e,t,n,s){j$&&!t.options.segment?b$(e,t,n,s):w$(e,t,n,s)}class lr extends Vs{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;uF(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=CF(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,a=F2(this,{property:n,start:r,end:r});if(!a.length)return;const l=[],c=v$(s);let u,d;for(u=0,d=a.length;u<d;++u){const{start:h,end:f}=a[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const g=Math.abs((r-m[n])/(p[n]-m[n])),y=c(m,p,g,s.stepped);y[n]=t[n],l.push(y)}return l.length===1?l[0]:l}pathSegment(t,n,s){return jp(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=jp(this);let a=this._loop;n=n||0,s=s||this.points.length-n;for(const l of r)a&=i(t,this,l,{start:n,end:n+s-1});return!!a}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),N$(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}de(lr,"id","line"),de(lr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),de(lr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),de(lr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Zb(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class du extends Vs{constructor(n){super();de(this,"parsed");de(this,"skip");de(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(n-a,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return Zb(this,n,"x",s)}inYRange(n,s){return Zb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!jl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,vp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}de(du,"id","point"),de(du,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),de(du,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ek(e,t){const{x:n,y:s,base:r,width:i,height:a}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=a/2,l=Math.min(n,r),c=Math.max(n,r),u=s-h,d=s+h):(h=i/2,l=n-h,c=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function cr(e,t,n,s){return e?0:Mt(t,n,s)}function S$(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=D2(s);return{t:cr(r.top,i.top,0,n),r:cr(r.right,i.right,0,t),b:cr(r.bottom,i.bottom,0,n),l:cr(r.left,i.left,0,t)}}function C$(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=ra(r),a=Math.min(t,n),l=e.borderSkipped,c=s||Ee(r);return{topLeft:cr(!c||l.top||l.left,i.topLeft,0,a),topRight:cr(!c||l.top||l.right,i.topRight,0,a),bottomLeft:cr(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:cr(!c||l.bottom||l.right,i.bottomRight,0,a)}}function k$(e){const t=ek(e),n=t.right-t.left,s=t.bottom-t.top,r=S$(e,n/2,s/2),i=C$(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function vf(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&ek(e,s);return l&&(r||Ps(t,l.left,l.right))&&(i||Ps(n,l.top,l.bottom))}function E$(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function D$(e,t){e.rect(t.x,t.y,t.w,t.h)}function bf(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+a,radius:e.radius}}class hu extends Vs{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:a}=k$(this),l=E$(a.radius)?Zu:D$;t.save(),(a.w!==i.w||a.h!==i.h)&&(t.beginPath(),l(t,bf(a,n,i)),t.clip(),l(t,bf(i,-n,a)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,bf(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return vf(this,t,n,s)}inXRange(t,n){return vf(this,t,null,n)}inYRange(t,n){return vf(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}de(hu,"id","bar"),de(hu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),de(hu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function T$(e,t,n){const s=e.segments,r=e.points,i=t.points,a=[];for(const l of s){let{start:c,end:u}=l;u=ih(c,u,r);const d=Np(n,r[c],r[u],l.loop);if(!t.segments){a.push({source:l,target:d,start:r[c],end:r[u]});continue}const h=F2(t,d);for(const f of h){const m=Np(n,i[f.start],i[f.end],f.loop),p=L2(l,r,m);for(const g of p)a.push({source:g,target:f,start:{[n]:ew(d,m,"start",Math.max)},end:{[n]:ew(d,m,"end",Math.min)}})}}return a}function Np(e,t,n,s){if(s)return;let r=t[e],i=n[e];return e==="angle"&&(r=on(r),i=on(i)),{property:e,start:r,end:i}}function P$(e,t){const{x:n=null,y:s=null}=e||{},r=t.points,i=[];return t.segments.forEach(({start:a,end:l})=>{l=ih(a,l,r);const c=r[a],u=r[l];s!==null?(i.push({x:c.x,y:s}),i.push({x:u.x,y:s})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function ih(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function ew(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function tk(e,t){let n=[],s=!1;return dt(e)?(s=!0,n=e):n=P$(e,t),n.length?new lr({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function tw(e){return e&&e.fill!==!1}function _$(e,t,n){let r=e[t].fill;const i=[t];let a;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Ft(r))return r;if(a=e[r],!a)return!1;if(a.visible)return r;i.push(r),r=a.fill}return!1}function A$(e,t,n){const s=O$(e);if(Ee(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return Ft(r)&&Math.floor(r)===r?M$(s[0],t,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function M$(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function R$(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Ee(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function I$(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:Ee(e)?s=e.value:s=t.getBaseValue(),s}function O$(e){const t=e.options,n=t.fill;let s=je(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function L$(e){const{scale:t,index:n,line:s}=e,r=[],i=s.segments,a=s.points,l=F$(t,n);l.push(tk({x:null,y:t.bottom},s));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)$$(r,a[d],l)}return new lr({points:r,options:{}})}function F$(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function $$(e,t,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:a,last:l,point:c}=B$(i,t,"x");if(!(!c||a&&l)){if(a)s.unshift(c);else if(e.push(c),!l)break}}e.push(...s)}function B$(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const r=s[n],i=e.segments,a=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=a[d.start][n],f=a[d.end][n];if(Ps(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:s}}class nk{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:r,y:i,radius:a}=this;return n=n||{start:0,end:Je},t.arc(r,i,a,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:r}=this,i=t.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function z$(e){const{chart:t,fill:n,line:s}=e;if(Ft(n))return V$(t,n);if(n==="stack")return L$(e);if(n==="shape")return!0;const r=U$(e);return r instanceof nk?r:tk(r,s)}function V$(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function U$(e){return(e.scale||{}).getPointPositionForValue?H$(e):W$(e)}function W$(e){const{scale:t={},fill:n}=e,s=R$(n,t);if(Ft(s)){const r=t.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function H$(e){const{scale:t,fill:n}=e,s=t.options,r=t.getLabels().length,i=s.reverse?t.max:t.min,a=I$(n,t,i),l=[];if(s.grid.circular){const c=t.getPointPositionForValue(0,i);return new nk({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(t.getPointPositionForValue(c,a));return l}function wf(e,t,n){const s=z$(t),{chart:r,index:i,line:a,scale:l,axis:c}=t,u=a.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=r.getDatasetMeta(i),g=$2(r,p);s&&a.points.length&&(th(e,n),q$(e,{line:a,target:s,above:f,below:m,area:n,scale:l,axis:c,clip:g}),nh(e))}function q$(e,t){const{line:n,target:s,above:r,below:i,area:a,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==r&&(u==="x"?(nw(e,s,a.top),jf(e,{line:n,target:s,color:r,scale:l,property:u,clip:c}),e.restore(),e.save(),nw(e,s,a.bottom)):u==="y"&&(sw(e,s,a.left),jf(e,{line:n,target:s,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),sw(e,s,a.right),d=r)),jf(e,{line:n,target:s,color:d,scale:l,property:u,clip:c}),e.restore()}function nw(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[ih(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function sw(e,t,n){const{segments:s,points:r}=t;let i=!0,a=!1;e.beginPath();for(const l of s){const{start:c,end:u}=l,d=r[c],h=r[ih(c,u,r)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),a=!!t.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function jf(e,t){const{line:n,target:s,property:r,color:i,scale:a,clip:l}=t,c=T$(n,s,r);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=s!==!0;e.save(),e.fillStyle=m,G$(e,a,l,p&&Np(r,h,f)),e.beginPath();const g=!!n.pathSegment(e,u);let y;if(p){g?e.closePath():rw(e,s,f,r);const b=!!s.pathSegment(e,d,{move:g,reverse:!0});y=g&&b,y||rw(e,s,h,r)}e.closePath(),e.fill(y?"evenodd":"nonzero"),e.restore()}}function G$(e,t,n,s){const r=t.chart.chartArea,{property:i,start:a,end:l}=s||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=a,u=r.top,d=l,h=r.bottom):(c=r.left,u=a,d=r.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function rw(e,t,n,s){const r=t.interpolate(n,s);r&&e.lineTo(r.x,r.y)}var Mx={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,r=[];let i,a,l,c;for(a=0;a<s;++a)i=e.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof lr&&(c={visible:e.isDatasetVisible(a),index:a,fill:A$(l,a,s),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(a=0;a<s;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=_$(r,a,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",r=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),s&&l.fill&&wf(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;tw(i)&&wf(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!tw(s)||n.drawTime!=="beforeDatasetDraw"||wf(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const iw=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},Y$=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class aw extends Vs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Ve(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Rt(s.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=iw(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(a,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,g)=>{const y=s+n/2+i.measureText(p.text).width;(g===0||u[u.length-1]+y+2*l>a)&&(h+=d,u[u.length-(g>0?0:1)]=0,m+=d,f++),c[g]={left:0,top:m,row:f,width:y,height:r},u[u.length-1]+=y+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-t;let h=l,f=0,m=0,p=0,g=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:v,itemHeight:w}=Q$(s,n,i,y,r);b>0&&m+w+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,g++,f=m=0),c[b]={left:p,top:m,col:g,width:v,height:w},f=Math.max(f,v),m+=w+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,a=ia(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=_t(s,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=_t(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+r}else{let l=0,c=_t(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=_t(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;th(t,this),this._draw(),nh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:a}=t,l=at.color,c=ia(t.rtl,this.left,this.width),u=Rt(a.font),{padding:d}=a,h=u.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:y}=iw(a,h),b=function(k,j,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();const D=je(C.lineWidth,1);if(r.fillStyle=je(C.fillStyle,l),r.lineCap=je(C.lineCap,"butt"),r.lineDashOffset=je(C.lineDashOffset,0),r.lineJoin=je(C.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=je(C.strokeStyle,l),r.setLineDash(je(C.lineDash,[])),a.usePointStyle){const E={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:D},O=c.xPlus(k,p/2),F=j+f;E2(r,E,O,F,a.pointStyleWidth&&p)}else{const E=j+Math.max((h-g)/2,0),O=c.leftForLtr(k,p),F=ra(C.borderRadius);r.beginPath(),Object.values(F).some(L=>L!==0)?Zu(r,{x:O,y:E,w:p,h:g,radius:F}):r.rect(O,E,p,g),r.fill(),D!==0&&r.stroke()}r.restore()},v=function(k,j,C){Nl(r,C.text,k,j+y/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?m={x:_t(i,this.left+d,this.right-s[0]),y:this.top+d+S,line:0}:m={x:this.left+d,y:_t(i,this.top+S+d,this.bottom-n[0].height),line:0},R2(this.ctx,t.textDirection);const N=y+d;this.legendItems.forEach((k,j)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const C=r.measureText(k.text).width,D=c.textAlign(k.textAlign||(k.textAlign=a.textAlign)),E=p+f+C;let O=m.x,F=m.y;c.setWidth(this.width),w?j>0&&O+E+d>this.right&&(F=m.y+=N,m.line++,O=m.x=_t(i,this.left+d,this.right-s[m.line])):j>0&&F+N>this.bottom&&(O=m.x=O+n[m.line].width+d,m.line++,F=m.y=_t(i,this.top+S+d,this.bottom-n[m.line].height));const L=c.x(O);if(b(L,F,k),O=k3(D,O+p+f,w?O+E:this.right,t.rtl),v(c.x(O),F,k),w)m.x+=E+d;else if(typeof k.text!="string"){const P=u.lineHeight;m.y+=sk(k,P)+d}else m.y+=N}),I2(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Rt(n.font),r=In(n.padding);if(!n.display)return;const i=ia(t.rtl,this.left,this.width),a=this.ctx,l=n.position,c=s.size/2,u=r.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=_t(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);d=u+_t(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=_t(l,h,h+f);a.textAlign=i.textAlign(Nx(l)),a.textBaseline="middle",a.strokeStyle=n.color,a.fillStyle=n.color,a.font=s.string,Nl(a,n.text,m,d,s)}_computeTitleHeight(){const t=this.options.title,n=Rt(t.font),s=In(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(Ps(t,this.left,this.right)&&Ps(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],Ps(t,r.left,r.left+r.width)&&Ps(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!J$(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=Y$(r,s);r&&!i&&Ve(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&Ve(n.onHover,[t,s,this],this)}else s&&Ve(n.onClick,[t,s,this],this)}}function Q$(e,t,n,s,r){const i=K$(s,e,t,n),a=X$(r,s,t.lineHeight);return{itemWidth:i,itemHeight:a}}function K$(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,a)=>i.length>a.length?i:a)),t+n.size/2+s.measureText(r).width}function X$(e,t,n){let s=e;return typeof t.text!="string"&&(s=sk(t,n)),s}function sk(e,t){const n=e.text?e.text.length:0;return t*n}function J$(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Rx={id:"legend",_element:aw,start(e,t,n){const s=e.legend=new aw({ctx:e.ctx,options:n,chart:e});Tn.configure(e,s,n),Tn.addBox(e,s)},stop(e){Tn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Tn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=In(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:a&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class rk extends Vs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=dt(s.text)?s.text.length:1;this._padding=In(s.padding);const i=r*Rt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:a}=this,l=a.align;let c=0,u,d,h;return this.isHorizontal()?(d=_t(l,s,i),h=n+t,u=i-s):(a.position==="left"?(d=s+t,h=_t(l,r,n),c=Ie*-.5):(d=i-t,h=_t(l,n,r),c=Ie*.5),u=r-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Rt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Nl(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:Nx(n.align),textBaseline:"middle",translation:[a,l]})}}function Z$(e,t){const n=new rk({ctx:e.ctx,options:t,chart:e});Tn.configure(e,n,t),Tn.addBox(e,n),e.titleBlock=n}var ik={id:"title",_element:rk,start(e,t,n){Z$(e,n)},stop(e){const t=e.titleBlock;Tn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Tn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ko={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=e.length;i<a;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=xp(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function ts(e,t){return t&&(dt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function ws(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function eB(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:a,value:l}=i.getLabelAndValue(r);return{chart:e,label:a,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function ow(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:a,boxHeight:l}=t,c=Rt(t.bodyFont),u=Rt(t.titleFont),d=Rt(t.footerFont),h=i.length,f=r.length,m=s.length,p=In(t.padding);let g=p.height,y=0,b=s.reduce((S,N)=>S+N.before.length+N.lines.length+N.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const S=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=m*S+(b-m)*c.lineHeight+(b-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let v=0;const w=function(S){y=Math.max(y,n.measureText(S).width+v)};return n.save(),n.font=u.string,Re(e.title,w),n.font=c.string,Re(e.beforeBody.concat(e.afterBody),w),v=t.displayColors?a+2+t.boxPadding:0,Re(s,S=>{Re(S.before,w),Re(S.lines,w),Re(S.after,w)}),v=0,n.font=d.string,Re(e.footer,w),n.restore(),y+=p.width,{width:y,height:g}}function tB(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function nB(e,t,n,s){const{x:r,width:i}=s,a=n.caretSize+n.caretPadding;if(e==="left"&&r+i+a>t.width||e==="right"&&r-i-a<0)return!0}function sB(e,t,n,s){const{x:r,width:i}=n,{width:a,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=a-i/2&&(u="right"),nB(u,e,t,n)&&(u="center"),u}function lw(e,t,n){const s=n.yAlign||t.yAlign||tB(e,n);return{xAlign:n.xAlign||t.xAlign||sB(e,t,n,s),yAlign:s}}function rB(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function iB(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function cw(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:a}=e,{xAlign:l,yAlign:c}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=ra(a);let p=rB(t,l);const g=iB(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Mt(p,0,s.width-t.width),y:Mt(g,0,s.height-t.height)}}function Mc(e,t,n){const s=In(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function uw(e){return ts([],ws(e))}function aB(e,t,n){return ki(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function dw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const ak={beforeTitle:ys,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:ys,beforeBody:ys,beforeLabel:ys,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return _e(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ys,afterBody:ys,beforeFooter:ys,footer:ys,afterFooter:ys};function Qt(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?ak[t].call(n,s):r}class Sp extends Vs{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new B2(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=aB(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=Qt(s,"beforeTitle",this,t),i=Qt(s,"title",this,t),a=Qt(s,"afterTitle",this,t);let l=[];return l=ts(l,ws(r)),l=ts(l,ws(i)),l=ts(l,ws(a)),l}getBeforeBody(t,n){return uw(Qt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Re(t,i=>{const a={before:[],lines:[],after:[]},l=dw(s,i);ts(a.before,ws(Qt(l,"beforeLabel",this,i))),ts(a.lines,Qt(l,"label",this,i)),ts(a.after,ws(Qt(l,"afterLabel",this,i))),r.push(a)}),r}getAfterBody(t,n){return uw(Qt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=Qt(s,"beforeFooter",this,t),i=Qt(s,"footer",this,t),a=Qt(s,"afterFooter",this,t);let l=[];return l=ts(l,ws(r)),l=ts(l,ws(i)),l=ts(l,ws(a)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],a=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(eB(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,s))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,s))),Re(l,d=>{const h=dw(t.callbacks,d);r.push(Qt(h,"labelColor",this,d)),i.push(Qt(h,"labelPointStyle",this,d)),a.push(Qt(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=ko[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=ow(this,s),u=Object.assign({},l,c),d=lw(this.chart,s,u),h=cw(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=ra(l),{x:f,y:m}=t,{width:p,height:g}=n;let y,b,v,w,S,N;return i==="center"?(S=m+g/2,r==="left"?(y=f,b=y-a,w=S+a,N=S-a):(y=f+p,b=y+a,w=S-a,N=S+a),v=y):(r==="left"?b=f+Math.max(c,d)+a:r==="right"?b=f+p-Math.max(u,h)-a:b=this.caretX,i==="top"?(w=m,S=w-a,y=b-a,v=b+a):(w=m+g,S=w+a,y=b+a,v=b-a),N=w),{x1:y,x2:b,x3:v,y1:w,y2:S,y3:N}}drawTitle(t,n,s){const r=this.title,i=r.length;let a,l,c;if(i){const u=ia(s.rtl,this.x,this.width);for(t.x=Mc(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",a=Rt(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=a.string,c=0;c<i;++c)n.fillText(r[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=Rt(i.bodyFont),h=Mc(this,"left",i),f=r.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=r.leftForLtr(f,u)+u/2,b=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,vp(t,g,y,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,vp(t,g,y,b)}else{t.lineWidth=Ee(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=r.leftForLtr(f,u),y=r.leftForLtr(r.xPlus(f,1),u-2),b=ra(a.borderRadius);Object.values(b).some(v=>v!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Zu(t,{x:g,y:p,w:u,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Zu(t,{x:y,y:p+1,w:u-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,p,u,c),t.strokeRect(g,p,u,c),t.fillStyle=a.backgroundColor,t.fillRect(y,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=Rt(s.bodyFont);let f=h.lineHeight,m=0;const p=ia(s.rtl,this.x,this.width),g=function(C){n.fillText(C,p.x(t.x+m),t.y+f/2),t.y+=f+i},y=p.textAlign(a);let b,v,w,S,N,k,j;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,t.x=Mc(this,y,s),n.fillStyle=s.bodyColor,Re(this.beforeBody,g),m=l&&y!=="right"?a==="center"?u/2+d:u+2+d:0,S=0,k=r.length;S<k;++S){for(b=r[S],v=this.labelTextColors[S],n.fillStyle=v,Re(b.before,g),w=b.lines,l&&w.length&&(this._drawColorBox(n,t,S,p,s),f=Math.max(h.lineHeight,c)),N=0,j=w.length;N<j;++N)g(w[N]),f=h.lineHeight;Re(b.after,g)}m=0,f=h.lineHeight,Re(this.afterBody,g),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let a,l;if(i){const c=ia(s.rtl,this.x,this.width);for(t.x=Mc(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",a=Rt(s.footerFont),n.fillStyle=s.footerColor,n.font=a.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=ra(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),a==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),a==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const a=ko[t.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=ow(this,t),c=Object.assign({},a,this._size),u=lw(n,t,c),d=cw(t,c,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=In(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),R2(t,n.textDirection),i.y+=a.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),I2(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Ku(s,r),a=this._positionChanged(r,n);(i||a)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(t,i,n,s),l=this._positionChanged(a,t),c=n||!Ku(a,i)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&a.reverse(),a}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,a=ko[i.position].call(this,t,n);return a!==!1&&(s!==a.x||r!==a.y)}}de(Sp,"positioners",ko);var Ix={id:"tooltip",_element:Sp,positioners:ko,afterInit(e,t,n){n&&(e.tooltip=new Sp({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ak},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const oB=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function lB(e,t,n,s){const r=e.indexOf(t);if(r===-1)return oB(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const cB=(e,t)=>e===null?null:Mt(Math.round(e),0,t);function hw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class sd extends Aa{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(_e(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:lB(s,t,je(n,t),this._addedLabels),cB(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=t;a<=n;a++)r.push({value:a});return r}getLabelForValue(t){return hw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}de(sd,"id","category"),de(sd,"defaults",{ticks:{callback:hw}});function uB(e,t){const n=[],{bounds:r,step:i,min:a,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:g,max:y}=t,b=!_e(a),v=!_e(l),w=!_e(u),S=(y-g)/(h+1);let N=cb((y-g)/p/m)*m,k,j,C,D;if(N<1e-14&&!b&&!v)return[{value:g},{value:y}];D=Math.ceil(y/N)-Math.floor(g/N),D>p&&(N=cb(D*N/p/m)*m),_e(c)||(k=Math.pow(10,c),N=Math.ceil(N*k)/k),r==="ticks"?(j=Math.floor(g/N)*N,C=Math.ceil(y/N)*N):(j=g,C=y),b&&v&&i&&x3((l-a)/i,N/1e3)?(D=Math.round(Math.min((l-a)/N,d)),N=(l-a)/D,j=a,C=l):w?(j=b?a:j,C=v?l:C,D=u-1,N=(C-j)/D):(D=(C-j)/N,Vo(D,Math.round(D),N/1e3)?D=Math.round(D):D=Math.ceil(D));const E=Math.max(ub(N),ub(j));k=Math.pow(10,_e(c)?E:c),j=Math.round(j*k)/k,C=Math.round(C*k)/k;let O=0;for(b&&(f&&j!==a?(n.push({value:a}),j<a&&O++,Vo(Math.round((j+O*N)*k)/k,a,fw(a,S,e))&&O++):j<a&&O++);O<D;++O){const F=Math.round((j+O*N)*k)/k;if(v&&F>l)break;n.push({value:F})}return v&&f&&C!==l?n.length&&Vo(n[n.length-1].value,l,fw(l,S,e))?n[n.length-1].value=l:n.push({value:l}):(!v||C===l)&&n.push({value:C}),n}function fw(e,t,{horizontal:n,minRotation:s}){const r=Ts(s),i=(n?Math.sin(r):Math.cos(r))||.001,a=.75*t*(""+e).length;return Math.min(t/i,a)}class dB extends Aa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return _e(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const a=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=cs(r),u=cs(i);c<0&&u<0?l(0):c>0&&u>0&&a(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||a(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,a=uB(r,i);return t.bounds==="ticks"&&y3(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return Cx(t,this.chart.options.locale,this.options.ticks.format)}}class rd extends dB{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ft(t)?t:0,this.max=Ft(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Ts(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}de(rd,"id","linear"),de(rd,"defaults",{ticks:{callback:k2.formatters.numeric}});const ah={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xt=Object.keys(ah);function mw(e,t){return e-t}function pw(e,t){if(_e(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let a=t;return typeof s=="function"&&(a=s(a)),Ft(a)||(a=typeof s=="string"?n.parse(a,s):n.parse(a)),a===null?null:(r&&(a=r==="week"&&(bl(i)||i===!0)?n.startOf(a,"isoWeek",i):n.startOf(a,r)),+a)}function gw(e,t,n,s){const r=Xt.length;for(let i=Xt.indexOf(e);i<r-1;++i){const a=ah[Xt[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((n-t)/(l*a.size))<=s)return Xt[i]}return Xt[r-1]}function hB(e,t,n,s,r){for(let i=Xt.length-1;i>=Xt.indexOf(n);i--){const a=Xt[i];if(ah[a].common&&e._adapter.diff(r,s,a)>=t-1)return a}return Xt[n?Xt.indexOf(n):0]}function fB(e){for(let t=Xt.indexOf(e)+1,n=Xt.length;t<n;++t)if(ah[Xt[t]].common)return Xt[t]}function xw(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=jx(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function mB(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),a=t[t.length-1].value;let l,c;for(l=i;l<=a;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function yw(e,t,n){const s=[],r={},i=t.length;let a,l;for(a=0;a<i;++a)l=t[a],r[l]=a,s.push({value:l,major:!1});return i===0||!n?s:mB(e,s,r,n)}class id extends Aa{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new e6._date(t.adapters.date);r.init(n),zo(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:pw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ft(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Ft(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=this.max,l=N3(r,i,a);return this._unit=n.unit||(s.autoSkip?gw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):hB(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:fB(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),yw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;n=Mt(n,0,a),s=Mt(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,a=i.unit||gw(i.minUnit,n,s,this._getLabelCapacity(n)),l=je(r.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,u=bl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(s,n,a)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+a);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+t.add(f,l,a),m++)xw(d,f,p);return(f===s||r.bounds==="ticks"||m===1)&&xw(d,f,p),Object.keys(d).sort(mw).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,a=n||r[i];return this._adapter.format(t,a)}_tickFormatFunction(t,n,s,r){const i=this.options,a=i.ticks.callback;if(a)return Ve(a,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=s[n],m=u&&h&&f&&f.major;return this._adapter.format(t,r||(m?h:d))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=Ts(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*a,h:s*a+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,yw(this,[t],this._majorUnit),r),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(pw(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return N2(t.sort(mw))}}de(id,"id","time"),de(id,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rc(e,t,n){let s=0,r=e.length-1,i,a,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=ri(e,"pos",t)),{pos:i,time:l}=e[s],{pos:a,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=ri(e,"time",t)),{time:i,pos:l}=e[s],{time:a,pos:c}=e[r]);const u=a-i;return u?l+(c-l)*(t-i)/u:l}class vw extends id{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Rc(n,this.min),this._tableRange=Rc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let a,l,c,u,d;for(a=0,l=t.length;a<l;++a)u=t[a],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(a=0,l=r.length;a<l;++a)d=r[a+1],c=r[a-1],u=r[a],Math.round((d+c)/2)!==u&&i.push({time:u,pos:a/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Rc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Rc(this._table,s*this._tableRange+this._minPos,!0)}}de(vw,"id","timeseries"),de(vw,"defaults",id.defaults);const ok="label";function bw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function pB(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function lk(e,t){e.labels=t}function ck(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ok;const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(a=>a[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function gB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ok;const n={labels:[],datasets:[]};return lk(n,e.labels),ck(n,e.datasets,t),n}function xB(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=x.useRef(null),p=x.useRef(null),g=()=>{m.current&&(p.current=new Ma(m.current,{type:a,data:gB(l,i),options:c&&{...c},plugins:u}),bw(t,p.current))},y=()=>{bw(t,null),p.current&&(p.current.destroy(),p.current=null)};return x.useEffect(()=>{!r&&p.current&&c&&pB(p.current,c)},[r,c]),x.useEffect(()=>{!r&&p.current&&lk(p.current.config.data,l.labels)},[r,l.labels]),x.useEffect(()=>{!r&&p.current&&l.datasets&&ck(p.current.config.data,l.datasets,i)},[r,l.datasets]),x.useEffect(()=>{p.current&&(r?(y(),setTimeout(g)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),x.useEffect(()=>{p.current&&(y(),setTimeout(g))},[a]),x.useEffect(()=>(g(),()=>y()),[]),se.createElement("canvas",{ref:m,role:"img",height:n,width:s,...f},d)}const yB=x.forwardRef(xB);function Ox(e,t){return Ma.register(t),x.forwardRef((n,s)=>se.createElement(yB,{...n,ref:s,type:e}))}const vB=Ox("line",lu),bB=Ox("bar",ou),wB=Ox("doughnut",No);Ma.register(sd,rd,hu,ik,Ix,Rx,Mx);function uk({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(bB,{data:e,options:r})})}Ma.register(sd,rd,du,lr,ik,Ix,Rx,Mx);function jB({data:e,options:t,height:n=300}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(vB,{data:e,options:r})})}Ma.register(Co,Ix,Rx,Mx);function NB({data:e,options:t,height:n=250}){const r={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const a=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${a}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return o.jsx("div",{style:{height:`${n}px`,width:"100%"},children:o.jsx(wB,{data:e,options:r})})}const SB=x.memo(jB),CB=x.memo(uk),kB=x.memo(NB);function Nf(){const{user:e,isAuthenticated:t}=Qe(),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(0),[c,u]=x.useState(0),[d,h]=x.useState(!0),[f,m]=x.useState([]),[p,g]=x.useState([]),[y,b]=x.useState(null);x.useEffect(()=>{(async()=>{if(!t||!e){console.log("⏸️ Skipping data fetch - user not authenticated"),h(!1);return}try{console.log("🔄 AdminDashboard: Starting data fetch..."),b(null);const[C,D,E,O,F]=await Promise.all([Ul().catch(M=>(console.error("Leads error:",M),[])),Zd().catch(M=>(console.error("Jobs error:",M),[])),xx().catch(M=>(console.error("Equipment error:",M),[])),Wl().catch(M=>(console.error("Operators error:",M),[])),eh().catch(M=>(console.error("Deals error:",M),[]))]),L=M=>Array.isArray(M)?M:M&&typeof M=="object"&&M.data&&Array.isArray(M.data)||M&&typeof M=="object"&&M.success&&Array.isArray(M.data)?M.data:[],P=L(C),B=L(D),V=L(E),R=L(O),T=L(F);s(P),i(B),l(V.length),u(R.length),m(V),g(T)}catch(C){console.error("❌ Error fetching dashboard data:",C),b(`Failed to load dashboard data: ${(C==null?void 0:C.message)||C}`)}finally{h(!1)}})()},[t,e]);const v=x.useMemo(()=>{try{if(Array.isArray(p)&&p.length>0)return p.filter(j=>j&&j.stage==="won").reduce((j,C)=>j+(C.value||0),0)}catch(j){console.error("Error calculating revenue:",j)}return 0},[p]),w=x.useMemo(()=>Array.isArray(r)?r.filter(j=>j.status==="in_progress"||j.status==="scheduled").length/(a||1)*100:0,[r,a]),S=x.useMemo(()=>({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[15e4,2e5,18e4,22e4,25e4,v>0?v:3e5],backgroundColor:"rgba(56, 81, 159, 0.1)",borderColor:"#38519F",pointBackgroundColor:"#FFCC3F",pointBorderColor:"#38519F",pointHoverBackgroundColor:"#38519F",pointHoverBorderColor:"#FFCC3F",borderWidth:3,tension:.4,fill:!0}]}),[v]),N=x.useMemo(()=>({labels:["Available","In Use","Maintenance"],datasets:[{data:[Array.isArray(f)?f.filter(j=>j.status==="available").length:0,Array.isArray(f)?f.filter(j=>j.status==="in_use").length:0,Array.isArray(f)?f.filter(j=>j.status==="maintenance").length:0],backgroundColor:["#22C55E","#38519F","#FFCC3F"],borderColor:["#16A34A","#38519F","#FFCC3F"],borderWidth:2,hoverBorderWidth:4}]}),[f]),k=x.useMemo(()=>({labels:["Scheduled","In Progress","Completed","Cancelled"],datasets:[{label:"Jobs by Status",data:[Array.isArray(r)?r.filter(j=>j.status==="scheduled").length:0,Array.isArray(r)?r.filter(j=>j.status==="in_progress").length:0,Array.isArray(r)?r.filter(j=>j.status==="completed").length:0,Array.isArray(r)?r.filter(j=>j.status==="cancelled").length:0],backgroundColor:["rgba(56, 81, 159, 0.8)","rgba(34, 197, 94, 0.8)","rgba(64, 64, 64, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#38519F","#22C55E","#404040","#EF4444"],borderWidth:2,borderRadius:8}]}),[r]);return d?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-20 w-20 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 h-20 w-20 border-4 border-transparent border-t-brand-gold rounded-full animate-spin animate-reverse",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),o.jsxs("div",{className:"mt-6 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Dashboard"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fetching your data..."})]})]})}):y?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:o.jsx("div",{className:"flex justify-center py-20",children:o.jsx(ae,{variant:"bordered",className:"max-w-md bg-red-50 border-red-200",children:o.jsxs(le,{className:"text-center p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(NA,{className:"w-8 h-8 text-red-600"})}),o.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),o.jsx("p",{className:"text-red-600 mb-6",children:y}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20",children:o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin"]}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your business today."})]}),o.jsx("div",{className:"hidden md:flex items-center space-x-4",children:o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Last updated"}),o.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleTimeString()})]})})]})}),o.jsxs("section",{className:"grid gap-6 auto-fit-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},role:"region","aria-label":"Key Performance Indicators",children:[o.jsx(Ut,{title:"Total Revenue",value:Te(v),icon:o.jsx(Vd,{className:"h-5 w-5"}),variant:"primary",trend:{value:12.5,isPositive:!0},loading:d}),o.jsx(Ut,{title:"Equipment Fleet",value:a,subtitle:"Active units",icon:o.jsx(hn,{className:"h-5 w-5"}),variant:"success",trend:{value:8.2,isPositive:!0},loading:d}),o.jsx(Ut,{title:"Active Jobs",value:r.length,subtitle:"In progress",icon:o.jsx(H_,{className:"h-5 w-5"}),variant:"warning",trend:{value:3.1,isPositive:!1},loading:d}),o.jsx(Ut,{title:"Operators",value:c,subtitle:"Available staff",icon:o.jsx(Yn,{className:"h-5 w-5"}),variant:"accent",trend:{value:5.7,isPositive:!0},loading:d})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",role:"region","aria-label":"Analytics Charts",children:[o.jsxs(ae,{variant:"glass",className:"col-span-1",children:[o.jsx(xe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(gA,{className:"h-4 w-4 text-green-600"})}),o.jsx(ye,{className:"text-lg",children:"Equipment Status"})]})}),o.jsx(le,{children:o.jsx("div",{className:"h-64",children:o.jsx(kB,{data:N,height:240})})})]}),o.jsxs(ae,{variant:"glass",className:"col-span-1",children:[o.jsx(xe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(Zm,{className:"h-4 w-4 text-blue-600"})}),o.jsx(ye,{className:"text-lg",children:"Monthly Revenue"})]})}),o.jsx(le,{children:o.jsx("div",{className:"h-64",children:o.jsx(SB,{data:S,height:240})})})]}),o.jsxs(ae,{variant:"glass",className:"col-span-1",children:[o.jsx(xe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(eS,{className:"h-4 w-4 text-purple-600"})}),o.jsx(ye,{className:"text-lg",children:"Jobs by Status"})]})}),o.jsx(le,{children:o.jsx("div",{className:"h-64",children:o.jsx(CB,{data:k,height:240})})})]})]}),o.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx(L5,{className:"h-full"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{variant:"gradient",className:"h-fit",children:[o.jsx(xe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-blue/10 rounded-lg",children:o.jsx(hn,{className:"h-4 w-4 text-brand-blue"})}),o.jsx(ye,{className:"text-lg",children:"Equipment Summary"})]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Available Equipment:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(f)?f.filter(j=>j.status==="available").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"In Use:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Array.isArray(f)?f.filter(j=>j.status==="in_use").length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Under Maintenance:"}),o.jsx("span",{className:"text-sm font-semibold text-orange-600",children:Array.isArray(f)?f.filter(j=>j.status==="maintenance").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Utilization Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[a>0?Math.round(w):0,"%"]})]})})]})})]}),o.jsxs(ae,{variant:"gradient",className:"h-fit",children:[o.jsx(xe,{className:"flex flex-row items-center space-y-0 pb-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"p-2 bg-brand-gold/10 rounded-lg",children:o.jsx(Zm,{className:"h-4 w-4 text-brand-gold"})}),o.jsx(ye,{className:"text-lg",children:"Business Overview"})]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads:"}),o.jsx("span",{className:"text-sm font-semibold text-blue-600",children:n.length})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Active Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.length:0})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Won Deals:"}),o.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.filter(j=>j.stage==="won").length:0})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate:"}),o.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[n.length>0?Math.round((Array.isArray(p)?p.length:0)/n.length*100):0,"%"]})]})})]})})]})]})]})]})})}const Lx="-",EB=e=>{const t=TB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(Lx);return l[0]===""&&l.length!==1&&l.shift(),dk(l,t)||DB(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},dk=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),r=s?dk(e.slice(1),s):void 0;if(r)return r;if(t.validators.length===0)return;const i=e.join(Lx);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},ww=/^\[(.+)\]$/,DB=e=>{if(ww.test(e)){const t=ww.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},TB=e=>{const{theme:t,classGroups:n}=e,s={nextPart:new Map,validators:[]};for(const r in n)Cp(n[r],s,r,t);return s},Cp=(e,t,n,s)=>{e.forEach(r=>{if(typeof r=="string"){const i=r===""?t:jw(t,r);i.classGroupId=n;return}if(typeof r=="function"){if(PB(r)){Cp(r(s),t,n,s);return}t.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([i,a])=>{Cp(a,jw(t,i),n,s)})})},jw=(e,t)=>{let n=e;return t.split(Lx).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},PB=e=>e.isThemeGetter,_B=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const r=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){n.has(i)?n.set(i,a):r(i,a)}}},kp="!",Ep=":",AB=Ep.length,MB=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=r=>{const i=[];let a=0,l=0,c=0,u;for(let p=0;p<r.length;p++){let g=r[p];if(a===0&&l===0){if(g===Ep){i.push(r.slice(c,p)),c=p+AB;continue}if(g==="/"){u=p;continue}}g==="["?a++:g==="]"?a--:g==="("?l++:g===")"&&l--}const d=i.length===0?r:r.substring(c),h=RB(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const r=t+Ep,i=s;s=a=>a.startsWith(r)?i(a.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const r=s;s=i=>n({className:i,parseClassName:r})}return s},RB=e=>e.endsWith(kp)?e.substring(0,e.length-1):e.startsWith(kp)?e.substring(1):e,IB=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const r=[];let i=[];return s.forEach(a=>{a[0]==="["||t[a]?(r.push(...i.sort(),a),i=[]):i.push(a)}),r.push(...i.sort()),r}},OB=e=>({cache:_B(e.cacheSize),parseClassName:MB(e),sortModifiers:IB(e),...EB(e)}),LB=/\s+/,FB=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:r,sortModifiers:i}=t,a=[],l=e.trim().split(LB);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let y=!!g,b=s(y?p.substring(0,g):p);if(!b){if(!y){c=d+(c.length>0?" "+c:c);continue}if(b=s(p),!b){c=d+(c.length>0?" "+c:c);continue}y=!1}const v=i(f).join(":"),w=m?v+kp:v,S=w+b;if(a.includes(S))continue;a.push(S);const N=r(b,y);for(let k=0;k<N.length;++k){const j=N[k];a.push(w+j)}c=d+(c.length>0?" "+c:c)}return c};function $B(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=hk(t))&&(s&&(s+=" "),s+=n);return s}const hk=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=hk(e[s]))&&(n&&(n+=" "),n+=t);return n};function BB(e,...t){let n,s,r,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return n=OB(u),s=n.cache.get,r=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=FB(c,n);return r(c,d),d}return function(){return i($B.apply(null,arguments))}}const pt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},fk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,zB=/^\d+\/\d+$/,VB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,WB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,HB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mi=e=>zB.test(e),Se=e=>!!e&&!Number.isNaN(Number(e)),Ws=e=>!!e&&Number.isInteger(Number(e)),Sf=e=>e.endsWith("%")&&Se(e.slice(0,-1)),vs=e=>VB.test(e),GB=()=>!0,YB=e=>UB.test(e)&&!WB.test(e),pk=()=>!1,QB=e=>HB.test(e),KB=e=>qB.test(e),XB=e=>!he(e)&&!fe(e),JB=e=>Ra(e,yk,pk),he=e=>fk.test(e),Vr=e=>Ra(e,vk,YB),Cf=e=>Ra(e,sz,Se),Nw=e=>Ra(e,gk,pk),ZB=e=>Ra(e,xk,KB),Ic=e=>Ra(e,bk,QB),fe=e=>mk.test(e),io=e=>Ia(e,vk),ez=e=>Ia(e,rz),Sw=e=>Ia(e,gk),tz=e=>Ia(e,yk),nz=e=>Ia(e,xk),Oc=e=>Ia(e,bk,!0),Ra=(e,t,n)=>{const s=fk.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},Ia=(e,t,n=!1)=>{const s=mk.exec(e);return s?s[1]?t(s[1]):n:!1},gk=e=>e==="position"||e==="percentage",xk=e=>e==="image"||e==="url",yk=e=>e==="length"||e==="size"||e==="bg-size",vk=e=>e==="length",sz=e=>e==="number",rz=e=>e==="family-name",bk=e=>e==="shadow",iz=()=>{const e=pt("color"),t=pt("font"),n=pt("text"),s=pt("font-weight"),r=pt("tracking"),i=pt("leading"),a=pt("breakpoint"),l=pt("container"),c=pt("spacing"),u=pt("radius"),d=pt("shadow"),h=pt("inset-shadow"),f=pt("text-shadow"),m=pt("drop-shadow"),p=pt("blur"),g=pt("perspective"),y=pt("aspect"),b=pt("ease"),v=pt("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...S(),fe,he],k=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],C=()=>[fe,he,c],D=()=>[Mi,"full","auto",...C()],E=()=>[Ws,"none","subgrid",fe,he],O=()=>["auto",{span:["full",Ws,fe,he]},Ws,fe,he],F=()=>[Ws,"auto",fe,he],L=()=>["auto","min","max","fr",fe,he],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],B=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...C()],R=()=>[Mi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],T=()=>[e,fe,he],M=()=>[...S(),Sw,Nw,{position:[fe,he]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",tz,JB,{size:[fe,he]}],Z=()=>[Sf,io,Vr],oe=()=>["","none","full",u,fe,he],ue=()=>["",Se,io,Vr],ve=()=>["solid","dashed","dotted","double"],Ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>[Se,Sf,Sw,Nw],q=()=>["","none",p,fe,he],G=()=>["none",Se,fe,he],ie=()=>["none",Se,fe,he],_=()=>[Se,fe,he],I=()=>[Mi,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[vs],breakpoint:[vs],color:[GB],container:[vs],"drop-shadow":[vs],ease:["in","out","in-out"],font:[XB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[vs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[vs],shadow:[vs],spacing:["px",Se],text:[vs],"text-shadow":[vs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Mi,he,fe,y]}],container:["container"],columns:[{columns:[Se,he,fe,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Ws,"auto",fe,he]}],basis:[{basis:[Mi,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Se,Mi,"auto","initial","none",he]}],grow:[{grow:["",Se,fe,he]}],shrink:[{shrink:["",Se,fe,he]}],order:[{order:[Ws,"first","last","none",fe,he]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...B(),"normal"]}],"justify-self":[{"justify-self":["auto",...B()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...B(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...B(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...B(),"baseline"]}],"place-self":[{"place-self":["auto",...B()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:R()}],w:[{w:[l,"screen",...R()]}],"min-w":[{"min-w":[l,"screen","none",...R()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...R()]}],h:[{h:["screen","lh",...R()]}],"min-h":[{"min-h":["screen","lh","none",...R()]}],"max-h":[{"max-h":["screen","lh",...R()]}],"font-size":[{text:["base",n,io,Vr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,fe,Cf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sf,he]}],"font-family":[{font:[ez,he,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,fe,he]}],"line-clamp":[{"line-clamp":[Se,"none",fe,Cf]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",fe,he]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",fe,he]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Se,"from-font","auto",fe,Vr]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[Se,"auto",fe,he]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe,he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe,he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:M()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ws,fe,he],radial:["",fe,he],conic:[Ws,fe,he]},nz,ZB]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Se,fe,he]}],"outline-w":[{outline:["",Se,io,Vr]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,Oc,Ic]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",h,Oc,Ic]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[Se,Vr]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",f,Oc,Ic]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[Se,fe,he]}],"mix-blend":[{"mix-blend":[...Ne(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ne()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Se]}],"mask-image-linear-from-pos":[{"mask-linear-from":A()}],"mask-image-linear-to-pos":[{"mask-linear-to":A()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":A()}],"mask-image-t-to-pos":[{"mask-t-to":A()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":A()}],"mask-image-r-to-pos":[{"mask-r-to":A()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":A()}],"mask-image-b-to-pos":[{"mask-b-to":A()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":A()}],"mask-image-l-to-pos":[{"mask-l-to":A()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":A()}],"mask-image-x-to-pos":[{"mask-x-to":A()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":A()}],"mask-image-y-to-pos":[{"mask-y-to":A()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[fe,he]}],"mask-image-radial-from-pos":[{"mask-radial-from":A()}],"mask-image-radial-to-pos":[{"mask-radial-to":A()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[Se]}],"mask-image-conic-from-pos":[{"mask-conic-from":A()}],"mask-image-conic-to-pos":[{"mask-conic-to":A()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:M()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",fe,he]}],filter:[{filter:["","none",fe,he]}],blur:[{blur:q()}],brightness:[{brightness:[Se,fe,he]}],contrast:[{contrast:[Se,fe,he]}],"drop-shadow":[{"drop-shadow":["","none",m,Oc,Ic]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",Se,fe,he]}],"hue-rotate":[{"hue-rotate":[Se,fe,he]}],invert:[{invert:["",Se,fe,he]}],saturate:[{saturate:[Se,fe,he]}],sepia:[{sepia:["",Se,fe,he]}],"backdrop-filter":[{"backdrop-filter":["","none",fe,he]}],"backdrop-blur":[{"backdrop-blur":q()}],"backdrop-brightness":[{"backdrop-brightness":[Se,fe,he]}],"backdrop-contrast":[{"backdrop-contrast":[Se,fe,he]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Se,fe,he]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Se,fe,he]}],"backdrop-invert":[{"backdrop-invert":["",Se,fe,he]}],"backdrop-opacity":[{"backdrop-opacity":[Se,fe,he]}],"backdrop-saturate":[{"backdrop-saturate":[Se,fe,he]}],"backdrop-sepia":[{"backdrop-sepia":["",Se,fe,he]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",fe,he]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Se,"initial",fe,he]}],ease:[{ease:["linear","initial",b,fe,he]}],delay:[{delay:[Se,fe,he]}],animate:[{animate:["none",v,fe,he]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,fe,he]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:G()}],"rotate-x":[{"rotate-x":G()}],"rotate-y":[{"rotate-y":G()}],"rotate-z":[{"rotate-z":G()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:_()}],"skew-x":[{"skew-x":_()}],"skew-y":[{"skew-y":_()}],transform:[{transform:[fe,he,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:I()}],"translate-x":[{"translate-x":I()}],"translate-y":[{"translate-y":I()}],"translate-z":[{"translate-z":I()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe,he]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe,he]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[Se,io,Vr,Cf]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},az=BB(iz);function oz(...e){return az(c2(e))}function ql({status:e,className:t}){const n=s=>{switch(s){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return o.jsx("span",{className:oz("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}async function lz(e,t){const s=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update quotation");return s.json()}async function wk(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotation by ID");return n.json()}async function cz(e){const n=await fetch("http://103.224.243.242:3001/api/quotations",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create quotation");return n.json()}async function uz(){const t=await fetch("http://103.224.243.242:3001/api/quotations",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quotations");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function ad(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations?leadId=${encodeURIComponent(e)}`,{method:"GET",headers:Le(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotations");return await n.json()}const dz=_a("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function hz({stages:e,height:t=250}){const n=Math.max(...e.map(r=>r.value)),s=e.reduce((r,i)=>r+i.value,0);return o.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((r,i)=>{const a=n===0?40:Math.max(40,Math.min(100,r.value/n*100)),l=s===0?0:Math.round(r.value/s*100),c=i===0?"first":i===e.length-1?"last":"middle";return o.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${a}%`},children:[o.jsx("div",{className:dz({position:c}),style:{backgroundColor:r.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:o.jsx("span",{className:"text-white text-xs font-medium",children:r.value})}),o.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[o.jsx("span",{className:"font-medium text-gray-800",children:r.label}),o.jsxs("span",{children:[l,"%"]})]})]},r.label)})})}function fz(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const g=await Ul(),b=(w=>Array.isArray(w)?w:w&&typeof w=="object"&&w.data&&Array.isArray(w.data)||w&&typeof w=="object"&&w.success&&Array.isArray(w.data)?w.data:[])(g);t(b);const v=b.filter(w=>w.status==="converted");if(v.length>0){const w=v[0],S=await ad(w.id);s(S)}}catch(g){console.error("Error fetching dashboard data:",g),t([]),s([])}finally{i(!1)}})()},[]);const a=Array.isArray(e)?e.filter(p=>p.status==="new").length:0,l=Array.isArray(e)?e.filter(p=>p.status==="in_process").length:0,c=Array.isArray(e)?e.filter(p=>p.status==="qualified").length:0,u=Array.isArray(e)?e.filter(p=>p.status==="converted").length:0,d=Array.isArray(n)?n.reduce((p,g)=>p+g.totalRent,0):0,h=Array.isArray(e)?[...e].sort((p,g)=>new Date(g.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5):[],f=[{label:"New",value:a,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return r?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Ut,{title:"New Leads",value:a,icon:o.jsx(M0,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Ut,{title:"In Process",value:l,icon:o.jsx(Yn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Ut,{title:"Qualified Leads",value:c,icon:o.jsx(M0,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Ut,{title:"Quotation Value",value:Te(d),icon:o.jsx(Vd,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Lead Conversion Funnel"})}),o.jsx(le,{className:"flex justify-center",children:o.jsx(hz,{stages:f,height:250})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Weekly Lead Generation"})}),o.jsx(le,{children:o.jsx(uk,{data:m,height:250})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ye,{children:"Recent Leads"}),o.jsx(rs,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),o.jsx(le,{children:h.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(ql,{status:p.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ae,{className:"h-full",children:[o.jsx(xe,{children:o.jsx(ye,{children:"Upcoming Tasks"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(nS,{className:"h-5 w-5 text-primary-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(Y_,{className:"h-5 w-5 text-green-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[o.jsx("div",{className:"flex-shrink-0 mt-1",children:o.jsx(eS,{className:"h-5 w-5 text-amber-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}const mz=_a("inline-flex items-center justify-center font-medium transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden",{variants:{variant:{default:"bg-gradient-to-r from-brand-blue to-brand-blue/90 text-white shadow-lg hover:shadow-xl hover:shadow-brand-blue/25 hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:scale-[1.02] focus:ring-red-500/30 active:scale-[0.98]",outline:"border-2 border-brand-blue text-brand-blue bg-transparent hover:bg-brand-blue hover:text-white hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:shadow-md hover:from-gray-200 hover:to-gray-300 hover:scale-[1.02] focus:ring-gray-400/30 active:scale-[0.98]",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-400/30 hover:scale-[1.02] active:scale-[0.98]",link:"text-brand-blue underline-offset-4 hover:underline hover:text-brand-blue/80 focus:ring-brand-blue/30",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:shadow-green-500/25 hover:scale-[1.02] focus:ring-green-500/30 active:scale-[0.98]",warning:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:shadow-amber-500/25 hover:scale-[1.02] focus:ring-amber-500/30 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-blue via-purple-600 to-brand-blue text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 hover:scale-[1.02] focus:ring-purple-500/30 active:scale-[0.98]",accent:"bg-gradient-to-r from-brand-gold via-brand-gold to-brand-gold/95 text-brand-dark shadow-xl hover:shadow-2xl hover:shadow-brand-gold/40 hover:scale-[1.05] hover:from-brand-gold/90 hover:to-brand-gold hover:brightness-110 focus:ring-brand-gold/50 active:scale-[0.98] font-semibold transform"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-lg",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-6 text-base rounded-xl",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-xs":"h-7 w-7 rounded-md","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),W=x.memo(se.forwardRef(({className:e="",variant:t,size:n,leftIcon:s,rightIcon:r,isLoading:i=!1,loadingText:a,fullWidth:l=!1,disabled:c,children:u,asChild:d=!1,...h},f)=>{const m=mz({variant:t,size:n}),p=l?"w-full":"",g=c||i,y=o.jsxs(o.Fragment,{children:[(t==="default"||t==="gradient")&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 ease-in-out"}),i?o.jsxs(o.Fragment,{children:[o.jsx(lA,{className:"w-4 h-4 animate-spin mr-2"}),a||"Loading..."]}):o.jsxs(o.Fragment,{children:[s&&o.jsx("span",{className:"mr-2 flex-shrink-0",children:s}),u,r&&o.jsx("span",{className:"ml-2 flex-shrink-0",children:r})]})]});return d?o.jsx("span",{className:`${m} ${p} ${e}`,children:y}):o.jsx("button",{className:`${m} ${p} ${e}`,ref:f,disabled:g,"aria-busy":i,...h,children:y})}));W.displayName="Button";const pz=x.memo(se.forwardRef(({icon:e,className:t="",size:n="icon",...s},r)=>o.jsx(W,{ref:r,size:n,className:t,...s,children:e})));pz.displayName="IconButton";const gz=x.memo(({children:e,className:t="",orientation:n="horizontal",size:s="default"})=>{const r=n==="horizontal"?"flex-row":"flex-col",i={sm:"space-x-2 space-y-0",default:"space-x-3 space-y-0",lg:"space-x-4 space-y-0"}[s];return o.jsx("div",{className:`flex ${r} ${i} ${t}`,role:"group",children:e})});gz.displayName="ButtonGroup";function xz(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState(0),[a,l]=x.useState(0),[c,u]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const[f,m,p,g]=await Promise.all([Ul(),Zd(),xx(),Wl()]);t(f),s(m),i(p.length),l(g.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return c?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx(Ut,{title:"Scheduled Jobs",value:d,icon:o.jsx(us,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),o.jsx(Ut,{title:"Equipment",value:r,icon:o.jsx(hn,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),o.jsx(Ut,{title:"Operators",value:a,icon:o.jsx(Yn,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ye,{children:"Recent Won Leads"}),o.jsx(rs,{to:"/jobs",children:o.jsx(W,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),o.jsx(le,{children:e.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(W,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),o.jsx("div",{children:o.jsxs(ae,{className:"h-full",children:[o.jsx(xe,{children:o.jsx(ye,{children:"Quick Actions"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(rs,{to:"/config/equipment",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(hn,{size:16}),children:"Manage Equipment"})}),o.jsx(rs,{to:"/config/operators",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(Yn,{size:16}),children:"Manage Operators"})}),o.jsx(rs,{to:"/jobs",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(us,{size:16}),children:"View Job Calendar"})}),o.jsx(rs,{to:"/feedback",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(br,{size:16}),children:"Review Completed Jobs"})}),o.jsx(rs,{to:"/config",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(tS,{size:16}),children:"System Configuration"})}),o.jsx(rs,{to:"/config/maintenance",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:o.jsx(Gg,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Recent Job Activity"})}),o.jsx(le,{children:n.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.scheduledStartDate).toLocaleDateString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(ql,{status:h.status==="scheduled"?"pending":h.status})})]},h.id))})]})})})]})]})}const yz=_a("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function mt({className:e,variant:t,title:n,description:s,onClose:r,duration:i=5e3,isVisible:a=!0,...l}){const[c,u]=x.useState(a);x.useEffect(()=>{u(a)},[a]),x.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),r==null||r()},i);return()=>clearTimeout(f)}},[c,i,r]);const d=()=>{u(!1),r==null||r()},h=()=>{switch(t){case"success":return o.jsx(br,{className:"h-5 w-5 text-success-500"});case"error":return o.jsx(Ud,{className:"h-5 w-5 text-error-500"});case"warning":return o.jsx(ji,{className:"h-5 w-5 text-warning-500"});case"info":return o.jsx(ar,{className:"h-5 w-5 text-primary-500"});default:return null}};return o.jsx(gx,{children:c&&o.jsx(tr.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:`pointer-events-auto ${yz({variant:t,className:e})}`,...l,children:o.jsxs("div",{className:"flex items-start",children:[t&&o.jsx("div",{className:"flex-shrink-0",children:h()}),o.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[o.jsx("p",{className:"text-sm font-medium",children:n}),s&&o.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:s})]}),o.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:o.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Fl,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function vz(){const{user:e}=Qe(),[t,n]=x.useState([]),[s,r]=x.useState({}),[i,a]=x.useState(!0),[l,c]=x.useState({show:!1,title:""});x.useEffect(()=>{(async()=>{if(e)try{const g=await VC(e.id);n(g);const y={};for(const b of g)if(!y[b.equipmentId]){const v=await UC(b.equipmentId);v&&(y[b.equipmentId]=v)}r(y)}catch(g){console.error("Error fetching operator data:",g)}finally{a(!1)}})()},[e]);const u=(p,g)=>{var y;n(b=>b.map(v=>v.id===p?{...v,status:g==="accept"?"accepted":g==="reject"?"rejected":"completed"}:v)),c({show:!0,title:g==="accept"?"Job Accepted":g==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(y=t.find(b=>b.id===p))==null?void 0:y.customerName} has been ${g}ed.`,variant:g==="reject"?"warning":"success"}),setTimeout(()=>{c(b=>({...b,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,g)=>new Date(p.startDate).getTime()-new Date(g.startDate).getTime());return i?o.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(Ut,{title:"Scheduled Jobs",value:d,icon:o.jsx(us,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),o.jsx(Ut,{title:"Accepted Jobs",value:h,icon:o.jsx(br,{className:"h-5 w-5 text-success-600"}),variant:"success"}),o.jsx(Ut,{title:"Completed Jobs",value:f,icon:o.jsx(En,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Upcoming Jobs"})}),o.jsx(le,{children:m.length===0?o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):o.jsx("div",{className:"space-y-4",children:m.map(p=>{var g;return o.jsx(ae,{variant:"bordered",className:"overflow-hidden",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),o.jsx(ql,{status:p.status})]}),o.jsxs("div",{className:"mt-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(hn,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:((g=s[p.equipmentId])==null?void 0:g.name)||"Equipment"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(qg,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsx("span",{children:p.location})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(us,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(En,{className:"mr-2 h-4 w-4 text-gray-400"}),o.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),o.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&o.jsxs(o.Fragment,{children:[o.jsx(W,{variant:"success",size:"sm",leftIcon:o.jsx(br,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),o.jsx(W,{variant:"destructive",size:"sm",leftIcon:o.jsx(Ud,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&o.jsx(W,{variant:"secondary",size:"sm",leftIcon:o.jsx(br,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&o.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Equipment Assignment"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[Object.values(s).map(p=>o.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[o.jsx(hn,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(s).length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Operator Information"})}),o.jsxs(le,{children:[o.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[o.jsx("div",{className:"mr-4",children:o.jsx(eA,{className:"h-16 w-16 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),o.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),o.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),o.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),o.jsx("div",{className:"mt-4",children:o.jsx(W,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&o.jsx(mt,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function Ue({label:e,error:t,className:n="",leftIcon:s,rightIcon:r,name:i,id:a,...l}){var d;const c={...l},u=i||a||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return o.jsxs("div",{className:"space-y-1.5",children:[e&&o.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[s&&o.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s}),o.jsx("input",{name:u,id:a||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-[#222] placeholder:text-[#888]
            text-base
            py-2 px-3 border border-[#CAC0B0] bg-white
            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${s?"pl-8 sm:pl-10":""}
            ${r?"pr-8 sm:pr-10":""}
            ${n}
          `,style:{color:"#222",WebkitTextFillColor:"#222",background:"#fff",borderColor:"#CAC0B0",fontWeight:600,letterSpacing:"0.08em"},placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),r&&o.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r})]}),t&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}function me({label:e,helperText:t,error:n,fullWidth:s=!0,className:r="",type:i="text",id:a,name:l,...c}){const u=a||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return o.jsxs("div",{className:`${s?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&o.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx(Ue,{id:u,name:l||u,type:i,className:`${s?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${r}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&o.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&o.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function ke({options:e,value:t,onChange:n,label:s,error:r,leftIcon:i,className:a="",...l}){return o.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[s&&o.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[s,l.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsxs("div",{className:"relative",children:[i&&o.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",o.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${r?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${a}
          `,...l,children:e.map(c=>o.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),o.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:o.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r&&o.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:r})]})}function hs({label:e,error:t,helperText:n,className:s="",...r}){const i=r.id||`textarea-${r.name||Math.random().toString(36).substring(2,9)}`;return o.jsxs("div",{className:"space-y-2",children:[e&&o.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${r.required?"text-blue-700":"text-green-700"}`,children:[e,r.required?o.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!r.disabled&&o.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),o.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${r.required?"bg-blue-50 border-blue-200 focus:bg-white":r.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${s}`,placeholder:r.placeholder?`${r.placeholder}${r.required?" *":""}`:"",...r}),t&&o.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}hs.displayName="TextArea";var bz=Object.defineProperty,wz=(e,t,n)=>t in e?bz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kf=(e,t,n)=>(wz(e,typeof t!="symbol"?t+"":t,n),n);let jz=class{constructor(){kf(this,"current",this.detect()),kf(this,"handoffState","pending"),kf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Rs=new jz,On=(e,t)=>{Rs.isServer?x.useEffect(e,t):x.useLayoutEffect(e,t)};function Is(e){let t=x.useRef(e);return On(()=>{t.current=e},[e]),t}let Ye=function(e){let t=Is(e);return se.useCallback((...n)=>t.current(...n),[t])};function oh(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ei(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return oh(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=Ei();return n(s),this.add(()=>s.dispose())},add(n){return e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function Fx(){let[e]=x.useState(Ei);return x.useEffect(()=>()=>e.dispose(),[e]),e}function Nz(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(Qp)(()=>()=>{},()=>!1,()=>!e)}function Oa(){let e=Nz(),[t,n]=x.useState(Rs.isHandoffComplete);return t&&Rs.isHandoffComplete===!1&&n(!1),x.useEffect(()=>{t!==!0&&n(!0)},[t]),x.useEffect(()=>Rs.handoff(),[]),e?!1:t}var Cw;let La=(Cw=se.useId)!=null?Cw:function(){let e=Oa(),[t,n]=se.useState(e?()=>Rs.nextId():null);return On(()=>{t===null&&n(Rs.nextId())},[t]),t!=null?""+t:void 0};function It(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,It),s}function jk(e){return Rs.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Dp=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Zr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Zr||{}),Nk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Nk||{}),Sz=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Sz||{});function Cz(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Dp)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Sk=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Sk||{});function kz(e,t=0){var n;return e===((n=jk(e))==null?void 0:n.body)?!1:It(t,{0(){return e.matches(Dp)},1(){let s=e;for(;s!==null;){if(s.matches(Dp))return!0;s=s.parentElement}return!1}})}var Ez=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ez||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function di(e){e==null||e.focus({preventScroll:!0})}let Dz=["textarea","input"].join(",");function Tz(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Dz))!=null?n:!1}function Pz(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function fu(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?n?Pz(e):e:Cz(e);r.length>0&&a.length>1&&(a=a.filter(m=>!r.includes(m))),s=s??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,a.indexOf(s))-1;if(t&4)return Math.max(0,a.indexOf(s))+1;if(t&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=a.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=a[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&Tz(f)&&f.select(),2}function Ck(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function _z(){return/Android/gi.test(window.navigator.userAgent)}function Az(){return Ck()||_z()}function Lc(e,t,n){let s=Is(t);x.useEffect(()=>{function r(i){s.current(i)}return document.addEventListener(e,r,n),()=>document.removeEventListener(e,r,n)},[e,n])}function kk(e,t,n){let s=Is(t);x.useEffect(()=>{function r(i){s.current(i)}return window.addEventListener(e,r,n),()=>window.removeEventListener(e,r,n)},[e,n])}function Mz(e,t,n=!0){let s=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{s.current=n})},[n]);function r(a,l){if(!s.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||a.composed&&a.composedPath().includes(h))return}return!kz(c,Sk.Loose)&&c.tabIndex!==-1&&a.preventDefault(),t(a,c)}let i=x.useRef(null);Lc("pointerdown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Lc("mousedown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),Lc("click",a=>{Az()||i.current&&(r(a,()=>i.current),i.current=null)},!0),Lc("touchend",a=>r(a,()=>a.target instanceof HTMLElement?a.target:null),!0),kk("blur",a=>r(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Gl(...e){return x.useMemo(()=>jk(...e),[...e])}let Ek=Symbol();function Rz(e,t=!0){return Object.assign(e,{[Ek]:t})}function Xn(...e){let t=x.useRef(e);x.useEffect(()=>{t.current=e},[e]);let n=Ye(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||(s==null?void 0:s[Ek]))?void 0:n}function $x(e,t){let n=x.useRef([]),s=Ye(e);x.useEffect(()=>{let r=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let l=s(t,r);return n.current=t,l}},[s,...t])}function od(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var ld=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ld||{}),ur=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ur||{});function Fn({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:a,mergeRefs:l}){l=l??Iz;let c=Dk(t,e);if(i)return Fc(c,n,s,a,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Fc(h,n,s,a,l)}if(u&1){let{unmount:d=!0,...h}=c;return It(d?0:1,{0(){return null},1(){return Fc({...h,hidden:!0,style:{display:"none"}},n,s,a,l)}})}return Fc(c,n,s,a,l)}function Fc(e,t={},n,s,r){let{as:i=n,children:a,refName:l="ref",...c}=Ef(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof a=="function"?a(t):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===x.Fragment&&Object.keys(kw(c)).length>0){if(!x.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...g)=>od(f==null?void 0:f.className(...g),c.className):od(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return x.cloneElement(d,Object.assign({},Dk(d.props,kw(Ef(c,["ref"]))),h,u,{ref:r(d.ref,u.ref)},p))}return x.createElement(i,Object.assign({},Ef(c,["ref"]),i!==x.Fragment&&u,i!==x.Fragment&&h),d)}function Iz(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Dk(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](r,...i){let a=n[s];for(let l of a){if((r instanceof Event||(r==null?void 0:r.nativeEvent)instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function vn(e){var t;return Object.assign(x.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function kw(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ef(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}let Oz="div";var cd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(cd||{});function Lz(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Fn({ourProps:i,theirProps:r,slot:{},defaultTag:Oz,name:"Hidden"})}let Tp=vn(Lz),Bx=x.createContext(null);Bx.displayName="OpenClosedContext";var ln=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ln||{});function zx(){return x.useContext(Bx)}function Fz({value:e,children:t}){return se.createElement(Bx.Provider,{value:e},t)}function $z(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let nr=[];$z(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&nr[0]!==t.target&&(nr.unshift(t.target),nr=nr.filter(n=>n!=null&&n.isConnected),nr.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Bz(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let s=(t==null?void 0:t.getAttribute("disabled"))==="";return s&&zz(n)?!1:s}function zz(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Tk=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Tk||{});function Pk(e,t,n,s){let r=Is(n);x.useEffect(()=>{e=e??window;function i(a){r.current(a)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function Yl(){let e=x.useRef(!1);return On(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function _k(e){let t=Ye(e),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,oh(()=>{n.current&&t()})}),[t])}var Eo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Eo||{});function Vz(){let e=x.useRef(0);return kk("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Ak(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Uz="div";var Mk=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Mk||{});function Wz(e,t){let n=x.useRef(null),s=Xn(n,t),{initialFocus:r,containers:i,features:a=30,...l}=e;Oa()||(a=1);let c=Gl(n);Gz({ownerDocument:c},!!(a&16));let u=Yz({ownerDocument:c,container:n,initialFocus:r},!!(a&2));Qz({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(a&8));let d=Vz(),h=Ye(g=>{let y=n.current;y&&(b=>b())(()=>{It(d.current,{[Eo.Forwards]:()=>{fu(y,Zr.First,{skipElements:[g.relatedTarget]})},[Eo.Backwards]:()=>{fu(y,Zr.Last,{skipElements:[g.relatedTarget]})}})})}),f=Fx(),m=x.useRef(!1),p={ref:s,onKeyDown(g){g.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let y=Ak(i);n.current instanceof HTMLElement&&y.add(n.current);let b=g.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(Rk(y,b)||(m.current?fu(n.current,It(d.current,{[Eo.Forwards]:()=>Zr.Next,[Eo.Backwards]:()=>Zr.Previous})|Zr.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&di(g.target)))}};return se.createElement(se.Fragment,null,!!(a&4)&&se.createElement(Tp,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:cd.Focusable}),Fn({ourProps:p,theirProps:l,defaultTag:Uz,name:"FocusTrap"}),!!(a&4)&&se.createElement(Tp,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:cd.Focusable}))}let Hz=vn(Wz),ao=Object.assign(Hz,{features:Mk});function qz(e=!0){let t=x.useRef(nr.slice());return $x(([n],[s])=>{s===!0&&n===!1&&oh(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=nr.slice())},[e,nr,t]),Ye(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function Gz({ownerDocument:e},t){let n=qz(t);$x(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&di(n())},[t]),_k(()=>{t&&di(n())})}function Yz({ownerDocument:e,container:t,initialFocus:n},s){let r=x.useRef(null),i=Yl();return $x(()=>{if(!s)return;let a=t.current;a&&oh(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){r.current=l;return}}else if(a.contains(l)){r.current=l;return}n!=null&&n.current?di(n.current):fu(a,Zr.First)===Nk.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.current=e==null?void 0:e.activeElement})},[s]),r}function Qz({ownerDocument:e,container:t,containers:n,previousActiveElement:s},r){let i=Yl();Pk(e==null?void 0:e.defaultView,"focus",a=>{if(!r||!i.current)return;let l=Ak(n);t.current instanceof HTMLElement&&l.add(t.current);let c=s.current;if(!c)return;let u=a.target;u&&u instanceof HTMLElement?Rk(l,u)?(s.current=u,di(u)):(a.preventDefault(),a.stopPropagation(),di(c)):di(s.current)},!0)}function Rk(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let Ik=x.createContext(!1);function Kz(){return x.useContext(Ik)}function Pp(e){return se.createElement(Ik.Provider,{value:e.force},e.children)}function Xz(e){let t=Kz(),n=x.useContext(Ok),s=Gl(e),[r,i]=x.useState(()=>{if(!t&&n!==null||Rs.isServer)return null;let a=s==null?void 0:s.getElementById("headlessui-portal-root");if(a)return a;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return x.useEffect(()=>{r!==null&&(s!=null&&s.body.contains(r)||s==null||s.body.appendChild(r))},[r,s]),x.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),r}let Jz=x.Fragment;function Zz(e,t){let n=e,s=x.useRef(null),r=Xn(Rz(d=>{s.current=d}),t),i=Gl(s),a=Xz(s),[l]=x.useState(()=>{var d;return Rs.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=x.useContext(_p),u=Oa();return On(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),On(()=>{if(l&&c)return c.register(l)},[c,l]),_k(()=>{var d;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((d=a.parentElement)==null||d.removeChild(a)))}),u?!a||!l?null:Ll.createPortal(Fn({ourProps:{ref:r},theirProps:n,defaultTag:Jz,name:"Portal"}),l):null}let eV=x.Fragment,Ok=x.createContext(null);function tV(e,t){let{target:n,...s}=e,r={ref:Xn(t)};return se.createElement(Ok.Provider,{value:n},Fn({ourProps:r,theirProps:s,defaultTag:eV,name:"Popover.Group"}))}let _p=x.createContext(null);function nV(){let e=x.useContext(_p),t=x.useRef([]),n=Ye(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Ye(i=>{let a=t.current.indexOf(i);a!==-1&&t.current.splice(a,1),e&&e.unregister(i)}),r=x.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,x.useMemo(()=>function({children:i}){return se.createElement(_p.Provider,{value:r},i)},[r])]}let sV=vn(Zz),rV=vn(tV),Ap=Object.assign(sV,{Group:rV});const iV=(e=>e.useSyncExternalStore)(Qp);function aV(e){return iV(e.subscribe,e.getSnapshot,e.getSnapshot)}function oV(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let a=t[r].call(n,...i);a&&(n=a,s.forEach(l=>l()))}}}function lV(){let e;return{before({doc:t}){var n;let s=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-s.clientWidth},after({doc:t,d:n}){let s=t.documentElement,r=s.clientWidth-s.offsetWidth,i=e-r;n.style(s,"paddingRight",`${i}px`)}}}function cV(){return Ck()?{before({doc:e,d:t,meta:n}){function s(r){return n.containers.flatMap(i=>i()).some(i=>i.contains(r))}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Ei();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,a=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!s(d)&&(a=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function uV(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function dV(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ii=oV(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Ei(),meta:new Set};return s.count++,s.meta.add(t),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let s={doc:e,d:t,meta:dV(n)},r=[cV(),lV(),uV()];r.forEach(({before:i})=>i==null?void 0:i(s)),r.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ii.subscribe(()=>{let e=ii.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&ii.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ii.dispatch("TEARDOWN",n)}});function hV(e,t,n){let s=aV(ii),r=e?s.get(e):void 0,i=r?r.count>0:!1;return On(()=>{if(!(!e||!t))return ii.dispatch("PUSH",e,n),()=>ii.dispatch("POP",e,n)},[t,e]),i}let Df=new Map,oo=new Map;function Ew(e,t=!0){On(()=>{var n;if(!t)return;let s=typeof e=="function"?e():e.current;if(!s)return;function r(){var a;if(!s)return;let l=(a=oo.get(s))!=null?a:1;if(l===1?oo.delete(s):oo.set(s,l-1),l!==1)return;let c=Df.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,Df.delete(s))}let i=(n=oo.get(s))!=null?n:0;return oo.set(s,i+1),i!==0||(Df.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),r},[e,t])}function fV({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var s;let r=x.useRef((s=n==null?void 0:n.current)!=null?s:null),i=Gl(r),a=Ye(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(r.current)||h.contains((u=(c=r.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:a,contains:Ye(l=>a().some(c=>c.contains(l))),mainTreeNodeRef:r,MainTreeNode:x.useMemo(()=>function(){return n!=null?null:se.createElement(Tp,{features:cd.Hidden,ref:r})},[r,n])}}let Vx=x.createContext(()=>{});Vx.displayName="StackContext";var Mp=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Mp||{});function mV(){return x.useContext(Vx)}function pV({children:e,onUpdate:t,type:n,element:s,enabled:r}){let i=mV(),a=Ye((...l)=>{t==null||t(...l),i(...l)});return On(()=>{let l=r===void 0||r===!0;return l&&a(0,n,s),()=>{l&&a(1,n,s)}},[a,n,s,r]),se.createElement(Vx.Provider,{value:a},e)}let Lk=x.createContext(null);function Fk(){let e=x.useContext(Lk);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Fk),t}return e}function gV(){let[e,t]=x.useState([]);return[e.length>0?e.join(" "):void 0,x.useMemo(()=>function(n){let s=Ye(i=>(t(a=>[...a,i]),()=>t(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=x.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props}),[s,n.slot,n.name,n.props]);return se.createElement(Lk.Provider,{value:r},n.children)},[t])]}let xV="p";function yV(e,t){let n=La(),{id:s=`headlessui-description-${n}`,...r}=e,i=Fk(),a=Xn(t);On(()=>i.register(s),[s,i.register]);let l={ref:a,...i.props,id:s};return Fn({ourProps:l,theirProps:r,slot:i.slot||{},defaultTag:xV,name:i.name||"Description"})}let vV=vn(yV),bV=Object.assign(vV,{});var wV=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(wV||{}),jV=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(jV||{});let NV={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},ud=x.createContext(null);ud.displayName="DialogContext";function Ql(e){let t=x.useContext(ud);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ql),n}return t}function SV(e,t,n=()=>[document.body]){hV(e,t,s=>{var r;return{containers:[...(r=s.containers)!=null?r:[],n]}})}function CV(e,t){return It(t.type,NV,e,t)}let kV="div",EV=ld.RenderStrategy|ld.Static;function DV(e,t){let n=La(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:a,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=x.useState(0),f=x.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=zx();r===void 0&&m!==null&&(r=(m&ln.Open)===ln.Open);let p=x.useRef(null),g=Xn(p,t),y=Gl(p),b=e.hasOwnProperty("open")||m!==null,v=e.hasOwnProperty("onClose");if(!b&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!b)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof r!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${r}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let w=r?0:1,[S,N]=x.useReducer(CV,{titleId:null,descriptionId:null,panelRef:x.createRef()}),k=Ye(()=>i(!1)),j=Ye(_=>N({type:0,id:_})),C=Oa()?c?!1:w===0:!1,D=d>1,E=x.useContext(ud)!==null,[O,F]=nV(),L={get current(){var _;return(_=S.panelRef.current)!=null?_:p.current}},{resolveContainers:P,mainTreeNodeRef:B,MainTreeNode:V}=fV({portals:O,defaultContainers:[L]}),R=D?"parent":"leaf",T=m!==null?(m&ln.Closing)===ln.Closing:!1,M=E||T?!1:C,U=x.useCallback(()=>{var _,I;return(I=Array.from((_=y==null?void 0:y.querySelectorAll("body > *"))!=null?_:[]).find(Q=>Q.id==="headlessui-portal-root"?!1:Q.contains(B.current)&&Q instanceof HTMLElement))!=null?I:null},[B]);Ew(U,M);let H=D?!0:C,Z=x.useCallback(()=>{var _,I;return(I=Array.from((_=y==null?void 0:y.querySelectorAll("[data-headlessui-portal]"))!=null?_:[]).find(Q=>Q.contains(B.current)&&Q instanceof HTMLElement))!=null?I:null},[B]);Ew(Z,H),Mz(P,_=>{_.preventDefault(),k()},!(!C||D));let ue=!(D||w!==0);Pk(y==null?void 0:y.defaultView,"keydown",_=>{ue&&(_.defaultPrevented||_.key===Tk.Escape&&(_.preventDefault(),_.stopPropagation(),k()))}),SV(y,!(T||w!==0||E),P),x.useEffect(()=>{if(w!==0||!p.current)return;let _=new ResizeObserver(I=>{for(let Q of I){let te=Q.target.getBoundingClientRect();te.x===0&&te.y===0&&te.width===0&&te.height===0&&k()}});return _.observe(p.current),()=>_.disconnect()},[w,p,k]);let[Ne,A]=gV(),q=x.useMemo(()=>[{dialogState:w,close:k,setTitleId:j},S],[w,S,k,j]),G=x.useMemo(()=>({open:w===0}),[w]),ie={ref:g,id:s,role:l,"aria-modal":w===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":Ne};return se.createElement(pV,{type:"Dialog",enabled:w===0,element:p,onUpdate:Ye((_,I)=>{I==="Dialog"&&It(_,{[Mp.Add]:()=>h(Q=>Q+1),[Mp.Remove]:()=>h(Q=>Q-1)})})},se.createElement(Pp,{force:!0},se.createElement(Ap,null,se.createElement(ud.Provider,{value:q},se.createElement(Ap.Group,{target:p},se.createElement(Pp,{force:!1},se.createElement(A,{slot:G,name:"Dialog.Description"},se.createElement(ao,{initialFocus:a,containers:P,features:C?It(R,{parent:ao.features.RestoreFocus,leaf:ao.features.All&~ao.features.FocusLock}):ao.features.None},se.createElement(F,null,Fn({ourProps:ie,theirProps:u,slot:G,defaultTag:kV,features:EV,visible:w===0,name:"Dialog"}))))))))),se.createElement(V,null))}let TV="div";function PV(e,t){let n=La(),{id:s=`headlessui-dialog-overlay-${n}`,...r}=e,[{dialogState:i,close:a}]=Ql("Dialog.Overlay"),l=Xn(t),c=Ye(d=>{if(d.target===d.currentTarget){if(Bz(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),a()}}),u=x.useMemo(()=>({open:i===0}),[i]);return Fn({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:r,slot:u,defaultTag:TV,name:"Dialog.Overlay"})}let _V="div";function AV(e,t){let n=La(),{id:s=`headlessui-dialog-backdrop-${n}`,...r}=e,[{dialogState:i},a]=Ql("Dialog.Backdrop"),l=Xn(t);x.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let c=x.useMemo(()=>({open:i===0}),[i]);return se.createElement(Pp,{force:!0},se.createElement(Ap,null,Fn({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:r,slot:c,defaultTag:_V,name:"Dialog.Backdrop"})))}let MV="div";function RV(e,t){let n=La(),{id:s=`headlessui-dialog-panel-${n}`,...r}=e,[{dialogState:i},a]=Ql("Dialog.Panel"),l=Xn(t,a.panelRef),c=x.useMemo(()=>({open:i===0}),[i]),u=Ye(d=>{d.stopPropagation()});return Fn({ourProps:{ref:l,id:s,onClick:u},theirProps:r,slot:c,defaultTag:MV,name:"Dialog.Panel"})}let IV="h2";function OV(e,t){let n=La(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:a}]=Ql("Dialog.Title"),l=Xn(t);x.useEffect(()=>(a(s),()=>a(null)),[s,a]);let c=x.useMemo(()=>({open:i===0}),[i]);return Fn({ourProps:{ref:l,id:s},theirProps:r,slot:c,defaultTag:IV,name:"Dialog.Title"})}let LV=vn(DV),FV=vn(AV),$V=vn(RV),BV=vn(PV),zV=vn(OV),$c=Object.assign(LV,{Backdrop:FV,Panel:$V,Overlay:BV,Title:zV,Description:bV});function VV(e=0){let[t,n]=x.useState(e),s=Yl(),r=x.useCallback(c=>{s.current&&n(u=>u|c)},[t,s]),i=x.useCallback(c=>!!(t&c),[t]),a=x.useCallback(c=>{s.current&&n(u=>u&~c)},[n,s]),l=x.useCallback(c=>{s.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:r,hasFlag:i,removeFlag:a,toggleFlag:l}}function UV(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Tf(e,...t){e&&t.length>0&&e.classList.add(...t)}function Pf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function WV(e,t){let n=Ei();if(!e)return n.dispose;let{transitionDuration:s,transitionDelay:r}=getComputedStyle(e),[i,a]=[s,r].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+a;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function HV(e,t,n,s){let r=n?"enter":"leave",i=Ei(),a=s!==void 0?UV(s):()=>{};r==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=It(r,{enter:()=>t.enter,leave:()=>t.leave}),c=It(r,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=It(r,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Pf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Tf(e,...t.base,...l,...u),i.nextFrame(()=>{Pf(e,...t.base,...l,...u),Tf(e,...t.base,...l,...c),WV(e,()=>(Pf(e,...t.base,...l),Tf(e,...t.base,...t.entered),a()))}),i.dispose}function qV({immediate:e,container:t,direction:n,classes:s,onStart:r,onStop:i}){let a=Yl(),l=Fx(),c=Is(n);On(()=>{e&&(c.current="enter")},[e]),On(()=>{let u=Ei();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&a.current)return u.dispose(),r.current(c.current),u.add(HV(d,s.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function Hs(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let lh=x.createContext(null);lh.displayName="TransitionContext";var GV=(e=>(e.Visible="visible",e.Hidden="hidden",e))(GV||{});function YV(){let e=x.useContext(lh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function QV(){let e=x.useContext(ch);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let ch=x.createContext(null);ch.displayName="NestingContext";function uh(e){return"children"in e?uh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function $k(e,t){let n=Is(e),s=x.useRef([]),r=Yl(),i=Fx(),a=Ye((m,p=ur.Hidden)=>{let g=s.current.findIndex(({el:y})=>y===m);g!==-1&&(It(p,{[ur.Unmount](){s.current.splice(g,1)},[ur.Hidden](){s.current[g].state="hidden"}}),i.microTask(()=>{var y;!uh(s)&&r.current&&((y=n.current)==null||y.call(n))}))}),l=Ye(m=>{let p=s.current.find(({el:g})=>g===m);return p?p.state!=="visible"&&(p.state="visible"):s.current.push({el:m,state:"visible"}),()=>a(m,ur.Unmount)}),c=x.useRef([]),u=x.useRef(Promise.resolve()),d=x.useRef({enter:[],leave:[],idle:[]}),h=Ye((m,p,g)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([y])=>y!==m)),t==null||t.chains.current[p].push([m,new Promise(y=>{c.current.push(y)})]),t==null||t.chains.current[p].push([m,new Promise(y=>{Promise.all(d.current[p].map(([b,v])=>v)).then(()=>y())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(p)):g(p)}),f=Ye((m,p,g)=>{Promise.all(d.current[p].splice(0).map(([y,b])=>b)).then(()=>{var y;(y=c.current.shift())==null||y()}).then(()=>g(p))});return x.useMemo(()=>({children:s,register:l,unregister:a,onStart:h,onStop:f,wait:u,chains:d}),[l,a,s,h,f,d,u])}function KV(){}let XV=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Dw(e){var t;let n={};for(let s of XV)n[s]=(t=e[s])!=null?t:KV;return n}function JV(e){let t=x.useRef(Dw(e));return x.useEffect(()=>{t.current=Dw(e)},[e]),t}let ZV="div",Bk=ld.RenderStrategy;function e8(e,t){var n,s;let{beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...g}=e,y=x.useRef(null),b=Xn(y,t),v=(n=g.unmount)==null||n?ur.Unmount:ur.Hidden,{show:w,appear:S,initial:N}=YV(),[k,j]=x.useState(w?"visible":"hidden"),C=QV(),{register:D,unregister:E}=C;x.useEffect(()=>D(y),[D,y]),x.useEffect(()=>{if(v===ur.Hidden&&y.current){if(w&&k!=="visible"){j("visible");return}return It(k,{hidden:()=>E(y),visible:()=>D(y)})}},[k,y,D,E,w,v]);let O=Is({base:Hs(g.className),enter:Hs(c),enterFrom:Hs(u),enterTo:Hs(d),entered:Hs(h),leave:Hs(f),leaveFrom:Hs(m),leaveTo:Hs(p)}),F=JV({beforeEnter:r,afterEnter:i,beforeLeave:a,afterLeave:l}),L=Oa();x.useEffect(()=>{if(L&&k==="visible"&&y.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[y,k,L]);let P=N&&!S,B=S&&w&&N,V=!L||P?"idle":w?"enter":"leave",R=VV(0),T=Ye(ue=>It(ue,{enter:()=>{R.addFlag(ln.Opening),F.current.beforeEnter()},leave:()=>{R.addFlag(ln.Closing),F.current.beforeLeave()},idle:()=>{}})),M=Ye(ue=>It(ue,{enter:()=>{R.removeFlag(ln.Opening),F.current.afterEnter()},leave:()=>{R.removeFlag(ln.Closing),F.current.afterLeave()},idle:()=>{}})),U=$k(()=>{j("hidden"),E(y)},C),H=x.useRef(!1);qV({immediate:B,container:y,classes:O,direction:V,onStart:Is(ue=>{H.current=!0,U.onStart(y,ue,T)}),onStop:Is(ue=>{H.current=!1,U.onStop(y,ue,M),ue==="leave"&&!uh(U)&&(j("hidden"),E(y))})});let Z=g,oe={ref:b};return B?Z={...Z,className:od(g.className,...O.current.enter,...O.current.enterFrom)}:H.current&&(Z.className=od(g.className,(s=y.current)==null?void 0:s.className),Z.className===""&&delete Z.className),se.createElement(ch.Provider,{value:U},se.createElement(Fz,{value:It(k,{visible:ln.Open,hidden:ln.Closed})|R.flags},Fn({ourProps:oe,theirProps:Z,defaultTag:ZV,features:Bk,visible:k==="visible",name:"Transition.Child"})))}function t8(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,a=x.useRef(null),l=Xn(a,t);Oa();let c=zx();if(n===void 0&&c!==null&&(n=(c&ln.Open)===ln.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=x.useState(n?"visible":"hidden"),h=$k(()=>{d("hidden")}),[f,m]=x.useState(!0),p=x.useRef([n]);On(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let g=x.useMemo(()=>({show:n,appear:s,initial:f}),[n,s,f]);x.useEffect(()=>{if(n)d("visible");else if(!uh(h))d("hidden");else{let w=a.current;if(!w)return;let S=w.getBoundingClientRect();S.x===0&&S.y===0&&S.width===0&&S.height===0&&d("hidden")}},[n,h]);let y={unmount:r},b=Ye(()=>{var w;f&&m(!1),(w=e.beforeEnter)==null||w.call(e)}),v=Ye(()=>{var w;f&&m(!1),(w=e.beforeLeave)==null||w.call(e)});return se.createElement(ch.Provider,{value:h},se.createElement(lh.Provider,{value:g},Fn({ourProps:{...y,as:x.Fragment,children:se.createElement(zk,{ref:l,...y,...i,beforeEnter:b,beforeLeave:v})},theirProps:{},defaultTag:x.Fragment,features:Bk,visible:u==="visible",name:"Transition"})))}function n8(e,t){let n=x.useContext(lh)!==null,s=zx()!==null;return se.createElement(se.Fragment,null,!n&&s?se.createElement(Rp,{ref:t,...e}):se.createElement(zk,{ref:t,...e}))}let Rp=vn(t8),zk=vn(e8),s8=vn(n8),_f=Object.assign(Rp,{Child:s8,Root:Rp});const r8={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function Ot({isOpen:e,onClose:t,title:n,description:s,children:r,size:i="md"}){return o.jsx(_f,{show:e,as:x.Fragment,children:o.jsxs($c,{as:"div",className:"relative z-50",onClose:t,children:[o.jsx(_f.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),o.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:o.jsx(_f.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:o.jsxs($c.Panel,{className:`w-full ${r8[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[o.jsxs("div",{children:[n&&o.jsx($c.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),s&&o.jsx($c.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:s})]}),o.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[o.jsx("span",{className:"sr-only",children:"Close"}),o.jsx(Fl,{className:"h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:r})]})})})})]})})}const Af="http://103.224.243.242:3001/api",i8=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},lo=async(e,t={})=>{var n,s;try{console.log(`📞 API Call: ${t.method||"GET"} ${Af}${e}`);let r="";try{r=i8()}catch(c){throw c}const i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers||{}},a=await fetch(`${Af}${e}`,{...t,headers:i});if(console.log(`📩 API Response: ${a.status} ${a.statusText} for ${e}`),e==="/quotations"){const c=a.clone();try{const u=await c.json();if(console.log(`📊 Quotations API Response Data (${e}):`,u),u&&u.length>0){console.log("📝 First quotation details:",{id:u[0].id,customerName:u[0].customerName,customerId:u[0].customerId,customerContact:JSON.stringify(u[0].customerContact).substring(0,100),selectedEquipment:u[0].selectedEquipment?`${u[0].selectedEquipment.name||"Unnamed"} (${u[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const d=u[0].selectedEquipment&&u[0].selectedEquipment.name,h=u[0].selectedMachines&&Array.isArray(u[0].selectedMachines)&&u[0].selectedMachines.length>0;console.log("📋 Equipment data check:",{hasEquipment:!!d,hasMachines:!!h,machineCount:h?u[0].selectedMachines.length:0,firstMachine:h?u[0].selectedMachines[0].name:"N/A"});const f=!!u[0].customerId,m=!!u[0].customerName,p=u[0].customerContact&&typeof u[0].customerContact=="object"&&Object.keys(u[0].customerContact).length>0;console.log("👤 Customer data check:",{hasCustomerId:f,hasCustomerName:m,hasCustomerContact:p,customerType:p?typeof u[0].customerContact:"N/A"})}}catch(u){console.error("Error parsing response data:",u)}}if(!a.ok){let c=`API Error: ${a.status} ${a.statusText}`;const u=a.headers.get("content-type");console.error(`API Error: ${a.status} ${a.statusText} for ${Af}${e}`),console.error("Response Headers:",{"content-type":u,"content-length":a.headers.get("content-length")});try{if(u&&u.includes("application/json")){const d=await a.json();if(c=d.error||c,d.details&&(c+=` - ${d.details}`),console.error("API Error JSON:",d),a.status===401)throw console.warn("👮‍♂️ Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((s=t.headers)==null?void 0:s["X-Bypass-Auth"])||"Not present"},environment:"production",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const d=await a.text();d&&(console.error("API Error Text:",d.substring(0,300)),c+=` - ${d.substring(0,100)}`)}}catch(d){console.error("Error parsing API error response:",d),c+=" (Error response could not be parsed)"}throw new Error(`${c} (${e})`)}const l=await a.json();return l&&typeof l=="object"&&"success"in l&&"data"in l?l.data:l}catch(r){throw console.error(`API call failed: ${e}`,r),r}},$n={get:e=>lo(e,{method:"GET"}),post:(e,t)=>lo(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>lo(e,{method:"PUT",body:JSON.stringify(t)}),patch:(e,t)=>lo(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>lo(e,{method:"DELETE"})},Vk=async()=>{try{console.log("🔍 DEBUG: customerService.getCustomers() called"),console.log('🔍 DEBUG: About to call api.get("/customers")');const e=await $n.get("/customers");return console.log("🔍 DEBUG: api.get response received:",e),console.log("🔍 DEBUG: Response type:",typeof e,"Array?",Array.isArray(e)),e}catch(e){return console.error("❌ DEBUG: Failed to fetch customers:",e),console.error("❌ DEBUG: Error details:",e.message,e.stack),[]}},Uk=async e=>{try{console.log("Creating customer via API:",e);const t=await $n.post("/customers",e);return console.log("Customer created successfully:",t),t}catch(t){throw console.error("Failed to create customer:",t),new Error(t.message||"Failed to create customer")}},a8=async(e,t)=>{try{return await $n.put(`/customers/${e}`,t)}catch(n){throw console.error(`Failed to update customer ${e}:`,n),new Error(n.message||"Failed to update customer")}},o8=async e=>{try{return await $n.delete(`/customers/${e}`),!0}catch(t){throw console.error(`Failed to delete customer ${e}:`,t),new Error(t.message||"Failed to delete customer")}};function l8({isOpen:e,onClose:t,onSelect:n,initialCustomerData:s}){const[r,i]=x.useState("select"),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState(!0),[f,m]=x.useState({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""});x.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{console.log("🔍 Fetching customers for modal...");const v=await Vk();console.log("✅ Received customers:",v),l(v)}catch(v){console.error("❌ Error fetching customers:",v)}finally{h(!1)}},g=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const v=await Uk({...f,name:f.name.trim(),contactName:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A",type:"other",notes:""});console.log("Created new customer:",v),n(v)}catch(v){console.error("Error creating customer:",v),alert("Error creating customer")}},y=v=>{console.log("Selected existing customer:",v),n(v)},b=a.filter(v=>{var w;return v.name.toLowerCase().includes(c.toLowerCase())||v.email.toLowerCase().includes(c.toLowerCase())||((w=v.id)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))});return o.jsx(Ot,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx(W,{variant:r==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),o.jsx(W,{variant:r==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||"",companyName:(s==null?void 0:s.companyName)||"",designation:(s==null?void 0:s.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),r==="select"?o.jsxs(o.Fragment,{children:["            ",o.jsxs("div",{className:"relative mb-2",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),o.jsx(me,{placeholder:"Search customers...",value:c,onChange:v=>u(v.target.value),className:"pl-10"}),c&&o.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),o.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?o.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):b.length===0?o.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):b.map(v=>o.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>y(v),children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"font-semibold text-base text-gray-900",children:v.name}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[v.companyName&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:v.companyName}),v.designation&&v.companyName&&o.jsx("div",{className:"hidden sm:inline-block text-gray-700",children:"•"}),v.designation&&o.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:v.designation})]}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-700 truncate",children:v.email}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mt-0.5",children:["ID: ",v.id]})]})},v.id))})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(me,{label:"Customer Name",value:f.name,onChange:v=>m(w=>({...w,name:v.target.value})),placeholder:"Enter customer name",required:!0}),o.jsx(me,{label:"Company Name",value:f.companyName,onChange:v=>m(w=>({...w,companyName:v.target.value})),placeholder:"Enter company name",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(me,{label:"Designation",value:f.designation,onChange:v=>m(w=>({...w,designation:v.target.value})),placeholder:"Enter designation",required:!0}),o.jsx(me,{label:"Email",type:"email",value:f.email,onChange:v=>m(w=>({...w,email:v.target.value})),placeholder:"Enter email address",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[o.jsx(me,{label:"Phone",value:f.phone,onChange:v=>m(w=>({...w,phone:v.target.value})),placeholder:"Enter phone number",required:!0}),o.jsx(me,{label:"Address",value:f.address,onChange:v=>m(w=>({...w,address:v.target.value})),placeholder:"Enter address",required:!0})]}),"            ",o.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[o.jsx(W,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),o.jsx(W,{onClick:g,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function dd(){return o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx(ar,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",o.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),o.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[o.jsx(ar,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),o.jsxs("span",{children:["Fields highlighted in ",o.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",o.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const c8=({data:e,dataType:t,className:n})=>{const[s,r]=x.useState(!1);return x.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),a=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});r(i||a)},[e]),s?o.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),o.jsxs("p",{children:["You are currently viewing ",o.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",o.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsx("li",{children:"Check that the API server is running"}),o.jsx("li",{children:"Verify database connection settings"}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),o.jsxs("li",{children:["Run ",o.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),o.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[o.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},u8=e=>{if(!e)return console.warn("API response is null or undefined"),[];if(Array.isArray(e))return e;if(e.data&&Array.isArray(e.data)||e.success&&e.data&&Array.isArray(e.data))return e.data;if(e.items&&Array.isArray(e.items))return e.items;if(typeof e=="object"&&!Array.isArray(e)){const t=Object.values(e);if(t.length===1&&Array.isArray(t[0]))return t[0]}return console.warn("Unable to extract array from API response:",e),[]},d8=e=>{if(!e)return"No item";const t=e.customerName||e.customer_name||e.customer&&e.customer.name||"Unknown",n=e.email||e.customer&&e.customer.email||"",s=e.customerId||e.customer_id||e.id||"";return`${t}${n?` (${n})`:""}${s?` [${s}]`:""}`},Tw=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],h8=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],f8=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function m8(){const{user:e}=Qe(),t=Ln(),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[S,N]=x.useState(null),[k,j]=x.useState({show:!1,title:""}),C=new Date().toISOString().split("T")[0],[D,E]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[O,F]=x.useState(0),[L,P]=x.useState(null),[B,V]=x.useState(!1),[R,T]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",serviceNeeded:"",siteLocation:"",startDate:"",rentalDays:1,shiftTiming:"",status:"new",source:"",designation:"",notes:""});x.useEffect(()=>{M(),U()},[]),x.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),H()},[n,c,d]),x.useEffect(()=>{if(v&&S){const _=new Date().toISOString().split("T")[0];T({fullName:S.customerName||"",companyName:S.companyName||"",phoneNumber:S.phone||"",email:S.email||"",serviceNeeded:S.serviceNeeded||"",siteLocation:S.siteLocation||"",startDate:S.startDate||_,rentalDays:S.rentalDays||1,shiftTiming:S.shiftTiming||"",status:S.status||"new",source:S.source||"",designation:S.designation||"",notes:S.notes||""})}},[v,S]);const M=async()=>{try{console.log("Fetching leads from API...");const _=await Ul(),I=u8(_);console.log("🧪 Debug leads response:",{originalResponse:_,extractedData:I,isArray:Array.isArray(I),length:Array.isArray(I)?I.length:"not array",firstLead:I.length>0?d8(I[0]):"none"}),console.log("Leads data received:",I),s(I||[]),m(!1)}catch(_){console.error("Error fetching leads:",_),G("Error fetching leads","error"),s([]),m(!1)}},U=async()=>{try{const I=`${"http://103.224.243.242:3001/api".replace(/\/$/,"")}/auth/sales-agents`;console.log("Fetching sales agents from API at:",I);const Q=await fetch(I,{headers:{"Content-Type":"application/json","X-Bypass-Auth":"development-only-123"}});if(Q.ok){const te=await Q.json();console.log("Sales agents fetched:",te),i(te)}else console.error("Failed to fetch sales agents:",Q.status),i([])}catch(_){console.error("Error fetching sales agents:",_),i([])}},H=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads. Current filters:`,{searchTerm:c,statusFilter:d});let _=[...n];c&&(_=_.filter(I=>{var Q,te,ne,be;return((Q=I==null?void 0:I.customerName)==null?void 0:Q.toLowerCase().includes(c.toLowerCase()))||!1||((te=I==null?void 0:I.companyName)==null?void 0:te.toLowerCase().includes(c.toLowerCase()))||!1||((ne=I==null?void 0:I.email)==null?void 0:ne.toLowerCase().includes(c.toLowerCase()))||!1||((be=I==null?void 0:I.phone)==null?void 0:be.includes(c))||!1}),console.log(`After search filter: ${_.length} leads`)),d!=="all"?(_=_.filter(I=>(I==null?void 0:I.status)===d),console.log(`After status filter (${d}): ${_.length} leads`)):(_=_.filter(I=>(I==null?void 0:I.status)!=="converted"),console.log(`After excluding converted leads: ${_.length} leads`)),console.log(`Final filtered leads: ${_.length} leads match criteria`),l(_)},Z=async _=>{var te;if(_.preventDefault(),!D.fullName||!D.phoneNumber||!D.email||!D.machineryType||!D.location||!D.startDate||!D.rentalDays){G("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.email)){G("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(D.phoneNumber)){G("Please enter a valid phone number","error");return}try{const ne=(e==null?void 0:e.role)==="sales_agent"?e.id:D.assignedTo,be=(e==null?void 0:e.role)==="sales_agent"?e.name:((te=r.find(X=>X.id===D.assignedTo))==null?void 0:te.name)||"",$={customerName:D.fullName,companyName:D.companyName,email:D.email,phone:D.phoneNumber,serviceNeeded:D.machineryType,siteLocation:D.location,startDate:D.startDate,rentalDays:parseInt(D.rentalDays),shiftTiming:D.shiftTiming,status:"new",notes:D.notes,designation:D.designation,...ne&&ne.trim()!==""?{assignedTo:ne,assignedToName:be}:{}};console.log("Creating lead with data:",$);const z=await j5($);s(X=>[...X,z]),g(!1),q(),G("Lead created successfully","success")}catch(ne){console.error("Error creating lead:",ne),G("Error creating lead","error")}},oe=async(_,I)=>{try{const Q=await Zv(_,I);Q&&(s(te=>te.map(ne=>ne.id===_?Q:ne)),G("Lead status updated","success"))}catch(Q){console.error("Error updating lead status:",Q),G("Error updating lead status","error")}},ue=_=>{console.log("Selected customer:",_),P(_),b(!1),setTimeout(()=>{V(!0)},100)},ve=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:S,selectedCustomer:L,dealValue:O}),!S){G("No lead selected","error");return}if(!L){G("No customer selected","error");return}const _=await E5({title:`Deal for ${L.name}`,description:`Deal created from lead for ${L.name}${L.companyName?` (${L.companyName})`:""}`,leadId:S.id,customerId:L.id,stage:"qualification",value:O,expectedCloseDate:new Date().toISOString(),customer:{name:L.name,email:L.email||S.email,phone:L.phone||S.phone,company:L.companyName||"",address:L.address||"",designation:L.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:S.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",_),await Zv(S.id,"converted"),s(I=>I.map(Q=>Q.id===S.id?{...Q,status:"converted"}:Q)),G("Lead converted to deal successfully","success"),V(!1),b(!1),N(null),P(null),F(0),t("/deals")}catch(_){console.error("Error converting lead to deal:",_),G("Error converting lead to deal","error")}finally{m(!1)}},Ne=async _=>{if(_.status!=="qualified"){G("Only qualified leads can be converted to deals","warning");return}N(_),b(!0)},A=async(_,I)=>{try{if(I===""){console.log("Unassigning lead",_);const ne=await eb(_,"","Unassigned");ne&&(s(be=>be.map($=>$.id===_?ne:$)),G("Lead unassigned successfully","success"));return}const Q=r.find(ne=>ne.id===I);if(!Q){G("Selected sales agent not found","error");return}const te=await eb(_,I,Q.name);te&&(s(ne=>ne.map(be=>be.id===_?te:be)),G("Lead assignment updated","success"))}catch(Q){console.error("Error updating lead assignment:",Q),G("Error updating lead assignment","error")}},q=()=>{E({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},G=(_,I="success")=>{j({show:!0,title:_,variant:I}),setTimeout(()=>j({show:!1,title:""}),3e3)},ie=async _=>{if(_.preventDefault(),!R.fullName||!R.phoneNumber||!R.email||!R.serviceNeeded||!R.siteLocation||!R.startDate||!R.rentalDays||R.rentalDays<1){G("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R.email)){G("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(R.phoneNumber)){G("Please enter a valid phone number","error");return}try{const te=await w5(S.id,{customerName:R.fullName,companyName:R.companyName,email:R.email,phone:R.phoneNumber,serviceNeeded:R.serviceNeeded,siteLocation:R.siteLocation,startDate:R.startDate,rentalDays:R.rentalDays,shiftTiming:R.shiftTiming,status:R.status,source:R.source,designation:R.designation,notes:R.notes});console.log("Update response:",te),te?s(ne=>{const be=ne.map($=>$.id===S.id?te:$);return console.log("Updated leads array:",be),be}):(console.log("No updated lead returned, refetching all leads"),await M()),w(!1),N(null),G("Lead updated successfully","success")}catch(te){console.error("Error updating lead:",te),G("Error updating lead","error")}};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsx(c8,{data:n,dataType:"leads"}),o.jsxs(ae,{children:[o.jsxs(xe,{children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4",children:[o.jsx(ye,{className:"text-xl font-semibold text-gray-900",children:"Leads Pipeline"}),o.jsx(W,{onClick:()=>g(!0),className:"whitespace-nowrap self-start sm:self-auto",leftIcon:o.jsx(ds,{className:"h-4 w-4"}),variant:"accent",children:"Add Lead"})]}),o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4 p-4 bg-gradient-to-r from-gray-50/80 to-gray-100/50 rounded-xl border border-gray-200/60 shadow-sm relative z-10",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx(ps,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),o.jsx(Ue,{type:"text",placeholder:"Search leads...",value:c,onChange:_=>u(_.target.value),className:"w-full bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 min-w-0 text-gray-900 placeholder:text-gray-500"})]}),o.jsx("div",{className:"relative z-20 w-full sm:w-[180px] flex-shrink-0",children:o.jsx(ke,{value:d,onChange:_=>h(_),options:[{value:"all",label:"All Status"},...Tw],className:"w-full bg-white border-gray-200"})})]})]}),o.jsx(le,{children:f?o.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):a.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):o.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200/60 bg-white shadow-sm",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assigned To"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(_=>o.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/30 transition-all duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:_.customerName||"Unknown Customer"}),_.companyName&&o.jsx("div",{className:"text-sm text-gray-500",children:_.companyName}),!_.customerName&&!_.companyName&&_.id&&o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",_.id.substring(0,8),"..."]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.serviceNeeded||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.siteLocation||"Not specified"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(ke,{value:_.status,onChange:I=>oe(_.id,I),options:Tw,className:"min-w-[130px]"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?o.jsx(ke,{value:_.assignedTo||"",onChange:I=>A(_.id,I),options:[{value:"",label:"Unassigned"},...r.map(I=>({value:I.id,label:I.name}))],className:"min-w-[160px]"}):o.jsx("div",{className:"text-sm text-gray-900",children:!_.assignedTo||_.assignedTo===""?"Unassigned":_.assignedToName||"Unassigned"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{N(_),w(!0)},leftIcon:o.jsx(Pa,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Edit"}),_.status==="qualified"&&o.jsx(W,{variant:"outline",size:"sm",onClick:()=>Ne(_),leftIcon:o.jsx(q_,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Convert to Deal"})]})})]},_.id))})]})})})]}),o.jsx(Ot,{isOpen:p,onClose:()=>{g(!1),q()},title:"Create New Lead",size:"lg",children:o.jsxs("form",{onSubmit:Z,className:"space-y-6",children:[o.jsx(dd,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(me,{label:"Full Name",value:D.fullName,onChange:_=>E(I=>({...I,fullName:_.target.value})),required:!0}),o.jsx(me,{label:"Company Name",value:D.companyName,onChange:_=>E(I=>({...I,companyName:_.target.value})),helperText:"Optional"}),o.jsx(me,{label:"Phone Number",type:"tel",value:D.phoneNumber,onChange:_=>E(I=>({...I,phoneNumber:_.target.value})),required:!0}),o.jsx(me,{label:"Email Address",type:"email",value:D.email,onChange:_=>E(I=>({...I,email:_.target.value})),required:!0}),o.jsx(ke,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...h8],value:D.machineryType,onChange:_=>E(I=>({...I,machineryType:_})),required:!0}),o.jsx(me,{label:"Site Location",value:D.location,onChange:_=>E(I=>({...I,location:_.target.value})),required:!0}),o.jsx(me,{label:"Start Date",type:"date",value:D.startDate,min:C,onChange:_=>E(I=>({...I,startDate:_.target.value})),required:!0}),o.jsx(me,{label:"Number of Rental Days",type:"number",min:"1",value:D.rentalDays,onChange:_=>{const I=Math.max(1,parseInt(_.target.value)||1);E(Q=>({...Q,rentalDays:I.toString()}))},required:!0}),o.jsx(ke,{label:"Shift Timing",options:f8,value:D.shiftTiming,onChange:_=>E(I=>({...I,shiftTiming:_})),required:!0}),o.jsx(me,{label:"Designation",value:D.designation,onChange:_=>E(I=>({...I,designation:_.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&o.jsx(ke,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...r.map(_=>({value:_.id,label:_.name}))],value:D.assignedTo,onChange:_=>E(I=>({...I,assignedTo:_})),required:!0})]}),o.jsx(hs,{label:"Additional Notes",value:D.notes,onChange:_=>E(I=>({...I,notes:_.target.value})),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{g(!1),q()},children:"Cancel"}),"            ",o.jsx(W,{type:"submit",variant:"accent",children:"Create Lead"})]})]})}),o.jsx(l8,{isOpen:y,onClose:()=>{b(!1),N(null),P(null),F(0)},onSelect:ue,initialCustomerData:S?{name:S.customerName,email:S.email||"",phone:S.phone||"",companyName:S.companyName||"",address:"",designation:S.designation||""}:void 0}),o.jsx(Ot,{isOpen:B,onClose:()=>{V(!1),N(null),P(null),F(0)},title:"Enter Deal Value",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(me,{label:"Deal Value",type:"number",value:O===0?"":O,onChange:_=>{const I=_.target.value;F(I===""?0:Number(I))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{V(!1),N(null),P(null),F(0)},children:"Cancel"}),o.jsx(W,{onClick:ve,variant:"accent",children:"Create Deal"})]})]})}),o.jsx(Ot,{isOpen:v,onClose:()=>{w(!1),N(null)},title:"Edit Lead Details",size:"lg",children:S&&o.jsxs("form",{onSubmit:ie,className:"space-y-6",children:[o.jsx(dd,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(me,{label:"Full Name",value:R.fullName,onChange:_=>T(I=>({...I,fullName:_.target.value})),required:!0}),o.jsx(me,{label:"Company Name",value:R.companyName,onChange:_=>T(I=>({...I,companyName:_.target.value})),helperText:"Optional"}),o.jsx(me,{label:"Phone Number",type:"tel",value:R.phoneNumber,onChange:_=>T(I=>({...I,phoneNumber:_.target.value})),required:!0}),o.jsx(me,{label:"Email Address",type:"email",value:R.email,onChange:_=>T(I=>({...I,email:_.target.value})),required:!0}),o.jsx(me,{label:"Service Needed",value:R.serviceNeeded,onChange:_=>T(I=>({...I,serviceNeeded:_.target.value})),required:!0}),o.jsx(me,{label:"Site Location",value:R.siteLocation,onChange:_=>T(I=>({...I,siteLocation:_.target.value})),required:!0}),o.jsx(me,{label:"Start Date",type:"date",value:R.startDate,onChange:_=>T(I=>({...I,startDate:_.target.value})),required:!0}),o.jsx(me,{label:"Rental Days",type:"number",min:"1",value:R.rentalDays.toString(),onChange:_=>T(I=>({...I,rentalDays:parseInt(_.target.value)||1})),required:!0}),o.jsx(me,{label:"Shift Timing",value:R.shiftTiming,onChange:_=>T(I=>({...I,shiftTiming:_.target.value})),placeholder:"e.g., Day Shift, Night Shift"}),o.jsx(ke,{label:"Status",value:R.status,onChange:_=>T(I=>({...I,status:_})),options:[{label:"New",value:"new"},{label:"In Process",value:"in_process"},{label:"Qualified",value:"qualified"},{label:"Unqualified",value:"unqualified"},{label:"Lost",value:"lost"},{label:"Converted",value:"converted"}],required:!0}),o.jsx(ke,{label:"Source",value:R.source,onChange:_=>T(I=>({...I,source:_})),options:[{label:"Select Source",value:""},{label:"Website",value:"website"},{label:"Referral",value:"referral"},{label:"Direct",value:"direct"},{label:"Social Media",value:"social"},{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Other",value:"other"}]})]}),o.jsx("div",{children:o.jsx(me,{label:"Designation",value:R.designation,onChange:_=>T(I=>({...I,designation:_.target.value})),placeholder:"Job title or role"})}),o.jsx("div",{children:o.jsx(hs,{label:"Notes",value:R.notes,onChange:_=>T(I=>({...I,notes:_.target.value})),placeholder:"Additional notes or comments...",rows:3})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{w(!1),N(null)},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:"Save Changes"})]})]})}),k.show&&o.jsx(mt,{title:k.title,variant:k.variant,isVisible:k.show,onClose:()=>j({show:!1,title:""})})]})}const p8="modulepreload",g8=function(e){return"/"+e},Pw={},_w=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=g8(c),c in Pw)return;Pw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":p8,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},x8={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1},{id:"sample-equipment-2",machineType:"mobile_crane",equipmentId:"crane-002",name:"100T Mobile Crane",baseRates:{micro:8e3,small:7500,monthly:7e3,yearly:6500},baseRate:7e3,runningCostPerKm:150,quantity:2}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",workingCost:4e3,includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile_crane",otherFactors:["rigger","area","customer_reputation"],dealType:"credit",sundayWorking:"no"};function y8({template:e,quotation:t,onDownloadPDF:n,onSendEmail:s,className:r=""}){const[i,a]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState({show:!1,title:""});x.useEffect(()=>{if(!e){c("Template is required");return}if(!e.content){c("Template content is required");return}c(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t)},[e,t]);const h=t||x8,f=(b,v="success")=>{d({show:!0,title:b,variant:v}),setTimeout(()=>d({show:!1,title:""}),3e3)};let m="";try{e&&e.content?(m=o2(h,e),console.log("Generated merged content:",m?m.substring(0,100)+"...":"empty")):(console.warn("Cannot merge template - missing template or content"),m='<div style="padding: 20px;">Template content could not be loaded</div>')}catch(b){console.error("Error merging template:",b),c("Failed to merge template with quotation data"),m='<div style="padding: 20px; color: red;">Error generating preview</div>'}const g=[{key:"customer_name",label:"Customer Name",category:"Customer"},{key:"equipment_name",label:"Equipment Name",category:"Equipment"},{key:"project_duration",label:"Project Duration",category:"Project"},{key:"total_amount",label:"Total Amount",category:"Financial"}].reduce((b,v)=>(b[v.category]||(b[v.category]=[]),b[v.category].push(v),b),{}),y=()=>{if(!m){f("No content to copy","error");return}navigator.clipboard.writeText(m).then(()=>{f("Content copied to clipboard","success")}).catch(()=>{f("Failed to copy content","error")})};return l?o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[o.jsx("strong",{children:"Error:"})," ",l]})}):o.jsxs("div",{className:`space-y-4 sm:space-y-6 ${r}`,children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:o.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[o.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),o.jsxs("div",{className:"w-full md:w-96 bg-white rounded-lg shadow p-6 mt-2",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Quotation Summary"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Working Cost"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",h.workingCost||0]})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Food & Accommodation"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(h.foodResources||0)+(h.accomResources||0)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Mob/Demob Cost"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",h.mobDemob||0]})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Risk & Usage"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",h.riskFactor==="high"?1e4:h.riskFactor==="medium"?5e3:0]})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Extra Commercial Charges"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",h.extraCharge||0]})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Incidental Charges"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",Array.isArray(h.incidentalCharges)?h.incidentalCharges.length*5e3:0]})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Other Factors"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",h.otherFactorsCharge||0]})]}),o.jsx("hr",{className:"my-2"}),o.jsxs("div",{className:"flex justify-between text-gray-900 font-semibold",children:[o.jsx("span",{children:"Subtotal"}),o.jsxs("span",{children:["₹",h.totalRent||0]})]}),o.jsxs("div",{className:"flex justify-between text-gray-900",children:[o.jsx("span",{children:"GST (18%)"}),o.jsxs("span",{children:["₹",h.includeGst?Math.round((h.totalRent||0)*.18):0]})]}),o.jsxs("div",{className:"flex justify-between text-xl font-bold text-primary-700 mt-4",children:[o.jsx("span",{children:"Total Amount"}),o.jsxs("span",{children:["₹",h.includeGst?Math.round((h.totalRent||0)*1.18):h.totalRent||0]})]}),o.jsxs("div",{className:"flex items-center mt-2",children:[o.jsx("input",{type:"checkbox",checked:!!h.includeGst,readOnly:!0,className:"mr-2"}),o.jsx("span",{className:"text-gray-700",children:"Include GST"})]})]})]}),o.jsxs(ae,{children:[o.jsx(xe,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsxs(ye,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o.jsx(Ht,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[o.jsxs(W,{variant:"outline",size:"xs",onClick:()=>a(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(ar,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),o.jsx(W,{variant:"outline",size:"xs",onClick:y,disabled:!m,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&o.jsx(le,{className:"px-3 sm:px-6",children:o.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&o.jsxs(ae,{children:[o.jsx(xe,{className:"p-3 sm:p-6",children:o.jsx(ye,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),o.jsxs(le,{className:"p-3 sm:p-6",children:[o.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(g).map(([b,v])=>o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:b}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:v.map(w=>o.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:w.description,onClick:()=>{navigator.clipboard.writeText(`{{${w.key}}}`),f(`Copied {{${w.key}}}`,"success")},children:`{{${w.key}}}`},w.key))})]},b))}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),o.jsxs(ae,{children:[o.jsx(xe,{className:"p-3 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[o.jsx(ye,{className:"text-base sm:text-lg",children:"Quotation Preview"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n&&o.jsxs(W,{variant:"outline",size:"xs",onClick:n,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(Wg,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),s&&o.jsxs(W,{variant:"outline",size:"xs",onClick:s,className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx(fa,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),o.jsxs(le,{className:"p-3 sm:p-6",children:[l?o.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[o.jsxs("p",{className:"font-medium",children:["Error: ",l]}),o.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,m?o.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:m}}):o.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[o.jsx(rt,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),o.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}),e&&!e.content&&o.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[o.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),o.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]}),u.show&&o.jsx(mt,{title:u.title,variant:u.variant,isVisible:u.show,onClose:()=>d({show:!1,title:""})})]})}const v8=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function b8(){const{user:e}=Qe(),t=Ln(),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(null),[y,b]=x.useState(null),[v,w]=x.useState(null),[S,N]=x.useState(!1),[k,j]=x.useState(!1),[C,D]=x.useState(""),[E,O]=x.useState(!1),[F,L]=x.useState(!1),[P,B]=x.useState({show:!1,title:""}),[V,R]=x.useState(null);x.useEffect(()=>{T()},[]),x.useEffect(()=>{U()},[n,c,d]);const T=async()=>{try{m(!0),g(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:A}=await _w(async()=>{const{getCustomers:te}=await Promise.resolve().then(()=>Qv);return{getCustomers:te}},void 0);let q=[],G=[],ie=[];try{q=await uz(),console.log("QuotationManagement: Fetched quotations:",(q==null?void 0:q.length)||0)}catch(te){console.error("Error fetching quotations:",te),H("Warning: Could not load quotations","warning")}try{G=await eh(),console.log("QuotationManagement: Fetched deals:",(G==null?void 0:G.length)||0)}catch(te){console.error("Error fetching deals:",te),H("Warning: Could not load deals.","warning"),G=[]}try{ie=await A(),console.log("QuotationManagement: Fetched customers:",(ie==null?void 0:ie.length)||0)}catch(te){console.error("Error fetching customers:",te),H("Warning: Could not load customers","warning")}const _=new Map;ie.forEach(te=>{_.set(te.id,te)}),q.length>0&&console.log("Sample quotation data:",{id:q[0].id,customerId:q[0].customerId,customerName:q[0].customerName,customerContact:q[0].customerContact,selectedEquipment:q[0].selectedEquipment}),ie.length>0&&console.log("Sample customer data:",{id:ie[0].id,name:ie[0].name});const I=q.map(te=>{const ne={...te},be=_.get(te.customerId);return be?(console.log(`Found matching customer for quotation ${te.id}: ${be.name}`),ne.customerName=ne.customerName||be.name,ne.customerContact=ne.customerContact||{},ne.customerContact.name||(ne.customerContact.name=be.contactName),ne.customerContact.company||(ne.customerContact.company=be.name),ne.customerContact.email||(ne.customerContact.email=be.email),ne.customerContact.phone||(ne.customerContact.phone=be.phone),ne.customerContact.address||(ne.customerContact.address=be.address)):console.log(`No matching customer found for quotation ${te.id} with customerId ${te.customerId}`),ne.customerName=ne.customerName||"Unknown Customer",ne.customerContact=ne.customerContact||{},ne.customerContact.name=ne.customerContact.name||"Contact Not Available",ne.customerContact.company=ne.customerContact.company||"No Company",ne});s(I);const Q=G.filter(te=>te.stage==="qualification"||te.stage==="proposal");i(Q),await M()}catch(A){console.error("Error fetching data:",A),g("Failed to load quotations. Please try again."),H("Error fetching data","error")}finally{m(!1)}},M=async()=>{try{const A=await KC();if(A&&A.defaultTemplateId){const G=await BC(A.defaultTemplateId);if(G){console.log("Loaded template from config:",G),w(G);return}}try{const ie=await(await _w(()=>Promise.resolve().then(()=>Qv),void 0)).getTemplates();if(ie&&ie.length>0){const _=ie.find(I=>I.isDefault)||ie[0];console.log("Loaded template from templateService:",_),w(_);return}}catch(G){console.error("Error loading templates from service:",G)}const q={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),w(q)}catch(A){console.error("Error loading default template:",A);const q={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};w(q)}},U=()=>{let A=[...n];c&&(A=A.filter(q=>{var G,ie,_;return(((G=q.customerContact)==null?void 0:G.name)||q.customerName||"").toLowerCase().includes(c.toLowerCase())||(((ie=q.customerContact)==null?void 0:ie.company)||"").toLowerCase().includes(c.toLowerCase())||(q.machineType||"").toLowerCase().includes(c.toLowerCase())||q.selectedMachines&&q.selectedMachines.some(I=>(I.name||"").toLowerCase().includes(c.toLowerCase()))||(((_=q.selectedEquipment)==null?void 0:_.name)||"").toLowerCase().includes(c.toLowerCase())})),d!=="all"&&(A=A.filter(q=>q.status===d)),l(A)},H=(A,q="success",G)=>{B({show:!0,title:A,description:G,variant:q}),setTimeout(()=>{B({show:!1,title:""})},5e3)},Z=()=>{if(!C){H("Please select a deal","warning");return}console.log("[handleProceedWithDeal] Navigating to /quotations/create?dealId="+C),t(`/quotations/create?dealId=${C}`),j(!1),D("")},oe=async A=>{try{R(A.id),console.log("Editing quotation:",A);const q=A.dealId||A.leadId;if(!q){H("Invalid quotation data","error","Missing deal ID");return}const[G,ie]=await Promise.all([wk(A.id),va(q)]);if(!ie){H("Associated deal not found","error","The deal associated with this quotation no longer exists");return}if(!G){H("Quotation not found","error","The quotation could not be found");return}console.log("Navigating to:",`/quotations/create?dealId=${q}&quotationId=${A.id}`),t(`/quotations/create?dealId=${q}&quotationId=${A.id}`,{state:{quotation:G,deal:ie}})}catch(q){console.error("Error preparing quotation edit:",q),H("Error preparing quotation edit","error")}finally{R(null)}},ue=async A=>{var q,G,ie,_;try{if(O(!0),!v){H("No default template configured","warning","Please set a default template in Configuration settings.");return}let I=v.content;I=I.replace(/\{\{customer_name\}\}/g,((q=A.customerContact)==null?void 0:q.name)||A.customerName||""),I=I.replace(/\{\{equipment_name\}\}/g,((G=A.selectedEquipment)==null?void 0:G.name)||""),I=I.replace(/\{\{project_duration\}\}/g,`${A.numberOfDays} days`),I=I.replace(/\{\{total_amount\}\}/g,((ie=A.totalRent)==null?void 0:ie.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");const Q=window.open("","_blank");if(!Q){H("Popup blocked","error","Please allow popups to download PDF.");return}Q.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((_=A.customerContact)==null?void 0:_.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${I}
        </body>
        </html>
      `),await new Promise(te=>setTimeout(te,1e3)),Q.document.close(),Q.print(),Q.close(),H("PDF generated successfully","success")}catch(I){console.error("Error generating PDF:",I),H("Failed to generate PDF","error")}finally{O(!1)}},ve=async A=>{var q,G,ie,_,I,Q;try{if(L(!0),!v){H("No default template configured","warning","Please set a default template in Configuration settings.");return}let te=v.content;te=te.replace(/\{\{customer_name\}\}/g,((q=A.customerContact)==null?void 0:q.name)||A.customerName||""),te=te.replace(/\{\{equipment_name\}\}/g,((G=A.selectedEquipment)==null?void 0:G.name)||""),te=te.replace(/\{\{project_duration\}\}/g,`${A.numberOfDays} days`),te=te.replace(/\{\{total_amount\}\}/g,((ie=A.totalRent)==null?void 0:ie.toLocaleString("en-IN",{style:"currency",currency:"INR"}))||"");let ne="Equipment";A.selectedMachines&&A.selectedMachines.length>1?ne=`${A.selectedMachines.length} machines (${A.selectedMachines.map(ge=>ge.name).join(", ")})`:A.selectedMachines&&A.selectedMachines.length===1?ne=A.selectedMachines[0].name:(_=A.selectedEquipment)!=null&&_.name?ne=A.selectedEquipment.name:A.machineType&&(ne=A.machineType);const be=`Quotation from ASP Cranes - ${A.id.slice(0,8).toUpperCase()}`,$=((I=A.customerContact)==null?void 0:I.name)||A.customerName||"Customer",z=((Q=A.customerContact)==null?void 0:Q.email)||"",X=`Dear ${$},

Please find your quotation details for ${ne} below:

${te}

Best regards,
ASP Cranes Team`,Y=`mailto:${z}?subject=${encodeURIComponent(be)}&body=${encodeURIComponent(X)}`;window.open(Y),H("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(te){console.error("Error sending to customer:",te),H("Error preparing email","error")}finally{L(!1)}},Ne=x.useMemo(()=>r.length===0?[{value:"",label:"No deals available"}]:r.map(A=>{var q,G;return{value:A.id,label:`${((q=A.customer)==null?void 0:q.name)||"Unnamed"} - ${((G=A.customer)==null?void 0:G.company)||"No Company"} (${Te(A.value)})`}}),[r]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsx("div",{className:"flex flex-col min-h-screen",children:o.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),o.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",o.jsx(W,{onClick:()=>j(!0),className:"w-full sm:w-auto",leftIcon:o.jsx(ds,{className:"w-4 h-4"}),variant:"accent",children:"Create New Quotation"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ue,{placeholder:"Search by customer, company or equipment...",value:c,onChange:A=>u(A.target.value),leftIcon:o.jsx(ps,{className:"w-4 h-4"}),disabled:f})}),o.jsx("div",{className:"w-full sm:w-48",children:o.jsx(ke,{options:v8,value:d,onChange:h,leftIcon:o.jsx(sA,{className:"w-4 h-4"}),disabled:f})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Quotation History"})}),o.jsx(le,{className:"px-0 sm:px-6",children:f?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(rt,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?o.jsxs("div",{className:"text-center py-8 text-red-500",children:[o.jsx(Fl,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),o.jsx("p",{className:"text-lg font-medium",children:p}),o.jsx(W,{variant:"outline",size:"sm",onClick:T,className:"mt-4",children:"Try Again"})]}):a.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Ht,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),o.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(A=>{var q,G,ie,_;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsxs("div",{className:"flex items-start flex-col",children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((q=A.customerContact)==null?void 0:q.name)||A.customerName||"Customer"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((G=A.customerContact)==null?void 0:G.company)||A.customerName||"No Company"}),o.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",A.customerId?A.customerId.substring(0,8):"None"]}),o.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:A.selectedMachines&&A.selectedMachines.length>0?A.selectedMachines.length===1?A.selectedMachines[0].name:`${A.selectedMachines.length} machines`:((ie=A.selectedEquipment)==null?void 0:ie.name)||A.machineType||"No equipment data"}),o.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:Te(A.totalRent)})]})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:A.selectedMachines&&A.selectedMachines.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:A.selectedMachines.map(I=>I.name).join(", ")}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[A.selectedMachines.length," machine",A.selectedMachines.length>1?"s":""]})]}):(_=A.selectedEquipment)!=null&&_.name?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:A.selectedEquipment.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment"})]}):A.machineType?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:A.machineType}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment Type"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Type not specified"})]})}),o.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[o.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[A.numberOfDays," days"]}),o.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[A.workingHours," hrs/day"]})]}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:Te(A.totalRent)}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:o.jsx(ql,{status:A.status})}),o.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>oe(A),title:"Edit Quotation",disabled:f||V===A.id,children:V===A.id?o.jsx(rt,{size:14,className:"animate-spin"}):o.jsx(Pa,{size:14})}),o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>{b(A),N(!0)},title:"Preview Quotation",disabled:!v||f,children:o.jsx(Bu,{size:14})}),o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>ue(A),disabled:E||!v||f,title:"Download PDF",children:E?o.jsx(rt,{size:14,className:"animate-spin"}):o.jsx(Wg,{size:14})}),o.jsx(W,{variant:"ghost",size:"xs",onClick:()=>ve(A),disabled:F||!v||f,title:"Send to Customer",children:F?o.jsx(rt,{size:14,className:"animate-spin"}):o.jsx(fa,{size:14})})]})})]},A.id)})})]})})})]}),o.jsx(Ot,{isOpen:k,onClose:()=>{j(!1),D("")},title:"Create New Quotation",size:"lg",children:o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),o.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",o.jsx(ke,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...Ne.filter(A=>A.value!=="")],value:C,onChange:D,label:"Available Deals",disabled:f,required:!0}),C&&o.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const A=r.find(q=>q.id===C);return A?o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),o.jsx("p",{className:"text-blue-800",children:A.customer.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),o.jsx("p",{className:"text-blue-800",children:A.customer.company})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),o.jsx("p",{className:"text-blue-800",children:Te(A.value)})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),o.jsx("p",{className:"text-blue-800 capitalize",children:A.stage})]})]})]}):null})()})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[o.jsx(W,{variant:"outline",onClick:()=>{j(!1),D("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),o.jsxs(W,{onClick:Z,disabled:!C||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",variant:"accent",children:[f?o.jsx(rt,{className:"w-4 h-4 animate-spin"}):o.jsx(ds,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),o.jsx(Ot,{isOpen:S,onClose:()=>N(!1),title:"Quotation Preview",size:"full",children:y&&v&&o.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[o.jsx("div",{className:"flex-1",children:o.jsx(y8,{quotation:y,template:v,onDownloadPDF:()=>ue(y),onSendEmail:()=>ve(y)})}),o.jsxs("div",{className:"w-full md:w-80 bg-white rounded-lg shadow p-6 mt-6 md:mt-0",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Quotation Summary"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Working Cost"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Food & Accommodation"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Mob/Demob Cost"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Risk & Usage"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Extra Commercial Charges"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Incidental Charges"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsx("span",{children:"Other Factors"}),o.jsx("span",{className:"font-medium text-gray-900",children:"₹0"})]}),o.jsx("hr",{className:"my-2"}),o.jsxs("div",{className:"flex justify-between text-gray-900 font-semibold",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-gray-900",children:[o.jsx("span",{children:"GST (18%)"}),o.jsx("span",{children:"₹0"})]}),o.jsxs("div",{className:"flex justify-between text-xl font-bold text-primary-700 mt-4",children:[o.jsx("span",{children:"Total Amount"}),o.jsx("span",{children:"₹0"})]}),o.jsxs("div",{className:"flex items-center mt-2",children:[o.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"mr-2"}),o.jsx("span",{className:"text-gray-700",children:"Include GST"})]})]})]})]})}),P.show&&o.jsx(mt,{title:P.title,variant:P.variant,isVisible:P.show,onClose:()=>B({show:!1,title:""})})]})})}const Aw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},Mw={foodRate:2500,accommodationRate:4e3,transportRate:0},Mf={riggerAmount:4e4,helperAmount:12e3,incidentalOptions:[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}],usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}},w8=5*60*1e3,j8=mS((e,t)=>{let n=[];const s=r=>{n.forEach(i=>i(r))};return{quotationConfig:null,resourceRatesConfig:null,additionalParamsConfig:null,isLoading:!1,errors:{},lastFetchTimes:{},fetchAllConfigs:async()=>{const{fetchQuotationConfig:r,fetchResourceRatesConfig:i,fetchAdditionalParamsConfig:a}=t();e({isLoading:!0,errors:{}});try{await Promise.all([r(),i(),a()])}catch(l){console.error("Error fetching configurations:",l)}finally{e({isLoading:!1})}},fetchQuotationConfig:async()=>{try{const r=await WC();e(i=>({quotationConfig:r||Aw,lastFetchTimes:{...i.lastFetchTimes,quotation:Date.now()},errors:{...i.errors,quotation:""}}))}catch(r){console.error("Error fetching quotation config:",r),e(i=>({quotationConfig:Aw,errors:{...i.errors,quotation:"Failed to fetch quotation configuration"}}))}},fetchResourceRatesConfig:async()=>{try{const r=await qC();e(i=>({resourceRatesConfig:r||Mw,lastFetchTimes:{...i.lastFetchTimes,resourceRates:Date.now()},errors:{...i.errors,resourceRates:""}}))}catch(r){console.error("Error fetching resource rates config:",r),e(i=>({resourceRatesConfig:Mw,errors:{...i.errors,resourceRates:"Failed to fetch resource rates configuration"}}))}},fetchAdditionalParamsConfig:async()=>{try{const r=await YC();e(i=>({additionalParamsConfig:{...Mf,...r},lastFetchTimes:{...i.lastFetchTimes,additionalParams:Date.now()},errors:{...i.errors,additionalParams:""}}))}catch(r){console.error("Error fetching additional params config:",r),e(i=>({additionalParamsConfig:Mf,errors:{...i.errors,additionalParams:"Failed to fetch additional parameters configuration"}}))}},updateQuotationConfig:async r=>{try{const i=await HC({orderTypeLimits:r});e(a=>({quotationConfig:i,lastFetchTimes:{...a.lastFetchTimes,quotation:Date.now()},errors:{...a.errors,quotation:""}})),s("quotation")}catch(i){throw console.error("Error updating quotation config:",i),e(a=>({errors:{...a.errors,quotation:"Failed to update quotation configuration"}})),i}},updateResourceRatesConfig:async r=>{try{const i=await GC(r);e(a=>({resourceRatesConfig:i,lastFetchTimes:{...a.lastFetchTimes,resourceRates:Date.now()},errors:{...a.errors,resourceRates:""}})),s("resourceRates")}catch(i){throw console.error("Error updating resource rates config:",i),e(a=>({errors:{...a.errors,resourceRates:"Failed to update resource rates configuration"}})),i}},updateAdditionalParamsConfig:async r=>{try{const i=await QC(r);e(a=>({additionalParamsConfig:{...Mf,...i},lastFetchTimes:{...a.lastFetchTimes,additionalParams:Date.now()},errors:{...a.errors,additionalParams:""}})),s("additionalParams")}catch(i){throw console.error("Error updating additional params config:",i),e(a=>({errors:{...a.errors,additionalParams:"Failed to update additional parameters configuration"}})),i}},invalidateConfig:r=>{e(i=>{const a={...i.lastFetchTimes};return delete a[r],{lastFetchTimes:a}})},isConfigStale:(r,i=w8)=>{const{lastFetchTimes:a}=t(),l=a[r];return l?Date.now()-l>i:!0},subscribeToConfigChanges:r=>(n.push(r),()=>{n=n.filter(i=>i!==r)})}}),N8=()=>{const{quotationConfig:e,resourceRatesConfig:t,additionalParamsConfig:n,isLoading:s,errors:r,fetchAllConfigs:i,fetchQuotationConfig:a,fetchResourceRatesConfig:l,fetchAdditionalParamsConfig:c,subscribeToConfigChanges:u,isConfigStale:d}=j8(),h=x.useCallback(async()=>{await i()},[i]),f=x.useCallback(async m=>{switch(m){case"quotation":await a();break;case"resourceRates":await l();break;case"additionalParams":await c();break}},[a,l,c]);return x.useEffect(()=>((async()=>{(!e||d("quotation"))&&await a(),(!t||d("resourceRates"))&&await l(),(!n||d("additionalParams"))&&await c()})(),u(g=>{console.log(`Configuration changed: ${g}. Quotation components will use updated values.`),window.dispatchEvent(new CustomEvent("configurationChanged",{detail:{configType:g}}))})),[e,t,n,a,l,c,u,d]),{quotationConfig:e,resourceRates:t,additionalParams:n,isLoading:s,errors:r,refreshConfigurations:h,refreshSpecificConfig:f}},Rf=(e,t)=>{x.useEffect(()=>{const n=s=>{t(s.detail)};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}},[e,t])},S8=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],C8=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],k8=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],E8=[{value:"day",label:"Day"},{value:"night",label:"Night"}],D8=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],co=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],T8=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],P8=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],Bc=[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}];function _8(){var ve,Ne,A,q,G,ie,_,I,Q,te,ne,be;const{user:e}=Qe(),t=Ln(),[n]=V_(),s=ms(),r=n.get("dealId")||"",i=n.get("quotationId");x.useEffect(()=>{console.log("[QuotationCreation] Loaded with dealId:",r,"quotationId:",i),r||console.warn("[QuotationCreation] No dealId provided - creating new quotation")},[r,i,t]);const{quotationConfig:a,resourceRates:l,additionalParams:c}=N8(),[u,d]=x.useState(null),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(0),[w,S]=x.useState({duration:!0,orderType:!0,machineSelection:!0,workingHours:!0,accommodation:!0,mobDemob:!0,additional:!0}),[N,k]=x.useState({show:!1,title:""}),[j,C]=x.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:co[0].value,sundayWorking:"no"}),[D,E]=x.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});Rf("resourceRatesUpdated",()=>{console.log("Resource rates updated, recalculating quotation..."),L()}),Rf("additionalParamsUpdated",()=>{console.log("Additional parameters updated, recalculating quotation..."),L()}),Rf("quotationConfigUpdated",$=>{if(console.log("Quotation configuration updated, checking order type...",$),j.numberOfDays>0){const z=F(j.numberOfDays);z!==j.orderType&&C(X=>({...X,orderType:z}))}L()}),x.useEffect(()=>{O()},[r,i]),x.useEffect(()=>{L()},[j,b]),x.useEffect(()=>{j.workingHours!==void 0&&L()},[j.workingHours]),x.useEffect(()=>{var $;if(j.orderType&&(($=j.selectedEquipment)!=null&&$.id)&&Array.isArray(h)&&h.length>0){const z=h.find(X=>X.id===j.selectedEquipment.id);if(z!=null&&z.baseRates){const X=z.baseRates[j.orderType];v(X)}}j.selectedMachines.length>0&&Array.isArray(h)&&h.length>0&&C(z=>({...z,selectedMachines:z.selectedMachines.map(X=>{const Y=h.find(ge=>ge.id===X.id);return Y!=null&&Y.baseRates?{...X,baseRate:Y.baseRates[j.orderType]||X.baseRate}:X})}))},[j.orderType,h.length]),x.useEffect(()=>{j.machineType?(async()=>{try{const z=await k5(j.machineType);f(Array.isArray(z)?z:[])}catch(z){console.error("Error fetching equipment:",z),f([])}})():f([])},[j.machineType]),x.useEffect(()=>{if(j.selectedEquipment&&Array.isArray(h)&&h.length>0){const $=h.find(z=>z.id===j.selectedEquipment.id);if($!=null&&$.baseRates){const z=$.baseRates[j.orderType];v(z),C(X=>({...X,baseRate:z,runningCostPerKm:$.runningCostPerKm||0}))}}},[j.orderType,j.selectedEquipment,h]);const O=async()=>{var $;try{p(!0),console.log("[QuotationCreation] Fetching data with dealId:",r,"quotationId:",i);const z=s.state;if(z&&z.quotation){const Y=z.quotation;console.log("[QuotationCreation] Prefilling from navigation state:",Y),C({...j,...Y}),p(!1);return}if(r){let Y=null;try{Y=await va(r),console.log("[QuotationCreation] Fetched deal data:",Y),d(Y)}catch(ge){console.error("[QuotationCreation] Error fetching deal by ID:",ge),T("Warning: Could not load deal details. You can still create a quotation.","warning"),d({id:r,customer:{name:"Unknown Customer",email:"",phone:"",company:"Unknown Company",address:"",designation:""},title:"Unknown Deal",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()})}}else d({id:"new",customer:{name:"New Customer",email:"",phone:"",company:"",address:"",designation:""},title:"New Quotation",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()});const X=await xx();if(console.log("Fetched equipment data:",X),i)try{console.log("[QuotationCreation] Fetching existing quotation:",i);const Y=await wk(i);if(Y){if(console.log("[QuotationCreation] Loaded existing quotation:",Y),C(ge=>({...ge,machineType:Y.machineType||"",selectedEquipment:Y.selectedEquipment||ge.selectedEquipment,selectedMachines:Y.selectedMachines||[],orderType:Y.orderType||"micro",numberOfDays:Y.numberOfDays||0,workingHours:Y.workingHours||8,foodResources:Y.foodResources||0,accomResources:Y.accomResources||0,siteDistance:Y.siteDistance||0,usage:Y.usage||"normal",riskFactor:Y.riskFactor||"low",extraCharge:Y.extraCharge||0,incidentalCharges:Y.incidentalCharges||[],otherFactorsCharge:Y.otherFactorsCharge||0,billing:Y.billing||"gst",includeGst:Y.includeGst!==void 0?Y.includeGst:!0,shift:Y.shift||"single",dayNight:Y.dayNight||"day",mobDemob:Y.mobDemob||0,mobRelaxation:Y.mobRelaxation||0,runningCostPerKm:Y.runningCostPerKm||0,otherFactors:Y.otherFactors||[],dealType:Y.dealType||co[0].value,sundayWorking:Y.sundayWorking||"no",version:Y.version||1,status:Y.status||"draft",customerName:Y.customerName||"",customerContact:Y.customerContact||{}})),($=Y.selectedEquipment)!=null&&$.id&&X){const ge=X.find(Fe=>Fe.id===Y.selectedEquipment.id);if(ge!=null&&ge.baseRates){const Fe=ge.baseRates[Y.orderType||"micro"];v(Fe)}}if(!u&&Y.dealId)try{const ge=await va(Y.dealId);ge&&(console.log("[QuotationCreation] Loaded deal from quotation:",ge),d(ge))}catch(ge){console.warn("[QuotationCreation] Could not load deal for quotation:",ge)}}else console.warn("[QuotationCreation] No quotation found with ID:",i),T("Quotation not found","warning")}catch(Y){console.error("[QuotationCreation] Error fetching quotation:",Y),T("Error loading quotation data","error")}console.log("Quotation config managed by centralized store")}catch(z){console.error("Error fetching data:",z),T("Error fetching data","error")}finally{p(!1)}},F=$=>{if(!(a!=null&&a.orderTypeLimits))return"micro";const z=a.orderTypeLimits;return $<=0?"micro":$>=z.yearly.minDays?"yearly":$>=z.monthly.minDays?"monthly":$>=z.small.minDays?"small":"micro"},L=()=>{console.log("Calculating quotation with working hours:",j.workingHours);const $=j.selectedMachines.length>0,z=b;if(!j.numberOfDays||!$&&!z){E({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const X=Number(j.numberOfDays),Y=X>25,ge=Y?26:X,Fe=P(ge),lt=j.shift==="double"?2:1;let Yt=0;const sn=j.workingHours===0?8:Number(j.workingHours)||8;$?j.selectedMachines.forEach(rn=>{const Ti=rn.baseRate,Va=rn.quantity;let Ua=0;Y?Ua=Ti/26/sn*sn*ge*lt*Va:Ua=Ti*sn*ge*lt*Va,Yt+=Ua}):Y?Yt=z/26/sn*sn*ge*lt:Yt=z*sn*ge*lt;const Jn=j.usage==="heavy"?.1:.05;let gs=0;$?j.selectedMachines.forEach(rn=>{gs+=rn.baseRate*rn.quantity*Jn}):gs=z*Jn;let He;if(Y)He=Number(j.foodResources)*((l==null?void 0:l.foodRate)??0)+Number(j.accomResources)*((l==null?void 0:l.accommodationRate)??0);else{const rn=((l==null?void 0:l.foodRate)??0)/26,Ti=((l==null?void 0:l.accommodationRate)??0)/26;He=(Number(j.foodResources)*rn+Number(j.accomResources)*Ti)*ge}const Di=B();let xs=0;const dy=j.riskFactor==="high"?.15:j.riskFactor==="medium"?.1:.05;$?j.selectedMachines.forEach(rn=>{xs+=rn.baseRate*rn.quantity*dy}):xs=z*dy;const oD=j.incidentalCharges.reduce((rn,Ti)=>{const Va=Bc.find(Ua=>Ua.value===Ti);return rn+(Va?Va.amount:0)},0);let vh=0;j.otherFactors.includes("rigger")&&(vh+=(c==null?void 0:c.riggerAmount)||4e4),j.otherFactors.includes("helper")&&(vh+=(c==null?void 0:c.helperAmount)||12e3);const hy=Number(j.extraCharge)+oD+vh,fy=Yt+He+Di+xs+gs+hy,my=j.includeGst?fy*.18:0,lD=fy+my;E({baseRate:z,totalHours:Y?0:Fe,workingCost:Yt,mobDemobCost:Di,foodAccomCost:He,usageLoadFactor:gs,extraCharges:hy,riskAdjustment:xs,gstAmount:my,totalAmount:lD})},P=$=>{const z=j.workingHours===0?8:Number(j.workingHours)||8,X=j.shift==="double"?2:1;return z*$*X},B=()=>{const $=Number(j.siteDistance),z=Number(j.mobDemob)||0,X=Number(j.mobRelaxation)||0;if(j.selectedMachines.length>0){let Y=0;return j.selectedMachines.forEach(ge=>{let Fe=ge.runningCostPerKm||0;if(Fe===0&&Array.isArray(h)){const Jn=h.find(gs=>gs.id===ge.id);Jn&&(Fe=(Jn==null?void 0:Jn.runningCostPerKm)??0)}const lt=$*Fe*2*ge.quantity,Yt=lt*X/100,sn=lt-Yt+z*ge.quantity;Y+=sn}),Y}else{const Y=Array.isArray(h)?h.find(sn=>sn.id===j.selectedEquipment.id):null,ge=(Y==null?void 0:Y.runningCostPerKm)??0,Fe=$*ge*2,lt=Fe*X/100;return Fe-lt+z}},V=$=>{S(z=>({...z,[$]:!z[$]}))},R=async $=>{var z,X,Y,ge,Fe,lt,Yt,sn,Jn,gs;if($.preventDefault(),!u&&r&&T("Deal information is not available. Creating quotation with available data.","warning"),j.selectedMachines.length===0&&!j.selectedEquipment.id){T("Please select at least one machine","error");return}if(j.numberOfDays<=0){T("Please enter valid number of days","error");return}try{y(!0),console.log("Current calculations:",D);const He={...j,dealId:(u==null?void 0:u.id)||r||"new",leadId:(u==null?void 0:u.leadId)||"",customerId:(u==null?void 0:u.customerId)||"",customerName:((z=u==null?void 0:u.customer)==null?void 0:z.name)||"New Customer",customerContact:{name:((X=u==null?void 0:u.customer)==null?void 0:X.name)||"New Customer",email:((Y=u==null?void 0:u.customer)==null?void 0:Y.email)||"",phone:((ge=u==null?void 0:u.customer)==null?void 0:ge.phone)||"",company:((Fe=u==null?void 0:u.customer)==null?void 0:Fe.company)||"",address:((lt=u==null?void 0:u.customer)==null?void 0:lt.address)||"",designation:((Yt=u==null?void 0:u.customer)==null?void 0:Yt.designation)||""},selectedEquipment:j.selectedEquipment,selectedMachines:j.selectedMachines,totalRent:D.totalAmount,baseRate:D.baseRate,workingCost:D.workingCost,mobDemobCost:D.mobDemobCost,foodAccomCost:D.foodAccomCost,usageLoadFactor:D.usageLoadFactor,extraCharges:D.extraCharges,riskAdjustment:D.riskAdjustment,gstAmount:D.gstAmount,sundayWorking:j.sundayWorking||"no"};console.log("Submitting quotation data:",He);let Di;i?(Di=await lz(i,{...He,version:j.version+1}),T("Quotation updated successfully","success")):(console.log("🔍 Creating quotation with data:",{...He,selectedMachines:((sn=He.selectedMachines)==null?void 0:sn.map(xs=>({id:xs.id,name:xs.name,quantity:xs.quantity,baseRate:xs.baseRate})))||[]}),Di=await cz(He),T("Quotation created successfully","success")),console.log("Saved quotation:",Di),t("/quotations")}catch(He){console.error("❌ Error saving quotation:",He),console.error("❌ Error details:",{message:He==null?void 0:He.message,response:((Jn=He==null?void 0:He.response)==null?void 0:Jn.data)||(He==null?void 0:He.response),status:(gs=He==null?void 0:He.response)==null?void 0:gs.status}),T("Error saving quotation","error")}finally{y(!1)}},T=($,z="success",X)=>{k({show:!0,title:$,variant:z,description:X}),setTimeout(()=>k({show:!1,title:""}),3e3)},M=$=>{const z=Array.isArray(h)?h.find(X=>X.id===$):null;if(z&&z.baseRates){const X=z.baseRates[j.orderType];v(X),C(Y=>({...Y,selectedEquipment:{id:z.id,equipmentId:z.equipmentId,name:z.name,baseRates:z.baseRates},runningCostPerKm:z.runningCostPerKm||0}))}},U=$=>{C(z=>({...z,machineType:$,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}}})),v(0)},H=()=>{var Y;if(!j.machineType||!j.selectedEquipment.id){T("Please select a machine type and equipment first","warning");return}if(j.selectedMachines.some(ge=>ge.id===j.selectedEquipment.id)){oe(j.selectedEquipment.id,1);return}const z=Array.isArray(h)?h.find(ge=>ge.id===j.selectedEquipment.id):null;if(!z){T("Selected equipment not found","error");return}const X={id:z.id,machineType:j.machineType,equipmentId:z.equipmentId,name:z.name,baseRates:z.baseRates||{},baseRate:((Y=z.baseRates)==null?void 0:Y[j.orderType])||0,runningCostPerKm:z.runningCostPerKm||0,quantity:1};C(ge=>({...ge,selectedMachines:[...ge.selectedMachines,X]})),C(ge=>({...ge,machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},baseRate:0})),v(0)},Z=$=>{C(z=>({...z,selectedMachines:z.selectedMachines.filter(X=>X.id!==$)}))},oe=($,z)=>{C(X=>({...X,selectedMachines:X.selectedMachines.map(Y=>{if(Y.id===$){const ge=Math.max(1,Y.quantity+z);return{...Y,quantity:ge}}return Y})}))},ue=($,z)=>{C(X=>({...X,selectedMachines:X.selectedMachines.map(Y=>Y.id===$?{...Y,baseRate:z}:Y)}))};return!e||e.role!=="sales_agent"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsx("style",{children:`
          /* Remove number input spinners */
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:o.jsx(ZN,{size:16}),className:"self-start",children:"Back"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:i?"Edit Quotation":"Create Quotation"}),o.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",((ve=u==null?void 0:u.customer)==null?void 0:ve.name)||"New Customer"," - ",(u==null?void 0:u.title)||"New Quotation"]})]})]})}),o.jsxs("div",{className:"max-w-full md:max-w-7xl mx-auto px-2 sm:px-4",children:[o.jsxs(ae,{className:"mb-4 sm:mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-500"}),o.jsx(ye,{className:"text-base sm:text-lg font-medium",children:"Customer Information"})]})}),o.jsx(le,{children:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Customer Name"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:j.customerName||((Ne=u==null?void 0:u.customer)==null?void 0:Ne.name)||o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Company"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:((A=j.customerContact)==null?void 0:A.company)||((q=u==null?void 0:u.customer)==null?void 0:q.company)||o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Designation"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:((G=j.customerContact)==null?void 0:G.designation)||((ie=u==null?void 0:u.customer)==null?void 0:ie.designation)||o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Email"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900 break-all",children:((_=j.customerContact)==null?void 0:_.email)||((I=u==null?void 0:u.customer)==null?void 0:I.email)||o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Phone"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:((Q=j.customerContact)==null?void 0:Q.phone)||((te=u==null?void 0:u.customer)==null?void 0:te.phone)||o.jsx("span",{className:"text-gray-500",children:"N/A"})})]}),o.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[o.jsx("div",{className:"text-xs sm:text-sm text-gray-700",children:"Address"}),o.jsx("div",{className:"text-sm sm:text-base font-semibold text-gray-900",children:((ne=j.customerContact)==null?void 0:ne.address)||((be=u==null?void 0:u.customer)==null?void 0:be.address)||o.jsx("span",{className:"text-gray-500",children:"N/A"})})]})]})})]}),o.jsxs("form",{onSubmit:R,children:[o.jsx(dd,{}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"col-span-7 space-y-6",children:[o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("duration"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(us,{className:"w-5 h-5 text-gray-500"}),o.jsx(ye,{className:"text-lg font-medium",children:"Duration"})]}),w.duration?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.duration&&o.jsxs(le,{className:"pt-4 space-y-4",children:[o.jsx(me,{type:"number",label:"Number of Days",value:j.numberOfDays||"",onChange:$=>{const z=$.target.value===""?0:Number($.target.value),X=F(z);console.log(`Days: ${z}, Order Type: ${X}`),C(Y=>{const ge=z>0&&X!==Y.orderType;let Fe=[...Y.selectedMachines];return ge&&(Fe=Y.selectedMachines.map(lt=>{var Yt;return{...lt,baseRate:((Yt=lt.baseRates)==null?void 0:Yt[X])||lt.baseRate}})),{...Y,numberOfDays:z,orderType:z>0?X:Y.orderType,selectedMachines:Fe}})},required:!0,min:"1",placeholder:"Enter number of days"}),j.numberOfDays>0&&b>0&&o.jsxs("div",{className:"mt-2 space-y-1",children:[j.orderType!=="monthly"?o.jsxs("div",{className:"text-sm text-gray-600",children:["Daily Rate: ",Te(b*(j.workingHours===0?8:Number(j.workingHours)||8)),"/day"]}):o.jsxs("div",{className:"text-sm text-gray-600",children:["Monthly Rate: ",Te(b),"/month"]}),o.jsx("div",{className:"text-sm font-medium text-primary-600",children:a!=null&&a.orderTypeLimits&&Number(j.numberOfDays)>=a.orderTypeLimits.yearly.minDays?"Yearly rate":a!=null&&a.orderTypeLimits&&Number(j.numberOfDays)>=a.orderTypeLimits.monthly.minDays?"Monthly rate":a!=null&&a.orderTypeLimits&&Number(j.numberOfDays)>=a.orderTypeLimits.small.minDays?"Small order rate":"Micro order rate"})]})]})]}),o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("orderType"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ht,{className:"w-5 h-5 text-gray-500"}),o.jsx(ye,{className:"text-lg font-medium",children:"Order Type"})]}),w.orderType?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.orderType&&o.jsxs(le,{className:"pt-4 space-y-4",children:[o.jsx(ke,{label:"Order Type",options:S8,value:j.orderType,onChange:$=>{Number(j.numberOfDays)===0&&C(z=>({...z,orderType:$}))},disabled:Number(j.numberOfDays)>0}),Number(j.numberOfDays)>0?o.jsx("div",{className:"mt-2 text-sm text-amber-600",children:a!=null&&a.orderTypeLimits&&Number(j.numberOfDays)>=a.orderTypeLimits.yearly.minDays?"Order type is set to Yearly as duration exceeds "+(a.orderTypeLimits.yearly.minDays-1)+" days":a!=null&&a.orderTypeLimits&&Number(j.numberOfDays)>=a.orderTypeLimits.monthly.minDays?"Order type is set to Monthly as duration exceeds "+(a.orderTypeLimits.monthly.minDays-1)+" days":a!=null&&a.orderTypeLimits&&Number(j.numberOfDays)>=a.orderTypeLimits.small.minDays?"Order type is set to Small as duration is between "+a.orderTypeLimits.small.minDays+"-"+a.orderTypeLimits.small.maxDays+" days":a!=null&&a.orderTypeLimits?"Order type is set to Micro as duration is "+a.orderTypeLimits.micro.maxDays+" days or less":"Loading configuration..."}):o.jsxs("div",{className:"mt-2 text-sm text-gray-500 flex items-center",children:[o.jsx(ar,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Order type will be automatically set based on the number of days"})]})]})]}),o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("machineSelection"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(hn,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx(ye,{className:"text-lg font-medium",children:"Machine Selection"}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:["You can add multiple machines to this quotation",o.jsxs("span",{className:"ml-1 cursor-help text-gray-400 hover:text-gray-600 relative group",children:[o.jsx(ar,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden group-hover:block absolute left-full ml-2 top-0 bg-gray-800 text-white text-xs rounded p-2 w-48",children:"Add different types of machines or multiple units of the same machine using the Add Machine button"})]})]})]})]}),w.machineSelection?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.machineSelection&&o.jsxs(le,{className:"pt-4 space-y-4",children:[Array.isArray(j.selectedMachines)&&j.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",j.selectedMachines.length,")"]}),o.jsx("span",{className:"text-xs text-gray-500 mb-2",children:"You can edit the base rate and quantity for each machine"})]}),o.jsx("div",{className:"space-y-3 bg-gray-50 p-3 rounded-md border border-gray-200",children:(Array.isArray(j.selectedMachines)?j.selectedMachines:[]).map($=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsxs("div",{className:"flex-grow",children:[o.jsx("div",{className:"font-semibold text-gray-900",children:$.name}),o.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["ID: ",$.equipmentId]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 bg-gray-50 p-2 rounded-md border border-gray-100",children:[o.jsx("label",{className:"text-xs font-medium text-gray-900",children:"Base Rate:"}),o.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-24 text-sm text-gray-900",value:$.baseRate,onChange:z=>{const X=Number(z.target.value);isNaN(X)||ue($.id,X)}}),o.jsx("span",{className:"text-xs text-gray-700",children:j.orderType==="monthly"?"/month":"/hr"})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-3",children:[o.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-error-500 transition-colors duration-150",onClick:()=>Z($.id),title:"Remove machine",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Quantity"}),o.jsxs("div",{className:"flex items-center border rounded-md overflow-hidden",children:[o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>oe($.id,-1),disabled:$.quantity<=1,children:"-"}),o.jsx("span",{className:"px-3 py-1 font-medium",children:$.quantity}),o.jsx("button",{type:"button",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition-colors duration-150",onClick:()=>oe($.id,1),children:"+"})]})]})]})]},$.id))})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Add Machine"}),o.jsx(ke,{label:"Machine Type",options:C8,value:j.machineType,onChange:$=>{U($)}}),j.machineType&&o.jsx("div",{className:"mt-3",children:o.jsx(ke,{label:"Select Equipment",options:[{value:"",label:"Select equipment..."},...(Array.isArray(h)?h:[]).map($=>{var z;return{value:$.id,label:`${$.equipmentId} - ${$.name} (${Te(((z=$.baseRates)==null?void 0:z[j.orderType])||0)}${j.orderType==="monthly"?"/month":"/hr"})`}})],value:j.selectedEquipment.id,onChange:$=>{M($)}})}),!(Array.isArray(h)&&h.length)&&j.machineType&&o.jsx("div",{className:"text-sm text-amber-600 mt-2",children:"No available equipment found for this machine type"}),o.jsxs("div",{className:"mt-4",children:[o.jsx(W,{type:"button",variant:"default",onClick:H,leftIcon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),disabled:!j.machineType||!j.selectedEquipment.id,className:"w-full",size:"default",children:j.selectedMachines.length===0?"Add Machine to Quotation":"Add Another Machine"}),j.selectedMachines.length>0&&o.jsxs("p",{className:"text-xs text-gray-500 text-center mt-2",children:["You have added ",j.selectedMachines.length," machine",j.selectedMachines.length>1?"s":""," to this quotation"]})]})]})]})]}),o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("workingHours"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(En,{className:"w-5 h-5 text-gray-500"}),o.jsx(ye,{className:"text-lg font-medium",children:"Working Hours"})]}),w.workingHours?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.workingHours&&o.jsxs(le,{className:"pt-4 space-y-4",children:[o.jsx(ke,{label:"Shift",options:k8,value:j.shift,onChange:$=>{C(z=>({...z,shift:$}))}}),o.jsxs("div",{children:[o.jsx(me,{type:"number",label:"Number of Hours",value:j.workingHours===0?"":j.workingHours,onChange:$=>{const z=$.target.value;if(z==="")C(X=>({...X,workingHours:0}));else if(/^\d+$/.test(z)){const X=parseInt(z,10);X>=1&&X<=24&&C(Y=>({...Y,workingHours:X}))}},required:!0,min:"1",max:"24",placeholder:"Enter hours (default: 8)",step:"1",autoComplete:"off"}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(En,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Standard single shift duration is 8 hours"})]})]}),o.jsx(ke,{label:"Day/Night",options:E8,value:j.dayNight,onChange:$=>C(z=>({...z,dayNight:$}))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"sundayWorking",checked:j.sundayWorking==="yes",onChange:$=>C(z=>({...z,sundayWorking:$.target.checked?"yes":"no"})),className:"rounded border-gray-300"}),o.jsx("label",{htmlFor:"sundayWorking",className:"text-sm",children:"Sunday Working"})]})]})]}),o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("accommodation"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(zd,{className:"w-5 h-5 text-gray-500"}),o.jsx(ye,{className:"text-lg font-medium",children:"Accommodation"})]}),w.accommodation?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.accommodation&&o.jsxs(le,{className:"pt-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx(me,{type:"number",label:"Number of Resources",value:j.foodResources||"",onChange:$=>C(z=>({...z,foodResources:$.target.value===""?0:Number($.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: ₹2500/month per resource"})]}),o.jsxs("div",{children:[o.jsx(me,{type:"number",label:"Number of Resources",value:j.accomResources||"",onChange:$=>C(z=>({...z,accomResources:$.target.value===""?0:Number($.target.value)})),placeholder:"Enter number of resources"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Rate: ₹4000/month per resource"})]})]})]}),o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("mobDemob"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(hn,{className:"w-5 h-5 text-gray-500"}),o.jsx(ye,{className:"text-lg font-medium",children:"Mob - Demob"})]}),w.mobDemob?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.mobDemob&&o.jsxs(le,{className:"pt-4 space-y-4",children:[o.jsx("div",{children:o.jsx(me,{type:"number",label:"Distance to Site (km)",value:j.siteDistance||"",onChange:$=>C(z=>({...z,siteDistance:$.target.value===""?0:Number($.target.value)})),placeholder:"Enter distance in kilometers"})}),o.jsx("div",{children:o.jsx(me,{type:"number",label:"Trailer Cost",value:j.mobDemob||"",onChange:$=>C(z=>({...z,mobDemob:$.target.value===""?0:Number($.target.value)})),placeholder:"Enter additional trailer charges"})}),o.jsxs("div",{children:[o.jsx(me,{type:"number",label:"Mob Relaxation",value:j.mobRelaxation||"",onChange:$=>C(z=>({...z,mobRelaxation:$.target.value===""?0:Number($.target.value)})),placeholder:"Enter relaxation value (X%)"}),o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Enter percentage value for discount on distance cost"})]})]})]}),o.jsxs(ae,{className:"shadow-sm hover:shadow-md transition-shadow duration-200",children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>V("additional"),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(hl,{className:"w-5 h-5 text-gray-500"}),o.jsx(ye,{className:"text-lg font-medium",children:"Additional Parameters"})]}),w.additional?o.jsx(Lr,{className:"h-5 w-5 text-gray-400"}):o.jsx(Ys,{className:"h-5 w-5 text-gray-400"})]})}),w.additional&&o.jsxs(le,{className:"pt-4 space-y-4",children:[o.jsx(ke,{label:"Usage",options:D8,value:j.usage,onChange:$=>C(z=>({...z,usage:$}))}),o.jsxs("div",{className:"flex items-center mt-1.5 text-sm text-gray-600",children:[o.jsx(Jm,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{children:"Usage rates: Normal - 5% of base rate | Heavy - 10% of base rate"})]}),o.jsx(ke,{label:"Deal Type",options:co,value:j.dealType||co[0].value,onChange:$=>C(z=>({...z,dealType:$||co[0].value}))}),o.jsx(me,{type:"number",label:"Extra Commercial Charges",value:j.extraCharge||"",onChange:$=>C(z=>({...z,extraCharge:$.target.value===""?0:Number($.target.value)})),placeholder:"Enter extra charges"}),o.jsx(ke,{label:"Risk Factor",options:T8,value:j.riskFactor,onChange:$=>C(z=>({...z,riskFactor:$}))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Incidental Charges"}),o.jsx("div",{className:"space-y-2",children:Bc.map($=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.incidentalCharges.includes($.value),onChange:z=>{C(X=>({...X,incidentalCharges:z.target.checked?[...X.incidentalCharges,$.value]:X.incidentalCharges.filter(Y=>Y!==$.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-gray-700",children:$.label})]},$.value))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Other Factors"}),o.jsx("div",{className:"space-y-2",children:P8.map($=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-gray-50 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.otherFactors.includes($.value),onChange:z=>{C(X=>({...X,otherFactors:z.target.checked?[...X.otherFactors,$.value]:X.otherFactors.filter(Y=>Y!==$.value)}))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("span",{className:"text-sm text-gray-700",children:[$.label,$.value==="rigger"&&" (₹40,000)",$.value==="helper"&&" (₹12,000)"]})]},$.value))})]})]})]})]}),o.jsxs("div",{className:"col-span-5 space-y-6 sticky top-6",children:[o.jsxs(ae,{className:"shadow-lg border-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80",children:[o.jsx(xe,{className:"border-b border-gray-100 pb-6",children:o.jsxs(ye,{className:"text-xl font-semibold flex items-center gap-2",children:[o.jsx(G_,{className:"w-5 h-5 text-primary-500"}),"Quotation Summary"]})}),o.jsxs(le,{children:[b>0&&!j.selectedMachines.length&&o.jsxs("div",{className:"mb-6 p-4 bg-primary-50/50 rounded-xl border border-primary-100",children:[o.jsx("div",{className:"text-sm font-medium text-primary-900 mb-2",children:"Equipment Details"}),o.jsxs("div",{className:"text-2xl font-bold text-primary-700",children:["₹",Te(b).replace("₹",""),o.jsx("span",{className:"text-base font-medium text-primary-600 ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]}),o.jsxs("div",{className:"text-sm text-primary-600 mt-1",children:[j.orderType.charAt(0).toUpperCase()+j.orderType.slice(1)," Rate"]}),j.orderType==="monthly"&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{children:"Hourly Rate: "}),o.jsxs("span",{className:"font-medium ml-1",children:["₹",Te(b/26/(parseFloat(j.workingHours.toString())||8)).replace("₹",""),"/hr"]})]})}),j.numberOfDays&&o.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Total Days:"}),o.jsx("span",{className:"font-medium",children:Number(j.numberOfDays)>25?"26 (Monthly)":j.numberOfDays})]}),j.orderType!=="monthly"&&o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{children:"Hours per Day:"}),o.jsx("span",{className:"font-medium",children:j.workingHours===0?8:j.workingHours||8})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{children:"Order Type:"}),o.jsx("span",{className:"font-medium",children:j.orderType.charAt(0).toUpperCase()+j.orderType.slice(1)})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[j.selectedMachines.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:["Selected Machines (",j.selectedMachines.length,")"]}),o.jsxs("div",{className:"space-y-2 bg-primary-50 p-3 rounded-md border border-primary-100",children:[j.selectedMachines.map($=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md shadow-sm",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:$.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:[$.quantity," unit",$.quantity>1?"s":""," × ",Te($.baseRate),j.orderType==="monthly"?"/month":"/hr"]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"font-semibold text-primary-700",children:[Te($.baseRate*$.quantity),o.jsx("span",{className:"text-xs ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]})})]},$.id)),o.jsxs("div",{className:"flex justify-between items-center p-2 mt-2 border-t border-primary-200",children:[o.jsx("div",{className:"text-sm text-gray-600",children:"Total machines value"}),o.jsxs("div",{className:"font-semibold text-primary-700",children:[Te(j.selectedMachines.reduce(($,z)=>$+z.baseRate*z.quantity,0)),o.jsx("span",{className:"text-xs ml-1",children:j.orderType==="monthly"?"/month":"/hr"})]})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(En,{className:"w-4 h-4 text-primary-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Working Cost"})]}),o.jsx("span",{className:"font-semibold",children:Te(D.workingCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?D.workingCost/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-success-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Food & Accommodation"})]}),o.jsx("span",{className:"font-semibold",children:Te(D.foodAccomCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-success-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?D.foodAccomCost/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hn,{className:"w-4 h-4 text-warning-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Mob/Demob Cost"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(ar,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Cost calculated for each machine based on distance, running cost per km, and trailer cost."})]})]}),o.jsx("span",{className:"font-semibold",children:Te(D.mobDemobCost)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-warning-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?D.mobDemobCost/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jm,{className:"w-4 h-4 text-error-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Risk & Usage"}),o.jsxs("div",{className:"group relative inline-block",children:[o.jsx(ar,{className:"h-3.5 w-3.5 text-gray-400 cursor-help"}),o.jsx("div",{className:"opacity-0 bg-gray-800 text-white text-xs rounded p-2 absolute z-10 group-hover:opacity-100 bottom-full left-1/2 transform -translate-x-1/2 w-48",children:"Risk factor (5-15%) and usage load (5-10%) calculated for each machine based on its base rate and quantity."})]})]}),o.jsx("span",{className:"font-semibold",children:Te(D.riskAdjustment+D.usageLoadFactor)})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-error-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?(D.riskAdjustment+D.usageLoadFactor)/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vd,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Extra Commercial Charges"})]}),o.jsx("span",{className:"font-semibold",children:Te(Number(j.extraCharge))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?Number(j.extraCharge)/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ji,{className:"w-4 h-4 text-indigo-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Incidental Charges"})]}),o.jsx("span",{className:"font-semibold",children:Te(j.incidentalCharges.reduce(($,z)=>{const X=Bc.find(Y=>Y.value===z);return $+(X?X.amount:0)},0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?j.incidentalCharges.reduce(($,z)=>{const X=Bc.find(Y=>Y.value===z);return $+(X?X.amount:0)},0)/D.totalAmount*100:.5}%`}})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4 text-cyan-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Other Factors"})]}),o.jsx("span",{className:"font-semibold",children:Te((j.otherFactors.includes("rigger")?(c==null?void 0:c.riggerAmount)||4e4:0)+(j.otherFactors.includes("helper")?(c==null?void 0:c.helperAmount)||12e3:0))})]}),o.jsx("div",{className:"h-1.5 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-cyan-500 rounded-full transition-all duration-300",style:{width:`${D.totalAmount>0?((j.otherFactors.includes("rigger")?(c==null?void 0:c.riggerAmount)||4e4:0)+(j.otherFactors.includes("helper")?(c==null?void 0:c.helperAmount)||12e3:0))/D.totalAmount*100:.5}%`}})})]})]}),o.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"Subtotal"}),o.jsx("span",{className:"font-medium",children:Te(D.totalAmount-D.gstAmount)})]}),j.includeGst&&o.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[o.jsx("span",{children:"GST (18%)"}),o.jsx("span",{className:"font-medium",children:Te(D.gstAmount)})]}),o.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200",children:[o.jsx("span",{className:"text-lg font-semibold",children:"Total Amount"}),o.jsx("span",{className:"text-2xl font-bold text-primary-600",children:Te(D.totalAmount)})]})]})}),o.jsx("div",{className:"mt-6",children:o.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[o.jsx("input",{type:"checkbox",checked:j.includeGst,onChange:$=>C(z=>({...z,includeGst:$.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),o.jsx("div",{className:"text-sm text-gray-500",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-6",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1 order-2 sm:order-1",size:"default",children:"Cancel"}),o.jsxs("div",{className:"sm:flex-1 order-1 sm:order-2",children:[o.jsx(W,{type:"submit",disabled:g||j.selectedMachines.length===0&&!j.selectedEquipment.id,className:"w-full bg-primary-600 hover:bg-primary-700",leftIcon:g?o.jsx(En,{className:"animate-spin"}):o.jsx(Ni,{}),size:"default",variant:"accent",children:g?"Saving...":i?"Update Quotation":"Create Quotation"}),j.selectedMachines.length===0&&!j.selectedEquipment.id&&o.jsx("div",{className:"mt-1 text-xs text-center text-amber-600",children:"Please add at least one machine"})]})]})]})]})]})]}),N.show&&o.jsx(mt,{title:N.title,description:N.description,variant:N.variant,isVisible:N.show,onClose:()=>k({show:!1,title:""})})]})}function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function Kn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function tt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ht(e){tt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||hd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Rw(e,t){tt(2,arguments);var n=ht(e),s=Kn(t);return isNaN(s)?new Date(NaN):(s&&n.setDate(n.getDate()+s),n)}function Wk(e,t){tt(2,arguments);var n=ht(e).getTime(),s=Kn(t);return new Date(n+s)}var A8=36e5;function Hk(e,t){tt(2,arguments);var n=Kn(t);return Wk(e,n*A8)}var M8={};function Fa(){return M8}function R8(e,t){var n,s,r,i,a,l,c,u;tt(1,arguments);var d=Fa(),h=Kn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ht(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function I8(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Iw(e){tt(1,arguments);var t=ht(e);return t.setHours(0,0,0,0),t}function O8(e,t){tt(2,arguments);var n=Iw(e),s=Iw(t);return n.getTime()===s.getTime()}function L8(e){return tt(1,arguments),e instanceof Date||hd(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function F8(e){if(tt(1,arguments),!L8(e)&&typeof e!="number")return!1;var t=ht(e);return!isNaN(Number(t))}function $8(e,t){var n;tt(1,arguments);var s=e||{},r=ht(s.start),i=ht(s.end),a=i.getTime();if(!(r.getTime()<=a))throw new RangeError("Invalid interval");var l=[],c=r;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=a;)l.push(ht(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function B8(e,t){var n,s,r,i,a,l,c,u;tt(1,arguments);var d=Fa(),h=Kn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ht(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function z8(e,t){tt(2,arguments);var n=Kn(t);return Wk(e,-n)}var V8=864e5;function U8(e){tt(1,arguments);var t=ht(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),r=n-s;return Math.floor(r/V8)+1}function fd(e){tt(1,arguments);var t=1,n=ht(e),s=n.getUTCDay(),r=(s<t?7:0)+s-t;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function qk(e){tt(1,arguments);var t=ht(e),n=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var r=fd(s),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=fd(i);return t.getTime()>=r.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function W8(e){tt(1,arguments);var t=qk(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var s=fd(n);return s}var H8=6048e5;function q8(e){tt(1,arguments);var t=ht(e),n=fd(t).getTime()-W8(t).getTime();return Math.round(n/H8)+1}function md(e,t){var n,s,r,i,a,l,c,u;tt(1,arguments);var d=Fa(),h=Kn((n=(s=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:d.weekStartsOn)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ht(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function Gk(e,t){var n,s,r,i,a,l,c,u;tt(1,arguments);var d=ht(e),h=d.getUTCFullYear(),f=Fa(),m=Kn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&s!==void 0?s:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var g=md(p,t),y=new Date(0);y.setUTCFullYear(h,0,m),y.setUTCHours(0,0,0,0);var b=md(y,t);return d.getTime()>=g.getTime()?h+1:d.getTime()>=b.getTime()?h:h-1}function G8(e,t){var n,s,r,i,a,l,c,u;tt(1,arguments);var d=Fa(),h=Kn((n=(s=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(a=t.locale)===null||a===void 0||(l=a.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&s!==void 0?s:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=Gk(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=md(m,t);return p}var Y8=6048e5;function Q8(e,t){tt(1,arguments);var n=ht(e),s=md(n,t).getTime()-G8(n,t).getTime();return Math.round(s/Y8)+1}function Me(e,t){for(var n=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return n+s}var qs={y:function(t,n){var s=t.getUTCFullYear(),r=s>0?s:1-s;return Me(n==="yy"?r%100:r,n.length)},M:function(t,n){var s=t.getUTCMonth();return n==="M"?String(s+1):Me(s+1,2)},d:function(t,n){return Me(t.getUTCDate(),n.length)},a:function(t,n){var s=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,n){return Me(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Me(t.getUTCHours(),n.length)},m:function(t,n){return Me(t.getUTCMinutes(),n.length)},s:function(t,n){return Me(t.getUTCSeconds(),n.length)},S:function(t,n){var s=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,s-3));return Me(i,n.length)}},Ri={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},K8={G:function(t,n,s){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return s.ordinalNumber(i,{unit:"year"})}return qs.y(t,n)},Y:function(t,n,s,r){var i=Gk(t,r),a=i>0?i:1-i;if(n==="YY"){var l=a%100;return Me(l,2)}return n==="Yo"?s.ordinalNumber(a,{unit:"year"}):Me(a,n.length)},R:function(t,n){var s=qk(t);return Me(s,n.length)},u:function(t,n){var s=t.getUTCFullYear();return Me(s,n.length)},Q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Me(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,s){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Me(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,s){var r=t.getUTCMonth();switch(n){case"M":case"MM":return qs.M(t,n);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,s){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Me(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,s,r){var i=Q8(t,r);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):Me(i,n.length)},I:function(t,n,s){var r=q8(t);return n==="Io"?s.ordinalNumber(r,{unit:"week"}):Me(r,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):qs.d(t,n)},D:function(t,n,s){var r=U8(t);return n==="Do"?s.ordinalNumber(r,{unit:"dayOfYear"}):Me(r,n.length)},E:function(t,n,s){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Me(a,2);case"eo":return s.ordinalNumber(a,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Me(a,n.length);case"co":return s.ordinalNumber(a,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Me(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});case"iiii":default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,s){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){var r=t.getUTCHours(),i;switch(r===12?i=Ri.noon:r===0?i=Ri.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){var r=t.getUTCHours(),i;switch(r>=17?i=Ri.evening:r>=12?i=Ri.afternoon:r>=4?i=Ri.morning:i=Ri.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),s.ordinalNumber(r,{unit:"hour"})}return qs.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):qs.H(t,n)},K:function(t,n,s){var r=t.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(r,{unit:"hour"}):Me(r,n.length)},k:function(t,n,s){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?s.ordinalNumber(r,{unit:"hour"}):Me(r,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):qs.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):qs.s(t,n)},S:function(t,n){return qs.S(t,n)},X:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Lw(a);case"XXXX":case"XX":return Xr(a);case"XXXXX":case"XXX":default:return Xr(a,":")}},x:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Lw(a);case"xxxx":case"xx":return Xr(a);case"xxxxx":case"xxx":default:return Xr(a,":")}},O:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Ow(a,":");case"OOOO":default:return"GMT"+Xr(a,":")}},z:function(t,n,s,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Ow(a,":");case"zzzz":default:return"GMT"+Xr(a,":")}},t:function(t,n,s,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return Me(a,n.length)},T:function(t,n,s,r){var i=r._originalDate||t,a=i.getTime();return Me(a,n.length)}};function Ow(e,t){var n=e>0?"-":"+",s=Math.abs(e),r=Math.floor(s/60),i=s%60;if(i===0)return n+String(r);var a=t;return n+String(r)+a+Me(i,2)}function Lw(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Me(Math.abs(e)/60,2)}return Xr(e,t)}function Xr(e,t){var n=t||"",s=e>0?"-":"+",r=Math.abs(e),i=Me(Math.floor(r/60),2),a=Me(r%60,2);return s+i+n+a}var Fw=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Yk=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},X8=function(t,n){var s=t.match(/(P+)(p+)?/)||[],r=s[1],i=s[2];if(!i)return Fw(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Fw(r,n)).replace("{{time}}",Yk(i,n))},J8={p:Yk,P:X8},Z8=["D","DD"],eU=["YY","YYYY"];function tU(e){return Z8.indexOf(e)!==-1}function nU(e){return eU.indexOf(e)!==-1}function $w(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var sU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rU=function(t,n,s){var r,i=sU[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+r:r+" ago":r};function If(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,s=e.formats[n]||e.formats[e.defaultWidth];return s}}var iU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},aU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lU={date:If({formats:iU,defaultWidth:"full"}),time:If({formats:aU,defaultWidth:"full"}),dateTime:If({formats:oU,defaultWidth:"full"})},cU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uU=function(t,n,s,r){return cU[t]};function uo(e){return function(t,n){var s=n!=null&&n.context?String(n.context):"standalone",r;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=n!=null&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return r[u]}}var dU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xU=function(t,n){var s=Number(t),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},yU={ordinalNumber:xU,era:uo({values:dU,defaultWidth:"wide"}),quarter:uo({values:hU,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:uo({values:fU,defaultWidth:"wide"}),day:uo({values:mU,defaultWidth:"wide"}),dayPeriod:uo({values:pU,defaultWidth:"wide",formattingValues:gU,defaultFormattingWidth:"wide"})};function ho(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,r=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var a=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?bU(l,function(h){return h.test(a)}):vU(l,function(h){return h.test(a)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(a.length);return{value:u,rest:d}}}function vU(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function bU(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function wU(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var r=s[0],i=t.match(e.parsePattern);if(!i)return null;var a=e.valueCallback?e.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(r.length);return{value:a,rest:l}}}var jU=/^(\d+)(th|st|nd|rd)?/i,NU=/\d+/i,SU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CU={any:[/^b/i,/^(a|c)/i]},kU={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EU={any:[/1/i,/2/i,/3/i,/4/i]},DU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},PU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_U={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},AU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RU={ordinalNumber:wU({matchPattern:jU,parsePattern:NU,valueCallback:function(t){return parseInt(t,10)}}),era:ho({matchPatterns:SU,defaultMatchWidth:"wide",parsePatterns:CU,defaultParseWidth:"any"}),quarter:ho({matchPatterns:kU,defaultMatchWidth:"wide",parsePatterns:EU,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ho({matchPatterns:DU,defaultMatchWidth:"wide",parsePatterns:TU,defaultParseWidth:"any"}),day:ho({matchPatterns:PU,defaultMatchWidth:"wide",parsePatterns:_U,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:AU,defaultMatchWidth:"any",parsePatterns:MU,defaultParseWidth:"any"})},IU={code:"en-US",formatDistance:rU,formatLong:lU,formatRelative:uU,localize:yU,match:RU,options:{weekStartsOn:0,firstWeekContainsDate:1}},OU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,FU=/^'([^]*?)'?$/,$U=/''/g,BU=/[a-zA-Z]/;function Ns(e,t,n){var s,r,i,a,l,c,u,d,h,f,m,p,g,y;tt(2,arguments);var b=String(t),v=Fa(),w=(s=(r=void 0)!==null&&r!==void 0?r:v.locale)!==null&&s!==void 0?s:IU,S=Kn((i=(a=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:v.firstWeekContainsDate)!==null&&a!==void 0?a:(u=v.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Kn((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:v.weekStartsOn)!==null&&f!==void 0?f:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&h!==void 0?h:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var k=ht(e);if(!F8(k))throw new RangeError("Invalid time value");var j=I8(k),C=z8(k,j),D={firstWeekContainsDate:S,weekStartsOn:N,locale:w,_originalDate:k},E=b.match(LU).map(function(O){var F=O[0];if(F==="p"||F==="P"){var L=J8[F];return L(O,w.formatLong)}return O}).join("").match(OU).map(function(O){if(O==="''")return"'";var F=O[0];if(F==="'")return zU(O);var L=K8[F];if(L)return nU(O)&&$w(O,t,String(e)),tU(O)&&$w(O,t,String(e)),L(C,O,w.localize,D);if(F.match(BU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");return O}).join("");return E}function zU(e){var t=e.match(FU);return t?t[1].replace($U,"'"):e}function VU(e,t){tt(2,arguments);var n=ht(e).getTime(),s=ht(t.start).getTime(),r=ht(t.end).getTime();if(!(s<=r))throw new RangeError("Invalid interval");return n>=s&&n<=r}const Bw=Array.from({length:15},(e,t)=>Hk(new Date().setHours(6,0,0,0),t));function UU(){const{user:e}=Qe(),[t,n]=x.useState("week"),[s,r]=x.useState(new Date),[i,a]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState(null),[N,k]=x.useState(null),[j,C]=x.useState([]),[D,E]=x.useState(!1),O=ms(),F=Ln(),[L,P]=x.useState({show:!1,title:""}),[B,V]=x.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),[R,T]=x.useState("");x.useEffect(()=>{M();const A=new URLSearchParams(O.search),q=A.get("dealId"),G=A.get("action"),ie=A.get("customerName");if(q&&G==="schedule"){if(S(q),ie){const _=decodeURIComponent(ie);k(_),P({show:!0,title:`Deal won with ${_}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}U(q),F("/jobs",{replace:!0})}},[O]),x.useEffect(()=>{B.operatorId&&B.startDate&&B.endDate&&(ve().some(G=>G.id===B.operatorId)||V(G=>({...G,operatorId:""})))},[B.startDate,B.endDate,i]);const M=async()=>{try{const[A,q,G,ie,_]=await Promise.all([Zd(),f2(),Wl(),Ul(),eh()]);a(A),c(q),d(G);const Q=_.filter(ne=>ne.stage==="won").map(ne=>ne.leadId),te=ie.filter(ne=>ne.status==="converted"&&Q.includes(ne.id));if(f(te),w)try{const ne=await va(w);if(ne){V(z=>{var X;return{...z,leadId:ne.leadId||"",location:((X=ne.customer)==null?void 0:X.address)||"",notes:ne.description||""}});const be=new Date,$=new Date;$.setDate(be.getDate()+7),V(z=>({...z,startDate:be.toISOString().slice(0,16),endDate:$.toISOString().slice(0,16)}))}}catch(ne){console.error("Error fetching deal data:",ne)}}catch(A){console.error("Error fetching data:",A),oe("Error fetching data","error")}finally{p(!1)}},U=async A=>{var q,G,ie,_,I;try{const Q=await va(A);if(Q){const te=new Date,ne=new Date;ne.setDate(te.getDate()+7);const be=te.toISOString().slice(0,16),$=ne.toISOString().slice(0,16);S(A),(q=Q.customer)!=null&&q.name&&k(Q.customer.name),E(!0);try{const z=await ad(Q.leadId);if(z&&z.length>0){const X=[];z.forEach(Y=>{if(Y.selectedEquipment&&Y.selectedEquipment.equipmentId){const ge=l.find(Fe=>Fe.id===Y.selectedEquipment.equipmentId);ge&&!X.some(Fe=>Fe.id===ge.id)&&X.push(ge)}Y.selectedMachines&&Y.selectedMachines.length>0&&Y.selectedMachines.forEach(ge=>{if(ge.equipmentId){const Fe=l.find(lt=>lt.id===ge.equipmentId);Fe&&!X.some(lt=>lt.id===Fe.id)&&X.push(Fe)}})}),C(X),X.length>0?V({leadId:Q.leadId,equipmentId:X[0].id,operatorId:"",startDate:be,endDate:$,location:((G=Q.customer)==null?void 0:G.address)||"",notes:Q.description||""}):V({leadId:Q.leadId,equipmentId:"",operatorId:"",startDate:be,endDate:$,location:((ie=Q.customer)==null?void 0:ie.address)||"",notes:Q.description||""})}else V({leadId:Q.leadId,equipmentId:"",operatorId:"",startDate:be,endDate:$,location:((_=Q.customer)==null?void 0:_.address)||"",notes:Q.description||""})}catch(z){console.error("Error fetching quotations:",z),V({leadId:Q.leadId,equipmentId:"",operatorId:"",startDate:be,endDate:$,location:((I=Q.customer)==null?void 0:I.address)||"",notes:Q.description||""})}finally{E(!1)}y(!0)}else oe("Deal not found","error")}catch(Q){console.error("Error fetching deal:",Q),oe("Error fetching deal","error")}},H=async()=>{try{if(!B.leadId||!B.equipmentId||!B.operatorId||!B.startDate||!B.endDate||!B.location){oe("Please fill in all required fields","error");return}let A="";const q=h.find(G=>G.id===B.leadId);if(q)A=q.customerName;else if(N)A=N;else{oe("Customer information is missing","error");return}await d2({title:"Scheduled Job",leadId:B.leadId,customerId:(q==null?void 0:q.customerId)||"",customerName:A,equipmentIds:[B.equipmentId],operatorIds:[B.operatorId],scheduledStartDate:B.startDate,scheduledEndDate:B.endDate,location:B.location,status:"scheduled",notes:B.notes,dealId:w||void 0,createdBy:(e==null?void 0:e.id)||""}),await M(),y(!1),Z(),S(null),k(null),oe("Job scheduled successfully","success")}catch(A){console.error("Error creating job:",A),oe("Error creating job","error")}},Z=()=>{V({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),C([])},oe=(A,q="success")=>{P({show:!0,title:A,variant:q}),setTimeout(()=>P({show:!1,title:""}),3e3)},ue=(A,q,G,ie)=>i.filter(I=>{const Q=new Date(I.scheduledStartDate),te=new Date(I.scheduledEndDate),ne=new Date(G),be=new Date(ie);return(I.equipmentIds.includes(A)||I.operatorIds.includes(q))&&I.status!=="completed"&&I.status!=="cancelled"&&(ne>=Q&&ne<te||be>Q&&be<=te||ne<=Q&&be>=te)}),ve=()=>{if(!B.startDate||!B.endDate)return u;const A=new Date(B.startDate),q=new Date(B.endDate);return u.filter(G=>i.filter(_=>{const I=new Date(_.scheduledStartDate),Q=new Date(_.scheduledEndDate);return _.operatorIds.includes(G.id)&&_.status!=="completed"&&_.status!=="cancelled"&&(A>=I&&A<Q||q>I&&q<=Q||A<=I&&q>=Q)}).length===0)},Ne=()=>{const A=R8(s,{weekStartsOn:1}),q=B8(s,{weekStartsOn:1}),G=$8({start:A,end:q});return o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[o.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[o.jsx("div",{className:"h-12"}),Bw.map((ie,_)=>o.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-900",children:Ns(ie,"h:mm a")},_))]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[G.map((ie,_)=>o.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-sm text-gray-900",children:Ns(ie,"EEE")}),o.jsx("div",{className:"text-xs text-gray-700",children:Ns(ie,"MMM d")})]})},_)),Bw.map((ie,_)=>o.jsx(se.Fragment,{children:G.map((I,Q)=>{const te=new Date(I.setHours(ie.getHours(),ie.getMinutes())),ne=i.filter(be=>{const $=new Date(be.scheduledStartDate),z=new Date(be.scheduledEndDate);return(!R||be.operatorIds.includes(R))&&O8(te,$)&&VU(te,{start:$,end:z})});return o.jsx("div",{className:`border-b border-r border-gray-100 relative ${_===0?"border-t":""} ${Q===0?"border-l":""}`,style:{minHeight:`${Math.max(80,ne.length*44+8)}px`},onClick:()=>{y(!0),V(be=>({...be,startDate:te.toISOString().slice(0,16),endDate:Hk(te,2).toISOString().slice(0,16)}))},children:ne.map((be,$)=>o.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:`${4+$*44}px`,minHeight:"40px",zIndex:10+$,right:$>0?`${$*8}px`:"4px"},onClick:z=>{z.stopPropagation(),v(be)},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-sm truncate",children:be.customerName}),o.jsx(ql,{status:be.status,className:"ml-2"})]}),o.jsxs("div",{className:"text-xs text-black mt-1",children:[Ns(new Date(be.scheduledStartDate),"h:mm a")," - ",Ns(new Date(be.scheduledEndDate),"h:mm a")]})]},be.id))},`${_}-${Q}`)})},_))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-900",children:"Loading job scheduling data..."})]}):o.jsxs("div",{className:"space-y-6 font-sans",children:[o.jsxs("div",{className:"flex flex-wrap items-center mb-2 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>r(A=>Rw(A,-7)),children:o.jsx(J_,{className:"h-4 w-4"})}),o.jsx("h2",{className:"text-lg font-semibold font-sans",children:Ns(s,"MMMM yyyy")}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>r(A=>Rw(A,7)),children:o.jsx(Z_,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end min-w-0",children:[o.jsx(ke,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:A=>n(A),className:"w-24 min-w-0"}),o.jsx(ke,{label:"Operator",options:[{value:"",label:"All Operators"},...u.map(A=>({value:A.id,label:A.name}))],value:R,onChange:T,className:"w-32 min-w-0"}),o.jsx(W,{size:"lg",className:"ml-2 font-bold px-6 py-2",onClick:()=>{h.length===0?P({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):y(!0)},leftIcon:o.jsx(ds,{size:20}),children:"New Job"})]})]}),o.jsx(ae,{children:o.jsxs(le,{className:"p-6",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Schedule"})}),m?o.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-sans",children:"No Won Deals Yet"}),o.jsx("p",{className:"text-gray-700 font-sans",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):Ne()]})}),o.jsxs(Ot,{isOpen:g,onClose:()=>{y(!1),Z()},title:w?`Schedule Job for Won Deal: ${N||""}`:"Schedule Job for Won Deal",size:"lg",children:[o.jsxs("div",{className:"space-y-6",children:[w&&o.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[o.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),o.jsxs("p",{className:"text-green-700",children:[o.jsx("span",{className:"font-medium",children:"Customer:"})," ",N||"Unknown customer"]}),o.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),o.jsx(ke,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...Array.isArray(h)?h.map(A=>({value:A.id,label:`${A.customerName} - Won Deal`})):[]],value:B.leadId,onChange:A=>{V(q=>({...q,leadId:A})),A?(async()=>{E(!0);try{const G=await ad(A);if(G&&G.length>0){const ie=[];G.forEach(_=>{if(_.selectedEquipment&&_.selectedEquipment.equipmentId){const I=l.find(Q=>Q.id===_.selectedEquipment.equipmentId);I&&!ie.some(Q=>Q.id===I.id)&&ie.push(I)}_.selectedMachines&&_.selectedMachines.length>0&&_.selectedMachines.forEach(I=>{if(I.equipmentId){const Q=l.find(te=>te.id===I.equipmentId);Q&&!ie.some(te=>te.id===Q.id)&&ie.push(Q)}})}),C(ie),ie.length>0&&V(_=>({..._,equipmentId:ie[0].id}))}}catch(G){console.error("Error loading equipment for lead:",G)}finally{E(!1)}})():(C([]),V(q=>({...q,equipmentId:""})))},required:!0,className:"text-black"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(ke,{label:"Equipment",options:j.length>0&&w?[{value:"",label:"-- Select deal-specific equipment --"},...Array.isArray(j)?j.map(A=>({value:A.id,label:`${A.name} (From Deal)`})):[]]:[{value:"",label:"-- Select equipment --"},...Array.isArray(l)?l.map(A=>({value:A.id,label:A.name})):[]],value:B.equipmentId,onChange:A=>V(q=>({...q,equipmentId:A})),required:!0,className:"text-black"}),D?o.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):j.length>0?o.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[j.length," equipment item",j.length!==1?"s":""," from deal quotation",j.length!==1?"s":""]}):B.leadId?o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),o.jsx(ke,{label:"Operator",options:[{value:"",label:"-- Select operator --"},...ve().map(A=>({value:A.id,label:A.name}))],value:B.operatorId,onChange:A=>V(q=>({...q,operatorId:A})),required:!0,className:"text-black"}),B.startDate&&B.endDate&&o.jsx("p",{className:"mt-1 text-xs text-gray-600",children:(()=>{const A=ve(),q=u.length,G=q-A.length;return G===0?`All ${q} operators are available`:A.length===0?"No operators available for this time slot":`${A.length} of ${q} operators available (${G} busy)`})()})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Ue,{type:"datetime-local",label:"Start Date & Time",value:B.startDate,onChange:A=>V(q=>({...q,startDate:A.target.value})),required:!0,className:"text-black"}),o.jsx(Ue,{type:"datetime-local",label:"End Date & Time",value:B.endDate,onChange:A=>V(q=>({...q,endDate:A.target.value})),required:!0,className:"text-black"})]}),o.jsx(Ue,{label:"Location",value:B.location,onChange:A=>V(q=>({...q,location:A.target.value})),required:!0,className:"text-black"}),o.jsx(hs,{label:"Notes",value:B.notes,onChange:A=>V(q=>({...q,notes:A.target.value})),rows:4,className:"text-black"}),B.equipmentId&&B.operatorId&&B.startDate&&B.endDate&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[o.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const A=ue(B.equipmentId,B.operatorId,B.startDate,B.endDate);return A.length>0?o.jsxs("div",{className:"text-error-600",children:[o.jsx("p",{children:"Conflicts found:"}),o.jsx("ul",{className:"list-disc list-inside text-sm",children:A.map(q=>o.jsxs("li",{children:[q.customerName," - ",Ns(new Date(q.scheduledStartDate),"MMM d, h:mm a")]},q.id))})]}):o.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),o.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o.jsx(W,{variant:"outline",onClick:()=>{y(!1),Z()},children:"Cancel"}),o.jsx(W,{onClick:H,variant:"accent",children:"Schedule Job"})]})]}),o.jsx(Ot,{isOpen:!!b,onClose:()=>v(null),title:"Job Details",size:"lg",children:b&&o.jsx(WU,{selectedJob:b})}),L.show&&o.jsx(mt,{title:L.title,description:L.description,variant:L.variant,isVisible:L.show,duration:3e3,onClose:()=>P({show:!1,title:""})})]})}function WU({selectedJob:e}){const[t,n]=se.useState(""),[s,r]=se.useState("");return se.useEffect(()=>{async function i(){try{const a=await tb.getJobEquipment(e.id);if(!a||a.length===0){n("No equipment assigned");return}const l=[];for(const c of a){const u=await h2(c.id);u&&u.name&&l.push(u.name)}n(l.length>0?l.join(", "):"No equipment assigned")}catch(a){console.error("Error fetching equipment names:",a),n("Error loading equipment")}}i()},[e.id]),se.useEffect(()=>{async function i(){try{const a=await tb.getJobOperators(e.id);if(!a||a.length===0){r("No operator assigned");return}const l=[];for(const c of a){const d=(await Wl()).find(h=>h.id===c.id);d&&d.name&&l.push(d.name)}r(l.length>0?l.join(", "):"No operator assigned")}catch(a){console.error("Error fetching operator names:",a),r("Error loading operators")}}i()},[e.id]),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Customer"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.customerName,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Status"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.status,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Equipment"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:t,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Operator"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:s,disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Start Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:Ns(new Date(e.scheduledStartDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"End Date"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:Ns(new Date(e.scheduledEndDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Location"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.location,disabled:!0,readOnly:!0})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("h4",{className:"text-sm font-medium text-black",children:"Notes"}),o.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.notes||"No notes",disabled:!0,readOnly:!0})]})]})})}function HU(){const[e,t]=x.useState([]),[n,s]=x.useState([]),[r,i]=x.useState([]),[a,l]=x.useState(!0),[c,u]=x.useState(null);x.useEffect(()=>{d()},[]);const d=async()=>{try{l(!0),u(null);const[h,f,m]=await Promise.all([au.getAllJobs(),au.getAllEquipment(),au.getAllOperators()]);t(h),s(f),i(m)}catch(h){u(h instanceof Error?h.message:"An error occurred"),console.error("Error loading data:",h)}finally{l(!1)}};return a?o.jsx("div",{className:"p-4",children:"Loading job data..."}):c?o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"text-red-600 mb-4",children:["Error: ",c]}),o.jsx(W,{onClick:d,children:"Try Again"})]}):o.jsxs("div",{className:"p-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Job Scheduling System"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsx(ae,{children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Jobs"}),o.jsx("p",{className:"text-2xl font-bold",children:e.length})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Equipment"}),o.jsx("p",{className:"text-2xl font-bold",children:n.length})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-2",children:"Operators"}),o.jsx("p",{className:"text-2xl font-bold",children:r.length})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsx(ae,{children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Recent Jobs"}),e.length===0?o.jsx("p",{className:"text-gray-500",children:"No jobs found."}):o.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.title}),o.jsx("p",{className:"text-sm text-gray-600",children:h.customerName}),o.jsx("p",{className:"text-sm text-gray-500",children:h.location})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="in_progress"?"bg-blue-100 text-blue-800":h.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status})]},h.id))})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Equipment"}),n.length===0?o.jsx("p",{className:"text-gray-500",children:"No equipment found."}):o.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.type})]}),o.jsxs("p",{className:"text-sm font-medium",children:["$",h.baseRate,"/day"]})]},h.id))})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4",children:[o.jsx("h3",{className:"font-semibold mb-4",children:"Available Operators"}),r.length===0?o.jsx("p",{className:"text-gray-500",children:"No operators found."}):o.jsx("div",{className:"space-y-2",children:r.slice(0,5).map(h=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:h.name}),o.jsx("p",{className:"text-sm text-gray-600",children:h.specialization})]}),o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.availability==="available"?"bg-green-100 text-green-800":h.availability==="assigned"?"bg-blue-100 text-blue-800":h.availability==="on_leave"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.availability||"available"})]},h.id))})]})})]})]})}function qU(){const[e,t]=x.useState("loading"),[n,s]=x.useState("");x.useEffect(()=>{r()},[]);const r=async()=>{try{t("loading"),s("");const i=await fetch("http://localhost:3001/api/health");i.ok?t("success"):(t("error"),s(`API returned status ${i.status}`))}catch(i){t("error"),s(i instanceof Error?i.message:"Unknown error")}};return o.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Job Scheduling System Test"}),o.jsx("p",{className:"text-gray-600",children:"Testing the complete job scheduling implementation"})]}),o.jsx("div",{className:"mb-6",children:o.jsx(ae,{children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"API Connection Status"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[e==="loading"&&"Testing API connection...",e==="success"&&"API connection successful",e==="error"&&`API connection failed: ${n}`]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${e==="loading"?"bg-yellow-500":e==="success"?"bg-green-500":"bg-red-500"}`}),o.jsx(W,{onClick:r,size:"sm",children:"Test Again"})]})]})})})}),e==="success"&&o.jsx(HU,{}),e==="error"&&o.jsx(ae,{children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"Connection Error"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Please make sure the backend server is running on port 3001"}),o.jsx(W,{onClick:r,children:"Retry Connection"})]})})})]})}const GU=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function YU(){const{user:e}=Qe(),[t,n]=x.useState(""),[s,r]=x.useState(""),[i,a]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(""),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState([]),[N,k]=x.useState(!0),[j,C]=x.useState({show:!1,title:""}),D=x.useRef(null);x.useEffect(()=>{(async()=>{try{const U=await e2();S(U),k(!1)}catch(U){console.error("Error fetching site assessments:",U),R("Error loading site assessments","error"),k(!1)}})()},[]);const E=M=>{const Z=Array.from(M.target.files||[]).filter(oe=>{const ue=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(oe.type),ve=oe.size<=10*1024*1024;return!ue||!ve?(R("Invalid file",`${oe.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(oe=>({id:Math.random().toString(36).substring(2,9),file:oe,preview:URL.createObjectURL(oe),annotations:[]}));d(oe=>[...oe,...Z])},O=M=>{M.preventDefault();const U=Array.from(M.dataTransfer.files),H=D.current;if(H){const Z=new DataTransfer;U.forEach(ue=>Z.items.add(ue)),H.files=Z.files;const oe=new Event("change",{bubbles:!0});H.dispatchEvent(oe)}},F=M=>{M.preventDefault()},L=M=>{d(U=>{const H=U.filter(Z=>Z.id!==M);return U.forEach(Z=>{Z.id===M&&URL.revokeObjectURL(Z.preview)}),H})},P=M=>{f(U=>U.find(Z=>Z.id===M.id)?U.filter(Z=>Z.id!==M.id):[...U,{...M}])},B=(M,U)=>{f(H=>H.map(Z=>Z.id===M?{...Z,notes:U}:Z))},V=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){R("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(M=>setTimeout(M,1e3)),R("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{R("Error sending link","Please try again later","error")}},R=(M,U,H="success")=>{C({show:!0,title:M,description:U,variant:H}),setTimeout(()=>C({show:!1,title:""}),3e3)},T=async()=>{if(!e){R("Error","You need to be logged in to submit a site assessment","error");return}if(!t){R("Missing title","Please provide a title for the site assessment","warning");return}if(!i){R("Missing location","Please provide the site location","warning");return}if(u.length===0){R("Missing files","Please upload at least one site photo or video","warning");return}try{const M=u.filter(ve=>ve.file.type.startsWith("image/")).map(ve=>`mock-url-${ve.id}`),U=u.filter(ve=>ve.file.type.startsWith("video/")).map(ve=>`mock-url-${ve.id}`),H=h.map(ve=>ve.id),Z=h.filter(ve=>ve.notes).map(ve=>`${ve.label}: ${ve.notes}`).join(`
`),oe={title:t,description:s,customerId:l||"unknown",location:i,constraints:H,notes:Z,images:M,videos:U,createdBy:e.id},ue=await t2(oe);S(ve=>[...ve,ue]),n(""),r(""),c(""),a(""),d([]),f([]),p(""),R("Site assessment submitted successfully",void 0,"success")}catch(M){console.error("Error submitting site assessment:",M),R("Error submitting assessment","Please try again later","error")}};return se.useEffect(()=>()=>{u.forEach(M=>{URL.revokeObjectURL(M.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Upload Media"})}),o.jsxs(le,{children:[o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:O,onDragOver:F,children:[o.jsx("input",{ref:D,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:E}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(lS,{className:"h-12 w-12 text-gray-400"})}),o.jsxs("div",{children:[o.jsx(W,{variant:"outline",onClick:()=>{var M;return(M=D.current)==null?void 0:M.click()},children:"Choose Files"}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),o.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&o.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(M=>o.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[M.file.type.startsWith("image/")?o.jsx("img",{src:M.preview,alt:"Preview",className:"w-full h-32 object-cover"}):o.jsx("video",{src:M.preview,className:"w-full h-32 object-cover"}),o.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[M.file.type.startsWith("image/")&&o.jsx(W,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{v(M),y(!0)},children:o.jsx(I0,{size:16})}),o.jsx(W,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>L(M.id),children:o.jsx(Er,{size:16})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:M.file.name})]},M.id))})]})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Site Constraints"})}),o.jsx(le,{children:o.jsx("div",{className:"space-y-4",children:GU.map(M=>{var U;return o.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(H=>H.id===M.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(H=>H.id===M.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>P(M),children:h.some(H=>H.id===M.id)&&o.jsx(X_,{className:"text-white h-4 w-4"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"font-medium text-gray-900",children:M.label}),M.description&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:M.description}),h.some(H=>H.id===M.id)&&o.jsx(hs,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((U=h.find(H=>H.id===M.id))==null?void 0:U.notes)||"",onChange:H=>B(M.id,H.target.value),rows:2})]})]})},M.id)})})})]})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Remote Site Assessment"})}),o.jsx(le,{children:o.jsxs("div",{className:"max-w-md",children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsx(Ue,{type:"tel",placeholder:"Enter phone number",value:m,onChange:M=>p(M.target.value)}),o.jsx(W,{onClick:V,leftIcon:o.jsx(fa,{size:16}),children:"Send Link"})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Site Details"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),o.jsx(Ue,{value:t,onChange:M=>n(M.target.value),placeholder:"Site assessment title",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),o.jsx(Ue,{value:l,onChange:M=>c(M.target.value),placeholder:"Enter customer ID if available"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),o.jsx(Ue,{value:i,onChange:M=>a(M.target.value),placeholder:"Enter site address/location",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx(hs,{value:s,onChange:M=>r(M.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),o.jsx("div",{className:"flex justify-end mt-6",children:o.jsxs(W,{onClick:T,className:"flex items-center gap-2",children:[o.jsx(fa,{size:16}),"Submit Assessment"]})}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Assessment Summary"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(M=>o.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[M.file.type.startsWith("image/")?o.jsx(Q_,{size:14}):o.jsx(I0,{size:14}),o.jsx("span",{className:"truncate max-w-[200px]",children:M.file.name})]},M.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?o.jsx("div",{className:"space-y-3",children:h.map(M=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[o.jsx(oS,{size:14}),M.label]}),M.notes&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:M.notes})]},M.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),o.jsx(gx,{children:g&&b&&o.jsx(tr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:o.jsxs(tr.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{y(!1),v(null)},children:o.jsx(Fl,{size:20})})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"relative",children:o.jsx("img",{src:b.preview,alt:"Annotation",className:"max-w-full h-auto"})}),o.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{y(!1),v(null)},children:"Cancel"}),o.jsx(W,{onClick:()=>{y(!1),v(null),R("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),j.show&&o.jsx(mt,{title:j.title,description:j.description,variant:j.variant,isVisible:j.show,onClose:()=>C({show:!1,title:""})})]})}const QU=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function KU(){const{id:e}=GN(),{user:t}=Qe(),[n,s]=x.useState(null),[r,i]=x.useState(!0),[a,l]=x.useState(QU),[c,u]=x.useState(""),[d,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState(!1),[v,w]=x.useState(null),[S,N]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&k()},[e]);const k=async()=>{try{const F=await zC(e);s(F),w({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch(F){console.error("Error fetching job details:",F),O("Error fetching job details","error")}finally{i(!1)}},j=F=>{l(L=>L.map(P=>P.id===F?{...P,checked:!P.checked}:P))},C=async()=>{try{await new Promise(F=>setTimeout(F,1e3)),O("Feedback request sent successfully","success")}catch{O("Error sending feedback request","error")}},D=async()=>{if(!f||!p){O("Please fill in all discount request fields","error");return}try{await new Promise(F=>setTimeout(F,1e3)),O("Discount request submitted for approval","success")}catch{O("Error submitting discount request","error")}},E=()=>{O("Summary downloaded successfully","success")},O=(F,L="success")=>{N({show:!0,title:F,variant:L}),setTimeout(()=>N({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):r?o.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?o.jsxs("div",{className:"space-y-6 p-6",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),o.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),o.jsx(W,{variant:"outline",leftIcon:o.jsx(Wg,{size:16}),onClick:E,children:"Download Summary"})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Job Details"})}),o.jsx(le,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),o.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(qg,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:n.location})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(hn,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),o.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[o.jsx(ma,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:"Mike Operator"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),o.jsxs("div",{className:"mt-1 space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(us,{className:"h-5 w-5 text-gray-400"}),o.jsx("span",{children:new Date(n.startDate).toLocaleDateString()})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(En,{className:"h-5 w-5 text-gray-400"}),o.jsxs("span",{children:[new Date(n.startDate).toLocaleTimeString()," - ",new Date(n.endDate).toLocaleTimeString()]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),o.jsx("div",{className:"mt-1",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Safety Observations"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(F=>o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${F.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>j(F.id),children:F.checked&&o.jsx(br,{className:"text-white h-4 w-4"})}),o.jsx("span",{className:"text-gray-700",children:F.label})]},F.id))}),o.jsx(hs,{label:"Safety Notes",value:c,onChange:F=>u(F.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(ye,{children:"Customer Feedback"}),o.jsx(W,{variant:"outline",leftIcon:o.jsx(fa,{size:16}),onClick:C,children:"Request Feedback"})]})}),o.jsx(le,{children:v?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex",children:[1,2,3,4,5].map(F=>o.jsx("svg",{className:`h-5 w-5 ${F<=v.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},F))}),o.jsx("span",{className:"text-lg font-medium",children:v.rating})]}),o.jsx("p",{className:"text-gray-600",children:v.comments}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(v.submittedAt).toLocaleDateString()]})]}):o.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Discount Request"})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"requestDiscount",checked:d,onChange:F=>h(F.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&o.jsxs("div",{className:"space-y-4",children:[o.jsx(hs,{label:"Reason for Discount",value:f,onChange:F=>m(F.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),o.jsx("div",{className:"w-48",children:o.jsx(Ue,{type:"number",label:"Discount Percentage",value:p,onChange:F=>g(F.target.value),min:"0",max:"100",placeholder:"Enter %"})}),o.jsx("div",{className:"flex justify-end",children:o.jsx(W,{onClick:D,children:"Submit for Approval"})})]})]})})]}),S.show&&o.jsx(mt,{title:S.title,variant:S.variant,isVisible:S.show,onClose:()=>N({show:!1,title:""})})]}):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const XU=async()=>{try{return await $n.get("/equipment")}catch(e){return console.error("Failed to fetch equipment:",e),[]}},JU=async e=>{try{return await $n.post("/equipment",e)}catch(t){throw console.error("Failed to create equipment:",t),new Error(t.message||"Failed to create equipment")}},ZU=async(e,t)=>{try{return await $n.put(`/equipment/${e}`,t)}catch(n){return console.error(`Failed to update equipment ${e}:`,n),null}},eW=async e=>{try{return await $n.delete(`/equipment/${e}`),!0}catch(t){return console.error(`Failed to delete equipment ${e}:`,t),!1}},Of=e=>{var t,n,s,r;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((s=e.baseRates)==null?void 0:s.monthly)||0,yearly:((r=e.baseRates)==null?void 0:r.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},Lf=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],Ff=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],tW=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function nW(){const{user:e}=Qe(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,a]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!0),[m,p]=x.useState(!1),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState({show:!1,title:""}),[N,k]=x.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"});x.useEffect(()=>{j()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const j=async()=>{try{let P=await XU();P=P.map(Of),n(P),console.log("Successfully connected to equipment API"),f(!1)}catch(P){console.error("Error fetching equipment:",P),L("Error fetching equipment","error"),f(!1)}},C=()=>{let P=[...t];i&&(P=P.filter(B=>B.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(P=P.filter(B=>B.status===l)),u!=="all"&&(P=P.filter(B=>B.category===u)),r(P)},D=()=>{if(!N.name||!N.manufacturingDate||!N.registrationDate||!N.maxLiftingCapacity||!N.unladenWeight||!N.runningCostPerKm||!N.baseRates.micro||!N.baseRates.small||!N.baseRates.monthly||!N.baseRates.yearly)return L("Please fill in all required fields","error"),!1;const P=/^\d{4}-\d{2}$/;return!P.test(N.manufacturingDate)||!P.test(N.registrationDate)?(L("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(N.maxLiftingCapacity))||isNaN(Number(N.unladenWeight))||isNaN(Number(N.runningCostPerKm))||isNaN(Number(N.baseRates.micro))||isNaN(Number(N.baseRates.small))||isNaN(Number(N.baseRates.monthly))||isNaN(Number(N.baseRates.yearly))?(L("Please enter valid numbers for numeric fields","error"),!1):!0},E=async P=>{if(P.preventDefault(),!!D())try{const B={...N,equipmentId:(b==null?void 0:b.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(N.maxLiftingCapacity),unladenWeight:Number(N.unladenWeight),baseRates:{micro:Number(N.baseRates.micro),small:Number(N.baseRates.small),monthly:Number(N.baseRates.monthly),yearly:Number(N.baseRates.yearly)},runningCost:Number(N.runningCostPerKm),runningCostPerKm:Number(N.runningCostPerKm)};if(console.log("Form submission data:",B),b){console.log(`Updating equipment ${b.id}`,B);let V=await ZU(b.id,B);V?(console.log("Update successful:",V),V=Of(V),n(R=>R.map(T=>T.id===b.id?V:T)),L("Equipment updated successfully","success")):L("Failed to update equipment","error")}else{console.log("Creating new equipment",B);let V=await JU(B);V=Of(V),console.log("Creation successful:",V),n(R=>[...R,V]),L("Equipment added successfully","success")}setTimeout(()=>{j()},500),p(!1),F()}catch(B){console.error("Error saving equipment:",B),L("Error saving equipment","error")}},O=async()=>{if(b)try{await eW(b.id),n(P=>P.filter(B=>B.id!==b.id)),y(!1),v(null),L("Equipment deleted successfully","success")}catch{L("Error deleting equipment","error")}},F=()=>{k({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),v(null)},L=(P,B="success")=>{S({show:!0,title:P,variant:B}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search equipment...",value:i,onChange:P=>a(P.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(ke,{value:u,onChange:P=>d(P),options:[{value:"all",label:"All Categories"},...Ff],className:"w-full sm:w-48"}),o.jsx(ke,{value:l,onChange:P=>c(P),options:[{value:"all",label:"All Status"},...Lf],className:"w-full sm:w-48"})]})]}),o.jsx(W,{onClick:()=>{F(),p(!0)},leftIcon:o.jsx(ds,{className:"w-4 h-4"}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Equipment"})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Equipment Inventory"})}),o.jsx(le,{children:h?o.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sm:px-6",children:"Rates"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(P=>{var B,V;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:P.name}),o.jsx("div",{className:"text-sm text-gray-500",children:P.equipmentId}),P.description&&o.jsx("div",{className:"text-sm text-gray-500 mt-1",children:P.description})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(gl,{variant:"secondary",className:"w-full justify-center",children:(B=Ff.find(R=>R.value===P.category))==null?void 0:B.label}),o.jsx(gl,{variant:P.status==="available"?"success":P.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(V=Lf.find(R=>R.value===P.status))==null?void 0:V.label})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"text-sm space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(us,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Mfg: ",P.manufacturingDate||"N/A"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jA,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:P.maxLiftingCapacity?`${P.maxLiftingCapacity} tons max lift`:"N/A"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"text-gray-900",children:P.unladenWeight?`${P.unladenWeight} tons unladen`:"N/A"})]}),P.registrationDate&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(us,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-900",children:["Reg: ",P.registrationDate]})]})]})}),o.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:o.jsxs("div",{className:"text-sm",children:["                          ",o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),o.jsx("div",{className:"space-y-2.5",children:tW.map(R=>o.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[o.jsx("span",{className:"text-gray-600",children:R.label}),o.jsxs("div",{className:"flex items-baseline gap-1.5",children:[o.jsx("span",{className:"text-gray-400 text-sm",children:"₹"}),o.jsx("span",{className:"text-gray-900 font-medium",children:P.baseRates&&P.baseRates[R.value]!==void 0?Te(P.baseRates[R.value]):"N/A"}),o.jsx("span",{className:"text-gray-500 text-sm",children:R.value==="monthly"||R.value==="yearly"?o.jsxs("div",{children:["per",o.jsx("br",{}),"month"]}):"per hour"})]})]},R.value))})]}),"                            ",o.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[o.jsx(hn,{className:"h-4 w-4"}),o.jsx("span",{children:"Running:"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-gray-400",children:"₹"}),o.jsx("span",{className:"text-gray-900",children:P.runningCostPerKm!==void 0?Te(P.runningCostPerKm):"N/A"}),o.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{v(P),k({name:P.name||"",category:P.category||"mobile_crane",manufacturingDate:P.manufacturingDate||"",registrationDate:P.registrationDate||"",maxLiftingCapacity:P.maxLiftingCapacity!==void 0?String(P.maxLiftingCapacity):"",unladenWeight:P.unladenWeight!==void 0?String(P.unladenWeight):"",baseRates:{micro:P.baseRates&&P.baseRates.micro!==void 0?String(P.baseRates.micro):"",small:P.baseRates&&P.baseRates.small!==void 0?String(P.baseRates.small):"",monthly:P.baseRates&&P.baseRates.monthly!==void 0?String(P.baseRates.monthly):"",yearly:P.baseRates&&P.baseRates.yearly!==void 0?String(P.baseRates.yearly):""},runningCostPerKm:P.runningCostPerKm!==void 0?String(P.runningCostPerKm):"",description:P.description||"",status:P.status||"available"}),p(!0)},children:o.jsx(Pa,{className:"h-4 w-4"})}),o.jsx(W,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{v(P),y(!0)},children:o.jsx(Er,{className:"h-4 w-4"})})]})})]},P.id)})})]})})})]}),o.jsx(Ot,{title:b?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),F()},size:"lg",children:o.jsxs("form",{onSubmit:E,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(me,{label:"Name",value:N.name,onChange:P=>k({...N,name:P.target.value}),required:!0}),o.jsx(me,{label:"Max Lifting Capacity (tons)",type:"number",value:N.maxLiftingCapacity,onChange:P=>k({...N,maxLiftingCapacity:P.target.value}),required:!0}),o.jsx(ke,{label:"Category",value:N.category,onChange:P=>k({...N,category:P}),options:Ff,className:"w-full"}),o.jsx(me,{label:"Unladen Weight (tons)",type:"number",value:N.unladenWeight,onChange:P=>k({...N,unladenWeight:P.target.value}),required:!0}),o.jsx(me,{label:"Manufacturing Date (YYYY-MM)",value:N.manufacturingDate,onChange:P=>k({...N,manufacturingDate:P.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(me,{label:"Running Cost (₹/km)",type:"number",value:N.runningCostPerKm,onChange:P=>k({...N,runningCostPerKm:P.target.value}),required:!0}),o.jsx(me,{label:"Registration Date (YYYY-MM)",value:N.registrationDate,onChange:P=>k({...N,registrationDate:P.target.value}),placeholder:"YYYY-MM",required:!0}),o.jsx(ke,{label:"Status",value:N.status,onChange:P=>k({...N,status:P}),options:Lf,className:"w-full"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),o.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[o.jsx(me,{label:"Micro Rate (₹ per hour)",type:"number",value:N.baseRates.micro,onChange:P=>k({...N,baseRates:{...N.baseRates,micro:P.target.value}}),required:!0}),o.jsx(me,{label:"Small Rate (₹ per hour)",type:"number",value:N.baseRates.small,onChange:P=>k({...N,baseRates:{...N.baseRates,small:P.target.value}}),required:!0}),o.jsx(me,{label:"Monthly Rate (₹ per month)",type:"number",value:N.baseRates.monthly,onChange:P=>k({...N,baseRates:{...N.baseRates,monthly:P.target.value}}),required:!0}),o.jsx(me,{label:"Yearly Rate (₹ per month)",type:"number",value:N.baseRates.yearly,onChange:P=>k({...N,baseRates:{...N.baseRates,yearly:P.target.value}}),required:!0})]})]}),o.jsx(hs,{label:"Description",value:N.description,onChange:P=>k({...N,description:P.target.value}),rows:3}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{p(!1),F()},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:b?"Update Equipment":"Add Equipment"})]})]})}),o.jsx(Ot,{title:"Delete Equipment",isOpen:g,onClose:()=>{y(!1),v(null)},children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this equipment? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{y(!1),v(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:O,children:"Delete Equipment"})]})]})}),o.jsx(mt,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const $f=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],sW=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function rW(){const{user:e}=Qe(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,a]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[g,y]=x.useState(null),[b,v]=x.useState(!0),[w,S]=x.useState({show:!1,title:""}),N=(L,P="success",B)=>{S({show:!0,title:L,variant:P,description:B}),setTimeout(()=>S({show:!1,title:""}),3e3)},[k,j]=x.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});x.useEffect(()=>{(async()=>{try{v(!0);const P=await n2();n(P),v(!1)}catch(P){console.error("Error fetching services:",P),N("Error fetching services","error"),v(!1)}})()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const C=()=>{let L=[...t];i&&(L=L.filter(P=>P.name.toLowerCase().includes(i.toLowerCase())||P.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(L=L.filter(P=>P.type===l)),u!=="all"&&(L=L.filter(P=>u==="active"?P.isActive:!P.isActive)),r(L)},D=async L=>{if(L.preventDefault(),!k.name||!k.type||!k.baseRate||!k.unit){N("Please fill in all required fields","error");return}try{const P={name:k.name,type:k.type,baseRate:parseFloat(k.baseRate),unit:k.unit,description:k.description,isActive:k.isActive};if(g){const B=await r2(g.id,P);n(V=>V.map(R=>R.id===g.id?B:R)),N("Service updated successfully","success")}else{const B=await s2(P);n(V=>[...V,B]),N("Service added successfully","success")}f(!1),O()}catch{N("Error saving service","error")}},E=async()=>{if(g)try{await i2(g.id),n(L=>L.filter(P=>P.id!==g.id)),p(!1),y(null),N("Service deleted successfully","success")}catch(L){console.error("Error deleting service:",L),N("Error deleting service","error")}},O=()=>{j({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),y(null)},F=async L=>{try{const P=await a2(L.id);n(B=>B.map(V=>V.id===L.id?P:V)),N(`Service ${L.isActive?"deactivated":"activated"}`,"success")}catch(P){console.error("Error toggling service status:",P),N("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search services...",value:i,onChange:L=>a(L.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx(ke,{options:[{value:"all",label:"All Types"},...$f],value:l,onChange:c,className:"w-40"}),o.jsx(ke,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:L=>d(L),className:"w-40"})]})]}),o.jsx(W,{onClick:()=>{O(),f(!0)},leftIcon:o.jsx(ds,{size:16}),children:"Add Service"})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Services Catalog"})}),"        ",o.jsx(le,{children:b?o.jsx("div",{className:"text-center py-4",children:"Loading services..."}):s.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(L=>{var P;return o.jsx(ae,{variant:"bordered",className:"h-full",children:o.jsxs(le,{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-lg",children:L.name}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(oS,{className:"h-4 w-4 text-gray-400"}),o.jsx("span",{className:"text-sm text-gray-500",children:(P=$f.find(B=>B.value===L.type))==null?void 0:P.label})]})]}),o.jsx(W,{variant:L.isActive?"default":"ghost",size:"sm",onClick:()=>F(L),children:L.isActive?o.jsx(br,{className:"h-4 w-4"}):o.jsx(Ud,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:L.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[o.jsx(Vd,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:Te(L.baseRate)})]}),o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(En,{className:"h-4 w-4"}),o.jsxs("span",{children:["Per ",L.unit]})]})]})]}),o.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{y(L),j({name:L.name,type:L.type,baseRate:L.baseRate.toString(),unit:L.unit,description:L.description||"",isActive:L.isActive}),f(!0)},children:o.jsx(Pa,{className:"h-4 w-4"})}),o.jsx(W,{variant:"destructive",size:"sm",onClick:()=>{y(L),p(!0)},children:o.jsx(Er,{className:"h-4 w-4"})})]})]})},L.id)})})})]}),o.jsx(Ot,{isOpen:h,onClose:()=>{f(!1),O()},title:g?"Edit Service":"Add New Service",size:"lg",children:o.jsxs("form",{onSubmit:D,className:"space-y-6",children:[o.jsx(me,{label:"Service Name",value:k.name,onChange:L=>j(P=>({...P,name:L.target.value})),required:!0}),o.jsx(ke,{label:"Service Type",options:$f,value:k.type,onChange:L=>j(P=>({...P,type:L})),required:!0}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(me,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:k.baseRate,onChange:L=>j(P=>({...P,baseRate:L.target.value})),required:!0}),o.jsx(ke,{label:"Rate Unit",options:sW,value:k.unit,onChange:L=>j(P=>({...P,unit:L})),required:!0})]}),o.jsx(hs,{label:"Description",value:k.description,onChange:L=>j(P=>({...P,description:L.target.value})),rows:3}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:k.isActive,onChange:L=>j(P=>({...P,isActive:L.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{f(!1),O()},children:"Cancel"}),o.jsx(W,{type:"submit",children:g?"Update Service":"Add Service"})]})]})}),o.jsx(Ot,{isOpen:m,onClose:()=>{p(!1),y(null)},title:"Delete Service",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{p(!1),y(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:E,children:"Delete"})]})]})}),w.show&&o.jsx(mt,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const iW=async()=>await $n.get("/users"),aW=async e=>await $n.post("/users",e),zw=async(e,t)=>await $n.put(`/users/${e}`,t),oW=async e=>{await $n.delete(`/users/${e}`)},Bf=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],lW=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],fo=10,zf=e=>{const t=e.split("").reduce((a,l)=>a+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],s=t%n.length,r=n[s];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${r}&color=fff&size=128`};function cW(){const{user:e}=Qe(),[t,n]=x.useState([]),[s,r]=x.useState([]),[i,a]=x.useState(1),[l,c]=x.useState(""),[u,d]=x.useState("all"),[h,f]=x.useState("all"),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(!1),[w,S]=x.useState(null),[N,k]=x.useState({show:!1,title:""}),[j,C]=x.useState({name:"",email:"",password:"",role:"operator",status:"active"});x.useEffect(()=>{(async()=>{try{if(p(!0),!e){E("Authentication Required","You need to log in to view users","warning"),p(!1);return}try{const M=(await iW()).map(U=>({id:U.id,name:U.name,email:U.email,role:U.role,status:U.status==="active"?"active":"inactive"}));n(M),r(M)}catch(T){console.error("Error fetching users:",T),T.message&&T.message.includes("Authentication required")?E("Authentication Error","You need to log in to view users","error"):E("Error loading users",T.message||"Please try again later","error");const M=[{id:"1",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"2",name:"Sales Agent",email:"sales@example.com",role:"sales_agent",status:"active"}];n(M),r(M)}}finally{p(!1)}})()},[]),x.useEffect(()=>{D()},[t,l,u,h]);const D=()=>{let R=[...t];if(l){const T=l.toLowerCase();R=R.filter(M=>M&&typeof M.name=="string"&&typeof M.email=="string"&&(M.name.toLowerCase().includes(T)||M.email.toLowerCase().includes(T)))}u!=="all"&&(R=R.filter(T=>T.role===u)),h!=="all"&&(R=R.filter(T=>T.status===h)),r(R),a(1)},E=(R,T,M="success")=>{k({show:!0,title:R,description:T,variant:M}),setTimeout(()=>k({show:!1,title:""}),3e3)},O=async R=>{const T=R.status==="active"?"inactive":"active";try{await zw(R.id,{}),n(M=>M.map(U=>U.id===R.id?{...U,status:T}:U)),E(`User ${R.status==="active"?"deactivated":"activated"}`,"success")}catch(M){console.error("Error toggling user status:",M),E("Error updating user status","error")}},F=async R=>{if(R.preventDefault(),!j.name||!j.email||!j.role){E("Please fill in all required fields","error");return}if(!w&&!j.password){E("Password is required for new users","error");return}try{if(w){const T={...w,name:j.name,email:j.email,role:j.role,status:j.status};await zw(w.id,{name:j.name,email:j.email,role:j.role,isActive:j.status==="active"}),n(M=>M.map(U=>U.id===w.id?T:U)),E("User updated successfully","success")}else try{const T=await aW({email:j.email,name:j.name,role:j.role,isActive:j.status==="active"}),M={id:T.id,name:T.name,email:T.email,role:T.role,status:T.isActive?"active":"inactive",avatar:zf(j.name)};n(U=>[...U,M]),E("User added successfully","success")}catch(T){E(`Error creating user account: ${T.message||"Unknown error"}`,"error");return}y(!1),P()}catch(T){E(`Error saving user: ${T.message||"Unknown error"}`,"error")}},L=async()=>{if(w)try{await oW(w.id),n(R=>R.filter(T=>T.id!==w.id)),v(!1),S(null),E("User deleted successfully","success")}catch(R){console.error("Error deleting user:",R),E("Error deleting user","error")}},P=()=>{C({name:"",email:"",password:"",role:"operator",status:"active"}),S(null)},B=Math.ceil(s.length/fo),V=s.slice((i-1)*fo,i*fo);return!e||e.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search users...",value:l,onChange:R=>c(R.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx(ke,{options:[{value:"all",label:"All Roles"},...Bf],value:u,onChange:R=>d(R),className:"w-full sm:w-40"}),o.jsx(ke,{options:[{value:"all",label:"All Status"},...lW],value:h,onChange:R=>f(R),className:"w-full sm:w-40"})]})]}),o.jsx(W,{onClick:()=>{P(),y(!0)},leftIcon:o.jsx(wA,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add User"})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"User Management"})}),o.jsx(le,{children:m?o.jsx("div",{className:"text-center py-4",children:"Loading users..."}):V.length===0?o.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(R=>{var T;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:R.avatar||zf(R.name),alt:R.name,className:"h-10 w-10 rounded-full object-cover",onError:M=>{const U=M.target;U.onerror=null,U.src=zf(R.name)}}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"font-medium text-gray-900",children:R.name}),o.jsx("div",{className:"text-sm text-gray-500",children:R.email})]})]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(T=Bf.find(M=>M.value===R.role))==null?void 0:T.label})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${R.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:R.status==="active"?"Active":"Inactive"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>O(R),children:R.status==="active"?o.jsx(Ud,{size:16}):o.jsx(br,{size:16})}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{S(R),C({name:R.name,email:R.email,password:"",role:R.role,status:R.status}),y(!0)},children:o.jsx(Pa,{size:16})}),o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{S(R),v(!0)},children:o.jsx(Er,{size:16})})]})})]},R.id)})})]})}),B>1&&o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*fo+1," to"," ",Math.min(i*fo,s.length)," of"," ",s.length," users"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(W,{variant:"outline",size:"sm",onClick:()=>a(R=>Math.max(1,R-1)),disabled:i===1,children:"Previous"}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>a(R=>Math.min(B,R+1)),disabled:i===B,children:"Next"})]})]})]})})]}),"      ",o.jsx(Ot,{isOpen:g,onClose:()=>{y(!1),P()},title:w?"Edit User":"Add New User",size:"lg",children:o.jsxs("form",{onSubmit:F,className:"space-y-6",children:[o.jsx(dd,{}),o.jsx(me,{label:"Full Name",value:j.name,onChange:R=>C(T=>({...T,name:R.target.value})),required:!0}),"          ",o.jsx(me,{label:"Email Address",type:"email",value:j.email,onChange:R=>C(T=>({...T,email:R.target.value})),required:!0}),o.jsx(me,{label:"Password",type:"password",value:j.password||"",onChange:R=>C(T=>({...T,password:R.target.value})),required:!w,placeholder:w?"Leave blank to keep current password":""}),o.jsx(ke,{label:"Role",options:Bf,value:j.role,onChange:R=>C(T=>({...T,role:R})),required:!0}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:j.status==="active",onChange:R=>C(T=>({...T,status:R.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{y(!1),P()},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:w?"Update User":"Add User"})]})]})}),"      ",o.jsx(Ot,{isOpen:b,onClose:()=>{v(!1),S(null)},title:"Delete User",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[o.jsx(ji,{className:"h-5 w-5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{v(!1),S(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:L,children:"Delete User"})]})]})}),N.show&&o.jsx(mt,{title:N.title,variant:N.variant,isVisible:N.show,onClose:()=>k({show:!1,title:""})})]})}function Ii({children:e,title:t,defaultExpanded:n=!1,icon:s,className:r="",onToggle:i}){const[a,l]=x.useState(n),c=()=>{const u=!a;l(u),i==null||i(u)};return o.jsxs(ae,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${r}`,children:[o.jsx(xe,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[s&&o.jsx("div",{className:"text-gray-500 flex-shrink-0",children:s}),o.jsx(ye,{className:"text-base sm:text-lg font-medium",children:t})]}),o.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${a?"rotate-180":""}`,children:o.jsx(Ys,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),o.jsx("div",{className:`transition-all duration-300 overflow-hidden ${a?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:o.jsx(le,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}const Vw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},dh=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("authToken");return t&&(e.Authorization=`Bearer ${t}`),e},uW=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:dh()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||Vw}catch(e){return console.error("Error fetching quotation config:",e),Vw}},dW=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:dh(),body:JSON.stringify(e)});if(!t.ok){const s=await t.json();throw new Error(s.message||"Failed to update quotation config")}return(await t.json()).data}catch(t){throw console.error("Error updating quotation config:",t),t}},Qk=async e=>{try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:dh()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},Kk=async(e,t)=>{try{const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:dh(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.message||`Failed to update ${e} config`)}return(await n.json()).data}catch(n){throw console.error(`Error updating ${e} config:`,n),n}},hW=async()=>Qk("resourceRates"),fW=async e=>Kk("resourceRates",e),mW=async()=>Qk("additionalParams"),pW=async e=>Kk("additionalParams",e);function gW(){const[e,t]=x.useState(!0),[n,s]=x.useState(!1),[r,i]=x.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await uW();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const g of f){const y=r[g];if(y.minDays<=p){u(`${g.charAt(0).toUpperCase()+g.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(y.maxDays<=y.minDays){u(`${g.charAt(0).toUpperCase()+g.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=y.maxDays}if(!m)return;await dW({orderTypeLimits:r}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{s(!1)}},h=(f,m,p)=>{const g=parseInt(p)||0;i(y=>({...y,[f]:{...y[f],[m]:g}}))};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>o.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[o.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ue,{type:"number",label:"Minimum Days",value:r[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),o.jsx("div",{children:o.jsx(Ue,{type:"number",label:"Maximum Days",value:r[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:r[f].minDays+1})})]})]},f))}),o.jsx("div",{className:"flex justify-end",children:o.jsx(W,{onClick:d,disabled:n,leftIcon:n?o.jsx(rt,{className:"animate-spin"}):o.jsx(Ni,{}),children:n?"Saving...":"Save Changes"})}),a.show&&o.jsx(mt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function xW(){const[e,t]=x.useState(!0),[n,s]=x.useState(!1),[r,i]=x.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await hW();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(s(!0),r.foodRatePerMonth<=0||r.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await fW(r),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{s(!1)}};return e?o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Yn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(Ue,{type:"number",value:r.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(r.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Yn,{className:"h-5 w-5 text-primary-500"}),o.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(Ue,{type:"number",value:r.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),o.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(r.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(W,{onClick:d,disabled:n,leftIcon:n?o.jsx(rt,{className:"animate-spin"}):o.jsx(Ni,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(mt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function yW(){const[e,t]=x.useState(!0),[n,s]=x.useState(!1),[r,i]=x.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[a,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await mW(),m={...r,...f,usageFactors:{...r.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{s(!0),await pW(r),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{s(!1)}};if(e)return o.jsx("div",{className:"flex items-center justify-center h-48",children:o.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:g=!1})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),o.jsxs("div",{className:"relative mt-1",children:[!g&&o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),o.jsx(Ue,{type:"number",value:f,onChange:y=>m(Number(y.target.value)),className:g?"pr-8":"pl-7",min:"0"}),g&&o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx(mA,{className:"h-4 w-4 text-gray-400"})})]})]});return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gg,{className:"h-5 w-5 text-primary-500"}),o.jsx(ye,{children:"Usage Rates"})]})}),"          ",o.jsxs(le,{className:"space-y-4",children:[o.jsx(h,{label:"Normal Usage Factor",value:r.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Usage Factor",value:r.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"Heavy Usage Factor",value:r.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jm,{className:"h-5 w-5 text-primary-500"}),o.jsx(ye,{children:"Risk Factors"})]})}),o.jsxs(le,{className:"space-y-4",children:[o.jsx(h,{label:"Low Risk",value:r.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),o.jsx(h,{label:"Medium Risk",value:r.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),o.jsx(h,{label:"High Risk",value:r.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(En,{className:"h-5 w-5 text-primary-500"}),o.jsx(ye,{children:"Shift Factors"})]})}),o.jsxs(le,{className:"space-y-4",children:[o.jsx(h,{label:"Single Shift",value:r.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),o.jsx(h,{label:"Double Shift",value:r.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dA,{className:"h-5 w-5 text-primary-500"}),o.jsx(ye,{children:"Day/Night Factors"})]})}),o.jsxs(le,{className:"space-y-4",children:[o.jsx(h,{label:"Day Factor",value:r.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),o.jsx(h,{label:"Night Factor",value:r.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(W,{onClick:d,disabled:n,leftIcon:n?o.jsx(rt,{className:"animate-spin"}):o.jsx(Ni,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),a.show&&o.jsx(mt,{title:a.title,variant:a.variant,isVisible:a.show,onClose:()=>l({show:!1,title:""})})]})}function vW(){const e=bW();return e?{Authorization:`Bearer ${e}`}:{}}const bW=()=>{try{return localStorage.getItem("jwt-token")||localStorage.getItem("authToken")||sessionStorage.getItem("jwt-token")||sessionStorage.getItem("authToken")}catch(e){return console.error("Error accessing storage for auth token:",e),null}};async function wW(e,t){const n=await fetch("/api/templates/merge",{method:"POST",headers:{"Content-Type":"application/json",...vW()},body:JSON.stringify({templateId:e,data:t})});if(!n.ok)throw new Error("Failed to merge template");return(await n.json()).mergedContent||""}const Uw={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["10000"],otherFactorsCharge:2e3,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile",dealType:"rental",sundayWorking:"no",otherFactors:[]};function jW({onSave:e}){var w,S;const[t,n]=x.useState([]),[s,r]=x.useState(""),[i,a]=x.useState(null),[l,c]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState({show:!1,title:""}),[m,p]=x.useState("");x.useEffect(()=>{async function N(){if(i&&Uw)try{const k=await wW(i.id,Uw);p(k)}catch{p('<div style="color:red">Error generating preview</div>')}else p("")}N()},[i]),x.useEffect(()=>{g()},[]),x.useEffect(()=>{if(s){const N=t.find(k=>k.id===s);a(N||null)}else a(null)},[s,t]);const g=async()=>{try{c(!0);const N=await $C();n(N);const k=N.find(j=>j.isDefault);k&&r(k.id)}catch(N){console.error("Error loading templates and config:",N),y("Error loading configuration","error")}finally{c(!1)}},y=(N,k="success")=>{f({show:!0,title:N,variant:k}),setTimeout(()=>f({show:!1,title:""}),3e3)},b=async()=>{try{d(!0);const N=t.find(k=>k.isDefault);if(N&&N.id!==s&&await pp(N.id,{isDefault:!1}),s){const k=t.find(j=>j.id===s);k&&await pp(k.id,{isDefault:!0})}await g(),y("Default template configuration saved successfully"),e==null||e()}catch(N){console.error("Error saving default template config:",N),y("Error saving configuration","error")}finally{d(!1)}},v=[{value:"",label:"No default template selected"},...t.map(N=>({value:N.id,label:N.name}))];return l?o.jsx("div",{className:"flex items-center justify-center h-32",children:o.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ht,{className:"h-5 w-5 text-primary-500"}),o.jsx(ye,{children:"Default Quotation Template"})]})}),o.jsxs(le,{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),o.jsx(ke,{options:v,value:s,onChange:r,className:"w-full max-w-md"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),s&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Ht,{className:"h-5 w-5 text-blue-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),o.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(w=t.find(N=>N.id===s))==null?void 0:w.name}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(S=t.find(N=>N.id===s))==null?void 0:S.description})]})]})}),t.length===0&&o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(rt,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),o.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),o.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:o.jsx(W,{onClick:b,disabled:u||t.length===0,leftIcon:u?o.jsx(rt,{className:"animate-spin"}):o.jsx(Ni,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Template Preview"})}),o.jsx(le,{children:o.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:o.jsx("div",{dangerouslySetInnerHTML:{__html:m}})})})]}),h.show&&o.jsx(mt,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const NW=()=>{const[e,t]=x.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,s]=x.useState(!0),[r,i]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState("untested"),[d,h]=x.useState({show:!1,title:""}),f=(b,v="success")=>{h({show:!0,title:b,variant:v}),setTimeout(()=>h({show:!1,title:""}),v==="success"?5e3:3e3)};x.useEffect(()=>{m()},[]);const m=async()=>{s(!0);try{const b=await fetch("/api/dbconfig",{method:"GET",headers:iu()});if(!b.ok)throw new Error("Failed to fetch database configuration");const v=await b.json();v.success&&v.data&&t({host:v.data.host||"localhost",port:v.data.port||5432,database:v.data.database||"asp_crm",user:v.data.user||"postgres",password:"",ssl:v.data.ssl||!1})}catch(b){console.error("Failed to fetch database config:",b),f("Failed to load database configuration","error")}finally{s(!1)}},p=b=>{const{name:v,value:w,type:S,checked:N}=b.target;t(k=>({...k,[v]:S==="checkbox"?N:S==="number"?parseInt(w)||0:w}))},g=async()=>{l(!0);try{const b=await fetch("/api/dbconfig",{method:"PUT",headers:iu(),body:JSON.stringify(e)}),v=await b.json();if(b.ok&&v.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(v.message||"Unknown error")}catch(b){console.error("Failed to save database config:",b),f(`Failed to save database configuration: ${b instanceof Error?b.message:"Unknown error"}`,"error")}finally{l(!1)}},y=async()=>{var b,v;i(!0),u("untested");try{const w=await fetch("/api/dbconfig/test",{method:"POST",headers:iu(),body:JSON.stringify(e)}),S=await w.json();w.ok&&S.success?(u("success"),f(`Connection successful! PostgreSQL ${((v=(b=S.data)==null?void 0:b.version)==null?void 0:v.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${S.message||"Unknown error"}`,"error"))}catch(w){console.error("Connection test error:",w),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?o.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),o.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),o.jsx(Ue,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:o.jsx(xA,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),o.jsx(Ue,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),o.jsx(Ue,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:o.jsx(sS,{className:"h-4 w-4"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),o.jsx(Ue,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),o.jsx(Ue,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsx("input",{type:"checkbox",id:"ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),o.jsx("label",{htmlFor:"ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[o.jsx(W,{variant:"outline",onClick:y,disabled:r,leftIcon:r?o.jsx(rt,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?o.jsx(K_,{className:"h-4 w-4 text-green-500"}):void 0,children:r?"Testing...":"Test Connection"}),o.jsx(W,{onClick:g,disabled:a,leftIcon:a?o.jsx(rt,{className:"h-4 w-4 animate-spin"}):o.jsx(Ni,{className:"h-4 w-4"}),children:a?"Saving...":"Save Configuration"})]}),d.show&&o.jsx(mt,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function SW(){const{user:e}=Qe();return!e||e.role!=="admin"&&e.role!=="operations_manager"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),o.jsx(hl,{className:"h-6 w-6 text-gray-400"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Ii,{icon:o.jsx(Ht,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:o.jsx(jW,{})}),o.jsx(Ii,{icon:o.jsx(us,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:o.jsx(gW,{})}),o.jsx(Ii,{icon:o.jsx(Ht,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:o.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),o.jsx(Ii,{icon:o.jsx(Yn,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:o.jsx(xW,{})}),o.jsx(Ii,{icon:o.jsx(Gg,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:o.jsx(yW,{})}),o.jsx(Ii,{icon:o.jsx(sS,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:o.jsx(NW,{})})]})]})}function CW(){const{user:e}=Qe(),[t,n]=x.useState([]),[s,r]=x.useState(""),[i,a]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(!0),[m,p]=x.useState({show:!1,title:""}),[g,y]=x.useState({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""});x.useEffect(()=>{b()},[]);const b=async()=>{try{const j=await Vk();j&&Array.isArray(j)?n(j):N("Error fetching customers: Invalid data format","error")}catch{N("Error fetching customers","error")}finally{f(!1)}},v=async j=>{if(j.preventDefault(),!g.name||!g.companyName||!g.contactName||!g.email||!g.phone||!g.address||!g.type){N("Please fill in all required fields","error");return}try{if(u){const C=await a8(u.id,g);C&&n(D=>D.map(E=>E.id===u.id?C:E)),N("Customer updated successfully","success")}else{const C=await Uk(g);n(D=>[...D,C]),N("Customer added successfully","success")}a(!1),S()}catch{N("Error saving customer","error")}},w=async()=>{if(u)try{await o8(u.id),n(j=>j.filter(C=>C.id!==u.id)),c(!1),d(null),N("Customer deleted successfully","success")}catch{N("Error deleting customer","error")}},S=()=>{y({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""}),d(null)},N=(j,C="success")=>{p({show:!0,title:j,variant:C}),setTimeout(()=>p({show:!1,title:""}),3e3)},k=t.filter(j=>j&&typeof j.name=="string"&&typeof j.email=="string"&&(j.name.toLowerCase().includes(s.toLowerCase())||j.email.toLowerCase().includes(s.toLowerCase())||j.companyName&&typeof j.companyName=="string"&&j.companyName.toLowerCase().includes(s.toLowerCase())));return!e||e.role!=="admin"&&e.role!=="sales_agent"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 max-w-md relative",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),o.jsx(me,{placeholder:"Search customers...",value:s,onChange:j=>r(j.target.value),className:"pl-10 w-full"})]}),o.jsx(W,{onClick:()=>{S(),a(!0)},leftIcon:o.jsx(ds,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Customer"})]}),o.jsx(ae,{children:o.jsx(le,{children:h?o.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):k.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(j=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.contactName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.companyName}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.designation||"N/A"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.type}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.email}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.phone}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j.address}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{d(j),y({name:j.name,companyName:j.companyName,contactName:j.contactName,email:j.email,phone:j.phone,address:j.address,type:j.type,designation:j.designation||"",notes:j.notes||""}),a(!0)},title:"Edit Customer",children:o.jsx(Pa,{className:"h-4 w-4"})}),o.jsx(W,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{d(j),c(!0)},title:"Delete Customer",children:o.jsx(Er,{className:"h-4 w-4"})})]})})]},j.id))})]})})})}),o.jsx(Ot,{isOpen:i,onClose:()=>{a(!1),S()},title:u?"Edit Customer":"Add New Customer",size:"lg",children:o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsx(me,{label:"Customer Name",value:g.name,onChange:j=>y(C=>({...C,name:j.target.value})),required:!0}),o.jsx(me,{label:"Company Name",value:g.companyName,onChange:j=>y(C=>({...C,companyName:j.target.value})),required:!0}),o.jsx(me,{label:"Contact Name",value:g.contactName,onChange:j=>y(C=>({...C,contactName:j.target.value})),required:!0}),o.jsx(me,{label:"Designation",value:g.designation,onChange:j=>y(C=>({...C,designation:j.target.value}))}),o.jsx(me,{label:"Type",value:g.type,onChange:j=>y(C=>({...C,type:j.target.value})),required:!0}),o.jsx(me,{label:"Email",type:"email",value:g.email,onChange:j=>y(C=>({...C,email:j.target.value})),required:!0}),o.jsx(me,{label:"Phone",value:g.phone,onChange:j=>y(C=>({...C,phone:j.target.value})),required:!0}),o.jsx(me,{label:"Address",value:g.address,onChange:j=>y(C=>({...C,address:j.target.value})),required:!0}),o.jsx(me,{label:"Notes",value:g.notes,onChange:j=>y(C=>({...C,notes:j.target.value}))}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{type:"button",variant:"outline",onClick:()=>{a(!1),S()},children:"Cancel"}),o.jsx(W,{type:"submit",variant:"accent",children:u?"Update Customer":"Add Customer"})]})]})}),o.jsx(Ot,{isOpen:l,onClose:()=>{c(!1),d(null)},title:"Delete Customer",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(W,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),o.jsx(W,{variant:"destructive",onClick:w,children:"Delete"})]})]})}),m.show&&o.jsx(mt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]})}function Bt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var kW=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ww=kW,Hw=()=>Math.random().toString(36).substring(7).split("").join("."),EW={INIT:`@@redux/INIT${Hw()}`,REPLACE:`@@redux/REPLACE${Hw()}`},qw=EW;function DW(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Xk(e,t,n){if(typeof e!="function")throw new Error(Bt(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Bt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Bt(1));return n(Xk)(e,t)}let s=e,r=t,i=new Map,a=i,l=0,c=!1;function u(){a===i&&(a=new Map,i.forEach((y,b)=>{a.set(b,y)}))}function d(){if(c)throw new Error(Bt(3));return r}function h(y){if(typeof y!="function")throw new Error(Bt(4));if(c)throw new Error(Bt(5));let b=!0;u();const v=l++;return a.set(v,y),function(){if(b){if(c)throw new Error(Bt(6));b=!1,u(),a.delete(v),i=null}}}function f(y){if(!DW(y))throw new Error(Bt(7));if(typeof y.type>"u")throw new Error(Bt(8));if(typeof y.type!="string")throw new Error(Bt(17));if(c)throw new Error(Bt(9));try{c=!0,r=s(r,y)}finally{c=!1}return(i=a).forEach(v=>{v()}),y}function m(y){if(typeof y!="function")throw new Error(Bt(10));s=y,f({type:qw.REPLACE})}function p(){const y=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Bt(11));function v(){const S=b;S.next&&S.next(d())}return v(),{unsubscribe:y(v)}},[Ww](){return this}}}return f({type:qw.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[Ww]:p}}function Gw(e,t){return function(...n){return t(e.apply(this,n))}}function Yw(e,t){if(typeof e=="function")return Gw(e,t);if(typeof e!="object"||e===null)throw new Error(Bt(16));const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=Gw(r,t))}return n}function Jk(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function TW(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(Bt(15))};const a={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(a));return i=Jk(...l)(r.dispatch),{...r,dispatch:i}}}var PW={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=x;function _W(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var AW=typeof Object.is=="function"?Object.is:_W,MW=Kl.useSyncExternalStore,RW=Kl.useRef,IW=Kl.useEffect,OW=Kl.useMemo,LW=Kl.useDebugValue;PW.useSyncExternalStoreWithSelector=function(e,t,n,s,r){var i=RW(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=OW(function(){function c(m){if(!u){if(u=!0,d=m,m=s(m),r!==void 0&&a.hasValue){var p=a.value;if(r(p,m))return h=p}return h=m}if(p=h,AW(d,m))return p;var g=s(m);return r!==void 0&&r(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,r]);var l=MW(e,i[0],i[1]);return IW(function(){a.hasValue=!0,a.value=l},[l]),LW(l),l};var FW=x.version.startsWith("19"),$W=Symbol.for(FW?"react.transitional.element":"react.element"),BW=Symbol.for("react.portal"),zW=Symbol.for("react.fragment"),VW=Symbol.for("react.strict_mode"),UW=Symbol.for("react.profiler"),WW=Symbol.for("react.consumer"),HW=Symbol.for("react.context"),Zk=Symbol.for("react.forward_ref"),qW=Symbol.for("react.suspense"),GW=Symbol.for("react.suspense_list"),Ux=Symbol.for("react.memo"),YW=Symbol.for("react.lazy"),QW=Zk,KW=Ux;function XW(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case $W:switch(e=e.type,e){case zW:case UW:case VW:case qW:case GW:return e;default:switch(e=e&&e.$$typeof,e){case HW:case Zk:case YW:case Ux:return e;case WW:return e;default:return t}}case BW:return t}}}function JW(e){return XW(e)===Ux}function ZW(e,t,n,s,{areStatesEqual:r,areOwnPropsEqual:i,areStatePropsEqual:a}){let l=!1,c,u,d,h,f;function m(v,w){return c=v,u=w,d=e(c,u),h=t(s,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function g(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(s,u)),f=n(d,h,u),f}function y(){const v=e(c,u),w=!a(v,d);return d=v,w&&(f=n(d,h,u)),f}function b(v,w){const S=!i(w,u),N=!r(v,c,w,u);return c=v,u=w,S&&N?p():S?g():N?y():f}return function(w,S){return l?b(w,S):m(w,S)}}function e7(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...r}){const i=t(e,r),a=n(e,r),l=s(e,r);return ZW(i,a,l,e,r)}function t7(e,t){const n={};for(const s in e){const r=e[s];typeof r=="function"&&(n[s]=(...i)=>t(r(...i)))}return n}function Ip(e){return function(n){const s=e(n);function r(){return s}return r.dependsOnOwnProps=!1,r}}function Qw(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function eE(e,t){return function(s,{displayName:r}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=Qw(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=Qw(u),u=i(l,c)),u},i}}function Wx(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function n7(e){return e&&typeof e=="object"?Ip(t=>t7(e,t)):e?typeof e=="function"?eE(e):Wx(e,"mapDispatchToProps"):Ip(t=>({dispatch:t}))}function s7(e){return e?typeof e=="function"?eE(e):Wx(e,"mapStateToProps"):Ip(()=>({}))}function r7(e,t,n){return{...n,...e,...t}}function i7(e){return function(n,{displayName:s,areMergedPropsEqual:r}){let i=!1,a;return function(c,u,d){const h=e(c,u,d);return i?r(h,a)||(a=h):(i=!0,a=h),a}}}function a7(e){return e?typeof e=="function"?i7(e):Wx(e,"mergeProps"):()=>r7}function o7(e){e()}function l7(){let e=null,t=null;return{clear(){e=null,t=null},notify(){o7(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var Kw={notify(){},get:()=>[]};function tE(e,t){let n,s=Kw,r=0,i=!1;function a(g){d();const y=s.subscribe(g);let b=!1;return()=>{b||(b=!0,y(),h())}}function l(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){r++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=l7())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=Kw)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>s};return p}var c7=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u7=c7(),d7=()=>typeof navigator<"u"&&navigator.product==="ReactNative",h7=d7(),f7=()=>u7||h7?x.useLayoutEffect:x.useEffect,pd=f7();function Xw(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Vf(e,t){if(Xw(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Xw(e[n[r]],t[n[r]]))return!1;return!0}var m7={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},p7={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g7={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},x7={[QW]:g7,[KW]:nE};function Jw(e){return JW(e)?nE:x7[e.$$typeof]||m7}var y7=Object.defineProperty,v7=Object.getOwnPropertyNames,Zw=Object.getOwnPropertySymbols,b7=Object.getOwnPropertyDescriptor,w7=Object.getPrototypeOf,e1=Object.prototype;function Op(e,t){if(typeof t!="string"){if(e1){const i=w7(t);i&&i!==e1&&Op(e,i)}let n=v7(t);Zw&&(n=n.concat(Zw(t)));const s=Jw(e),r=Jw(t);for(let i=0;i<n.length;++i){const a=n[i];if(!p7[a]&&!(r&&r[a])&&!(s&&s[a])){const l=b7(t,a);try{y7(e,a,l)}catch{}}}}return e}var Uf=Symbol.for("react-redux-context"),Wf=typeof globalThis<"u"?globalThis:{};function j7(){if(!x.createContext)return{};const e=Wf[Uf]??(Wf[Uf]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var sE=j7(),N7=[null,null];function S7(e,t,n){pd(()=>e(...t),n)}function C7(e,t,n,s,r,i){e.current=s,n.current=!1,r.current&&(r.current=null,i())}function k7(e,t,n,s,r,i,a,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const g=t.getState();let y,b;try{y=s(g,r.current)}catch(v){b=v,f=v}b||(f=null),y===i.current?a.current||u():(i.current=y,c.current=y,a.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function E7(e,t){return e===t}function D7(e,t,n,{pure:s,areStatesEqual:r=E7,areOwnPropsEqual:i=Vf,areStatePropsEqual:a=Vf,areMergedPropsEqual:l=Vf,forwardRef:c=!1,context:u=sE}={}){const d=u,h=s7(e),f=n7(t),m=a7(n),p=!!e;return y=>{const b=y.displayName||y.name||"Component",v=`Connect(${b})`,w={shouldHandleStateChanges:p,displayName:v,wrappedComponentName:b,WrappedComponent:y,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:r,areStatePropsEqual:a,areOwnPropsEqual:i,areMergedPropsEqual:l};function S(j){const[C,D,E]=x.useMemo(()=>{const{reactReduxForwardedRef:I,...Q}=j;return[j.context,I,Q]},[j]),O=x.useMemo(()=>{let I=d;return C!=null&&C.Consumer,I},[C,d]),F=x.useContext(O),L=!!j.store&&!!j.store.getState&&!!j.store.dispatch,P=!!F&&!!F.store,B=L?j.store:F.store,V=P?F.getServerState:B.getState,R=x.useMemo(()=>e7(B.dispatch,w),[B]),[T,M]=x.useMemo(()=>{if(!p)return N7;const I=tE(B,L?void 0:F.subscription),Q=I.notifyNestedSubs.bind(I);return[I,Q]},[B,L,F]),U=x.useMemo(()=>L?F:{...F,subscription:T},[L,F,T]),H=x.useRef(void 0),Z=x.useRef(E),oe=x.useRef(void 0),ue=x.useRef(!1),ve=x.useRef(!1),Ne=x.useRef(void 0);pd(()=>(ve.current=!0,()=>{ve.current=!1}),[]);const A=x.useMemo(()=>()=>oe.current&&E===Z.current?oe.current:R(B.getState(),E),[B,E]),q=x.useMemo(()=>Q=>T?k7(p,B,T,R,Z,H,ue,ve,oe,M,Q):()=>{},[T]);S7(C7,[Z,H,ue,E,oe,M]);let G;try{G=x.useSyncExternalStore(q,A,V?()=>R(V(),E):A)}catch(I){throw Ne.current&&(I.message+=`
The error may be correlated with this previous error:
${Ne.current.stack}

`),I}pd(()=>{Ne.current=void 0,oe.current=void 0,H.current=G});const ie=x.useMemo(()=>x.createElement(y,{...G,ref:D}),[D,y,G]);return x.useMemo(()=>p?x.createElement(O.Provider,{value:U},ie):ie,[O,ie,U])}const k=x.memo(S);if(k.WrappedComponent=y,k.displayName=S.displayName=v,c){const C=x.forwardRef(function(E,O){return x.createElement(k,{...E,reactReduxForwardedRef:O})});return C.displayName=v,C.WrappedComponent=y,Op(C,y)}return Op(k,y)}}var rE=D7;function T7(e){const{children:t,context:n,serverState:s,store:r}=e,i=x.useMemo(()=>{const c=tE(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),a=x.useMemo(()=>r.getState(),[r]);pd(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,a]);const l=n||sE;return x.createElement(l.Provider,{value:i},t)}var P7=T7,_7="Invariant failed";function A7(e,t){throw new Error(_7)}var Hn=function(t){var n=t.top,s=t.right,r=t.bottom,i=t.left,a=s-i,l=r-n,c={top:n,right:s,bottom:r,left:i,width:a,height:l,x:i,y:n,center:{x:(s+i)/2,y:(r+n)/2}};return c},Hx=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},t1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},M7=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Hf={top:0,right:0,bottom:0,left:0},qx=function(t){var n=t.borderBox,s=t.margin,r=s===void 0?Hf:s,i=t.border,a=i===void 0?Hf:i,l=t.padding,c=l===void 0?Hf:l,u=Hn(Hx(n,r)),d=Hn(t1(n,a)),h=Hn(t1(d,c));return{marginBox:u,borderBox:Hn(n),paddingBox:d,contentBox:h,margin:r,border:a,padding:c}},jn=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var r=Number(n);return isNaN(r)&&A7(),r},R7=function(){return{x:window.pageXOffset,y:window.pageYOffset}},gd=function(t,n){var s=t.borderBox,r=t.border,i=t.margin,a=t.padding,l=M7(s,n);return qx({borderBox:l,border:r,margin:i,padding:a})},xd=function(t,n){return n===void 0&&(n=R7()),gd(t,n)},iE=function(t,n){var s={top:jn(n.marginTop),right:jn(n.marginRight),bottom:jn(n.marginBottom),left:jn(n.marginLeft)},r={top:jn(n.paddingTop),right:jn(n.paddingRight),bottom:jn(n.paddingBottom),left:jn(n.paddingLeft)},i={top:jn(n.borderTopWidth),right:jn(n.borderRightWidth),bottom:jn(n.borderBottomWidth),left:jn(n.borderLeftWidth)};return qx({borderBox:t,margin:s,padding:r,border:i})},aE=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return iE(n,s)},Cl=function(t){var n=[],s=null,r=function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return r.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},r};function yd(){return yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yd.apply(null,arguments)}function oE(e,t){}oE.bind(null,"warn");oE.bind(null,"error");function Nr(){}function I7(e,t){return{...e,...t}}function Pn(e,t,n){const s=t.map(r=>{const i=I7(n,r.options);return e.addEventListener(r.eventName,r.fn,i),function(){e.removeEventListener(r.eventName,r.fn,i)}});return function(){s.forEach(i=>{i()})}}const O7="Invariant failed";class vd extends Error{}vd.prototype.toString=function(){return this.message};function J(e,t){throw new vd(O7)}class L7 extends se.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Nr,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof vd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Pn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof vd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const F7=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,bd=e=>e+1,$7=e=>`
  You have lifted an item in position ${bd(e.source.index)}
`,lE=(e,t)=>{const n=e.droppableId===t.droppableId,s=bd(e.index),r=bd(t.index);return n?`
      You have moved the item from position ${s}
      to position ${r}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${r}
  `},cE=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,B7=e=>{const t=e.destination;if(t)return lE(e.source,t);const n=e.combine;return n?cE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},n1=e=>`
  The item has returned to its starting position
  of ${bd(e.index)}
`,z7=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${n1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${lE(e.source,t)}
    `:n?`
      You have dropped the item.
      ${cE(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${n1(e.source)}
  `},mu={dragHandleUsageInstructions:F7,onDragStart:$7,onDragUpdate:B7,onDragEnd:z7};function V7(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function uE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!V7(e[n],t[n]))return!1;return!0}function De(e,t){const n=x.useState(()=>({inputs:t,result:e()}))[0],s=x.useRef(!0),r=x.useRef(n),a=s.current||!!(t&&r.current.inputs&&uE(t,r.current.inputs))?r.current:{inputs:t,result:e()};return x.useEffect(()=>{s.current=!1,r.current=a},[a]),a.result}function pe(e,t){return De(()=>e,t)}const jt={x:0,y:0},St=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),un=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Sr=(e,t)=>e.x===t.x&&e.y===t.y,$a=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),vi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},kl=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),s1=(e,t)=>Math.min(...t.map(n=>kl(e,n))),dE=e=>t=>({x:e(t.x),y:e(t.y)});var U7=(e,t)=>{const n=Hn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Xl=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),r1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],W7={top:0,right:0,bottom:0,left:0},H7=(e,t)=>t?Xl(e,t.scroll.diff.displacement):e,q7=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,G7=(e,t)=>t&&t.shouldClipSubject?U7(t.pageMarginBox,e):Hn(e);var ja=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const r=H7(e.marginBox,s),i=q7(r,n,t),a=G7(i,s);return{page:e,withPlaceholder:t,active:a}},Gx=(e,t)=>{e.frame||J();const n=e.frame,s=un(t,n.scroll.initial),r=$a(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:r},max:n.scroll.max}},a=ja({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:a}};function wt(e,t=uE){let n=null;function s(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;const i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return s.clear=function(){n=null},s}const hE=wt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),fE=wt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),hh=wt(e=>Object.values(e)),Y7=wt(e=>Object.values(e));var Ba=wt((e,t)=>Y7(t).filter(s=>e===s.descriptor.droppableId).sort((s,r)=>s.descriptor.index-r.descriptor.index));function Yx(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function fh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var mh=wt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Q7=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:r})=>{if(!n.isCombineEnabled||!Yx(r))return null;function a(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...r,at:p}}const l=r.displaced.all,c=l.length?l[0]:null;if(e)return c?a(c):null;const u=mh(t,s);if(!c){if(!u.length)return null;const m=u[u.length-1];return a(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&J();const h=d-1;if(h<0)return null;const f=u[h];return a(f.descriptor.id)},za=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const mE={point:jt,value:0},El={invisible:{},visible:{},all:[]},K7={displaced:El,displacedBy:mE,at:null};var An=(e,t)=>n=>e<=n&&n<=t,pE=e=>{const t=An(e.top,e.bottom),n=An(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),a=n(s.left)||n(s.right);if(i&&a)return!0;const c=s.top<e.top&&s.bottom>e.bottom,u=s.left<e.left&&s.right>e.right;return c&&u?!0:c&&a||u&&i}},X7=e=>{const t=An(e.top,e.bottom),n=An(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const Qx={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},gE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var J7=e=>t=>{const n=An(t.top,t.bottom),s=An(t.left,t.right);return r=>e===Qx?n(r.top)&&n(r.bottom):s(r.left)&&s(r.right)};const Z7=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:jt;return Xl(e,n)},eH=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,tH=(e,t,n)=>n(t)(e),Kx=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:r})=>{const i=s?Z7(e,t):e;return eH(i,t,r)&&tH(i,n,r)},nH=e=>Kx({...e,isVisibleThroughFrameFn:pE}),xE=e=>Kx({...e,isVisibleThroughFrameFn:X7}),sH=e=>Kx({...e,isVisibleThroughFrameFn:J7(e.destination.axis)}),rH=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:r}=t;if(s[e])return!1;const i=r[e];return i?i.shouldAnimate:!0};function iH(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Hn(Hx(n,s))}function Dl({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:r,last:i}){return e.reduce(function(l,c){const u=iH(c,n),d=c.descriptor.id;if(l.all.push(d),!nH({target:u,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=rH(d,i,r),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function aH(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function i1({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const r=aH(e,{inHomeList:t});return{displaced:El,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:r}}}}function wd({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:r,last:i,index:a,forceShouldAnimate:l}){const c=za(e,n);if(a==null)return i1({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const u=t.find(p=>p.descriptor.index===a);if(!u)return i1({insideDestination:t,inHomeList:c,displacedBy:r,destination:n});const d=mh(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:Dl({afterDragging:f,destination:n,displacedBy:r,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function _r(e,t){return!!t.effected[e]}var oH=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:r})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return _r(i,r)?e?l:l-1:e?l+1:l},lH=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const r=s.index,i=e?r+1:r-1,a=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<a||i>c?null:i},cH=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:r,insideDestination:i,previousImpact:a,viewport:l,afterCritical:c})=>{const u=a.at;if(u||J(),u.type==="REORDER"){const h=lH({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:wd({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:h})}const d=oH({isMovingForward:e,destination:r,displaced:a.displaced,draggables:s,combine:u.combine,afterCritical:c});return d==null?null:wd({draggable:n,insideDestination:i,destination:r,viewport:l,last:a.displaced,displacedBy:a.displacedBy,index:d})},uH=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const r=!!(e.visible[n]||e.invisible[n]);return _r(n,t)?r?jt:$a(s.point):r?s.point:jt},dH=({afterCritical:e,impact:t,draggables:n})=>{const s=fh(t);s||J();const r=s.draggableId,i=n[r].page.borderBox.center,a=uH({displaced:t.displaced,afterCritical:e,combineWith:r,displacedBy:t.displacedBy});return St(i,a)};const yE=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,hH=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Xx=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,a1=({axis:e,moveRelativeTo:t,isMoving:n})=>vi(e.line,t.marginBox[e.end]+yE(e,n),Xx(e,t.marginBox,n)),o1=({axis:e,moveRelativeTo:t,isMoving:n})=>vi(e.line,t.marginBox[e.start]-hH(e,n),Xx(e,t.marginBox,n)),fH=({axis:e,moveInto:t,isMoving:n})=>vi(e.line,t.contentBox[e.start]+yE(e,n),Xx(e,t.contentBox,n));var mH=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:r})=>{const i=Ba(s.descriptor.id,n),a=t.page,l=s.axis;if(!i.length)return fH({axis:l,moveInto:s.page,isMoving:a});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(_r(d,r))return o1({axis:l,moveRelativeTo:f.page,isMoving:a});const m=gd(f.page,u.point);return o1({axis:l,moveRelativeTo:m,isMoving:a})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return a.borderBox.center;if(_r(h.descriptor.id,r)){const f=gd(h.page,$a(r.displacedBy.point));return a1({axis:l,moveRelativeTo:f,isMoving:a})}return a1({axis:l,moveRelativeTo:h.page,isMoving:a})},Lp=(e,t)=>{const n=e.frame;return n?St(t,n.scroll.diff.displacement):t};const pH=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:r})=>{const i=t.page.borderBox.center,a=e.at;return!n||!a?i:a.type==="REORDER"?mH({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:r}):dH({impact:e,draggables:s,afterCritical:r})};var ph=e=>{const t=pH(e),n=e.droppable;return n?Lp(n,t):t},vE=(e,t)=>{const n=un(t,e.scroll.initial),s=$a(n);return{frame:Hn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function l1(e,t){return e.map(n=>t[n])}function gH(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var xH=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:r})=>{const i=vE(t,St(t.scroll.current,r)),a=n.frame?Gx(n,St(n.frame.scroll.current,r)):n,l=e.displaced,c=Dl({afterDragging:l1(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=Dl({afterDragging:l1(l.all,s),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const g=gH(p,f);if(g){h[p]=g;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},yH=(e,t)=>St(e.scroll.diff.displacement,t),Jx=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=yH(n,e),r=un(s,t.page.borderBox.center);return St(t.client.borderBox.center,r)},bE=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:r,onlyOnMainAxis:i=!1})=>{const a=un(n,e.page.borderBox.center),c={target:Xl(e.page.borderBox,a),destination:t,withDroppableDisplacement:r,viewport:s};return i?sH(c):xE(c)},vH=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:r,viewport:i,previousPageBorderBoxCenter:a,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=Ba(n.descriptor.id,s),d=za(t,n),h=Q7({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:r})||cH({isMovingForward:e,isInHomeList:d,draggable:t,draggables:s,destination:n,insideDestination:u,previousImpact:r,viewport:i,afterCritical:c});if(!h)return null;const f=ph({impact:h,draggable:t,droppable:n,draggables:s,afterCritical:c});if(bE({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Jx({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=un(f,a),g=xH({impact:h,viewport:i,destination:n,draggables:s,maxScrollChange:p});return{clientSelection:l,impact:g,scrollJumpRequest:p}};const $t=e=>{const t=e.subject.active;return t||J(),t};var bH=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:r})=>{const i=n.subject.active;if(!i)return null;const a=n.axis,l=An(i[a.start],i[a.end]),c=hh(s).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>pE(r.frame)($t(d))).filter(d=>{const h=$t(d);return e?i[a.crossAxisEnd]<h[a.crossAxisEnd]:h[a.crossAxisStart]<i[a.crossAxisStart]}).filter(d=>{const h=$t(d),f=An(h[a.start],h[a.end]);return l(h[a.start])||l(h[a.end])||f(i[a.start])||f(i[a.end])}).sort((d,h)=>{const f=$t(d)[a.crossAxisStart],m=$t(h)[a.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>$t(d)[a.crossAxisStart]===$t(f[0])[a.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>An($t(d)[a.start],$t(d)[a.end])(t[a.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>$t(d)[a.start]-$t(h)[a.start])[0]:c.sort((d,h)=>{const f=s1(t,r1($t(d))),m=s1(t,r1($t(h)));return f!==m?f-m:$t(d)[a.start]-$t(h)[a.start]})[0]};const c1=(e,t)=>{const n=e.page.borderBox.center;return _r(e.descriptor.id,t)?un(n,t.displacedBy.point):n},wH=(e,t)=>{const n=e.page.borderBox;return _r(e.descriptor.id,t)?Xl(n,$a(t.displacedBy.point)):n};var jH=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:r})=>s.filter(a=>xE({target:wH(a,r),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((a,l)=>{const c=kl(e,Lp(n,c1(a,r))),u=kl(e,Lp(n,c1(l,r)));return c<u?-1:u<c?1:a.descriptor.index-l.descriptor.index})[0]||null,Jl=wt(function(t,n){const s=n[t.line];return{value:s,point:vi(t.line,s)}});const NH=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return vi(s.line,t[s.line]);const r=e.subject.page.contentBox[s.size],c=Ba(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[s.size],0)+t[s.line]-r;return c<=0?null:vi(s.line,c)},wE=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),jE=(e,t,n)=>{const s=e.frame;za(t,e)&&J(),e.subject.withPlaceholder&&J();const r=Jl(e.axis,t.displaceBy).point,i=NH(e,r,n),a={placeholderSize:r,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const d=ja({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?St(s.scroll.max,i):s.scroll.max,c=wE(s,l),u=ja({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},SH=e=>{const t=e.subject.withPlaceholder;t||J();const n=e.frame;if(!n){const a=ja({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:a}}const s=t.oldFrameMaxScroll;s||J();const r=wE(n,s),i=ja({page:e.subject.page,axis:e.axis,frame:r,withPlaceholder:null});return{...e,subject:i,frame:r}};var CH=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:r,destination:i,viewport:a,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:El,displacedBy:mE,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=ph({impact:h,draggable:s,droppable:i,draggables:r,afterCritical:l}),m=za(s,i)?i:jE(i,s,r);return bE({draggable:s,destination:m,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?h:h+1})(),d=Jl(i.axis,s.displaceBy);return wd({draggable:s,insideDestination:n,destination:i,viewport:a,displacedBy:d,last:El,index:u})},kH=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:r,droppables:i,viewport:a,afterCritical:l})=>{const c=bH({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:a});if(!c)return null;const u=Ba(c.descriptor.id,r),d=jH({pageBorderBoxCenter:t,viewport:a,destination:c,insideDestination:u,afterCritical:l}),h=CH({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:r,moveRelativeTo:d,insideDestination:u,viewport:a,afterCritical:l});if(!h)return null;const f=ph({impact:h,draggable:n,droppable:c,draggables:r,afterCritical:l});return{clientSelection:Jx({pageBorderBoxCenter:f,draggable:n,viewport:a}),impact:h,scrollJumpRequest:null}},fn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const EH=(e,t)=>{const n=fn(e);return n?t[n]:null};var DH=({state:e,type:t})=>{const n=EH(e.impact,e.dimensions.droppables),s=!!n,r=e.dimensions.droppables[e.critical.droppable.id],i=n||r,a=i.axis.direction,l=a==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||a==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?vH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):kH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Jr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function NE(e){const t=An(e.top,e.bottom),n=An(e.left,e.right);return function(r){return t(r.y)&&n(r.x)}}function TH(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function PH({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,r=n.map(i=>{const a=i.axis,l=vi(i.axis.line,e.center[a.line],i.page.borderBox.center[a.crossAxisLine]);return{id:i.descriptor.id,distance:kl(s,l)}}).sort((i,a)=>a.distance-i.distance);return r[0]?r[0].id:null}function _H({pageBorderBox:e,draggable:t,droppables:n}){const s=hh(n).filter(r=>{if(!r.isEnabled)return!1;const i=r.subject.active;if(!i||!TH(e,i))return!1;if(NE(i)(e.center))return!0;const a=r.axis,l=i.center[a.crossAxisLine],c=e[a.crossAxisStart],u=e[a.crossAxisEnd],d=An(i[a.crossAxisStart],i[a.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return s.length?s.length===1?s[0].descriptor.id:PH({pageBorderBox:e,draggable:t,candidates:s}):null}const SE=(e,t)=>Hn(Xl(e,t));var AH=(e,t)=>{const n=e.frame;return n?SE(t,n.scroll.diff.value):t};function CE({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function MH({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var RH=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:r,viewport:i,afterCritical:a})=>{const l=n.axis,c=Jl(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=mh(t,s).find(g=>{const y=g.descriptor.id,b=g.page.borderBox.center[l.line],v=_r(y,a),w=CE({displaced:r,id:y});return v?w?h<=b:d<b-u:w?h<=b+u:d<b})||null,p=MH({draggable:t,closest:m,inHomeList:za(t,n)});return wd({draggable:t,insideDestination:s,destination:n,viewport:i,last:r,displacedBy:c,index:p})};const IH=4;var OH=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:r,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const a=s.axis,l=Jl(s.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],f=mh(e,r).find(p=>{const g=p.descriptor.id,y=p.page.borderBox,v=y[a.size]/IH,w=_r(g,i),S=CE({displaced:n.displaced,id:g});return w?S?d>y[a.start]+v&&d<y[a.end]-v:u>y[a.start]-c+v&&u<y[a.end]-c-v:S?d>y[a.start]+c+v&&d<y[a.end]+c-v:u>y[a.start]+v&&u<y[a.end]-v});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:s.descriptor.id}}}:null},kE=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:r,viewport:i,afterCritical:a})=>{const l=SE(t.page.borderBox,e),c=_H({pageBorderBox:l,draggable:t,droppables:s});if(!c)return K7;const u=s[c],d=Ba(u.descriptor.id,n),h=AH(u,l);return OH({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:r,destination:u,insideDestination:d,afterCritical:a})||RH({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:r.displaced,viewport:i,afterCritical:a})},Zx=(e,t)=>({...e,[t.descriptor.id]:t});const LH=({previousImpact:e,impact:t,droppables:n})=>{const s=fn(e),r=fn(t);if(!s||s===r)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const a=SH(i);return Zx(n,a)};var FH=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:r})=>{const i=LH({previousImpact:s,impact:r,droppables:n}),a=fn(r);if(!a)return i;const l=n[a];if(za(e,l)||l.subject.withPlaceholder)return i;const c=jE(l,e,t);return Zx(i,c)},Ho=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:r,scrollJumpRequest:i})=>{const a=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=un(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:St(e.initial.client.borderBoxCenter,u)},h={selection:St(d.selection,a.scroll.current),borderBoxCenter:St(d.borderBoxCenter,a.scroll.current),offset:St(d.offset,a.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:a,current:f};const m=l.draggables[e.critical.draggable.id],p=r||kE({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),g=FH({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:g},impact:p,viewport:a,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function $H(e,t){return e.map(n=>t[n])}var EE=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:r})=>{const i=e.displaced,a=$H(i.all,n),l=Dl({afterDragging:a,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:r,last:i});return{...e,displaced:l}},DE=({impact:e,draggable:t,droppable:n,draggables:s,viewport:r,afterCritical:i})=>{const a=ph({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return Jx({pageBorderBoxCenter:a,draggable:t,viewport:r})},TE=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&J();const s=e.impact,r=n||e.viewport,i=t||e.dimensions,{draggables:a,droppables:l}=i,c=a[e.critical.draggable.id],u=fn(s);u||J();const d=l[u],h=EE({impact:s,viewport:r,destination:d,draggables:a}),f=DE({impact:h,draggable:c,droppable:d,draggables:a,viewport:r,afterCritical:e.afterCritical});return Ho({impact:h,clientSelection:f,state:e,dimensions:i,viewport:r})},BH=e=>({index:e.index,droppableId:e.droppableId}),PE=({draggable:e,home:t,draggables:n,viewport:s})=>{const r=Jl(t.axis,e.displaceBy),i=Ba(t.descriptor.id,n),a=i.indexOf(e);a===-1&&J();const l=i.slice(a+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:r,effected:c};return{impact:{displaced:Dl({afterDragging:l,destination:t,displacedBy:r,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:BH(e.descriptor)}},afterCritical:u}},zH=(e,t)=>({draggables:e.draggables,droppables:Zx(e.droppables,t)}),VH=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=gd(e.client,t),r=xd(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:r}},UH=e=>{const t=e.frame;return t||J(),t},WH=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(r=>{const i=r.descriptor.droppableId,a=t[i],c=UH(a).scroll.diff.value,u=St(s,c);return VH({draggable:r,offset:u,initialWindowScroll:n.scroll.initial})})},HH=({state:e,published:t})=>{const n=t.modified.map(b=>{const v=e.dimensions.droppables[b.droppableId];return Gx(v,b.scroll)}),s={...e.dimensions.droppables,...hE(n)},r=fE(WH({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...r};t.removals.forEach(b=>{delete i[b]});const a={droppables:s,draggables:i},l=fn(e.impact),c=l?a.droppables[l]:null,u=a.draggables[e.critical.draggable.id],d=a.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=PE({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=kE({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),g={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:a,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Fp=e=>e.movementMode==="SNAP",qf=(e,t,n)=>{const s=zH(e.dimensions,t);return!Fp(e)||n?Ho({state:e,dimensions:s}):TE({state:e,dimensions:s})};function Gf(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const u1={phase:"IDLE",completed:null,shouldFlush:!1};var qH=(e=u1,t)=>{if(t.type==="FLUSH")return{...u1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&J();const{critical:n,clientSelection:s,viewport:r,dimensions:i,movementMode:a}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:s,borderBoxCenter:l.client.borderBox.center,offset:jt},d={client:u,page:{selection:St(u.selection,r.scroll.initial),borderBoxCenter:St(u.selection,r.scroll.initial),offset:St(u.selection,r.scroll.diff.value)}},h=hh(i.droppables).every(g=>!g.isFixedOnPage),{impact:f,afterCritical:m}=PE({draggable:l,home:c,draggables:i.draggables,viewport:r});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:a,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&J(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||J(),HH({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Jr(e)||J();const{client:n}=t.payload;return Sr(n,e.current.client.selection)?e:Ho({state:e,clientSelection:n,impact:Fp(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Gf(e);Jr(e)||J();const{id:n,newScroll:s}=t.payload,r=e.dimensions.droppables[n];if(!r)return e;const i=Gx(r,s);return qf(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Jr(e)||J();const{id:n,isEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||J(),r.isEnabled===s&&J();const i={...r,isEnabled:s};return qf(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Jr(e)||J();const{id:n,isCombineEnabled:s}=t.payload,r=e.dimensions.droppables[n];r||J(),r.isCombineEnabled===s&&J();const i={...r,isCombineEnabled:s};return qf(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Jr(e)||J(),e.isWindowScrollAllowed||J();const n=t.payload.newScroll;if(Sr(e.viewport.scroll.current,n))return Gf(e);const s=vE(e.viewport,n);return Fp(e)?TE({state:e,viewport:s}):Ho({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Jr(e))return e;const n=t.payload.maxScroll;if(Sr(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&J();const n=DH({state:e,type:t.type});return n?Ho({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&J(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:r}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||J(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:r,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ae(e,t){return e instanceof Object&&"type"in e&&e.type===t}const GH=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),YH=e=>({type:"LIFT",payload:e}),QH=e=>({type:"INITIAL_PUBLISH",payload:e}),KH=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),XH=()=>({type:"COLLECTION_STARTING",payload:null}),JH=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),ZH=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),eq=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),_E=e=>({type:"MOVE",payload:e}),tq=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),nq=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),sq=()=>({type:"MOVE_UP",payload:null}),rq=()=>({type:"MOVE_DOWN",payload:null}),iq=()=>({type:"MOVE_RIGHT",payload:null}),aq=()=>({type:"MOVE_LEFT",payload:null}),ey=()=>({type:"FLUSH",payload:null}),oq=e=>({type:"DROP_ANIMATE",payload:e}),ty=e=>({type:"DROP_COMPLETE",payload:e}),AE=e=>({type:"DROP",payload:e}),lq=e=>({type:"DROP_PENDING",payload:e}),ME=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var cq=e=>({getState:t,dispatch:n})=>s=>r=>{if(!Ae(r,"LIFT")){s(r);return}const{id:i,clientSelection:a,movementMode:l}=r.payload,c=t();c.phase==="DROP_ANIMATING"&&n(ty({completed:c.completed})),t().phase!=="IDLE"&&J(),n(ey()),n(GH({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(QH({critical:h,dimensions:f,clientSelection:a,movementMode:l,viewport:m}))},uq=e=>()=>t=>n=>{Ae(n,"INITIAL_PUBLISH")&&e.dragging(),Ae(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ae(n,"FLUSH")||Ae(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const ny={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Tl={opacity:{drop:0,combining:.7},scale:{drop:.75}},RE={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ur=`${RE.outOfTheWay}s ${ny.outOfTheWay}`,qo={fluid:`opacity ${Ur}`,snap:`transform ${Ur}, opacity ${Ur}`,drop:e=>{const t=`${e}s ${ny.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Ur}`,placeholder:`height ${Ur}, width ${Ur}, margin ${Ur}`},d1=e=>Sr(e,jt)?void 0:`translate(${e.x}px, ${e.y}px)`,$p={moveTo:d1,drop:(e,t)=>{const n=d1(e);if(n)return t?`${n} scale(${Tl.scale.drop})`:n}},{minDropTime:Bp,maxDropTime:IE}=RE,dq=IE-Bp,h1=1500,hq=.6;var fq=({current:e,destination:t,reason:n})=>{const s=kl(e,t);if(s<=0)return Bp;if(s>=h1)return IE;const r=s/h1,i=Bp+dq*r,a=n==="CANCEL"?i*hq:i;return Number(a.toFixed(2))},mq=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:r})=>{const{draggables:i,droppables:a}=n,l=fn(e),c=l?a[l]:null,u=a[t.descriptor.droppableId],d=DE({impact:e,draggable:t,draggables:i,afterCritical:r,droppable:c||u,viewport:s});return un(d,t.client.borderBox.center)},pq=({draggables:e,reason:t,lastImpact:n,home:s,viewport:r,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:EE({draggables:e,impact:i,destination:s,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:El},didDropInsideDroppable:!0};const gq=({getState:e,dispatch:t})=>n=>s=>{if(!Ae(s,"DROP")){n(s);return}const r=e(),i=s.payload.reason;if(r.phase==="COLLECTING"){t(lq({reason:i}));return}if(r.phase==="IDLE")return;r.phase==="DROP_PENDING"&&r.isWaiting&&J(),r.phase==="DRAGGING"||r.phase==="DROP_PENDING"||J();const l=r.critical,c=r.dimensions,u=c.draggables[r.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=pq({reason:i,lastImpact:r.impact,afterCritical:r.afterCritical,onLiftImpact:r.onLiftImpact,home:r.dimensions.droppables[r.critical.droppable.id],viewport:r.viewport,draggables:r.dimensions.draggables}),f=h?Yx(d):null,m=h?fh(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:r.movementMode,destination:f,combine:m},y=mq({impact:d,draggable:u,dimensions:c,viewport:r.viewport,afterCritical:r.afterCritical}),b={critical:r.critical,afterCritical:r.afterCritical,result:g,impact:d};if(!(!Sr(r.current.client.offset,y)||!!g.combine)){t(ty({completed:b}));return}const w=fq({current:r.current.client.offset,destination:y,reason:i});t(oq({newHomeClientOffset:y,dropDuration:w,completed:b}))};var OE=()=>({x:window.pageXOffset,y:window.pageYOffset});function xq(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function yq({onWindowScroll:e}){function t(){e(OE())}const n=Cl(t),s=xq(n);let r=Nr;function i(){return r!==Nr}function a(){i()&&J(),r=Pn(window,[s])}function l(){i()||J(),n.cancel(),r(),r=Nr}return{start:a,stop:l,isActive:i}}const vq=e=>Ae(e,"DROP_COMPLETE")||Ae(e,"DROP_ANIMATE")||Ae(e,"FLUSH"),bq=e=>{const t=yq({onWindowScroll:n=>{e.dispatch(tq({newScroll:n}))}});return n=>s=>{!t.isActive()&&Ae(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&vq(s)&&t.stop(),n(s)}};var wq=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),r=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return r.wasCalled=()=>t,r},jq=()=>{const e=[],t=r=>{const i=e.findIndex(l=>l.timerId===r);i===-1&&J();const[a]=e.splice(i,1);a.callback()};return{add:r=>{const i=setTimeout(()=>t(i)),a={timerId:i,callback:r};e.push(a)},flush:()=>{if(!e.length)return;const r=[...e];e.length=0,r.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const Nq=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Sq=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Cq=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},mo=(e,t)=>{t()},zc=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Yf(e,t,n,s){if(!e){n(s(t));return}const r=wq(n);e(t,{announce:r}),r.wasCalled()||n(s(t))}var kq=(e,t)=>{const n=jq();let s=null;const r=(h,f)=>{s&&J(),mo("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{s&&J(),mo("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(zc(h,f))})},a=(h,f)=>{s&&J();const m=zc(h,f);s={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{mo("onDragStart",()=>Yf(e().onDragStart,m,t,mu.onDragStart))})},l=(h,f)=>{const m=Yx(f),p=fh(f);s||J();const g=!Cq(h,s.lastCritical);g&&(s.lastCritical=h);const y=!Nq(s.lastLocation,m);y&&(s.lastLocation=m);const b=!Sq(s.lastCombine,p);if(b&&(s.lastCombine=p),!g&&!y&&!b)return;const v={...zc(h,s.mode),combine:p,destination:m};n.add(()=>{mo("onDragUpdate",()=>Yf(e().onDragUpdate,v,t,mu.onDragUpdate))})},c=()=>{s||J(),n.flush()},u=h=>{s||J(),s=null,mo("onDragEnd",()=>Yf(e().onDragEnd,h,t,mu.onDragEnd))};return{beforeCapture:r,beforeStart:i,start:a,update:l,flush:c,drop:u,abort:()=>{if(!s)return;const h={...zc(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},Eq=(e,t)=>{const n=kq(e,t);return s=>r=>i=>{if(Ae(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ae(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),r(i),n.start(l,i.payload.movementMode);return}if(Ae(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),r(i),n.drop(l);return}if(r(i),Ae(i,"FLUSH")){n.abort();return}const a=s.getState();a.phase==="DRAGGING"&&n.update(a.critical,a.impact)}};const Dq=e=>t=>n=>{if(!Ae(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&J(),e.dispatch(ty({completed:s.completed}))},Tq=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return r=>i=>{if((Ae(i,"FLUSH")||Ae(i,"DROP_COMPLETE")||Ae(i,"DROP_ANIMATION_FINISHED"))&&s(),r(i),!Ae(i,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(ME())}};n=requestAnimationFrame(()=>{n=null,t=Pn(window,[a])})}};var Pq=e=>()=>t=>n=>{(Ae(n,"DROP_COMPLETE")||Ae(n,"FLUSH")||Ae(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},_q=e=>{let t=!1;return()=>n=>s=>{if(Ae(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Ae(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ae(s,"DROP_COMPLETE")){t=!1;const r=s.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Aq=e=>Ae(e,"DROP_COMPLETE")||Ae(e,"DROP_ANIMATE")||Ae(e,"FLUSH");var Mq=e=>t=>n=>s=>{if(Aq(s)){e.stop(),n(s);return}if(Ae(s,"INITIAL_PUBLISH")){n(s);const r=t.getState();r.phase!=="DRAGGING"&&J(),e.start(r);return}n(s),e.scroll(t.getState())};const Rq=e=>t=>n=>{if(t(n),!Ae(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(AE({reason:s.reason})))},Iq=Jk;var Oq=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:r,autoScroller:i})=>Xk(qH,Iq(TW(uq(n),Pq(e),cq(e),gq,Dq,Tq,Rq,Mq(i),bq,_q(t),Eq(s,r))));const Qf=()=>({additions:{},removals:{},modified:{}});function Lq({registry:e,callbacks:t}){let n=Qf(),s=null;const r=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(jt)).sort((p,g)=>p.descriptor.index-g.descriptor.index),f=Object.keys(d).map(p=>{const y=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:y}}),m={additions:h,removals:Object.keys(u),modified:f};n=Qf(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],r()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],r()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=Qf())}}}var LE=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const r=un({x:t,y:e},{x:s,y:n});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},FE=()=>{const e=document.documentElement;return e||J(),e},$E=()=>{const e=FE();return LE({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Fq=()=>{const e=OE(),t=$E(),n=e.y,s=e.x,r=FE(),i=r.clientWidth,a=r.clientHeight,l=s+i,c=n+a;return{frame:Hn({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:jt,displacement:jt}}}},$q=({critical:e,scrollOptions:t,registry:n})=>{const s=Fq(),r=s.scroll.current,i=e.droppable,a=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(r,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(r));return{dimensions:{draggables:fE(l),droppables:hE(a)},critical:e,viewport:s}};function f1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var Bq=(e,t)=>{let n=null;const s=Lq({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),r=(f,m)=>{e.droppable.exists(f)||J(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},a=(f,m)=>{n&&(e.droppable.exists(f)||J(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;s.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||J();const m=n.critical.draggable;f.type==="ADDITION"&&f1(e,m,f.value)&&s.add(f.value),f.type==="REMOVAL"&&f1(e,m,f.value)&&s.remove(f.value)};return{updateDroppableIsEnabled:r,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:a,startPublishing:f=>{n&&J();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),g={draggable:m.descriptor,droppable:p.descriptor},y=e.subscribe(u);return n={critical:g,unsubscribe:y},$q({critical:g,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},BE=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",zq=e=>{window.scrollBy(e.x,e.y)};const Vq=wt(e=>hh(e).filter(t=>!(!t.isEnabled||!t.frame))),Uq=(e,t)=>Vq(t).find(s=>(s.frame||J(),NE(s.frame.pageMarginBox)(e)))||null;var Wq=({center:e,destination:t,droppables:n})=>{if(t){const r=n[t];return r.frame?r:null}return Uq(e,n)};const Pl={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Hq=(e,t,n=()=>Pl)=>{const s=n(),r=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:r,maxScrollValueAt:i}},zE=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},sy=1,qq=(e,t,n=()=>Pl)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return sy;const i=1-zE({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=s.maxPixelScroll*s.ease(i);return Math.ceil(a)},Gq=(e,t,n)=>{const s=n(),r=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,a=t,l=i,u=Date.now()-a;if(u>=i)return e;if(u<r)return sy;const d=zE({startOfRange:r,endOfRange:l,current:u}),h=e*s.ease(d);return Math.ceil(h)},m1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:r})=>{const i=qq(e,t,r);return i===0?0:s?Math.max(Gq(i,n,r),sy):i},p1=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=Hq(e,s,i);return t[s.end]<t[s.start]?m1({distanceToEdge:t[s.end],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i}):-1*m1({distanceToEdge:t[s.start],thresholds:a,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})},Yq=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,r=t.width>e.width;return!r&&!s?n:r&&s?null:{x:r?0:n.x,y:s?0:n.y}};const Qq=dE(e=>e===0?0:e);var VE=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=p1({container:t,distanceToEdges:a,dragStartTime:e,axis:Qx,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),c=p1({container:t,distanceToEdges:a,dragStartTime:e,axis:gE,shouldUseTimeDampening:r,getAutoScrollerOptions:i}),u=Qq({x:c,y:l});if(Sr(u,jt))return null;const d=Yq({container:t,subject:n,proposedScroll:u});return d?Sr(d,jt)?null:d:null};const Kq=dE(e=>e===0?0:e>0?1:-1),ry=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const r=St(t,s),i={x:e(r.x,n.x),y:e(r.y,n.y)};return Sr(i,jt)?null:i}})(),UE=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},r=Kq(n),i=ry({max:s,current:t,change:r});return!i||r.x!==0&&i.x===0||r.y!==0&&i.y===0},iy=(e,t)=>UE({current:e.scroll.current,max:e.scroll.max,change:t}),Xq=(e,t)=>{if(!iy(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return ry({current:s,max:n,change:t})},ay=(e,t)=>{const n=e.frame;return n?UE({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Jq=(e,t)=>{const n=e.frame;return!n||!ay(e,t)?null:ry({current:n.scroll.current,max:n.scroll.max,change:t})};var Zq=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=VE({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return a&&iy(e,a)?a:null},e9=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const a=e.frame;if(!a)return null;const l=VE({dragStartTime:s,container:a.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i});return l&&ay(e,l)?l:null},g1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:r,getAutoScrollerOptions:i})=>{const a=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=Zq({dragStartTime:t,viewport:h,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){s(f);return}}const u=Wq({center:a,destination:fn(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=e9({dragStartTime:t,droppable:u,subject:c,center:a,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&r(u.descriptor.id,d)},t9=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Pl})=>{const s=Cl(e),r=Cl(t);let i=null;const a=u=>{i||J();const{shouldUseTimeDampening:d,dragStartTime:h}=i;g1({state:u,scrollWindow:s,scrollDroppable:r,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&J();const d=Date.now();let h=!1;const f=()=>{h=!0};g1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&a(u)},stop:()=>{i&&(s.cancel(),r.cancel(),i=null)},scroll:a}},n9=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const u=St(l.current.client.selection,c);e({client:u})},r=(l,c)=>{if(!ay(l,c))return c;const u=Jq(l,c);if(!u)return t(l.descriptor.id,c),null;const d=un(c,u);return t(l.descriptor.id,d),un(c,d)},i=(l,c,u)=>{if(!l||!iy(c,u))return u;const d=Xq(c,u);if(!d)return n(u),null;const h=un(u,d);return n(h),un(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=fn(l.impact);u||J();const d=r(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&s(l,f)}},s9=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const r=t9({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=n9({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){r.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:r.start,stop:r.stop}};const Na="data-rfd",Sa=(()=>{const e=`${Na}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),zp=(()=>{const e=`${Na}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),r9=(()=>{const e=`${Na}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),x1={contextId:`${Na}-scroll-container-context-id`},i9=e=>t=>`[${t}="${e}"]`,po=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),a9="pointer-events: none;";var o9=e=>{const t=i9(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Sa.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:a9,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${qo.outOfTheWay};
    `;return{selector:t(zp.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),r={selector:t(r9.contextId),styles:{always:"overflow-anchor: none;"}},a=[s,n,r,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:po(a,"always"),resting:po(a,"resting"),dragging:po(a,"dragging"),dropAnimating:po(a,"dropAnimating"),userCancel:po(a,"userCancel")}};const mn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,Kf=()=>{const e=document.querySelector("head");return e||J(),e},y1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function l9(e,t){const n=De(()=>o9(e),[e]),s=x.useRef(null),r=x.useRef(null),i=pe(wt(h=>{const f=r.current;f||J(),f.textContent=h}),[]),a=pe(h=>{const f=s.current;f||J(),f.textContent=h},[]);mn(()=>{!s.current&&!r.current||J();const h=y1(t),f=y1(t);return s.current=h,r.current=f,h.setAttribute(`${Na}-always`,e),f.setAttribute(`${Na}-dynamic`,e),Kf().appendChild(h),Kf().appendChild(f),a(n.always),i(n.resting),()=>{const m=p=>{const g=p.current;g||J(),Kf().removeChild(g),p.current=null};m(s),m(r)}},[t,a,i,n.always,n.resting,e]);const l=pe(()=>i(n.dragging),[i,n.dragging]),c=pe(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=pe(()=>{r.current&&i(n.resting)},[i,n.resting]);return De(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function WE(e,t){return Array.from(e.querySelectorAll(t))}var HE=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function gh(e){return e instanceof HE(e).HTMLElement}function c9(e,t){const n=`[${Sa.contextId}="${e}"]`,s=WE(document,n);if(!s.length)return null;const r=s.find(i=>i.getAttribute(Sa.draggableId)===t);return!r||!gh(r)?null:r}function u9(e){const t=x.useRef({}),n=x.useRef(null),s=x.useRef(null),r=x.useRef(!1),i=pe(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const y=t.current;y[f]!==p&&delete y[f]}},[]),a=pe(function(f){const m=c9(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=pe(function(f,m){n.current===f&&(n.current=m)},[]),c=pe(function(){s.current||r.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const f=n.current;f&&a(f)}))},[a]),u=pe(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(Sa.draggableId)===f&&(n.current=f)},[]);return mn(()=>(r.current=!0,function(){r.current=!1;const f=s.current;f&&cancelAnimationFrame(f)}),[]),De(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function d9(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function s(h){t.length&&t.forEach(f=>f(h))}function r(h){return e.draggables[h]||null}function i(h){const f=r(h);return f||J(),f}const a={register:h=>{e.draggables[h.descriptor.id]=h,s({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=r(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&s({type:"REMOVAL",value:h}))},getById:i,findById:r,exists:h=>!!r(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||J(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:a,droppable:u,subscribe:n,clean:d}}function h9(){const e=De(d9,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var oy=se.createContext(null),jd=()=>{const e=document.body;return e||J(),e};const f9={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},m9=e=>`rfd-announcement-${e}`;function p9(e){const t=De(()=>m9(e),[e]),n=x.useRef(null);return x.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),yd(i.style,f9),jd().appendChild(i),function(){setTimeout(function(){const c=jd();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),pe(r=>{const i=n.current;if(i){i.textContent=r;return}},[])}const g9={separator:"::"};function ly(e,t=g9){const n=se.useId();return De(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function x9({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function y9({contextId:e,text:t}){const n=ly("hidden-text",{separator:"-"}),s=De(()=>x9({contextId:e,uniqueId:n}),[n,e]);return x.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",jd().appendChild(i),function(){const l=jd();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var xh=se.createContext(null);function qE(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function v9(){let e=null;function t(){return!!e}function n(a){return a===e}function s(a){e&&J();const l={abandon:a};return e=l,l}function r(){e||J(),e=null}function i(){e&&(e.abandon(),r())}return{isClaimed:t,isActive:n,claim:s,release:r,tryAbandon:i}}function _l(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const b9=9,w9=13,cy=27,GE=32,j9=33,N9=34,S9=35,C9=36,k9=37,E9=38,D9=39,T9=40,P9={[w9]:!0,[b9]:!0};var YE=e=>{P9[e.keyCode]&&e.preventDefault()};const yh=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),QE=0,v1=5;function _9(e,t){return Math.abs(t.x-e.x)>=v1||Math.abs(t.y-e.y)>=v1}const b1={type:"IDLE"};function A9({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:r=>{const{button:i,clientX:a,clientY:l}=r;if(i!==QE)return;const c={x:a,y:l},u=n();if(u.type==="DRAGGING"){r.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&J();const d=u.point;if(!_9(d,c))return;r.preventDefault();const h=u.actions.fluidLift(c);s({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:r=>{const i=n();if(i.type!=="DRAGGING"){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:r=>{n().type==="DRAGGING"&&r.preventDefault(),e()}},{eventName:"keydown",fn:r=>{if(n().type==="PENDING"){e();return}if(r.keyCode===cy){r.preventDefault(),e();return}YE(r)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:r=>{const i=n();if(i.type==="IDLE"&&J(),i.actions.shouldRespectForcePress()){e();return}r.preventDefault()}},{eventName:yh,fn:e}]}function M9(e){const t=x.useRef(b1),n=x.useRef(Nr),s=De(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==QE||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,a,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),r=De(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=pe(function(){const h={passive:!1,capture:!0};n.current=Pn(window,[r,s],h)},[r,s]),a=pe(()=>{t.current.type!=="IDLE"&&(t.current=b1,n.current(),i())},[i]),l=pe(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),c=pe(function(){const h={capture:!0,passive:!1},f=A9({cancel:l,completed:a,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=Pn(window,f,h)},[l,a]),u=pe(function(h,f){t.current.type!=="IDLE"&&J(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);mn(function(){return i(),function(){n.current()}},[i])}function R9(){}const I9={[N9]:!0,[j9]:!0,[C9]:!0,[S9]:!0};function O9(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:r=>{if(r.keyCode===cy){r.preventDefault(),n();return}if(r.keyCode===GE){r.preventDefault(),s();return}if(r.keyCode===T9){r.preventDefault(),e.moveDown();return}if(r.keyCode===E9){r.preventDefault(),e.moveUp();return}if(r.keyCode===D9){r.preventDefault(),e.moveRight();return}if(r.keyCode===k9){r.preventDefault(),e.moveLeft();return}if(I9[r.keyCode]){r.preventDefault();return}YE(r)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:yh,fn:n}]}function L9(e){const t=x.useRef(R9),n=De(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==GE)return;const a=e.findClosestDraggableId(i);if(!a)return;const l=e.tryGetLock(a,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||J(),c=!1,t.current(),s()}t.current=Pn(window,O9(u,d),{capture:!0,passive:!1})}}),[e]),s=pe(function(){const i={passive:!1,capture:!0};t.current=Pn(window,[n],i)},[n]);mn(function(){return s(),function(){t.current()}},[s])}const Xf={type:"IDLE"},F9=120,$9=.15;function B9({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===cy&&n.preventDefault(),e()}},{eventName:yh,fn:e}]}function z9({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}r.hasMoved=!0;const{clientX:i,clientY:a}=s.touches[0],l={x:i,y:a};s.preventDefault(),r.actions.move(l)}},{eventName:"touchend",fn:s=>{const r=n();if(r.type!=="DRAGGING"){e();return}s.preventDefault(),r.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const r=n();r.type==="IDLE"&&J();const i=s.touches[0];if(!i||!(i.force>=$9))return;const l=r.actions.shouldRespectForcePress();if(r.type==="PENDING"){l&&e();return}if(l){if(r.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:yh,fn:e}]}function V9(e){const t=x.useRef(Xf),n=x.useRef(Nr),s=pe(function(){return t.current},[]),r=pe(function(m){t.current=m},[]),i=De(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const g=e.tryGetLock(p,l,{sourceEvent:m});if(!g)return;const y=m.touches[0],{clientX:b,clientY:v}=y,w={x:b,y:v};n.current(),h(g,w)}}),[e]),a=pe(function(){const m={capture:!0,passive:!1};n.current=Pn(window,[i],m)},[i]),l=pe(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),r(Xf),n.current(),a())},[a,r]),c=pe(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=pe(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:s},g=Pn(window,z9(p),m),y=Pn(window,B9(p),m);n.current=function(){g(),y()}},[c,s,l]),d=pe(function(){const m=s();m.type!=="PENDING"&&J();const p=m.actions.fluidLift(m.point);r({type:"DRAGGING",actions:p,hasMoved:!1})},[s,r]),h=pe(function(m,p){s().type!=="IDLE"&&J();const g=setTimeout(d,F9);r({type:"PENDING",point:p,actions:m,longPressTimerId:g}),u()},[u,s,r,d]);mn(function(){return a(),function(){n.current();const p=s();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),r(Xf))}},[s,a,r]),mn(function(){return Pn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const U9=["input","button","textarea","select","option","optgroup","video","audio"];function KE(e,t){if(t==null)return!1;if(U9.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:KE(e,t.parentElement)}function W9(e,t){const n=t.target;return gh(n)?KE(e,n):!1}var H9=e=>Hn(e.getBoundingClientRect()).center;function q9(e){return e instanceof HE(e).Element}const G9=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function XE(e,t){return e==null?null:e[G9](t)?e:XE(e.parentElement,t)}function Y9(e,t){return e.closest?e.closest(t):XE(e,t)}function Q9(e){return`[${Sa.contextId}="${e}"]`}function K9(e,t){const n=t.target;if(!q9(n))return null;const s=Q9(e),r=Y9(n,s);return!r||!gh(r)?null:r}function X9(e,t){const n=K9(e,t);return n?n.getAttribute(Sa.draggableId):null}function J9(e,t){const n=`[${zp.contextId}="${e}"]`,r=WE(document,n).find(i=>i.getAttribute(zp.id)===t);return!r||!gh(r)?null:r}function Z9(e){e.preventDefault()}function Vc({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function JE({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const r=n.draggable.findById(s);return!(!r||!r.options.isEnabled||!BE(t.getState(),s))}function eG({lockAPI:e,contextId:t,store:n,registry:s,draggableId:r,forceSensorStop:i,sourceEvent:a}){if(!JE({lockAPI:e,store:n,registry:s,draggableId:r}))return null;const c=s.draggable.getById(r),u=J9(t,c.descriptor.id);if(!u||a&&!c.options.canDragInteractiveElements&&W9(u,a))return null;const d=e.claim(i||Nr);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(N,k){Vc({expected:N,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(k())}const g=p.bind(null,"DRAGGING");function y(N){function k(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(k(),J()),n.dispatch(YH(N.liftActionArgs)),h="DRAGGING";function j(C,D={shouldBlockNextClick:!1}){if(N.cleanup(),D.shouldBlockNextClick){const E=Pn(window,[{eventName:"click",fn:Z9,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(E)}k(),n.dispatch(AE({reason:C}))}return{isActive:()=>Vc({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:C=>j("DROP",C),cancel:C=>j("CANCEL",C),...N.actions}}function b(N){const k=Cl(C=>{g(()=>_E({client:C}))});return{...y({liftActionArgs:{id:r,clientSelection:N,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function v(){const N={moveUp:()=>g(sq),moveRight:()=>g(iq),moveDown:()=>g(rq),moveLeft:()=>g(aq)};return y({liftActionArgs:{id:r,clientSelection:H9(u),movementMode:"SNAP"},cleanup:Nr,actions:N})}function w(){Vc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Vc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:b,snapLift:v,abort:w}}const tG=[M9,L9,V9];function nG({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:r}){const i=[...r?tG:[],...s||[]],a=x.useState(()=>v9())[0],l=pe(function(y,b){_l(y)&&!_l(b)&&a.tryAbandon()},[a]);mn(function(){let y=t.getState();return t.subscribe(()=>{const v=t.getState();l(y,v),y=v})},[a,t,l]),mn(()=>a.tryAbandon,[a.tryAbandon]);const c=pe(g=>JE({lockAPI:a,registry:n,store:t,draggableId:g}),[a,n,t]),u=pe((g,y,b)=>eG({lockAPI:a,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:y||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,a,n,t]),d=pe(g=>X9(e,g),[e]),h=pe(g=>{const y=n.draggable.findById(g);return y?y.options:null},[n.draggable]),f=pe(function(){a.isClaimed()&&(a.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(ey()))},[a,t]),m=pe(()=>a.isClaimed(),[a]),p=De(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let g=0;g<i.length;g++)i[g](p)}const sG=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Ll.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),rG=e=>({...Pl,...e.autoScrollerOptions,durationDampening:{...Pl.durationDampening,...e.autoScrollerOptions}});function go(e){return e.current||J(),e.current}function iG(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:r,dragHandleUsageInstructions:i}=e,a=x.useRef(null),l=qE(e),c=pe(()=>sG(l.current),[l]),u=pe(()=>rG(l.current),[l]),d=p9(t),h=y9({contextId:t,text:i}),f=l9(t,r),m=pe(E=>{go(a).dispatch(E)},[]),p=De(()=>Yw({publishWhileDragging:KH,updateDroppableScroll:JH,updateDroppableIsEnabled:ZH,updateDroppableIsCombineEnabled:eq,collectionStarting:XH},m),[m]),g=h9(),y=De(()=>Bq(g,p),[g,p]),b=De(()=>s9({scrollWindow:zq,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:u,...Yw({move:_E},m)}),[y.scrollDroppable,m,u]),v=u9(t),w=De(()=>Oq({announce:d,autoScroller:b,dimensionMarshal:y,focusMarshal:v,getResponders:c,styleMarshal:f}),[d,b,y,v,c,f]);a.current=w;const S=pe(()=>{const E=go(a);E.getState().phase!=="IDLE"&&E.dispatch(ey())},[]),N=pe(()=>{const E=go(a).getState();return E.phase==="DROP_ANIMATING"?!0:E.phase==="IDLE"?!1:E.isDragging},[]),k=De(()=>({isDragging:N,tryAbort:S}),[N,S]);n(k);const j=pe(E=>BE(go(a).getState(),E),[]),C=pe(()=>Jr(go(a).getState()),[]),D=De(()=>({marshal:y,focus:v,contextId:t,canLift:j,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:g}),[t,y,h,v,j,C,g]);return nG({contextId:t,store:w,registry:g,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>S,[S]),se.createElement(xh.Provider,{value:D},se.createElement(P7,{context:oy,store:w},e.children))}function aG(){return se.useId()}function oG(e){const t=aG(),n=e.dragHandleUsageInstructions||mu.dragHandleUsageInstructions;return se.createElement(L7,null,s=>se.createElement(iG,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const w1={dragging:5e3,dropAnimating:4500},lG=(e,t)=>t?qo.drop(t.duration):e?qo.snap:qo.fluid,cG=(e,t)=>{if(e)return t?Tl.opacity.drop:Tl.opacity.combining},uG=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function dG(e){const n=e.dimension.client,{offset:s,combineWith:r,dropping:i}=e,a=!!r,l=uG(e),c=!!i,u=c?$p.drop(s,a):$p.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:lG(l,i),transform:u,opacity:cG(a,c),zIndex:c?w1.dropAnimating:w1.dragging,pointerEvents:"none"}}function hG(e){return{transform:$p.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function fG(e){return e.type==="DRAGGING"?dG(e):hG(e)}function mG(e,t,n=jt){const s=window.getComputedStyle(t),r=t.getBoundingClientRect(),i=iE(r,s),a=xd(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:a}}function pG(e){const t=ly("draggable"),{descriptor:n,registry:s,getDraggableRef:r,canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}=e,c=De(()=>({canDragInteractiveElements:i,shouldRespectForcePress:a,isEnabled:l}),[i,l,a]),u=pe(m=>{const p=r();return p||J(),mG(n,p,m)},[n,r]),d=De(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=x.useRef(d),f=x.useRef(!0);mn(()=>(s.draggable.register(h.current),()=>s.draggable.unregister(h.current)),[s.draggable]),mn(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,s.draggable.update(d,m)},[d,s.draggable])}var uy=se.createContext(null);function Nd(e){const t=x.useContext(e);return t||J(),t}function gG(e){e.preventDefault()}const xG=e=>{const t=x.useRef(null),n=pe((k=null)=>{t.current=k},[]),s=pe(()=>t.current,[]),{contextId:r,dragHandleUsageInstructionsId:i,registry:a}=Nd(xh),{type:l,droppableId:c}=Nd(uy),u=De(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:g,mapped:y,dropAnimationFinished:b}=e;if(!g){const k=De(()=>({descriptor:u,registry:a,getDraggableRef:s,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,a,s,p,m,f]);pG(k)}const v=De(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":r,draggable:!1,onDragStart:gG}:null,[r,i,h,f]),w=pe(k=>{y.type==="DRAGGING"&&y.dropping&&k.propertyName==="transform"&&Ll.flushSync(b)},[b,y]),S=De(()=>{const k=fG(y),j=y.type==="DRAGGING"&&y.dropping?w:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":r,"data-rfd-draggable-id":h,style:k,onTransitionEnd:j},dragHandleProps:v}},[r,v,h,y,w,n]),N=De(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return se.createElement(se.Fragment,null,d(S,y.snapshot,N))};var ZE=(e,t)=>e===t,eD=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const yG=e=>e.combine?e.combine.draggableId:null,vG=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function bG(){const e=wt((r,i)=>({x:r,y:i})),t=wt((r,i,a=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:r,draggingOver:a,combineWith:l,combineTargetFor:null})),n=wt((r,i,a,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:r,dimension:a,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(r,i)=>{if(_l(r)){if(r.critical.draggable.id!==i.draggableId)return null;const a=r.current.client.offset,l=r.dimensions.draggables[i.draggableId],c=fn(r.impact),u=vG(r.impact),d=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,l,i.isClone,c,u,d)}if(r.phase==="DROP_ANIMATING"){const a=r.completed;if(a.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=r.dimensions.draggables[i.draggableId],u=a.result,d=u.mode,h=eD(u),f=yG(u),p={duration:r.dropDuration,curve:ny.drop,moveTo:r.newHomeClientOffset,opacity:f?Tl.opacity.drop:null,scale:f?Tl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function tD(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const wG={mapped:{type:"SECONDARY",offset:jt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:tD(null)}};function jG(){const e=wt((a,l)=>({x:a,y:l})),t=wt(tD),n=wt((a,l=null,c)=>({mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=a=>a?n(jt,a,!0):null,r=(a,l,c,u)=>{const d=c.displaced.visible[a],h=!!(u.inVirtualList&&u.effected[a]),f=fh(c),m=f&&f.draggableId===a?l:null;if(!d){if(!h)return s(m);if(c.displaced.invisible[a])return null;const y=$a(u.displacedBy.point),b=e(y.x,y.y);return n(b,m,!0)}if(h)return s(m);const p=c.displacedBy.point,g=e(p.x,p.y);return n(g,m,d.shouldAnimate)};return(a,l)=>{if(_l(a))return a.critical.draggable.id===l.draggableId?null:r(l.draggableId,a.critical.draggable.id,a.impact,a.afterCritical);if(a.phase==="DROP_ANIMATING"){const c=a.completed;return c.result.draggableId===l.draggableId?null:r(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const NG=()=>{const e=bG(),t=jG();return(s,r)=>e(s,r)||t(s,r)||wG},SG={dropAnimationFinished:ME},CG=rE(NG,SG,null,{context:oy,areStatePropsEqual:ZE})(xG);function nD(e){return Nd(uy).isUsingCloneFor===e.draggableId&&!e.isClone?null:se.createElement(CG,e)}function kG(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return se.createElement(nD,yd({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const sD=e=>t=>e===t,EG=sD("scroll"),DG=sD("auto"),j1=(e,t)=>t(e.overflowX)||t(e.overflowY),TG=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return j1(n,EG)||j1(n,DG)},PG=()=>!1,rD=e=>e==null?null:e===document.body?PG()?e:null:e===document.documentElement?null:TG(e)?e:rD(e.parentElement);var Vp=e=>({x:e.scrollLeft,y:e.scrollTop});const iD=e=>e?window.getComputedStyle(e).position==="fixed"?!0:iD(e.parentElement):!1;var _G=e=>{const t=rD(e),n=iD(e);return{closestScrollable:t,isFixedOnPage:n}},AG=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:r,client:i,page:a,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=LE({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:jt,displacement:jt}}}})(),u=r==="vertical"?Qx:gE,d=ja({page:a,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:u,isEnabled:t,client:i,page:a,frame:c,subject:d}};const MG=(e,t)=>{const n=aE(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,r=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,a=r+t.scrollWidth,c=Hx({top:s,right:a,bottom:i,left:r},n.border);return qx({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var RG=({ref:e,descriptor:t,env:n,windowScroll:s,direction:r,isDropDisabled:i,isCombineEnabled:a,shouldClipSubject:l})=>{const c=n.closestScrollable,u=MG(e,c),d=xd(u,s),h=(()=>{if(!c)return null;const m=aE(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:xd(m,s),scroll:Vp(c),scrollSize:p,shouldClipSubject:l}})();return AG({descriptor:t,isEnabled:!i,isCombineEnabled:a,isFixedOnPage:n.isFixedOnPage,direction:r,client:u,page:d,closest:h})};const IG={passive:!1},OG={passive:!0};var N1=e=>e.shouldPublishImmediately?IG:OG;const Uc=e=>e&&e.env.closestScrollable||null;function LG(e){const t=x.useRef(null),n=Nd(xh),s=ly("droppable"),{registry:r,marshal:i}=n,a=qE(e),l=De(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=x.useRef(l),u=De(()=>wt((S,N)=>{t.current||J();const k={x:S,y:N};i.updateDroppableScroll(l.id,k)}),[l.id,i]),d=pe(()=>{const S=t.current;return!S||!S.env.closestScrollable?jt:Vp(S.env.closestScrollable)},[]),h=pe(()=>{const S=d();u(S.x,S.y)},[d,u]),f=De(()=>Cl(h),[h]),m=pe(()=>{const S=t.current,N=Uc(S);if(S&&N||J(),S.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=pe((S,N)=>{t.current&&J();const k=a.current,j=k.getDroppableRef();j||J();const C=_G(j),D={ref:j,descriptor:l,env:C,scrollOptions:N};t.current=D;const E=RG({ref:j,descriptor:l,env:C,windowScroll:S,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),O=C.closestScrollable;return O&&(O.setAttribute(x1.contextId,n.contextId),O.addEventListener("scroll",m,N1(D.scrollOptions))),E},[n.contextId,l,m,a]),g=pe(()=>{const S=t.current,N=Uc(S);return S&&N||J(),Vp(N)},[]),y=pe(()=>{const S=t.current;S||J();const N=Uc(S);t.current=null,N&&(f.cancel(),N.removeAttribute(x1.contextId),N.removeEventListener("scroll",m,N1(S.scrollOptions)))},[m,f]),b=pe(S=>{const N=t.current;N||J();const k=Uc(N);k||J(),k.scrollTop+=S.y,k.scrollLeft+=S.x},[]),v=De(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:g,dragStopped:y,scroll:b}),[y,p,g,b]),w=De(()=>({uniqueId:s,descriptor:l,callbacks:v}),[v,l,s]);mn(()=>(c.current=w.descriptor,r.droppable.register(w),()=>{t.current&&y(),r.droppable.unregister(w)}),[v,l,y,w,i,r.droppable]),mn(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),mn(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function Jf(){}const S1={width:0,height:0,margin:W7},FG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?S1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},$G=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=FG({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?qo.placeholder:null}},BG=e=>{const t=x.useRef(null),n=pe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:r,onClose:i,contextId:a}=e,[l,c]=x.useState(e.animate==="open");x.useEffect(()=>l?s!=="open"?(n(),c(!1),Jf):t.current?Jf:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):Jf,[s,l,n]);const u=pe(h=>{h.propertyName==="height"&&(r(),s==="close"&&i())},[s,i,r]),d=$G({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return se.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":a,onTransitionEnd:u,ref:e.innerRef})};var zG=se.memo(BG);class VG extends se.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const UG=e=>{const t=x.useContext(xh);t||J();const{contextId:n,isMovementAllowed:s}=t,r=x.useRef(null),i=x.useRef(null),{children:a,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:g,updateViewportMaxScroll:y,getContainerForClone:b}=e,v=pe(()=>r.current,[]),w=pe((O=null)=>{r.current=O},[]);pe(()=>i.current,[]);const S=pe((O=null)=>{i.current=O},[]),N=pe(()=>{s()&&y({maxScroll:$E()})},[s,y]);LG({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:v});const k=De(()=>se.createElement(VG,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:O,data:F,animate:L})=>se.createElement(zG,{placeholder:F,onClose:O,innerRef:S,animate:L,contextId:n,onTransitionEnd:N})),[n,N,e.placeholder,e.shouldAnimatePlaceholder,S]),j=De(()=>({innerRef:w,placeholder:k,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,k,w]),C=g?g.dragging.draggableId:null,D=De(()=>({droppableId:l,type:c,isUsingCloneFor:C}),[l,C,c]);function E(){if(!g)return null;const{dragging:O,render:F}=g,L=se.createElement(nD,{draggableId:O.draggableId,index:O.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(P,B)=>F(P,B,O));return LP.createPortal(L,b())}return se.createElement(uy.Provider,{value:D},a(j,p),E())};function WG(){return document.body||J(),document.body}const C1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:WG},aD=e=>{let t={...e},n;for(n in C1)e[n]===void 0&&(t={...t,[n]:C1[n]});return t},Zf=(e,t)=>e===t.droppable.type,k1=(e,t)=>t.draggables[e.draggable.id],HG=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=wt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=wt((i,a,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:p}}if(!a)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,a)=>{const l=aD(a),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(_l(i)){const f=i.critical;if(!Zf(u,f))return t;const m=k1(f,i.dimensions),p=fn(i.impact)===c;return s(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!Zf(u,f.critical))return t;const m=k1(f.critical,i.dimensions);return s(c,d,eD(f.result)===c,fn(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!Zf(u,f.critical))return t;const m=fn(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),g=f.critical.droppable.id===c;return m?p?e:t:g?e:t}return t}},qG={updateViewportMaxScroll:nq},GG=rE(HG,qG,(e,t,n)=>({...aD(n),...e,...t}),{context:oy,areStatePropsEqual:ZE})(UG),em=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function YG(){const{user:e}=Qe(),[t,n]=x.useState([]),[s,r]=x.useState(!0),[i,a]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState({show:!1,title:""}),m=Ln();x.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0),d(null);const C=await eh(),E=(O=>Array.isArray(O)?O:O&&typeof O=="object"&&O.data&&Array.isArray(O.data)||O&&typeof O=="object"&&O.success&&Array.isArray(O.data)?O.data:[])(C);console.log("🧪 Debug deals response:",{originalResponse:C,extractedData:E,isArray:Array.isArray(E),length:Array.isArray(E)?E.length:"not array"}),!E||E.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${E.length} deals`),n(E),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(C){console.error("Error fetching deals:",C),d(C instanceof Error?C:new Error("Unknown error fetching deals"));let D="Please check your network connection and ensure the server is running.";C instanceof Error&&(D+=` Error details: ${C.message}`),y("Error fetching deals","error",D),n([])}finally{r(!1)}},g=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},y=(C,D="success",E)=>{f({show:!0,title:C,variant:D,description:E}),setTimeout(()=>f({show:!1,title:""}),5e3)},b=async C=>{var T,M;if(a(!1),console.log("Drag end event:",C),!C.destination){console.log("No destination provided in drag result");return}if(C.source.droppableId===C.destination.droppableId&&C.source.index===C.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:D,destination:E,source:O}=C,F=E.droppableId,L=O.droppableId;console.log(`Moving deal ${D} from ${L} to ${F}`);const P=`Moving deal to ${((T=em.find(U=>U.id===F))==null?void 0:T.label)||F}...`;y(P,"warning");const B=[...t];if(!t.find(U=>U.id===D)){console.error(`Deal with ID ${D} not found`),y("Error updating deal","error","Could not find the deal in the current view");return}const R=t.map(U=>U.id===D?{...U,stage:F}:U);n(R);try{console.log(`Calling API to update deal ${D} to stage ${F}`);const U=await m2(D,F);if(U){console.log("Deal updated successfully:",U),n(oe=>oe.map(ue=>ue.id===D?U:ue));const H=((M=em.find(oe=>oe.id===F))==null?void 0:M.label)||F,Z=U.title||"Deal";y(`Deal moved to ${H}`,"success",`"${Z}" has been successfully moved to the ${H} stage.`),F==="won"&&w(U)}else console.error("Server returned null for updated deal"),n(B),y("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(U){console.error("Error updating deal stage:",U),n(B);const H=U instanceof Error?`Error: ${U.message}`:"An unknown error occurred while updating the deal";y("Error updating deal stage","error",H)}},v=()=>{a(!0),h.show&&f({show:!1,title:""})},w=C=>{y("Schedule a job for this deal","success",`You've won the deal with ${C.customer.name}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${C.id}&action=schedule&customerName=${encodeURIComponent(C.customer.name)}`)},1500)},S=Array.isArray(t)?t.filter(C=>{var O;const D=C.title||"",E=((O=C.customer)==null?void 0:O.name)||"";return D.toLowerCase().includes(l.toLowerCase())||E.toLowerCase().includes(l.toLowerCase())}):[],N=C=>S.filter(D=>D.stage===C),k=C=>N(C).reduce((D,E)=>D+E.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const j=({deal:C,provided:D,snapshot:E})=>{var O,F;return o.jsxs("div",{ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,style:{...D.draggableProps.style,opacity:E.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${E.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:C.title||`Deal for ${((O=C.customer)==null?void 0:O.name)||"Customer"}`}),o.jsx("div",{className:"flex space-x-1",children:o.jsx(W,{variant:"ghost",size:"sm",className:"h-6 w-6",children:o.jsx(hA,{className:"h-3 w-3"})})})]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[o.jsx(zd,{className:"h-3 w-3 mr-1"}),o.jsx("span",{className:"line-clamp-1",children:((F=C.customer)==null?void 0:F.name)||"Unknown Customer"})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("div",{className:"font-bold text-base text-primary-800",children:Te(C.value)}),o.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[C.probability||50,"%"]})]})]})};return o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&o.jsx(mt,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),o.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[o.jsxs(W,{variant:"outline",size:"sm",onClick:p,disabled:s,className:"flex items-center gap-1",children:[o.jsx(rt,{className:`w-4 h-4 ${s?"animate-spin":""}`}),s?"Loading...":"Refresh"]}),o.jsxs("div",{className:"relative flex-grow",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(ps,{className:"w-4 h-4 text-gray-500"})}),o.jsx(Ue,{type:"text",placeholder:"Search deals...",value:l,onChange:C=>c(C.target.value),className:"pl-10 w-full"})]})]})]}),u&&!s&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:o.jsxs("div",{className:"flex",children:[o.jsx(ji,{className:"h-5 w-5 text-red-500 mr-3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),o.jsx("div",{className:"mt-2 text-sm text-red-700",children:o.jsx("p",{children:u.message})}),o.jsxs("div",{className:"mt-4",children:[o.jsx(W,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),o.jsx(W,{onClick:g,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),s?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(rt,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),o.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):o.jsx(oG,{onDragEnd:b,onDragStart:v,children:o.jsx("div",{className:"overflow-x-auto pb-6",children:o.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:em.map(C=>o.jsxs("div",{className:`rounded-lg ${C.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[o.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:C.label}),o.jsx(gl,{variant:"outline",className:"text-xs",children:Te(k(C.id))})]}),o.jsx(GG,{droppableId:C.id,children:D=>o.jsxs("div",{ref:D.innerRef,...D.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[N(C.id).map((E,O)=>o.jsx(kG,{draggableId:E.id,index:O,isDragDisabled:i&&E.stage!==C.id,children:(F,L)=>o.jsx(j,{deal:E,provided:F,snapshot:L})},E.id)),D.placeholder,N(C.id).length===0&&!i&&o.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},C.id))})})})]})}const QG=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function KG(){const{id:e}=GN(),t=Ln(),{user:n}=Qe(),[s,r]=x.useState(null),[i,a]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState(!1),[m,p]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&g()},[e]),x.useEffect(()=>{s!=null&&s.leadId&&y(s.leadId)},[s]);const g=async()=>{try{a(!0);const w=await va(e);if(!w){v("Deal not found","error"),t("/deals");return}r(w)}catch(w){console.error("Error fetching deal:",w),v("Error fetching deal details","error")}finally{a(!1)}},y=async w=>{try{f(!0);const S=await ad(w);c(S);const N=[];S.forEach(k=>{if(k.selectedMachines&&k.selectedMachines.length>0)k.selectedMachines.forEach(j=>{N.some(C=>C.id===j.id)||N.push(j)});else if(k.selectedEquipment&&k.selectedEquipment.id){const j={id:k.selectedEquipment.id,machineType:k.machineType,equipmentId:k.selectedEquipment.equipmentId,name:k.selectedEquipment.name,baseRates:k.selectedEquipment.baseRates,baseRate:k.selectedEquipment.baseRates[k.orderType],runningCostPerKm:k.runningCostPerKm,quantity:1};N.some(C=>C.id===j.id)||N.push(j)}}),d(N)}catch(S){console.error("Error fetching deal equipment:",S)}finally{f(!1)}},b=async w=>{if(s)try{const S=await m2(s.id,w);S&&(r(S),v(`Deal stage updated to ${w}`,"success"))}catch(S){console.error("Error updating deal stage:",S),v("Error updating deal stage","error")}},v=(w,S="success")=>{p({show:!0,title:w,variant:S}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?o.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx(rt,{className:"h-8 w-8 animate-spin text-primary-600"})}):s?o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[o.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(W,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[o.jsx(ZN,{size:16,className:"sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),o.jsx("div",{className:"sm:hidden",children:o.jsx(ae,{children:o.jsx(le,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-700 font-medium",children:"Value"}),o.jsx("div",{className:"text-lg font-bold text-primary-700",children:Te(s.value)})]}),o.jsx(W,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})]})})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{className:"p-4 sm:p-6",children:o.jsx(ye,{children:"Deal Information"})}),o.jsxs(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:s.title}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),o.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:Te(s.value)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),o.jsx("div",{className:"mt-1",children:o.jsx(ke,{value:s.stage,onChange:w=>b(w),options:QG,className:"w-full sm:w-[200px] text-sm"})})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.createdAt).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(s.expectedCloseDate).toLocaleDateString()})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),o.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[s.probability,"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),o.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:s.assignedTo})]})]})]})]}),o.jsxs(ae,{children:[o.jsx(xe,{className:"p-4 sm:p-6",children:o.jsx(ye,{children:"Notes"})}),o.jsx(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:o.jsx("p",{className:"text-sm text-gray-600",children:s.notes||"No notes available."})})]})]}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs(ae,{children:[o.jsx(xe,{className:"p-4 sm:p-6",children:o.jsx(ye,{children:"Customer Information"})}),o.jsxs(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ma,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm sm:text-base",children:s.customer.name}),o.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:s.customer.designation})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600 break-words",children:s.customer.company})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(cA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.customer.email})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pA,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.phone})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(qg,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),o.jsx("div",{className:"text-sm text-gray-600",children:s.customer.address})]})]})]}),"          ",o.jsxs(ae,{className:"mb-4",children:[o.jsx(xe,{className:"p-4 sm:p-6",children:o.jsxs(ye,{className:"flex items-center",children:[o.jsx(fA,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),o.jsx(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx(rt,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?o.jsx("div",{className:"space-y-2",children:u.map(w=>o.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm",children:w.name}),o.jsx("p",{className:"text-xs text-gray-500",children:w.machineType})]}),o.jsx("div",{className:"text-sm text-right",children:o.jsxs("span",{className:"font-medium",children:["Qty: ",w.quantity]})})]}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[o.jsxs("div",{children:["Base Rate: ",Te(w.baseRate)]}),o.jsxs("div",{children:["Cost/Km: ",Te(w.runningCostPerKm)]})]})]},w.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),o.jsxs(ae,{className:"hidden sm:block",children:[o.jsx(xe,{className:"p-4 sm:p-6",children:o.jsx(ye,{children:"Actions"})}),o.jsx(le,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:o.jsx(W,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${s.id}`),variant:"accent",children:"Create Quotation"})})]})]})]}),m.show&&o.jsx(mt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const Up=[{type:"customer.name",label:"Customer Name"},{type:"customer.company",label:"Company"},{type:"customer.email",label:"Email"},{type:"customer.phone",label:"Phone"},{type:"customer.address",label:"Address"},{type:"quotation.id",label:"Quotation ID"},{type:"quotation.date",label:"Date"},{type:"quotation.validUntil",label:"Valid Until"},{type:"quotation.totalAmount",label:"Total Amount"},{type:"quotation.workingCost",label:"Working Cost"},{type:"quotation.mobDemobCost",label:"Mob/Demob Cost"},{type:"quotation.foodAccomCost",label:"Food & Accommodation"},{type:"quotation.gstAmount",label:"GST Amount"},{type:"quotation.machineType",label:"Machine Type"},{type:"quotation.numberOfDays",label:"Number of Days"},{type:"quotation.workingHours",label:"Working Hours"}],XG=[{type:"text",label:"Text Block",icon:bA,description:"Add custom text content"},{type:"field",label:"Dynamic Field",icon:Ht,description:"Insert quotation data"},{type:"table",label:"Data Table",icon:yA,description:"Display tabular data"},{type:"image",label:"Image/Logo",icon:Hg,description:"Add company logo or images"},{type:"spacer",label:"Spacer",icon:aS,description:"Add vertical spacing"}],JG=({element:e,onUpdate:t,onDelete:n})=>{var i;const s=a=>{t({...e,content:a})},r=a=>{t({...e,fieldType:a})};return o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 mb-2 group hover:border-blue-300 transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium capitalize text-gray-800",children:e.type}),e.type==="field"&&e.fieldType&&o.jsx("span",{className:"text-xs bg-blue-200 text-blue-900 px-2 py-1 rounded",children:(i=Up.find(a=>a.type===e.fieldType))==null?void 0:i.label})]}),o.jsx(W,{size:"sm",variant:"ghost",onClick:n,className:"text-red-600 hover:text-red-700",children:o.jsx(Er,{className:"h-3 w-3"})})]}),e.type==="text"&&o.jsx(Ue,{value:e.content||"",onChange:a=>s(a.target.value),placeholder:"Enter text content...",className:"mb-3"}),e.type==="field"&&o.jsxs("select",{value:e.fieldType||"",onChange:a=>r(a.target.value),className:"w-full p-2 border border-gray-300 rounded-md mb-3 text-gray-900 font-medium bg-white",children:[o.jsx("option",{value:"",className:"text-gray-900 font-medium bg-blue-100",children:"Select a field..."}),Up.map(a=>o.jsx("option",{value:a.type,className:"text-gray-900 font-medium bg-white",children:a.label},a.type))]})]})},ZG=({elements:e})=>{const t=n=>{switch(n.type){case"text":return o.jsx("div",{className:"mb-2 text-gray-900",children:n.content||"Sample text content"});case"field":const s=Up.find(r=>r.type===n.fieldType);return o.jsx("div",{className:"mb-2 bg-blue-100 border border-blue-300 px-2 py-1 rounded inline-block text-blue-900",children:s?`{${s.label}}`:"{Select Field}"});case"table":return o.jsx("div",{className:"mb-4",children:o.jsxs("table",{className:"w-full border border-gray-300",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Item"}),o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Quantity"}),o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Rate"}),o.jsx("th",{className:"border border-gray-300 px-2 py-1 text-left",children:"Amount"})]})}),o.jsx("tbody",{children:o.jsxs("tr",{children:[o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"Equipment Name"}),o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"1"}),o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"1000"}),o.jsx("td",{className:"border border-gray-300 px-2 py-1",children:"1000"})]})})]})});case"image":return o.jsxs("div",{className:"mb-4 border-2 border-dashed border-gray-300 p-8 text-center",children:[o.jsx(Hg,{className:"h-12 w-12 text-gray-500 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-700",children:"Company Logo / Image"})]});case"spacer":return o.jsx("div",{style:{height:20},className:"mb-2"});default:return null}};return o.jsx("div",{className:"bg-white p-8 border border-gray-200 rounded-lg min-h-[600px]",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:e.length===0?o.jsxs("div",{className:"text-center text-gray-700 py-12",children:[o.jsx(Ht,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),o.jsx("p",{children:"Start building your template by adding components"})]}):e.map(n=>o.jsx("div",{children:t(n)},n.id))})})},eY=({onSave:e,initialTemplate:t})=>{const[n,s]=x.useState((t==null?void 0:t.name)||""),[r,i]=x.useState((t==null?void 0:t.elements)||[]),[a,l]=x.useState(!1);let c=0;const u=()=>(c+=1,`element_${c}_${Date.now()}`),d=p=>{const g={id:u(),type:p,content:p==="text"?"Sample text":void 0};i(y=>[...y,g])},h=p=>{i(g=>g.map(y=>y.id===p.id?p:y))},f=p=>{i(g=>g.filter(y=>y.id!==p))},m=()=>{if(!n.trim()){alert("Please enter a template name");return}e({name:n,elements:r})};return o.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[o.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Template Builder"}),o.jsx(Ue,{value:n,onChange:p=>s(p.target.value),placeholder:"Enter template name...",className:"w-64"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(W,{variant:"ghost",onClick:()=>l(!a),leftIcon:o.jsx(Bu,{}),children:a?"Edit":"Preview"}),o.jsx(W,{onClick:m,leftIcon:o.jsx(Ni,{}),children:"Save Template"})]})]})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[!a&&o.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 p-4 overflow-y-auto",children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Components"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:XG.map(p=>{const g=p.icon;return o.jsxs("div",{className:"p-3 bg-white border border-gray-200 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200",onClick:()=>d(p.type),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(g,{className:"h-4 w-4 text-blue-700"}),o.jsx("span",{className:"font-semibold text-base text-gray-900",children:p.label})]}),o.jsx("p",{className:"text-xs text-gray-900 font-medium",children:p.description})]},p.type)})})]}),o.jsx("div",{className:"flex-1 flex overflow-hidden",children:a?o.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:o.jsx(ZG,{elements:r})}):o.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(ae,{children:[o.jsx(xe,{children:o.jsx(ye,{children:"Template Structure"})}),o.jsx(le,{children:r.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(ds,{className:"h-16 w-16 text-blue-400 mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-gray-900 font-semibold",children:"Click on components from the left panel to add them to your template"})]}):o.jsx("div",{className:"space-y-2",children:r.map(p=>o.jsx(JG,{element:p,onUpdate:h,onDelete:()=>f(p.id)},p.id))})})]})})})})]})]})};async function tY(){const t=await fetch("http://103.224.243.242:3001/api/templates/modern",{method:"GET",headers:Le(),credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch modern templates: ${t.status} ${t.statusText}`);const n=await t.json();return Array.isArray(n)?n:n.data||[]}async function E1(e){const n=await fetch("http://103.224.243.242:3001/api/templates/modern",{method:"POST",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create modern template");const s=await n.json();return s.data||s}async function nY(e,t){const s=await fetch(`http://103.224.243.242:3001/api/templates/modern/${e}`,{method:"PATCH",headers:{...Le(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!s.ok)throw new Error("Failed to update modern template");const r=await s.json();return r.data||r}async function sY(e){if(!(await fetch(`http://103.224.243.242:3001/api/templates/modern/${e}`,{method:"DELETE",headers:Le(),credentials:"include"})).ok)throw new Error("Failed to delete modern template")}const rY=()=>{const[e,t]=x.useState([]),[n,s]=x.useState(!0),[r,i]=x.useState(""),[a,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState("grid"),[f,m]=x.useState("all"),[p,g]=x.useState({show:!1,title:""});x.useEffect(()=>{y()},[]);const y=async()=>{try{s(!0);const E=await tY();t(E)}catch(E){console.error("Error fetching templates:",E),j("Error loading templates","error")}finally{s(!1)}},b=()=>{l(null),u(!0)},v=E=>{l(E),u(!0)},w=async E=>{try{if(a){const O=await nY(a.id,{...E,updatedAt:new Date().toISOString()});t(F=>F.map(L=>L.id===a.id?O:L)),j("Template updated successfully","success")}else{const O=await E1({...E,description:"",createdBy:"Current User",usage_count:0,tags:[]});t(F=>[O,...F]),j("Template created successfully","success")}u(!1)}catch(O){console.error("Error saving template:",O),j("Error saving template","error")}},S=async E=>{if(window.confirm("Are you sure you want to delete this template?"))try{await sY(E),t(O=>O.filter(F=>F.id!==E)),j("Template deleted successfully","success")}catch(O){console.error("Error deleting template:",O),j("Error deleting template","error")}},N=async E=>{try{const O=await E1({...E,name:`${E.name} (Copy)`,createdBy:"Current User",usage_count:0,isDefault:!1});t(F=>[O,...F]),j("Template duplicated successfully","success")}catch(O){console.error("Error duplicating template:",O),j("Error duplicating template","error")}},k=E=>{console.log("Preview template:",E)},j=(E,O="success")=>{g({show:!0,title:E,variant:O}),setTimeout(()=>g({show:!1,title:""}),3e3)},C=e.filter(E=>{var L,P;const O=E.name.toLowerCase().includes(r.toLowerCase())||((L=E.description)==null?void 0:L.toLowerCase().includes(r.toLowerCase())),F=f==="all"||((P=E.tags)==null?void 0:P.includes(f));return O&&F}),D=["all",...new Set(e.flatMap(E=>E.tags||[]))];return c?o.jsx(eY,{onSave:w,initialTemplate:a?{name:a.name,elements:a.elements}:void 0}):o.jsxs("div",{className:"container mx-auto py-6 px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Management"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage quotation templates"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(W,{variant:"ghost",leftIcon:o.jsx(lS,{}),children:"Import"}),o.jsx(W,{onClick:b,leftIcon:o.jsx(ds,{}),className:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",children:"Create Template"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ue,{placeholder:"Search templates...",value:r,onChange:E=>i(E.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("select",{value:f,onChange:E=>m(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:D.map(E=>o.jsx("option",{value:E,children:E==="all"?"All Categories":E.charAt(0).toUpperCase()+E.slice(1)},E))}),o.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[o.jsx(W,{variant:d==="grid"?"accent":"ghost",size:"sm",onClick:()=>h("grid"),className:"rounded-none",children:o.jsx(rA,{className:"h-4 w-4"})}),o.jsx(W,{variant:d==="list"?"accent":"ghost",size:"sm",onClick:()=>h("list"),className:"rounded-none",children:o.jsx(oA,{className:"h-4 w-4"})})]})]})]}),n?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsx("div",{className:d==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:C.map(E=>o.jsx(ae,{className:`group hover:shadow-lg transition-all duration-200 ${E.isDefault?"ring-2 ring-primary-200":""} ${d==="list"?"flex-row":""}`,children:d==="grid"?o.jsxs(o.Fragment,{children:[o.jsxs(xe,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ht,{className:"h-5 w-5 text-primary-600"}),E.isDefault&&o.jsx(F0,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>k(E),children:o.jsx(Bu,{className:"h-3 w-3"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>v(E),children:o.jsx(L0,{className:"h-3 w-3"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>N(E),children:o.jsx(R0,{className:"h-3 w-3"})}),!E.isDefault&&o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>S(E.id),className:"text-red-600 hover:text-red-700",children:o.jsx(Er,{className:"h-3 w-3"})})]})]}),o.jsx(ye,{className:"text-lg",children:E.name}),E.description&&o.jsx("p",{className:"text-sm text-gray-600",children:E.description})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-3",children:[E.tags&&E.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:E.tags.map(O=>o.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:O},O))}),o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ma,{className:"h-3 w-3"}),o.jsx("span",{children:E.createdBy})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(En,{className:"h-3 w-3"}),o.jsx("span",{children:new Date(E.updatedAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Used ",E.usage_count||0," times"]})]})})]}):o.jsxs("div",{className:"flex items-center justify-between p-4 w-full",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ht,{className:"h-5 w-5 text-primary-600"}),E.isDefault&&o.jsx(F0,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:E.name}),o.jsx("p",{className:"text-sm text-gray-600",children:E.description}),o.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[o.jsxs("span",{children:["By ",E.createdBy]}),o.jsxs("span",{children:["Updated ",new Date(E.updatedAt).toLocaleDateString()]}),o.jsxs("span",{children:["Used ",E.usage_count||0," times"]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>k(E),children:o.jsx(Bu,{className:"h-4 w-4"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>v(E),children:o.jsx(L0,{className:"h-4 w-4"})}),o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>N(E),children:o.jsx(R0,{className:"h-4 w-4"})}),!E.isDefault&&o.jsx(W,{size:"sm",variant:"ghost",onClick:()=>S(E.id),className:"text-red-600 hover:text-red-700",children:o.jsx(Er,{className:"h-4 w-4"})})]})]})},E.id))}),C.length===0&&!n&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Ht,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),o.jsx("p",{className:"text-gray-600 mb-2",children:r||f!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first template."}),o.jsx("p",{className:"text-gray-500 mb-4",children:"You can create a new template from here. Click the button below to get started."}),!r&&f==="all"&&o.jsx(W,{onClick:b,leftIcon:o.jsx(ds,{}),children:"Create Your First Template"})]}),p.show&&o.jsx(mt,{title:p.title,variant:p.variant,isVisible:p.show,onClose:()=>g({show:!1,title:""})})]})},iY=({children:e})=>{const{isAuthenticated:t,user:n,setUser:s}=Qe();return x.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await gS();i&&s(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,s]),o.jsx(o.Fragment,{children:e})};function Tt({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:s,isAuthenticated:r,setUser:i}=Qe(),[a,l]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const u=await gS();u?(!s||s.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[s,i]),a?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(`🔒 Protected Route Check - Authenticated: ${r}, User: ${(s==null?void 0:s.name)||"none"}`),!r||!s?(console.log(`❌ Route protection failed - redirecting to ${t}`),o.jsx(Wn,{to:t,replace:!0})):n&&!n.includes(s.role)?(console.log(`❌ Role protection failed - user has ${s.role} but needs one of [${n.join(",")}]`),o.jsx(Wn,{to:"/dashboard",replace:!0})):(console.log("✅ Route protection passed - rendering protected content"),e?o.jsx(o.Fragment,{children:e}):o.jsx(JN,{})))}function aY(){const{user:e,isAuthenticated:t}=Qe();if(console.log("🎯 DashboardRouter called"),console.log("🔍 Authentication state:",{isAuthenticated:t}),console.log("👤 User object:",JSON.stringify(e,null,2)),console.log("🏷️ User role:",e==null?void 0:e.role),!t||!e)return console.log("❌ DashboardRouter: Not authenticated, redirecting to login"),o.jsx(Wn,{to:"/login",replace:!0});if(!e.role)return console.error("❌ DashboardRouter: User authenticated but role is undefined!"),console.error("📊 Full user object:",e),console.log("🔄 Fallback: Showing AdminDashboard due to missing role"),o.jsx(Nf,{});switch(console.log("✅ DashboardRouter: User role is",e.role),e.role){case"admin":return console.log("📊 Rendering AdminDashboard"),o.jsx(Nf,{});case"sales_agent":return console.log("📊 Rendering SalesAgentDashboard"),o.jsx(fz,{});case"operations_manager":return console.log("📊 Rendering OperationsManagerDashboard"),o.jsx(xz,{});case"operator":return console.log("📊 Rendering OperatorDashboard"),o.jsx(vz,{});default:return console.log("❌ Unknown user role:",e.role,"showing AdminDashboard as fallback"),o.jsx(Nf,{})}}function oY(){const e=window.location.pathname==="/"||window.location.pathname==="";if(console.log("🔍 AppContent - Current pathname:",window.location.pathname),console.log("🔍 AppContent - Is root URL:",e),e)return console.log("📍 Redirecting from root to /login"),o.jsx(Wn,{to:"/login",replace:!0});const t=o.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),o.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return o.jsx(x.Suspense,{fallback:t,children:o.jsxs(P_,{children:[o.jsx(qe,{path:"/blank-check.html",element:o.jsx(Wn,{to:"/blank-check.html",replace:!0})}),o.jsx(qe,{path:"/api-test.html",element:o.jsx(Wn,{to:"/api-test.html",replace:!0})}),o.jsx(qe,{path:"/login",element:o.jsx(uM,{})}),o.jsx(qe,{element:o.jsx(Tt,{}),children:o.jsxs(qe,{path:"/",element:o.jsx(p5,{}),children:[o.jsx(qe,{index:!0,element:o.jsx(Wn,{to:"/dashboard",replace:!0})}),o.jsx(qe,{path:"dashboard",element:o.jsx(aY,{})}),o.jsx(qe,{path:"admin/users",element:o.jsx(Tt,{allowedRoles:["admin"],children:o.jsx(cW,{})})}),o.jsx(qe,{path:"admin/config",element:o.jsx(Tt,{allowedRoles:["admin"],children:o.jsx(SW,{})})}),o.jsx(qe,{path:"admin/equipment",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager"],children:o.jsx(nW,{})})}),o.jsx(qe,{path:"admin/services",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager"],children:o.jsx(rW,{})})}),o.jsx(qe,{path:"admin/templates",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent"],children:o.jsx(rY,{})})}),o.jsx(qe,{path:"leads",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(m8,{})})}),o.jsx(qe,{path:"customers",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(CW,{})})}),o.jsx(qe,{path:"deals",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(YG,{})})}),o.jsx(qe,{path:"deals/:id",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(KG,{})})}),o.jsx(qe,{path:"quotations",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent","operations_manager"],children:o.jsx(b8,{})})}),o.jsx(qe,{path:"quotations/create",element:o.jsx(Tt,{allowedRoles:["admin","sales_agent"],children:o.jsx(_8,{})})}),o.jsx(qe,{path:"jobs",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(UU,{})})}),o.jsx(qe,{path:"job-test",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(qU,{})})}),o.jsx(qe,{path:"site-assessments",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(YU,{})})}),o.jsx(qe,{path:"job-summary",element:o.jsx(Tt,{allowedRoles:["admin","operations_manager","operator"],children:o.jsx(KU,{})})}),o.jsx(qe,{path:"*",element:o.jsx(Wn,{to:"/dashboard",replace:!0})})]})})]})})}function lY(){return o.jsx(F_,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:o.jsx(iY,{children:o.jsx(DA,{children:o.jsxs(o.Fragment,{children:[o.jsx(oY,{}),o.jsx(kA,{})]})})})})}console.log("🚀 Starting ASP Cranes CRM...");console.log("🔍 Current URL:",window.location.href);console.log("💾 localStorage contents:",{"jwt-token":localStorage.getItem("jwt-token")?"Present":"Missing","explicit-login-performed":localStorage.getItem("explicit-login-performed"),"auth-storage":localStorage.getItem("auth-storage")?"Present":"Missing"});console.log("🔄 Auth store hydration temporarily disabled for debugging");document.body.classList.contains("dark")||document.body.classList.add("dark");const tm=document.getElementById("root");if(!tm)console.error("❌ Failed to find root element"),document.body.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">Error: Root element not found</div>';else{console.log("✅ Root element found, creating React app...");try{BN(tm).render(o.jsx(x.StrictMode,{children:o.jsx(x.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading ASP Cranes CRM..."})]})}),children:o.jsx(lY,{})})})),console.log("🎉 React application rendered successfully")}catch(e){console.error("❌ React render error:",e),tm.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">React render error: '+e+"</div>"}}
