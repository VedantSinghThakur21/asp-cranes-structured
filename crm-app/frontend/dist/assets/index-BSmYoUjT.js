var lT=Object.defineProperty;var cT=(e,t,n)=>t in e?lT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ue=(e,t,n)=>cT(e,typeof t!="symbol"?t+"":t,n);function uT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function kd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cj={exports:{}},Ed={},uj={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),dT=Symbol.for("react.portal"),hT=Symbol.for("react.fragment"),fT=Symbol.for("react.strict_mode"),mT=Symbol.for("react.profiler"),pT=Symbol.for("react.provider"),gT=Symbol.for("react.context"),xT=Symbol.for("react.forward_ref"),yT=Symbol.for("react.suspense"),vT=Symbol.for("react.memo"),bT=Symbol.for("react.lazy"),Iy=Symbol.iterator;function wT(e){return e===null||typeof e!="object"?null:(e=Iy&&e[Iy]||e["@@iterator"],typeof e=="function"?e:null)}var dj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hj=Object.assign,fj={};function Co(e,t,n){this.props=e,this.context=t,this.refs=fj,this.updater=n||dj}Co.prototype.isReactComponent={};Co.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Co.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mj(){}mj.prototype=Co.prototype;function ig(e,t,n){this.props=e,this.context=t,this.refs=fj,this.updater=n||dj}var og=ig.prototype=new mj;og.constructor=ig;hj(og,Co.prototype);og.isPureReactComponent=!0;var Oy=Array.isArray,pj=Object.prototype.hasOwnProperty,ag={current:null},gj={key:!0,ref:!0,__self:!0,__source:!0};function xj(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)pj.call(t,r)&&!gj.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:_l,type:e,key:i,ref:o,props:s,_owner:ag.current}}function jT(e,t){return{$$typeof:_l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lg(e){return typeof e=="object"&&e!==null&&e.$$typeof===_l}function ST(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ry=/\/+/g;function Eh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ST(""+e.key):t.toString(36)}function Hc(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _l:case dT:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Eh(o,0):r,Oy(s)?(n="",e!=null&&(n=e.replace(Ry,"$&/")+"/"),Hc(s,t,n,"",function(u){return u})):s!=null&&(lg(s)&&(s=jT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ry,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Oy(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Eh(i,l);o+=Hc(i,t,n,c,s)}else if(c=wT(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Eh(i,l++),o+=Hc(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Jl(e,t,n){if(e==null)return e;var r=[],s=0;return Hc(e,r,"","",function(i){return t.call(n,i,s++)}),r}function CT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wt={current:null},qc={transition:null},NT={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:qc,ReactCurrentOwner:ag};function yj(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Jl,forEach:function(e,t,n){Jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Jl(e,function(){t++}),t},toArray:function(e){return Jl(e,function(t){return t})||[]},only:function(e){if(!lg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Co;Ne.Fragment=hT;Ne.Profiler=mT;Ne.PureComponent=ig;Ne.StrictMode=fT;Ne.Suspense=yT;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NT;Ne.act=yj;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hj({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ag.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)pj.call(t,c)&&!gj.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:_l,type:e.type,key:s,ref:i,props:r,_owner:o}};Ne.createContext=function(e){return e={$$typeof:gT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pT,_context:e},e.Consumer=e};Ne.createElement=xj;Ne.createFactory=function(e){var t=xj.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:xT,render:e}};Ne.isValidElement=lg;Ne.lazy=function(e){return{$$typeof:bT,_payload:{_status:-1,_result:e},_init:CT}};Ne.memo=function(e,t){return{$$typeof:vT,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=qc.transition;qc.transition={};try{e()}finally{qc.transition=t}};Ne.unstable_act=yj;Ne.useCallback=function(e,t){return Wt.current.useCallback(e,t)};Ne.useContext=function(e){return Wt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Wt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Wt.current.useEffect(e,t)};Ne.useId=function(){return Wt.current.useId()};Ne.useImperativeHandle=function(e,t,n){return Wt.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return Wt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Wt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Wt.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return Wt.current.useReducer(e,t,n)};Ne.useRef=function(e){return Wt.current.useRef(e)};Ne.useState=function(e){return Wt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return Wt.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return Wt.current.useTransition()};Ne.version="18.3.1";uj.exports=Ne;var x=uj.exports;const se=kd(x),cg=uT({__proto__:null,default:se},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT=x,ET=Symbol.for("react.element"),DT=Symbol.for("react.fragment"),TT=Object.prototype.hasOwnProperty,PT=kT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_T={key:!0,ref:!0,__self:!0,__source:!0};function vj(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)TT.call(t,r)&&!_T.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ET,type:e,key:i,ref:o,props:s,_owner:PT.current}}Ed.Fragment=DT;Ed.jsx=vj;Ed.jsxs=vj;cj.exports=Ed;var a=cj.exports,bj={exports:{}},fn={},wj={exports:{}},jj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,I){var H=P.length;P.push(I);e:for(;0<H;){var G=H-1>>>1,ee=P[G];if(0<s(ee,I))P[G]=I,P[H]=ee,H=G;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var I=P[0],H=P.pop();if(H!==I){P[0]=H;e:for(var G=0,ee=P.length,ie=ee>>>1;G<ie;){var V=2*(G+1)-1,X=P[V],U=V+1,O=P[U];if(0>s(X,H))U<ee&&0>s(O,X)?(P[G]=O,P[U]=H,G=U):(P[G]=X,P[V]=H,G=V);else if(U<ee&&0>s(O,H))P[G]=O,P[U]=H,G=U;else break e}}return I}function s(P,I){var H=P.sortIndex-I.sortIndex;return H!==0?H:P.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=P)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function S(P){if(g=!1,w(P),!p)if(n(c)!==null)p=!0,z(j);else{var I=n(u);I!==null&&M(S,I.startTime-P)}}function j(P,I){p=!1,g&&(g=!1,b(C),C=-1),m=!0;var H=f;try{for(w(I),h=n(c);h!==null&&(!(h.expirationTime>I)||P&&!$());){var G=h.callback;if(typeof G=="function"){h.callback=null,f=h.priorityLevel;var ee=G(h.expirationTime<=I);I=e.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(c)&&r(c),w(I)}else r(c);h=n(c)}if(h!==null)var ie=!0;else{var V=n(u);V!==null&&M(S,V.startTime-I),ie=!1}return ie}finally{h=null,f=H,m=!1}}var k=!1,N=null,C=-1,E=5,D=-1;function $(){return!(e.unstable_now()-D<E)}function B(){if(N!==null){var P=e.unstable_now();D=P;var I=!0;try{I=N(!0,P)}finally{I?F():(k=!1,N=null)}}else k=!1}var F;if(typeof v=="function")F=function(){v(B)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,A=T.port2;T.port1.onmessage=B,F=function(){A.postMessage(null)}}else F=function(){y(B,0)};function z(P){N=P,k||(k=!0,F())}function M(P,I){C=y(function(){P(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,z(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var H=f;f=I;try{return P()}finally{f=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=f;f=P;try{return I()}finally{f=H}},e.unstable_scheduleCallback=function(P,I,H){var G=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,P){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=H+ee,P={id:d++,callback:I,priorityLevel:P,startTime:H,expirationTime:ee,sortIndex:-1},H>G?(P.sortIndex=H,t(u,P),n(c)===null&&P===n(u)&&(g?(b(C),C=-1):g=!0,M(S,H-G))):(P.sortIndex=ee,t(c,P),p||m||(p=!0,z(j))),P},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(P){var I=f;return function(){var H=f;f=I;try{return P.apply(this,arguments)}finally{f=H}}}})(jj);wj.exports=jj;var AT=wj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=x,dn=AT;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sj=new Set,qa={};function xi(e,t){io(e,t),io(e+"Capture",t)}function io(e,t){for(qa[e]=t,e=0;e<t.length;e++)Sj.add(t[e])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mm=Object.prototype.hasOwnProperty,IT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ly={},Fy={};function OT(e){return mm.call(Fy,e)?!0:mm.call(Ly,e)?!1:IT.test(e)?Fy[e]=!0:(Ly[e]=!0,!1)}function RT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function LT(e,t,n,r){if(t===null||typeof t>"u"||RT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ht(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nt[e]=new Ht(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Nt[t]=new Ht(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nt[e]=new Ht(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nt[e]=new Ht(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nt[e]=new Ht(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nt[e]=new Ht(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nt[e]=new Ht(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nt[e]=new Ht(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nt[e]=new Ht(e,5,!1,e.toLowerCase(),null,!1,!1)});var ug=/[\-:]([a-z])/g;function dg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ug,dg);Nt[t]=new Ht(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ug,dg);Nt[t]=new Ht(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ug,dg);Nt[t]=new Ht(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nt[e]=new Ht(e,1,!1,e.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nt[e]=new Ht(e,1,!1,e.toLowerCase(),null,!0,!0)});function hg(e,t,n,r){var s=Nt.hasOwnProperty(t)?Nt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(LT(t,n,s,r)&&(n=null),r||s===null?OT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Or=MT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Ii=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),fg=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),Cj=Symbol.for("react.provider"),Nj=Symbol.for("react.context"),mg=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),xm=Symbol.for("react.suspense_list"),pg=Symbol.for("react.memo"),Hr=Symbol.for("react.lazy"),kj=Symbol.for("react.offscreen"),$y=Symbol.iterator;function Uo(e){return e===null||typeof e!="object"?null:(e=$y&&e[$y]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Object.assign,Dh;function ma(e){if(Dh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dh=t&&t[1]||""}return`
`+Dh+e}var Th=!1;function Ph(e,t){if(!e||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ma(e):""}function FT(e){switch(e.tag){case 5:return ma(e.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 2:case 15:return e=Ph(e.type,!1),e;case 11:return e=Ph(e.type.render,!1),e;case 1:return e=Ph(e.type,!0),e;default:return""}}function ym(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oi:return"Fragment";case Ii:return"Portal";case pm:return"Profiler";case fg:return"StrictMode";case gm:return"Suspense";case xm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nj:return(e.displayName||"Context")+".Consumer";case Cj:return(e._context.displayName||"Context")+".Provider";case mg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pg:return t=e.displayName||null,t!==null?t:ym(e.type)||"Memo";case Hr:t=e._payload,e=e._init;try{return ym(e(t))}catch{}}return null}function $T(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ym(t);case 8:return t===fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ej(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zT(e){var t=Ej(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ec(e){e._valueTracker||(e._valueTracker=zT(e))}function Dj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ej(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vm(e,t){var n=t.checked;return Je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tj(e,t){t=t.checked,t!=null&&hg(e,"checked",t,!1)}function bm(e,t){Tj(e,t);var n=vs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wm(e,t.type,n):t.hasOwnProperty("defaultValue")&&wm(e,t.type,vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function By(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function wm(e,t,n){(t!=="number"||gu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pa=Array.isArray;function Ki(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function jm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Z(92));if(pa(n)){if(1<n.length)throw Error(Z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vs(n)}}function Pj(e,t){var n=vs(t.value),r=vs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Uy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _j(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_j(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tc,Aj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ga(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BT=["Webkit","ms","Moz","O"];Object.keys(Na).forEach(function(e){BT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Na[t]=Na[e]})});function Mj(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Na.hasOwnProperty(e)&&Na[e]?(""+t).trim():t+"px"}function Ij(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Mj(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var VT=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cm(e,t){if(t){if(VT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function Nm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var km=null;function gg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Em=null,Xi=null,Ji=null;function Wy(e){if(e=Il(e)){if(typeof Em!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Ad(t),Em(e.stateNode,e.type,t))}}function Oj(e){Xi?Ji?Ji.push(e):Ji=[e]:Xi=e}function Rj(){if(Xi){var e=Xi,t=Ji;if(Ji=Xi=null,Wy(e),t)for(e=0;e<t.length;e++)Wy(t[e])}}function Lj(e,t){return e(t)}function Fj(){}var _h=!1;function $j(e,t,n){if(_h)return e(t,n);_h=!0;try{return Lj(e,t,n)}finally{_h=!1,(Xi!==null||Ji!==null)&&(Fj(),Rj())}}function Ya(e,t){var n=e.stateNode;if(n===null)return null;var r=Ad(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Z(231,t,typeof n));return n}var Dm=!1;if(Tr)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){Dm=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{Dm=!1}function UT(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var ka=!1,xu=null,yu=!1,Tm=null,WT={onError:function(e){ka=!0,xu=e}};function HT(e,t,n,r,s,i,o,l,c){ka=!1,xu=null,UT.apply(WT,arguments)}function qT(e,t,n,r,s,i,o,l,c){if(HT.apply(this,arguments),ka){if(ka){var u=xu;ka=!1,xu=null}else throw Error(Z(198));yu||(yu=!0,Tm=u)}}function yi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Hy(e){if(yi(e)!==e)throw Error(Z(188))}function GT(e){var t=e.alternate;if(!t){if(t=yi(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Hy(s),e;if(i===r)return Hy(s),t;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?e:t}function Bj(e){return e=GT(e),e!==null?Vj(e):null}function Vj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vj(e);if(t!==null)return t;e=e.sibling}return null}var Uj=dn.unstable_scheduleCallback,qy=dn.unstable_cancelCallback,YT=dn.unstable_shouldYield,QT=dn.unstable_requestPaint,nt=dn.unstable_now,KT=dn.unstable_getCurrentPriorityLevel,xg=dn.unstable_ImmediatePriority,Wj=dn.unstable_UserBlockingPriority,vu=dn.unstable_NormalPriority,XT=dn.unstable_LowPriority,Hj=dn.unstable_IdlePriority,Dd=null,rr=null;function JT(e){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Dd,e,void 0,(e.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:tP,ZT=Math.log,eP=Math.LN2;function tP(e){return e>>>=0,e===0?32:31-(ZT(e)/eP|0)|0}var nc=64,rc=4194304;function ga(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ga(l):(i&=o,i!==0&&(r=ga(i)))}else o=n&~s,o!==0?r=ga(o):i!==0&&(r=ga(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vn(t),s=1<<n,r|=e[n],t&=~s;return r}function nP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Vn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=nP(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Pm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qj(){var e=nc;return nc<<=1,!(nc&4194240)&&(nc=64),e}function Ah(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Al(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vn(t),e[t]=n}function sP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Vn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function yg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Le=0;function Gj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yj,vg,Qj,Kj,Xj,_m=!1,sc=[],is=null,os=null,as=null,Qa=new Map,Ka=new Map,Yr=[],iP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gy(e,t){switch(e){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Qa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(t.pointerId)}}function Ho(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Il(t),t!==null&&vg(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oP(e,t,n,r,s){switch(t){case"focusin":return is=Ho(is,e,t,n,r,s),!0;case"dragenter":return os=Ho(os,e,t,n,r,s),!0;case"mouseover":return as=Ho(as,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qa.set(i,Ho(Qa.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ka.set(i,Ho(Ka.get(i)||null,e,t,n,r,s)),!0}return!1}function Jj(e){var t=Qs(e.target);if(t!==null){var n=yi(t);if(n!==null){if(t=n.tag,t===13){if(t=zj(n),t!==null){e.blockedOn=t,Xj(e.priority,function(){Qj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Am(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);km=r,n.target.dispatchEvent(r),km=null}else return t=Il(n),t!==null&&vg(t),e.blockedOn=n,!1;t.shift()}return!0}function Yy(e,t,n){Gc(e)&&n.delete(t)}function aP(){_m=!1,is!==null&&Gc(is)&&(is=null),os!==null&&Gc(os)&&(os=null),as!==null&&Gc(as)&&(as=null),Qa.forEach(Yy),Ka.forEach(Yy)}function qo(e,t){e.blockedOn===t&&(e.blockedOn=null,_m||(_m=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,aP)))}function Xa(e){function t(s){return qo(s,e)}if(0<sc.length){qo(sc[0],e);for(var n=1;n<sc.length;n++){var r=sc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(is!==null&&qo(is,e),os!==null&&qo(os,e),as!==null&&qo(as,e),Qa.forEach(t),Ka.forEach(t),n=0;n<Yr.length;n++)r=Yr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yr.length&&(n=Yr[0],n.blockedOn===null);)Jj(n),n.blockedOn===null&&Yr.shift()}var Zi=Or.ReactCurrentBatchConfig,wu=!0;function lP(e,t,n,r){var s=Le,i=Zi.transition;Zi.transition=null;try{Le=1,bg(e,t,n,r)}finally{Le=s,Zi.transition=i}}function cP(e,t,n,r){var s=Le,i=Zi.transition;Zi.transition=null;try{Le=4,bg(e,t,n,r)}finally{Le=s,Zi.transition=i}}function bg(e,t,n,r){if(wu){var s=Am(e,t,n,r);if(s===null)Vh(e,t,r,ju,n),Gy(e,r);else if(oP(s,e,t,n,r))r.stopPropagation();else if(Gy(e,r),t&4&&-1<iP.indexOf(e)){for(;s!==null;){var i=Il(s);if(i!==null&&Yj(i),i=Am(e,t,n,r),i===null&&Vh(e,t,r,ju,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vh(e,t,r,null,n)}}var ju=null;function Am(e,t,n,r){if(ju=null,e=gg(r),e=Qs(e),e!==null)if(t=yi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zj(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ju=e,null}function Zj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KT()){case xg:return 1;case Wj:return 4;case vu:case XT:return 16;case Hj:return 536870912;default:return 16}default:return 16}}var Jr=null,wg=null,Yc=null;function eS(){if(Yc)return Yc;var e,t=wg,n=t.length,r,s="value"in Jr?Jr.value:Jr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Yc=s.slice(e,1<r?1-r:void 0)}function Qc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ic(){return!0}function Qy(){return!1}function mn(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ic:Qy,this.isPropagationStopped=Qy,this}return Je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),t}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jg=mn(No),Ml=Je({},No,{view:0,detail:0}),uP=mn(Ml),Mh,Ih,Go,Td=Je({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Go&&(Go&&e.type==="mousemove"?(Mh=e.screenX-Go.screenX,Ih=e.screenY-Go.screenY):Ih=Mh=0,Go=e),Mh)},movementY:function(e){return"movementY"in e?e.movementY:Ih}}),Ky=mn(Td),dP=Je({},Td,{dataTransfer:0}),hP=mn(dP),fP=Je({},Ml,{relatedTarget:0}),Oh=mn(fP),mP=Je({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),pP=mn(mP),gP=Je({},No,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xP=mn(gP),yP=Je({},No,{data:0}),Xy=mn(yP),vP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wP[e])?!!t[e]:!1}function Sg(){return jP}var SP=Je({},Ml,{key:function(e){if(e.key){var t=vP[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sg,charCode:function(e){return e.type==="keypress"?Qc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CP=mn(SP),NP=Je({},Td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=mn(NP),kP=Je({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sg}),EP=mn(kP),DP=Je({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),TP=mn(DP),PP=Je({},Td,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_P=mn(PP),AP=[9,13,27,32],Cg=Tr&&"CompositionEvent"in window,Ea=null;Tr&&"documentMode"in document&&(Ea=document.documentMode);var MP=Tr&&"TextEvent"in window&&!Ea,tS=Tr&&(!Cg||Ea&&8<Ea&&11>=Ea),Zy=" ",e0=!1;function nS(e,t){switch(e){case"keyup":return AP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ri=!1;function IP(e,t){switch(e){case"compositionend":return rS(t);case"keypress":return t.which!==32?null:(e0=!0,Zy);case"textInput":return e=t.data,e===Zy&&e0?null:e;default:return null}}function OP(e,t){if(Ri)return e==="compositionend"||!Cg&&nS(e,t)?(e=eS(),Yc=wg=Jr=null,Ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tS&&t.locale!=="ko"?null:t.data;default:return null}}var RP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RP[e.type]:t==="textarea"}function sS(e,t,n,r){Oj(r),t=Su(t,"onChange"),0<t.length&&(n=new jg("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Da=null,Ja=null;function LP(e){pS(e,0)}function Pd(e){var t=$i(e);if(Dj(t))return e}function FP(e,t){if(e==="change")return t}var iS=!1;if(Tr){var Rh;if(Tr){var Lh="oninput"in document;if(!Lh){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),Lh=typeof n0.oninput=="function"}Rh=Lh}else Rh=!1;iS=Rh&&(!document.documentMode||9<document.documentMode)}function r0(){Da&&(Da.detachEvent("onpropertychange",oS),Ja=Da=null)}function oS(e){if(e.propertyName==="value"&&Pd(Ja)){var t=[];sS(t,Ja,e,gg(e)),$j(LP,t)}}function $P(e,t,n){e==="focusin"?(r0(),Da=t,Ja=n,Da.attachEvent("onpropertychange",oS)):e==="focusout"&&r0()}function zP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pd(Ja)}function BP(e,t){if(e==="click")return Pd(t)}function VP(e,t){if(e==="input"||e==="change")return Pd(t)}function UP(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wn=typeof Object.is=="function"?Object.is:UP;function Za(e,t){if(Wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!mm.call(t,s)||!Wn(e[s],t[s]))return!1}return!0}function s0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i0(e,t){var n=s0(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s0(n)}}function aS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lS(){for(var e=window,t=gu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gu(e.document)}return t}function Ng(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WP(e){var t=lS(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&aS(n.ownerDocument.documentElement,n)){if(r!==null&&Ng(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=i0(n,i);var o=i0(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HP=Tr&&"documentMode"in document&&11>=document.documentMode,Li=null,Mm=null,Ta=null,Im=!1;function o0(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Im||Li==null||Li!==gu(r)||(r=Li,"selectionStart"in r&&Ng(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ta&&Za(Ta,r)||(Ta=r,r=Su(Mm,"onSelect"),0<r.length&&(t=new jg("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Li)))}function oc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fi={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},Fh={},cS={};Tr&&(cS=document.createElement("div").style,"AnimationEvent"in window||(delete Fi.animationend.animation,delete Fi.animationiteration.animation,delete Fi.animationstart.animation),"TransitionEvent"in window||delete Fi.transitionend.transition);function _d(e){if(Fh[e])return Fh[e];if(!Fi[e])return e;var t=Fi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cS)return Fh[e]=t[n];return e}var uS=_d("animationend"),dS=_d("animationiteration"),hS=_d("animationstart"),fS=_d("transitionend"),mS=new Map,a0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(e,t){mS.set(e,t),xi(t,[e])}for(var $h=0;$h<a0.length;$h++){var zh=a0[$h],qP=zh.toLowerCase(),GP=zh[0].toUpperCase()+zh.slice(1);Es(qP,"on"+GP)}Es(uS,"onAnimationEnd");Es(dS,"onAnimationIteration");Es(hS,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(fS,"onTransitionEnd");io("onMouseEnter",["mouseout","mouseover"]);io("onMouseLeave",["mouseout","mouseover"]);io("onPointerEnter",["pointerout","pointerover"]);io("onPointerLeave",["pointerout","pointerover"]);xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YP=new Set("cancel close invalid load scroll toggle".split(" ").concat(xa));function l0(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,qT(r,t,void 0,e),e.currentTarget=null}function pS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;l0(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;l0(s,l,u),i=c}}}if(yu)throw e=Tm,yu=!1,Tm=null,e}function ze(e,t){var n=t[$m];n===void 0&&(n=t[$m]=new Set);var r=e+"__bubble";n.has(r)||(gS(t,e,2,!1),n.add(r))}function Bh(e,t,n){var r=0;t&&(r|=4),gS(n,e,r,t)}var ac="_reactListening"+Math.random().toString(36).slice(2);function el(e){if(!e[ac]){e[ac]=!0,Sj.forEach(function(n){n!=="selectionchange"&&(YP.has(n)||Bh(n,!1,e),Bh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ac]||(t[ac]=!0,Bh("selectionchange",!1,t))}}function gS(e,t,n,r){switch(Zj(t)){case 1:var s=lP;break;case 4:s=cP;break;default:s=bg}n=s.bind(null,t,n,e),s=void 0,!Dm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vh(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Qs(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}$j(function(){var u=i,d=gg(n),h=[];e:{var f=mS.get(e);if(f!==void 0){var m=jg,p=e;switch(e){case"keypress":if(Qc(n)===0)break e;case"keydown":case"keyup":m=CP;break;case"focusin":p="focus",m=Oh;break;case"focusout":p="blur",m=Oh;break;case"beforeblur":case"afterblur":m=Oh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=hP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=EP;break;case uS:case dS:case hS:m=pP;break;case fS:m=TP;break;case"scroll":m=uP;break;case"wheel":m=_P;break;case"copy":case"cut":case"paste":m=xP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Jy}var g=(t&4)!==0,y=!g&&e==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,b!==null&&(S=Ya(v,b),S!=null&&g.push(tl(v,S,w)))),y)break;v=v.return}0<g.length&&(f=new m(f,p,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==km&&(p=n.relatedTarget||n.fromElement)&&(Qs(p)||p[Pr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=u,p=p?Qs(p):null,p!==null&&(y=yi(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=u),m!==p)){if(g=Ky,S="onMouseLeave",b="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=Jy,S="onPointerLeave",b="onPointerEnter",v="pointer"),y=m==null?f:$i(m),w=p==null?f:$i(p),f=new g(S,v+"leave",m,n,d),f.target=y,f.relatedTarget=w,S=null,Qs(d)===u&&(g=new g(b,v+"enter",p,n,d),g.target=w,g.relatedTarget=y,S=g),y=S,m&&p)t:{for(g=m,b=p,v=0,w=g;w;w=Ei(w))v++;for(w=0,S=b;S;S=Ei(S))w++;for(;0<v-w;)g=Ei(g),v--;for(;0<w-v;)b=Ei(b),w--;for(;v--;){if(g===b||b!==null&&g===b.alternate)break t;g=Ei(g),b=Ei(b)}g=null}else g=null;m!==null&&c0(h,f,m,g,!1),p!==null&&y!==null&&c0(h,y,p,g,!0)}}e:{if(f=u?$i(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=FP;else if(t0(f))if(iS)j=VP;else{j=zP;var k=$P}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=BP);if(j&&(j=j(e,u))){sS(h,j,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&wm(f,"number",f.value)}switch(k=u?$i(u):window,e){case"focusin":(t0(k)||k.contentEditable==="true")&&(Li=k,Mm=u,Ta=null);break;case"focusout":Ta=Mm=Li=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,o0(h,n,d);break;case"selectionchange":if(HP)break;case"keydown":case"keyup":o0(h,n,d)}var N;if(Cg)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ri?nS(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(tS&&n.locale!=="ko"&&(Ri||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ri&&(N=eS()):(Jr=d,wg="value"in Jr?Jr.value:Jr.textContent,Ri=!0)),k=Su(u,C),0<k.length&&(C=new Xy(C,e,null,n,d),h.push({event:C,listeners:k}),N?C.data=N:(N=rS(n),N!==null&&(C.data=N)))),(N=MP?IP(e,n):OP(e,n))&&(u=Su(u,"onBeforeInput"),0<u.length&&(d=new Xy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}pS(h,t)})}function tl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Su(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ya(e,n),i!=null&&r.unshift(tl(e,i,s)),i=Ya(e,t),i!=null&&r.push(tl(e,i,s))),e=e.return}return r}function Ei(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function c0(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ya(n,i),c!=null&&o.unshift(tl(n,c,l))):s||(c=Ya(n,i),c!=null&&o.push(tl(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var QP=/\r\n?/g,KP=/\u0000|\uFFFD/g;function u0(e){return(typeof e=="string"?e:""+e).replace(QP,`
`).replace(KP,"")}function lc(e,t,n){if(t=u0(t),u0(e)!==t&&n)throw Error(Z(425))}function Cu(){}var Om=null,Rm=null;function Lm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fm=typeof setTimeout=="function"?setTimeout:void 0,XP=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,JP=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(e){return d0.resolve(null).then(e).catch(ZP)}:Fm;function ZP(e){setTimeout(function(){throw e})}function Uh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Xa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xa(t)}function ls(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function h0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ko=Math.random().toString(36).slice(2),tr="__reactFiber$"+ko,nl="__reactProps$"+ko,Pr="__reactContainer$"+ko,$m="__reactEvents$"+ko,e_="__reactListeners$"+ko,t_="__reactHandles$"+ko;function Qs(e){var t=e[tr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pr]||n[tr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=h0(e);e!==null;){if(n=e[tr])return n;e=h0(e)}return t}e=n,n=e.parentNode}return null}function Il(e){return e=e[tr]||e[Pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $i(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Ad(e){return e[nl]||null}var zm=[],zi=-1;function Ds(e){return{current:e}}function Ue(e){0>zi||(e.current=zm[zi],zm[zi]=null,zi--)}function Fe(e,t){zi++,zm[zi]=e.current,e.current=t}var bs={},It=Ds(bs),Xt=Ds(!1),ai=bs;function oo(e,t){var n=e.type.contextTypes;if(!n)return bs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Jt(e){return e=e.childContextTypes,e!=null}function Nu(){Ue(Xt),Ue(It)}function f0(e,t,n){if(It.current!==bs)throw Error(Z(168));Fe(It,t),Fe(Xt,n)}function xS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Z(108,$T(e)||"Unknown",s));return Je({},n,r)}function ku(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bs,ai=It.current,Fe(It,e),Fe(Xt,Xt.current),!0}function m0(e,t,n){var r=e.stateNode;if(!r)throw Error(Z(169));n?(e=xS(e,t,ai),r.__reactInternalMemoizedMergedChildContext=e,Ue(Xt),Ue(It),Fe(It,e)):Ue(Xt),Fe(Xt,n)}var xr=null,Md=!1,Wh=!1;function yS(e){xr===null?xr=[e]:xr.push(e)}function n_(e){Md=!0,yS(e)}function Ts(){if(!Wh&&xr!==null){Wh=!0;var e=0,t=Le;try{var n=xr;for(Le=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xr=null,Md=!1}catch(s){throw xr!==null&&(xr=xr.slice(e+1)),Uj(xg,Ts),s}finally{Le=t,Wh=!1}}return null}var Bi=[],Vi=0,Eu=null,Du=0,wn=[],jn=0,li=null,vr=1,br="";function $s(e,t){Bi[Vi++]=Du,Bi[Vi++]=Eu,Eu=e,Du=t}function vS(e,t,n){wn[jn++]=vr,wn[jn++]=br,wn[jn++]=li,li=e;var r=vr;e=br;var s=32-Vn(r)-1;r&=~(1<<s),n+=1;var i=32-Vn(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,vr=1<<32-Vn(t)+s|n<<s|r,br=i+e}else vr=1<<i|n<<s|r,br=e}function kg(e){e.return!==null&&($s(e,1),vS(e,1,0))}function Eg(e){for(;e===Eu;)Eu=Bi[--Vi],Bi[Vi]=null,Du=Bi[--Vi],Bi[Vi]=null;for(;e===li;)li=wn[--jn],wn[jn]=null,br=wn[--jn],wn[jn]=null,vr=wn[--jn],wn[jn]=null}var ln=null,on=null,We=!1,$n=null;function bS(e,t){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function p0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,on=ls(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,on=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=li!==null?{id:vr,overflow:br}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ln=e,on=null,!0):!1;default:return!1}}function Bm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vm(e){if(We){var t=on;if(t){var n=t;if(!p0(e,t)){if(Bm(e))throw Error(Z(418));t=ls(n.nextSibling);var r=ln;t&&p0(e,t)?bS(r,n):(e.flags=e.flags&-4097|2,We=!1,ln=e)}}else{if(Bm(e))throw Error(Z(418));e.flags=e.flags&-4097|2,We=!1,ln=e}}}function g0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function cc(e){if(e!==ln)return!1;if(!We)return g0(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Lm(e.type,e.memoizedProps)),t&&(t=on)){if(Bm(e))throw wS(),Error(Z(418));for(;t;)bS(e,t),t=ls(t.nextSibling)}if(g0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){on=ls(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}on=null}}else on=ln?ls(e.stateNode.nextSibling):null;return!0}function wS(){for(var e=on;e;)e=ls(e.nextSibling)}function ao(){on=ln=null,We=!1}function Dg(e){$n===null?$n=[e]:$n.push(e)}var r_=Or.ReactCurrentBatchConfig;function Yo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,e))}return e}function uc(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function x0(e){var t=e._init;return t(e._payload)}function jS(e){function t(b,v){if(e){var w=b.deletions;w===null?(b.deletions=[v],b.flags|=16):w.push(v)}}function n(b,v){if(!e)return null;for(;v!==null;)t(b,v),v=v.sibling;return null}function r(b,v){for(b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function s(b,v){return b=hs(b,v),b.index=0,b.sibling=null,b}function i(b,v,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<v?(b.flags|=2,v):w):(b.flags|=2,v)):(b.flags|=1048576,v)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,v,w,S){return v===null||v.tag!==6?(v=Xh(w,b.mode,S),v.return=b,v):(v=s(v,w),v.return=b,v)}function c(b,v,w,S){var j=w.type;return j===Oi?d(b,v,w.props.children,S,w.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Hr&&x0(j)===v.type)?(S=s(v,w.props),S.ref=Yo(b,v,w),S.return=b,S):(S=nu(w.type,w.key,w.props,null,b.mode,S),S.ref=Yo(b,v,w),S.return=b,S)}function u(b,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Jh(w,b.mode,S),v.return=b,v):(v=s(v,w.children||[]),v.return=b,v)}function d(b,v,w,S,j){return v===null||v.tag!==7?(v=ni(w,b.mode,S,j),v.return=b,v):(v=s(v,w),v.return=b,v)}function h(b,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xh(""+v,b.mode,w),v.return=b,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:return w=nu(v.type,v.key,v.props,null,b.mode,w),w.ref=Yo(b,null,v),w.return=b,w;case Ii:return v=Jh(v,b.mode,w),v.return=b,v;case Hr:var S=v._init;return h(b,S(v._payload),w)}if(pa(v)||Uo(v))return v=ni(v,b.mode,w,null),v.return=b,v;uc(b,v)}return null}function f(b,v,w,S){var j=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zl:return w.key===j?c(b,v,w,S):null;case Ii:return w.key===j?u(b,v,w,S):null;case Hr:return j=w._init,f(b,v,j(w._payload),S)}if(pa(w)||Uo(w))return j!==null?null:d(b,v,w,S,null);uc(b,w)}return null}function m(b,v,w,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return b=b.get(w)||null,l(v,b,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zl:return b=b.get(S.key===null?w:S.key)||null,c(v,b,S,j);case Ii:return b=b.get(S.key===null?w:S.key)||null,u(v,b,S,j);case Hr:var k=S._init;return m(b,v,w,k(S._payload),j)}if(pa(S)||Uo(S))return b=b.get(w)||null,d(v,b,S,j,null);uc(v,S)}return null}function p(b,v,w,S){for(var j=null,k=null,N=v,C=v=0,E=null;N!==null&&C<w.length;C++){N.index>C?(E=N,N=null):E=N.sibling;var D=f(b,N,w[C],S);if(D===null){N===null&&(N=E);break}e&&N&&D.alternate===null&&t(b,N),v=i(D,v,C),k===null?j=D:k.sibling=D,k=D,N=E}if(C===w.length)return n(b,N),We&&$s(b,C),j;if(N===null){for(;C<w.length;C++)N=h(b,w[C],S),N!==null&&(v=i(N,v,C),k===null?j=N:k.sibling=N,k=N);return We&&$s(b,C),j}for(N=r(b,N);C<w.length;C++)E=m(N,b,C,w[C],S),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?C:E.key),v=i(E,v,C),k===null?j=E:k.sibling=E,k=E);return e&&N.forEach(function($){return t(b,$)}),We&&$s(b,C),j}function g(b,v,w,S){var j=Uo(w);if(typeof j!="function")throw Error(Z(150));if(w=j.call(w),w==null)throw Error(Z(151));for(var k=j=null,N=v,C=v=0,E=null,D=w.next();N!==null&&!D.done;C++,D=w.next()){N.index>C?(E=N,N=null):E=N.sibling;var $=f(b,N,D.value,S);if($===null){N===null&&(N=E);break}e&&N&&$.alternate===null&&t(b,N),v=i($,v,C),k===null?j=$:k.sibling=$,k=$,N=E}if(D.done)return n(b,N),We&&$s(b,C),j;if(N===null){for(;!D.done;C++,D=w.next())D=h(b,D.value,S),D!==null&&(v=i(D,v,C),k===null?j=D:k.sibling=D,k=D);return We&&$s(b,C),j}for(N=r(b,N);!D.done;C++,D=w.next())D=m(N,b,C,D.value,S),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?C:D.key),v=i(D,v,C),k===null?j=D:k.sibling=D,k=D);return e&&N.forEach(function(B){return t(b,B)}),We&&$s(b,C),j}function y(b,v,w,S){if(typeof w=="object"&&w!==null&&w.type===Oi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zl:e:{for(var j=w.key,k=v;k!==null;){if(k.key===j){if(j=w.type,j===Oi){if(k.tag===7){n(b,k.sibling),v=s(k,w.props.children),v.return=b,b=v;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Hr&&x0(j)===k.type){n(b,k.sibling),v=s(k,w.props),v.ref=Yo(b,k,w),v.return=b,b=v;break e}n(b,k);break}else t(b,k);k=k.sibling}w.type===Oi?(v=ni(w.props.children,b.mode,S,w.key),v.return=b,b=v):(S=nu(w.type,w.key,w.props,null,b.mode,S),S.ref=Yo(b,v,w),S.return=b,b=S)}return o(b);case Ii:e:{for(k=w.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(b,v.sibling),v=s(v,w.children||[]),v.return=b,b=v;break e}else{n(b,v);break}else t(b,v);v=v.sibling}v=Jh(w,b.mode,S),v.return=b,b=v}return o(b);case Hr:return k=w._init,y(b,v,k(w._payload),S)}if(pa(w))return p(b,v,w,S);if(Uo(w))return g(b,v,w,S);uc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(b,v.sibling),v=s(v,w),v.return=b,b=v):(n(b,v),v=Xh(w,b.mode,S),v.return=b,b=v),o(b)):n(b,v)}return y}var lo=jS(!0),SS=jS(!1),Tu=Ds(null),Pu=null,Ui=null,Tg=null;function Pg(){Tg=Ui=Pu=null}function _g(e){var t=Tu.current;Ue(Tu),e._currentValue=t}function Um(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function eo(e,t){Pu=e,Tg=Ui=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qt=!0),e.firstContext=null)}function Tn(e){var t=e._currentValue;if(Tg!==e)if(e={context:e,memoizedValue:t,next:null},Ui===null){if(Pu===null)throw Error(Z(308));Ui=e,Pu.dependencies={lanes:0,firstContext:e}}else Ui=Ui.next=e;return t}var Ks=null;function Ag(e){Ks===null?Ks=[e]:Ks.push(e)}function CS(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Ag(t)):(n.next=s.next,s.next=n),t.interleaved=n,_r(e,r)}function _r(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qr=!1;function Mg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,_r(e,n)}return s=r.interleaved,s===null?(t.next=t,Ag(r)):(t.next=s.next,s.next=t),r.interleaved=t,_r(e,n)}function Kc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yg(e,n)}}function y0(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _u(e,t,n,r){var s=e.updateQueue;qr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=Je({},h,f);break e;case 2:qr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ui|=o,e.lanes=o,e.memoizedState=h}}function v0(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var Ol={},sr=Ds(Ol),rl=Ds(Ol),sl=Ds(Ol);function Xs(e){if(e===Ol)throw Error(Z(174));return e}function Ig(e,t){switch(Fe(sl,t),Fe(rl,e),Fe(sr,Ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sm(t,e)}Ue(sr),Fe(sr,t)}function co(){Ue(sr),Ue(rl),Ue(sl)}function kS(e){Xs(sl.current);var t=Xs(sr.current),n=Sm(t,e.type);t!==n&&(Fe(rl,e),Fe(sr,n))}function Og(e){rl.current===e&&(Ue(sr),Ue(rl))}var Ye=Ds(0);function Au(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hh=[];function Rg(){for(var e=0;e<Hh.length;e++)Hh[e]._workInProgressVersionPrimary=null;Hh.length=0}var Xc=Or.ReactCurrentDispatcher,qh=Or.ReactCurrentBatchConfig,ci=0,Xe=null,ft=null,gt=null,Mu=!1,Pa=!1,il=0,s_=0;function kt(){throw Error(Z(321))}function Lg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wn(e[n],t[n]))return!1;return!0}function Fg(e,t,n,r,s,i){if(ci=i,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=e===null||e.memoizedState===null?l_:c_,e=n(r,s),Pa){i=0;do{if(Pa=!1,il=0,25<=i)throw Error(Z(301));i+=1,gt=ft=null,t.updateQueue=null,Xc.current=u_,e=n(r,s)}while(Pa)}if(Xc.current=Iu,t=ft!==null&&ft.next!==null,ci=0,gt=ft=Xe=null,Mu=!1,t)throw Error(Z(300));return e}function $g(){var e=il!==0;return il=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Xe.memoizedState=gt=e:gt=gt.next=e,gt}function Pn(){if(ft===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=gt===null?Xe.memoizedState:gt.next;if(t!==null)gt=t,ft=e;else{if(e===null)throw Error(Z(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},gt===null?Xe.memoizedState=gt=e:gt=gt.next=e}return gt}function ol(e,t){return typeof t=="function"?t(e):t}function Gh(e){var t=Pn(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ci&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Xe.lanes|=d,ui|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Wn(r,t.memoizedState)||(Qt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Xe.lanes|=i,ui|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yh(e){var t=Pn(),n=t.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Wn(i,t.memoizedState)||(Qt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ES(){}function DS(e,t){var n=Xe,r=Pn(),s=t(),i=!Wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Qt=!0),r=r.queue,zg(_S.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,al(9,PS.bind(null,n,r,s,t),void 0,null),xt===null)throw Error(Z(349));ci&30||TS(n,t,s)}return s}function TS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function PS(e,t,n,r){t.value=n,t.getSnapshot=r,AS(t)&&MS(e)}function _S(e,t,n){return n(function(){AS(t)&&MS(e)})}function AS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wn(e,n)}catch{return!0}}function MS(e){var t=_r(e,1);t!==null&&Un(t,e,1,-1)}function b0(e){var t=Jn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=a_.bind(null,Xe,e),[t.memoizedState,e]}function al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function IS(){return Pn().memoizedState}function Jc(e,t,n,r){var s=Jn();Xe.flags|=e,s.memoizedState=al(1|t,n,void 0,r===void 0?null:r)}function Id(e,t,n,r){var s=Pn();r=r===void 0?null:r;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,r!==null&&Lg(r,o.deps)){s.memoizedState=al(t,n,i,r);return}}Xe.flags|=e,s.memoizedState=al(1|t,n,i,r)}function w0(e,t){return Jc(8390656,8,e,t)}function zg(e,t){return Id(2048,8,e,t)}function OS(e,t){return Id(4,2,e,t)}function RS(e,t){return Id(4,4,e,t)}function LS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FS(e,t,n){return n=n!=null?n.concat([e]):null,Id(4,4,LS.bind(null,t,e),n)}function Bg(){}function $S(e,t){var n=Pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zS(e,t){var n=Pn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BS(e,t,n){return ci&21?(Wn(n,t)||(n=qj(),Xe.lanes|=n,ui|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qt=!0),e.memoizedState=n)}function i_(e,t){var n=Le;Le=n!==0&&4>n?n:4,e(!0);var r=qh.transition;qh.transition={};try{e(!1),t()}finally{Le=n,qh.transition=r}}function VS(){return Pn().memoizedState}function o_(e,t,n){var r=ds(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},US(e))WS(t,n);else if(n=CS(e,t,n,r),n!==null){var s=Vt();Un(n,e,r,s),HS(n,t,r)}}function a_(e,t,n){var r=ds(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(US(e))WS(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Wn(l,o)){var c=t.interleaved;c===null?(s.next=s,Ag(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=CS(e,t,s,r),n!==null&&(s=Vt(),Un(n,e,r,s),HS(n,t,r))}}function US(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function WS(e,t){Pa=Mu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function HS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yg(e,n)}}var Iu={readContext:Tn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},l_={readContext:Tn,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:Tn,useEffect:w0,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jc(4194308,4,LS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jc(4,2,e,t)},useMemo:function(e,t){var n=Jn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Jn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=o_.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:b0,useDebugValue:Bg,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=b0(!1),t=e[0];return e=i_.bind(null,e[1]),Jn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,s=Jn();if(We){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=t(),xt===null)throw Error(Z(349));ci&30||TS(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,w0(_S.bind(null,r,i,e),[e]),r.flags|=2048,al(9,PS.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Jn(),t=xt.identifierPrefix;if(We){var n=br,r=vr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=s_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c_={readContext:Tn,useCallback:$S,useContext:Tn,useEffect:zg,useImperativeHandle:FS,useInsertionEffect:OS,useLayoutEffect:RS,useMemo:zS,useReducer:Gh,useRef:IS,useState:function(){return Gh(ol)},useDebugValue:Bg,useDeferredValue:function(e){var t=Pn();return BS(t,ft.memoizedState,e)},useTransition:function(){var e=Gh(ol)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:ES,useSyncExternalStore:DS,useId:VS,unstable_isNewReconciler:!1},u_={readContext:Tn,useCallback:$S,useContext:Tn,useEffect:zg,useImperativeHandle:FS,useInsertionEffect:OS,useLayoutEffect:RS,useMemo:zS,useReducer:Yh,useRef:IS,useState:function(){return Yh(ol)},useDebugValue:Bg,useDeferredValue:function(e){var t=Pn();return ft===null?t.memoizedState=e:BS(t,ft.memoizedState,e)},useTransition:function(){var e=Yh(ol)[0],t=Pn().memoizedState;return[e,t]},useMutableSource:ES,useSyncExternalStore:DS,useId:VS,unstable_isNewReconciler:!1};function Ln(e,t){if(e&&e.defaultProps){t=Je({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Wm(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Je({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Od={isMounted:function(e){return(e=e._reactInternals)?yi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Vt(),s=ds(e),i=Cr(r,s);i.payload=t,n!=null&&(i.callback=n),t=cs(e,i,s),t!==null&&(Un(t,e,s,r),Kc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Vt(),s=ds(e),i=Cr(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=cs(e,i,s),t!==null&&(Un(t,e,s,r),Kc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vt(),r=ds(e),s=Cr(n,r);s.tag=2,t!=null&&(s.callback=t),t=cs(e,s,r),t!==null&&(Un(t,e,r,n),Kc(t,e,r))}};function j0(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Za(n,r)||!Za(s,i):!0}function qS(e,t,n){var r=!1,s=bs,i=t.contextType;return typeof i=="object"&&i!==null?i=Tn(i):(s=Jt(t)?ai:It.current,r=t.contextTypes,i=(r=r!=null)?oo(e,s):bs),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Od,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function S0(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Od.enqueueReplaceState(t,t.state,null)}function Hm(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mg(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Tn(i):(i=Jt(t)?ai:It.current,s.context=oo(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wm(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Od.enqueueReplaceState(s,s.state,null),_u(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do n+=FT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var d_=typeof WeakMap=="function"?WeakMap:Map;function GS(e,t,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ru||(Ru=!0,np=r),qm(e,t)},n}function YS(e,t,n){n=Cr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){qm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qm(e,t),typeof r!="function"&&(us===null?us=new Set([this]):us.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function C0(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new d_;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=N_.bind(null,e,t,n),t.then(e,e))}function N0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function k0(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cr(-1,1),t.tag=2,cs(n,t,1))),n.lanes|=1),e)}var h_=Or.ReactCurrentOwner,Qt=!1;function zt(e,t,n,r){t.child=e===null?SS(t,null,n,r):lo(t,e.child,n,r)}function E0(e,t,n,r,s){n=n.render;var i=t.ref;return eo(t,s),r=Fg(e,t,n,r,i,s),n=$g(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ar(e,t,s)):(We&&n&&kg(t),t.flags|=1,zt(e,t,r,s),t.child)}function D0(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Qg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,QS(e,t,i,r,s)):(e=nu(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Za,n(o,r)&&e.ref===t.ref)return Ar(e,t,s)}return t.flags|=1,e=hs(i,r),e.ref=t.ref,e.return=t,t.child=e}function QS(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Za(i,r)&&e.ref===t.ref)if(Qt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Qt=!0);else return t.lanes=e.lanes,Ar(e,t,s)}return Gm(e,t,n,r,s)}function KS(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Hi,nn),nn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(Hi,nn),nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Fe(Hi,nn),nn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Fe(Hi,nn),nn|=r;return zt(e,t,s,n),t.child}function XS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gm(e,t,n,r,s){var i=Jt(n)?ai:It.current;return i=oo(t,i),eo(t,s),n=Fg(e,t,n,r,i,s),r=$g(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ar(e,t,s)):(We&&r&&kg(t),t.flags|=1,zt(e,t,n,s),t.child)}function T0(e,t,n,r,s){if(Jt(n)){var i=!0;ku(t)}else i=!1;if(eo(t,s),t.stateNode===null)Zc(e,t),qS(t,n,r),Hm(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Tn(u):(u=Jt(n)?ai:It.current,u=oo(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&S0(t,o,r,u),qr=!1;var f=t.memoizedState;o.state=f,_u(t,r,o,s),c=t.memoizedState,l!==r||f!==c||Xt.current||qr?(typeof d=="function"&&(Wm(t,n,d,r),c=t.memoizedState),(l=qr||j0(t,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,NS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ln(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tn(c):(c=Jt(n)?ai:It.current,c=oo(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&S0(t,o,r,c),qr=!1,f=t.memoizedState,o.state=f,_u(t,r,o,s);var p=t.memoizedState;l!==h||f!==p||Xt.current||qr?(typeof m=="function"&&(Wm(t,n,m,r),p=t.memoizedState),(u=qr||j0(t,n,u,r,f,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ym(e,t,n,r,i,s)}function Ym(e,t,n,r,s,i){XS(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&m0(t,n,!1),Ar(e,t,i);r=t.stateNode,h_.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=lo(t,e.child,null,i),t.child=lo(t,null,l,i)):zt(e,t,l,i),t.memoizedState=r.state,s&&m0(t,n,!0),t.child}function JS(e){var t=e.stateNode;t.pendingContext?f0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&f0(e,t.context,!1),Ig(e,t.containerInfo)}function P0(e,t,n,r,s){return ao(),Dg(s),t.flags|=256,zt(e,t,n,r),t.child}var Qm={dehydrated:null,treeContext:null,retryLane:0};function Km(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZS(e,t,n){var r=t.pendingProps,s=Ye.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Fe(Ye,s&1),e===null)return Vm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fd(o,r,0,null),e=ni(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Km(n),t.memoizedState=Qm,e):Vg(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return f_(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=hs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hs(l,i):(i=ni(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Km(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Qm,r}return i=e.child,e=i.sibling,r=hs(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vg(e,t){return t=Fd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dc(e,t,n,r){return r!==null&&Dg(r),lo(t,e.child,null,n),e=Vg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function f_(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Qh(Error(Z(422))),dc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Fd({mode:"visible",children:r.children},s,0,null),i=ni(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&lo(t,e.child,null,o),t.child.memoizedState=Km(o),t.memoizedState=Qm,i);if(!(t.mode&1))return dc(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=Qh(i,r,void 0),dc(e,t,o,r)}if(l=(o&e.childLanes)!==0,Qt||l){if(r=xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_r(e,s),Un(r,e,s,-1))}return Yg(),r=Qh(Error(Z(421))),dc(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=k_.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,on=ls(s.nextSibling),ln=t,We=!0,$n=null,e!==null&&(wn[jn++]=vr,wn[jn++]=br,wn[jn++]=li,vr=e.id,br=e.overflow,li=t),t=Vg(t,r.children),t.flags|=4096,t)}function _0(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Um(e.return,t,n)}function Kh(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function eC(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(zt(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_0(e,n,t);else if(e.tag===19)_0(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Au(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Kh(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Au(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Kh(t,!0,n,null,i);break;case"together":Kh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ar(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ui|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,n=hs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function m_(e,t,n){switch(t.tag){case 3:JS(t),ao();break;case 5:kS(t);break;case 1:Jt(t.type)&&ku(t);break;case 4:Ig(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Fe(Tu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?ZS(e,t,n):(Fe(Ye,Ye.current&1),e=Ar(e,t,n),e!==null?e.sibling:null);Fe(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return eC(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,KS(e,t,n)}return Ar(e,t,n)}var tC,Xm,nC,rC;tC=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xm=function(){};nC=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Xs(sr.current);var i=null;switch(n){case"input":s=vm(e,s),r=vm(e,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=jm(e,s),r=jm(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Cu)}Cm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qa.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ze("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};rC=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qo(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Et(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function p_(e,t,n){var r=t.pendingProps;switch(Eg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(t),null;case 1:return Jt(t.type)&&Nu(),Et(t),null;case 3:return r=t.stateNode,co(),Ue(Xt),Ue(It),Rg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(cc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$n!==null&&(ip($n),$n=null))),Xm(e,t),Et(t),null;case 5:Og(t);var s=Xs(sl.current);if(n=t.type,e!==null&&t.stateNode!=null)nC(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Z(166));return Et(t),null}if(e=Xs(sr.current),cc(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[tr]=t,r[nl]=i,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<xa.length;s++)ze(xa[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":zy(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":Vy(r,i),ze("invalid",r)}Cm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&lc(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&lc(r.textContent,l,e),s=["children",""+l]):qa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":ec(r),By(r,i,!0);break;case"textarea":ec(r),Uy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_j(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[tr]=t,e[nl]=r,tC(e,t,!1,!1),t.stateNode=e;e:{switch(o=Nm(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<xa.length;s++)ze(xa[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":zy(e,r),s=vm(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),ze("invalid",e);break;case"textarea":Vy(e,r),s=jm(e,r),ze("invalid",e);break;default:s=r}Cm(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ij(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Aj(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ga(e,c):typeof c=="number"&&Ga(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",e):c!=null&&hg(e,i,c,o))}switch(n){case"input":ec(e),By(e,r,!1);break;case"textarea":ec(e),Uy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vs(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Ki(e,!!r.multiple,i,!1):r.defaultValue!=null&&Ki(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Et(t),null;case 6:if(e&&t.stateNode!=null)rC(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Z(166));if(n=Xs(sl.current),Xs(sr.current),cc(t)){if(r=t.stateNode,n=t.memoizedProps,r[tr]=t,(i=r.nodeValue!==n)&&(e=ln,e!==null))switch(e.tag){case 3:lc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lc(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=t,t.stateNode=r}return Et(t),null;case 13:if(Ue(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&on!==null&&t.mode&1&&!(t.flags&128))wS(),ao(),t.flags|=98560,i=!1;else if(i=cc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[tr]=t}else ao(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Et(t),i=!1}else $n!==null&&(ip($n),$n=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?mt===0&&(mt=3):Yg())),t.updateQueue!==null&&(t.flags|=4),Et(t),null);case 4:return co(),Xm(e,t),e===null&&el(t.stateNode.containerInfo),Et(t),null;case 10:return _g(t.type._context),Et(t),null;case 17:return Jt(t.type)&&Nu(),Et(t),null;case 19:if(Ue(Ye),i=t.memoizedState,i===null)return Et(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Qo(i,!1);else{if(mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Au(e),o!==null){for(t.flags|=128,Qo(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Ye,Ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&nt()>ho&&(t.flags|=128,r=!0,Qo(i,!1),t.lanes=4194304)}else{if(!r)if(e=Au(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Et(t),null}else 2*nt()-i.renderingStartTime>ho&&n!==1073741824&&(t.flags|=128,r=!0,Qo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nt(),t.sibling=null,n=Ye.current,Fe(Ye,r?n&1|2:n&1),t):(Et(t),null);case 22:case 23:return Gg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?nn&1073741824&&(Et(t),t.subtreeFlags&6&&(t.flags|=8192)):Et(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function g_(e,t){switch(Eg(t),t.tag){case 1:return Jt(t.type)&&Nu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return co(),Ue(Xt),Ue(It),Rg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Og(t),null;case 13:if(Ue(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));ao()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Ye),null;case 4:return co(),null;case 10:return _g(t.type._context),null;case 22:case 23:return Gg(),null;case 24:return null;default:return null}}var hc=!1,Pt=!1,x_=typeof WeakSet=="function"?WeakSet:Set,le=null;function Wi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function Jm(e,t,n){try{n()}catch(r){et(e,t,r)}}var A0=!1;function y_(e,t){if(Om=wu,e=lS(),Ng(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rm={focusedElem:e,selectionRange:n},wu=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ln(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(S){et(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return p=A0,A0=!1,p}function _a(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jm(t,n,i)}s=s.next}while(s!==r)}}function Rd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Zm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sC(e){var t=e.alternate;t!==null&&(e.alternate=null,sC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tr],delete t[nl],delete t[$m],delete t[e_],delete t[t_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iC(e){return e.tag===5||e.tag===3||e.tag===4}function M0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ep(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cu));else if(r!==4&&(e=e.child,e!==null))for(ep(e,t,n),e=e.sibling;e!==null;)ep(e,t,n),e=e.sibling}function tp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(tp(e,t,n),e=e.sibling;e!==null;)tp(e,t,n),e=e.sibling}var bt=null,Fn=!1;function $r(e,t,n){for(n=n.child;n!==null;)oC(e,t,n),n=n.sibling}function oC(e,t,n){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Dd,n)}catch{}switch(n.tag){case 5:Pt||Wi(n,t);case 6:var r=bt,s=Fn;bt=null,$r(e,t,n),bt=r,Fn=s,bt!==null&&(Fn?(e=bt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Fn?(e=bt,n=n.stateNode,e.nodeType===8?Uh(e.parentNode,n):e.nodeType===1&&Uh(e,n),Xa(e)):Uh(bt,n.stateNode));break;case 4:r=bt,s=Fn,bt=n.stateNode.containerInfo,Fn=!0,$r(e,t,n),bt=r,Fn=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jm(n,t,o),s=s.next}while(s!==r)}$r(e,t,n);break;case 1:if(!Pt&&(Wi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){et(n,t,l)}$r(e,t,n);break;case 21:$r(e,t,n);break;case 22:n.mode&1?(Pt=(r=Pt)||n.memoizedState!==null,$r(e,t,n),Pt=r):$r(e,t,n);break;default:$r(e,t,n)}}function I0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new x_),t.forEach(function(r){var s=E_.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:bt=l.stateNode,Fn=!1;break e;case 3:bt=l.stateNode.containerInfo,Fn=!0;break e;case 4:bt=l.stateNode.containerInfo,Fn=!0;break e}l=l.return}if(bt===null)throw Error(Z(160));oC(i,o,s),bt=null,Fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){et(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aC(t,e),t=t.sibling}function aC(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rn(t,e),Qn(e),r&4){try{_a(3,e,e.return),Rd(3,e)}catch(g){et(e,e.return,g)}try{_a(5,e,e.return)}catch(g){et(e,e.return,g)}}break;case 1:Rn(t,e),Qn(e),r&512&&n!==null&&Wi(n,n.return);break;case 5:if(Rn(t,e),Qn(e),r&512&&n!==null&&Wi(n,n.return),e.flags&32){var s=e.stateNode;try{Ga(s,"")}catch(g){et(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Tj(s,i),Nm(l,o);var u=Nm(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Ij(s,h):d==="dangerouslySetInnerHTML"?Aj(s,h):d==="children"?Ga(s,h):hg(s,d,h,u)}switch(l){case"input":bm(s,i);break;case"textarea":Pj(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Ki(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ki(s,!!i.multiple,i.defaultValue,!0):Ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[nl]=i}catch(g){et(e,e.return,g)}}break;case 6:if(Rn(t,e),Qn(e),r&4){if(e.stateNode===null)throw Error(Z(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){et(e,e.return,g)}}break;case 3:if(Rn(t,e),Qn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(t.containerInfo)}catch(g){et(e,e.return,g)}break;case 4:Rn(t,e),Qn(e);break;case 13:Rn(t,e),Qn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hg=nt())),r&4&&I0(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Pt=(u=Pt)||d,Rn(t,e),Pt=u):Rn(t,e),Qn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(le=e,d=e.child;d!==null;){for(h=le=d;le!==null;){switch(f=le,m=f.child,f.tag){case 0:case 11:case 14:case 15:_a(4,f,f.return);break;case 1:Wi(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){et(r,n,g)}}break;case 5:Wi(f,f.return);break;case 22:if(f.memoizedState!==null){R0(h);continue}}m!==null?(m.return=f,le=m):R0(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Mj("display",o))}catch(g){et(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){et(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Rn(t,e),Qn(e),r&4&&I0(e);break;case 21:break;default:Rn(t,e),Qn(e)}}function Qn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(iC(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ga(s,""),r.flags&=-33);var i=M0(e);tp(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=M0(e);ep(e,l,o);break;default:throw Error(Z(161))}}catch(c){et(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v_(e,t,n){le=e,lC(e)}function lC(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Pt;l=hc;var u=Pt;if(hc=o,(Pt=c)&&!u)for(le=s;le!==null;)o=le,c=o.child,o.tag===22&&o.memoizedState!==null?L0(s):c!==null?(c.return=o,le=c):L0(s);for(;i!==null;)le=i,lC(i),i=i.sibling;le=s,hc=l,Pt=u}O0(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):O0(e)}}function O0(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||Rd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Pt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ln(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&v0(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}v0(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Pt||t.flags&512&&Zm(t)}catch(f){et(t,t.return,f)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function R0(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function L0(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rd(4,t)}catch(c){et(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){et(t,s,c)}}var i=t.return;try{Zm(t)}catch(c){et(t,i,c)}break;case 5:var o=t.return;try{Zm(t)}catch(c){et(t,o,c)}}}catch(c){et(t,t.return,c)}if(t===e){le=null;break}var l=t.sibling;if(l!==null){l.return=t.return,le=l;break}le=t.return}}var b_=Math.ceil,Ou=Or.ReactCurrentDispatcher,Ug=Or.ReactCurrentOwner,En=Or.ReactCurrentBatchConfig,_e=0,xt=null,lt=null,jt=0,nn=0,Hi=Ds(0),mt=0,ll=null,ui=0,Ld=0,Wg=0,Aa=null,Gt=null,Hg=0,ho=1/0,pr=null,Ru=!1,np=null,us=null,fc=!1,Zr=null,Lu=0,Ma=0,rp=null,eu=-1,tu=0;function Vt(){return _e&6?nt():eu!==-1?eu:eu=nt()}function ds(e){return e.mode&1?_e&2&&jt!==0?jt&-jt:r_.transition!==null?(tu===0&&(tu=qj()),tu):(e=Le,e!==0||(e=window.event,e=e===void 0?16:Zj(e.type)),e):1}function Un(e,t,n,r){if(50<Ma)throw Ma=0,rp=null,Error(Z(185));Al(e,n,r),(!(_e&2)||e!==xt)&&(e===xt&&(!(_e&2)&&(Ld|=n),mt===4&&Qr(e,jt)),Zt(e,r),n===1&&_e===0&&!(t.mode&1)&&(ho=nt()+500,Md&&Ts()))}function Zt(e,t){var n=e.callbackNode;rP(e,t);var r=bu(e,e===xt?jt:0);if(r===0)n!==null&&qy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&qy(n),t===1)e.tag===0?n_(F0.bind(null,e)):yS(F0.bind(null,e)),JP(function(){!(_e&6)&&Ts()}),n=null;else{switch(Gj(r)){case 1:n=xg;break;case 4:n=Wj;break;case 16:n=vu;break;case 536870912:n=Hj;break;default:n=vu}n=gC(n,cC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cC(e,t){if(eu=-1,tu=0,_e&6)throw Error(Z(327));var n=e.callbackNode;if(to()&&e.callbackNode!==n)return null;var r=bu(e,e===xt?jt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fu(e,r);else{t=r;var s=_e;_e|=2;var i=dC();(xt!==e||jt!==t)&&(pr=null,ho=nt()+500,ti(e,t));do try{S_();break}catch(l){uC(e,l)}while(!0);Pg(),Ou.current=i,_e=s,lt!==null?t=0:(xt=null,jt=0,t=mt)}if(t!==0){if(t===2&&(s=Pm(e),s!==0&&(r=s,t=sp(e,s))),t===1)throw n=ll,ti(e,0),Qr(e,r),Zt(e,nt()),n;if(t===6)Qr(e,r);else{if(s=e.current.alternate,!(r&30)&&!w_(s)&&(t=Fu(e,r),t===2&&(i=Pm(e),i!==0&&(r=i,t=sp(e,i))),t===1))throw n=ll,ti(e,0),Qr(e,r),Zt(e,nt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Z(345));case 2:zs(e,Gt,pr);break;case 3:if(Qr(e,r),(r&130023424)===r&&(t=Hg+500-nt(),10<t)){if(bu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Vt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Fm(zs.bind(null,e,Gt,pr),t);break}zs(e,Gt,pr);break;case 4:if(Qr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Vn(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*b_(r/1960))-r,10<r){e.timeoutHandle=Fm(zs.bind(null,e,Gt,pr),r);break}zs(e,Gt,pr);break;case 5:zs(e,Gt,pr);break;default:throw Error(Z(329))}}}return Zt(e,nt()),e.callbackNode===n?cC.bind(null,e):null}function sp(e,t){var n=Aa;return e.current.memoizedState.isDehydrated&&(ti(e,t).flags|=256),e=Fu(e,t),e!==2&&(t=Gt,Gt=n,t!==null&&ip(t)),e}function ip(e){Gt===null?Gt=e:Gt.push.apply(Gt,e)}function w_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qr(e,t){for(t&=~Wg,t&=~Ld,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),r=1<<n;e[n]=-1,t&=~r}}function F0(e){if(_e&6)throw Error(Z(327));to();var t=bu(e,0);if(!(t&1))return Zt(e,nt()),null;var n=Fu(e,t);if(e.tag!==0&&n===2){var r=Pm(e);r!==0&&(t=r,n=sp(e,r))}if(n===1)throw n=ll,ti(e,0),Qr(e,t),Zt(e,nt()),n;if(n===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zs(e,Gt,pr),Zt(e,nt()),null}function qg(e,t){var n=_e;_e|=1;try{return e(t)}finally{_e=n,_e===0&&(ho=nt()+500,Md&&Ts())}}function di(e){Zr!==null&&Zr.tag===0&&!(_e&6)&&to();var t=_e;_e|=1;var n=En.transition,r=Le;try{if(En.transition=null,Le=1,e)return e()}finally{Le=r,En.transition=n,_e=t,!(_e&6)&&Ts()}}function Gg(){nn=Hi.current,Ue(Hi)}function ti(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,XP(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Eg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nu();break;case 3:co(),Ue(Xt),Ue(It),Rg();break;case 5:Og(r);break;case 4:co();break;case 13:Ue(Ye);break;case 19:Ue(Ye);break;case 10:_g(r.type._context);break;case 22:case 23:Gg()}n=n.return}if(xt=e,lt=e=hs(e.current,null),jt=nn=t,mt=0,ll=null,Wg=Ld=ui=0,Gt=Aa=null,Ks!==null){for(t=0;t<Ks.length;t++)if(n=Ks[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ks=null}return e}function uC(e,t){do{var n=lt;try{if(Pg(),Xc.current=Iu,Mu){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mu=!1}if(ci=0,gt=ft=Xe=null,Pa=!1,il=0,Ug.current=null,n===null||n.return===null){mt=1,ll=t,lt=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=jt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=N0(o);if(m!==null){m.flags&=-257,k0(m,o,l,i,t),m.mode&1&&C0(i,u,t),t=m,c=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){C0(i,u,t),Yg();break e}c=Error(Z(426))}}else if(We&&l.mode&1){var y=N0(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),k0(y,o,l,i,t),Dg(uo(c,l));break e}}i=c=uo(c,l),mt!==4&&(mt=2),Aa===null?Aa=[i]:Aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=GS(i,c,t);y0(i,b);break e;case 1:l=c;var v=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(us===null||!us.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=YS(i,l,t);y0(i,S);break e}}i=i.return}while(i!==null)}fC(n)}catch(j){t=j,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function dC(){var e=Ou.current;return Ou.current=Iu,e===null?Iu:e}function Yg(){(mt===0||mt===3||mt===2)&&(mt=4),xt===null||!(ui&268435455)&&!(Ld&268435455)||Qr(xt,jt)}function Fu(e,t){var n=_e;_e|=2;var r=dC();(xt!==e||jt!==t)&&(pr=null,ti(e,t));do try{j_();break}catch(s){uC(e,s)}while(!0);if(Pg(),_e=n,Ou.current=r,lt!==null)throw Error(Z(261));return xt=null,jt=0,mt}function j_(){for(;lt!==null;)hC(lt)}function S_(){for(;lt!==null&&!YT();)hC(lt)}function hC(e){var t=pC(e.alternate,e,nn);e.memoizedProps=e.pendingProps,t===null?fC(e):lt=t,Ug.current=null}function fC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=g_(n,t),n!==null){n.flags&=32767,lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mt=6,lt=null;return}}else if(n=p_(n,t,nn),n!==null){lt=n;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);mt===0&&(mt=5)}function zs(e,t,n){var r=Le,s=En.transition;try{En.transition=null,Le=1,C_(e,t,n,r)}finally{En.transition=s,Le=r}return null}function C_(e,t,n,r){do to();while(Zr!==null);if(_e&6)throw Error(Z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(sP(e,i),e===xt&&(lt=xt=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fc||(fc=!0,gC(vu,function(){return to(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=En.transition,En.transition=null;var o=Le;Le=1;var l=_e;_e|=4,Ug.current=null,y_(e,n),aC(n,e),WP(Rm),wu=!!Om,Rm=Om=null,e.current=n,v_(n),QT(),_e=l,Le=o,En.transition=i}else e.current=n;if(fc&&(fc=!1,Zr=e,Lu=s),i=e.pendingLanes,i===0&&(us=null),JT(n.stateNode),Zt(e,nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ru)throw Ru=!1,e=np,np=null,e;return Lu&1&&e.tag!==0&&to(),i=e.pendingLanes,i&1?e===rp?Ma++:(Ma=0,rp=e):Ma=0,Ts(),null}function to(){if(Zr!==null){var e=Gj(Lu),t=En.transition,n=Le;try{if(En.transition=null,Le=16>e?16:e,Zr===null)var r=!1;else{if(e=Zr,Zr=null,Lu=0,_e&6)throw Error(Z(331));var s=_e;for(_e|=4,le=e.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(le=u;le!==null;){var d=le;switch(d.tag){case 0:case 11:case 15:_a(8,d,i)}var h=d.child;if(h!==null)h.return=d,le=h;else for(;le!==null;){d=le;var f=d.sibling,m=d.return;if(sC(d),d===u){le=null;break}if(f!==null){f.return=m,le=f;break}le=m}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_a(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,le=b;break e}le=i.return}}var v=e.current;for(le=v;le!==null;){o=le;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,le=w;else e:for(o=v;le!==null;){if(l=le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rd(9,l)}}catch(j){et(l,l.return,j)}if(l===o){le=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,le=S;break e}le=l.return}}if(_e=s,Ts(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Dd,e)}catch{}r=!0}return r}finally{Le=n,En.transition=t}}return!1}function $0(e,t,n){t=uo(n,t),t=GS(e,t,1),e=cs(e,t,1),t=Vt(),e!==null&&(Al(e,1,t),Zt(e,t))}function et(e,t,n){if(e.tag===3)$0(e,e,n);else for(;t!==null;){if(t.tag===3){$0(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(us===null||!us.has(r))){e=uo(n,e),e=YS(t,e,1),t=cs(t,e,1),e=Vt(),t!==null&&(Al(t,1,e),Zt(t,e));break}}t=t.return}}function N_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Vt(),e.pingedLanes|=e.suspendedLanes&n,xt===e&&(jt&n)===n&&(mt===4||mt===3&&(jt&130023424)===jt&&500>nt()-Hg?ti(e,0):Wg|=n),Zt(e,t)}function mC(e,t){t===0&&(e.mode&1?(t=rc,rc<<=1,!(rc&130023424)&&(rc=4194304)):t=1);var n=Vt();e=_r(e,t),e!==null&&(Al(e,t,n),Zt(e,n))}function k_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mC(e,n)}function E_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(t),mC(e,n)}var pC;pC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xt.current)Qt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qt=!1,m_(e,t,n);Qt=!!(e.flags&131072)}else Qt=!1,We&&t.flags&1048576&&vS(t,Du,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zc(e,t),e=t.pendingProps;var s=oo(t,It.current);eo(t,n),s=Fg(null,t,r,e,s,n);var i=$g();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jt(r)?(i=!0,ku(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mg(t),s.updater=Od,t.stateNode=s,s._reactInternals=t,Hm(t,r,e,n),t=Ym(null,t,r,!0,i,n)):(t.tag=0,We&&i&&kg(t),zt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=T_(r),e=Ln(r,e),s){case 0:t=Gm(null,t,r,e,n);break e;case 1:t=T0(null,t,r,e,n);break e;case 11:t=E0(null,t,r,e,n);break e;case 14:t=D0(null,t,r,Ln(r.type,e),n);break e}throw Error(Z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ln(r,s),Gm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ln(r,s),T0(e,t,r,s,n);case 3:e:{if(JS(t),e===null)throw Error(Z(387));r=t.pendingProps,i=t.memoizedState,s=i.element,NS(e,t),_u(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=uo(Error(Z(423)),t),t=P0(e,t,r,n,s);break e}else if(r!==s){s=uo(Error(Z(424)),t),t=P0(e,t,r,n,s);break e}else for(on=ls(t.stateNode.containerInfo.firstChild),ln=t,We=!0,$n=null,n=SS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ao(),r===s){t=Ar(e,t,n);break e}zt(e,t,r,n)}t=t.child}return t;case 5:return kS(t),e===null&&Vm(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Lm(r,s)?o=null:i!==null&&Lm(r,i)&&(t.flags|=32),XS(e,t),zt(e,t,o,n),t.child;case 6:return e===null&&Vm(t),null;case 13:return ZS(e,t,n);case 4:return Ig(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lo(t,null,r,n):zt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ln(r,s),E0(e,t,r,s,n);case 7:return zt(e,t,t.pendingProps,n),t.child;case 8:return zt(e,t,t.pendingProps.children,n),t.child;case 12:return zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Fe(Tu,r._currentValue),r._currentValue=o,i!==null)if(Wn(i.value,o)){if(i.children===s.children&&!Xt.current){t=Ar(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Cr(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Um(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Um(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}zt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,eo(t,n),s=Tn(s),r=r(s),t.flags|=1,zt(e,t,r,n),t.child;case 14:return r=t.type,s=Ln(r,t.pendingProps),s=Ln(r.type,s),D0(e,t,r,s,n);case 15:return QS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ln(r,s),Zc(e,t),t.tag=1,Jt(r)?(e=!0,ku(t)):e=!1,eo(t,n),qS(t,r,s),Hm(t,r,s,n),Ym(null,t,r,!0,e,n);case 19:return eC(e,t,n);case 22:return KS(e,t,n)}throw Error(Z(156,t.tag))};function gC(e,t){return Uj(e,t)}function D_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(e,t,n,r){return new D_(e,t,n,r)}function Qg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T_(e){if(typeof e=="function")return Qg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mg)return 11;if(e===pg)return 14}return 2}function hs(e,t){var n=e.alternate;return n===null?(n=Cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nu(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Qg(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Oi:return ni(n.children,s,i,t);case fg:o=8,s|=8;break;case pm:return e=Cn(12,n,t,s|2),e.elementType=pm,e.lanes=i,e;case gm:return e=Cn(13,n,t,s),e.elementType=gm,e.lanes=i,e;case xm:return e=Cn(19,n,t,s),e.elementType=xm,e.lanes=i,e;case kj:return Fd(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cj:o=10;break e;case Nj:o=9;break e;case mg:o=11;break e;case pg:o=14;break e;case Hr:o=16,r=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=Cn(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function ni(e,t,n,r){return e=Cn(7,e,r,t),e.lanes=n,e}function Fd(e,t,n,r){return e=Cn(22,e,r,t),e.elementType=kj,e.lanes=n,e.stateNode={isHidden:!1},e}function Xh(e,t,n){return e=Cn(6,e,null,t),e.lanes=n,e}function Jh(e,t,n){return t=Cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P_(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kg(e,t,n,r,s,i,o,l,c){return e=new P_(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Cn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mg(i),e}function __(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ii,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xC(e){if(!e)return bs;e=e._reactInternals;e:{if(yi(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var n=e.type;if(Jt(n))return xS(e,n,t)}return t}function yC(e,t,n,r,s,i,o,l,c){return e=Kg(n,r,!0,e,s,i,o,l,c),e.context=xC(null),n=e.current,r=Vt(),s=ds(n),i=Cr(r,s),i.callback=t??null,cs(n,i,s),e.current.lanes=s,Al(e,s,r),Zt(e,r),e}function $d(e,t,n,r){var s=t.current,i=Vt(),o=ds(s);return n=xC(n),t.context===null?t.context=n:t.pendingContext=n,t=Cr(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cs(s,t,o),e!==null&&(Un(e,s,o,i),Kc(e,s,o)),o}function $u(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function z0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xg(e,t){z0(e,t),(e=e.alternate)&&z0(e,t)}function A_(){return null}var vC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jg(e){this._internalRoot=e}zd.prototype.render=Jg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));$d(e,t,null,null)};zd.prototype.unmount=Jg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;di(function(){$d(null,e,null,null)}),t[Pr]=null}};function zd(e){this._internalRoot=e}zd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yr.length&&t!==0&&t<Yr[n].priority;n++);Yr.splice(n,0,e),n===0&&Jj(e)}};function Zg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function B0(){}function M_(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=$u(o);i.call(u)}}var o=yC(t,r,e,0,null,!1,!1,"",B0);return e._reactRootContainer=o,e[Pr]=o.current,el(e.nodeType===8?e.parentNode:e),di(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=$u(c);l.call(u)}}var c=Kg(e,0,!1,null,null,!1,!1,"",B0);return e._reactRootContainer=c,e[Pr]=c.current,el(e.nodeType===8?e.parentNode:e),di(function(){$d(t,c,n,r)}),c}function Vd(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=$u(o);l.call(c)}}$d(t,o,e,s)}else o=M_(n,t,e,s,r);return $u(o)}Yj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ga(t.pendingLanes);n!==0&&(yg(t,n|1),Zt(t,nt()),!(_e&6)&&(ho=nt()+500,Ts()))}break;case 13:di(function(){var r=_r(e,1);if(r!==null){var s=Vt();Un(r,e,1,s)}}),Xg(e,1)}};vg=function(e){if(e.tag===13){var t=_r(e,134217728);if(t!==null){var n=Vt();Un(t,e,134217728,n)}Xg(e,134217728)}};Qj=function(e){if(e.tag===13){var t=ds(e),n=_r(e,t);if(n!==null){var r=Vt();Un(n,e,t,r)}Xg(e,t)}};Kj=function(){return Le};Xj=function(e,t){var n=Le;try{return Le=e,t()}finally{Le=n}};Em=function(e,t,n){switch(t){case"input":if(bm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ad(r);if(!s)throw Error(Z(90));Dj(r),bm(r,s)}}}break;case"textarea":Pj(e,n);break;case"select":t=n.value,t!=null&&Ki(e,!!n.multiple,t,!1)}};Lj=qg;Fj=di;var I_={usingClientEntryPoint:!1,Events:[Il,$i,Ad,Oj,Rj,qg]},Ko={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O_={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Or.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bj(e),e===null?null:e.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||A_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{Dd=mc.inject(O_),rr=mc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I_;fn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(t))throw Error(Z(200));return __(e,t,null,n)};fn.createRoot=function(e,t){if(!Zg(e))throw Error(Z(299));var n=!1,r="",s=vC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kg(e,1,!1,null,null,n,!1,r,s),e[Pr]=t.current,el(e.nodeType===8?e.parentNode:e),new Jg(t)};fn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=Bj(t),e=e===null?null:e.stateNode,e};fn.flushSync=function(e){return di(e)};fn.hydrate=function(e,t,n){if(!Bd(t))throw Error(Z(200));return Vd(null,e,t,!0,n)};fn.hydrateRoot=function(e,t,n){if(!Zg(e))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=yC(t,null,e,1,n??null,s,!1,i,o),e[Pr]=t.current,el(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new zd(t)};fn.render=function(e,t,n){if(!Bd(t))throw Error(Z(200));return Vd(null,e,t,!1,n)};fn.unmountComponentAtNode=function(e){if(!Bd(e))throw Error(Z(40));return e._reactRootContainer?(di(function(){Vd(null,null,e,!1,function(){e._reactRootContainer=null,e[Pr]=null})}),!0):!1};fn.unstable_batchedUpdates=qg;fn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bd(n))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return Vd(e,t,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function bC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bC)}catch(e){console.error(e)}}bC(),bj.exports=fn;var Rl=bj.exports;const R_=kd(Rl);var wC,V0=Rl;wC=V0.createRoot,V0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}var es;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(es||(es={}));const U0="popstate";function L_(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:o,hash:l}=r.location;return op("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:zu(s)}return $_(t,n,null,e)}function ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function F_(){return Math.random().toString(36).substr(2,8)}function W0(e,t){return{usr:e.state,key:e.key,idx:t}}function op(e,t,n,r){return n===void 0&&(n=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Eo(t):t,{state:n,key:t&&t.key||r||F_()})}function zu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Eo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function $_(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=es.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(cl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=es.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:b})}function f(y,b){l=es.Push;let v=op(g.location,y,b);u=d()+1;let w=W0(v,u),S=g.createHref(v);try{o.pushState(w,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function m(y,b){l=es.Replace;let v=op(g.location,y,b);u=d();let w=W0(v,u),S=g.createHref(v);o.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function p(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:zu(y);return v=v.replace(/ $/,"%20"),ot(b,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,b)}let g={get action(){return l},get location(){return e(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(U0,h),c=y,()=>{s.removeEventListener(U0,h),c=null}},createHref(y){return t(s,y)},createURL:p,encodeLocation(y){let b=p(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(y){return o.go(y)}};return g}var H0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(H0||(H0={}));function z_(e,t,n){return n===void 0&&(n="/"),B_(e,t,n)}function B_(e,t,n,r){let s=typeof t=="string"?Eo(t):t,i=ex(s.pathname||"/",n);if(i==null)return null;let o=SC(e);V_(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=eA(i);l=X_(o[c],u)}return l}function SC(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ot(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=fs([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(ot(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),SC(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Q_(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of CC(i.path))s(i,o,c)}),t}function CC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=CC(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function V_(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:K_(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const U_=/^:[\w-]+$/,W_=3,H_=2,q_=1,G_=10,Y_=-2,q0=e=>e==="*";function Q_(e,t){let n=e.split("/"),r=n.length;return n.some(q0)&&(r+=Y_),t&&(r+=H_),n.filter(s=>!q0(s)).reduce((s,i)=>s+(U_.test(i)?W_:i===""?q_:G_),r)}function K_(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function X_(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=J_({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:fs([i,h.pathname]),pathnameBase:sA(fs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=fs([i,h.pathnameBase]))}return o}function J_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Z_(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return m&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function Z_(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),jC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function eA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ex(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function tA(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Eo(e):e;return{pathname:n?n.startsWith("/")?n:nA(n,t):t,search:iA(r),hash:oA(s)}}function nA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Zh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tx(e,t){let n=rA(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function nx(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Eo(e):(s=cl({},e),ot(!s.pathname||!s.pathname.includes("?"),Zh("?","pathname","search",s)),ot(!s.pathname||!s.pathname.includes("#"),Zh("#","pathname","hash",s)),ot(!s.search||!s.search.includes("#"),Zh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=tA(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const fs=e=>e.join("/").replace(/\/\/+/g,"/"),sA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function aA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NC=["post","put","patch","delete"];new Set(NC);const lA=["get",...NC];new Set(lA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}const rx=x.createContext(null),cA=x.createContext(null),Ps=x.createContext(null),Ud=x.createContext(null),ar=x.createContext({outlet:null,matches:[],isDataRoute:!1}),kC=x.createContext(null);function uA(e,t){let{relative:n}=t===void 0?{}:t;Do()||ot(!1);let{basename:r,navigator:s}=x.useContext(Ps),{hash:i,pathname:o,search:l}=TC(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:fs([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Do(){return x.useContext(Ud)!=null}function lr(){return Do()||ot(!1),x.useContext(Ud).location}function EC(e){x.useContext(Ps).static||x.useLayoutEffect(e)}function Mn(){let{isDataRoute:e}=x.useContext(ar);return e?NA():dA()}function dA(){Do()||ot(!1);let e=x.useContext(rx),{basename:t,future:n,navigator:r}=x.useContext(Ps),{matches:s}=x.useContext(ar),{pathname:i}=lr(),o=JSON.stringify(tx(s,n.v7_relativeSplatPath)),l=x.useRef(!1);return EC(()=>{l.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=nx(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:fs([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}const hA=x.createContext(null);function fA(e){let t=x.useContext(ar).outlet;return t&&x.createElement(hA.Provider,{value:e},t)}function DC(){let{matches:e}=x.useContext(ar),t=e[e.length-1];return t?t.params:{}}function TC(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=x.useContext(Ps),{matches:s}=x.useContext(ar),{pathname:i}=lr(),o=JSON.stringify(tx(s,r.v7_relativeSplatPath));return x.useMemo(()=>nx(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function mA(e,t){return pA(e,t)}function pA(e,t,n,r){Do()||ot(!1);let{navigator:s}=x.useContext(Ps),{matches:i}=x.useContext(ar),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=lr(),d;if(t){var h;let y=typeof t=="string"?Eo(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ot(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=z_(e,{pathname:m}),g=bA(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:fs([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:fs([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return t&&g?x.createElement(Ud.Provider,{value:{location:ul({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:es.Pop}},g):g}function gA(){let e=CA(),t=aA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:s},n):null,null)}const xA=x.createElement(gA,null);class yA extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?x.createElement(ar.Provider,{value:this.props.routeContext},x.createElement(kC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vA(e){let{routeContext:t,match:n,children:r}=e,s=x.useContext(rx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(ar.Provider,{value:t},r)}function bA(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ot(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,p=!1,g=null,y=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||xA,c&&(u<0&&f===0?(kA("route-fallback"),p=!0,y=null):u===f&&(p=!0,y=h.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,f+1)),v=()=>{let w;return m?w=g:p?w=y:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,x.createElement(vA,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?x.createElement(yA,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:v(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):v()},null)}var PC=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(PC||{}),_C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_C||{});function wA(e){let t=x.useContext(rx);return t||ot(!1),t}function jA(e){let t=x.useContext(cA);return t||ot(!1),t}function SA(e){let t=x.useContext(ar);return t||ot(!1),t}function AC(e){let t=SA(),n=t.matches[t.matches.length-1];return n.route.id||ot(!1),n.route.id}function CA(){var e;let t=x.useContext(kC),n=jA(),r=AC();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function NA(){let{router:e}=wA(PC.UseNavigateStable),t=AC(_C.UseNavigateStable),n=x.useRef(!1);return EC(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ul({fromRouteId:t},i)))},[e,t])}const G0={};function kA(e,t,n){G0[e]||(G0[e]=!0)}function EA(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function zn(e){let{to:t,replace:n,state:r,relative:s}=e;Do()||ot(!1);let{future:i,static:o}=x.useContext(Ps),{matches:l}=x.useContext(ar),{pathname:c}=lr(),u=Mn(),d=nx(t,tx(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return x.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function MC(e){return fA(e.context)}function Ge(e){ot(!1)}function DA(e){let{basename:t="/",children:n=null,location:r,navigationType:s=es.Pop,navigator:i,static:o=!1,future:l}=e;Do()&&ot(!1);let c=t.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:c,navigator:i,static:o,future:ul({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Eo(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=r,g=x.useMemo(()=>{let y=ex(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:p},navigationType:s}},[c,d,h,f,m,p,s]);return g==null?null:x.createElement(Ps.Provider,{value:u},x.createElement(Ud.Provider,{children:n,value:g}))}function TA(e){let{children:t,location:n}=e;return mA(ap(t),n)}new Promise(()=>{});function ap(e,t){t===void 0&&(t=[]);let n=[];return x.Children.forEach(e,(r,s)=>{if(!x.isValidElement(r))return;let i=[...t,s];if(r.type===x.Fragment){n.push.apply(n,ap(r.props.children,i));return}r.type!==Ge&&ot(!1),!r.props.index||!r.props.children||ot(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ap(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}function PA(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function _A(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function AA(e,t){return e.button===0&&(!t||t==="_self")&&!_A(e)}function cp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function MA(e,t){let n=cp(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}const IA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],OA="6";try{window.__reactRouterVersion=OA}catch{}const RA="startTransition",Y0=cg[RA];function LA(e){let{basename:t,children:n,future:r,window:s}=e,i=x.useRef();i.current==null&&(i.current=L_({window:s,v5Compat:!0}));let o=i.current,[l,c]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=x.useCallback(h=>{u&&Y0?Y0(()=>c(h)):c(h)},[c,u]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.useEffect(()=>EA(r),[r]),x.createElement(DA,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const FA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,er=x.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=PA(t,IA),{basename:m}=x.useContext(Ps),p,g=!1;if(typeof u=="string"&&$A.test(u)&&(p=u,FA))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=ex(S.pathname,m);S.origin===w.origin&&j!=null?u=j+S.search+S.hash:g=!0}catch{}let y=uA(u,{relative:s}),b=zA(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(w){r&&r(w),w.defaultPrevented||b(w)}return x.createElement("a",lp({},f,{href:p||y,onClick:g||i?r:v,ref:n,target:c}))});var Q0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Q0||(Q0={}));var K0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(K0||(K0={}));function zA(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Mn(),u=lr(),d=TC(e,{relative:o});return x.useCallback(h=>{if(AA(h,n)){h.preventDefault();let f=r!==void 0?r:zu(u)===zu(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,s,n,e,i,o,l])}function BA(e){let t=x.useRef(cp(e)),n=x.useRef(!1),r=lr(),s=x.useMemo(()=>MA(r.search,n.current?null:t.current),[r.search]),i=Mn(),o=x.useCallback((l,c)=>{const u=cp(typeof l=="function"?l(s):l);n.current=!0,i("?"+u,c)},[i,s]);return[s,o]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const n=x.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>x.createElement("svg",{ref:d,...VA,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${UA(e)}`,l].join(" "),...u},[...t.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=te("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=te("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=te("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=te("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=te("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=te("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=te("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=te("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=te("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=te("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=te("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=te("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=te("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=te("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=te("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=te("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=te("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=te("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=te("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=te("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=te("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),EM=380,DM=520,sv=320,iv=320,ov=600,av=700,TM=()=>{const[e,t]=x.useState(!1),[n,r]=x.useState([{sender:"ai",text:"Hi! I am your Sales Agent AI. How can I help you today?"}]),[s,i]=x.useState(""),[o,l]=x.useState({width:EM,height:DM}),[c,u]=x.useState(!1),d=x.useRef(null),h=x.useRef(null),f=x.useRef(null);x.useEffect(()=>{e&&f.current&&f.current.scrollIntoView({behavior:"smooth"})},[n,e]),x.useEffect(()=>{const p=y=>{if(!c||!h.current)return;const b=y.clientX-h.current.x,v=y.clientY-h.current.y;l({width:Math.min(Math.max(h.current.width+b,sv),ov),height:Math.min(Math.max(h.current.height+v,iv),av)})},g=()=>u(!1);return c&&(window.addEventListener("mousemove",p),window.addEventListener("mouseup",g)),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g)}},[c]);const m=async()=>{if(!s.trim())return;const p={sender:"user",text:s};r(g=>[...g,p]),i("");try{const g=await fetch("/agent/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s})});if(!g.ok)throw new Error("Network error");const y=await g.json();r(b=>[...b,{sender:"ai",text:y.reply||"No response from agent."}])}catch{r(y=>[...y,{sender:"ai",text:"Sorry, there was a problem connecting to the agent."}])}};return a.jsxs(a.Fragment,{children:[!e&&a.jsx("button",{className:"fixed bottom-8 right-8 z-50 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg p-4 flex items-center justify-center transition-all",style:{boxShadow:"0 4px 24px 0 rgba(0,0,0,0.18)"},onClick:()=>t(!0),"aria-label":"Open Chat",children:a.jsx(tv,{className:"h-7 w-7"})}),e&&a.jsxs("div",{ref:d,className:"fixed bottom-8 right-8 z-50 bg-white rounded-2xl shadow-2xl flex flex-col border border-gray-200",style:{width:o.width,height:o.height,minWidth:sv,minHeight:iv,maxWidth:ov,maxHeight:av,boxShadow:"0 8px 32px 0 rgba(0,0,0,0.22)"},children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-blue-500 rounded-t-2xl",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tv,{className:"h-5 w-5 text-white"}),a.jsx("span",{className:"text-white font-semibold text-lg",children:"Sales Agent AI"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs rounded bg-yellow-400 text-gray-900 font-semibold",title:"This module is in development",children:"In development"})]}),a.jsx("button",{onClick:()=>t(!1),className:"text-white hover:text-gray-200 p-1 rounded-full",children:a.jsx(wi,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 bg-gray-50",style:{fontFamily:"Inter, sans-serif"},children:[n.map((p,g)=>a.jsx("div",{className:`mb-3 flex ${p.sender==="user"?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-[80%] px-4 py-2 rounded-xl shadow-sm text-base leading-relaxed break-words ${p.sender==="user"?"bg-blue-600 text-white rounded-br-sm":"bg-white text-gray-900 border border-gray-200 rounded-bl-sm"}`,style:{wordBreak:"break-word"},children:p.text})},g)),a.jsx("div",{ref:f})]}),a.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-100 flex items-center gap-2 rounded-b-2xl",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-900 bg-gray-50 placeholder-gray-400 text-base",placeholder:"Type your message...",value:s,onChange:p=>i(p.target.value),onKeyDown:p=>{p.key==="Enter"&&m()},"aria-label":"Type your message",autoFocus:!0}),a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white rounded-lg p-2 flex items-center justify-center transition-all disabled:opacity-50",onClick:m,disabled:!s.trim(),"aria-label":"Send",children:a.jsx(fo,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"absolute bottom-2 right-2 w-5 h-5 cursor-nwse-resize z-50",style:{userSelect:"none"},onMouseDown:p=>{u(!0),h.current={x:p.clientX,y:p.clientY,width:o.width,height:o.height},p.preventDefault()},title:"Resize",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:a.jsx("path",{d:"M3 17L17 3M10 17H17V10",stroke:"#60A5FA",strokeWidth:"2",strokeLinecap:"round"})})})]})]})};class PM extends x.Component{constructor(n){super(n);ue(this,"resetErrorState",()=>{this.setState({hasError:!1,error:void 0})});ue(this,"handleLogout",()=>{localStorage.removeItem("jwt-token"),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("auth-storage"),window.location.href="/login"});this.state={hasError:!1}}static getDerivedStateFromError(n){if(n.message.includes("Authentication required")||n.message.includes("JWT")||n.message.includes("401")||n.message.includes("token")||n.message.includes("unauthorized"))return{hasError:!0,error:n};throw n}componentDidCatch(n){console.error("Auth Error Boundary caught error:",n)}render(){var n;return this.state.hasError?a.jsx("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:a.jsxs("div",{className:"max-w-md p-6 bg-white rounded-lg shadow-lg border border-gray-200",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Error"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an authentication error. Your session may have expired or been invalidated."}),a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-red-700",children:["Error: ",((n=this.state.error)==null?void 0:n.message)||"Authentication failed"]})}),a.jsxs("div",{className:"flex flex-col space-y-3",children:[a.jsx("button",{onClick:this.handleLogout,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Login"}),a.jsx("button",{onClick:this.resetErrorState,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded hover:bg-gray-100",children:"Try Again"})]})]})}):this.props.children}}function _M({children:e}){return a.jsx(PM,{children:e})}const AM={},lv=e=>{let t;const n=new Set,r=(d,h)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=h??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(AM?"development":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},MM=e=>e?lv(e):lv;var UC={exports:{}},WC={},HC={exports:{}},qC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=x;function IM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var OM=typeof Object.is=="function"?Object.is:IM,RM=mo.useState,LM=mo.useEffect,FM=mo.useLayoutEffect,$M=mo.useDebugValue;function zM(e,t){var n=t(),r=RM({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return FM(function(){s.value=n,s.getSnapshot=t,ef(s)&&i({inst:s})},[e,n,t]),LM(function(){return ef(s)&&i({inst:s}),e(function(){ef(s)&&i({inst:s})})},[e]),$M(n),n}function ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!OM(e,n)}catch{return!0}}function BM(e,t){return t()}var VM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BM:zM;qC.useSyncExternalStore=mo.useSyncExternalStore!==void 0?mo.useSyncExternalStore:VM;HC.exports=qC;var UM=HC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=x,WM=UM;function HM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qM=typeof Object.is=="function"?Object.is:HM,GM=WM.useSyncExternalStore,YM=qd.useRef,QM=qd.useEffect,KM=qd.useMemo,XM=qd.useDebugValue;WC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=YM(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=KM(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var p=o.value;if(s(p,m))return h=p}return h=m}if(p=h,qM(d,m))return p;var g=r(m);return s!==void 0&&s(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,s]);var l=GM(e,i[0],i[1]);return QM(function(){o.hasValue=!0,o.value=l},[l]),XM(l),l};UC.exports=WC;var JM=UC.exports;const ZM=kd(JM),GC={},{useDebugValue:eI}=se,{useSyncExternalStoreWithSelector:tI}=ZM;let cv=!1;const nI=e=>e;function rI(e,t=nI,n){(GC?"development":void 0)!=="production"&&n&&!cv&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),cv=!0);const r=tI(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return eI(r),r}const uv=e=>{(GC?"development":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?MM(e):e,n=(r,s)=>rI(t,r,s);return Object.assign(n,t),n},YC=e=>e?uv(e):uv;function sI(e){try{const t=e.split(".")[1];return JSON.parse(atob(t.replace(/-/g,"+").replace(/_/g,"/")))}catch{return{}}}const QC=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem("jwt-token");return t&&(e.Authorization=`Bearer ${t}`),e},iI=async(e,t)=>{try{console.log("🔑 Starting sign in process for:",e);const n="http://103.224.243.242:3001/api",r=`${n}/auth/login`;console.log("Login URL:",r);const s=await fetch(r,{method:"POST",headers:QC(),body:JSON.stringify({email:e,password:t})});if(!s.ok){let c="Authentication failed";try{const u=await s.json();u&&u.message&&(c=u.message)}catch{}throw new Error(c)}let i;try{i=await s.json()}catch{throw new Error("Invalid response from server.")}const{token:o,user:l}=i;if(!l||!l.id||!l.email||!o)throw new Error("Invalid user data received from server");return(!l.role||!["admin","sales_agent","operations_manager","operator","support"].includes(l.role))&&(console.warn("⚠️ User role missing or invalid, assigning default role"),l.role="admin"),localStorage.setItem("jwt-token",o),console.log("✅ Authentication successful"),l}catch(n){throw console.error("Error signing in:",n),n}},oI=async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:QC()}),localStorage.removeItem("jwt-token")}catch(e){console.error("Error signing out:",e),localStorage.removeItem("jwt-token")}},KC=async()=>{try{const e=localStorage.getItem("jwt-token");if(!e)return null;const t=sI(e);if(t.exp&&t.exp*1e3<Date.now())return localStorage.removeItem("jwt-token"),null;console.log("🔍 getCurrentUser: Decoding JWT token directly");const n={id:t.id,email:t.email,name:t.name,role:t.role};return console.log("✅ getCurrentUser: User from JWT:",JSON.stringify(n,null,2)),!n.id||!n.email||!n.role?(console.error("❌ getCurrentUser: Invalid user data in JWT"),localStorage.removeItem("jwt-token"),null):n}catch(e){return console.error("Error getting current user:",e),localStorage.removeItem("jwt-token"),null}},aI=(e,t)=>{try{localStorage.getItem("explicit-login-performed")==="true"?(localStorage.setItem("auth-token",t),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-saved","complete")):console.log("Not saving auth data - no explicit login detected")}catch(n){console.error("Failed to save auth data to local storage:",n)}},lI=()=>{localStorage.removeItem("auth-token"),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-saved"),localStorage.removeItem("auth-checking"),localStorage.removeItem("explicit-login-performed"),sessionStorage.removeItem("explicit-auth-action")},qe=YC()(e=>({user:null,token:null,isAuthenticated:!1,error:null,login:async(t,n)=>{try{e({error:null});const r=await iI(t,n);if(console.log("🔐 Login successful - User data received:",JSON.stringify(r,null,2)),console.log("🏷️ User role check:",r==null?void 0:r.role),!r||!r.role)throw console.error("❌ User object missing or role undefined:",r),new Error("Invalid user data - role missing");if(!["admin","sales_agent","operations_manager","operator","support"].includes(r.role))throw console.error("❌ Invalid user role:",r.role),new Error(`Invalid user role: ${r.role}`);console.log("✅ User role validation passed:",r.role);const s=localStorage.getItem("jwt-token")||"";e({user:r,token:s,isAuthenticated:!0,error:null}),aI(r,s),localStorage.setItem("explicit-login-performed","true"),localStorage.setItem("last-login-time",Date.now().toString())}catch(r){throw e({error:r.message}),r}},logout:async()=>{try{localStorage.setItem("logging-out","true"),await oI(),e({user:null,token:null,isAuthenticated:!1,error:null}),lI(),localStorage.removeItem("explicit-login-performed"),localStorage.removeItem("jwt-token")}catch(t){throw e({error:t.message}),t}finally{setTimeout(()=>{localStorage.removeItem("logging-out")},1e3)}},setUser:t=>e({user:t,isAuthenticated:!!t,error:null}),clearUser:()=>e({user:null,token:null,isAuthenticated:!1,error:null})}));function cI(){var v,w;const[e,t]=x.useState(""),[n,r]=x.useState(""),[s,i]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState("loading"),{login:d,error:h,isAuthenticated:f,user:m}=qe();console.log("LoginForm rendering"),console.log("Auth state:",{error:h,isAuthenticated:f}),x.useEffect(()=>{console.log("LoginForm mounted");const S="http://103.224.243.242:3001/api";fetch(`${S}/health`,{credentials:"include",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(j=>(console.log("API health check response:",j.status),u(j.ok?"available":"error"),j.text())).then(j=>{console.log("API health check data:",j)}).catch(j=>{console.error("API health check failed:",j),u("error"),l(`API connection error: ${j.message}. Make sure the API server is running at ${S}`)}),console.log("Environment variables check:",{apiUrl:"http://103.224.243.242:3001/api",dbHost:"crm-db"})},[]);const p=Mn(),g=lr(),y=((w=(v=g.state)==null?void 0:v.from)==null?void 0:w.pathname)||"/dashboard";x.useEffect(()=>{console.log("🔍 LoginForm useEffect - Authentication check:",{isAuthenticated:f,user:m==null?void 0:m.name}),f&&m&&(console.log("✅ User is authenticated, navigating to:",y),p(y,{replace:!0}))},[f,m,p,y]),x.useEffect(()=>{g.pathname==="/login"&&localStorage.removeItem("jwt-token")},[g.pathname]);const b=async S=>{if(S.preventDefault(),!e||!n){l("Email and password are required");return}i(!0),console.log("🔑 Login attempt for:",e);try{const j="http://103.224.243.242:3001/api";try{const k=await fetch(`${j}/health`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!k.ok)throw console.error("API health check failed before login attempt:",await k.text()),u("error"),new Error(`API server is not responding correctly. Status: ${k.status}`);u("available"),console.log("API health check passed, proceeding with login")}catch(k){throw console.error("Failed to connect to API:",k),u("error"),new Error("Cannot connect to API. Please ensure the server is running.")}console.log("🔐 Calling auth store login..."),await d(e,n),console.log("✅ Login attempt successful, auth state should be updated"),setTimeout(()=>{var N,C;const k=qe.getState();console.log("🔍 Current auth state after login:",{isAuthenticated:k.isAuthenticated,user:(N=k.user)==null?void 0:N.name,userRole:(C=k.user)==null?void 0:C.role,token:k.token?"Present":"Missing",fullUser:k.user}),k.isAuthenticated&&k.user?(console.log("🚀 Forcing navigation to dashboard..."),console.log("👤 User object before navigation:",JSON.stringify(k.user,null,2)),p("/dashboard",{replace:!0})):console.log("❌ Auth state not updated properly, user may need to refresh")},500)}catch(j){console.error("Login error:",j),j instanceof Error&&(j.message.includes("<!DOCTYPE")||j.message.includes("<html>")?l(`API returned HTML instead of JSON. The API server might not be running correctly. 
            Make sure the API server is running at http://103.224.243.242:3001/api.`):(j.message.includes("NetworkError")||j.message.includes("Failed to fetch"))&&l(`Network error: Cannot connect to API server. 
            Please check your network connection and make sure the server is running.`)),r("")}finally{i(!1)}};if(o)return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:a.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Rendering Login Form"}),a.jsx("p",{className:"text-gray-700 mb-4",children:o}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});if(c==="error")return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-red-50",children:a.jsxs("div",{className:"w-full max-w-md px-6 py-8 bg-white rounded-lg shadow-md",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"API Connection Error"}),a.jsxs("p",{className:"text-gray-700 mb-4",children:["Unable to connect to the API server. The server might not be running.",a.jsx("br",{}),"API URL: ","http://103.224.243.242:3001/api"]}),a.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded",children:[a.jsx("h3",{className:"font-bold mb-2",children:"Troubleshooting steps:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[a.jsx("li",{children:"Make sure the API server is running"}),a.jsx("li",{children:"Check your .env file configuration"}),a.jsx("li",{children:"Verify database connection settings"}),a.jsx("li",{children:"Check browser console for network errors"})]})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})});try{return a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-5",children:[a.jsx("div",{children:a.jsx("input",{id:"login-email",name:"email",type:"email",value:e,onChange:S=>t(S.target.value),required:!0,autoComplete:"email",placeholder:"Email address",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})}),a.jsx("div",{children:a.jsx("input",{id:"login-password",name:"password",type:"password",value:n,onChange:S=>r(S.target.value),required:!0,autoComplete:"current-password",placeholder:"Password",className:"w-full border-0 border-b border-gray-300 focus:border-black focus:ring-0 text-base py-3 px-0 bg-transparent placeholder-gray-400 outline-none text-[#222] font-semibold",style:{color:"#222",WebkitTextFillColor:"#222",background:"transparent"}})})]}),a.jsx("div",{className:"flex justify-end text-xs mt-1",children:a.jsxs("a",{href:"#",className:"text-blue-700 hover:underline",children:["Forget password ",a.jsx("span",{className:"font-bold",children:"Click here"})]})}),a.jsx("button",{type:"submit",disabled:s,className:"w-full h-12 bg-black text-white rounded-md text-lg font-semibold mt-2 transition-colors duration-150 hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-50",children:s?"Logging in...":"Login Now"}),h&&a.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[a.jsx(vi,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:h})]})]})}catch(S){return console.error("Error rendering login form:",S),l(`Error rendering login form: ${S instanceof Error?S.message:String(S)}`),null}}function uI({error:e,resetError:t}){return a.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",backgroundColor:"#f0f2f5"},children:a.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"white",padding:"30px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",textAlign:"center"},children:[a.jsx("h1",{style:{marginBottom:"16px",color:"#e53e3e"},children:"Login Error"}),a.jsx("p",{style:{marginBottom:"24px"},children:"We encountered a problem with the login form."}),a.jsx("div",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",marginBottom:"24px",textAlign:"left",overflowWrap:"break-word"},children:a.jsx("code",{style:{color:"#e53e3e"},children:e.message})}),a.jsx("button",{onClick:t,style:{padding:"12px 24px",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"Try Again"})]})})}class dI extends x.Component{constructor(n){super(n);ue(this,"resetError",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n){console.error("Login page error:",n)}render(){return this.state.hasError?a.jsx(uI,{error:this.state.error,resetError:this.resetError}):this.props.children}}function hI(){const{isAuthenticated:e}=qe();return e?a.jsx(zn,{to:"/dashboard"}):a.jsxs("div",{className:"h-screen overflow-hidden flex flex-col lg:flex-row bg-[#F2EEE7]",children:[a.jsxs("div",{className:"relative flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-[#385197] to-[#404040] text-white px-8 py-12 overflow-hidden",children:[a.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",viewBox:"0 0 800 800",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M0 800 Q400 400 800 800",stroke:"white",strokeWidth:"2"}),a.jsx("path",{d:"M0 600 Q400 200 800 600",stroke:"white",strokeWidth:"1.5"}),a.jsx("path",{d:"M0 400 Q400 0 800 400",stroke:"white",strokeWidth:"1"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col items-start max-w-lg w-full",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-extrabold mb-4 leading-tight flex items-center gap-2",children:[a.jsx("span",{className:"text-white drop-shadow-lg",children:"Hello,"}),a.jsx("span",{className:"text-[#FFCC3F] drop-shadow-[0_2px_8px_rgba(255,204,63,0.7)]",children:"ASP Cranes!"}),a.jsx("span",{className:"inline-block text-5xl ml-2 align-middle",children:"👋"})]}),a.jsx("p",{className:"text-xl md:text-2xl font-bold mb-8 text-white drop-shadow-lg tracking-wide",children:"The all-in-one platform to supercharge your heavy equipment rental business."}),a.jsxs("p",{className:"text-xs opacity-60 mt-12",children:["© ",new Date().getFullYear()," ASP Cranes. All rights reserved."]})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center items-center bg-[#F2EEE7] px-6",children:a.jsxs("div",{className:"w-full max-w-md mx-auto relative",children:[a.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/10 backdrop-blur-xl border border-[#CAC0B0]/60 shadow-2xl",style:{zIndex:1}}),a.jsxs("div",{className:"relative z-10 p-10 flex flex-col",children:[a.jsxs("h2",{className:"text-2xl font-bold text-[#404040] mb-2 flex items-center gap-2",children:["Welcome Back! ",a.jsx("span",{className:"text-[#FFCC3F]",children:"●"})]}),a.jsxs("p",{className:"text-[#385197] mb-6 text-sm",children:["Don't have an account? ",a.jsx("a",{href:"#",className:"text-[#FFCC3F] font-medium hover:underline",children:"Create a new account now"}),".",a.jsx("br",{}),"It's FREE! Takes less than a minute."]}),a.jsx(cI,{})]}),a.jsxs("svg",{className:"absolute -top-8 -right-8 w-32 h-32 opacity-30",viewBox:"0 0 100 100",fill:"none",children:[a.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"#FFCC3F",strokeWidth:"2"}),a.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#385197",strokeWidth:"1"})]}),a.jsx("svg",{className:"absolute -bottom-8 -left-8 w-24 h-24 opacity-20",viewBox:"0 0 100 100",fill:"none",children:a.jsx("rect",{x:"10",y:"10",width:"80",height:"80",rx:"20",stroke:"#404040",strokeWidth:"2"})})]})})]})}function fI(){return x.useEffect(()=>{console.log("LoginPage mounted"),console.log("API URL:","http://103.224.243.242:3001/api")},[]),a.jsx(dI,{children:a.jsx(hI,{})})}const XC=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Gd=x.createContext({}),Yd=x.createContext(null),Qd=typeof document<"u",lx=Qd?x.useLayoutEffect:x.useEffect,JC=x.createContext({strict:!1}),cx=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),mI="framerAppearId",ZC="data-"+cx(mI);function pI(e,t,n,r){const{visualElement:s}=x.useContext(Gd),i=x.useContext(JC),o=x.useContext(Yd),l=x.useContext(XC).reducedMotion,c=x.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(n,o)});const d=x.useRef(!!(n[ZC]&&!window.HandoffComplete));return lx(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function qi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function gI(e,t,n){return x.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):qi(n)&&(n.current=r))},[t])}function dl(e){return typeof e=="string"||Array.isArray(e)}function Kd(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const ux=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dx=["initial",...ux];function Xd(e){return Kd(e.animate)||dx.some(t=>dl(e[t]))}function eN(e){return!!(Xd(e)||e.variants)}function xI(e,t){if(Xd(e)){const{initial:n,animate:r}=e;return{initial:n===!1||dl(n)?n:void 0,animate:dl(r)?r:void 0}}return e.inherit!==!1?t:{}}function yI(e){const{initial:t,animate:n}=xI(e,x.useContext(Gd));return x.useMemo(()=>({initial:t,animate:n}),[dv(t),dv(n)])}function dv(e){return Array.isArray(e)?e.join(" "):e}const hv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hl={};for(const e in hv)hl[e]={isEnabled:t=>hv[e].some(n=>!!t[n])};function vI(e){for(const t in e)hl[t]={...hl[t],...e[t]}}const hx=x.createContext({}),tN=x.createContext({}),bI=Symbol.for("motionComponentSymbol");function wI({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&vI(e);function i(l,c){let u;const d={...x.useContext(XC),...l,layoutId:jI(l)},{isStatic:h}=d,f=yI(l),m=r(l,h);if(!h&&Qd){f.visualElement=pI(s,m,d,t);const p=x.useContext(tN),g=x.useContext(JC).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,e,p))}return x.createElement(Gd.Provider,{value:f},u&&f.visualElement?x.createElement(u,{visualElement:f.visualElement,...d}):null,n(s,l,gI(m,f.visualElement,c),m,h,f.visualElement))}const o=x.forwardRef(i);return o[bI]=s,o}function jI({layoutId:e}){const t=x.useContext(hx).id;return t&&e!==void 0?t+"-"+e:e}function SI(e){function t(r,s={}){return wI(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const CI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fx(e){return typeof e!="string"||e.includes("-")?!1:!!(CI.indexOf(e)>-1||/[A-Z]/.test(e))}const Uu={};function NI(e){Object.assign(Uu,e)}const Fl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ji=new Set(Fl);function nN(e,{layout:t,layoutId:n}){return ji.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Uu[e]||e==="opacity")}const tn=e=>!!(e&&e.getVelocity),kI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EI=Fl.length;function DI(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<EI;o++){const l=Fl[o];if(e[l]!==void 0){const c=kI[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const rN=e=>t=>typeof t=="string"&&t.startsWith(e),sN=rN("--"),fp=rN("var(--"),TI=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,PI=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ss=(e,t,n)=>Math.min(Math.max(n,e),t),Si={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oa={...Si,transform:e=>Ss(0,1,e)},pc={...Si,default:1},Ra=e=>Math.round(e*1e5)/1e5,Jd=/(-)?([\d]*\.?[\d])+/g,iN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,_I=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $l(e){return typeof e=="string"}const zl=e=>({test:t=>$l(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Wr=zl("deg"),ir=zl("%"),ve=zl("px"),AI=zl("vh"),MI=zl("vw"),fv={...ir,parse:e=>ir.parse(e)/100,transform:e=>ir.transform(e*100)},mv={...Si,transform:Math.round},oN={borderWidth:ve,borderTopWidth:ve,borderRightWidth:ve,borderBottomWidth:ve,borderLeftWidth:ve,borderRadius:ve,radius:ve,borderTopLeftRadius:ve,borderTopRightRadius:ve,borderBottomRightRadius:ve,borderBottomLeftRadius:ve,width:ve,maxWidth:ve,height:ve,maxHeight:ve,size:ve,top:ve,right:ve,bottom:ve,left:ve,padding:ve,paddingTop:ve,paddingRight:ve,paddingBottom:ve,paddingLeft:ve,margin:ve,marginTop:ve,marginRight:ve,marginBottom:ve,marginLeft:ve,rotate:Wr,rotateX:Wr,rotateY:Wr,rotateZ:Wr,scale:pc,scaleX:pc,scaleY:pc,scaleZ:pc,skew:Wr,skewX:Wr,skewY:Wr,distance:ve,translateX:ve,translateY:ve,translateZ:ve,x:ve,y:ve,z:ve,perspective:ve,transformPerspective:ve,opacity:Oa,originX:fv,originY:fv,originZ:ve,zIndex:mv,fillOpacity:Oa,strokeOpacity:Oa,numOctaves:mv};function mx(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(sN(h)){i[h]=f;continue}const m=oN[h],p=PI(f,m);if(ji.has(h)){if(c=!0,o[h]=p,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=p):s[h]=p}if(t.transform||(c||r?s.transform=DI(e.transform,n,d,r):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=l;s.transformOrigin=`${h} ${f} ${m}`}}const px=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function aN(e,t,n){for(const r in t)!tn(t[r])&&!nN(r,n)&&(e[r]=t[r])}function II({transformTemplate:e},t,n){return x.useMemo(()=>{const r=px();return mx(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function OI(e,t,n){const r=e.style||{},s={};return aN(s,r,e),Object.assign(s,II(e,t,n)),e.transformValues?e.transformValues(s):s}function RI(e,t,n){const r={},s=OI(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const LI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||LI.has(e)}let lN=e=>!Wu(e);function FI(e){e&&(lN=t=>t.startsWith("on")?!Wu(t):e(t))}try{FI(require("@emotion/is-prop-valid").default)}catch{}function $I(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(lN(s)||n===!0&&Wu(s)||!t&&!Wu(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function pv(e,t,n){return typeof e=="string"?e:ve.transform(t+n*e)}function zI(e,t,n){const r=pv(t,e.x,e.width),s=pv(n,e.y,e.height);return`${r} ${s}`}const BI={offset:"stroke-dashoffset",array:"stroke-dasharray"},VI={offset:"strokeDashoffset",array:"strokeDasharray"};function UI(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?BI:VI;e[i.offset]=ve.transform(-r);const o=ve.transform(t),l=ve.transform(n);e[i.array]=`${o} ${l}`}function gx(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(mx(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p,dimensions:g}=e;m.transform&&(g&&(p.transform=m.transform),delete m.transform),g&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=zI(g,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&UI(m,o,l,c,!1)}const cN=()=>({...px(),attrs:{}}),xx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function WI(e,t,n,r){const s=x.useMemo(()=>{const i=cN();return gx(i,t,{enableHardwareAcceleration:!1},xx(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};aN(i,e.style,e),s.style={...i,...s.style}}return s}function HI(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(fx(n)?WI:RI)(r,i,o,n),d={...$I(r,typeof n=="string",e),...c,ref:s},{children:h}=r,f=x.useMemo(()=>tn(h)?h.get():h,[h]);return x.createElement(n,{...d,children:f})}}function uN(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const dN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hN(e,t,n,r){uN(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(dN.has(s)?s:cx(s),t.attrs[s])}function yx(e,t){const{style:n}=e,r={};for(const s in n)(tn(n[s])||t.style&&tn(t.style[s])||nN(s,e))&&(r[s]=n[s]);return r}function fN(e,t){const n=yx(e,t);for(const r in e)if(tn(e[r])||tn(t[r])){const s=Fl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function vx(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function mN(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const Hu=e=>Array.isArray(e),qI=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),GI=e=>Hu(e)?e[e.length-1]||0:e;function su(e){const t=tn(e)?e.get():e;return qI(t)?t.toValue():t}function YI({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:QI(r,s,i,e),renderState:t()};return n&&(o.mount=l=>n(r,l,o)),o}const pN=e=>(t,n)=>{const r=x.useContext(Gd),s=x.useContext(Yd),i=()=>YI(e,t,r,s);return n?i():mN(i)};function QI(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=su(i[f]);let{initial:o,animate:l}=e;const c=Xd(e),u=eN(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;return h&&typeof h!="boolean"&&!Kd(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const p=vx(e,m);if(!p)return;const{transitionEnd:g,transition:y,...b}=p;for(const v in b){let w=b[v];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(s[v]=w)}for(const v in g)s[v]=g[v]}),s}const st=e=>e;class gv{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function KI(e){let t=new gv,n=new gv,r=0,s=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:n;return u&&o.add(c),f.add(c)&&h&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const d=t.order[u];d(c),o.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const gc=["prepare","read","update","preRender","render","postRender"],XI=40;function JI(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=gc.reduce((h,f)=>(h[f]=KI(()=>n=!0),h),{}),o=h=>i[h].process(s),l=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,XI),1),s.timestamp=h,s.isProcessing=!0,gc.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(l))},c=()=>{n=!0,r=!0,s.isProcessing||e(l)};return{schedule:gc.reduce((h,f)=>{const m=i[f];return h[f]=(p,g=!1,y=!1)=>(n||c(),m.schedule(p,g,y)),h},{}),cancel:h=>gc.forEach(f=>i[f].cancel(h)),state:s,steps:i}}const{schedule:$e,cancel:Ir,state:Dt,steps:tf}=JI(typeof requestAnimationFrame<"u"?requestAnimationFrame:st,!0),ZI={useVisualState:pN({scrapeMotionValuesFromProps:fN,createRenderState:cN,onMount:(e,t,{renderState:n,latestValues:r})=>{$e.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),$e.render(()=>{gx(n,r,{enableHardwareAcceleration:!1},xx(t.tagName),e.transformTemplate),hN(t,n)})}})},eO={useVisualState:pN({scrapeMotionValuesFromProps:yx,createRenderState:px})};function tO(e,{forwardMotionProps:t=!1},n,r){return{...fx(e)?ZI:eO,preloadedFeatures:n,useRender:HI(t),createVisualElement:r,Component:e}}function wr(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const gN=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Zd(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const nO=e=>t=>gN(t)&&e(t,Zd(t));function Nr(e,t,n,r){return wr(e,t,nO(n),r)}const rO=(e,t)=>n=>t(e(n)),ps=(...e)=>e.reduce(rO);function xN(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const xv=xN("dragHorizontal"),yv=xN("dragVertical");function yN(e){let t=!1;if(e==="y")t=yv();else if(e==="x")t=xv();else{const n=xv(),r=yv();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function vN(){const e=yN(!0);return e?(e(),!1):!0}class _s{constructor(t){this.isMounted=!1,this.node=t}update(){}}function vv(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||vN())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[r]&&$e.update(()=>l[r](i,o))};return Nr(e.current,n,s,{passive:!e.getProps()[r]})}class sO extends _s{mount(){this.unmount=ps(vv(this.node,!0),vv(this.node,!1))}unmount(){}}class iO extends _s{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ps(wr(this.node.current,"focus",()=>this.onFocus()),wr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const bN=(e,t)=>t?e===t?!0:bN(e,t.parentElement):!1;function nf(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Zd(n))}class oO extends _s{constructor(){super(...arguments),this.removeStartListeners=st,this.removeEndListeners=st,this.removeAccessibleListeners=st,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Nr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();$e.update(()=>{!h&&!bN(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Nr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ps(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||nf("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&$e.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=wr(this.node.current,"keyup",o),nf("down",(l,c)=>{this.startPress(l,c)})},n=wr(this.node.current,"keydown",t),r=()=>{this.isPressing&&nf("cancel",(i,o)=>this.cancelPress(i,o))},s=wr(this.node.current,"blur",r);this.removeAccessibleListeners=ps(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&$e.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vN()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&$e.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Nr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=wr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ps(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const mp=new WeakMap,rf=new WeakMap,aO=e=>{const t=mp.get(e.target);t&&t(e)},lO=e=>{e.forEach(aO)};function cO({root:e,...t}){const n=e||document;rf.has(n)||rf.set(n,{});const r=rf.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(lO,{root:e,...t})),r[s]}function uO(e,t,n){const r=cO(t);return mp.set(e,n),r.observe(e),()=>{mp.delete(e),r.unobserve(e)}}const dO={some:0,all:1};class hO extends _s{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:dO[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return uO(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(fO(t,n))&&this.startObserver()}unmount(){}}function fO({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const mO={inView:{Feature:hO},tap:{Feature:oO},focus:{Feature:iO},hover:{Feature:sO}};function wN(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function pO(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function gO(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function eh(e,t,n){const r=e.getProps();return vx(r,t,n!==void 0?n:r.custom,pO(e),gO(e))}let bx=st;const ri=e=>e*1e3,kr=e=>e/1e3,xO={current:!1},jN=e=>Array.isArray(e)&&typeof e[0]=="number";function SN(e){return!!(!e||typeof e=="string"&&CN[e]||jN(e)||Array.isArray(e)&&e.every(SN))}const ya=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,CN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ya([0,.65,.55,1]),circOut:ya([.55,0,1,.45]),backIn:ya([.31,.01,.66,-.59]),backOut:ya([.33,1.53,.69,.99])};function NN(e){if(e)return jN(e)?ya(e):Array.isArray(e)?e.map(NN):CN[e]}function yO(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=NN(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function vO(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const kN=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,bO=1e-7,wO=12;function jO(e,t,n,r,s){let i,o,l=0;do o=t+(n-t)/2,i=kN(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>bO&&++l<wO);return o}function Bl(e,t,n,r){if(e===t&&n===r)return st;const s=i=>jO(i,0,1,e,n);return i=>i===0||i===1?i:kN(s(i),t,r)}const SO=Bl(.42,0,1,1),CO=Bl(0,0,.58,1),EN=Bl(.42,0,.58,1),NO=e=>Array.isArray(e)&&typeof e[0]!="number",DN=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,TN=e=>t=>1-e(1-t),wx=e=>1-Math.sin(Math.acos(e)),PN=TN(wx),kO=DN(wx),_N=Bl(.33,1.53,.69,.99),jx=TN(_N),EO=DN(jx),DO=e=>(e*=2)<1?.5*jx(e):.5*(2-Math.pow(2,-10*(e-1))),TO={linear:st,easeIn:SO,easeInOut:EN,easeOut:CO,circIn:wx,circInOut:kO,circOut:PN,backIn:jx,backInOut:EO,backOut:_N,anticipate:DO},bv=e=>{if(Array.isArray(e)){bx(e.length===4);const[t,n,r,s]=e;return Bl(t,n,r,s)}else if(typeof e=="string")return TO[e];return e},Sx=(e,t)=>n=>!!($l(n)&&_I.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),AN=(e,t,n)=>r=>{if(!$l(r))return r;const[s,i,o,l]=r.match(Jd);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},PO=e=>Ss(0,255,e),sf={...Si,transform:e=>Math.round(PO(e))},Js={test:Sx("rgb","red"),parse:AN("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+sf.transform(e)+", "+sf.transform(t)+", "+sf.transform(n)+", "+Ra(Oa.transform(r))+")"};function _O(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const pp={test:Sx("#"),parse:_O,transform:Js.transform},Gi={test:Sx("hsl","hue"),parse:AN("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ir.transform(Ra(t))+", "+ir.transform(Ra(n))+", "+Ra(Oa.transform(r))+")"},$t={test:e=>Js.test(e)||pp.test(e)||Gi.test(e),parse:e=>Js.test(e)?Js.parse(e):Gi.test(e)?Gi.parse(e):pp.parse(e),transform:e=>$l(e)?e:e.hasOwnProperty("red")?Js.transform(e):Gi.transform(e)},Qe=(e,t,n)=>-n*e+n*t+e;function of(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function AO({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=of(c,l,e+1/3),i=of(c,l,e),o=of(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const af=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},MO=[pp,Js,Gi],IO=e=>MO.find(t=>t.test(e));function wv(e){const t=IO(e);let n=t.parse(e);return t===Gi&&(n=AO(n)),n}const MN=(e,t)=>{const n=wv(e),r=wv(t),s={...n};return i=>(s.red=af(n.red,r.red,i),s.green=af(n.green,r.green,i),s.blue=af(n.blue,r.blue,i),s.alpha=Qe(n.alpha,r.alpha,i),Js.transform(s))};function OO(e){var t,n;return isNaN(e)&&$l(e)&&(((t=e.match(Jd))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(iN))===null||n===void 0?void 0:n.length)||0)>0}const IN={regex:TI,countKey:"Vars",token:"${v}",parse:st},ON={regex:iN,countKey:"Colors",token:"${c}",parse:$t.parse},RN={regex:Jd,countKey:"Numbers",token:"${n}",parse:Si.parse};function lf(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function qu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&lf(n,IN),lf(n,ON),lf(n,RN),n}function LN(e){return qu(e).values}function FN(e){const{values:t,numColors:n,numVars:r,tokenised:s}=qu(e),i=t.length;return o=>{let l=s;for(let c=0;c<i;c++)c<r?l=l.replace(IN.token,o[c]):c<r+n?l=l.replace(ON.token,$t.transform(o[c])):l=l.replace(RN.token,Ra(o[c]));return l}}const RO=e=>typeof e=="number"?0:e;function LO(e){const t=LN(e);return FN(e)(t.map(RO))}const Cs={test:OO,parse:LN,createTransformer:FN,getAnimatableNone:LO},$N=(e,t)=>n=>`${n>0?t:e}`;function zN(e,t){return typeof e=="number"?n=>Qe(e,t,n):$t.test(e)?MN(e,t):e.startsWith("var(")?$N(e,t):VN(e,t)}const BN=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>zN(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},FO=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=zN(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},VN=(e,t)=>{const n=Cs.createTransformer(t),r=qu(e),s=qu(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ps(BN(r.values,s.values),n):$N(e,t)},fl=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},jv=(e,t)=>n=>Qe(e,t,n);function $O(e){return typeof e=="number"?jv:typeof e=="string"?$t.test(e)?MN:VN:Array.isArray(e)?BN:typeof e=="object"?FO:jv}function zO(e,t,n){const r=[],s=n||$O(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||st:t;l=ps(c,l)}r.push(l)}return r}function UN(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(bx(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=zO(t,r,s),l=o.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=fl(e[d],e[d+1],u);return o[d](h)};return n?u=>c(Ss(e[0],e[i-1],u)):c}function BO(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=fl(0,t,r);e.push(Qe(n,1,s))}}function VO(e){const t=[0];return BO(t,e.length-1),t}function UO(e,t){return e.map(n=>n*t)}function WO(e,t){return e.map(()=>t||EN).splice(0,e.length-1)}function Gu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=NO(r)?r.map(bv):bv(r),i={done:!1,value:t[0]},o=UO(n&&n.length===t.length?n:VO(t),e),l=UN(o,t,{ease:Array.isArray(s)?s:WO(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function WN(e,t){return t?e*(1e3/t):0}const HO=5;function HN(e,t,n){const r=Math.max(t-HO,0);return WN(n-e(r),t-r)}const cf=.001,qO=.01,GO=10,YO=.05,QO=1;function KO({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i,o=1-t;o=Ss(YO,QO,o),e=Ss(qO,GO,kr(e)),o<1?(s=u=>{const d=u*o,h=d*e,f=d-n,m=gp(u,o),p=Math.exp(-h);return cf-f/m*p},i=u=>{const h=u*o*e,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*e,p=Math.exp(-h),g=gp(Math.pow(u,2),o);return(-s(u)+cf>0?-1:1)*((f-m)*p)/g}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-cf+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=JO(s,i,l);if(e=ri(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const XO=12;function JO(e,t,n){let r=n;for(let s=1;s<XO;s++)r=r-e(r)/t(r);return r}function gp(e,t){return e*Math.sqrt(1-t*t)}const ZO=["duration","bounce"],eR=["stiffness","damping","mass"];function Sv(e,t){return t.some(n=>e[n]!==void 0)}function tR(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Sv(e,eR)&&Sv(e,ZO)){const n=KO(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function qN({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=tR({...r,velocity:-kr(r.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-s,y=kr(Math.sqrt(l/u)),b=Math.abs(g)<5;n||(n=b?.01:2),t||(t=b?.005:.5);let v;if(p<1){const w=gp(y,p);v=S=>{const j=Math.exp(-p*y*S);return i-j*((m+p*y*g)/w*Math.sin(w*S)+g*Math.cos(w*S))}}else if(p===1)v=w=>i-Math.exp(-y*w)*(g+(m+y*g)*w);else{const w=y*Math.sqrt(p*p-1);v=S=>{const j=Math.exp(-p*y*S),k=Math.min(w*S,300);return i-j*((m+p*y*g)*Math.sinh(k)+w*g*Math.cosh(k))/w}}return{calculatedDuration:f&&d||null,next:w=>{const S=v(w);if(f)o.done=w>=d;else{let j=m;w!==0&&(p<1?j=HN(v,w,S):j=0);const k=Math.abs(j)<=n,N=Math.abs(i-S)<=t;o.done=k&&N}return o.value=o.done?i:S,o}}}function Cv({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=n*t;const y=h+g,b=o===void 0?y:o(y);b!==y&&(g=b-h);const v=C=>-g*Math.exp(-C/r),w=C=>b+v(C),S=C=>{const E=v(C),D=w(C);f.done=Math.abs(E)<=u,f.value=f.done?b:D};let j,k;const N=C=>{m(f.value)&&(j=C,k=qN({keyframes:[f.value,p(f.value)],velocity:HN(w,C,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:C=>{let E=!1;return!k&&j===void 0&&(E=!0,S(C),N(C)),j!==void 0&&C>j?k.next(C-j):(!E&&S(C),f)}}}const nR=e=>{const t=({timestamp:n})=>e(n);return{start:()=>$e.update(t,!0),stop:()=>Ir(t),now:()=>Dt.isProcessing?Dt.timestamp:performance.now()}},Nv=2e4;function kv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Nv;)t+=n,r=e.next(t);return t>=Nv?1/0:t}const rR={decay:Cv,inertia:Cv,tween:Gu,keyframes:Gu,spring:qN};function Yu({autoplay:e=!0,delay:t=0,driver:n=nR,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,p=!1,g,y;const b=()=>{y=new Promise(G=>{g=G})};b();let v;const w=rR[s]||Gu;let S;w!==Gu&&typeof r[0]!="number"&&(S=UN([0,100],r,{clamp:!1}),r=[0,100]);const j=w({...f,keyframes:r});let k;l==="mirror"&&(k=w({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let N="idle",C=null,E=null,D=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=kv(j));const{calculatedDuration:$}=j;let B=1/0,F=1/0;$!==null&&(B=$+o,F=B*(i+1)-o);let T=0;const A=G=>{if(E===null)return;m>0&&(E=Math.min(E,G)),m<0&&(E=Math.min(G-F/m,E)),C!==null?T=C:T=Math.round(G-E)*m;const ee=T-t*(m>=0?1:-1),ie=m>=0?ee<0:ee>F;T=Math.max(ee,0),N==="finished"&&C===null&&(T=F);let V=T,X=j;if(i){const Y=Math.min(T,F)/B;let oe=Math.floor(Y),_=Y%1;!_&&Y>=1&&(_=1),_===1&&oe--,oe=Math.min(oe,i+1),!!(oe%2)&&(l==="reverse"?(_=1-_,o&&(_-=o/B)):l==="mirror"&&(X=k)),V=Ss(0,1,_)*B}const U=ie?{done:!1,value:r[0]}:X.next(V);S&&(U.value=S(U.value));let{done:O}=U;!ie&&$!==null&&(O=m>=0?T>=F:T<=0);const W=C===null&&(N==="finished"||N==="running"&&O);return h&&h(U.value),W&&P(),U},z=()=>{v&&v.stop(),v=void 0},M=()=>{N="idle",z(),g(),b(),E=D=null},P=()=>{N="finished",d&&d(),z(),g()},I=()=>{if(p)return;v||(v=n(A));const G=v.now();c&&c(),C!==null?E=G-C:(!E||N==="finished")&&(E=G),N==="finished"&&b(),D=E,C=null,N="running",v.start()};e&&I();const H={then(G,ee){return y.then(G,ee)},get time(){return kr(T)},set time(G){G=ri(G),T=G,C!==null||!v||m===0?C=G:E=v.now()-G/m},get duration(){const G=j.calculatedDuration===null?kv(j):j.calculatedDuration;return kr(G)},get speed(){return m},set speed(G){G===m||!v||(m=G,H.time=kr(T))},get state(){return N},play:I,pause:()=>{N="paused",C=T},stop:()=>{p=!0,N!=="idle"&&(N="idle",u&&u(),M())},cancel:()=>{D!==null&&A(D),M()},complete:()=>{N="finished"},sample:G=>(E=0,A(G))};return H}function sR(e){let t;return()=>(t===void 0&&(t=e()),t)}const iR=sR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),oR=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xc=10,aR=2e4,lR=(e,t)=>t.type==="spring"||e==="backgroundColor"||!SN(t.ease);function cR(e,t,{onUpdate:n,onComplete:r,...s}){if(!(iR()&&oR.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(w=>{l=w})};d();let{keyframes:h,duration:f=300,ease:m,times:p}=s;if(lR(t,s)){const w=Yu({...s,repeat:0,delay:0});let S={done:!1,value:h[0]};const j=[];let k=0;for(;!S.done&&k<aR;)S=w.sample(k),j.push(S.value),k+=xc;p=void 0,h=j,f=k-xc,m="linear"}const g=yO(e.owner.current,t,h,{...s,duration:f,ease:m,times:p}),y=()=>{u=!1,g.cancel()},b=()=>{u=!0,$e.update(y),l(),d()};return g.onfinish=()=>{u||(e.set(vO(h,s)),r&&r(),b())},{then(w,S){return c.then(w,S)},attachTimeline(w){return g.timeline=w,g.onfinish=null,st},get time(){return kr(g.currentTime||0)},set time(w){g.currentTime=ri(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return kr(f)},play:()=>{o||(g.play(),Ir(y))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const S=Yu({...s,autoplay:!1});e.setWithVelocity(S.sample(w-xc).value,S.sample(w).value,xc)}b()},complete:()=>{u||g.finish()},cancel:b}}function uR({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:st,pause:st,stop:st,then:i=>(i(),Promise.resolve()),cancel:st,complete:st});return t?Yu({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const dR={type:"spring",stiffness:500,damping:25,restSpeed:10},hR=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),fR={type:"keyframes",duration:.8},mR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pR=(e,{keyframes:t})=>t.length>2?fR:ji.has(e)?e.startsWith("scale")?hR(t[1]):dR:mR,xp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cs.test(t)||t==="0")&&!t.startsWith("url(")),gR=new Set(["brightness","contrast","saturate","opacity"]);function xR(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Jd)||[];if(!r)return e;const s=n.replace(r,"");let i=gR.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const yR=/([a-z-]*)\(.*?\)/g,yp={...Cs,getAnimatableNone:e=>{const t=e.match(yR);return t?t.map(xR).join(" "):e}},vR={...oN,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:yp,WebkitFilter:yp},Cx=e=>vR[e];function GN(e,t){let n=Cx(e);return n!==yp&&(n=Cs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const YN=e=>/^0[^.\s]+$/.test(e);function bR(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||YN(e)}function wR(e,t,n,r){const s=xp(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),bR(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=GN(t,l)}return i}function jR({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Nx(e,t){return e[t]||e.default||e}const SR={skipAnimations:!1},kx=(e,t,n,r={})=>s=>{const i=Nx(r,e)||{},o=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-ri(o);const c=wR(t,e,n,i),u=c[0],d=c[c.length-1],h=xp(e,u),f=xp(e,d);let m={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(jR(i)||(m={...m,...pR(e,m)}),m.duration&&(m.duration=ri(m.duration)),m.repeatDelay&&(m.repeatDelay=ri(m.repeatDelay)),!h||!f||xO.current||i.type===!1||SR.skipAnimations)return uR(m);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=cR(t,e,m);if(p)return p}return Yu(m)};function Qu(e){return!!(tn(e)&&e.add)}const QN=e=>/^\-?\d*\.?\d+$/.test(e);function Ex(e,t){e.indexOf(t)===-1&&e.push(t)}function Dx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Tx{constructor(){this.subscriptions=[]}add(t){return Ex(this.subscriptions,t),()=>Dx(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const CR=e=>!isNaN(parseFloat(e));class NR{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Dt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,$e.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>$e.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=CR(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Tx);const r=this.events[t].add(n);return t==="change"?()=>{r(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?WN(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function po(e,t){return new NR(e,t)}const KN=e=>t=>t.test(e),kR={test:e=>e==="auto",parse:e=>e},XN=[Si,ve,ir,Wr,MI,AI,kR],Xo=e=>XN.find(KN(e)),ER=[...XN,$t,Cs],DR=e=>ER.find(KN(e));function TR(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,po(n))}function PR(e,t){const n=eh(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const l=GI(i[o]);TR(e,o,l)}}function _R(e,t,n){var r,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(QN(d)||YN(d))?d=parseFloat(d):!DR(d)&&Cs.test(u)&&(d=GN(c,u)),e.addValue(c,po(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function AR(e,t){return t?(t[e]||t.default||t).from:void 0}function MR(e,t,n){const r={};for(const s in e){const i=AR(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function IR({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function OR(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function JN(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),m=l[h];if(!f||m===void 0||d&&IR(d,h))continue;const p={delay:n,elapsed:0,...Nx(i||{},h)};if(window.HandoffAppearAnimations){const b=e.getProps()[ZC];if(b){const v=window.HandoffAppearAnimations(b,h,f,$e);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!OR(f,m);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(kx(h,f,m,e.shouldReduceMotion&&ji.has(h)?{type:!1}:p));const y=f.animation;Qu(c)&&(c.add(h),y.then(()=>c.remove(h))),u.push(y)}return o&&Promise.all(u).then(()=>{o&&PR(e,o)}),u}function vp(e,t,n={}){const r=eh(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(JN(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return RR(e,t,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function RR(e,t,n=0,r=0,s=1,i){const o=[],l=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(e.variantChildren).sort(LR).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(vp(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function LR(e,t){return e.sortNodePosition(t)}function FR(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>vp(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=vp(e,t,n);else{const s=typeof t=="function"?eh(e,t,n.custom):t;r=Promise.all(JN(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const $R=[...ux].reverse(),zR=ux.length;function BR(e){return t=>Promise.all(t.map(({animation:n,options:r})=>FR(e,n,r)))}function VR(e){let t=BR(e);const n=WR();let r=!0;const s=(c,u)=>{const d=eh(e,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){t=c(e)}function o(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],m=new Set;let p={},g=1/0;for(let b=0;b<zR;b++){const v=$R[b],w=n[v],S=d[v]!==void 0?d[v]:h[v],j=dl(S),k=v===u?w.isActive:null;k===!1&&(g=b);let N=S===h[v]&&S!==d[v]&&j;if(N&&r&&e.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...p},!w.isActive&&k===null||!S&&!w.prevProp||Kd(S)||typeof S=="boolean")continue;let E=UR(w.prevProp,S)||v===u&&w.isActive&&!N&&j||b>g&&j,D=!1;const $=Array.isArray(S)?S:[S];let B=$.reduce(s,{});k===!1&&(B={});const{prevResolvedValues:F={}}=w,T={...F,...B},A=z=>{E=!0,m.has(z)&&(D=!0,m.delete(z)),w.needsAnimating[z]=!0};for(const z in T){const M=B[z],P=F[z];if(p.hasOwnProperty(z))continue;let I=!1;Hu(M)&&Hu(P)?I=!wN(M,P):I=M!==P,I?M!==void 0?A(z):m.add(z):M!==void 0&&m.has(z)?A(z):w.protectedKeys[z]=!0}w.prevProp=S,w.prevResolvedValues=B,w.isActive&&(p={...p,...B}),r&&e.blockInitialAnimation&&(E=!1),E&&(!N||D)&&f.push(...$.map(z=>({animation:z,options:{type:v,...c}})))}if(m.size){const b={};m.forEach(v=>{const w=e.getBaseTarget(v);w!==void 0&&(b[v]=w)}),f.push({animation:b})}let y=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(f):Promise.resolve()}function l(c,u,d){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=o(d,c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n}}function UR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!wN(t,e):!1}function Ms(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WR(){return{animate:Ms(!0),whileInView:Ms(),whileHover:Ms(),whileTap:Ms(),whileDrag:Ms(),whileFocus:Ms(),exit:Ms()}}class HR extends _s{constructor(t){super(t),t.animationState||(t.animationState=VR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Kd(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let qR=0;class GR extends _s{constructor(){super(...arguments),this.id=qR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const YR={animation:{Feature:HR},exit:{Feature:GR}},Ev=(e,t)=>Math.abs(e-t);function QR(e,t){const n=Ev(e.x,t.x),r=Ev(e.y,t.y);return Math.sqrt(n**2+r**2)}class ZN{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=df(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=QR(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=Dt;this.history.push({...p,timestamp:g});const{onStart:y,onMove:b}=this.handlers;f||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=uf(f,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=df(h.type==="pointercancel"?this.lastMoveEventInfo:uf(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,y),p&&p(h,y)},!gN(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Zd(t),l=uf(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Dt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,df(l,this.history)),this.removeListeners=ps(Nr(this.contextWindow,"pointermove",this.handlePointerMove),Nr(this.contextWindow,"pointerup",this.handlePointerUp),Nr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ir(this.updatePoint)}}function uf(e,t){return t?{point:t(e.point)}:e}function Dv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function df({point:e},t){return{point:e,delta:Dv(e,e2(t)),offset:Dv(e,KR(t)),velocity:XR(t,.1)}}function KR(e){return e[0]}function e2(e){return e[e.length-1]}function XR(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=e2(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>ri(t)));)n--;if(!r)return{x:0,y:0};const i=kr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function hn(e){return e.max-e.min}function bp(e,t=0,n=.01){return Math.abs(e-t)<=n}function Tv(e,t,n,r=.5){e.origin=r,e.originPoint=Qe(t.min,t.max,e.origin),e.scale=hn(n)/hn(t),(bp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Qe(n.min,n.max,e.origin)-e.originPoint,(bp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function La(e,t,n,r){Tv(e.x,t.x,n.x,r?r.originX:void 0),Tv(e.y,t.y,n.y,r?r.originY:void 0)}function Pv(e,t,n){e.min=n.min+t.min,e.max=e.min+hn(t)}function JR(e,t,n){Pv(e.x,t.x,n.x),Pv(e.y,t.y,n.y)}function _v(e,t,n){e.min=t.min-n.min,e.max=e.min+hn(t)}function Fa(e,t,n){_v(e.x,t.x,n.x),_v(e.y,t.y,n.y)}function ZR(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Qe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Qe(n,e,r.max):Math.min(e,n)),e}function Av(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function e4(e,{top:t,left:n,bottom:r,right:s}){return{x:Av(e.x,n,s),y:Av(e.y,t,r)}}function Mv(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function t4(e,t){return{x:Mv(e.x,t.x),y:Mv(e.y,t.y)}}function n4(e,t){let n=.5;const r=hn(e),s=hn(t);return s>r?n=fl(t.min,t.max-r,e.min):r>s&&(n=fl(e.min,e.max-s,t.min)),Ss(0,1,n)}function r4(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const wp=.35;function s4(e=wp){return e===!1?e=0:e===!0&&(e=wp),{x:Iv(e,"left","right"),y:Iv(e,"top","bottom")}}function Iv(e,t,n){return{min:Ov(e,t),max:Ov(e,n)}}function Ov(e,t){return typeof e=="number"?e:e[t]||0}const Rv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yi=()=>({x:Rv(),y:Rv()}),Lv=()=>({min:0,max:0}),at=()=>({x:Lv(),y:Lv()});function bn(e){return[e("x"),e("y")]}function t2({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function i4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function o4(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function hf(e){return e===void 0||e===1}function jp({scale:e,scaleX:t,scaleY:n}){return!hf(e)||!hf(t)||!hf(n)}function Bs(e){return jp(e)||n2(e)||e.z||e.rotate||e.rotateX||e.rotateY}function n2(e){return Fv(e.x)||Fv(e.y)}function Fv(e){return e&&e!=="0%"}function Ku(e,t,n){const r=e-n,s=t*r;return n+s}function $v(e,t,n,r,s){return s!==void 0&&(e=Ku(e,s,r)),Ku(e,n,r)+t}function Sp(e,t=0,n=1,r,s){e.min=$v(e.min,t,n,r,s),e.max=$v(e.max,t,n,r,s)}function r2(e,{x:t,y:n}){Sp(e.x,t.translate,t.scale,t.originPoint),Sp(e.y,n.translate,n.scale,n.originPoint)}function a4(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=n[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Qi(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,r2(e,o)),r&&Bs(i.latestValues)&&Qi(e,i.latestValues))}t.x=zv(t.x),t.y=zv(t.y)}function zv(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Gr(e,t){e.min=e.min+t,e.max=e.max+t}function Bv(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=Qe(e.min,e.max,i);Sp(e,t[n],t[r],o,t.scale)}const l4=["x","scaleX","originX"],c4=["y","scaleY","originY"];function Qi(e,t){Bv(e.x,t,l4),Bv(e.y,t,c4)}function s2(e,t){return t2(o4(e.getBoundingClientRect(),t))}function u4(e,t,n){const r=s2(e,n),{scroll:s}=t;return s&&(Gr(r.x,s.offset.x),Gr(r.y,s.offset.y)),r}const i2=({current:e})=>e?e.ownerDocument.defaultView:null,d4=new WeakMap;class h4{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zd(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=yN(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bn(y=>{let b=this.getAxisMotionValue(y).get()||0;if(ir.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[y];w&&(b=hn(w)*(parseFloat(b)/100))}}this.originPoint[y]=b}),p&&$e.update(()=>p(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=f4(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>bn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ZN(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:i2(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&$e.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!yc(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=ZR(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&qi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=e4(s.layoutBox,n):this.constraints=!1,this.elastic=s4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&bn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=r4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!qi(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=u4(r,s.root,this.visualElement.getTransformPagePoint());let o=t4(s.layout.layoutBox,i);if(n){const l=n(i4(o));this.hasMutatedConstraints=!!l,l&&(o=t2(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=bn(d=>{if(!yc(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,p={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(kx(t,r,0,n))}stopAnimation(){bn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){bn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){bn(n=>{const{drag:r}=this.getProps();if(!yc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];i.set(t[n]-Qe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!qi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};bn(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();s[o]=n4({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bn(o=>{if(!yc(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Qe(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;d4.set(this.visualElement,this);const t=this.visualElement.current,n=Nr(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();qi(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=wr(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(bn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=wp,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function yc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function f4(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class m4 extends _s{constructor(t){super(t),this.removeGroupControls=st,this.removeListeners=st,this.controls=new h4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||st}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vv=e=>(t,n)=>{e&&$e.update(()=>e(t,n))};class p4 extends _s{constructor(){super(...arguments),this.removePointerDownListener=st}onPointerDown(t){this.session=new ZN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Vv(t),onStart:Vv(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&$e.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Nr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function g4(){const e=x.useContext(Yd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=x.useId();return x.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Uv(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Jo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ve.test(e))e=parseFloat(e);else return e;const n=Uv(e,t.target.x),r=Uv(e,t.target.y);return`${n}% ${r}%`}},x4={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Cs.parse(e);if(s.length>5)return r;const i=Cs.createTransformer(e),o=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Qe(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class y4 extends se.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;NI(v4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||$e.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function o2(e){const[t,n]=g4(),r=x.useContext(hx);return se.createElement(y4,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(tN),isPresent:t,safeToRemove:n})}const v4={borderRadius:{...Jo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jo,borderTopRightRadius:Jo,borderBottomLeftRadius:Jo,borderBottomRightRadius:Jo,boxShadow:x4},a2=["TopLeft","TopRight","BottomLeft","BottomRight"],b4=a2.length,Wv=e=>typeof e=="string"?parseFloat(e):e,Hv=e=>typeof e=="number"||ve.test(e);function w4(e,t,n,r,s,i){s?(e.opacity=Qe(0,n.opacity!==void 0?n.opacity:1,j4(r)),e.opacityExit=Qe(t.opacity!==void 0?t.opacity:1,0,S4(r))):i&&(e.opacity=Qe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<b4;o++){const l=`border${a2[o]}Radius`;let c=qv(t,l),u=qv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Hv(c)===Hv(u)?(e[l]=Math.max(Qe(Wv(c),Wv(u),r),0),(ir.test(u)||ir.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Qe(t.rotate||0,n.rotate||0,r))}function qv(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const j4=l2(0,.5,PN),S4=l2(.5,.95,st);function l2(e,t,n){return r=>r<e?0:r>t?1:n(fl(e,t,r))}function Gv(e,t){e.min=t.min,e.max=t.max}function gn(e,t){Gv(e.x,t.x),Gv(e.y,t.y)}function Yv(e,t,n,r,s){return e-=t,e=Ku(e,1/n,r),s!==void 0&&(e=Ku(e,1/s,r)),e}function C4(e,t=0,n=1,r=.5,s,i=e,o=e){if(ir.test(t)&&(t=parseFloat(t),t=Qe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Qe(i.min,i.max,r);e===i&&(l-=t),e.min=Yv(e.min,t,n,l,s),e.max=Yv(e.max,t,n,l,s)}function Qv(e,t,[n,r,s],i,o){C4(e,t[n],t[r],t[s],t.scale,i,o)}const N4=["x","scaleX","originX"],k4=["y","scaleY","originY"];function Kv(e,t,n,r){Qv(e.x,t,N4,n?n.x:void 0,r?r.x:void 0),Qv(e.y,t,k4,n?n.y:void 0,r?r.y:void 0)}function Xv(e){return e.translate===0&&e.scale===1}function c2(e){return Xv(e.x)&&Xv(e.y)}function E4(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function u2(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Jv(e){return hn(e.x)/hn(e.y)}class D4{constructor(){this.members=[]}add(t){Ex(this.members,t),t.scheduleRender()}remove(t){if(Dx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zv(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const T4=(e,t)=>e.depth-t.depth;class P4{constructor(){this.children=[],this.isDirty=!1}add(t){Ex(this.children,t),this.isDirty=!0}remove(t){Dx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(T4),this.isDirty=!1,this.children.forEach(t)}}function _4(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Ir(r),e(i-t))};return $e.read(r,!0),()=>Ir(r)}function A4(e){window.MotionDebug&&window.MotionDebug.record(e)}function M4(e){return e instanceof SVGElement&&e.tagName!=="svg"}function I4(e,t,n){const r=tn(e)?e:po(e);return r.start(kx("",r,t,n)),r.animation}const eb=["","X","Y","Z"],O4={visibility:"hidden"},tb=1e3;let R4=0;const Vs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function d2({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=R4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vs.totalNodes=Vs.resolvedTargetDeltas=Vs.recalculatedProjection=0,this.nodes.forEach($4),this.nodes.forEach(W4),this.nodes.forEach(H4),this.nodes.forEach(z4),A4(Vs)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new P4)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Tx),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=M4(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=_4(f,250),iu.hasAnimatedSinceResize&&(iu.hasAnimatedSinceResize=!1,this.nodes.forEach(rb))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||K4,{onLayoutAnimationStart:y,onLayoutAnimationComplete:b}=d.getProps(),v=!this.targetLayout||!u2(this.targetLayout,p)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const S={...Nx(g,"layout"),onPlay:y,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||rb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(q4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nb);return}this.isUpdating||this.nodes.forEach(V4),this.isUpdating=!1,this.nodes.forEach(U4),this.nodes.forEach(L4),this.nodes.forEach(F4),this.clearAllSnapshots();const l=performance.now();Dt.delta=Ss(0,1e3/60,l-Dt.timestamp),Dt.timestamp=l,Dt.isProcessing=!0,tf.update.process(Dt),tf.preRender.process(Dt),tf.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(B4),this.sharedNodes.forEach(G4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!c2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Bs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),X4(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return at();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Gr(l.x,c.offset.x),Gr(l.y,c.offset.y)),l}removeElementScroll(o){const l=at();gn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){gn(l,o);const{scroll:f}=this.root;f&&(Gr(l.x,-f.offset.x),Gr(l.y,-f.offset.y))}Gr(l.x,d.offset.x),Gr(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=at();gn(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Qi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Bs(d.latestValues)&&Qi(c,d.latestValues)}return Bs(this.latestValues)&&Qi(c,this.latestValues),c}removeTransform(o){const l=at();gn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Bs(u.latestValues))continue;jp(u.latestValues)&&u.updateSnapshot();const d=at(),h=u.measurePageBox();gn(d,h),Kv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Bs(this.latestValues)&&Kv(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Dt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Fa(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gn(this.target,this.layout.layoutBox),r2(this.target,this.targetDelta)):gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Fa(this.relativeTargetOrigin,this.target,m.target),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jp(this.parent.latestValues)||n2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;gn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;a4(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=Yi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Yi(),this.projectionDeltaWithTransform=Yi());const g=this.projectionTransform;La(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Zv(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Vs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Yi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=at(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,y=this.getStack(),b=!y||y.members.length<=1,v=!!(g&&!b&&this.options.crossfade===!0&&!this.path.some(Q4));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const j=S/1e3;sb(h.x,o.x,j),sb(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Y4(this.relativeTarget,this.relativeTargetOrigin,f,j),w&&E4(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=at()),gn(w,this.relativeTarget)),g&&(this.animationValues=d,w4(d,u,this.latestValues,j,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{iu.hasAnimatedSinceResize=!0,this.currentAnimation=I4(0,tb,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&h2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||at();const h=hn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=hn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}gn(l,c),Qi(l,d),La(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new D4),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<eb.length;d++){const h="rotate"+eb[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return O4;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=su(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=su(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Bs(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Zv(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:p}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Uu){if(f[g]===void 0)continue;const{correct:y,applyTo:b}=Uu[g],v=u.transform==="none"?f[g]:y(f[g],h);if(b){const w=b.length;for(let S=0;S<w;S++)u[b[S]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=h===this?su(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(nb),this.root.sharedNodes.clear()}}}function L4(e){e.updateLayout()}function F4(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?bn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=hn(f);f.min=r[h].min,f.max=f.min+m}):h2(i,n.layoutBox,r)&&bn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=hn(r[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Yi();La(l,r,n.layoutBox);const c=Yi();o?La(c,e.applyTransform(s,!0),n.measuredBox):La(c,r,n.layoutBox);const u=!c2(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=at();Fa(p,n.layoutBox,f.layoutBox);const g=at();Fa(g,r,m.layoutBox),u2(p,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function $4(e){Vs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function z4(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function B4(e){e.clearSnapshot()}function nb(e){e.clearMeasurements()}function V4(e){e.isLayoutDirty=!1}function U4(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rb(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function W4(e){e.resolveTargetDelta()}function H4(e){e.calcProjection()}function q4(e){e.resetRotation()}function G4(e){e.removeLeadSnapshot()}function sb(e,t,n){e.translate=Qe(t.translate,0,n),e.scale=Qe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ib(e,t,n,r){e.min=Qe(t.min,n.min,r),e.max=Qe(t.max,n.max,r)}function Y4(e,t,n,r){ib(e.x,t.x,n.x,r),ib(e.y,t.y,n.y,r)}function Q4(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const K4={duration:.45,ease:[.4,0,.1,1]},ob=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),ab=ob("applewebkit/")&&!ob("chrome/")?Math.round:st;function lb(e){e.min=ab(e.min),e.max=ab(e.max)}function X4(e){lb(e.x),lb(e.y)}function h2(e,t,n){return e==="position"||e==="preserve-aspect"&&!bp(Jv(t),Jv(n),.2)}const J4=d2({attachResizeListener:(e,t)=>wr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ff={current:void 0},f2=d2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ff.current){const e=new J4({});e.mount(window),e.setOptions({layoutScroll:!0}),ff.current=e}return ff.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Z4={pan:{Feature:p4},drag:{Feature:m4,ProjectionNode:f2,MeasureLayout:o2}},eL=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function tL(e){const t=eL.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Cp(e,t,n=1){const[r,s]=tL(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return QN(o)?parseFloat(o):o}else return fp(s)?Cp(s,t,n+1):s}function nL(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!fp(i))return;const o=Cp(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!fp(i))continue;const o=Cp(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const rL=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),m2=e=>rL.has(e),sL=e=>Object.keys(e).some(m2),cb=e=>e===Si||e===ve,ub=(e,t)=>parseFloat(e.split(", ")[t]),db=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return ub(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?ub(i[1],e):0}},iL=new Set(["x","y","z"]),oL=Fl.filter(e=>!iL.has(e));function aL(e){const t=[];return oL.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const go={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:db(4,13),y:db(5,14)};go.translateX=go.x;go.translateY=go.y;const lL=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{l[u]=go[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=go[u](c,i)}),e},cL=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(m2);let i=[],o=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],h=Xo(d);const f=t[c];let m;if(Hu(f)){const p=f.length,g=f[0]===null?1:0;d=f[g],h=Xo(d);for(let y=g;y<p&&f[y]!==null;y++)m?bx(Xo(f[y])===m):m=Xo(f[y])}else m=Xo(f);if(h!==m)if(cb(h)&&cb(m)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&m===ve&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):t[c]=h.transform(f):(o||(i=aL(e),o=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=lL(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Qd&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function uL(e,t,n,r){return sL(t)?cL(e,t,n,r):{target:t,transitionEnd:r}}const dL=(e,t,n,r)=>{const s=nL(e,t,r);return t=s.target,r=s.transitionEnd,uL(e,t,n,r)},Np={current:null},p2={current:!1};function hL(){if(p2.current=!0,!!Qd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Np.current=e.matches;e.addListener(t),t()}else Np.current=!1}function fL(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(tn(i))e.addValue(s,i),Qu(r)&&r.add(s);else if(tn(o))e.addValue(s,po(i,{owner:e})),Qu(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,po(l!==void 0?l:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const hb=new WeakMap,g2=Object.keys(hl),mL=g2.length,fb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pL=dx.length;class gL{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>$e.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Xd(n),this.isVariantNode=eN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];l[h]!==void 0&&tn(f)&&(f.set(l[h],!1),Qu(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,hb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),p2.current||hL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Np.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hb.delete(this.current),this.projection&&this.projection.unmount(),Ir(this.notifyUpdate),Ir(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=ji.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&$e.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,l;for(let c=0;c<mL;c++){const u=g2[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=hl[u];f&&(o=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(l=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&qi(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fb.length;r++){const s=fb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=fL(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<pL;r++){const s=dx[r],i=this.props[s];(dl(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=po(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=vx(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!tn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Tx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class x2 extends gL{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=MR(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){_R(this,r,o);const l=dL(this,r,o,n);n=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:n,...r}}}function xL(e){return window.getComputedStyle(e)}class yL extends x2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(ji.has(n)){const r=Cx(n);return r&&r.default||0}else{const r=xL(t),s=(sN(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return s2(t,n)}build(t,n,r,s){mx(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return yx(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;tn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){uN(t,n,r,s)}}class vL extends x2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ji.has(n)){const r=Cx(n);return r&&r.default||0}return n=dN.has(n)?n:cx(n),t.getAttribute(n)}measureInstanceViewportBox(){return at()}scrapeMotionValuesFromProps(t,n){return fN(t,n)}build(t,n,r,s){gx(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){hN(t,n,r,s)}mount(t){this.isSVGTag=xx(t.tagName),super.mount(t)}}const bL=(e,t)=>fx(e)?new vL(t,{enableHardwareAcceleration:!1}):new yL(t,{enableHardwareAcceleration:!0}),wL={layout:{ProjectionNode:f2,MeasureLayout:o2}},jL={...YR,...mO,...Z4,...wL},Kr=SI((e,t)=>tO(e,t,jL,bL));function y2(){const e=x.useRef(!1);return lx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function SL(){const e=y2(),[t,n]=x.useState(0),r=x.useCallback(()=>{e.current&&n(t+1)},[t]);return[x.useCallback(()=>$e.postRender(r),[r]),t]}class CL extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function NL({children:e,isPresent:t}){const n=x.useId(),r=x.useRef(null),s=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement(CL,{isPresent:t,childRef:r,sizeRef:s},x.cloneElement(e,{ref:r}))}const mf=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=mN(kL),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;r&&r()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[n]);return x.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[n]),x.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=x.createElement(NL,{isPresent:n},e)),x.createElement(Yd.Provider,{value:u},e)};function kL(){return new Map}function EL(e){return x.useEffect(()=>()=>e(),[])}const Us=e=>e.key||"";function DL(e,t){e.forEach(n=>{const r=Us(n);t.set(r,n)})}function TL(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const Px=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=x.useContext(hx).forceRender||SL()[0],c=y2(),u=TL(e);let d=u;const h=x.useRef(new Map).current,f=x.useRef(d),m=x.useRef(new Map).current,p=x.useRef(!0);if(lx(()=>{p.current=!1,DL(u,m),f.current=d}),EL(()=>{p.current=!0,m.clear(),h.clear()}),p.current)return x.createElement(x.Fragment,null,d.map(v=>x.createElement(mf,{key:Us(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));d=[...d];const g=f.current.map(Us),y=u.map(Us),b=g.length;for(let v=0;v<b;v++){const w=g[v];y.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((v,w)=>{if(y.indexOf(w)!==-1)return;const S=m.get(w);if(!S)return;const j=g.indexOf(w);let k=v;if(!k){const N=()=>{h.delete(w);const C=Array.from(m.keys()).filter(E=>!y.includes(E));if(C.forEach(E=>m.delete(E)),f.current=u.filter(E=>{const D=Us(E);return D===w||C.includes(D)}),!h.size){if(c.current===!1)return;l(),r&&r()}};k=x.createElement(mf,{key:Us(S),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:i,mode:o},S),h.set(w,k)}d.splice(j,0,k)}),d=d.map(v=>{const w=v.key;return h.has(w)?v:x.createElement(mf,{key:Us(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),x.createElement(x.Fragment,null,h.size?d:d.map(v=>x.cloneElement(v)))},PL="/assets/asp-logo-Cq2CSw-i.jpg",_L="/crane-icon.svg",AL=[{label:"Dashboard",icon:a.jsx(cM,{size:18}),href:"/dashboard",roles:["admin","sales_agent","operations_manager","operator"],end:!0},{label:"Leads",icon:a.jsx(iM,{size:18}),href:"/leads",roles:["admin","sales_agent"]},{label:"Deals",icon:a.jsx(lM,{size:18}),href:"/deals",roles:["admin","sales_agent"]},{label:"Quotations",icon:a.jsx(FC,{size:18}),href:"/quotations",roles:["admin","sales_agent"]},{label:"Customers",icon:a.jsx(ix,{size:18}),href:"/customers",roles:["admin","sales_agent","operations_manager"]},{label:"Job Scheduling",icon:a.jsx(Hn,{size:18}),href:"/jobs",roles:["admin","operations_manager","operator"]},{label:"Site Assessment",icon:a.jsx(ox,{size:18}),href:"/site-assessments",roles:["admin","operations_manager","operator"]},{label:"Configuration",icon:a.jsx(LC,{size:18}),href:"/admin/config",roles:["admin","operations_manager"]},{label:"User Management",icon:a.jsx(en,{size:18}),href:"/admin/users",roles:["admin"]},{label:"Equipment",icon:a.jsx(ws,{size:18}),href:"/admin/equipment",roles:["admin","operations_manager"]},{label:"Services",icon:a.jsx(St,{size:18}),href:"/admin/services",roles:["admin","operations_manager"]},{label:"Feedback",icon:a.jsx(fM,{size:18}),href:"/job-summary",roles:["admin","operations_manager","operator"]},{label:"Template Builder",icon:a.jsx(St,{size:18}),href:"/admin/templates",roles:["admin","sales_agent"]}];function ML({isMobileOpen:e=!1,onMobileClose:t,isCollapsed:n,onCollapseToggle:r}){const{user:s}=qe(),i=lr(),[o,l]=x.useState(!1),c=n!==void 0,u=c?n:o;if(x.useEffect(()=>{const y=()=>{window.innerWidth<1024&&l(!0)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),!s)return null;const d=AL.filter(y=>y.roles.includes(s.role)),h=(y,b)=>b?i.pathname===y:y==="/dashboard"&&i.pathname==="/"?!0:i.pathname.startsWith(y),f=()=>{c&&r?r(!u):l(y=>!y)},m=a.jsx(Px,{children:e&&a.jsxs(a.Fragment,{children:[a.jsx(Kr.div,{className:"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,"aria-hidden":"true"}),a.jsx(Kr.aside,{className:"fixed inset-y-0 left-0 z-50 w-72 max-w-[85%] bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-2xl overflow-y-auto lg:hidden",initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.3,ease:"easeOut"},role:"navigation","aria-label":"Mobile navigation",children:g(!1)})]})}),p=a.jsx("aside",{className:`hidden lg:flex flex-col fixed inset-y-0 left-0 z-30 transition-all duration-300 ease-in-out ${u?"w-16":"w-72"} bg-gradient-to-b from-brand-blue to-brand-blue/95 shadow-xl`,role:"navigation","aria-label":"Main navigation",children:g(u)});return a.jsxs(a.Fragment,{children:[m,p]});function g(y){return a.jsxs("div",{className:"flex flex-col h-full text-white",children:[a.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-white/10",children:[a.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors duration-200 focus:outline-none","aria-label":y?"Expand sidebar":"Collapse sidebar",children:a.jsx(zC,{className:"h-6 w-6 text-white"})}),a.jsxs(er,{to:"/dashboard",className:"flex items-center group","aria-label":"Go to dashboard",children:[a.jsx("img",{src:PL,alt:"ASP Cranes",className:`object-contain transition-all duration-300 group-hover:scale-105 ${y?"h-8 w-8":"h-10 w-auto"}`,onError:b=>{b.currentTarget.src=_L,b.currentTarget.onerror=null}}),!y&&a.jsx(Kr.span,{className:"ml-3 text-xl font-bold bg-gradient-to-r from-white to-brand-gold bg-clip-text text-transparent",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:"ASP CRM"})]})]}),a.jsx("nav",{className:"flex-1 py-6",role:"navigation",children:a.jsx("ul",{className:"space-y-1 px-3",role:"list",children:d.map(b=>{const v=h(b.href,b.end);return a.jsx("li",{role:"listitem",children:a.jsxs(er,{to:b.href,className:`group flex items-center rounded-lg transition-all duration-200 ${y?"justify-center p-3":"p-3"} ${v?"bg-brand-gold text-brand-blue font-semibold shadow-lg scale-105":"text-white/90 hover:bg-white/10 hover:text-white hover:scale-[1.02]"}`,onClick:t,"aria-current":v?"page":void 0,children:[a.jsx("span",{className:`flex-shrink-0 transition-transform group-hover:scale-110 ${v?"text-brand-blue":""}`,children:b.icon}),!y&&a.jsx(Kr.span,{className:"ml-3 text-sm font-medium",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05},children:b.label}),y&&a.jsxs("div",{className:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none transform translate-x-2 group-hover:translate-x-0 transition-all z-50 whitespace-nowrap",children:[b.label,a.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})},b.href)})})}),a.jsx("div",{className:"p-4 border-t border-white/10",children:a.jsxs("div",{className:`flex items-center ${y?"justify-center":"space-x-3"}`,children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:(s==null?void 0:s.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(s==null?void 0:s.name)||"User",className:"h-10 w-10 rounded-full object-cover border-2 border-brand-gold/50 hover:border-brand-gold transition-colors"})}),!y&&s&&a.jsxs(Kr.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[a.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.name||"User"}),a.jsx("p",{className:"text-xs text-white/70 truncate capitalize",children:s.role?s.role.replace("_"," "):"User"}),a.jsxs("button",{onClick:()=>{t&&t();const b=new CustomEvent("sidebar-logout");document.dispatchEvent(b)},className:"mt-2 flex items-center text-xs text-white/80 hover:text-brand-gold px-2 py-1 rounded-md hover:bg-white/10 transition-all duration-200","aria-label":"Logout",children:[a.jsx($C,{className:"h-3 w-3 mr-2"}),"Logout"]})]})]})})]})}}const Ci=async()=>null,Po=async()=>[],v2=Po,b2=Ci,IL=Po,w2=Po,j2=Ci,S2=Po,C2=Po,N2=Ci,k2=Po,E2=Ci,D2=Ci,T2=Ci,P2=Ci,ml=(e,t)=>(t==null?void 0:t.content)||"",ou=()=>({}),OL=Object.freeze(Object.defineProperty({__proto__:null,createService:E2,createSiteAssessment:N2,deleteService:T2,getCustomers:IL,getEquipmentById:b2,getHeaders:ou,getJobsByOperator:v2,getRecentActivities:S2,getServices:k2,getSiteAssessments:C2,getUserNotifications:w2,markNotificationAsRead:j2,mergeQuotationWithTemplate:ml,toggleServiceStatus:P2,updateService:D2},Symbol.toStringTag,{value:"Module"}));function _2(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=_2(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function A2(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=_2(e))&&(r&&(r+=" "),r+=t);return r}const mb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,pb=A2,_o=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return pb(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=mb(d)||mb(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(p=>{let[g,y]=p;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...u,h,f]:u},[]);return pb(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},RL=_o("inline-flex items-center justify-center rounded-full px-1.5 sm:px-2.5 py-0.5 text-xs font-medium",{variants:{variant:{default:"bg-primary-100 text-primary-800",secondary:"bg-secondary-100 text-secondary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",outline:"text-gray-700 border border-gray-200"},size:{xs:"text-[10px] px-1 sm:px-1.5 py-0.5 min-w-[16px] h-[16px]",sm:"text-[11px] px-1.5 sm:px-2 py-0.5 min-w-[18px] h-[18px]",md:"text-xs px-1.5 sm:px-2.5 py-0.5 min-w-[20px] h-[20px]",lg:"text-xs sm:text-sm px-2 sm:px-3 py-0.5 sm:py-1 min-w-[22px] h-[22px] sm:min-w-[24px] sm:h-[24px]"}},defaultVariants:{variant:"default",size:"md"}});function pl({className:e,variant:t,size:n,...r}){return a.jsx("div",{className:RL({variant:t,size:n,className:e}),...r})}const M2=x.memo(({notification:e,onClick:t})=>a.jsx("button",{onClick:()=>t(e),className:`w-full text-left p-3 rounded-lg hover:bg-gray-50 transition-colors ${e.read?"":"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-brand-blue"}`,"aria-describedby":`notification-${e.id}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${e.read?"bg-gray-300":"bg-brand-blue"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),e.message&&a.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.createdAt||Date.now()).toLocaleDateString()})]})]})}));M2.displayName="NotificationItem";const LL=x.memo(function({onMobileMenuClick:t}){const{user:n,logout:r}=qe(),s=Mn(),[i,o]=x.useState([]),[l,c]=x.useState(!1),[u,d]=x.useState(!1);x.useEffect(()=>{n&&h()},[n]),x.useEffect(()=>{const g=y=>{y.target.closest("[data-dropdown]")||(c(!1),d(!1))};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=async()=>{if(n)try{const g=await w2(n.id);o(g)}catch(g){console.error("Failed to fetch notifications:",g)}},f=async()=>{try{await r(),s("/login")}catch(g){console.error("Logout error:",g),s("/login")}},m=async g=>{if(!g.read)try{await j2(g.id),await h()}catch(y){console.error("Failed to mark notification as read:",y)}g.link&&s(g.link),c(!1)},p=i.filter(g=>!g.read).length;return a.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm border-b border-gray-200/60 h-16 flex items-center justify-between px-4 lg:px-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[t&&a.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Toggle navigation menu",children:a.jsx(zC,{className:"h-5 w-5 text-gray-700"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-brand-blue to-brand-blue/80 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a.jsxs("div",{className:"hidden sm:block",children:[a.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:"ASP CRM"}),a.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"Crane Management System"})]})]})]}),a.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-8",children:a.jsxs("div",{className:"relative w-full",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search projects, customers, equipment...",className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-blue/20 focus:border-brand-blue transition-all","aria-label":"Search"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"Quick settings",children:a.jsx(ws,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"relative","data-dropdown":!0,children:[a.jsxs("button",{onClick:()=>c(!l),className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":`Notifications ${p>0?`(${p} unread)`:""}`,"aria-expanded":l,"aria-haspopup":"true",children:[a.jsx(X0,{className:"h-5 w-5 text-gray-600"}),p>0&&a.jsx(pl,{variant:"error",className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] text-[10px] flex items-center justify-center animate-pulse",children:p>99?"99+":p})]}),l&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"}),a.jsxs("span",{className:"text-xs text-gray-500",children:[p," unread"]})]})}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(X0,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"No notifications yet"})]}):a.jsx("div",{className:"p-2 space-y-1",children:i.map(g=>a.jsx(M2,{notification:g,onClick:m},g.id))})}),i.length>0&&a.jsx("div",{className:"p-3 border-t border-gray-100",children:a.jsx("button",{className:"w-full text-sm text-brand-blue hover:text-brand-blue/80 font-medium",children:"View all notifications"})})]})]}),a.jsxs("div",{className:"relative","data-dropdown":!0,children:[a.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-brand-blue/20","aria-label":"User menu","aria-expanded":u,"aria-haspopup":"true",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-8 w-8 rounded-full object-cover border-2 border-gray-200 hover:border-brand-blue/30 transition-colors"}),a.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-400 border-2 border-white rounded-full"})]}),a.jsxs("div",{className:"hidden sm:block text-left",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 leading-tight",children:(n==null?void 0:n.name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 capitalize leading-tight",children:n!=null&&n.role?n.role.replace("_"," "):"User"})]})]}),u&&a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 z-50",children:[a.jsx("div",{className:"p-3 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:(n==null?void 0:n.avatar)||"https://images.pexels.com/photos/4126743/pexels-photo-4126743.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:(n==null?void 0:n.name)||"User",className:"h-10 w-10 rounded-full object-cover"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(n==null?void 0:n.name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:(n==null?void 0:n.email)||"user@example.com"})]})]})}),a.jsxs("div",{className:"py-2",children:[a.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[a.jsx(hi,{className:"h-4 w-4 mr-3 text-gray-400"}),"View Profile"]}),a.jsxs("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[a.jsx(ws,{className:"h-4 w-4 mr-3 text-gray-400"}),"Account Settings"]})]}),a.jsx("div",{className:"border-t border-gray-100 py-2",children:a.jsxs("button",{onClick:f,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx($C,{className:"h-4 w-4 mr-3"}),"Sign Out"]})})]})]})]})]})}),FL=x.memo(function({requiredRole:t,children:n}){const{isAuthenticated:r,user:s,logout:i}=qe(),o=Mn(),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[h,f]=x.useState(!1),m=x.useRef(!1);if(x.useEffect(()=>{const g=()=>{i().then(()=>{o("/login")}).catch(y=>{console.error("Logout error:",y),o("/login")})};return document.addEventListener("sidebar-logout",g),()=>{document.removeEventListener("sidebar-logout",g)}},[i,o]),x.useEffect(()=>{if(m.current)return;(async()=>{try{if(!r||!s){console.log("❌ Not authenticated, redirecting to login"),o("/login",{replace:!0});return}if(t&&s.role!==t){console.log(`❌ Role mismatch: required ${t}, got ${s.role}`),o("/dashboard",{replace:!0});return}m.current=!0}catch(y){console.error("Auth validation error:",y),o("/login",{replace:!0})}finally{c(!1)}})()},[o,r,s,t]),x.useEffect(()=>{const g=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),l)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative mb-4",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-brand-gold rounded-full animate-spin",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),a.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Application"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please wait..."})]})});if(!r)return a.jsx(zn,{to:"/login"});if(t&&(s==null?void 0:s.role)!==t)return a.jsx(zn,{to:"/dashboard"});const p=()=>{d(!u)};return a.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 overflow-hidden",children:[a.jsx(ML,{isMobileOpen:u,onMobileClose:()=>d(!1),isCollapsed:h,onCollapseToggle:f}),a.jsxs("div",{className:`flex flex-col flex-1 overflow-hidden transition-all duration-300 ${h?"lg:ml-16":"lg:ml-72"}`,children:[a.jsx(LL,{onMobileMenuClick:p}),a.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-transparent",children:a.jsx("div",{className:"min-h-full",children:n||a.jsx(MC,{})})})]})]})});let pf=null;const xo=()=>{if(pf!==null)return pf;const e={viteProdCheck:!0,urlCheck:typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes(".local"),prodMarkerCheck:localStorage.getItem("env-deploy-type")==="production"},n=e.viteProdCheck||e.urlCheck;return pf=n,n},Xu=()=>!xo(),$L=(e=!1)=>{const t={"Content-Type":"application/json"};if(e||typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="3000"||window.location.hostname.includes(".local")||localStorage.getItem("force-dev-bypass")==="true"))return t["x-bypass-auth"]="development-only-123",console.log("🔓 Development bypass header added (hostname-based detection), skipping JWT token"),t;const r=localStorage.getItem("auth-token")||localStorage.getItem("jwt-token")||localStorage.getItem("token");return r?(t.Authorization=`Bearer ${r}`,Xu()&&console.log("🔑 Auth token found and added to headers")):Xu()&&console.warn("⚠️ No auth token found in localStorage - API requests may fail with 403"),t},zL=e=>{xo()&&e()},BL=(e,...t)=>{Xu()&&console.log(`[DEBUG] ${e}`,...t)},gb=(e,...t)=>{console.warn(`[WARNING] ${e}`,...t)},vc=(e,...t)=>{console.error(`[ERROR] ${e}`,...t)},VL=()=>{if(xo()&&typeof window<"u"){const e=localStorage.getItem("jwt-token");if(e&&e.includes("dev-signature")){vc("CRITICAL SECURITY RISK: Development authentication token found in production!");try{localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),sessionStorage.removeItem("using-development-auth"),gb("Removed development authentication token from storage")}catch(t){vc("Failed to remove development token:",t)}try{fetch("/api/security-incident",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dev_token_in_prod",timestamp:new Date().toISOString(),severity:"critical",message:"Development token found in production environment"})}).catch(()=>{})}catch{}}sessionStorage.getItem("using-development-auth")==="true"&&(vc("SECURITY RISK: Development authentication flag found in production!"),sessionStorage.removeItem("using-development-auth")),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&gb("Production build running in development environment!"),(window.devBypassEnabled||window.__DEV__||window.__DEBUG__)&&vc("SECURITY RISK: Development flags found in production build!")}},UL=()=>{if(xo()){VL(),console.log("%c🔒 PRODUCTION MODE ACTIVE","background: #4CAF50; color: white; font-size: 14px; font-weight: bold; padding: 4px 8px; border-radius: 4px;");try{if(typeof window<"u"&&xo()){const e=console.log;console.log=function(...t){t[0]&&typeof t[0]=="string"&&(t[0].includes("[ERROR]")||t[0].includes("[WARNING]"))&&e.apply(console,t)}}}catch{}}};zL(()=>{UL()});const Ce=(e=!0)=>{e=e||typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.port==="3000"||window.location.hostname.includes(".local"));const n=$L(e);if(xo()&&!e&&(n["X-Requested-With"]="XMLHttpRequest",n["X-Application-Type"]="asp-cranes-crm"),Xu()||e){const r=!!n.Authorization,s=!!n["x-bypass-auth"];BL(`API headers prepared: Auth token ${r?"present":"missing"}, bypass ${s?"enabled":"disabled"}`)}return n};async function xb(e,t){const r=await fetch(`http://103.224.243.242:3001/api/leads/${e}/status`,{method:"PATCH",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify({status:t}),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead status");const s=await r.json();return s.data||s}async function yb(e,t,n){const s=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}/assign`,{method:"PATCH",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify({salesAgentId:t,salesAgentName:n}),credentials:"include"});if(!s.ok)throw new Error("Failed to update lead assignment");const i=await s.json();return i.data||i}async function WL(e,t){const r=await fetch(`http://103.224.243.242:3001/api/leads/${encodeURIComponent(e)}`,{method:"PATCH",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update lead");const s=await r.json();return s.data||s}async function HL(e){const n=await fetch("http://103.224.243.242:3001/api/leads",{method:"POST",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create lead");const r=await n.json();return r.data||r}async function Vl(){const t=await fetch("http://103.224.243.242:3001/api/leads",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch leads");const n=await t.json();return n.data||n}const vb={getJobsByOperator:qL,getEquipmentById:O2,getAllEquipment:R2,getJobs:th,getAllOperators:Ul,createJob:I2,getJobEquipment:GL,getJobOperators:YL};async function I2(e){const n=await fetch("http://103.224.243.242:3001/api/jobs",{method:"POST",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create job");return n.json()}async function qL(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs?operatorId=${encodeURIComponent(e)}`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch jobs by operator");return await n.json()}async function O2(e){const n=await fetch(`http://103.224.243.242:3001/api/equipment/${encodeURIComponent(e)}`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch equipment by id");return await n.json()}async function R2(){const t=await fetch("http://103.224.243.242:3001/api/equipment",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch equipment");return await t.json()}async function th(){const t=await fetch("http://103.224.243.242:3001/api/jobs",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch jobs");return await t.json()}async function Ul(){const t=await fetch("http://103.224.243.242:3001/api/operators",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch operators");return await t.json()}async function GL(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/equipment`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job equipment");return await n.json()}async function YL(e){const n=await fetch(`http://103.224.243.242:3001/api/jobs/${encodeURIComponent(e)}/operators`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch job operators");return await n.json()}async function QL(e){const n=`http://103.224.243.242:3001/api/equipment?category=${encodeURIComponent(e)}`;console.log("🔍 Fetching equipment by category:",e),console.log("🔗 API URL:",n);const r=await fetch(n,{method:"GET",headers:Ce(!0),credentials:"include"});if(console.log("📡 Response status:",r.status),console.log("📡 Response ok:",r.ok),!r.ok)throw console.error("❌ Failed to fetch equipment:",r.status,r.statusText),new Error("Failed to fetch equipment by category");const s=await r.json();return console.log("📦 Equipment data received:",s),s&&Array.isArray(s.data)?s.data:s}async function _x(){return[{id:"1",equipmentId:"EQ0001",name:"Demo Crane",category:"mobile_crane",manufacturingDate:"2022-01",registrationDate:"2022-02",maxLiftingCapacity:50,unladenWeight:20,baseRates:{micro:100,small:200,monthly:3e3,yearly:35e3},runningCostPerKm:10,description:"Sample equipment",status:"available",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),runningCost:0,_source:"client",_mockFlag:!0}]}async function nh(){const t=await fetch("http://103.224.243.242:3001/api/deals",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch deals");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function yo(e){const n=await fetch(`http://103.224.243.242:3001/api/deals/${e}`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch deal by ID");const r=await n.json();return r&&r.data?r.data:r}async function KL(e){const n=await fetch("http://103.224.243.242:3001/api/deals",{method:"POST",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create deal");return await n.json()}async function L2(e,t){const r=await fetch(`http://103.224.243.242:3001/api/deals/${e}/stage`,{method:"PATCH",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify({stage:t}),credentials:"include"});if(!r.ok)throw new Error("Failed to update deal stage");const s=await r.json();return s.data||s}const Ve=e=>isNaN(e)||e==null?"₹0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),XL=_o("relative bg-white/80 backdrop-blur-sm border border-gray-200/60 transition-all duration-300 ease-in-out hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5",{variants:{variant:{default:"rounded-xl shadow-sm",bordered:"rounded-xl border-2",flat:"rounded-lg",glass:"rounded-xl bg-white/60 backdrop-blur-md border-white/20 shadow-xl",gradient:"rounded-xl bg-gradient-to-br from-white to-gray-50/50 shadow-md"},padding:{none:"",sm:"p-3 sm:p-4",md:"p-4 sm:p-5",lg:"p-5 sm:p-6",xl:"p-6 sm:p-8"},size:{default:"",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"w-full"}},defaultVariants:{variant:"default",padding:"md",size:"default"}}),ce=x.memo(se.forwardRef(({className:e="",variant:t,padding:n,size:r,as:s="div",children:i,hover:o=!0,loading:l=!1,...c},u)=>{const d=XL({variant:t,padding:n,size:r}),h=o?"hover:shadow-lg hover:shadow-brand-blue/5 hover:border-brand-blue/20 hover:-translate-y-0.5":"",f=l?"animate-pulse":"";return a.jsxs(s,{className:`${d} ${h} ${f} ${e}`,ref:u,role:s==="div"?"article":void 0,...c,children:[l&&a.jsx("div",{className:"absolute inset-0 bg-white/60 backdrop-blur-sm rounded-xl flex items-center justify-center",children:a.jsx("div",{className:"w-6 h-6 border-2 border-brand-blue border-t-transparent rounded-full animate-spin"})}),i]})}));ce.displayName="Card";const ge=x.memo(se.forwardRef(({className:e="",children:t,...n},r)=>a.jsx("div",{ref:r,className:`pb-4 border-b border-gray-200/60 ${e}`,...n,children:t})));ge.displayName="CardHeader";const xe=x.memo(se.forwardRef(({className:e="",gradient:t=!1,level:n=2,children:r,...s},i)=>{const o=`h${n}`,l=t?"bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent":"";return a.jsx(o,{ref:i,className:`text-lg font-semibold text-gray-900 leading-tight ${l} ${e}`,...s,children:r})}));xe.displayName="CardTitle";const JL=x.memo(se.forwardRef(({className:e="",children:t,...n},r)=>a.jsx("p",{ref:r,className:`text-sm text-gray-600 leading-relaxed ${e}`,...n,children:t})));JL.displayName="CardDescription";const me=x.memo(se.forwardRef(({className:e="",children:t,...n},r)=>a.jsx("div",{ref:r,className:`pt-4 ${e}`,...n,children:t})));me.displayName="CardContent";const ZL=x.memo(se.forwardRef(({className:e="",children:t,...n},r)=>a.jsx("div",{ref:r,className:`pt-4 mt-4 border-t border-gray-200/60 ${e}`,...n,children:t})));ZL.displayName="CardFooter";const e3=_o("group relative overflow-hidden",{variants:{variant:{default:"bg-white/90 backdrop-blur-sm",primary:"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200",secondary:"bg-gradient-to-br from-gray-50 to-slate-50 border-gray-200",accent:"bg-gradient-to-br from-amber-50 to-yellow-50 border-amber-200",success:"bg-gradient-to-br from-green-50 to-emerald-50 border-green-200",warning:"bg-gradient-to-br from-orange-50 to-red-50 border-orange-200",error:"bg-gradient-to-br from-red-50 to-rose-50 border-red-200",glass:"bg-white/60 backdrop-blur-md border-white/20"},size:{sm:"min-h-[100px]",default:"min-h-[120px]",lg:"min-h-[140px]"}},defaultVariants:{variant:"default",size:"default"}}),Bt=x.memo(se.forwardRef(({className:e="",variant:t,size:n,title:r,value:s,icon:i,trend:o,subtitle:l,footer:c,loading:u=!1,gradient:d=!1,...h},f)=>{const p={primary:"bg-gradient-to-br from-blue-500 to-indigo-600",secondary:"bg-gradient-to-br from-gray-500 to-slate-600",accent:"bg-gradient-to-br from-amber-500 to-yellow-600",success:"bg-gradient-to-br from-green-500 to-emerald-600",warning:"bg-gradient-to-br from-orange-500 to-red-600",error:"bg-gradient-to-br from-red-500 to-rose-600",glass:"bg-gradient-to-br from-brand-blue to-brand-blue/80",default:"bg-gradient-to-br from-brand-blue to-brand-blue/80"}[t||"default"],g=()=>o?o.value>0?a.jsx(hp,{className:"w-3 h-3"}):o.value<0?a.jsx(SM,{className:"w-3 h-3"}):a.jsx(dp,{className:"w-3 h-3"}):null,y=()=>o?o.isPositive?"text-green-600":"text-red-600":"";return a.jsxs(ce,{ref:f,className:`${e3({variant:t,size:n})} ${e}`,variant:d?"gradient":"default",padding:"lg",hover:!u,loading:u,...h,children:[a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-full transform translate-x-8 -translate-y-8 group-hover:scale-110 transition-transform duration-300"}),a.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1 leading-tight",children:r}),l&&a.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:l})]}),i&&a.jsx("div",{className:`p-2.5 rounded-xl ${p} shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all duration-300`,children:a.jsx("div",{className:"text-white w-5 h-5 flex items-center justify-center",children:i})})]}),a.jsx("div",{className:"flex-1 flex items-center",children:a.jsx("div",{className:"text-2xl font-bold text-gray-900 group-hover:text-brand-blue transition-colors duration-300",children:u?a.jsx("div",{className:"h-8 w-20 bg-gray-200 rounded animate-pulse"}):s})}),o&&a.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[a.jsxs("div",{className:`flex items-center space-x-1 ${y()}`,children:[g(),a.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(o.value),"%"]})]}),a.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]}),c&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200/60",children:c})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-brand-blue/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})}));Bt.displayName="StatCard";const t3=x.memo(()=>a.jsxs(ce,{className:"min-h-[120px] animate-pulse",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-1"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),a.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-xl"})]}),a.jsx("div",{className:"h-8 bg-gray-200 rounded w-24 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}));t3.displayName="StatCardSkeleton";const n3=e=>{switch(e){case"lead":return a.jsx(hi,{className:"h-4 w-4"});case"deal":return a.jsx(oM,{className:"h-4 w-4"});case"job":return a.jsx(St,{className:"h-4 w-4"});case"equipment":return a.jsx(Ut,{className:"h-4 w-4"});case"user":return a.jsx(hi,{className:"h-4 w-4"});default:return a.jsx(vi,{className:"h-4 w-4"})}},r3=e=>{switch(e){case"success":return"text-green-600 bg-green-50";case"warning":return"text-yellow-600 bg-yellow-50";case"error":return"text-red-600 bg-red-50";case"info":default:return"text-blue-600 bg-blue-50"}},s3=e=>{const n=new Date().getTime()-e.getTime(),r=Math.floor(n/(1e3*60)),s=Math.floor(r/60),i=Math.floor(s/24);return r<1?"Just now":r<60?`${r}m ago`:s<24?`${s}h ago`:i<7?`${i}d ago`:e.toLocaleDateString()},i3=[{id:"1",type:"lead",title:"New lead created",description:"John Doe submitted a crane rental inquiry",timestamp:new Date(Date.now()-1e3*60*15),status:"info",user:"System"},{id:"2",type:"deal",title:"Deal closed",description:"Construction project deal worth ₹2,50,000 closed successfully",timestamp:new Date(Date.now()-1e3*60*60*2),status:"success",user:"Sales Agent"},{id:"3",type:"job",title:"Job scheduled",description:"Crane deployment for Site A scheduled for tomorrow",timestamp:new Date(Date.now()-1e3*60*60*4),status:"info",user:"Operations Manager"},{id:"4",type:"equipment",title:"Maintenance alert",description:"Crane CR-001 requires scheduled maintenance",timestamp:new Date(Date.now()-1e3*60*60*6),status:"warning",user:"System"},{id:"5",type:"user",title:"New user registered",description:"New operator account created for Mike Johnson",timestamp:new Date(Date.now()-1e3*60*60*24),status:"info",user:"Admin"}];function o3({activities:e,className:t}){const[n,r]=x.useState([]),[s,i]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{if(e)r(e);else{const l=await S2(5);r(l)}}catch(l){console.error("Error fetching activities:",l),r(i3)}finally{i(!1)}})()},[e]),s?a.jsxs(ce,{className:`p-6 ${t}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),a.jsx(qn,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),a.jsx("p",{children:"Loading activities..."})]})})]}):a.jsxs(ce,{className:`p-6 ${t}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"}),a.jsx(qn,{className:"h-5 w-5 text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:n.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(vi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No recent activities"})]}):n.map(o=>a.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${r3(o.status)}`,children:n3(o.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:o.title}),a.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:s3(o.timestamp)})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.description}),o.user&&a.jsx("div",{className:"flex items-center mt-2",children:a.jsx(pl,{variant:"secondary",className:"text-xs",children:o.user})})]})]},o.id))}),n.length>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all activities →"})})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Wl(e){return e+.5|0}const ts=(e,t,n)=>Math.max(Math.min(e,n),t);function va(e){return ts(Wl(e*2.55),0,255)}function gs(e){return ts(Wl(e*255),0,255)}function yr(e){return ts(Wl(e/2.55)/100,0,1)}function bb(e){return ts(Wl(e*100),0,100)}const xn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kp=[..."0123456789ABCDEF"],a3=e=>kp[e&15],l3=e=>kp[(e&240)>>4]+kp[e&15],bc=e=>(e&240)>>4===(e&15),c3=e=>bc(e.r)&&bc(e.g)&&bc(e.b)&&bc(e.a);function u3(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&xn[e[1]]*17,g:255&xn[e[2]]*17,b:255&xn[e[3]]*17,a:t===5?xn[e[4]]*17:255}:(t===7||t===9)&&(n={r:xn[e[1]]<<4|xn[e[2]],g:xn[e[3]]<<4|xn[e[4]],b:xn[e[5]]<<4|xn[e[6]],a:t===9?xn[e[7]]<<4|xn[e[8]]:255})),n}const d3=(e,t)=>e<255?t(e):"";function h3(e){var t=c3(e)?a3:l3;return e?"#"+t(e.r)+t(e.g)+t(e.b)+d3(e.a,t):void 0}const f3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function F2(e,t,n){const r=t*Math.min(n,1-n),s=(i,o=(i+e/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function m3(e,t,n){const r=(s,i=(s+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function p3(e,t,n){const r=F2(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function g3(e,t,n,r,s){return e===s?(t-n)/r+(t<n?6:0):t===s?(n-e)/r+2:(e-t)/r+4}function Ax(e){const n=e.r/255,r=e.g/255,s=e.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=g3(n,r,s,d,i),c=c*60+.5),[c|0,u||0,l]}function Mx(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(gs)}function Ix(e,t,n){return Mx(F2,e,t,n)}function x3(e,t,n){return Mx(p3,e,t,n)}function y3(e,t,n){return Mx(m3,e,t,n)}function $2(e){return(e%360+360)%360}function v3(e){const t=f3.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?va(+t[5]):gs(+t[5]));const s=$2(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?r=x3(s,i,o):t[1]==="hsv"?r=y3(s,i,o):r=Ix(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function b3(e,t){var n=Ax(e);n[0]=$2(n[0]+t),n=Ix(n),e.r=n[0],e.g=n[1],e.b=n[2]}function w3(e){if(!e)return;const t=Ax(e),n=t[0],r=bb(t[1]),s=bb(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${yr(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const wb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function j3(){const e={},t=Object.keys(jb),n=Object.keys(wb);let r,s,i,o,l;for(r=0;r<t.length;r++){for(o=l=t[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,wb[i]);i=parseInt(jb[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let wc;function S3(e){wc||(wc=j3(),wc.transparent=[0,0,0,0]);const t=wc[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const C3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function N3(e){const t=C3.exec(e);let n=255,r,s,i;if(t){if(t[7]!==r){const o=+t[7];n=t[8]?va(o):ts(o*255,0,255)}return r=+t[1],s=+t[3],i=+t[5],r=255&(t[2]?va(r):ts(r,0,255)),s=255&(t[4]?va(s):ts(s,0,255)),i=255&(t[6]?va(i):ts(i,0,255)),{r,g:s,b:i,a:n}}}function k3(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${yr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const gf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Di=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function E3(e,t,n){const r=Di(yr(e.r)),s=Di(yr(e.g)),i=Di(yr(e.b));return{r:gs(gf(r+n*(Di(yr(t.r))-r))),g:gs(gf(s+n*(Di(yr(t.g))-s))),b:gs(gf(i+n*(Di(yr(t.b))-i))),a:e.a+n*(t.a-e.a)}}function jc(e,t,n){if(e){let r=Ax(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=Ix(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function z2(e,t){return e&&Object.assign(t||{},e)}function Sb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=gs(e[3]))):(t=z2(e,{r:0,g:0,b:0,a:1}),t.a=gs(t.a)),t}function D3(e){return e.charAt(0)==="r"?N3(e):v3(e)}class gl{constructor(t){if(t instanceof gl)return t;const n=typeof t;let r;n==="object"?r=Sb(t):n==="string"&&(r=u3(t)||S3(t)||D3(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=z2(this._rgb);return t&&(t.a=yr(t.a)),t}set rgb(t){this._rgb=Sb(t)}rgbString(){return this._valid?k3(this._rgb):void 0}hexString(){return this._valid?h3(this._rgb):void 0}hslString(){return this._valid?w3(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,s=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=r.a-s.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=E3(this._rgb,t._rgb,n)),this}clone(){return new gl(this.rgb)}alpha(t){return this._rgb.a=gs(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Wl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return jc(this._rgb,2,t),this}darken(t){return jc(this._rgb,2,-t),this}saturate(t){return jc(this._rgb,1,t),this}desaturate(t){return jc(this._rgb,1,-t),this}rotate(t){return b3(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function dr(){}const T3=(()=>{let e=0;return()=>e++})();function Ae(e){return e==null}function ct(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ee(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ot(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Kn(e,t){return Ot(e)?e:t}function we(e,t){return typeof e>"u"?t:e}const P3=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,B2=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Be(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Oe(e,t,n,r){let s,i,o;if(ct(e))for(i=e.length,s=0;s<i;s++)t.call(n,e[s],s);else if(Ee(e))for(o=Object.keys(e),i=o.length,s=0;s<i;s++)t.call(n,e[o[s]],o[s])}function Ju(e,t){let n,r,s,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],i=t[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Zu(e){if(ct(e))return e.map(Zu);if(Ee(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=Zu(e[n[s]]);return t}return e}function V2(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function _3(e,t,n,r){if(!V2(e))return;const s=t[e],i=n[e];Ee(s)&&Ee(i)?xl(s,i,r):t[e]=Zu(i)}function xl(e,t,n){const r=ct(t)?t:[t],s=r.length;if(!Ee(e))return e;n=n||{};const i=n.merger||_3;let o;for(let l=0;l<s;++l){if(o=r[l],!Ee(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],e,o,n)}return e}function $a(e,t){return xl(e,t,{merger:A3})}function A3(e,t,n){if(!V2(e))return;const r=t[e],s=n[e];Ee(r)&&Ee(s)?$a(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Zu(s))}const Cb={"":e=>e,x:e=>e.x,y:e=>e.y};function M3(e){const t=e.split("."),n=[];let r="";for(const s of t)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function I3(e){const t=M3(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function fi(e,t){return(Cb[t]||(Cb[t]=I3(t)))(e)}function Ox(e){return e.charAt(0).toUpperCase()+e.slice(1)}const yl=e=>typeof e<"u",Ns=e=>typeof e=="function",Nb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function O3(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Re=Math.PI,Ke=2*Re,R3=Ke+Re,ed=Number.POSITIVE_INFINITY,L3=Re/180,pt=Re/2,Is=Re/4,kb=Re*2/3,U2=Math.log10,or=Math.sign;function za(e,t,n){return Math.abs(e-t)<n}function Eb(e){const t=Math.round(e);e=za(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(U2(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function F3(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,i)=>s-i).pop(),t}function $3(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function vl(e){return!$3(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function z3(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function B3(e,t,n){let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function jr(e){return e*(Re/180)}function V3(e){return e*(180/Re)}function Db(e){if(!Ot(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function W2(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Re&&(i+=Ke),{angle:i,distance:s}}function Ep(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function U3(e,t){return(e-t+R3)%Ke-Re}function rn(e){return(e%Ke+Ke)%Ke}function bl(e,t,n,r){const s=rn(e),i=rn(t),o=rn(n),l=rn(i-s),c=rn(o-s),u=rn(s-i),d=rn(s-o);return s===i||s===o||r&&i===o||l>c&&u<d}function _t(e,t,n){return Math.max(t,Math.min(n,e))}function W3(e){return _t(e,-32768,32767)}function Sr(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Rx(e,t,n){n=n||(o=>e[o]<t);let r=e.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Zs=(e,t,n,r)=>Rx(e,n,r?s=>{const i=e[s][t];return i<n||i===n&&e[s+1][t]===n}:s=>e[s][t]<n),H3=(e,t,n)=>Rx(e,n,r=>e[r][t]>=n);function q3(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const H2=["push","pop","shift","splice","unshift"];function G3(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),H2.forEach(n=>{const r="_onData"+Ox(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function Tb(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(H2.forEach(i=>{delete e[i]}),delete e._chartjs)}function q2(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const G2=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function Y2(e,t){let n=[],r=!1;return function(...s){n=s,r||(r=!0,G2.call(window,()=>{r=!1,e.apply(t,n)}))}}function Y3(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const Lx=e=>e==="start"?"left":e==="end"?"right":"center",Tt=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Q3=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function K3(e,t,n){const r=t.length;let s=0,i=r;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:h,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(s=Math.min(Zs(c,d,h).lo,n?r:Zs(t,d,o.getPixelForValue(h)).lo),u){const g=c.slice(0,s+1).reverse().findIndex(y=>!Ae(y[l.axis]));s-=Math.max(0,g)}s=_t(s,0,r-1)}if(p){let g=Math.max(Zs(c,o.axis,f,!0).hi+1,n?0:Zs(t,d,o.getPixelForValue(f),!0).hi+1);if(u){const y=c.slice(g-1).findIndex(b=>!Ae(b[l.axis]));g+=Math.max(0,y)}i=_t(g,s,r)-s}else i=r-s}return{start:s,count:i}}function X3(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Sc=e=>e===0||e===1,Pb=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ke/n)),_b=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ke/n)+1,Ba={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*pt)+1,easeOutSine:e=>Math.sin(e*pt),easeInOutSine:e=>-.5*(Math.cos(Re*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Sc(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Sc(e)?e:Pb(e,.075,.3),easeOutElastic:e=>Sc(e)?e:_b(e,.075,.3),easeInOutElastic(e){return Sc(e)?e:e<.5?.5*Pb(e*2,.1125,.45):.5+.5*_b(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Ba.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Ba.easeInBounce(e*2)*.5:Ba.easeOutBounce(e*2-1)*.5+.5};function Fx(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ab(e){return Fx(e)?e:new gl(e)}function xf(e){return Fx(e)?e:new gl(e).saturate(.5).darken(.1).hexString()}const J3=["x","y","borderWidth","radius","tension"],Z3=["color","borderColor","backgroundColor"];function e5(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Z3},numbers:{type:"number",properties:J3}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function t5(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Mb=new Map;function n5(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Mb.get(n);return r||(r=new Intl.NumberFormat(e,t),Mb.set(n,r)),r}function $x(e,t,n){return n5(t,n).format(e)}const r5={values(e){return ct(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=s5(e,n)}const o=U2(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),$x(e,r,c)}};function s5(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var Q2={formatters:r5};function i5(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Q2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const mi=Object.create(null),Dp=Object.create(null);function Va(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function yf(e,t,n){return typeof t=="string"?xl(Va(e,t),n):xl(Va(e,""),t)}class o5{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>xf(s.backgroundColor),this.hoverBorderColor=(r,s)=>xf(s.borderColor),this.hoverColor=(r,s)=>xf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return yf(this,t,n)}get(t){return Va(this,t)}describe(t,n){return yf(Dp,t,n)}override(t,n){return yf(mi,t,n)}route(t,n,r,s){const i=Va(this,t),o=Va(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=o[s];return Ee(c)?Object.assign({},u,c):we(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var it=new o5({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[e5,t5,i5]);function a5(e){return!e||Ae(e.size)||Ae(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Ib(e,t,n,r,s){let i=t[s];return i||(i=t[s]=e.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Os(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function Ob(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Tp(e,t,n,r){K2(e,t,n,r,null)}function K2(e,t,n,r,s){let i,o,l,c,u,d,h,f;const m=t.pointStyle,p=t.rotation,g=t.radius;let y=(p||0)*L3;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(y),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),e.restore();return}if(!(isNaN(g)||g<=0)){switch(e.beginPath(),m){default:s?e.ellipse(n,r,s/2,g,0,0,Ke):e.arc(n,r,g,0,Ke),e.closePath();break;case"triangle":d=s?s/2:g,e.moveTo(n+Math.sin(y)*d,r-Math.cos(y)*g),y+=kb,e.lineTo(n+Math.sin(y)*d,r-Math.cos(y)*g),y+=kb,e.lineTo(n+Math.sin(y)*d,r-Math.cos(y)*g),e.closePath();break;case"rectRounded":u=g*.516,c=g-u,o=Math.cos(y+Is)*c,h=Math.cos(y+Is)*(s?s/2-u:c),l=Math.sin(y+Is)*c,f=Math.sin(y+Is)*(s?s/2-u:c),e.arc(n-h,r-l,u,y-Re,y-pt),e.arc(n+f,r-o,u,y-pt,y),e.arc(n+h,r+l,u,y,y+pt),e.arc(n-f,r+o,u,y+pt,y+Re),e.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,d=s?s/2:c,e.rect(n-d,r-c,2*d,2*c);break}y+=Is;case"rectRot":h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+f,r-o),e.lineTo(n+h,r+l),e.lineTo(n-f,r+o),e.closePath();break;case"crossRot":y+=Is;case"cross":h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"star":h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o),y+=Is,h=Math.cos(y)*(s?s/2:g),o=Math.cos(y)*g,l=Math.sin(y)*g,f=Math.sin(y)*(s?s/2:g),e.moveTo(n-h,r-l),e.lineTo(n+h,r+l),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"line":o=s?s/2:Math.cos(y)*g,l=Math.sin(y)*g,e.moveTo(n-o,r-l),e.lineTo(n+o,r+l);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(y)*(s?s/2:g),r+Math.sin(y)*g);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function wl(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function rh(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function sh(e){e.restore()}function l5(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function c5(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function u5(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ae(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function d5(e,t,n,r,s){if(s.strikethrough||s.underline){const i=e.measureText(r),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=s.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,d),e.lineTo(l,d),e.stroke()}}function h5(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function jl(e,t,n,r,s,i={}){const o=ct(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=s.string,u5(e,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&h5(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ae(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,r,i.maxWidth)),e.fillText(u,n,r,i.maxWidth),d5(e,n,r,u,i),r+=Number(s.lineHeight);e.restore()}function td(e,t){const{x:n,y:r,w:s,h:i,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Re,Re,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Re,pt,!0),e.lineTo(n+s-o.bottomRight,r+i),e.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,pt,0,!0),e.lineTo(n+s,r+o.topRight),e.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-pt,!0),e.lineTo(n+o.topLeft,r)}const f5=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,m5=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function p5(e,t){const n=(""+e).match(f5);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const g5=e=>+e||0;function zx(e,t){const n={},r=Ee(t),s=r?Object.keys(t):t,i=Ee(e)?r?o=>we(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of s)n[o]=g5(i(o));return n}function X2(e){return zx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ro(e){return zx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function _n(e){const t=X2(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function At(e,t){e=e||{},t=t||it.font;let n=we(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=we(e.style,t.style);r&&!(""+r).match(m5)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:we(e.family,t.family),lineHeight:p5(we(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:we(e.weight,t.weight),string:""};return s.string=a5(s),s}function Cc(e,t,n,r){let s,i,o;for(s=0,i=e.length;s<i;++s)if(o=e[s],o!==void 0&&o!==void 0)return o}function x5(e,t,n){const{min:r,max:s}=e,i=B2(t,(s-r)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Ni(e,t){return Object.assign(Object.create(e),t)}function Bx(e,t=[""],n,r,s=()=>e[0]){const i=n||e;typeof r>"u"&&(r=tk("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Bx([l,...e],t,i,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return Z2(l,c,()=>N5(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return Lb(l).includes(c)},ownKeys(l){return Lb(l)},set(l,c,u){const d=l._storage||(l._storage=s());return l[c]=d[c]=u,delete l._keys,!0}})}function vo(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:J2(e,r),setContext:i=>vo(e,i,n,r),override:i=>vo(e.override(i),t,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return Z2(i,o,()=>v5(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function J2(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:Ns(n)?n:()=>n,isIndexable:Ns(r)?r:()=>r}}const y5=(e,t)=>e?e+Ox(t):t,Vx=(e,t)=>Ee(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Z2(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const r=n();return e[t]=r,r}function v5(e,t,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=e;let l=r[t];return Ns(l)&&o.isScriptable(t)&&(l=b5(t,l,e,n)),ct(l)&&l.length&&(l=w5(t,l,e,o.isIndexable)),Vx(t,l)&&(l=vo(l,s,i&&i[t],o)),l}function b5(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||r);return l.delete(e),Vx(e,c)&&(c=Ux(s._scopes,s,e,c)),c}function w5(e,t,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&r(e))return t[i.index%t.length];if(Ee(t[0])){const c=t,u=s._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=Ux(u,s,e,d);t.push(vo(h,i,o&&o[e],l))}}return t}function ek(e,t,n){return Ns(e)?e(t,n):e}const j5=(e,t)=>e===!0?t:typeof e=="string"?fi(t,e):void 0;function S5(e,t,n,r,s){for(const i of t){const o=j5(n,i);if(o){e.add(o);const l=ek(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Ux(e,t,n,r){const s=t._rootScopes,i=ek(t._fallback,n,r),o=[...e,...s],l=new Set;l.add(r);let c=Rb(l,o,n,i||n,r);return c===null||typeof i<"u"&&i!==n&&(c=Rb(l,o,i,c,r),c===null)?!1:Bx(Array.from(l),[""],s,i,()=>C5(t,n,r))}function Rb(e,t,n,r,s){for(;n;)n=S5(e,t,n,r,s);return n}function C5(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return ct(s)&&Ee(n)?n:s||{}}function N5(e,t,n,r){let s;for(const i of t)if(s=tk(y5(i,e),n),typeof s<"u")return Vx(e,s)?Ux(n,r,e,s):s}function tk(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function Lb(e){let t=e._keys;return t||(t=e._keys=k5(e._scopes)),t}function k5(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}const E5=Number.EPSILON||1e-14,bo=(e,t)=>t<e.length&&!e[t].skip&&e[t],nk=e=>e==="x"?"y":"x";function D5(e,t,n,r){const s=e.skip?t:e,i=t,o=n.skip?t:n,l=Ep(i,s),c=Ep(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=r*u,f=r*d;return{previous:{x:i.x-h*(o.x-s.x),y:i.y-h*(o.y-s.y)},next:{x:i.x+f*(o.x-s.x),y:i.y+f*(o.y-s.y)}}}function T5(e,t,n){const r=e.length;let s,i,o,l,c,u=bo(e,0);for(let d=0;d<r-1;++d)if(c=u,u=bo(e,d+1),!(!c||!u)){if(za(t[d],0,E5)){n[d]=n[d+1]=0;continue}s=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[d]=s*o*t[d],n[d+1]=i*o*t[d])}}function P5(e,t,n="x"){const r=nk(n),s=e.length;let i,o,l,c=bo(e,0);for(let u=0;u<s;++u){if(o=l,l=c,c=bo(e,u+1),!l)continue;const d=l[n],h=l[r];o&&(i=(d-o[n])/3,l[`cp1${n}`]=d-i,l[`cp1${r}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${r}`]=h+i*t[u])}}function _5(e,t="x"){const n=nk(t),r=e.length,s=Array(r).fill(0),i=Array(r);let o,l,c,u=bo(e,0);for(o=0;o<r;++o)if(l=c,c=u,u=bo(e,o+1),!!c){if(u){const d=u[t]-c[t];s[o]=d!==0?(u[n]-c[n])/d:0}i[o]=l?u?or(s[o-1])!==or(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}T5(e,s,i),P5(e,i,t)}function Nc(e,t,n){return Math.max(Math.min(e,n),t)}function A5(e,t){let n,r,s,i,o,l=wl(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=l,l=n<r-1&&wl(e[n+1],t),i&&(s=e[n],o&&(s.cp1x=Nc(s.cp1x,t.left,t.right),s.cp1y=Nc(s.cp1y,t.top,t.bottom)),l&&(s.cp2x=Nc(s.cp2x,t.left,t.right),s.cp2y=Nc(s.cp2y,t.top,t.bottom)))}function M5(e,t,n,r,s){let i,o,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")_5(e,s);else{let u=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=D5(u,l,e[Math.min(i+1,o-(r?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&A5(e,n)}function Wx(){return typeof window<"u"&&typeof document<"u"}function Hx(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function nd(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const ih=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function I5(e,t){return ih(e).getPropertyValue(t)}const O5=["top","right","bottom","left"];function si(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=O5[s];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const R5=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function L5(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:s,offsetY:i}=r;let o=!1,l,c;if(R5(s,i,e.target))l=s,c=i;else{const u=t.getBoundingClientRect();l=r.clientX-u.left,c=r.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function Ws(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,s=ih(n),i=s.boxSizing==="border-box",o=si(s,"padding"),l=si(s,"border","width"),{x:c,y:u,box:d}=L5(e,n),h=o.left+(d&&l.left),f=o.top+(d&&l.top);let{width:m,height:p}=t;return i&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-h)/m*n.width/r),y:Math.round((u-f)/p*n.height/r)}}function F5(e,t,n){let r,s;if(t===void 0||n===void 0){const i=e&&Hx(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=ih(i),c=si(l,"border","width"),u=si(l,"padding");t=o.width-u.width-c.width,n=o.height-u.height-c.height,r=nd(l.maxWidth,i,"clientWidth"),s=nd(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:r||ed,maxHeight:s||ed}}const kc=e=>Math.round(e*10)/10;function $5(e,t,n,r){const s=ih(e),i=si(s,"margin"),o=nd(s.maxWidth,e,"clientWidth")||ed,l=nd(s.maxHeight,e,"clientHeight")||ed,c=F5(e,t,n);let{width:u,height:d}=c;if(s.boxSizing==="content-box"){const f=si(s,"border","width"),m=si(s,"padding");u-=m.width+f.width,d-=m.height+f.height}return u=Math.max(0,u-i.width),d=Math.max(0,r?u/r:d-i.height),u=kc(Math.min(u,o,c.maxWidth)),d=kc(Math.min(d,l,c.maxHeight)),u&&!d&&(d=kc(u/2)),(t!==void 0||n!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=kc(Math.floor(d*r))),{width:u,height:d}}function Fb(e,t,n){const r=t||1,s=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(e.currentDevicePixelRatio=r,o.height=s,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const z5=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Wx()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function $b(e,t){const n=I5(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Hs(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function B5(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function V5(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=Hs(e,s,n),l=Hs(s,i,n),c=Hs(i,t,n),u=Hs(o,l,n),d=Hs(l,c,n);return Hs(u,d,n)}const U5=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},W5=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function so(e,t,n){return e?U5(t,n):W5()}function rk(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function sk(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ik(e){return e==="angle"?{between:bl,compare:U3,normalize:rn}:{between:Sr,compare:(t,n)=>t-n,normalize:t=>t}}function zb({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:s}}function H5(e,t,n){const{property:r,start:s,end:i}=n,{between:o,normalize:l}=ik(r),c=t.length;let{start:u,end:d,loop:h}=e,f,m;if(h){for(u+=c,d+=c,f=0,m=c;f<m&&o(l(t[u%c][r]),s,i);++f)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function ok(e,t,n){if(!n)return[e];const{property:r,start:s,end:i}=n,o=t.length,{compare:l,between:c,normalize:u}=ik(r),{start:d,end:h,loop:f,style:m}=H5(e,t,n),p=[];let g=!1,y=null,b,v,w;const S=()=>c(s,w,b)&&l(s,w)!==0,j=()=>l(i,b)===0||c(i,w,b),k=()=>g||S(),N=()=>!g||j();for(let C=d,E=d;C<=h;++C)v=t[C%o],!v.skip&&(b=u(v[r]),b!==w&&(g=c(b,s,i),y===null&&k()&&(y=l(b,s)===0?C:E),y!==null&&N()&&(p.push(zb({start:y,end:C,loop:f,count:o,style:m})),y=null),E=C,w=b));return y!==null&&p.push(zb({start:y,end:h,loop:f,count:o,style:m})),p}function ak(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const i=ok(r[s],e.points,t);i.length&&n.push(...i)}return n}function q5(e,t,n,r){let s=0,i=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(i+=s);i>s&&e[i%t].skip;)i--;return i%=t,{start:s,end:i}}function G5(e,t,n,r){const s=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%s];u.skip||u.stop?l.skip||(r=!1,i.push({start:t%s,end:(c-1)%s,loop:r}),t=o=u.stop?c:null):(o=c,l.skip&&(t=c)),l=u}return o!==null&&i.push({start:t%s,end:o%s,loop:r}),i}function Y5(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const i=!!e._loop,{start:o,end:l}=q5(n,s,i,r);if(r===!0)return Bb(e,[{start:o,end:l,loop:i}],n,t);const c=l<o?l+s:l,u=!!e._fullLoop&&o===0&&l===s-1;return Bb(e,G5(n,o,c,u),n,t)}function Bb(e,t,n,r){return!r||!r.setContext||!n?t:Q5(e,t,n,r)}function Q5(e,t,n,r){const s=e._chart.getContext(),i=Vb(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,f=h;function m(p,g,y,b){const v=l?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=v;for(;n[g%c].skip;)g+=v;p%c!==g%c&&(u.push({start:p%c,end:g%c,loop:y,style:b}),d=b,h=g%c)}}for(const p of t){h=l?h:p.start;let g=n[h%c],y;for(f=h+1;f<=p.end;f++){const b=n[f%c];y=Vb(r.setContext(Ni(s,{type:"segment",p0:g,p1:b,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),K5(y,d)&&m(h,f-1,p.loop,d),g=b,d=y}h<f-1&&m(h,f-1,p.loop,d)}return u}function Vb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function K5(e,t){if(!t)return!1;const n=[],r=function(s,i){return Fx(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function Ec(e,t,n){return e.options.clip?e[n]:t[n]}function X5(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Ec(n,t,"left"),right:Ec(n,t,"right"),top:Ec(r,t,"top"),bottom:Ec(r,t,"bottom")}:t}function lk(e,t){const n=t._clip;if(n.disabled)return!1;const r=X5(t,e.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class J5{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=G2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,t,"progress")),i.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fr=new J5;const Ub="transparent",Z5={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=Ab(e||Ub),s=r.valid&&Ab(t||Ub);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class eF{constructor(t,n,r,s){const i=n[r];s=Cc([t.to,s,i,t.from]);const o=Cc([t.from,i,s]);this._active=!0,this._fn=t.fn||Z5[t.type||typeof o],this._easing=Ba[t.easing]||Ba.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Cc([t.to,n,s,t.from]),this._from=Cc([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class ck{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Ee(t))return;const n=Object.keys(it.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const i=t[s];if(!Ee(i))return;const o={};for(const l of n)o[l]=i[l];(ct(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(t,n){const r=n.options,s=nF(t,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&tF(t.options.$animations,r).then(()=>{t.options=r},()=>{}),i}_createAnimations(t,n){const r=this._properties,s=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const f=r.get(u);if(h)if(f&&h.active()){h.update(f,d,l);continue}else h.cancel();if(!f||!f.duration){t[u]=d;continue}i[u]=h=new eF(f,t,u,d),s.push(h)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return fr.add(this._chart,r),!0}}function tF(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const i=e[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function nF(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Wb(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:r?i:s,end:r?s:i}}function rF(e,t,n){if(n===!1)return!1;const r=Wb(e,n),s=Wb(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function sF(e){let t,n,r,s;return Ee(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function uk(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Hb(e,t,n,r={}){const s=e.keys,i=r.mode==="single";let o,l,c,u;if(t===null)return;let d=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===n){if(d=!0,r.all)continue;break}u=e.values[c],Ot(u)&&(i||t===0||or(t)===or(u))&&(t+=u)}return!d&&!r.all?0:t}function iF(e,t){const{iScale:n,vScale:r}=t,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[s]:d,[i]:e[d]};return l}function vf(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function oF(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function aF(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function lF(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function qb(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const i=e[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Gb(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=r,c=i.axis,u=o.axis,d=oF(i,o,r),h=t.length;let f;for(let m=0;m<h;++m){const p=t[m],{[c]:g,[u]:y}=p,b=p._stacks||(p._stacks={});f=b[u]=lF(s,d,g),f[l]=y,f._top=qb(f,o,!0,r.type),f._bottom=qb(f,o,!1,r.type);const v=f._visualValues||(f._visualValues={});v[l]=y}}function bf(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function cF(e,t){return Ni(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function uF(e,t,n){return Ni(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Zo(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const s of t){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const wf=e=>e==="reset"||e==="none",Yb=(e,t)=>t?e:Object.assign({},e),dF=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:uk(n,!0),values:null};class ii{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=vf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Zo(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=n.xAxisID=we(r.xAxisID,bf(t,"x")),o=n.yAxisID=we(r.yAxisID,bf(t,"y")),l=n.rAxisID=we(r.rAxisID,bf(t,"r")),c=n.indexAxis,u=n.iAxisID=s(c,i,o,l),d=n.vAxisID=s(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Tb(this._data,this),t._stacked&&Zo(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Ee(n)){const s=this._cachedMeta;this._data=iF(n,s)}else if(r!==n){if(r){Tb(r,this);const s=this._cachedMeta;Zo(s),s._parsed=[]}n&&Object.isExtensible(n)&&G3(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=vf(n.vScale,n),n.stack!==r.stack&&(s=!0,Zo(n),n.stack=r.stack),this._resyncElements(t),(s||i!==n._stacked)&&(Gb(this,n._parsed),n._stacked=vf(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,l=i.axis;let c=t===0&&n===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{ct(s[t])?f=this.parseArrayData(r,s,t,n):Ee(s[t])?f=this.parseObjectData(r,s,t,n):f=this.parsePrimitiveData(r,s,t,n);const m=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)r._parsed[d+t]=h=f[d],c&&(m()&&(c=!1),u=h);r._sorted=c}o&&Gb(this,f)}parsePrimitiveData(t,n,r,s){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,h=new Array(s);let f,m,p;for(f=0,m=s;f<m;++f)p=f+r,h[f]={[l]:d||i.parse(u[p],p),[c]:o.parse(n[p],p)};return h}parseArrayData(t,n,r,s){const{xScale:i,yScale:o}=t,l=new Array(s);let c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=n[d],l[c]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(t,n,r,s){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s);let d,h,f,m;for(d=0,h=s;d<h;++d)f=d+r,m=n[f],u[d]={x:i.parse(fi(m,l),f),y:o.parse(fi(m,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:uk(s,!0),values:n._stacks[t.axis]._visualValues};return Hb(l,o,i.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=Hb(s,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&t===r.iScale,o=s.length,l=this._getOtherScale(t),c=dF(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=aF(l);let f,m;function p(){m=s[f];const g=m[l.axis];return!Ot(m[t.axis])||d>g||h<g}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(u,t,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,m,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][t.axis],Ot(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(t);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=sF(we(this.options.clip,rF(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=s[d];h.hidden||(h.active&&u?o.push(h):h.draw(t,i))}for(d=0;d<o.length;++d)o[d].draw(t,i)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=uF(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=s.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=cF(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&yl(r);if(l)return Yb(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),m=Object.keys(it.elements[t]),p=()=>this.getContext(r,s,n),g=u.resolveNamedOptions(f,m,p,h);return g.$shared&&(g.$shared=c,i[o]=Object.freeze(Yb(g,c))),g}_resolveAnimations(t,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(s.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,r,n))}const u=new ck(s,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||wf(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(t,n,r,s){wf(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!wf(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,t):i<s&&this._removeElements(i,s-i)}_insertElements(t,n,r=!0){const s=this._cachedMeta,i=s.data,o=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,n),r&&this.updateElements(i,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&Zo(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ue(ii,"defaults",{}),ue(ii,"datasetElementType",null),ue(ii,"dataElementType",null);function hF(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let s=0,i=n.length;s<i;s++)r=r.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=q2(r.sort((s,i)=>s-i))}return e._cache.$bar}function fF(e){const t=e.iScale,n=hF(t,e.type);let r=t._length,s,i,o,l;const c=()=>{o===32767||o===-32768||(yl(l)&&(r=Math.min(r,Math.abs(o-l)||r)),l=o)};for(s=0,i=n.length;s<i;++s)o=t.getPixelForValue(n[s]),c();for(l=void 0,s=0,i=t.ticks.length;s<i;++s)o=t.getPixelForTick(s),c();return r}function mF(e,t,n,r){const s=n.barThickness;let i,o;return Ae(s)?(i=t.min*n.categoryPercentage,o=n.barPercentage):(i=s*r,o=1),{chunk:i/r,ratio:o,start:t.pixels[e]-i/2}}function pF(e,t,n,r){const s=t.pixels,i=s[e];let o=e>0?s[e-1]:null,l=e<s.length-1?s[e+1]:null;const c=n.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/r,ratio:n.barPercentage,start:u}}function gF(e,t,n,r){const s=n.parse(e[0],r),i=n.parse(e[1],r),o=Math.min(s,i),l=Math.max(s,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:s,end:i,min:o,max:l}}function dk(e,t,n,r){return ct(e)?gF(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Qb(e,t,n,r){const s=e.iScale,i=e.vScale,o=s.getLabels(),l=s===i,c=[];let u,d,h,f;for(u=n,d=n+r;u<d;++u)f=t[u],h={},h[s.axis]=l||s.parse(o[u],u),c.push(dk(f,h,i,u));return c}function jf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function xF(e,t,n){return e!==0?or(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function yF(e){let t,n,r,s,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",i="start"):(s="start",i="end"),{start:n,end:r,reverse:t,top:s,bottom:i}}function vF(e,t,n,r){let s=t.borderSkipped;const i={};if(!s){e.borderSkipped=i;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:d}=yF(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=u:(n._bottom||0)===r?s=d:(i[Kb(d,o,l,c)]=!0,s=u)),i[Kb(s,o,l,c)]=!0,e.borderSkipped=i}function Kb(e,t,n,r){return r?(e=bF(e,t,n),e=Xb(e,n,t)):e=Xb(e,t,n),e}function bF(e,t,n){return e===t?n:e===n?t:e}function Xb(e,t,n){return e==="start"?t:e==="end"?n:e}function wF(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class au extends ii{parsePrimitiveData(t,n,r,s){return Qb(t,n,r,s)}parseArrayData(t,n,r,s){return Qb(t,n,r,s)}parseObjectData(t,n,r,s){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=o.axis==="x"?l:c,h=[];let f,m,p,g;for(f=r,m=r+s;f<m;++f)g=n[f],p={},p[i.axis]=i.parse(fi(g,u),f),h.push(dk(fi(g,d),p,o,f));return h}updateRangeFromParsed(t,n,r,s){super.updateRangeFromParsed(t,n,r,s);const i=r._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:s}=n,i=this.getParsed(t),o=i._custom,l=jf(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+r.getLabelForValue(i[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,s){const i=s==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,s);for(let m=n;m<n+r;m++){const p=this.getParsed(m),g=i||Ae(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),y=this._calculateBarIndexPixels(m,d),b=(p._stacks||{})[l.axis],v={horizontal:u,base:g.base,enableBorderRadius:!b||jf(p._custom)||o===b._top||o===b._bottom,x:u?g.head:y.center,y:u?y.center:g.head,height:u?y.size:Math.abs(g.size),width:u?Math.abs(g.size):y.size};f&&(v.options=h||this.resolveDataElementOptions(m,t[m].active?"active":s));const w=v.options||t[m].options;vF(v,w,b,o),wF(v,w,d.ratio),this.updateElement(t[m],m,v,s)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=r.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[r.axis],u=d=>{const h=d._parsed.find(m=>m[r.axis]===c),f=h&&h[d.vScale.axis];if(Ae(f)||isNaN(f))return!0};for(const d of s)if(!(n!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[we(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,r){const s=this._getStacks(t,r),i=n!==void 0?s.indexOf(n):-1;return i===-1?s.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,s=[];let i,o;for(i=0,o=n.data.length;i<o;++i)s.push(r.getPixelForValue(this.getParsed(i)[r.axis],i));const l=t.barThickness;return{min:l||fF(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=jf(u);let h=c[n.axis],f=0,m=r?this.applyStack(n,c,r):h,p,g;m!==h&&(f=m-h,m=h),d&&(h=u.barStart,m=u.barEnd-u.barStart,h!==0&&or(h)!==or(u.barEnd)&&(f=0),f+=h);const y=!Ae(i)&&!d?i:f;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(t)?p=n.getPixelForValue(f+m):p=b,g=p-b,Math.abs(g)<o){g=xF(g,n,l)*o,h===l&&(b-=g/2);const v=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(v,w),j=Math.max(v,w);b=Math.max(Math.min(b,j),S),p=b+g,r&&!d&&(c._stacks[n.axis]._visualValues[s]=n.getValueForPixel(p)-n.getValueForPixel(b))}if(b===n.getPixelForValue(l)){const v=or(g)*n.getLineWidthForValue(l)/2;b+=v,g-=v}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(t,n){const r=n.scale,s=this.options,i=s.skipNull,o=we(s.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=s.barThickness==="flex"?pF(t,n,s,d*u):mF(t,n,s,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(we(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(o,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,s=r.length;let i=0;for(;i<s;++i)this.getParsed(i)[n.axis]!==null&&!r[i].hidden&&r[i].draw(this._ctx)}}ue(au,"id","bar"),ue(au,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ue(au,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function jF(e,t,n){let r=1,s=1,i=0,o=0;if(t<Ke){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(w,S,j)=>bl(w,l,c,!0)?1:Math.max(S,S*n,j,j*n),p=(w,S,j)=>bl(w,l,c,!0)?-1:Math.min(S,S*n,j,j*n),g=m(0,u,h),y=m(pt,d,f),b=p(Re,u,h),v=p(Re+pt,d,f);r=(g-b)/2,s=(y-v)/2,i=-(g+b)/2,o=-(y+v)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class ba extends ii{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=c=>+r[c];if(Ee(r[t])){const{key:c="value"}=this._parsing;i=u=>+fi(r[u],c)}let o,l;for(o=t,l=t+n;o<l;++o)s._parsed[o]=i(o)}}_getRotation(){return jr(this.options.rotation-90)}_getCircumference(){return jr(this.options.circumference)}_getRotationExtents(){let t=Ke,n=-Ke;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();t=Math.min(t,i),n=Math.max(n,i+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(P3(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:p,offsetY:g}=jF(h,d,c),y=(r.width-o)/f,b=(r.height-o)/m,v=Math.max(Math.min(y,b)/2,0),w=B2(this.options.radius,v),S=Math.max(w*c,0),j=(w-S)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,s.total=this.calculateTotal(),this.outerRadius=w-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*i/Ke)}updateElements(t,n,r,s){const i=s==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&u.animateScale,m=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(n,s);let b=this._getRotation(),v;for(v=0;v<n;++v)b+=this._circumference(v,i);for(v=n;v<n+r;++v){const w=this._circumference(v,i),S=t[v],j={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:p,innerRadius:m};y&&(j.options=g||this.resolveDataElementOptions(v,S.active?"active":s)),b+=w,this.updateElement(S,v,j,s)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,s;for(s=0;s<n.length;s++){const i=t._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ke*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=$x(n._parsed[t],r.options.locale);return{label:s[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const r=this.chart;let s,i,o,l,c;if(!t){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),t=o.data,l=o.controller;break}}if(!t)return 0;for(s=0,i=t.length;s<i;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(we(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ue(ba,"id","doughnut"),ue(ba,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ue(ba,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ue(ba,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=t.legend.options;return n.labels.map((i,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class lu extends ii{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=K3(n,s,o);this._drawStart=l,this._drawCount=c,X3(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},t),this.updateElements(s,l,c,t)}updateElements(t,n,r,s){const i=s==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,s),f=o.axis,m=l.axis,{spanGaps:p,segment:g}=this.options,y=vl(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none",v=n+r,w=t.length;let S=n>0&&this.getParsed(n-1);for(let j=0;j<w;++j){const k=t[j],N=b?k:{};if(j<n||j>=v){N.skip=!0;continue}const C=this.getParsed(j),E=Ae(C[m]),D=N[f]=o.getPixelForValue(C[f],j),$=N[m]=i||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,C,c):C[m],j);N.skip=isNaN(D)||isNaN($)||E,N.stop=j>0&&Math.abs(C[f]-S[f])>y,g&&(N.parsed=C,N.raw=u.data[j]),h&&(N.options=d||this.resolveDataElementOptions(j,k.active?"active":s)),b||this.updateElement(k,j,N,s),S=C}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ue(lu,"id","line"),ue(lu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ue(lu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Rs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qx{constructor(t){ue(this,"options");this.options=t||{}}static override(t){Object.assign(qx.prototype,t)}init(){}formats(){return Rs()}parse(){return Rs()}format(){return Rs()}add(){return Rs()}diff(){return Rs()}startOf(){return Rs()}endOf(){return Rs()}}var SF={_date:qx};function CF(e,t,n,r){const{controller:s,data:i,_sorted:o}=e,l=s._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const u=l._reversePixels?H3:Zs;if(r){if(s._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const f=u(i,t,n-h),m=u(i,t,n+h);return{lo:f.lo,hi:m.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=s._cachedMeta,{_parsed:f}=e,m=f.slice(0,d.lo+1).reverse().findIndex(g=>!Ae(g[h.axis]));d.lo-=Math.max(0,m);const p=f.slice(d.hi).findIndex(g=>!Ae(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:i.length-1}}function oh(e,t,n,r,s){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:f}=CF(i[l],t,o,s);for(let m=h;m<=f;++m){const p=d[m];p.skip||r(p,u,m)}}}function NF(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const i=t?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Sf(e,t,n,r,s){const i=[];return!s&&!e.isPointInArea(t)||oh(e,n,t,function(l,c,u){!s&&!wl(l,e.chartArea,0)||l.inRange(t.x,t.y,r)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function kF(e,t,n,r){let s=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:h}=W2(o,{x:t.x,y:t.y});bl(h,u,d)&&s.push({element:o,datasetIndex:l,index:c})}return oh(e,n,t,i),s}function EF(e,t,n,r,s,i){let o=[];const l=NF(n);let c=Number.POSITIVE_INFINITY;function u(d,h,f){const m=d.inRange(t.x,t.y,s);if(r&&!m)return;const p=d.getCenterPoint(s);if(!(!!i||e.isPointInArea(p))&&!m)return;const y=l(t,p);y<c?(o=[{element:d,datasetIndex:h,index:f}],c=y):y===c&&o.push({element:d,datasetIndex:h,index:f})}return oh(e,n,t,u),o}function Cf(e,t,n,r,s,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!r?kF(e,t,n,s):EF(e,t,n,r,s,i)}function Jb(e,t,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return oh(e,n,t,(c,u,d)=>{c[o]&&c[o](t[n],s)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,s))}),r&&!l?[]:i}var DF={modes:{index(e,t,n,r){const s=Ws(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Sf(e,s,i,r,o):Cf(e,s,i,!1,r,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,r){const s=Ws(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Sf(e,s,i,r,o):Cf(e,s,i,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,r){const s=Ws(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Sf(e,s,i,r,o)},nearest(e,t,n,r){const s=Ws(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return Cf(e,s,i,n.intersect,r,o)},x(e,t,n,r){const s=Ws(t,e);return Jb(e,s,"x",n.intersect,r)},y(e,t,n,r){const s=Ws(t,e);return Jb(e,s,"y",n.intersect,r)}}};const hk=["left","top","right","bottom"];function ea(e,t){return e.filter(n=>n.pos===t)}function Zb(e,t){return e.filter(n=>hk.indexOf(n.pos)===-1&&n.box.axis===t)}function ta(e,t){return e.sort((n,r)=>{const s=t?r:n,i=t?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function TF(e){const t=[];let n,r,s,i,o,l;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=s,t.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:l});return t}function PF(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!hk.includes(s))continue;const o=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function _F(e,t){const n=PF(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*r:c&&t.availableWidth,l.height=s):(l.width=r,l.height=d?d*s:c&&t.availableHeight)}return n}function AF(e){const t=TF(e),n=ta(t.filter(u=>u.box.fullSize),!0),r=ta(ea(t,"left"),!0),s=ta(ea(t,"right")),i=ta(ea(t,"top"),!0),o=ta(ea(t,"bottom")),l=Zb(t,"x"),c=Zb(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:ea(t,"chartArea"),vertical:r.concat(s).concat(c),horizontal:i.concat(o).concat(l)}}function ew(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function fk(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function MF(e,t,n,r){const{pos:s,box:i}=n,o=e.maxPadding;if(!Ee(s)){n.size&&(e[s]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[s]+=n.size}i.getPadding&&fk(o,i.getPadding());const l=Math.max(0,t.outerWidth-ew(o,e,"left","right")),c=Math.max(0,t.outerHeight-ew(o,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function IF(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function OF(e,t){const n=t.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return r(e?["left","right"]:["top","bottom"])}function wa(e,t,n,r){const s=[];let i,o,l,c,u,d;for(i=0,o=e.length,u=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,OF(l.horizontal,t));const{same:h,other:f}=MF(t,n,l,r);u|=h&&s.length,d=d||f,c.fullSize||s.push(l)}return u&&wa(s,t,n,r)||d}function Dc(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function tw(e,t,n,r){const s=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,u=r[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,f=u.size||c.height;yl(u.start)&&(o=u.start),c.fullSize?Dc(c,s.left,o,n.outerWidth-s.right-s.left,f):Dc(c,t.left+u.placed,o,h,f),u.start=o,u.placed+=h,o=c.bottom}else{const h=t.h*d,f=u.size||c.width;yl(u.start)&&(i=u.start),c.fullSize?Dc(c,i,s.top,f,n.outerHeight-s.bottom-s.top):Dc(c,i,t.top+u.placed,f,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=o}var Nn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=_n(e.options.layout.padding),i=Math.max(t-s.width,0),o=Math.max(n-s.height,0),l=AF(e.boxes),c=l.vertical,u=l.horizontal;Oe(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=c.reduce((g,y)=>y.box.options&&y.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),f=Object.assign({},s);fk(f,_n(r));const m=Object.assign({maxPadding:f,w:i,h:o,x:s.left,y:s.top},s),p=_F(c.concat(u),h);wa(l.fullSize,m,h,p),wa(c,m,h,p),wa(u,m,h,p)&&wa(c,m,h,p),IF(m),tw(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,tw(l.rightAndBottom,m,h,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Oe(l.chartArea,g=>{const y=g.box;Object.assign(y,e.chartArea),y.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class mk{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class RF extends mk{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cu="$chartjs",LF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},nw=e=>e===null||e==="";function FF(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[cu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",nw(s)){const i=$b(e,"width");i!==void 0&&(e.width=i)}if(nw(r))if(e.style.height==="")e.height=e.width/(t||2);else{const i=$b(e,"height");i!==void 0&&(e.height=i)}return e}const pk=z5?{passive:!0}:!1;function $F(e,t,n){e&&e.addEventListener(t,n,pk)}function zF(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,pk)}function BF(e,t){const n=LF[e.type]||e.type,{x:r,y:s}=Ws(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function rd(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function VF(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||rd(l.addedNodes,r),o=o&&!rd(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function UF(e,t,n){const r=e.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||rd(l.removedNodes,r),o=o&&!rd(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Sl=new Map;let rw=0;function gk(){const e=window.devicePixelRatio;e!==rw&&(rw=e,Sl.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function WF(e,t){Sl.size||window.addEventListener("resize",gk),Sl.set(e,t)}function HF(e){Sl.delete(e),Sl.size||window.removeEventListener("resize",gk)}function qF(e,t,n){const r=e.canvas,s=r&&Hx(r);if(!s)return;const i=Y2((l,c)=>{const u=s.clientWidth;n(l,c),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(s),WF(e,i),o}function Nf(e,t,n){n&&n.disconnect(),t==="resize"&&HF(e)}function GF(e,t,n){const r=e.canvas,s=Y2(i=>{e.ctx!==null&&n(BF(i,e))},e);return $F(r,t,s),s}class YF extends mk{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(FF(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[cu])return!1;const r=n[cu].initial;["height","width"].forEach(i=>{const o=r[i];Ae(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[cu],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),o={attach:VF,detach:UF,resize:qF}[n]||GF;s[n]=o(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:Nf,detach:Nf,resize:Nf}[n]||zF)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return $5(t,n,r,s)}isAttached(t){const n=t&&Hx(t);return!!(n&&n.isConnected)}}function QF(e){return!Wx()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?RF:YF}var Wc;let Rr=(Wc=class{constructor(){ue(this,"x");ue(this,"y");ue(this,"active",!1);ue(this,"options");ue(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return vl(this.x)&&vl(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},ue(Wc,"defaults",{}),ue(Wc,"defaultRoutes"),Wc);function KF(e,t){const n=e.options.ticks,r=XF(e),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?ZF(t):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>s)return e6(t,u,i,o/s),u;const d=JF(i,t,s);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Tc(t,u,d,Ae(m)?0:l-m,l),h=0,f=o-1;h<f;h++)Tc(t,u,d,i[h],i[h+1]);return Tc(t,u,d,c,Ae(m)?t.length:c+m),u}return Tc(t,u,d),u}function XF(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function JF(e,t,n){const r=t6(e),s=t.length/n;if(!r)return Math.max(s,1);const i=F3(r);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>s)return c}return Math.max(s,1)}function ZF(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function e6(e,t,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<e.length;o++)o===i&&(t.push(e[o]),s++,i=n[s*r])}function Tc(e,t,n,r,s){const i=we(r,0),o=Math.min(we(s,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),s&&(c=s-r,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function t6(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const n6=e=>e==="left"?"right":e==="right"?"left":e,sw=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,iw=(e,t)=>Math.min(t||e,e);function ow(e,t){const n=[],r=e.length/t,s=e.length;let i=0;for(;i<s;i+=r)n.push(e[Math.floor(i)]);return n}function r6(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(c-i,o-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(s-1))/2,c+=s<t?u:-u,c<i-l||c>o+l)))return c}function s6(e,t){Oe(e,n=>{const r=n.gc,s=r.length/2;let i;if(s>t){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function na(e){return e.drawTicks?e.tickLength:0}function aw(e,t){if(!e.display)return 0;const n=At(e.font,t),r=_n(e.padding);return(ct(e.text)?e.text.length:1)*n.lineHeight+r.height}function i6(e,t){return Ni(e,{scale:t,type:"scale"})}function o6(e,t,n){return Ni(e,{tick:n,index:t,type:"tick"})}function a6(e,t,n){let r=Lx(e);return(n&&t!=="right"||!n&&t==="right")&&(r=n6(r)),r}function l6(e,t,n,r){const{top:s,left:i,bottom:o,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,f,m,p;const g=o-s,y=l-i;if(e.isHorizontal()){if(m=Tt(r,i,l),Ee(n)){const b=Object.keys(n)[0],v=n[b];p=d[b].getPixelForValue(v)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=sw(e,n,t);f=l-i}else{if(Ee(n)){const b=Object.keys(n)[0],v=n[b];m=d[b].getPixelForValue(v)-y+t}else n==="center"?m=(u.left+u.right)/2-y+t:m=sw(e,n,t);p=Tt(r,o,s),h=n==="left"?-pt:pt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class Ao extends Rr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=Kn(t,Number.POSITIVE_INFINITY),n=Kn(n,Number.NEGATIVE_INFINITY),r=Kn(r,Number.POSITIVE_INFINITY),s=Kn(s,Number.NEGATIVE_INFINITY),{min:Kn(t,r),max:Kn(n,s),minDefined:Ot(t),maxDefined:Ot(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,t),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Kn(n,Kn(r,n)),max:Kn(r,Kn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Be(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=x5(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?ow(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=KF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Be(this.options.afterUpdate,[this])}beforeSetDimensions(){Be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Be(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Be(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r],i.label=Be(n.callback,[i.value,r,t],this)}afterTickToLabelConversion(){Be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=iw(this.ticks.length,t.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,l,c,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),h=d.widest.width,f=d.highest.height,m=_t(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/r:m/(r-1),h+6>l&&(l=m/(r-(t.offset?.5:1)),c=this.maxHeight-na(t.grid)-n.padding-aw(t.title,this.chart.options.font),u=Math.sqrt(h*h+f*f),o=V3(Math.min(Math.asin(_t((d.highest.height+6)/l,-1,1)),Math.asin(_t(c/u,-1,1))-Math.asin(_t(f/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Be(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=aw(s,n.options.font);if(l?(t.width=this.maxWidth,t.height=na(i)+c):(t.height=this.maxHeight,t.width=na(i)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:f}=this._getLabelSizes(),m=r.padding*2,p=jr(this.labelRotation),g=Math.cos(p),y=Math.sin(p);if(l){const b=r.mirror?0:y*h.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+b+m)}else{const b=r.mirror?0:g*h.width+y*f.height;t.width=Math.min(this.maxWidth,t.width+b+m)}this._calculatePadding(u,d,y,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?u?(f=s*t.width,m=r*n.height):(f=r*t.height,m=s*n.width):i==="start"?m=n.width:i==="end"?f=t.width:i!=="inner"&&(f=t.width/2,m=n.width/2),this.paddingLeft=Math.max((f-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Be(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)Ae(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=ow(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/iw(n,r));let u=0,d=0,h,f,m,p,g,y,b,v,w,S,j;for(h=0;h<n;h+=c){if(p=t[h].label,g=this._resolveTickFontOptions(h),s.font=y=g.string,b=i[y]=i[y]||{data:{},gc:[]},v=g.lineHeight,w=S=0,!Ae(p)&&!ct(p))w=Ib(s,b.data,b.gc,w,p),S=v;else if(ct(p))for(f=0,m=p.length;f<m;++f)j=p[f],!Ae(j)&&!ct(j)&&(w=Ib(s,b.data,b.gc,w,j),S+=v);o.push(w),l.push(S),u=Math.max(w,u),d=Math.max(S,d)}s6(i,n);const k=o.indexOf(u),N=l.indexOf(d),C=E=>({width:o[E]||0,height:l[E]||0});return{first:C(0),last:C(n-1),widest:C(k),highest:C(N),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return W3(this._alignToPixels?Os(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=o6(this.getContext(),t,r))}return this.$context||(this.$context=i6(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=jr(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*r>l*s?l/r:c/s:c*s<l*r?c/r:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:l}=s,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=na(i),m=[],p=l.setContext(this.getContext()),g=p.display?p.width:0,y=g/2,b=function(z){return Os(r,z,g)};let v,w,S,j,k,N,C,E,D,$,B,F;if(o==="top")v=b(this.bottom),N=this.bottom-f,E=v-y,$=b(t.top)+y,F=t.bottom;else if(o==="bottom")v=b(this.top),$=t.top,F=b(t.bottom)-y,N=v+y,E=this.top+f;else if(o==="left")v=b(this.right),k=this.right-f,C=v-y,D=b(t.left)+y,B=t.right;else if(o==="right")v=b(this.left),D=t.left,B=b(t.right)-y,k=v+y,C=this.left+f;else if(n==="x"){if(o==="center")v=b((t.top+t.bottom)/2+.5);else if(Ee(o)){const z=Object.keys(o)[0],M=o[z];v=b(this.chart.scales[z].getPixelForValue(M))}$=t.top,F=t.bottom,N=v+y,E=N+f}else if(n==="y"){if(o==="center")v=b((t.left+t.right)/2);else if(Ee(o)){const z=Object.keys(o)[0],M=o[z];v=b(this.chart.scales[z].getPixelForValue(M))}k=v-y,C=k-f,D=t.left,B=t.right}const T=we(s.ticks.maxTicksLimit,h),A=Math.max(1,Math.ceil(h/T));for(w=0;w<h;w+=A){const z=this.getContext(w),M=i.setContext(z),P=l.setContext(z),I=M.lineWidth,H=M.color,G=P.dash||[],ee=P.dashOffset,ie=M.tickWidth,V=M.tickColor,X=M.tickBorderDash||[],U=M.tickBorderDashOffset;S=r6(this,w,c),S!==void 0&&(j=Os(r,S,I),u?k=C=D=B=j:N=E=$=F=j,m.push({tx1:k,ty1:N,tx2:C,ty2:E,x1:D,y1:$,x2:B,y2:F,width:I,color:H,borderDash:G,borderDashOffset:ee,tickWidth:ie,tickColor:V,tickBorderDash:X,tickBorderDashOffset:U}))}return this._ticksLength=h,this._borderValue=v,m}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,f=na(r.grid),m=f+d,p=h?-d:m,g=-jr(this.labelRotation),y=[];let b,v,w,S,j,k,N,C,E,D,$,B,F="middle";if(s==="top")k=this.bottom-p,N=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+p,N=this._getXAxisLabelAlignment();else if(s==="left"){const A=this._getYAxisLabelAlignment(f);N=A.textAlign,j=A.x}else if(s==="right"){const A=this._getYAxisLabelAlignment(f);N=A.textAlign,j=A.x}else if(n==="x"){if(s==="center")k=(t.top+t.bottom)/2+m;else if(Ee(s)){const A=Object.keys(s)[0],z=s[A];k=this.chart.scales[A].getPixelForValue(z)+m}N=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")j=(t.left+t.right)/2-m;else if(Ee(s)){const A=Object.keys(s)[0],z=s[A];j=this.chart.scales[A].getPixelForValue(z)}N=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?F="top":c==="end"&&(F="bottom"));const T=this._getLabelSizes();for(b=0,v=l.length;b<v;++b){w=l[b],S=w.label;const A=i.setContext(this.getContext(b));C=this.getPixelForTick(b)+i.labelOffset,E=this._resolveTickFontOptions(b),D=E.lineHeight,$=ct(S)?S.length:1;const z=$/2,M=A.color,P=A.textStrokeColor,I=A.textStrokeWidth;let H=N;o?(j=C,N==="inner"&&(b===v-1?H=this.options.reverse?"left":"right":b===0?H=this.options.reverse?"right":"left":H="center"),s==="top"?u==="near"||g!==0?B=-$*D+D/2:u==="center"?B=-T.highest.height/2-z*D+D:B=-T.highest.height+D/2:u==="near"||g!==0?B=D/2:u==="center"?B=T.highest.height/2-z*D:B=T.highest.height-$*D,h&&(B*=-1),g!==0&&!A.showLabelBackdrop&&(j+=D/2*Math.sin(g))):(k=C,B=(1-$)*D/2);let G;if(A.showLabelBackdrop){const ee=_n(A.backdropPadding),ie=T.heights[b],V=T.widths[b];let X=B-ee.top,U=0-ee.left;switch(F){case"middle":X-=ie/2;break;case"bottom":X-=ie;break}switch(N){case"center":U-=V/2;break;case"right":U-=V;break;case"inner":b===v-1?U-=V:b>0&&(U-=V/2);break}G={left:U,top:X,width:V+ee.width,height:ie+ee.height,color:A.backdropColor}}y.push({label:S,font:E,textOffset:B,options:{rotation:g,color:M,strokeColor:P,strokeWidth:I,textAlign:H,textBaseline:F,translation:[j,k],backdrop:G}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-jr(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let u,d;return n==="left"?s?(d=this.right+i,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const c=s[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,f;this.isHorizontal()?(u=Os(t,this.left,o)-o/2,d=Os(t,this.right,l)+l/2,h=f=c):(h=Os(t,this.top,o)-o/2,f=Os(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&rh(r,s);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;jl(r,u,0,d,c,l)}s&&sh(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=At(r.font),o=_n(r.padding),l=r.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Ee(n)?(c+=o.bottom,ct(r.text)&&(c+=i.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:f}=l6(this,c,n,l);jl(t,r.text,0,0,i,{color:r.color,maxWidth:h,rotation:f,textAlign:a6(l,n,s),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=we(t.grid&&t.grid.z,-1),s=we(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ao.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[r]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return At(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Pc{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;d6(n)&&(r=this.register(n));const s=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in s||(s[i]=t,c6(t,o,r),this.override&&it.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in it[s]&&(delete it[s][r],this.override&&delete mi[r])}}function c6(e,t,n){const r=xl(Object.create(null),[n?it.get(n):{},it.get(t),e.defaults]);it.set(t,r),e.defaultRoutes&&u6(t,e.defaultRoutes),e.descriptors&&it.describe(t,e.descriptors)}function u6(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");it.route(i,s,c,l)})}function d6(e){return"id"in e&&"defaults"in e}class h6{constructor(){this.controllers=new Pc(ii,"datasets",!0),this.elements=new Pc(Rr,"elements"),this.plugins=new Pc(Object,"plugins"),this.scales=new Pc(Ao,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(t,i,s):Oe(s,o=>{const l=r||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,r){const s=Ox(t);Be(r["before"+s],[],r),n[t](r),Be(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var Zn=new h6;class f6{constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(i,t,n,r);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,r,s){s=s||{};for(const i of t){const o=i.plugin,l=o[r],c=[n,s,i.options];if(Be(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=we(r.options&&r.options.plugins,{}),i=m6(r);return s===!1&&!n?[]:g6(t,i,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function m6(e){const t={},n=[],r=Object.keys(Zn.plugins.items);for(let i=0;i<r.length;i++)n.push(Zn.getPlugin(r[i]));const s=e.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function p6(e,t){return!t&&e===!1?null:e===!0?{}:e}function g6(e,{plugins:t,localIds:n},r,s){const i=[],o=e.getContext();for(const l of t){const c=l.id,u=p6(r[c],s);u!==null&&i.push({plugin:l,options:x6(e.config,{plugin:l,local:n[c]},u,o)})}return i}function x6(e,{plugin:t,local:n},r,s){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(r,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Pp(e,t){const n=it.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function y6(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function v6(e,t){return e===t?"_index_":"_value_"}function lw(e){if(e==="x"||e==="y"||e==="r")return e}function b6(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function _p(e,...t){if(lw(e))return e;for(const n of t){const r=n.axis||b6(n.position)||e.length>1&&lw(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function cw(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function w6(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return cw(e,"x",n[0])||cw(e,"y",n[0])}return{}}function j6(e,t){const n=mi[e.type]||{scales:{}},r=t.scales||{},s=Pp(e.type,t),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!Ee(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=_p(o,l,w6(o,e),it.scales[l.type]),u=v6(c,s),d=n.scales||{};i[o]=$a(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Pp(l,t),d=(mi[l]||{}).scales||{};Object.keys(d).forEach(h=>{const f=y6(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),$a(i[m],[{axis:f},r[m],d[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];$a(l,[it.scales[l.type],it.scale])}),i}function xk(e){const t=e.options||(e.options={});t.plugins=we(t.plugins,{}),t.scales=j6(e,t)}function yk(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function S6(e){return e=e||{},e.data=yk(e.data),xk(e),e}const uw=new Map,vk=new Set;function _c(e,t){let n=uw.get(e);return n||(n=t(),uw.set(e,n),vk.add(n)),n}const ra=(e,t,n)=>{const r=fi(t,n);r!==void 0&&e.add(r)};let C6=class{constructor(t){this._config=S6(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=yk(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),xk(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return _c(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return _c(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return _c(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return _c(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:i}=this,o=this._cachedScopes(t,r),l=o.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>ra(c,t,h))),d.forEach(h=>ra(c,s,h)),d.forEach(h=>ra(c,mi[i]||{},h)),d.forEach(h=>ra(c,it,h)),d.forEach(h=>ra(c,Dp,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),vk.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,mi[n]||{},it.datasets[n]||{},{type:n},it,Dp]}resolveNamedOptions(t,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=dw(this._resolverCache,t,s);let c=o;if(k6(o,n)){i.$shared=!1,r=Ns(r)?r():r;const u=this.createResolver(t,r,l);c=vo(o,r,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,r=[""],s){const{resolver:i}=dw(this._resolverCache,t,r);return Ee(n)?vo(i,n,void 0,s):i}};function dw(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Bx(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const N6=e=>Ee(e)&&Object.getOwnPropertyNames(e).some(t=>Ns(e[t]));function k6(e,t){const{isScriptable:n,isIndexable:r}=J2(e);for(const s of t){const i=n(s),o=r(s),l=(o||i)&&e[s];if(i&&(Ns(l)||N6(l))||o&&ct(l))return!0}return!1}var E6="4.5.0";const D6=["top","bottom","left","right","chartArea"];function hw(e,t){return e==="top"||e==="bottom"||D6.indexOf(e)===-1&&t==="x"}function fw(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function mw(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Be(n&&n.onComplete,[e],t)}function T6(e){const t=e.chart,n=t.options.animation;Be(n&&n.onProgress,[e],t)}function bk(e){return Wx()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const uu={},pw=e=>{const t=bk(e);return Object.values(uu).filter(n=>n.canvas===t).pop()};function P6(e,t,n){const r=Object.keys(e);for(const s of r){const i=+s;if(i>=t){const o=e[s];delete e[s],(n>0||i>t)&&(e[i+n]=o)}}}function _6(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}var Ur;let Mo=(Ur=class{static register(...t){Zn.add(...t),gw()}static unregister(...t){Zn.remove(...t),gw()}constructor(t,n){const r=this.config=new C6(n),s=bk(t),i=pw(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||QF(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=T3(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new f6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Y3(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],uu[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}fr.listen(this,"complete",mw),fr.listen(this,"progress",T6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Ae(t)?n&&i?i:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Zn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Fb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ob(this.canvas,this.ctx),this}stop(){return fr.stop(this),this}resize(t,n){fr.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Fb(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Be(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Oe(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=_p(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Oe(i,o=>{const l=o.options,c=l.id,u=_p(c,l),d=we(l.type,o.dtype);(l.position===void 0||hw(l.position,u)!==hw(o.dposition))&&(l.position=o.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{const f=Zn.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),Oe(s,(o,l)=>{o||delete r[l]}),Oe(r,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(fw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||Pp(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=Zn.getController(l),{datasetElementType:u,dataElementType:d}=it.datasets[l];Object.assign(c,{dataElementType:Zn.getElement(d),datasetElementType:u&&Zn.getElement(u)}),o.controller=new c(this,r),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Oe(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),f=!s&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Oe(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(fw("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Oe(this.scales,t=>{Nn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!Nb(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;P6(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Nb(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Oe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ns(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fr.has(this)?this.attached&&!fr.running(this)&&fr.start(this):(this.draw(),mw({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!t||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r={meta:t,index:t.index,cancelable:!0},s=lk(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&rh(n,s),t.controller.draw(),s&&sh(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return wl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,s){const i=DF.modes[n];return typeof i=="function"?i(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ni(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,s);yl(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),fr.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ob(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete uu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},s=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Oe(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Oe(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Oe(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Ju(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const s=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(n,t),l=r?t:i(t,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:i}=this,o=n,l=this._getActiveElements(t,s,r,o),c=O3(t),u=_6(t,this._lastEvent,r,c);r&&(this._lastEvent=null,Be(i.onHover,[t,l,this],this),c&&Be(i.onClick,[t,l,this],this));const d=!Ju(l,s);return(d||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,d}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,s)}},ue(Ur,"defaults",it),ue(Ur,"instances",uu),ue(Ur,"overrides",mi),ue(Ur,"registry",Zn),ue(Ur,"version",E6),ue(Ur,"getChart",pw),Ur);function gw(){return Oe(Mo.instances,e=>e._plugins.invalidate())}function A6(e,t,n){const{startAngle:r,x:s,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/o,rn(r-n));if(e.beginPath(),e.arc(s,i,o-u/2,r+h/2,n-h/2),l>0){const f=Math.min(u/l,rn(r-n));e.arc(s,i,l+u/2,n-f/2,r+f/2,!0)}else{const f=Math.min(u/2,o*rn(r-n));if(d==="round")e.arc(s,i,f,n-Re/2,r+Re/2,!0);else if(d==="bevel"){const m=2*f*f,p=-m*Math.cos(n+Re/2)+s,g=-m*Math.sin(n+Re/2)+i,y=m*Math.cos(r+Re/2)+s,b=m*Math.sin(r+Re/2)+i;e.lineTo(p,g),e.lineTo(y,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function M6(e,t,n){const{startAngle:r,pixelMargin:s,x:i,y:o,outerRadius:l,innerRadius:c}=t;let u=s/l;e.beginPath(),e.arc(i,o,l,r-u,n+u),c>s?(u=s/c,e.arc(i,o,c,n+u,r-u,!0)):e.arc(i,o,s,n+pt,r-pt),e.closePath(),e.clip()}function I6(e){return zx(e,["outerStart","outerEnd","innerStart","innerEnd"])}function O6(e,t,n,r){const s=I6(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,r*t/2),l=c=>{const u=(n-Math.min(i,c))*r/2;return _t(c,0,Math.min(i,u))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:_t(s.innerStart,0,o),innerEnd:_t(s.innerEnd,0,o)}}function Ti(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function sd(e,t,n,r,s,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+r+n-u,0),f=d>0?d+r+n+u:0;let m=0;const p=s-c;if(r){const A=d>0?d-r:0,z=h>0?h-r:0,M=(A+z)/2,P=M!==0?p*M/(M+r):p;m=(p-P)/2}const g=Math.max(.001,p*h-n/Re)/h,y=(p-g)/2,b=c+y+m,v=s-y-m,{outerStart:w,outerEnd:S,innerStart:j,innerEnd:k}=O6(t,f,h,v-b),N=h-w,C=h-S,E=b+w/N,D=v-S/C,$=f+j,B=f+k,F=b+j/$,T=v-k/B;if(e.beginPath(),i){const A=(E+D)/2;if(e.arc(o,l,h,E,A),e.arc(o,l,h,A,D),S>0){const I=Ti(C,D,o,l);e.arc(I.x,I.y,S,D,v+pt)}const z=Ti(B,v,o,l);if(e.lineTo(z.x,z.y),k>0){const I=Ti(B,T,o,l);e.arc(I.x,I.y,k,v+pt,T+Math.PI)}const M=(v-k/f+(b+j/f))/2;if(e.arc(o,l,f,v-k/f,M,!0),e.arc(o,l,f,M,b+j/f,!0),j>0){const I=Ti($,F,o,l);e.arc(I.x,I.y,j,F+Math.PI,b-pt)}const P=Ti(N,b,o,l);if(e.lineTo(P.x,P.y),w>0){const I=Ti(N,E,o,l);e.arc(I.x,I.y,w,b-pt,E)}}else{e.moveTo(o,l);const A=Math.cos(E)*h+o,z=Math.sin(E)*h+l;e.lineTo(A,z);const M=Math.cos(D)*h+o,P=Math.sin(D)*h+l;e.lineTo(M,P)}e.closePath()}function R6(e,t,n,r,s){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){sd(e,t,n,r,c,s);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=o+(l%Ke||Ke))}return sd(e,t,n,r,c,s),e.fill(),c}function L6(e,t,n,r,s){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:f,borderRadius:m}=c,p=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=f,p?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let g=t.endAngle;if(i){sd(e,t,n,r,g,s);for(let y=0;y<i;++y)e.stroke();isNaN(l)||(g=o+(l%Ke||Ke))}p&&M6(e,t,g),c.selfJoin&&g-o>=Re&&m===0&&d!=="miter"&&A6(e,t,g),i||(sd(e,t,n,r,g,s),e.stroke())}class ja extends Rr{constructor(n){super();ue(this,"circumference");ue(this,"endAngle");ue(this,"fullCircles");ue(this,"innerRadius");ue(this,"outerRadius");ue(this,"pixelMargin");ue(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.getProps(["x","y"],s),{angle:o,distance:l}=W2(i,{x:n,y:r}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),m=(this.options.spacing+this.options.borderWidth)/2,p=we(f,u-c),g=bl(o,c,u)&&c!==u,y=p>=Ke||g,b=Sr(l,d+m,h+m);return y&&b}getCenterPoint(n){const{x:r,y:s,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:u,spacing:d}=this.options,h=(i+o)/2,f=(l+c+d+u)/2;return{x:r+Math.cos(h)*f,y:s+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:s}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,l=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=s>Ke?Math.floor(s/Ke):0,s===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Re,s||0)),d=i*u;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,R6(n,this,d,o,l),L6(n,this,d,o,l),n.restore()}}ue(ja,"id","arc"),ue(ja,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ue(ja,"defaultRoutes",{backgroundColor:"backgroundColor"}),ue(ja,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function wk(e,t,n=t){e.lineCap=we(n.borderCapStyle,t.borderCapStyle),e.setLineDash(we(n.borderDash,t.borderDash)),e.lineDashOffset=we(n.borderDashOffset,t.borderDashOffset),e.lineJoin=we(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=we(n.borderWidth,t.borderWidth),e.strokeStyle=we(n.borderColor,t.borderColor)}function F6(e,t,n){e.lineTo(n.x,n.y)}function $6(e){return e.stepped?l5:e.tension||e.cubicInterpolationMode==="monotone"?c5:F6}function jk(e,t,n={}){const r=e.length,{start:s=0,end:i=r-1}=n,{start:o,end:l}=t,c=Math.max(s,o),u=Math.min(i,l),d=s<o&&i<o||s>l&&i>l;return{count:r,start:c,loop:t.loop,ilen:u<c&&!d?r+u-c:u-c}}function z6(e,t,n,r){const{points:s,options:i}=t,{count:o,start:l,loop:c,ilen:u}=jk(s,n,r),d=$6(i);let{move:h=!0,reverse:f}=r||{},m,p,g;for(m=0;m<=u;++m)p=s[(l+(f?u-m:m))%o],!p.skip&&(h?(e.moveTo(p.x,p.y),h=!1):d(e,g,p,f,i.stepped),g=p);return c&&(p=s[(l+(f?u:0))%o],d(e,g,p,f,i.stepped)),!!c}function B6(e,t,n,r){const s=t.points,{count:i,start:o,ilen:l}=jk(s,n,r),{move:c=!0,reverse:u}=r||{};let d=0,h=0,f,m,p,g,y,b;const v=S=>(o+(u?l-S:S))%i,w=()=>{g!==y&&(e.lineTo(d,y),e.lineTo(d,g),e.lineTo(d,b))};for(c&&(m=s[v(0)],e.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=s[v(f)],m.skip)continue;const S=m.x,j=m.y,k=S|0;k===p?(j<g?g=j:j>y&&(y=j),d=(h*d+S)/++h):(w(),e.lineTo(S,j),p=k,h=0,g=y=j),b=j}w()}function Ap(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?B6:z6}function V6(e){return e.stepped?B5:e.tension||e.cubicInterpolationMode==="monotone"?V5:Hs}function U6(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),wk(e,t.options),e.stroke(s)}function W6(e,t,n,r){const{segments:s,options:i}=t,o=Ap(t);for(const l of s)wk(e,i,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const H6=typeof Path2D=="function";function q6(e,t,n,r){H6&&!t.options.segment?U6(e,t,n,r):W6(e,t,n,r)}class ns extends Rr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;M5(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Y5(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],i=this.points,o=ak(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],c=V6(r);let u,d;for(u=0,d=o.length;u<d;++u){const{start:h,end:f}=o[u],m=i[h],p=i[f];if(m===p){l.push(m);continue}const g=Math.abs((s-m[n])/(p[n]-m[n])),y=c(m,p,g,r.stepped);y[n]=t[n],l.push(y)}return l.length===1?l[0]:l}pathSegment(t,n,r){return Ap(this)(t,this,n,r)}path(t,n,r){const s=this.segments,i=Ap(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=i(t,this,l,{start:n,end:n+r-1});return!!o}draw(t,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),q6(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ue(ns,"id","line"),ue(ns,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ue(ns,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ue(ns,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function xw(e,t,n,r){const s=e.options,{[n]:i}=e.getProps([n],r);return Math.abs(t-i)<s.radius+s.hitRadius}class du extends Rr{constructor(n){super();ue(this,"parsed");ue(this,"skip");ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return xw(this,n,"x",r)}inYRange(n,r){return xw(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!wl(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Tp(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ue(du,"id","point"),ue(du,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ue(du,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Sk(e,t){const{x:n,y:r,base:s,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=o/2,l=Math.min(n,s),c=Math.max(n,s),u=r-h,d=r+h):(h=i/2,l=n-h,c=n+h,u=Math.min(r,s),d=Math.max(r,s)),{left:l,top:u,right:c,bottom:d}}function rs(e,t,n,r){return e?0:_t(t,n,r)}function G6(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,i=X2(r);return{t:rs(s.top,i.top,0,n),r:rs(s.right,i.right,0,t),b:rs(s.bottom,i.bottom,0,n),l:rs(s.left,i.left,0,t)}}function Y6(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,i=ro(s),o=Math.min(t,n),l=e.borderSkipped,c=r||Ee(s);return{topLeft:rs(!c||l.top||l.left,i.topLeft,0,o),topRight:rs(!c||l.top||l.right,i.topRight,0,o),bottomLeft:rs(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:rs(!c||l.bottom||l.right,i.bottomRight,0,o)}}function Q6(e){const t=Sk(e),n=t.right-t.left,r=t.bottom-t.top,s=G6(e,n/2,r/2),i=Y6(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function kf(e,t,n,r){const s=t===null,i=n===null,l=e&&!(s&&i)&&Sk(e,r);return l&&(s||Sr(t,l.left,l.right))&&(i||Sr(n,l.top,l.bottom))}function K6(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function X6(e,t){e.rect(t.x,t.y,t.w,t.h)}function Ef(e,t,n={}){const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+i,h:e.h+o,radius:e.radius}}class hu extends Rr{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:i,outer:o}=Q6(this),l=K6(o.radius)?td:X6;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,Ef(o,n,i)),t.clip(),l(t,Ef(i,-n,o)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),l(t,Ef(i,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,r){return kf(this,t,n,r)}inXRange(t,n){return kf(this,t,null,n)}inYRange(t,n){return kf(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+s)/2:n,y:i?r:(r+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ue(hu,"id","bar"),ue(hu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ue(hu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function J6(e,t,n){const r=e.segments,s=e.points,i=t.points,o=[];for(const l of r){let{start:c,end:u}=l;u=ah(c,u,s);const d=Mp(n,s[c],s[u],l.loop);if(!t.segments){o.push({source:l,target:d,start:s[c],end:s[u]});continue}const h=ak(t,d);for(const f of h){const m=Mp(n,i[f.start],i[f.end],f.loop),p=ok(l,s,m);for(const g of p)o.push({source:g,target:f,start:{[n]:yw(d,m,"start",Math.max)},end:{[n]:yw(d,m,"end",Math.min)}})}}return o}function Mp(e,t,n,r){if(r)return;let s=t[e],i=n[e];return e==="angle"&&(s=rn(s),i=rn(i)),{property:e,start:s,end:i}}function Z6(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,i=[];return t.segments.forEach(({start:o,end:l})=>{l=ah(o,l,s);const c=s[o],u=s[l];r!==null?(i.push({x:c.x,y:r}),i.push({x:u.x,y:r})):n!==null&&(i.push({x:n,y:c.y}),i.push({x:n,y:u.y}))}),i}function ah(e,t,n){for(;t>e;t--){const r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function yw(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function Ck(e,t){let n=[],r=!1;return ct(e)?(r=!0,n=e):n=Z6(e,t),n.length?new ns({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function vw(e){return e&&e.fill!==!1}function e$(e,t,n){let s=e[t].fill;const i=[t];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Ot(s))return s;if(o=e[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function t$(e,t,n){const r=i$(e);if(Ee(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Ot(s)&&Math.floor(s)===s?n$(r[0],t,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function n$(e,t,n,r){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=r?!1:n}function r$(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Ee(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function s$(e,t,n){let r;return e==="start"?r=n:e==="end"?r=t.options.reverse?t.min:t.max:Ee(e)?r=e.value:r=t.getBaseValue(),r}function i$(e){const t=e.options,n=t.fill;let r=we(n&&n.target,n);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function o$(e){const{scale:t,index:n,line:r}=e,s=[],i=r.segments,o=r.points,l=a$(t,n);l.push(Ck({x:null,y:t.bottom},r));for(let c=0;c<i.length;c++){const u=i[c];for(let d=u.start;d<=u.end;d++)l$(s,o[d],l)}return new ns({points:s,options:{}})}function a$(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===t)break;i.hidden||n.unshift(i.dataset)}return n}function l$(e,t,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:l,point:c}=c$(i,t,"x");if(!(!c||o&&l)){if(o)r.unshift(c);else if(e.push(c),!l)break}}e.push(...r)}function c$(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],i=e.segments,o=e.points;let l=!1,c=!1;for(let u=0;u<i.length;u++){const d=i[u],h=o[d.start][n],f=o[d.end][n];if(Sr(s,h,f)){l=s===h,c=s===f;break}}return{first:l,last:c,point:r}}class Nk{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:Ke},t.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(t){const{x:n,y:r,radius:s}=this,i=t.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function u$(e){const{chart:t,fill:n,line:r}=e;if(Ot(n))return d$(t,n);if(n==="stack")return o$(e);if(n==="shape")return!0;const s=h$(e);return s instanceof Nk?s:Ck(s,r)}function d$(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function h$(e){return(e.scale||{}).getPointPositionForValue?m$(e):f$(e)}function f$(e){const{scale:t={},fill:n}=e,r=r$(n,t);if(Ot(r)){const s=t.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function m$(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,i=r.reverse?t.max:t.min,o=s$(n,t,i),l=[];if(r.grid.circular){const c=t.getPointPositionForValue(0,i);return new Nk({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<s;++c)l.push(t.getPointPositionForValue(c,o));return l}function Df(e,t,n){const r=u$(t),{chart:s,index:i,line:o,scale:l,axis:c}=t,u=o.options,d=u.fill,h=u.backgroundColor,{above:f=h,below:m=h}=d||{},p=s.getDatasetMeta(i),g=lk(s,p);r&&o.points.length&&(rh(e,n),p$(e,{line:o,target:r,above:f,below:m,area:n,scale:l,axis:c,clip:g}),sh(e))}function p$(e,t){const{line:n,target:r,above:s,below:i,area:o,scale:l,clip:c}=t,u=n._loop?"angle":t.axis;e.save();let d=i;i!==s&&(u==="x"?(bw(e,r,o.top),Tf(e,{line:n,target:r,color:s,scale:l,property:u,clip:c}),e.restore(),e.save(),bw(e,r,o.bottom)):u==="y"&&(ww(e,r,o.left),Tf(e,{line:n,target:r,color:i,scale:l,property:u,clip:c}),e.restore(),e.save(),ww(e,r,o.right),d=s)),Tf(e,{line:n,target:r,color:d,scale:l,property:u,clip:c}),e.restore()}function bw(e,t,n){const{segments:r,points:s}=t;let i=!0,o=!1;e.beginPath();for(const l of r){const{start:c,end:u}=l,d=s[c],h=s[ah(c,u,s)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),o=!!t.pathSegment(e,l,{move:o}),o?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function ww(e,t,n){const{segments:r,points:s}=t;let i=!0,o=!1;e.beginPath();for(const l of r){const{start:c,end:u}=l,d=s[c],h=s[ah(c,u,s)];i?(e.moveTo(d.x,d.y),i=!1):(e.lineTo(n,d.y),e.lineTo(d.x,d.y)),o=!!t.pathSegment(e,l,{move:o}),o?e.closePath():e.lineTo(n,h.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function Tf(e,t){const{line:n,target:r,property:s,color:i,scale:o,clip:l}=t,c=J6(n,r,s);for(const{source:u,target:d,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=u,p=r!==!0;e.save(),e.fillStyle=m,g$(e,o,l,p&&Mp(s,h,f)),e.beginPath();const g=!!n.pathSegment(e,u);let y;if(p){g?e.closePath():jw(e,r,f,s);const b=!!r.pathSegment(e,d,{move:g,reverse:!0});y=g&&b,y||jw(e,r,h,s)}e.closePath(),e.fill(y?"evenodd":"nonzero"),e.restore()}}function g$(e,t,n,r){const s=t.chart.chartArea,{property:i,start:o,end:l}=r||{};if(i==="x"||i==="y"){let c,u,d,h;i==="x"?(c=o,u=s.top,d=l,h=s.bottom):(c=s.left,u=o,d=s.right,h=l),e.beginPath(),n&&(c=Math.max(c,n.left),d=Math.min(d,n.right),u=Math.max(u,n.top),h=Math.min(h,n.bottom)),e.rect(c,u,d-c,h-u),e.clip()}}function jw(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}var Gx={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let i,o,l,c;for(o=0;o<r;++o)i=e.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof ns&&(c={visible:e.isDatasetVisible(o),index:o,fill:t$(l,o,r),chart:e,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,s.push(c);for(o=0;o<r;++o)c=s[o],!(!c||c.fill===!1)&&(c.fill=e$(s,o,n.propagate))},beforeDraw(e,t,n){const r=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),i=e.chartArea;for(let o=s.length-1;o>=0;--o){const l=s[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),r&&l.fill&&Df(e.ctx,l,i))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;vw(i)&&Df(e.ctx,i,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;!vw(r)||n.drawTime!=="beforeDatasetDraw"||Df(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Sw=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},x$=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Cw extends Rr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Be(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=At(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Sw(r,i);let u,d;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,s,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=s+l;let h=t;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-d;return this.legendItems.forEach((p,g)=>{const y=r+n/2+i.measureText(p.text).width;(g===0||u[u.length-1]+y+2*l>o)&&(h+=d,u[u.length-(g>0?0:1)]=0,m+=d,f++),c[g]={left:0,top:m,row:f,width:y,height:s},u[u.length-1]+=y+l}),h}_fitCols(t,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-t;let h=l,f=0,m=0,p=0,g=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:v,itemHeight:w}=y$(r,n,i,y,s);b>0&&m+w+2*l>d&&(h+=f+l,u.push({width:f,height:m}),p+=f+l,g++,f=m=0),c[b]={left:p,top:m,col:g,width:v,height:w},f=Math.max(f,v),m+=w+l}),h+=f,u.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=so(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Tt(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=Tt(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+t+s,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+s}else{let l=0,c=Tt(r,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=Tt(r,this.top+t+s,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;rh(t,this),this._draw(),sh(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=t,l=it.color,c=so(t.rtl,this.left,this.width),u=At(o.font),{padding:d}=o,h=u.size,f=h/2;let m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:p,boxHeight:g,itemHeight:y}=Sw(o,h),b=function(k,N,C){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();const E=we(C.lineWidth,1);if(s.fillStyle=we(C.fillStyle,l),s.lineCap=we(C.lineCap,"butt"),s.lineDashOffset=we(C.lineDashOffset,0),s.lineJoin=we(C.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=we(C.strokeStyle,l),s.setLineDash(we(C.lineDash,[])),o.usePointStyle){const D={radius:g*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},$=c.xPlus(k,p/2),B=N+f;K2(s,D,$,B,o.pointStyleWidth&&p)}else{const D=N+Math.max((h-g)/2,0),$=c.leftForLtr(k,p),B=ro(C.borderRadius);s.beginPath(),Object.values(B).some(F=>F!==0)?td(s,{x:$,y:D,w:p,h:g,radius:B}):s.rect($,D,p,g),s.fill(),E!==0&&s.stroke()}s.restore()},v=function(k,N,C){jl(s,C.text,k,N+y/2,u,{strikethrough:C.hidden,textAlign:c.textAlign(C.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?m={x:Tt(i,this.left+d,this.right-r[0]),y:this.top+d+S,line:0}:m={x:this.left+d,y:Tt(i,this.top+S+d,this.bottom-n[0].height),line:0},rk(this.ctx,t.textDirection);const j=y+d;this.legendItems.forEach((k,N)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;const C=s.measureText(k.text).width,E=c.textAlign(k.textAlign||(k.textAlign=o.textAlign)),D=p+f+C;let $=m.x,B=m.y;c.setWidth(this.width),w?N>0&&$+D+d>this.right&&(B=m.y+=j,m.line++,$=m.x=Tt(i,this.left+d,this.right-r[m.line])):N>0&&B+j>this.bottom&&($=m.x=$+n[m.line].width+d,m.line++,B=m.y=Tt(i,this.top+S+d,this.bottom-n[m.line].height));const F=c.x($);if(b(F,B,k),$=Q3(E,$+p+f,w?$+D:this.right,t.rtl),v(c.x($),B,k),w)m.x+=D+d;else if(typeof k.text!="string"){const T=u.lineHeight;m.y+=kk(k,T)+d}else m.y+=j}),sk(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=At(n.font),s=_n(n.padding);if(!n.display)return;const i=so(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=r.size/2,u=s.top+c;let d,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),d=this.top+u,h=Tt(t.align,h,this.right-f);else{const p=this.columnSizes.reduce((g,y)=>Math.max(g,y.height),0);d=u+Tt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const m=Tt(l,h,h+f);o.textAlign=i.textAlign(Lx(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,jl(o,n.text,m,d,r)}_computeTitleHeight(){const t=this.options.title,n=At(t.font),r=_n(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,i;if(Sr(t,this.left,this.right)&&Sr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Sr(t,s.left,s.left+s.width)&&Sr(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!w$(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,i=x$(s,r);s&&!i&&Be(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!i&&Be(n.onHover,[t,r,this],this)}else r&&Be(n.onClick,[t,r,this],this)}}function y$(e,t,n,r,s){const i=v$(r,e,t,n),o=b$(s,r,t.lineHeight);return{itemWidth:i,itemHeight:o}}function v$(e,t,n,r){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+r.measureText(s).width}function b$(e,t,n){let r=e;return typeof t.text!="string"&&(r=kk(t,n)),r}function kk(e,t){const n=e.text?e.text.length:0;return t*n}function w$(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var Yx={id:"legend",_element:Cw,start(e,t,n){const r=e.legend=new Cw({ctx:e.ctx,options:n,chart:e});Nn.configure(e,r,n),Nn.addBox(e,r)},stop(e){Nn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Nn.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=_n(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Ek extends Rr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const s=ct(r.text)?r.text.length:1;this._padding=_n(r.padding);const i=s*At(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:s,right:i,options:o}=this,l=o.align;let c=0,u,d,h;return this.isHorizontal()?(d=Tt(l,r,i),h=n+t,u=i-r):(o.position==="left"?(d=r+t,h=Tt(l,s,n),c=Re*-.5):(d=i-t,h=Tt(l,n,s),c=Re*.5),u=s-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=At(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);jl(t,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:u,textAlign:Lx(n.align),textBaseline:"middle",translation:[o,l]})}}function j$(e,t){const n=new Ek({ctx:e.ctx,options:t,chart:e});Nn.configure(e,n,t),Nn.addBox(e,n),e.titleBlock=n}var Dk={id:"title",_element:Ek,start(e,t,n){j$(e,n)},stop(e){const t=e.titleBlock;Nn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Nn.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sa={average(e){if(!e.length)return!1;let t,n,r=new Set,s=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),s+=c.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:s/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=Ep(t,u);d<s&&(s=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function Xn(e,t){return t&&(ct(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function mr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function S$(e,t){const{element:n,datasetIndex:r,index:s}=t,i=e.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(s);return{chart:e,label:o,parsed:i.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Nw(e,t){const n=e.chart.ctx,{body:r,footer:s,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=At(t.bodyFont),u=At(t.titleFont),d=At(t.footerFont),h=i.length,f=s.length,m=r.length,p=_n(t.padding);let g=p.height,y=0,b=r.reduce((S,j)=>S+j.before.length+j.lines.length+j.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const S=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=m*S+(b-m)*c.lineHeight+(b-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*d.lineHeight+(f-1)*t.footerSpacing);let v=0;const w=function(S){y=Math.max(y,n.measureText(S).width+v)};return n.save(),n.font=u.string,Oe(e.title,w),n.font=c.string,Oe(e.beforeBody.concat(e.afterBody),w),v=t.displayColors?o+2+t.boxPadding:0,Oe(r,S=>{Oe(S.before,w),Oe(S.lines,w),Oe(S.after,w)}),v=0,n.font=d.string,Oe(e.footer,w),n.restore(),y+=p.width,{width:y,height:g}}function C$(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function N$(e,t,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(e==="left"&&s+i+o>t.width||e==="right"&&s-i-o<0)return!0}function k$(e,t,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let u="center";return r==="center"?u=s<=(l+c)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),N$(u,e,t,n)&&(u="center"),u}function kw(e,t,n){const r=n.yAlign||t.yAlign||C$(e,n);return{xAlign:n.xAlign||t.xAlign||k$(e,t,n,r),yAlign:r}}function E$(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function D$(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function Ew(e,t,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,u=s+i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:m}=ro(o);let p=E$(t,l);const g=D$(t,c,u);return c==="center"?l==="left"?p+=u:l==="right"&&(p-=u):l==="left"?p-=Math.max(d,f)+s:l==="right"&&(p+=Math.max(h,m)+s),{x:_t(p,0,r.width-t.width),y:_t(g,0,r.height-t.height)}}function Ac(e,t,n){const r=_n(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function Dw(e){return Xn([],mr(e))}function T$(e,t,n){return Ni(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function Tw(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Tk={beforeTitle:dr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:dr,beforeBody:dr,beforeLabel:dr,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Ae(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:dr,afterBody:dr,beforeFooter:dr,footer:dr,afterFooter:dr};function qt(e,t,n,r){const s=e[t].call(n,r);return typeof s>"u"?Tk[t].call(n,r):s}class Ip extends Rr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new ck(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=T$(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=qt(r,"beforeTitle",this,t),i=qt(r,"title",this,t),o=qt(r,"afterTitle",this,t);let l=[];return l=Xn(l,mr(s)),l=Xn(l,mr(i)),l=Xn(l,mr(o)),l}getBeforeBody(t,n){return Dw(qt(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,s=[];return Oe(t,i=>{const o={before:[],lines:[],after:[]},l=Tw(r,i);Xn(o.before,mr(qt(l,"beforeLabel",this,i))),Xn(o.lines,qt(l,"label",this,i)),Xn(o.after,mr(qt(l,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(t,n){return Dw(qt(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,s=qt(r,"beforeFooter",this,t),i=qt(r,"footer",this,t),o=qt(r,"afterFooter",this,t);let l=[];return l=Xn(l,mr(s)),l=Xn(l,mr(i)),l=Xn(l,mr(o)),l}_createItems(t){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(S$(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,r))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,r))),Oe(l,d=>{const h=Tw(t.callbacks,d);s.push(qt(h,"labelColor",this,d)),i.push(qt(h,"labelPointStyle",this,d)),o.push(qt(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=Sa[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=Nw(this,r),u=Object.assign({},l,c),d=kw(this.chart,r,u),h=Ew(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const i=this.getCaretPosition(t,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=ro(l),{x:f,y:m}=t,{width:p,height:g}=n;let y,b,v,w,S,j;return i==="center"?(S=m+g/2,s==="left"?(y=f,b=y-o,w=S+o,j=S-o):(y=f+p,b=y+o,w=S-o,j=S+o),v=y):(s==="left"?b=f+Math.max(c,d)+o:s==="right"?b=f+p-Math.max(u,h)-o:b=this.caretX,i==="top"?(w=m,S=w-o,y=b-o,v=b+o):(w=m+g,S=w+o,y=b+o,v=b-o),j=w),{x1:y,x2:b,x3:v,y1:w,y2:S,y3:j}}drawTitle(t,n,r){const s=this.title,i=s.length;let o,l,c;if(i){const u=so(r.rtl,this.x,this.width);for(t.x=Ac(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=At(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(s[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,n,r,s,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=i,d=At(i.bodyFont),h=Ac(this,"left",i),f=s.x(h),m=c<d.lineHeight?(d.lineHeight-c)/2:0,p=n.y+m;if(i.usePointStyle){const g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,b=p+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Tp(t,g,y,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Tp(t,g,y,b)}else{t.lineWidth=Ee(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const g=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),b=ro(o.borderRadius);Object.values(b).some(v=>v!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,td(t,{x:g,y:p,w:u,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),td(t,{x:y,y:p+1,w:u-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(g,p,u,c),t.strokeRect(g,p,u,c),t.fillStyle=o.backgroundColor,t.fillRect(y,p+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=At(r.bodyFont);let f=h.lineHeight,m=0;const p=so(r.rtl,this.x,this.width),g=function(C){n.fillText(C,p.x(t.x+m),t.y+f/2),t.y+=f+i},y=p.textAlign(o);let b,v,w,S,j,k,N;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=Ac(this,y,r),n.fillStyle=r.bodyColor,Oe(this.beforeBody,g),m=l&&y!=="right"?o==="center"?u/2+d:u+2+d:0,S=0,k=s.length;S<k;++S){for(b=s[S],v=this.labelTextColors[S],n.fillStyle=v,Oe(b.before,g),w=b.lines,l&&w.length&&(this._drawColorBox(n,t,S,p,r),f=Math.max(h.lineHeight,c)),j=0,N=w.length;j<N;++j)g(w[j]),f=h.lineHeight;Oe(b.after,g)}m=0,f=h.lineHeight,Oe(this.afterBody,g),t.y-=i}drawFooter(t,n,r){const s=this.footer,i=s.length;let o,l;if(i){const c=so(r.rtl,this.x,this.width);for(t.x=Ac(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=At(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=ro(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,r,s),n.lineTo(l+u-f,c),n.quadraticCurveTo(l+u,c,l+u,c+f),o==="center"&&i==="right"&&this.drawCaret(t,n,r,s),n.lineTo(l+u,c+d-p),n.quadraticCurveTo(l+u,c+d,l+u-p,c+d),o==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(l+m,c+d),n.quadraticCurveTo(l,c+d,l,c+d-m),o==="center"&&i==="left"&&this.drawCaret(t,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Sa[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Nw(this,t),c=Object.assign({},o,this._size),u=kw(n,t,c),d=Ew(t,c,u,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=_n(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(i,t,s,n),rk(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),sk(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Ju(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,r),l=this._positionChanged(o,t),c=n||!Ju(o,i)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,r,s){const i=this.options;if(t.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:r,caretY:s,options:i}=this,o=Sa[i.position].call(this,t,n);return o!==!1&&(r!==o.x||s!==o.y)}}ue(Ip,"positioners",Sa);var Qx={id:"tooltip",_element:Ip,positioners:Sa,afterInit(e,t,n){n&&(e.tooltip=new Ip({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Tk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const P$=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function _$(e,t,n,r){const s=e.indexOf(t);if(s===-1)return P$(e,t,n,r);const i=e.lastIndexOf(t);return s!==i?n:s}const A$=(e,t)=>e===null?null:_t(Math.round(e),0,t);function Pw(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class id extends Ao{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(Ae(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:_$(r,t,we(n,t),this._addedLabels),A$(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=t;o<=n;o++)s.push({value:o});return s}getLabelForValue(t){return Pw.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ue(id,"id","category"),ue(id,"defaults",{ticks:{callback:Pw}});function M$(e,t){const n=[],{bounds:s,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:f}=e,m=i||1,p=d-1,{min:g,max:y}=t,b=!Ae(o),v=!Ae(l),w=!Ae(u),S=(y-g)/(h+1);let j=Eb((y-g)/p/m)*m,k,N,C,E;if(j<1e-14&&!b&&!v)return[{value:g},{value:y}];E=Math.ceil(y/j)-Math.floor(g/j),E>p&&(j=Eb(E*j/p/m)*m),Ae(c)||(k=Math.pow(10,c),j=Math.ceil(j*k)/k),s==="ticks"?(N=Math.floor(g/j)*j,C=Math.ceil(y/j)*j):(N=g,C=y),b&&v&&i&&z3((l-o)/i,j/1e3)?(E=Math.round(Math.min((l-o)/j,d)),j=(l-o)/E,N=o,C=l):w?(N=b?o:N,C=v?l:C,E=u-1,j=(C-N)/E):(E=(C-N)/j,za(E,Math.round(E),j/1e3)?E=Math.round(E):E=Math.ceil(E));const D=Math.max(Db(j),Db(N));k=Math.pow(10,Ae(c)?D:c),N=Math.round(N*k)/k,C=Math.round(C*k)/k;let $=0;for(b&&(f&&N!==o?(n.push({value:o}),N<o&&$++,za(Math.round((N+$*j)*k)/k,o,_w(o,S,e))&&$++):N<o&&$++);$<E;++$){const B=Math.round((N+$*j)*k)/k;if(v&&B>l)break;n.push({value:B})}return v&&f&&C!==l?n.length&&za(n[n.length-1].value,l,_w(l,S,e))?n[n.length-1].value=l:n.push({value:l}):(!v||C===l)&&n.push({value:C}),n}function _w(e,t,{horizontal:n,minRotation:r}){const s=jr(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class I$ extends Ao{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return Ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=c=>s=n?s:c,l=c=>i=r?i:c;if(t){const c=or(s),u=or(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(s-c)}this.min=s,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=M$(s,i);return t.bounds==="ticks"&&B3(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return $x(t,this.chart.options.locale,this.options.ticks.format)}}class od extends I${determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ot(t)?t:0,this.max=Ot(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=jr(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ue(od,"id","linear"),ue(od,"defaults",{ticks:{callback:Q2.formatters.numeric}});const lh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yt=Object.keys(lh);function Aw(e,t){return e-t}function Mw(e,t){if(Ae(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:i}=e._parseOpts;let o=t;return typeof r=="function"&&(o=r(o)),Ot(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(vl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Iw(e,t,n,r){const s=Yt.length;for(let i=Yt.indexOf(e);i<s-1;++i){const o=lh[Yt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=r)return Yt[i]}return Yt[s-1]}function O$(e,t,n,r,s){for(let i=Yt.length-1;i>=Yt.indexOf(n);i--){const o=Yt[i];if(lh[o].common&&e._adapter.diff(s,r,o)>=t-1)return o}return Yt[n?Yt.indexOf(n):0]}function R$(e){for(let t=Yt.indexOf(e)+1,n=Yt.length;t<n;++t)if(lh[Yt[t]].common)return Yt[t]}function Ow(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=Rx(n,t),i=n[r]>=t?n[r]:n[s];e[i]=!0}}function L$(e,t,n,r){const s=e._adapter,i=+s.startOf(t[0].value,r),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+s.add(l,1,r))c=n[l],c>=0&&(t[c].major=!0);return t}function Rw(e,t,n){const r=[],s={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],s[l]=o,r.push({value:l,major:!1});return i===0||!n?r:L$(e,r,s,n)}class ad extends Ao{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),s=this._adapter=new SF._date(t.adapters.date);s.init(n),$a(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Mw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=Ot(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ot(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,l=q3(s,i,o);return this._unit=n.unit||(r.autoSkip?Iw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):O$(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:R$(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),Rw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,s,i;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?r=i:r=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=_t(n,0,o),r=_t(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Iw(i.minUnit,n,r,this._getLabelCapacity(n)),l=we(s.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=vl(c)||c===!0,d={};let h=n,f,m;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":o),t.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<r;f=+t.add(f,l,o),m++)Ow(d,f,p);return(f===r||s.bounds==="ticks"||m===1)&&Ow(d,f,p),Object.keys(d).sort(Aw).map(g=>+g)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Be(o,[t,n,r],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=r[n],m=u&&h&&f&&f.major;return this._adapter.format(t,s||(m?h:d))}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=jr(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(t,0,Rw(this,[t],this._majorUnit),s),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(Mw(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return q2(t.sort(Aw))}}ue(ad,"id","time"),ue(ad,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Mc(e,t,n){let r=0,s=e.length-1,i,o,l,c;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=Zs(e,"pos",t)),{pos:i,time:l}=e[r],{pos:o,time:c}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=Zs(e,"time",t)),{time:i,pos:l}=e[r],{time:o,pos:c}=e[s]);const u=o-i;return u?l+(c-l)*(t-i)/u:l}class Lw extends ad{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Mc(n,this.min),this._tableRange=Mc(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],i=[];let o,l,c,u,d;for(o=0,l=t.length;o<l;++o)u=t[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)d=s[o+1],c=s[o-1],u=s[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Mc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return Mc(this._table,r*this._tableRange+this._minPos,!0)}}ue(Lw,"id","timeseries"),ue(Lw,"defaults",ad.defaults);const Pk="label";function Fw(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function F$(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function _k(e,t){e.labels=t}function Ak(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pk;const r=[];e.datasets=t.map(s=>{const i=e.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function $$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pk;const n={labels:[],datasets:[]};return _k(n,e.labels),Ak(n,e.datasets,t),n}function z$(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...f}=e,m=x.useRef(null),p=x.useRef(null),g=()=>{m.current&&(p.current=new Mo(m.current,{type:o,data:$$(l,i),options:c&&{...c},plugins:u}),Fw(t,p.current))},y=()=>{Fw(t,null),p.current&&(p.current.destroy(),p.current=null)};return x.useEffect(()=>{!s&&p.current&&c&&F$(p.current,c)},[s,c]),x.useEffect(()=>{!s&&p.current&&_k(p.current.config.data,l.labels)},[s,l.labels]),x.useEffect(()=>{!s&&p.current&&l.datasets&&Ak(p.current.config.data,l.datasets,i)},[s,l.datasets]),x.useEffect(()=>{p.current&&(s?(y(),setTimeout(g)):p.current.update(h))},[s,c,l.labels,l.datasets,h]),x.useEffect(()=>{p.current&&(y(),setTimeout(g))},[o]),x.useEffect(()=>(g(),()=>y()),[]),se.createElement("canvas",{ref:m,role:"img",height:n,width:r,...f},d)}const B$=x.forwardRef(z$);function Kx(e,t){return Mo.register(t),x.forwardRef((n,r)=>se.createElement(B$,{...n,ref:r,type:e}))}const V$=Kx("line",lu),U$=Kx("bar",au),W$=Kx("doughnut",ba);Mo.register(id,od,hu,Dk,Qx,Yx,Gx);function Mk({data:e,options:t,height:n=300}){const s={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}}},...t};return a.jsx("div",{style:{height:`${n}px`,width:"100%"},children:a.jsx(U$,{data:e,options:s})})}Mo.register(id,od,du,ns,Dk,Qx,Yx,Gx);function H$({data:e,options:t,height:n=300}){const s={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:10,usePointStyle:!0}}},scales:{y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}},x:{grid:{display:!1},ticks:{font:{size:11}}}},elements:{line:{tension:.3},point:{radius:3,hoverRadius:5}}},...t};return a.jsx("div",{style:{height:`${n}px`,width:"100%"},children:a.jsx(V$,{data:e,options:s})})}Mo.register(ja,Qx,Yx,Gx);function q$({data:e,options:t,height:n=250}){const s={...{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,padding:15,font:{size:12}}},tooltip:{callbacks:{label:function(i){const o=i.label||"",l=i.raw,c=i.chart.data.datasets[0].data.reduce((d,h)=>d+h,0),u=Math.round(l/c*100);return`${o}: ${l} (${u}%)`}}}},cutout:"60%"},...t};return a.jsx("div",{style:{height:`${n}px`,width:"100%"},children:a.jsx(W$,{data:e,options:s})})}const G$=x.memo(H$),Y$=x.memo(Mk),Q$=x.memo(q$);function Pf(){const{user:e,isAuthenticated:t}=qe(),[n,r]=x.useState([]),[s,i]=x.useState([]),[o,l]=x.useState(0),[c,u]=x.useState(0),[d,h]=x.useState(!0),[f,m]=x.useState([]),[p,g]=x.useState([]),[y,b]=x.useState(null);x.useEffect(()=>{(async()=>{if(!t||!e){console.log("⏸️ Skipping data fetch - user not authenticated"),h(!1);return}try{console.log("🔄 AdminDashboard: Starting data fetch..."),b(null);const[C,E,D,$,B]=await Promise.all([Vl().catch(I=>(console.error("Leads error:",I),[])),th().catch(I=>(console.error("Jobs error:",I),[])),_x().catch(I=>(console.error("Equipment error:",I),[])),Ul().catch(I=>(console.error("Operators error:",I),[])),nh().catch(I=>(console.error("Deals error:",I),[]))]),F=I=>Array.isArray(I)?I:I&&typeof I=="object"&&I.data&&Array.isArray(I.data)||I&&typeof I=="object"&&I.success&&Array.isArray(I.data)?I.data:[],T=F(C),A=F(E),z=F(D),M=F($),P=F(B);r(T),i(A),l(z.length),u(M.length),m(z),g(P)}catch(C){console.error("❌ Error fetching dashboard data:",C),b(`Failed to load dashboard data: ${(C==null?void 0:C.message)||C}`)}finally{h(!1)}})()},[t,e]);const v=x.useMemo(()=>{try{if(Array.isArray(p)&&p.length>0)return p.filter(N=>N&&N.stage==="won").reduce((N,C)=>N+(C.value||0),0)}catch(N){console.error("Error calculating revenue:",N)}return 0},[p]),w=x.useMemo(()=>Array.isArray(s)?s.filter(N=>N.status==="in_progress"||N.status==="scheduled").length/(o||1)*100:0,[s,o]),S=x.useMemo(()=>({labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Monthly Revenue",data:[15e4,2e5,18e4,22e4,25e4,v>0?v:3e5],backgroundColor:"rgba(56, 81, 159, 0.1)",borderColor:"#38519F",pointBackgroundColor:"#FFCC3F",pointBorderColor:"#38519F",pointHoverBackgroundColor:"#38519F",pointHoverBorderColor:"#FFCC3F",borderWidth:3,tension:.4,fill:!0}]}),[v]),j=x.useMemo(()=>({labels:["Available","In Use","Maintenance"],datasets:[{data:[Array.isArray(f)?f.filter(N=>N.status==="available").length:0,Array.isArray(f)?f.filter(N=>N.status==="in_use").length:0,Array.isArray(f)?f.filter(N=>N.status==="maintenance").length:0],backgroundColor:["#22C55E","#38519F","#FFCC3F"],borderColor:["#16A34A","#38519F","#FFCC3F"],borderWidth:2,hoverBorderWidth:4}]}),[f]),k=x.useMemo(()=>({labels:["Scheduled","In Progress","Completed","Cancelled"],datasets:[{label:"Jobs by Status",data:[Array.isArray(s)?s.filter(N=>N.status==="scheduled").length:0,Array.isArray(s)?s.filter(N=>N.status==="in_progress").length:0,Array.isArray(s)?s.filter(N=>N.status==="completed").length:0,Array.isArray(s)?s.filter(N=>N.status==="cancelled").length:0],backgroundColor:["rgba(56, 81, 159, 0.8)","rgba(34, 197, 94, 0.8)","rgba(64, 64, 64, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["#38519F","#22C55E","#404040","#EF4444"],borderWidth:2,borderRadius:8}]}),[s]);return d?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:a.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-20 w-20 border-4 border-brand-blue/20 border-t-brand-blue rounded-full animate-spin"}),a.jsx("div",{className:"absolute inset-0 h-20 w-20 border-4 border-transparent border-t-brand-gold rounded-full animate-spin animate-reverse",style:{animationDelay:"0.2s",animationDuration:"1.5s"}})]}),a.jsxs("div",{className:"mt-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-brand-blue",children:"Loading Dashboard"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Fetching your data..."})]})]})}):y?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20 p-6",children:a.jsx("div",{className:"flex justify-center py-20",children:a.jsx(ce,{variant:"bordered",className:"max-w-md bg-red-50 border-red-200",children:a.jsxs(me,{className:"text-center p-8",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(kM,{className:"w-8 h-8 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Error Loading Dashboard"}),a.jsx("p",{className:"text-red-600 mb-6",children:y}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry"})]})})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-indigo-50/20",children:a.jsxs("div",{className:"p-6 space-y-8",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-brand-blue to-brand-blue/80 bg-clip-text text-transparent",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Here's what's happening with your business today."})]}),a.jsx("div",{className:"hidden md:flex items-center space-x-4",children:a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Last updated"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleTimeString()})]})})]})}),a.jsxs("section",{className:"grid gap-6 auto-fit-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},role:"region","aria-label":"Key Performance Indicators",children:[a.jsx(Bt,{title:"Total Revenue",value:Ve(v),icon:a.jsx(nr,{className:"h-5 w-5"}),variant:"primary",trend:{value:12.5,isPositive:!0},loading:d}),a.jsx(Bt,{title:"Equipment Fleet",value:o,subtitle:"Active units",icon:a.jsx(Ut,{className:"h-5 w-5"}),variant:"success",trend:{value:8.2,isPositive:!0},loading:d}),a.jsx(Bt,{title:"Active Jobs",value:s.length,subtitle:"In progress",icon:a.jsx(WA,{className:"h-5 w-5"}),variant:"warning",trend:{value:3.1,isPositive:!1},loading:d}),a.jsx(Bt,{title:"Operators",value:c,subtitle:"Available staff",icon:a.jsx(en,{className:"h-5 w-5"}),variant:"accent",trend:{value:5.7,isPositive:!0},loading:d})]}),a.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",role:"region","aria-label":"Analytics Charts",children:[a.jsxs(ce,{variant:"glass",className:"col-span-1",children:[a.jsx(ge,{className:"flex flex-row items-center space-y-0 pb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(bM,{className:"h-4 w-4 text-green-600"})}),a.jsx(xe,{className:"text-lg",children:"Equipment Status"})]})}),a.jsx(me,{children:a.jsx("div",{className:"h-64",children:a.jsx(Q$,{data:j,height:240})})})]}),a.jsxs(ce,{variant:"glass",className:"col-span-1",children:[a.jsx(ge,{className:"flex flex-row items-center space-y-0 pb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(hp,{className:"h-4 w-4 text-blue-600"})}),a.jsx(xe,{className:"text-lg",children:"Monthly Revenue"})]})}),a.jsx(me,{children:a.jsx("div",{className:"h-64",children:a.jsx(G$,{data:S,height:240})})})]}),a.jsxs(ce,{variant:"glass",className:"col-span-1",children:[a.jsx(ge,{className:"flex flex-row items-center space-y-0 pb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(OC,{className:"h-4 w-4 text-purple-600"})}),a.jsx(xe,{className:"text-lg",children:"Jobs by Status"})]})}),a.jsx(me,{children:a.jsx("div",{className:"h-64",children:a.jsx(Y$,{data:k,height:240})})})]})]}),a.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(o3,{className:"h-full"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ce,{variant:"gradient",className:"h-fit",children:[a.jsx(ge,{className:"flex flex-row items-center space-y-0 pb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-2 bg-brand-blue/10 rounded-lg",children:a.jsx(Ut,{className:"h-4 w-4 text-brand-blue"})}),a.jsx(xe,{className:"text-lg",children:"Equipment Summary"})]})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Available Equipment:"}),a.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(f)?f.filter(N=>N.status==="available").length:0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"In Use:"}),a.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Array.isArray(f)?f.filter(N=>N.status==="in_use").length:0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Under Maintenance:"}),a.jsx("span",{className:"text-sm font-semibold text-orange-600",children:Array.isArray(f)?f.filter(N=>N.status==="maintenance").length:0})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Utilization Rate:"}),a.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[o>0?Math.round(w):0,"%"]})]})})]})})]}),a.jsxs(ce,{variant:"gradient",className:"h-fit",children:[a.jsx(ge,{className:"flex flex-row items-center space-y-0 pb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-2 bg-brand-gold/10 rounded-lg",children:a.jsx(hp,{className:"h-4 w-4 text-brand-gold"})}),a.jsx(xe,{className:"text-lg",children:"Business Overview"})]})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads:"}),a.jsx("span",{className:"text-sm font-semibold text-blue-600",children:n.length})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Active Deals:"}),a.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.length:0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Won Deals:"}),a.jsx("span",{className:"text-sm font-semibold text-green-600",children:Array.isArray(p)?p.filter(N=>N.stage==="won").length:0})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate:"}),a.jsxs("span",{className:"text-sm font-semibold text-brand-blue",children:[n.length>0?Math.round((Array.isArray(p)?p.length:0)/n.length*100):0,"%"]})]})})]})})]})]})]})]})})}const Xx="-",K$=e=>{const t=J$(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(Xx);return l[0]===""&&l.length!==1&&l.shift(),Ik(l,t)||X$(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Ik=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Ik(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Xx);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},$w=/^\[(.+)\]$/,X$=e=>{if($w.test(e)){const t=$w.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},J$=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Op(n[s],r,s,t);return r},Op=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:zw(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(Z$(s)){Op(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Op(o,zw(t,i),n,r)})})},zw=(e,t)=>{let n=e;return t.split(Xx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Z$=e=>e.isThemeGetter,ez=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},Rp="!",Lp=":",tz=Lp.length,nz=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const i=[];let o=0,l=0,c=0,u;for(let p=0;p<s.length;p++){let g=s[p];if(o===0&&l===0){if(g===Lp){i.push(s.slice(c,p)),c=p+tz;continue}if(g==="/"){u=p;continue}}g==="["?o++:g==="]"?o--:g==="("?l++:g===")"&&l--}const d=i.length===0?s:s.substring(c),h=rz(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const s=t+Lp,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},rz=e=>e.endsWith(Rp)?e.substring(0,e.length-1):e.startsWith(Rp)?e.substring(1):e,sz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},iz=e=>({cache:ez(e.cacheSize),parseClassName:nz(e),sortModifiers:sz(e),...K$(e)}),oz=/\s+/,az=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(oz);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(d);if(h){c=d+(c.length>0?" "+c:c);continue}let y=!!g,b=r(y?p.substring(0,g):p);if(!b){if(!y){c=d+(c.length>0?" "+c:c);continue}if(b=r(p),!b){c=d+(c.length>0?" "+c:c);continue}y=!1}const v=i(f).join(":"),w=m?v+Rp:v,S=w+b;if(o.includes(S))continue;o.push(S);const j=s(b,y);for(let k=0;k<j.length;++k){const N=j[k];o.push(w+N)}c=d+(c.length>0?" "+c:c)}return c};function lz(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Ok(t))&&(r&&(r+=" "),r+=n);return r}const Ok=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ok(e[r]))&&(n&&(n+=" "),n+=t);return n};function cz(e,...t){let n,r,s,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=iz(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=az(c,n);return s(c,d),d}return function(){return i(lz.apply(null,arguments))}}const ht=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Rk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Lk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uz=/^\d+\/\d+$/,dz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,mz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pi=e=>uz.test(e),Se=e=>!!e&&!Number.isNaN(Number(e)),zr=e=>!!e&&Number.isInteger(Number(e)),_f=e=>e.endsWith("%")&&Se(e.slice(0,-1)),hr=e=>dz.test(e),gz=()=>!0,xz=e=>hz.test(e)&&!fz.test(e),Fk=()=>!1,yz=e=>mz.test(e),vz=e=>pz.test(e),bz=e=>!de(e)&&!he(e),wz=e=>Io(e,Bk,Fk),de=e=>Rk.test(e),Ls=e=>Io(e,Vk,xz),Af=e=>Io(e,kz,Se),Bw=e=>Io(e,$k,Fk),jz=e=>Io(e,zk,vz),Ic=e=>Io(e,Uk,yz),he=e=>Lk.test(e),sa=e=>Oo(e,Vk),Sz=e=>Oo(e,Ez),Vw=e=>Oo(e,$k),Cz=e=>Oo(e,Bk),Nz=e=>Oo(e,zk),Oc=e=>Oo(e,Uk,!0),Io=(e,t,n)=>{const r=Rk.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Oo=(e,t,n=!1)=>{const r=Lk.exec(e);return r?r[1]?t(r[1]):n:!1},$k=e=>e==="position"||e==="percentage",zk=e=>e==="image"||e==="url",Bk=e=>e==="length"||e==="size"||e==="bg-size",Vk=e=>e==="length",kz=e=>e==="number",Ez=e=>e==="family-name",Uk=e=>e==="shadow",Dz=()=>{const e=ht("color"),t=ht("font"),n=ht("text"),r=ht("font-weight"),s=ht("tracking"),i=ht("leading"),o=ht("breakpoint"),l=ht("container"),c=ht("spacing"),u=ht("radius"),d=ht("shadow"),h=ht("inset-shadow"),f=ht("text-shadow"),m=ht("drop-shadow"),p=ht("blur"),g=ht("perspective"),y=ht("aspect"),b=ht("ease"),v=ht("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],j=()=>[...S(),he,de],k=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],C=()=>[he,de,c],E=()=>[Pi,"full","auto",...C()],D=()=>[zr,"none","subgrid",he,de],$=()=>["auto",{span:["full",zr,he,de]},zr,he,de],B=()=>[zr,"auto",he,de],F=()=>["auto","min","max","fr",he,de],T=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],A=()=>["start","end","center","stretch","center-safe","end-safe"],z=()=>["auto",...C()],M=()=>[Pi,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],P=()=>[e,he,de],I=()=>[...S(),Vw,Bw,{position:[he,de]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",Cz,wz,{size:[he,de]}],ee=()=>[_f,sa,Ls],ie=()=>["","none","full",u,he,de],V=()=>["",Se,sa,Ls],X=()=>["solid","dashed","dotted","double"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>[Se,_f,Vw,Bw],W=()=>["","none",p,he,de],Y=()=>["none",Se,he,de],oe=()=>["none",Se,he,de],_=()=>[Se,he,de],L=()=>[Pi,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[hr],breakpoint:[hr],color:[gz],container:[hr],"drop-shadow":[hr],ease:["in","out","in-out"],font:[bz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[hr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[hr],shadow:[hr],spacing:["px",Se],text:[hr],"text-shadow":[hr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pi,de,he,y]}],container:["container"],columns:[{columns:[Se,de,he,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:j()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:E()}],"inset-x":[{"inset-x":E()}],"inset-y":[{"inset-y":E()}],start:[{start:E()}],end:[{end:E()}],top:[{top:E()}],right:[{right:E()}],bottom:[{bottom:E()}],left:[{left:E()}],visibility:["visible","invisible","collapse"],z:[{z:[zr,"auto",he,de]}],basis:[{basis:[Pi,"full","auto",l,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Se,Pi,"auto","initial","none",de]}],grow:[{grow:["",Se,he,de]}],shrink:[{shrink:["",Se,he,de]}],order:[{order:[zr,"first","last","none",he,de]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...T(),"normal"]}],"justify-items":[{"justify-items":[...A(),"normal"]}],"justify-self":[{"justify-self":["auto",...A()]}],"align-content":[{content:["normal",...T()]}],"align-items":[{items:[...A(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...A(),{baseline:["","last"]}]}],"place-content":[{"place-content":T()}],"place-items":[{"place-items":[...A(),"baseline"]}],"place-self":[{"place-self":["auto",...A()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:z()}],mx:[{mx:z()}],my:[{my:z()}],ms:[{ms:z()}],me:[{me:z()}],mt:[{mt:z()}],mr:[{mr:z()}],mb:[{mb:z()}],ml:[{ml:z()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:M()}],w:[{w:[l,"screen",...M()]}],"min-w":[{"min-w":[l,"screen","none",...M()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...M()]}],h:[{h:["screen","lh",...M()]}],"min-h":[{"min-h":["screen","lh","none",...M()]}],"max-h":[{"max-h":["screen","lh",...M()]}],"font-size":[{text:["base",n,sa,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,he,Af]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",_f,de]}],"font-family":[{font:[Sz,de,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,he,de]}],"line-clamp":[{"line-clamp":[Se,"none",he,Af]}],leading:[{leading:[i,...C()]}],"list-image":[{"list-image":["none",he,de]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",he,de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:[Se,"from-font","auto",he,Ls]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[Se,"auto",he,de]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he,de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he,de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zr,he,de],radial:["",he,de],conic:[zr,he,de]},Nz,jz]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...X(),"hidden","none"]}],"divide-style":[{divide:[...X(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...X(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Se,he,de]}],"outline-w":[{outline:["",Se,sa,Ls]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",d,Oc,Ic]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",h,Oc,Ic]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[Se,Ls]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",f,Oc,Ic]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[Se,he,de]}],"mix-blend":[{"mix-blend":[...U(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":U()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Se]}],"mask-image-linear-from-pos":[{"mask-linear-from":O()}],"mask-image-linear-to-pos":[{"mask-linear-to":O()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":O()}],"mask-image-t-to-pos":[{"mask-t-to":O()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":O()}],"mask-image-r-to-pos":[{"mask-r-to":O()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":O()}],"mask-image-b-to-pos":[{"mask-b-to":O()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":O()}],"mask-image-l-to-pos":[{"mask-l-to":O()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":O()}],"mask-image-x-to-pos":[{"mask-x-to":O()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":O()}],"mask-image-y-to-pos":[{"mask-y-to":O()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[he,de]}],"mask-image-radial-from-pos":[{"mask-radial-from":O()}],"mask-image-radial-to-pos":[{"mask-radial-to":O()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[Se]}],"mask-image-conic-from-pos":[{"mask-conic-from":O()}],"mask-image-conic-to-pos":[{"mask-conic-to":O()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",he,de]}],filter:[{filter:["","none",he,de]}],blur:[{blur:W()}],brightness:[{brightness:[Se,he,de]}],contrast:[{contrast:[Se,he,de]}],"drop-shadow":[{"drop-shadow":["","none",m,Oc,Ic]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",Se,he,de]}],"hue-rotate":[{"hue-rotate":[Se,he,de]}],invert:[{invert:["",Se,he,de]}],saturate:[{saturate:[Se,he,de]}],sepia:[{sepia:["",Se,he,de]}],"backdrop-filter":[{"backdrop-filter":["","none",he,de]}],"backdrop-blur":[{"backdrop-blur":W()}],"backdrop-brightness":[{"backdrop-brightness":[Se,he,de]}],"backdrop-contrast":[{"backdrop-contrast":[Se,he,de]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Se,he,de]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Se,he,de]}],"backdrop-invert":[{"backdrop-invert":["",Se,he,de]}],"backdrop-opacity":[{"backdrop-opacity":[Se,he,de]}],"backdrop-saturate":[{"backdrop-saturate":[Se,he,de]}],"backdrop-sepia":[{"backdrop-sepia":["",Se,he,de]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",he,de]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Se,"initial",he,de]}],ease:[{ease:["linear","initial",b,he,de]}],delay:[{delay:[Se,he,de]}],animate:[{animate:["none",v,he,de]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,he,de]}],"perspective-origin":[{"perspective-origin":j()}],rotate:[{rotate:Y()}],"rotate-x":[{"rotate-x":Y()}],"rotate-y":[{"rotate-y":Y()}],"rotate-z":[{"rotate-z":Y()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:_()}],"skew-x":[{"skew-x":_()}],"skew-y":[{"skew-y":_()}],transform:[{transform:[he,de,"","none","gpu","cpu"]}],"transform-origin":[{origin:j()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:L()}],"translate-x":[{"translate-x":L()}],"translate-y":[{"translate-y":L()}],"translate-z":[{"translate-z":L()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he,de]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he,de]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[Se,sa,Ls,Af]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Tz=cz(Dz);function Pz(...e){return Tz(A2(e))}function Hl({status:e,className:t}){const n=r=>{switch(r){case"new":return"bg-blue-100 text-blue-800";case"contacted":return"bg-yellow-100 text-yellow-800";case"qualified":return"bg-purple-100 text-purple-800";case"lost":return"bg-red-100 text-red-800";case"converted":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";case"sent":return"bg-blue-100 text-blue-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return a.jsx("span",{className:Pz("inline-flex items-center px-2 sm:px-2.5 py-0.5 rounded-full text-[10px] sm:text-xs font-medium whitespace-nowrap",n(e),t),children:(e||"").replace("_"," ")})}async function _z(e,t){const r=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"PUT",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update quotation");const s=await r.json();return s.data||s}async function Wk(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations/${e}`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotation by ID");const r=await n.json();return r.data||r}async function Az(e){const n=await fetch("http://103.224.243.242:3001/api/quotations",{method:"POST",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create quotation");const r=await n.json();return r.data||r}async function Mz(){const t=await fetch("http://103.224.243.242:3001/api/quotations",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw new Error("Failed to fetch quotations");const n=await t.json();return Array.isArray(n)?n:n&&Array.isArray(n.data)?n.data:[]}async function ld(e){const n=await fetch(`http://103.224.243.242:3001/api/quotations?leadId=${encodeURIComponent(e)}`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch quotations");return await n.json()}const Iz=_o("w-full mb-1 flex items-center justify-center rounded-md transition-all",{variants:{position:{first:"rounded-t-lg",middle:"",last:"rounded-b-lg"}},defaultVariants:{position:"middle"}});function Oz({stages:e,height:t=250}){const n=Math.max(...e.map(s=>s.value)),r=e.reduce((s,i)=>s+i.value,0);return a.jsx("div",{className:"w-full flex flex-col items-center",style:{height:`${t}px`},children:e.map((s,i)=>{const o=n===0?40:Math.max(40,Math.min(100,s.value/n*100)),l=r===0?0:Math.round(s.value/r*100),c=i===0?"first":i===e.length-1?"last":"middle";return a.jsxs("div",{className:"w-full flex flex-col items-center",style:{width:`${o}%`},children:[a.jsx("div",{className:Iz({position:c}),style:{backgroundColor:s.color||"#6366F1",height:`${Math.max(25,60/e.length)}px`},children:a.jsx("span",{className:"text-white text-xs font-medium",children:s.value})}),a.jsxs("div",{className:"mt-1 mb-3 text-xs text-gray-600 text-center flex flex-col items-center",children:[a.jsx("span",{className:"font-medium text-gray-800",children:s.label}),a.jsxs("span",{children:[l,"%"]})]})]},s.label)})})}function Rz(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const g=await Vl(),b=(w=>Array.isArray(w)?w:w&&typeof w=="object"&&w.data&&Array.isArray(w.data)||w&&typeof w=="object"&&w.success&&Array.isArray(w.data)?w.data:[])(g);t(b);const v=b.filter(w=>w.status==="converted");if(v.length>0){const w=v[0],S=await ld(w.id);r(S)}}catch(g){console.error("Error fetching dashboard data:",g),t([]),r([])}finally{i(!1)}})()},[]);const o=Array.isArray(e)?e.filter(p=>p.status==="new").length:0,l=Array.isArray(e)?e.filter(p=>p.status==="in_process").length:0,c=Array.isArray(e)?e.filter(p=>p.status==="qualified").length:0,u=Array.isArray(e)?e.filter(p=>p.status==="converted").length:0,d=Array.isArray(n)?n.reduce((p,g)=>p+g.totalRent,0):0,h=Array.isArray(e)?[...e].sort((p,g)=>new Date(g.createdAt).getTime()-new Date(p.createdAt).getTime()).slice(0,5):[],f=[{label:"New",value:o,color:"#93C5FD"},{label:"In Process",value:l,color:"#60A5FA"},{label:"Qualified",value:c,color:"#3B82F6"},{label:"Converted",value:u,color:"#2563EB"}],m={labels:["Mon","Tue","Wed","Thu","Fri"],datasets:[{label:"New Leads",data:[4,6,2,8,5],backgroundColor:"rgba(99, 102, 241, 0.6)"}]};return s?a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Bt,{title:"New Leads",value:o,icon:a.jsx(J0,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),a.jsx(Bt,{title:"In Process",value:l,icon:a.jsx(en,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),a.jsx(Bt,{title:"Qualified Leads",value:c,icon:a.jsx(J0,{className:"h-5 w-5 text-success-600"}),variant:"success"}),a.jsx(Bt,{title:"Quotation Value",value:Ve(d),icon:a.jsx(nr,{className:"h-5 w-5 text-accent-600"}),variant:"accent"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Lead Conversion Funnel"})}),a.jsx(me,{className:"flex justify-center",children:a.jsx(Oz,{stages:f,height:250})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Weekly Lead Generation"})}),a.jsx(me,{children:a.jsx(Mk,{data:m,height:250})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(xe,{children:"Recent Leads"}),a.jsx(er,{to:"/leads",className:"text-sm font-medium text-primary-600 hover:text-primary-800",children:"View All Leads"})]})}),a.jsx(me,{children:h.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads found"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:p.customerName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:p.serviceNeeded})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Hl,{status:p.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt).toLocaleDateString()})]},p.id))})]})})})]})}),a.jsx("div",{children:a.jsxs(ce,{className:"h-full",children:[a.jsx(ge,{children:a.jsx(xe,{children:"Upcoming Tasks"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 border border-blue-100 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(FC,{className:"h-5 w-5 text-primary-500"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Prepare Quotation"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"BuildRight Inc. requires updated pricing by tomorrow"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-green-50 border border-green-100 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(JA,{className:"h-5 w-5 text-green-500"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Client Meeting"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Harbor Construction - 2:30 PM Tomorrow"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-amber-50 border border-amber-100 rounded-md",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(OC,{className:"h-5 w-5 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Monthly Report"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Submit sales summary by end of week"})]})]})]})})]})})]})]})}const Lz=_o("inline-flex items-center justify-center font-medium transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden",{variants:{variant:{default:"bg-gradient-to-r from-brand-blue to-brand-blue/90 text-white shadow-lg hover:shadow-xl hover:shadow-brand-blue/25 hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg hover:shadow-xl hover:shadow-red-500/25 hover:scale-[1.02] focus:ring-red-500/30 active:scale-[0.98]",outline:"border-2 border-brand-blue text-brand-blue bg-transparent hover:bg-brand-blue hover:text-white hover:scale-[1.02] focus:ring-brand-blue/30 active:scale-[0.98]",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-900 shadow-sm hover:shadow-md hover:from-gray-200 hover:to-gray-300 hover:scale-[1.02] focus:ring-gray-400/30 active:scale-[0.98]",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-gray-400/30 hover:scale-[1.02] active:scale-[0.98]",link:"text-brand-blue underline-offset-4 hover:underline hover:text-brand-blue/80 focus:ring-brand-blue/30",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:shadow-green-500/25 hover:scale-[1.02] focus:ring-green-500/30 active:scale-[0.98]",warning:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg hover:shadow-xl hover:shadow-amber-500/25 hover:scale-[1.02] focus:ring-amber-500/30 active:scale-[0.98]",gradient:"bg-gradient-to-r from-brand-blue via-purple-600 to-brand-blue text-white shadow-lg hover:shadow-xl hover:shadow-purple-500/25 hover:scale-[1.02] focus:ring-purple-500/30 active:scale-[0.98]",accent:"bg-gradient-to-r from-brand-gold via-brand-gold to-brand-gold/95 text-brand-dark shadow-xl hover:shadow-2xl hover:shadow-brand-gold/40 hover:scale-[1.05] hover:from-brand-gold/90 hover:to-brand-gold hover:brightness-110 focus:ring-brand-gold/50 active:scale-[0.98] font-semibold transform"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs rounded-lg",default:"h-10 px-4 py-2 text-sm rounded-lg",lg:"h-12 px-6 text-base rounded-xl",xl:"h-14 px-8 text-lg rounded-xl",icon:"h-10 w-10 rounded-lg","icon-xs":"h-7 w-7 rounded-md","icon-sm":"h-8 w-8 rounded-lg","icon-lg":"h-12 w-12 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),q=x.memo(se.forwardRef(({className:e="",variant:t,size:n,leftIcon:r,rightIcon:s,isLoading:i=!1,loadingText:o,fullWidth:l=!1,disabled:c,children:u,asChild:d=!1,...h},f)=>{const m=Lz({variant:t,size:n}),p=l?"w-full":"",g=c||i,y=a.jsxs(a.Fragment,{children:[(t==="default"||t==="gradient")&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 ease-in-out"}),i?a.jsxs(a.Fragment,{children:[a.jsx(dM,{className:"w-4 h-4 animate-spin mr-2"}),o||"Loading..."]}):a.jsxs(a.Fragment,{children:[r&&a.jsx("span",{className:"mr-2 flex-shrink-0",children:r}),u,s&&a.jsx("span",{className:"ml-2 flex-shrink-0",children:s})]})]});return d?a.jsx("span",{className:`${m} ${p} ${e}`,children:y}):a.jsx("button",{className:`${m} ${p} ${e}`,ref:f,disabled:g,"aria-busy":i,...h,children:y})}));q.displayName="Button";const Fz=x.memo(se.forwardRef(({icon:e,className:t="",size:n="icon",...r},s)=>a.jsx(q,{ref:s,size:n,className:t,...r,children:e})));Fz.displayName="IconButton";const $z=x.memo(({children:e,className:t="",orientation:n="horizontal",size:r="default"})=>{const s=n==="horizontal"?"flex-row":"flex-col",i={sm:"space-x-2 space-y-0",default:"space-x-3 space-y-0",lg:"space-x-4 space-y-0"}[r];return a.jsx("div",{className:`flex ${s} ${i} ${t}`,role:"group",children:e})});$z.displayName="ButtonGroup";function zz(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(0),[o,l]=x.useState(0),[c,u]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const[f,m,p,g]=await Promise.all([Vl(),th(),_x(),Ul()]);t(f),r(m),i(p.length),l(g.length)}catch(f){console.error("Error fetching dashboard data:",f)}finally{u(!1)}})()},[]);const d=n.filter(h=>h.status==="scheduled").length;return c?a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Bt,{title:"Scheduled Jobs",value:d,icon:a.jsx(Hn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"}),a.jsx(Bt,{title:"Equipment",value:s,icon:a.jsx(Ut,{className:"h-5 w-5 text-accent-600"}),variant:"accent"}),a.jsx(Bt,{title:"Operators",value:o,icon:a.jsx(en,{className:"h-5 w-5 text-success-600"}),variant:"success"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(xe,{children:"Recent Won Leads"}),a.jsx(er,{to:"/jobs",children:a.jsx(q,{variant:"outline",size:"sm",children:"Schedule Jobs"})})]})}),a.jsx(me,{children:e.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leads to schedule"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice(0,5).map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:h.serviceNeeded})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:h.siteLocation})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(q,{size:"sm",children:"Schedule"})})]},h.id))})]})})})]})}),a.jsx("div",{children:a.jsxs(ce,{className:"h-full",children:[a.jsx(ge,{children:a.jsx(xe,{children:"Quick Actions"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-3",children:[a.jsx(er,{to:"/config/equipment",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(Ut,{size:16}),children:"Manage Equipment"})}),a.jsx(er,{to:"/config/operators",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(en,{size:16}),children:"Manage Operators"})}),a.jsx(er,{to:"/jobs",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(Hn,{size:16}),children:"View Job Calendar"})}),a.jsx(er,{to:"/feedback",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(ms,{size:16}),children:"Review Completed Jobs"})}),a.jsx(er,{to:"/config",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(LC,{size:16}),children:"System Configuration"})}),a.jsx(er,{to:"/config/maintenance",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,leftIcon:a.jsx(ax,{size:16}),children:"Schedule Maintenance"})})]})})]})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Recent Job Activity"})}),a.jsx(me,{children:n.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No recent job activity"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:h.customerName})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:h.location})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-500",children:new Date(h.scheduledStartDate).toLocaleDateString()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Hl,{status:h.status==="scheduled"?"pending":h.status})})]},h.id))})]})})})]})]})}const Bz=_o("pointer-events-auto relative w-full max-w-md overflow-hidden rounded-lg p-3 sm:p-4 shadow-xl border backdrop-blur-sm shadow-lg",{variants:{variant:{default:"bg-white/95 text-gray-900 border-gray-200",success:"bg-success-50/95 text-success-900 border-success-300",error:"bg-error-50/95 text-error-900 border-error-300",warning:"bg-warning-50/95 text-warning-900 border-warning-300",info:"bg-primary-50/95 text-primary-900 border-primary-300"}},defaultVariants:{variant:"default"}});function dt({className:e,variant:t,title:n,description:r,onClose:s,duration:i=5e3,isVisible:o=!0,...l}){const[c,u]=x.useState(o);x.useEffect(()=>{u(o)},[o]),x.useEffect(()=>{if(c&&i!==1/0){const f=setTimeout(()=>{u(!1),s==null||s()},i);return()=>clearTimeout(f)}},[c,i,s]);const d=()=>{u(!1),s==null||s()},h=()=>{switch(t){case"success":return a.jsx(ms,{className:"h-5 w-5 text-success-500"});case"error":return a.jsx(Ll,{className:"h-5 w-5 text-error-500"});case"warning":return a.jsx(vi,{className:"h-5 w-5 text-warning-500"});case"info":return a.jsx(Vu,{className:"h-5 w-5 text-primary-500"});default:return null}};return a.jsx(Px,{children:c&&a.jsx(Kr.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},transition:{duration:.3,type:"spring",stiffness:300,damping:25},className:"fixed bottom-6 sm:bottom-10 left-4 right-4 sm:left-auto sm:right-8 z-[9999] flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:`pointer-events-auto ${Bz({variant:t,className:e})}`,...l,children:a.jsxs("div",{className:"flex items-start",children:[t&&a.jsx("div",{className:"flex-shrink-0",children:h()}),a.jsxs("div",{className:`${t?"ml-2 sm:ml-3":""} flex-1 pt-0.5`,children:[a.jsx("p",{className:"text-sm font-medium",children:n}),r&&a.jsx("p",{className:"mt-0.5 text-xs sm:text-sm text-gray-600 line-clamp-3",children:r})]}),a.jsx("div",{className:"ml-2 sm:ml-4 flex flex-shrink-0",children:a.jsxs("button",{type:"button",className:"inline-flex rounded-md bg-transparent text-gray-400 hover:text-gray-500 focus:outline-none p-0.5",onClick:d,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(wi,{className:"h-4 w-4 sm:h-5 sm:w-5"})]})})]})})})})}function Vz(){const{user:e}=qe(),[t,n]=x.useState([]),[r,s]=x.useState({}),[i,o]=x.useState(!0),[l,c]=x.useState({show:!1,title:""});x.useEffect(()=>{(async()=>{if(e)try{const g=await v2(e.id);n(g);const y={};for(const b of g)if(!y[b.equipmentId]){const v=await b2(b.equipmentId);v&&(y[b.equipmentId]=v)}s(y)}catch(g){console.error("Error fetching operator data:",g)}finally{o(!1)}})()},[e]);const u=(p,g)=>{var y;n(b=>b.map(v=>v.id===p?{...v,status:g==="accept"?"accepted":g==="reject"?"rejected":"completed"}:v)),c({show:!0,title:g==="accept"?"Job Accepted":g==="reject"?"Job Rejected":"Job Completed",description:`Job for ${(y=t.find(b=>b.id===p))==null?void 0:y.customerName} has been ${g}ed.`,variant:g==="reject"?"warning":"success"}),setTimeout(()=>{c(b=>({...b,show:!1}))},3e3)},d=t.filter(p=>p.status==="scheduled").length,h=t.filter(p=>p.status==="accepted").length,f=t.filter(p=>p.status==="completed").length,m=t.filter(p=>p.status==="scheduled"||p.status==="accepted").sort((p,g)=>new Date(p.startDate).getTime()-new Date(g.startDate).getTime());return i?a.jsx("div",{className:"flex justify-center py-10",children:"Loading dashboard..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Bt,{title:"Scheduled Jobs",value:d,icon:a.jsx(Hn,{className:"h-5 w-5 text-primary-600"}),variant:"primary"}),a.jsx(Bt,{title:"Accepted Jobs",value:h,icon:a.jsx(ms,{className:"h-5 w-5 text-success-600"}),variant:"success"}),a.jsx(Bt,{title:"Completed Jobs",value:f,icon:a.jsx(qn,{className:"h-5 w-5 text-secondary-600"}),variant:"secondary"})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Upcoming Jobs"})}),a.jsx(me,{children:m.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No upcoming jobs"}):a.jsx("div",{className:"space-y-4",children:m.map(p=>{var g;return a.jsx(ce,{variant:"bordered",className:"overflow-hidden",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"p-4 md:p-6 flex-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:p.customerName}),a.jsx(Hl,{status:p.status})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Ut,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsx("span",{children:((g=r[p.equipmentId])==null?void 0:g.name)||"Equipment"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Hd,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsx("span",{children:p.location})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Hn,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsxs("span",{children:[new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(qn,{className:"mr-2 h-4 w-4 text-gray-400"}),a.jsxs("span",{children:[new Date(p.startDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," -",new Date(p.endDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),a.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 p-4 bg-gray-50 flex flex-row md:flex-col justify-center space-x-2 md:space-x-0 md:space-y-2",children:[p.status==="scheduled"&&a.jsxs(a.Fragment,{children:[a.jsx(q,{variant:"success",size:"sm",leftIcon:a.jsx(ms,{size:16}),onClick:()=>u(p.id,"accept"),children:"Accept"}),a.jsx(q,{variant:"destructive",size:"sm",leftIcon:a.jsx(Ll,{size:16}),onClick:()=>u(p.id,"reject"),children:"Reject"})]}),p.status==="accepted"&&a.jsx(q,{variant:"secondary",size:"sm",leftIcon:a.jsx(ms,{size:16}),onClick:()=>u(p.id,"complete"),children:"Mark Complete"}),p.status==="completed"&&a.jsx("p",{className:"text-sm text-gray-500 italic",children:"Completed"})]})]})},p.id)})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Equipment Assignment"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-4",children:[Object.values(r).map(p=>a.jsxs("div",{className:"flex items-start p-3 border rounded-md",children:[a.jsx(Ut,{className:"h-5 w-5 text-gray-500 mr-3 mt-1"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:p.description})]})]},p.id)),Object.keys(r).length===0&&a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No equipment assigned"})]})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Operator Information"})}),a.jsxs(me,{children:[a.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-md",children:[a.jsx("div",{className:"mr-4",children:a.jsx(sM,{className:"h-16 w-16 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-lg",children:e==null?void 0:e.name}),a.jsx("p",{className:"text-gray-500",children:e==null?void 0:e.email}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Specialization: Mobile & Tower Cranes"}),a.jsx("p",{className:"text-gray-500",children:"License: #CR-2023-456"})]})]}),a.jsx("div",{className:"mt-4",children:a.jsx(q,{variant:"outline",size:"sm",fullWidth:!0,children:"Update Profile"})})]})]})]}),l.show&&a.jsx(dt,{title:l.title,description:l.description,variant:l.variant,isVisible:l.show,onClose:()=>c(p=>({...p,show:!1}))})]})}function ke({label:e,error:t,className:n="",leftIcon:r,rightIcon:s,name:i,id:o,...l}){var d;const c={...l},u=i||o||((d=l.placeholder)==null?void 0:d.toLowerCase().replace(/\s+/g,"_"))||"input_field";return a.jsxs("div",{className:"space-y-1.5",children:[e&&a.jsxs("label",{className:`block text-xs sm:text-sm font-medium ${l.required?"text-blue-700":"text-green-700"}`,children:[e,l.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsxs("div",{className:"relative",children:[r&&a.jsx("div",{className:"absolute left-2.5 sm:left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:r}),a.jsx("input",{name:u,id:o||u,className:`
            block w-full rounded-md
            shadow-sm
            focus:border-primary-500 focus:ring-primary-500 
            disabled:bg-gray-100 disabled:text-gray-500
            text-[#222] placeholder:text-[#888]
            text-base
            py-2 px-3 border border-[#CAC0B0] bg-white
            ${t?"border-error-300 bg-error-50":"border-gray-300"}
            ${r?"pl-8 sm:pl-10":""}
            ${s?"pr-8 sm:pr-10":""}
            ${n}
          `,style:{color:"#222 !important",WebkitTextFillColor:"#222 !important",background:"#fff !important",borderColor:"#CAC0B0",fontWeight:600,letterSpacing:"0.08em",zIndex:1,position:"relative"},placeholder:l.placeholder?`${l.placeholder}${l.required?" *":""}`:"",...c}),s&&a.jsx("div",{className:"absolute right-2.5 sm:right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base",children:s})]}),t&&a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-red-600",children:t})]})}function fe({label:e,helperText:t,error:n,fullWidth:r=!0,className:s="",type:i="text",id:o,name:l,...c}){const u=o||l||(e==null?void 0:e.toLowerCase().replace(/\s+/g,"_"))||"form_input";return a.jsxs("div",{className:`${r?"w-full":""} space-y-1 mb-3 sm:mb-4`,children:[e&&a.jsxs("label",{htmlFor:u,className:`block text-sm font-medium mb-1 ${c.required?"text-blue-700":"text-green-700"}`,children:[e,c.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!c.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsx(ke,{id:u,name:l||u,type:i,className:`${r?"w-full":""} ${n?"border-error-500":""} text-sm sm:text-base ${s}`,...c,onWheel:i==="number"?d=>d.currentTarget.blur():void 0,onKeyDown:i==="number"?d=>{(d.key==="-"||d.key==="e"||d.key===".")&&d.preventDefault()}:void 0}),t&&!n&&a.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:t}),n&&a.jsx("p",{className:"text-xs sm:text-sm text-error-500",children:n})]})}function Te({options:e,value:t,onChange:n,label:r,error:s,leftIcon:i,className:o="",...l}){return a.jsxs("div",{className:"w-full mb-3 sm:mb-4",children:[r&&a.jsxs("label",{className:`block text-sm font-medium mb-1 ${l.required?"text-blue-700":"text-green-700"}`,children:[r,l.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!l.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsxs("div",{className:"relative",children:[i&&a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:i}),"        ",a.jsx("select",{value:t,onChange:c=>n(c.target.value),className:`
            block w-full rounded-md shadow-sm
            focus:border-primary-500 focus:ring-primary-500
            disabled:bg-gray-100 disabled:text-gray-500
            text-sm sm:text-base py-2 px-3 pr-10
            ${s?"border-error-300 bg-error-50":"border-gray-300"}
            ${l.required?"bg-blue-50 border-blue-200 focus:bg-white":l.disabled?"":"bg-green-50 border-green-200 focus:bg-white"}
            ${i?"pl-10":""}
            appearance-none
            ${t?"text-gray-900":"text-gray-500"}
            ${o}
          `,...l,children:e.map(c=>a.jsx("option",{value:c.value,className:c.value===""?"text-gray-500":"text-gray-900",children:c.label},c.value))}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:a.jsx("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s&&a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-error-600",children:s})]})}function Kt({label:e,error:t,helperText:n,className:r="",...s}){const i=s.id||`textarea-${s.name||Math.random().toString(36).substring(2,9)}`;return a.jsxs("div",{className:"space-y-2",children:[e&&a.jsxs("label",{htmlFor:i,className:`block text-sm font-medium ${s.required?"text-blue-700":"text-green-700"}`,children:[e,s.required?a.jsx("span",{className:"text-error-500 ml-1 font-bold",children:"*"}):!s.disabled&&a.jsx("span",{className:"text-green-500 ml-1 text-xs",children:"(Optional)"})]}),a.jsx("textarea",{id:i,className:`block w-full rounded-md shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${t?"border-error-300 bg-error-50":"border-gray-300"} ${s.required?"bg-blue-50 border-blue-200 focus:bg-white":s.disabled?"":"bg-green-50 border-green-200 focus:bg-white"} ${r}`,style:{color:"#222 !important",WebkitTextFillColor:"#222 !important",background:"#fff !important",fontWeight:500,zIndex:1,position:"relative"},placeholder:s.placeholder?`${s.placeholder}${s.required?" *":""}`:"",...s}),t&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:t}),n&&!t&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})}Kt.displayName="TextArea";var Uz=Object.defineProperty,Wz=(e,t,n)=>t in e?Uz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mf=(e,t,n)=>(Wz(e,typeof t!="symbol"?t+"":t,n),n);let Hz=class{constructor(){Mf(this,"current",this.detect()),Mf(this,"handoffState","pending"),Mf(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Er=new Hz,An=(e,t)=>{Er.isServer?x.useEffect(e,t):x.useLayoutEffect(e,t)};function Dr(e){let t=x.useRef(e);return An(()=>{t.current=e},[e]),t}let He=function(e){let t=Dr(e);return se.useCallback((...n)=>t.current(...n),[t])};function ch(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function ki(){let e=[],t={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),t.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return ch(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=ki();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function Jx(){let[e]=x.useState(ki);return x.useEffect(()=>()=>e.dispose(),[e]),e}function qz(){let e=typeof document>"u";return(t=>t.useSyncExternalStore)(cg)(()=>()=>{},()=>!1,()=>!e)}function Ro(){let e=qz(),[t,n]=x.useState(Er.isHandoffComplete);return t&&Er.isHandoffComplete===!1&&n(!1),x.useEffect(()=>{t!==!0&&n(!0)},[t]),x.useEffect(()=>Er.handoff(),[]),e?!1:t}var Uw;let Lo=(Uw=se.useId)!=null?Uw:function(){let e=Ro(),[t,n]=se.useState(e?()=>Er.nextId():null);return An(()=>{t===null&&n(Er.nextId())},[t]),t!=null?""+t:void 0};function Mt(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Mt),r}function Hk(e){return Er.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Fp=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Ys=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Ys||{}),qk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(qk||{}),Gz=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Gz||{});function Yz(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Fp)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Gk=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Gk||{});function Qz(e,t=0){var n;return e===((n=Hk(e))==null?void 0:n.body)?!1:Mt(t,{0(){return e.matches(Fp)},1(){let r=e;for(;r!==null;){if(r.matches(Fp))return!0;r=r.parentElement}return!1}})}var Kz=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Kz||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function oi(e){e==null||e.focus({preventScroll:!0})}let Xz=["textarea","input"].join(",");function Jz(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Xz))!=null?n:!1}function Zz(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),i=t(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function fu(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?Zz(e):e:Yz(e);s.length>0&&o.length>1&&(o=o.filter(m=>!s.includes(m))),r=r??i.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=o.length,f;do{if(d>=h||d+h<=0)return 0;let m=c+d;if(t&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=o[m],f==null||f.focus(u),d+=l}while(f!==i.activeElement);return t&6&&Jz(f)&&f.select(),2}function Yk(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function eB(){return/Android/gi.test(window.navigator.userAgent)}function tB(){return Yk()||eB()}function Rc(e,t,n){let r=Dr(t);x.useEffect(()=>{function s(i){r.current(i)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[e,n])}function Qk(e,t,n){let r=Dr(t);x.useEffect(()=>{function s(i){r.current(i)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[e,n])}function nB(e,t,n=!0){let r=x.useRef(!1);x.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(o,l){if(!r.current||o.defaultPrevented)return;let c=l(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let u=function d(h){return typeof h=="function"?d(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let d of u){if(d===null)continue;let h=d instanceof HTMLElement?d:d.current;if(h!=null&&h.contains(c)||o.composed&&o.composedPath().includes(h))return}return!Qz(c,Gk.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}let i=x.useRef(null);Rc("pointerdown",o=>{var l,c;r.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Rc("mousedown",o=>{var l,c;r.current&&(i.current=((c=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:c[0])||o.target)},!0),Rc("click",o=>{tB()||i.current&&(s(o,()=>i.current),i.current=null)},!0),Rc("touchend",o=>s(o,()=>o.target instanceof HTMLElement?o.target:null),!0),Qk("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ql(...e){return x.useMemo(()=>Hk(...e),[...e])}let Kk=Symbol();function rB(e,t=!0){return Object.assign(e,{[Kk]:t})}function Yn(...e){let t=x.useRef(e);x.useEffect(()=>{t.current=e},[e]);let n=He(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Kk]))?void 0:n}function Zx(e,t){let n=x.useRef([]),r=He(e);x.useEffect(()=>{let s=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let l=r(t,s);return n.current=t,l}},[r,...t])}function cd(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var ud=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ud||{}),ss=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ss||{});function In({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:l}){l=l??sB;let c=Xk(t,e);if(i)return Lc(c,n,r,o,l);let u=s??0;if(u&2){let{static:d=!1,...h}=c;if(d)return Lc(h,n,r,o,l)}if(u&1){let{unmount:d=!0,...h}=c;return Mt(d?0:1,{0(){return null},1(){return Lc({...h,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return Lc(c,n,r,o,l)}function Lc(e,t={},n,r,s){let{as:i=n,children:o,refName:l="ref",...c}=If(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let f=!1,m=[];for(let[p,g]of Object.entries(t))typeof g=="boolean"&&(f=!0),g===!0&&m.push(p);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===x.Fragment&&Object.keys(Ww(c)).length>0){if(!x.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let f=d.props,m=typeof(f==null?void 0:f.className)=="function"?(...g)=>cd(f==null?void 0:f.className(...g),c.className):cd(f==null?void 0:f.className,c.className),p=m?{className:m}:{};return x.cloneElement(d,Object.assign({},Xk(d.props,Ww(If(c,["ref"]))),h,u,{ref:s(d.ref,u.ref)},p))}return x.createElement(i,Object.assign({},If(c,["ref"]),i!==x.Fragment&&u,i!==x.Fragment&&h),d)}function sB(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function Xk(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](s,...i){let o=n[r];for(let l of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return t}function pn(e){var t;return Object.assign(x.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Ww(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function If(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let iB="div";var dd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(dd||{});function oB(e,t){var n;let{features:r=1,...s}=e,i={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return In({ourProps:i,theirProps:s,slot:{},defaultTag:iB,name:"Hidden"})}let $p=pn(oB),ey=x.createContext(null);ey.displayName="OpenClosedContext";var sn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(sn||{});function ty(){return x.useContext(ey)}function aB({value:e,children:t}){return se.createElement(ey.Provider,{value:e},t)}function lB(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Xr=[];lB(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Xr[0]!==t.target&&(Xr.unshift(t.target),Xr=Xr.filter(n=>n!=null&&n.isConnected),Xr.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function cB(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&uB(n)?!1:r}function uB(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}var Jk=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Jk||{});function Zk(e,t,n,r){let s=Dr(n);x.useEffect(()=>{e=e??window;function i(o){s.current(o)}return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)},[e,t,r])}function Gl(){let e=x.useRef(!1);return An(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function eE(e){let t=He(e),n=x.useRef(!1);x.useEffect(()=>(n.current=!1,()=>{n.current=!0,ch(()=>{n.current&&t()})}),[t])}var Ca=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ca||{});function dB(){let e=x.useRef(0);return Qk("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function tE(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let hB="div";var nE=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(nE||{});function fB(e,t){let n=x.useRef(null),r=Yn(n,t),{initialFocus:s,containers:i,features:o=30,...l}=e;Ro()||(o=1);let c=ql(n);gB({ownerDocument:c},!!(o&16));let u=xB({ownerDocument:c,container:n,initialFocus:s},!!(o&2));yB({ownerDocument:c,container:n,containers:i,previousActiveElement:u},!!(o&8));let d=dB(),h=He(g=>{let y=n.current;y&&(b=>b())(()=>{Mt(d.current,{[Ca.Forwards]:()=>{fu(y,Ys.First,{skipElements:[g.relatedTarget]})},[Ca.Backwards]:()=>{fu(y,Ys.Last,{skipElements:[g.relatedTarget]})}})})}),f=Jx(),m=x.useRef(!1),p={ref:r,onKeyDown(g){g.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(g){let y=tE(i);n.current instanceof HTMLElement&&y.add(n.current);let b=g.relatedTarget;b instanceof HTMLElement&&b.dataset.headlessuiFocusGuard!=="true"&&(rE(y,b)||(m.current?fu(n.current,Mt(d.current,{[Ca.Forwards]:()=>Ys.Next,[Ca.Backwards]:()=>Ys.Previous})|Ys.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&oi(g.target)))}};return se.createElement(se.Fragment,null,!!(o&4)&&se.createElement($p,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:dd.Focusable}),In({ourProps:p,theirProps:l,defaultTag:hB,name:"FocusTrap"}),!!(o&4)&&se.createElement($p,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:dd.Focusable}))}let mB=pn(fB),ia=Object.assign(mB,{features:nE});function pB(e=!0){let t=x.useRef(Xr.slice());return Zx(([n],[r])=>{r===!0&&n===!1&&ch(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Xr.slice())},[e,Xr,t]),He(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function gB({ownerDocument:e},t){let n=pB(t);Zx(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&oi(n())},[t]),eE(()=>{t&&oi(n())})}function xB({ownerDocument:e,container:t,initialFocus:n},r){let s=x.useRef(null),i=Gl();return Zx(()=>{if(!r)return;let o=t.current;o&&ch(()=>{if(!i.current)return;let l=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(o.contains(l)){s.current=l;return}n!=null&&n.current?oi(n.current):fu(o,Ys.First)===qk.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=e==null?void 0:e.activeElement})},[r]),s}function yB({ownerDocument:e,container:t,containers:n,previousActiveElement:r},s){let i=Gl();Zk(e==null?void 0:e.defaultView,"focus",o=>{if(!s||!i.current)return;let l=tE(n);t.current instanceof HTMLElement&&l.add(t.current);let c=r.current;if(!c)return;let u=o.target;u&&u instanceof HTMLElement?rE(l,u)?(r.current=u,oi(u)):(o.preventDefault(),o.stopPropagation(),oi(c)):oi(r.current)},!0)}function rE(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let sE=x.createContext(!1);function vB(){return x.useContext(sE)}function zp(e){return se.createElement(sE.Provider,{value:e.force},e.children)}function bB(e){let t=vB(),n=x.useContext(iE),r=ql(e),[s,i]=x.useState(()=>{if(!t&&n!==null||Er.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return x.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),x.useEffect(()=>{t||n!==null&&i(n.current)},[n,i,t]),s}let wB=x.Fragment;function jB(e,t){let n=e,r=x.useRef(null),s=Yn(rB(d=>{r.current=d}),t),i=ql(r),o=bB(r),[l]=x.useState(()=>{var d;return Er.isServer?null:(d=i==null?void 0:i.createElement("div"))!=null?d:null}),c=x.useContext(Bp),u=Ro();return An(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),An(()=>{if(l&&c)return c.register(l)},[c,l]),eE(()=>{var d;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))}),u?!o||!l?null:Rl.createPortal(In({ourProps:{ref:s},theirProps:n,defaultTag:wB,name:"Portal"}),l):null}let SB=x.Fragment,iE=x.createContext(null);function CB(e,t){let{target:n,...r}=e,s={ref:Yn(t)};return se.createElement(iE.Provider,{value:n},In({ourProps:s,theirProps:r,defaultTag:SB,name:"Popover.Group"}))}let Bp=x.createContext(null);function NB(){let e=x.useContext(Bp),t=x.useRef([]),n=He(i=>(t.current.push(i),e&&e.register(i),()=>r(i))),r=He(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),s=x.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,x.useMemo(()=>function({children:i}){return se.createElement(Bp.Provider,{value:s},i)},[s])]}let kB=pn(jB),EB=pn(CB),Vp=Object.assign(kB,{Group:EB});const DB=(e=>e.useSyncExternalStore)(cg);function TB(e){return DB(e.subscribe,e.getSnapshot,e.getSnapshot)}function PB(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=t[s].call(n,...i);o&&(n=o,r.forEach(l=>l()))}}}function _B(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,s=r.clientWidth-r.offsetWidth,i=e-s;n.style(r,"paddingRight",`${i}px`)}}}function AB(){return Yk()?{before({doc:e,d:t,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=ki();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);d&&!r(d)&&(o=d)}catch{}},!0),t.addEventListener(e,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(l.target,"touchAction","none")}),t.addEventListener(e,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function MB(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function IB(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ei=PB(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:ki(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:IB(n)},s=[AB(),_B(),MB()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ei.subscribe(()=>{let e=ei.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&ei.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ei.dispatch("TEARDOWN",n)}});function OB(e,t,n){let r=TB(ei),s=e?r.get(e):void 0,i=s?s.count>0:!1;return An(()=>{if(!(!e||!t))return ei.dispatch("PUSH",e,n),()=>ei.dispatch("POP",e,n)},[t,e]),i}let Of=new Map,oa=new Map;function Hw(e,t=!0){An(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function s(){var o;if(!r)return;let l=(o=oa.get(r))!=null?o:1;if(l===1?oa.delete(r):oa.set(r,l-1),l!==1)return;let c=Of.get(r);c&&(c["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",c["aria-hidden"]),r.inert=c.inert,Of.delete(r))}let i=(n=oa.get(r))!=null?n:0;return oa.set(r,i+1),i!==0||(Of.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[e,t])}function RB({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){var r;let s=x.useRef((r=n==null?void 0:n.current)!=null?r:null),i=ql(s),o=He(()=>{var l,c,u;let d=[];for(let h of e)h!==null&&(h instanceof HTMLElement?d.push(h):"current"in h&&h.current instanceof HTMLElement&&d.push(h.current));if(t!=null&&t.current)for(let h of t.current)d.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(s.current)||h.contains((u=(c=s.current)==null?void 0:c.getRootNode())==null?void 0:u.host)||d.some(f=>h.contains(f))||d.push(h));return d});return{resolveContainers:o,contains:He(l=>o().some(c=>c.contains(l))),mainTreeNodeRef:s,MainTreeNode:x.useMemo(()=>function(){return n!=null?null:se.createElement($p,{features:dd.Hidden,ref:s})},[s,n])}}let ny=x.createContext(()=>{});ny.displayName="StackContext";var Up=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Up||{});function LB(){return x.useContext(ny)}function FB({children:e,onUpdate:t,type:n,element:r,enabled:s}){let i=LB(),o=He((...l)=>{t==null||t(...l),i(...l)});return An(()=>{let l=s===void 0||s===!0;return l&&o(0,n,r),()=>{l&&o(1,n,r)}},[o,n,r,s]),se.createElement(ny.Provider,{value:o},e)}let oE=x.createContext(null);function aE(){let e=x.useContext(oE);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,aE),t}return e}function $B(){let[e,t]=x.useState([]);return[e.length>0?e.join(" "):void 0,x.useMemo(()=>function(n){let r=He(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),s=x.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return se.createElement(oE.Provider,{value:s},n.children)},[t])]}let zB="p";function BB(e,t){let n=Lo(),{id:r=`headlessui-description-${n}`,...s}=e,i=aE(),o=Yn(t);An(()=>i.register(r),[r,i.register]);let l={ref:o,...i.props,id:r};return In({ourProps:l,theirProps:s,slot:i.slot||{},defaultTag:zB,name:i.name||"Description"})}let VB=pn(BB),UB=Object.assign(VB,{});var WB=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(WB||{}),HB=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(HB||{});let qB={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},hd=x.createContext(null);hd.displayName="DialogContext";function Yl(e){let t=x.useContext(hd);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Yl),n}return t}function GB(e,t,n=()=>[document.body]){OB(e,t,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function YB(e,t){return Mt(t.type,qB,e,t)}let QB="div",KB=ud.RenderStrategy|ud.Static;function XB(e,t){let n=Lo(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:l="dialog",__demoMode:c=!1,...u}=e,[d,h]=x.useState(0),f=x.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=ty();s===void 0&&m!==null&&(s=(m&sn.Open)===sn.Open);let p=x.useRef(null),g=Yn(p,t),y=ql(p),b=e.hasOwnProperty("open")||m!==null,v=e.hasOwnProperty("onClose");if(!b&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!b)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let w=s?0:1,[S,j]=x.useReducer(YB,{titleId:null,descriptionId:null,panelRef:x.createRef()}),k=He(()=>i(!1)),N=He(_=>j({type:0,id:_})),C=Ro()?c?!1:w===0:!1,E=d>1,D=x.useContext(hd)!==null,[$,B]=NB(),F={get current(){var _;return(_=S.panelRef.current)!=null?_:p.current}},{resolveContainers:T,mainTreeNodeRef:A,MainTreeNode:z}=RB({portals:$,defaultContainers:[F]}),M=E?"parent":"leaf",P=m!==null?(m&sn.Closing)===sn.Closing:!1,I=D||P?!1:C,H=x.useCallback(()=>{var _,L;return(L=Array.from((_=y==null?void 0:y.querySelectorAll("body > *"))!=null?_:[]).find(R=>R.id==="headlessui-portal-root"?!1:R.contains(A.current)&&R instanceof HTMLElement))!=null?L:null},[A]);Hw(H,I);let G=E?!0:C,ee=x.useCallback(()=>{var _,L;return(L=Array.from((_=y==null?void 0:y.querySelectorAll("[data-headlessui-portal]"))!=null?_:[]).find(R=>R.contains(A.current)&&R instanceof HTMLElement))!=null?L:null},[A]);Hw(ee,G),nB(T,_=>{_.preventDefault(),k()},!(!C||E));let V=!(E||w!==0);Zk(y==null?void 0:y.defaultView,"keydown",_=>{V&&(_.defaultPrevented||_.key===Jk.Escape&&(_.preventDefault(),_.stopPropagation(),k()))}),GB(y,!(P||w!==0||D),T),x.useEffect(()=>{if(w!==0||!p.current)return;let _=new ResizeObserver(L=>{for(let R of L){let Q=R.target.getBoundingClientRect();Q.x===0&&Q.y===0&&Q.width===0&&Q.height===0&&k()}});return _.observe(p.current),()=>_.disconnect()},[w,p,k]);let[U,O]=$B(),W=x.useMemo(()=>[{dialogState:w,close:k,setTitleId:N},S],[w,S,k,N]),Y=x.useMemo(()=>({open:w===0}),[w]),oe={ref:g,id:r,role:l,"aria-modal":w===0?!0:void 0,"aria-labelledby":S.titleId,"aria-describedby":U};return se.createElement(FB,{type:"Dialog",enabled:w===0,element:p,onUpdate:He((_,L)=>{L==="Dialog"&&Mt(_,{[Up.Add]:()=>h(R=>R+1),[Up.Remove]:()=>h(R=>R-1)})})},se.createElement(zp,{force:!0},se.createElement(Vp,null,se.createElement(hd.Provider,{value:W},se.createElement(Vp.Group,{target:p},se.createElement(zp,{force:!1},se.createElement(O,{slot:Y,name:"Dialog.Description"},se.createElement(ia,{initialFocus:o,containers:T,features:C?Mt(M,{parent:ia.features.RestoreFocus,leaf:ia.features.All&~ia.features.FocusLock}):ia.features.None},se.createElement(B,null,In({ourProps:oe,theirProps:u,slot:Y,defaultTag:QB,features:KB,visible:w===0,name:"Dialog"}))))))))),se.createElement(z,null))}let JB="div";function ZB(e,t){let n=Lo(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=e,[{dialogState:i,close:o}]=Yl("Dialog.Overlay"),l=Yn(t),c=He(d=>{if(d.target===d.currentTarget){if(cB(d.currentTarget))return d.preventDefault();d.preventDefault(),d.stopPropagation(),o()}}),u=x.useMemo(()=>({open:i===0}),[i]);return In({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:c},theirProps:s,slot:u,defaultTag:JB,name:"Dialog.Overlay"})}let eV="div";function tV(e,t){let n=Lo(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=e,[{dialogState:i},o]=Yl("Dialog.Backdrop"),l=Yn(t);x.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let c=x.useMemo(()=>({open:i===0}),[i]);return se.createElement(zp,{force:!0},se.createElement(Vp,null,In({ourProps:{ref:l,id:r,"aria-hidden":!0},theirProps:s,slot:c,defaultTag:eV,name:"Dialog.Backdrop"})))}let nV="div";function rV(e,t){let n=Lo(),{id:r=`headlessui-dialog-panel-${n}`,...s}=e,[{dialogState:i},o]=Yl("Dialog.Panel"),l=Yn(t,o.panelRef),c=x.useMemo(()=>({open:i===0}),[i]),u=He(d=>{d.stopPropagation()});return In({ourProps:{ref:l,id:r,onClick:u},theirProps:s,slot:c,defaultTag:nV,name:"Dialog.Panel"})}let sV="h2";function iV(e,t){let n=Lo(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:i,setTitleId:o}]=Yl("Dialog.Title"),l=Yn(t);x.useEffect(()=>(o(r),()=>o(null)),[r,o]);let c=x.useMemo(()=>({open:i===0}),[i]);return In({ourProps:{ref:l,id:r},theirProps:s,slot:c,defaultTag:sV,name:"Dialog.Title"})}let oV=pn(XB),aV=pn(tV),lV=pn(rV),cV=pn(ZB),uV=pn(iV),Fc=Object.assign(oV,{Backdrop:aV,Panel:lV,Overlay:cV,Title:uV,Description:UB});function dV(e=0){let[t,n]=x.useState(e),r=Gl(),s=x.useCallback(c=>{r.current&&n(u=>u|c)},[t,r]),i=x.useCallback(c=>!!(t&c),[t]),o=x.useCallback(c=>{r.current&&n(u=>u&~c)},[n,r]),l=x.useCallback(c=>{r.current&&n(u=>u^c)},[n]);return{flags:t,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:l}}function hV(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Rf(e,...t){e&&t.length>0&&e.classList.add(...t)}function Lf(e,...t){e&&t.length>0&&e.classList.remove(...t)}function fV(e,t){let n=ki();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[i,o]=[r,s].map(c=>{let[u=0]=c.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,h)=>h-d);return u}),l=i+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&u.dispose()})});let c=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),c())})}else t();return n.add(()=>t()),n.dispose}function mV(e,t,n,r){let s=n?"enter":"leave",i=ki(),o=r!==void 0?hV(r):()=>{};s==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=Mt(s,{enter:()=>t.enter,leave:()=>t.leave}),c=Mt(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=Mt(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Lf(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Rf(e,...t.base,...l,...u),i.nextFrame(()=>{Lf(e,...t.base,...l,...u),Rf(e,...t.base,...l,...c),fV(e,()=>(Lf(e,...t.base,...l),Rf(e,...t.base,...t.entered),o()))}),i.dispose}function pV({immediate:e,container:t,direction:n,classes:r,onStart:s,onStop:i}){let o=Gl(),l=Jx(),c=Dr(n);An(()=>{e&&(c.current="enter")},[e]),An(()=>{let u=ki();l.add(u.dispose);let d=t.current;if(d&&c.current!=="idle"&&o.current)return u.dispose(),s.current(c.current),u.add(mV(d,r.current,c.current==="enter",()=>{u.dispose(),i.current(c.current)})),u.dispose},[n])}function Br(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let uh=x.createContext(null);uh.displayName="TransitionContext";var gV=(e=>(e.Visible="visible",e.Hidden="hidden",e))(gV||{});function xV(){let e=x.useContext(uh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function yV(){let e=x.useContext(dh);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let dh=x.createContext(null);dh.displayName="NestingContext";function hh(e){return"children"in e?hh(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function lE(e,t){let n=Dr(e),r=x.useRef([]),s=Gl(),i=Jx(),o=He((m,p=ss.Hidden)=>{let g=r.current.findIndex(({el:y})=>y===m);g!==-1&&(Mt(p,{[ss.Unmount](){r.current.splice(g,1)},[ss.Hidden](){r.current[g].state="hidden"}}),i.microTask(()=>{var y;!hh(r)&&s.current&&((y=n.current)==null||y.call(n))}))}),l=He(m=>{let p=r.current.find(({el:g})=>g===m);return p?p.state!=="visible"&&(p.state="visible"):r.current.push({el:m,state:"visible"}),()=>o(m,ss.Unmount)}),c=x.useRef([]),u=x.useRef(Promise.resolve()),d=x.useRef({enter:[],leave:[],idle:[]}),h=He((m,p,g)=>{c.current.splice(0),t&&(t.chains.current[p]=t.chains.current[p].filter(([y])=>y!==m)),t==null||t.chains.current[p].push([m,new Promise(y=>{c.current.push(y)})]),t==null||t.chains.current[p].push([m,new Promise(y=>{Promise.all(d.current[p].map(([b,v])=>v)).then(()=>y())})]),p==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(p)):g(p)}),f=He((m,p,g)=>{Promise.all(d.current[p].splice(0).map(([y,b])=>b)).then(()=>{var y;(y=c.current.shift())==null||y()}).then(()=>g(p))});return x.useMemo(()=>({children:r,register:l,unregister:o,onStart:h,onStop:f,wait:u,chains:d}),[l,o,r,h,f,d,u])}function vV(){}let bV=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function qw(e){var t;let n={};for(let r of bV)n[r]=(t=e[r])!=null?t:vV;return n}function wV(e){let t=x.useRef(qw(e));return x.useEffect(()=>{t.current=qw(e)},[e]),t}let jV="div",cE=ud.RenderStrategy;function SV(e,t){var n,r;let{beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:m,leaveTo:p,...g}=e,y=x.useRef(null),b=Yn(y,t),v=(n=g.unmount)==null||n?ss.Unmount:ss.Hidden,{show:w,appear:S,initial:j}=xV(),[k,N]=x.useState(w?"visible":"hidden"),C=yV(),{register:E,unregister:D}=C;x.useEffect(()=>E(y),[E,y]),x.useEffect(()=>{if(v===ss.Hidden&&y.current){if(w&&k!=="visible"){N("visible");return}return Mt(k,{hidden:()=>D(y),visible:()=>E(y)})}},[k,y,E,D,w,v]);let $=Dr({base:Br(g.className),enter:Br(c),enterFrom:Br(u),enterTo:Br(d),entered:Br(h),leave:Br(f),leaveFrom:Br(m),leaveTo:Br(p)}),B=wV({beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l}),F=Ro();x.useEffect(()=>{if(F&&k==="visible"&&y.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[y,k,F]);let T=j&&!S,A=S&&w&&j,z=!F||T?"idle":w?"enter":"leave",M=dV(0),P=He(V=>Mt(V,{enter:()=>{M.addFlag(sn.Opening),B.current.beforeEnter()},leave:()=>{M.addFlag(sn.Closing),B.current.beforeLeave()},idle:()=>{}})),I=He(V=>Mt(V,{enter:()=>{M.removeFlag(sn.Opening),B.current.afterEnter()},leave:()=>{M.removeFlag(sn.Closing),B.current.afterLeave()},idle:()=>{}})),H=lE(()=>{N("hidden"),D(y)},C),G=x.useRef(!1);pV({immediate:A,container:y,classes:$,direction:z,onStart:Dr(V=>{G.current=!0,H.onStart(y,V,P)}),onStop:Dr(V=>{G.current=!1,H.onStop(y,V,I),V==="leave"&&!hh(H)&&(N("hidden"),D(y))})});let ee=g,ie={ref:b};return A?ee={...ee,className:cd(g.className,...$.current.enter,...$.current.enterFrom)}:G.current&&(ee.className=cd(g.className,(r=y.current)==null?void 0:r.className),ee.className===""&&delete ee.className),se.createElement(dh.Provider,{value:H},se.createElement(aB,{value:Mt(k,{visible:sn.Open,hidden:sn.Closed})|M.flags},In({ourProps:ie,theirProps:ee,defaultTag:jV,features:cE,visible:k==="visible",name:"Transition.Child"})))}function CV(e,t){let{show:n,appear:r=!1,unmount:s=!0,...i}=e,o=x.useRef(null),l=Yn(o,t);Ro();let c=ty();if(n===void 0&&c!==null&&(n=(c&sn.Open)===sn.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=x.useState(n?"visible":"hidden"),h=lE(()=>{d("hidden")}),[f,m]=x.useState(!0),p=x.useRef([n]);An(()=>{f!==!1&&p.current[p.current.length-1]!==n&&(p.current.push(n),m(!1))},[p,n]);let g=x.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);x.useEffect(()=>{if(n)d("visible");else if(!hh(h))d("hidden");else{let w=o.current;if(!w)return;let S=w.getBoundingClientRect();S.x===0&&S.y===0&&S.width===0&&S.height===0&&d("hidden")}},[n,h]);let y={unmount:s},b=He(()=>{var w;f&&m(!1),(w=e.beforeEnter)==null||w.call(e)}),v=He(()=>{var w;f&&m(!1),(w=e.beforeLeave)==null||w.call(e)});return se.createElement(dh.Provider,{value:h},se.createElement(uh.Provider,{value:g},In({ourProps:{...y,as:x.Fragment,children:se.createElement(uE,{ref:l,...y,...i,beforeEnter:b,beforeLeave:v})},theirProps:{},defaultTag:x.Fragment,features:cE,visible:u==="visible",name:"Transition"})))}function NV(e,t){let n=x.useContext(uh)!==null,r=ty()!==null;return se.createElement(se.Fragment,null,!n&&r?se.createElement(Wp,{ref:t,...e}):se.createElement(uE,{ref:t,...e}))}let Wp=pn(CV),uE=pn(SV),kV=pn(NV),Ff=Object.assign(Wp,{Child:kV,Root:Wp});const EV={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95%] sm:max-w-4xl"};function Ct({isOpen:e,onClose:t,title:n,description:r,children:s,size:i="md"}){return a.jsx(Ff,{show:e,as:x.Fragment,children:a.jsxs(Fc,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(Ff.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40 transition-opacity"})}),a.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-end justify-center p-2 sm:p-4 text-center sm:items-center",children:a.jsx(Ff.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:a.jsxs(Fc.Panel,{className:`w-full ${EV[i]} transform overflow-hidden rounded-lg bg-white text-left shadow-modal transition-all my-2 sm:my-8`,children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-3 sm:px-6 py-3 sm:py-4",children:[a.jsxs("div",{children:[n&&a.jsx(Fc.Title,{as:"h3",className:"text-base sm:text-lg font-semibold text-gray-900",children:n}),r&&a.jsx(Fc.Description,{className:"mt-1 text-xs sm:text-sm text-gray-500",children:r})]}),a.jsxs("button",{type:"button",className:"text-gray-400 hover:text-gray-500 p-1",onClick:t,children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx(wi,{className:"h-5 w-5","aria-hidden":"true"})]})]}),a.jsx("div",{className:"px-3 sm:px-6 py-3 sm:py-4 max-h-[80vh] overflow-y-auto",children:s})]})})})})]})})}const $f="http://103.224.243.242:3001/api",DV=()=>{var t;let e=localStorage.getItem("jwt-token");if(!e)try{const n=localStorage.getItem("auth-storage");n&&(e=(t=JSON.parse(n).state)==null?void 0:t.token)}catch(n){console.error("Failed to parse auth storage:",n)}if(!e)throw new Error("Authentication required - Please log in again");return e},aa=async(e,t={})=>{var n,r;try{console.log(`📞 API Call: ${t.method||"GET"} ${$f}${e}`);let s="";try{s=DV()}catch(c){throw c}const i={"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{},...t.headers||{}},o=await fetch(`${$f}${e}`,{...t,headers:i});if(console.log(`📩 API Response: ${o.status} ${o.statusText} for ${e}`),e==="/quotations"){const c=o.clone();try{const u=await c.json();if(console.log(`📊 Quotations API Response Data (${e}):`,u),u&&u.length>0){console.log("📝 First quotation details:",{id:u[0].id,customerName:u[0].customerName,customerId:u[0].customerId,customerContact:JSON.stringify(u[0].customerContact).substring(0,100),selectedEquipment:u[0].selectedEquipment?`${u[0].selectedEquipment.name||"Unnamed"} (${u[0].selectedEquipment.type||"Unknown type"})`:"No equipment"});const d=u[0].selectedEquipment&&u[0].selectedEquipment.name,h=u[0].selectedMachines&&Array.isArray(u[0].selectedMachines)&&u[0].selectedMachines.length>0;console.log("📋 Equipment data check:",{hasEquipment:!!d,hasMachines:!!h,machineCount:h?u[0].selectedMachines.length:0,firstMachine:h?u[0].selectedMachines[0].name:"N/A"});const f=!!u[0].customerId,m=!!u[0].customerName,p=u[0].customerContact&&typeof u[0].customerContact=="object"&&Object.keys(u[0].customerContact).length>0;console.log("👤 Customer data check:",{hasCustomerId:f,hasCustomerName:m,hasCustomerContact:p,customerType:p?typeof u[0].customerContact:"N/A"})}}catch(u){console.error("Error parsing response data:",u)}}if(!o.ok){let c=`API Error: ${o.status} ${o.statusText}`;const u=o.headers.get("content-type");console.error(`API Error: ${o.status} ${o.statusText} for ${$f}${e}`),console.error("Response Headers:",{"content-type":u,"content-length":o.headers.get("content-length")});try{if(u&&u.includes("application/json")){const d=await o.json();if(c=d.error||c,d.details&&(c+=` - ${d.details}`),console.error("API Error JSON:",d),o.status===401)throw console.warn("👮‍♂️ Authentication Error:",{endpoint:e,headers:{authorization:(n=t.headers)!=null&&n.Authorization?"Present (Token masked)":"Missing","x-bypass-auth":((r=t.headers)==null?void 0:r["X-Bypass-Auth"])||"Not present"},environment:"development",devMode:!1,timestamp:new Date().toISOString()}),localStorage.removeItem("jwt-token"),sessionStorage.removeItem("auth-state"),console.warn("Authentication required - redirecting to login"),setTimeout(()=>{window.location.href="/login?expired=true"},500),new Error("Authentication session expired - Please log in again")}else{const d=await o.text();d&&(console.error("API Error Text:",d.substring(0,300)),c+=` - ${d.substring(0,100)}`)}}catch(d){console.error("Error parsing API error response:",d),c+=" (Error response could not be parsed)"}throw new Error(`${c} (${e})`)}const l=await o.json();return l&&typeof l=="object"&&"success"in l&&"data"in l?l.data:l}catch(s){throw console.error(`API call failed: ${e}`,s),s}},On={get:e=>aa(e,{method:"GET"}),post:(e,t)=>aa(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>aa(e,{method:"PUT",body:JSON.stringify(t)}),patch:(e,t)=>aa(e,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>aa(e,{method:"DELETE"})},dE=async()=>{try{console.log("🔍 DEBUG: customerService.getCustomers() called"),console.log('🔍 DEBUG: About to call api.get("/customers")');const e=await On.get("/customers");return console.log("🔍 DEBUG: api.get response received:",e),console.log("🔍 DEBUG: Response type:",typeof e,"Array?",Array.isArray(e)),e}catch(e){return console.error("❌ DEBUG: Failed to fetch customers:",e),console.error("❌ DEBUG: Error details:",e.message,e.stack),[]}},hE=async e=>{try{console.log("Creating customer via API:",e);const t=await On.post("/customers",e);return console.log("Customer created successfully:",t),t}catch(t){throw console.error("Failed to create customer:",t),new Error(t.message||"Failed to create customer")}},TV=async(e,t)=>{try{return await On.put(`/customers/${e}`,t)}catch(n){throw console.error(`Failed to update customer ${e}:`,n),new Error(n.message||"Failed to update customer")}},PV=async e=>{try{return await On.delete(`/customers/${e}`),!0}catch(t){throw console.error(`Failed to delete customer ${e}:`,t),new Error(t.message||"Failed to delete customer")}};function _V({isOpen:e,onClose:t,onSelect:n,initialCustomerData:r}){const[s,i]=x.useState("select"),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState(!0),[f,m]=x.useState({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",address:(r==null?void 0:r.address)||"",companyName:(r==null?void 0:r.companyName)||"",designation:(r==null?void 0:r.designation)||""});x.useEffect(()=>{e&&(p(),i("select"))},[e]);const p=async()=>{try{console.log("🔍 Fetching customers for modal...");const v=await dE();console.log("✅ Received customers:",v),l(v)}catch(v){console.error("❌ Error fetching customers:",v)}finally{h(!1)}},g=async()=>{if(!f.name.trim()){alert("Customer Name is required");return}try{const v=await hE({...f,name:f.name.trim(),contactName:f.name.trim(),companyName:f.companyName.trim()||"Korean.org",email:f.email.trim(),phone:f.phone.trim()||"N/A",address:f.address.trim()||"N/A",designation:f.designation.trim()||"N/A",type:"other",notes:""});console.log("Created new customer:",v),n(v)}catch(v){console.error("Error creating customer:",v),alert("Error creating customer")}},y=v=>{console.log("Selected existing customer:",v),n(v)},b=o.filter(v=>{var w;return v.name.toLowerCase().includes(c.toLowerCase())||v.email.toLowerCase().includes(c.toLowerCase())||((w=v.id)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))});return a.jsx(Ct,{isOpen:e,onClose:t,title:"Select or Create Customer",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(q,{variant:s==="select"?"default":"outline",onClick:()=>i("select"),className:"flex-1",size:"sm",children:"Select Existing"}),a.jsx(q,{variant:s==="create"?"default":"outline",onClick:()=>{i("create"),m({name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",address:(r==null?void 0:r.address)||"",companyName:(r==null?void 0:r.companyName)||"",designation:(r==null?void 0:r.designation)||""})},className:"flex-1",size:"sm",children:"Create New"})]}),s==="select"?a.jsxs(a.Fragment,{children:["            ",a.jsxs("div",{className:"relative mb-2",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4 sm:h-5 sm:w-5"}),a.jsx(fe,{placeholder:"Search customers...",value:c,onChange:v=>u(v.target.value),className:"pl-10"}),c&&a.jsxs("button",{type:"button",onClick:()=>u(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsx("span",{className:"sr-only",children:"Clear search"})]})]}),a.jsx("div",{className:"max-h-[60vh] sm:max-h-96 overflow-y-auto border rounded-lg divide-y",children:d?a.jsxs("div",{className:"p-3 sm:p-4 text-center text-gray-500 flex items-center justify-center h-20",children:[a.jsxs("svg",{className:"animate-spin h-5 w-5 text-primary-500 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading customers..."]}):b.length===0?a.jsx("div",{className:"p-3 sm:p-4 text-center text-gray-500",children:c?`No customers matching "${c}"`:"No customers found"}):b.map(v=>a.jsx("div",{className:"p-3 sm:p-4 hover:bg-gray-50 active:bg-gray-100 cursor-pointer transition-colors",onClick:()=>y(v),children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"font-semibold text-base text-gray-900",children:v.name}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-2",children:[v.companyName&&a.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:v.companyName}),v.designation&&v.companyName&&a.jsx("div",{className:"hidden sm:inline-block text-gray-700",children:"•"}),v.designation&&a.jsx("div",{className:"text-xs sm:text-sm text-gray-800",children:v.designation})]}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 truncate",children:v.email}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-700 mt-0.5",children:["ID: ",v.id]})]})},v.id))})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(fe,{label:"Customer Name",value:f.name,onChange:v=>m(w=>({...w,name:v.target.value})),placeholder:"Enter customer name",required:!0}),a.jsx(fe,{label:"Company Name",value:f.companyName,onChange:v=>m(w=>({...w,companyName:v.target.value})),placeholder:"Enter company name",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(fe,{label:"Designation",value:f.designation,onChange:v=>m(w=>({...w,designation:v.target.value})),placeholder:"Enter designation",required:!0}),a.jsx(fe,{label:"Email",type:"email",value:f.email,onChange:v=>m(w=>({...w,email:v.target.value})),placeholder:"Enter email address",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(fe,{label:"Phone",value:f.phone,onChange:v=>m(w=>({...w,phone:v.target.value})),placeholder:"Enter phone number",required:!0}),a.jsx(fe,{label:"Address",value:f.address,onChange:v=>m(w=>({...w,address:v.target.value})),placeholder:"Enter address",required:!0})]}),"            ",a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-3 sm:pt-2",children:[a.jsx(q,{type:"button",onClick:()=>i("select"),variant:"outline",size:"sm",className:"w-full sm:w-auto",children:"Cancel"}),a.jsx(q,{onClick:g,className:"bg-blue-500 hover:bg-blue-600 text-white w-full sm:w-auto",size:"sm",leftIcon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),children:"Add Customer"})]})]})]})})}function fd(){return a.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[a.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[a.jsx(Vu,{className:"h-4 w-4 text-blue-500 mr-2 flex-shrink-0"}),a.jsxs("span",{children:["Fields highlighted in ",a.jsx("span",{className:"text-blue-700 font-medium",children:"blue"})," with an ",a.jsx("span",{className:"text-error-500 font-bold",children:"*"})," are required."]})]}),a.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-700 p-2 bg-green-50 border border-green-200 rounded-md",children:[a.jsx(Vu,{className:"h-4 w-4 text-green-500 mr-2 flex-shrink-0"}),a.jsxs("span",{children:["Fields highlighted in ",a.jsx("span",{className:"text-green-700 font-medium",children:"green"})," marked as ",a.jsx("span",{className:"text-green-600",children:"(Optional)"})," can be left blank."]})]})]})}const AV=({data:e,dataType:t,className:n})=>{const[r,s]=x.useState(!1);return x.useEffect(()=>{if(!e||e.length===0)return;const i=e.some(l=>l._mockFlag||l._source==="mock_data"),o=e.some(l=>{const c=String(l.id||"");return c.startsWith("mock-")||c.includes("MOCK")});s(i||o)},[e]),r?a.jsxs("div",{className:`bg-orange-500 text-white p-3 mb-4 rounded-md shadow-md ${n||""}`,style:{border:"2px dashed #e53e3e"},children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg",children:"Mock Data In Use"}),a.jsxs("p",{children:["You are currently viewing ",a.jsxs("strong",{children:["mock ",t]})," data because the API connection failed. This data does not reflect real database content."]})]})]}),"      ",a.jsxs("div",{className:"mt-2 text-sm",children:["To fix this issue:",a.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[a.jsx("li",{children:"Check that the API server is running"}),a.jsx("li",{children:"Verify database connection settings"}),a.jsxs("li",{children:["Run ",a.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run diagnose"})," to diagnose API issues"]}),a.jsxs("li",{children:["Run ",a.jsx("code",{className:"bg-orange-700 p-1 rounded",children:"npm run dev:full"})," to start both servers at once"]})]})]}),a.jsxs("div",{className:"mt-2 p-2 bg-orange-600 rounded text-xs",children:[a.jsx("strong",{children:"TIP:"})," The API server must be running at http://localhost:3001/api for real data to appear."]})]}):null},MV=e=>{if(!e)return console.warn("API response is null or undefined"),[];if(Array.isArray(e))return e;if(e.data&&Array.isArray(e.data)||e.success&&e.data&&Array.isArray(e.data))return e.data;if(e.items&&Array.isArray(e.items))return e.items;if(typeof e=="object"&&!Array.isArray(e)){const t=Object.values(e);if(t.length===1&&Array.isArray(t[0]))return t[0]}return console.warn("Unable to extract array from API response:",e),[]},IV=e=>{if(!e)return"No item";const t=e.customerName||e.customer_name||e.customer&&e.customer.name||"Unknown",n=e.email||e.customer&&e.customer.email||"",r=e.customerId||e.customer_id||e.id||"";return`${t}${n?` (${n})`:""}${r?` [${r}]`:""}`},Gw=[{value:"new",label:"New"},{value:"in_process",label:"In Process"},{value:"qualified",label:"Qualified"},{value:"unqualified",label:"Unqualified"},{value:"lost",label:"Lost"}],OV=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],RV=[{value:"day",label:"Day Shift"},{value:"night",label:"Night Shift"}];function LV(){const{user:e}=qe(),t=Mn(),[n,r]=x.useState([]),[s,i]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(!1),[y,b]=x.useState(!1),[v,w]=x.useState(!1),[S,j]=x.useState(null),[k,N]=x.useState({show:!1,title:""}),C=new Date().toISOString().split("T")[0],[E,D]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""}),[$,B]=x.useState(0),[F,T]=x.useState(null),[A,z]=x.useState(!1),[M,P]=x.useState({fullName:"",companyName:"",phoneNumber:"",email:"",serviceNeeded:"",siteLocation:"",startDate:"",rentalDays:1,shiftTiming:"",status:"new",source:"",designation:"",notes:""});x.useEffect(()=>{I(),H()},[]),x.useEffect(()=>{console.log("Filtering leads. Current leads array:",n),G()},[n,c,d]),x.useEffect(()=>{if(v&&S){const _=new Date().toISOString().split("T")[0];P({fullName:S.customerName||"",companyName:S.companyName||"",phoneNumber:S.phone||"",email:S.email||"",serviceNeeded:S.serviceNeeded||"",siteLocation:S.siteLocation||"",startDate:S.startDate||_,rentalDays:S.rentalDays||1,shiftTiming:S.shiftTiming||"",status:S.status||"new",source:S.source||"",designation:S.designation||"",notes:S.notes||""})}},[v,S]);const I=async()=>{try{console.log("Fetching leads from API...");const _=await Vl(),L=MV(_);console.log("🧪 Debug leads response:",{originalResponse:_,extractedData:L,isArray:Array.isArray(L),length:Array.isArray(L)?L.length:"not array",firstLead:L.length>0?IV(L[0]):"none"}),console.log("Leads data received:",L),r(L||[]),m(!1)}catch(_){console.error("Error fetching leads:",_),Y("Error fetching leads","error"),r([]),m(!1)}},H=async()=>{try{const L=`${"http://103.224.243.242:3001/api".replace(/\/$/,"")}/auth/sales-agents`;console.log("Fetching sales agents from API at:",L);const R=await fetch(L,{headers:{"Content-Type":"application/json","X-Bypass-Auth":"development-only-123"}});if(R.ok){const Q=await R.json();console.log("Sales agents fetched:",Q),i(Q)}else console.error("Failed to fetch sales agents:",R.status),i([])}catch(_){console.error("Error fetching sales agents:",_),i([])}},G=()=>{if(!Array.isArray(n)){console.warn("Leads is not an array:",n),l([]);return}console.log(`Starting filtering with ${n.length} leads. Current filters:`,{searchTerm:c,statusFilter:d});let _=[...n];c&&(_=_.filter(L=>{var R,Q,J,K;return((R=L==null?void 0:L.customerName)==null?void 0:R.toLowerCase().includes(c.toLowerCase()))||!1||((Q=L==null?void 0:L.companyName)==null?void 0:Q.toLowerCase().includes(c.toLowerCase()))||!1||((J=L==null?void 0:L.email)==null?void 0:J.toLowerCase().includes(c.toLowerCase()))||!1||((K=L==null?void 0:L.phone)==null?void 0:K.includes(c))||!1}),console.log(`After search filter: ${_.length} leads`)),d!=="all"?(_=_.filter(L=>(L==null?void 0:L.status)===d),console.log(`After status filter (${d}): ${_.length} leads`)):(_=_.filter(L=>(L==null?void 0:L.status)!=="converted"),console.log(`After excluding converted leads: ${_.length} leads`)),console.log(`Final filtered leads: ${_.length} leads match criteria`),l(_)},ee=async _=>{var Q;if(_.preventDefault(),!E.fullName||!E.phoneNumber||!E.email||!E.machineryType||!E.location||!E.startDate||!E.rentalDays){Y("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)){Y("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(E.phoneNumber)){Y("Please enter a valid phone number","error");return}try{const J=(e==null?void 0:e.role)==="sales_agent"?e.id:E.assignedTo,K=(e==null?void 0:e.role)==="sales_agent"?e.name:((Q=s.find(De=>De.id===E.assignedTo))==null?void 0:Q.name)||"",ae={customerName:E.fullName,companyName:E.companyName,email:E.email,phone:E.phoneNumber,serviceNeeded:E.machineryType,siteLocation:E.location,startDate:E.startDate,rentalDays:parseInt(E.rentalDays),shiftTiming:E.shiftTiming,status:"new",notes:E.notes,designation:E.designation,...J&&J.trim()!==""?{assignedTo:J,assignedToName:K}:{}};console.log("Creating lead with data:",ae);const ne=await HL(ae);r(De=>[...De,ne]),g(!1),W(),Y("Lead created successfully","success")}catch(J){console.error("Error creating lead:",J),Y("Error creating lead","error")}},ie=async(_,L)=>{try{const R=await xb(_,L);R&&(r(Q=>Q.map(J=>J.id===_?R:J)),Y("Lead status updated","success"))}catch(R){console.error("Error updating lead status:",R),Y("Error updating lead status","error")}},V=_=>{console.log("Selected customer:",_),T(_),b(!1),setTimeout(()=>{z(!0)},100)},X=async()=>{try{if(m(!0),console.log("Creating deal with:",{selectedLead:S,selectedCustomer:F,dealValue:$}),!S){Y("No lead selected","error");return}if(!F){Y("No customer selected","error");return}const _=await KL({title:`Deal for ${F.name}`,description:`Deal created from lead for ${F.name}${F.companyName?` (${F.companyName})`:""}`,leadId:S.id,customerId:F.id,stage:"qualification",value:$,expectedCloseDate:new Date().toISOString(),customer:{name:F.name,email:F.email||S.email,phone:F.phone||S.phone,company:F.companyName||"",address:F.address||"",designation:F.designation||"N/A"},probability:0,createdBy:(e==null?void 0:e.id)||"",assignedTo:S.assignedTo||(e==null?void 0:e.id)||""});console.log("Deal created successfully:",_),await xb(S.id,"converted"),r(L=>L.map(R=>R.id===S.id?{...R,status:"converted"}:R)),Y("Lead converted to deal successfully","success"),z(!1),b(!1),j(null),T(null),B(0),t("/deals")}catch(_){console.error("Error converting lead to deal:",_),Y("Error converting lead to deal","error")}finally{m(!1)}},U=async _=>{if(_.status!=="qualified"){Y("Only qualified leads can be converted to deals","warning");return}j(_),b(!0)},O=async(_,L)=>{try{if(L===""){console.log("Unassigning lead",_);const J=await yb(_,"","Unassigned");J&&(r(K=>K.map(ae=>ae.id===_?J:ae)),Y("Lead unassigned successfully","success"));return}const R=s.find(J=>J.id===L);if(!R){Y("Selected sales agent not found","error");return}const Q=await yb(_,L,R.name);Q&&(r(J=>J.map(K=>K.id===_?Q:K)),Y("Lead assignment updated","success"))}catch(R){console.error("Error updating lead assignment:",R),Y("Error updating lead assignment","error")}},W=()=>{D({fullName:"",companyName:"",phoneNumber:"",email:"",machineryType:"",location:"",startDate:C,rentalDays:"",shiftTiming:"day",notes:"",assignedTo:"",designation:""})},Y=(_,L="success")=>{N({show:!0,title:_,variant:L}),setTimeout(()=>N({show:!1,title:""}),3e3)},oe=async _=>{if(_.preventDefault(),!M.fullName||!M.phoneNumber||!M.email||!M.serviceNeeded||!M.siteLocation||!M.startDate||!M.rentalDays||M.rentalDays<1){Y("Please fill in all required fields","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M.email)){Y("Please enter a valid email address","error");return}if(!/^\+?[\d\s-]{10,}$/.test(M.phoneNumber)){Y("Please enter a valid phone number","error");return}try{const Q=await WL(S.id,{customerName:M.fullName,companyName:M.companyName,email:M.email,phone:M.phoneNumber,serviceNeeded:M.serviceNeeded,siteLocation:M.siteLocation,startDate:M.startDate,rentalDays:M.rentalDays,shiftTiming:M.shiftTiming,status:M.status,source:M.source,designation:M.designation,notes:M.notes});console.log("Update response:",Q),Q?r(J=>{const K=J.map(ae=>ae.id===S.id?Q:ae);return console.log("Updated leads array:",K),K}):(console.log("No updated lead returned, refetching all leads"),await I()),w(!1),j(null),Y("Lead updated successfully","success")}catch(Q){console.error("Error updating lead:",Q),Y("Error updating lead","error")}};return!e||e.role!=="sales_agent"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsx(AV,{data:n,dataType:"leads"}),a.jsxs(ce,{children:[a.jsxs(ge,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4",children:[a.jsx(xe,{className:"text-xl font-semibold text-gray-900",children:"Leads Pipeline"}),a.jsx(q,{onClick:()=>g(!0),className:"whitespace-nowrap self-start sm:self-auto",leftIcon:a.jsx(Mr,{className:"h-4 w-4"}),variant:"accent",children:"Add Lead"})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4 p-4 bg-gradient-to-r from-gray-50/80 to-gray-100/50 rounded-xl border border-gray-200/60 shadow-sm relative z-10",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx(cr,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),a.jsx(ke,{type:"text",placeholder:"Search leads...",value:c,onChange:_=>u(_.target.value),className:"w-full bg-white border-gray-200 focus:border-blue-500 focus:ring-blue-500/20 min-w-0 text-gray-900 placeholder:text-gray-500"})]}),a.jsx("div",{className:"relative z-20 w-full sm:w-[180px] flex-shrink-0",children:a.jsx(Te,{value:d,onChange:_=>h(_),options:[{value:"all",label:"All Status"},...Gw],className:"w-full bg-white border-gray-200"})})]})]}),a.jsx(me,{children:f?a.jsx("div",{className:"text-center py-4",children:"Loading leads..."}):o.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No leads found. Create a new lead to get started."}):a.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-200/60 bg-white shadow-sm",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assigned To"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(_=>a.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/30 transition-all duration-200",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:_.customerName||"Unknown Customer"}),_.companyName&&a.jsx("div",{className:"text-sm text-gray-500",children:_.companyName}),!_.customerName&&!_.companyName&&_.id&&a.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",_.id.substring(0,8),"..."]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.serviceNeeded||"Not specified"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.siteLocation||"Not specified"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Te,{value:_.status,onChange:L=>ie(_.id,L),options:Gw,className:"min-w-[130px]"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                        ",(e==null?void 0:e.role)==="admin"?a.jsx(Te,{value:_.assignedTo||"",onChange:L=>O(_.id,L),options:[{value:"",label:"Unassigned"},...s.map(L=>({value:L.id,label:L.name}))],className:"min-w-[160px]"}):a.jsx("div",{className:"text-sm text-gray-900",children:!_.assignedTo||_.assignedTo===""?"Unassigned":_.assignedToName||"Unassigned"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{j(_),w(!0)},leftIcon:a.jsx(To,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Edit"}),_.status==="qualified"&&a.jsx(q,{variant:"outline",size:"sm",onClick:()=>U(_),leftIcon:a.jsx(QA,{size:16}),className:"hover:bg-blue-50 hover:border-blue-300",children:"Convert to Deal"})]})})]},_.id))})]})})})]}),a.jsx(Ct,{isOpen:p,onClose:()=>{g(!1),W()},title:"Create New Lead",size:"lg",children:a.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[a.jsx(fd,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(fe,{label:"Full Name",value:E.fullName,onChange:_=>D(L=>({...L,fullName:_.target.value})),required:!0}),a.jsx(fe,{label:"Company Name",value:E.companyName,onChange:_=>D(L=>({...L,companyName:_.target.value})),helperText:"Optional"}),a.jsx(fe,{label:"Phone Number",type:"tel",value:E.phoneNumber,onChange:_=>D(L=>({...L,phoneNumber:_.target.value})),required:!0}),a.jsx(fe,{label:"Email Address",type:"email",value:E.email,onChange:_=>D(L=>({...L,email:_.target.value})),required:!0}),a.jsx(Te,{label:"Type of Machinery Needed",options:[{value:"",label:"Select Machinery Type"},...OV],value:E.machineryType,onChange:_=>D(L=>({...L,machineryType:_})),required:!0}),a.jsx(fe,{label:"Site Location",value:E.location,onChange:_=>D(L=>({...L,location:_.target.value})),required:!0}),a.jsx(fe,{label:"Start Date",type:"date",value:E.startDate,min:C,onChange:_=>D(L=>({...L,startDate:_.target.value})),required:!0}),a.jsx(fe,{label:"Number of Rental Days",type:"number",min:"1",value:E.rentalDays,onChange:_=>{const L=Math.max(1,parseInt(_.target.value)||1);D(R=>({...R,rentalDays:L.toString()}))},required:!0}),a.jsx(Te,{label:"Shift Timing",options:RV,value:E.shiftTiming,onChange:_=>D(L=>({...L,shiftTiming:_})),required:!0}),a.jsx(fe,{label:"Designation",value:E.designation,onChange:_=>D(L=>({...L,designation:_.target.value})),placeholder:"Enter designation",helperText:"Optional"}),(e==null?void 0:e.role)==="admin"&&a.jsx(Te,{label:"Assign To",options:[{value:"",label:"Select Sales Agent"},...s.map(_=>({value:_.id,label:_.name}))],value:E.assignedTo,onChange:_=>D(L=>({...L,assignedTo:_})),required:!0})]}),a.jsx(Kt,{label:"Additional Notes",value:E.notes,onChange:_=>D(L=>({...L,notes:_.target.value})),rows:3}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>{g(!1),W()},children:"Cancel"}),"            ",a.jsx(q,{type:"submit",variant:"accent",children:"Create Lead"})]})]})}),a.jsx(_V,{isOpen:y,onClose:()=>{b(!1),j(null),T(null),B(0)},onSelect:V,initialCustomerData:S?{name:S.customerName,email:S.email||"",phone:S.phone||"",companyName:S.companyName||"",address:"",designation:S.designation||""}:void 0}),a.jsx(Ct,{isOpen:A,onClose:()=>{z(!1),j(null),T(null),B(0)},title:"Enter Deal Value",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(fe,{label:"Deal Value",type:"number",value:$===0?"":$,onChange:_=>{const L=_.target.value;B(L===""?0:Number(L))},placeholder:"Enter deal value",helperText:"Leave empty if deal value is not yet determined"}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>{z(!1),j(null),T(null),B(0)},children:"Cancel"}),a.jsx(q,{onClick:X,variant:"accent",children:"Create Deal"})]})]})}),a.jsx(Ct,{isOpen:v,onClose:()=>{w(!1),j(null)},title:"Edit Lead Details",size:"lg",children:S&&a.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[a.jsx(fd,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(fe,{label:"Full Name",value:M.fullName,onChange:_=>P(L=>({...L,fullName:_.target.value})),required:!0}),a.jsx(fe,{label:"Company Name",value:M.companyName,onChange:_=>P(L=>({...L,companyName:_.target.value})),helperText:"Optional"}),a.jsx(fe,{label:"Phone Number",type:"tel",value:M.phoneNumber,onChange:_=>P(L=>({...L,phoneNumber:_.target.value})),required:!0}),a.jsx(fe,{label:"Email Address",type:"email",value:M.email,onChange:_=>P(L=>({...L,email:_.target.value})),required:!0}),a.jsx(fe,{label:"Service Needed",value:M.serviceNeeded,onChange:_=>P(L=>({...L,serviceNeeded:_.target.value})),required:!0}),a.jsx(fe,{label:"Site Location",value:M.siteLocation,onChange:_=>P(L=>({...L,siteLocation:_.target.value})),required:!0}),a.jsx(fe,{label:"Start Date",type:"date",value:M.startDate,onChange:_=>P(L=>({...L,startDate:_.target.value})),required:!0}),a.jsx(fe,{label:"Rental Days",type:"number",min:"1",value:M.rentalDays.toString(),onChange:_=>P(L=>({...L,rentalDays:parseInt(_.target.value)||1})),required:!0}),a.jsx(fe,{label:"Shift Timing",value:M.shiftTiming,onChange:_=>P(L=>({...L,shiftTiming:_.target.value})),placeholder:"e.g., Day Shift, Night Shift"}),a.jsx(Te,{label:"Status",value:M.status,onChange:_=>P(L=>({...L,status:_})),options:[{label:"New",value:"new"},{label:"In Process",value:"in_process"},{label:"Qualified",value:"qualified"},{label:"Unqualified",value:"unqualified"},{label:"Lost",value:"lost"},{label:"Converted",value:"converted"}],required:!0}),a.jsx(Te,{label:"Source",value:M.source,onChange:_=>P(L=>({...L,source:_})),options:[{label:"Select Source",value:""},{label:"Website",value:"website"},{label:"Referral",value:"referral"},{label:"Direct",value:"direct"},{label:"Social Media",value:"social"},{label:"Email",value:"email"},{label:"Phone",value:"phone"},{label:"Other",value:"other"}]})]}),a.jsx("div",{children:a.jsx(fe,{label:"Designation",value:M.designation,onChange:_=>P(L=>({...L,designation:_.target.value})),placeholder:"Job title or role"})}),a.jsx("div",{children:a.jsx(Kt,{label:"Notes",value:M.notes,onChange:_=>P(L=>({...L,notes:_.target.value})),placeholder:"Additional notes or comments...",rows:3})}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>{w(!1),j(null)},children:"Cancel"}),a.jsx(q,{type:"submit",variant:"accent",children:"Save Changes"})]})]})}),k.show&&a.jsx(dt,{title:k.title,variant:k.variant,isVisible:k.show,onClose:()=>N({show:!1,title:""})})]})}function FV({toast:e,onRemove:t}){return x.useEffect(()=>{const n=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(n)},[e.id,e.duration,t]),a.jsxs("div",{className:`
      fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg
      ${e.type==="success"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}
    `,children:[e.type==="success"?a.jsx(RC,{size:20,className:"text-green-600"}):a.jsx(Ll,{size:20,className:"text-red-600"}),a.jsx("span",{className:`text-sm font-medium ${e.type==="success"?"text-green-800":"text-red-800"}`,children:e.message}),a.jsx("button",{onClick:()=>t(e.id),className:`ml-2 ${e.type==="success"?"text-green-600 hover:text-green-800":"text-red-600 hover:text-red-800"}`,children:a.jsx(wi,{size:16})})]})}function $V(){const[e,t]=x.useState([]),n=(s,i="success")=>{const o=Date.now().toString();t(l=>[...l,{id:o,message:s,type:i}])},r=s=>{t(i=>i.filter(o=>o.id!==s))};return x.useEffect(()=>{window.showToast=n},[]),a.jsx("div",{className:"fixed top-0 right-0 z-50 space-y-2 p-4",children:e.map(s=>a.jsx(FV,{toast:s,onRemove:r},s.id))})}const zV="modulepreload",BV=function(e){return"/"+e},Yw={},Qw=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=BV(c),c in Yw)return;Yw[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":zV,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function VV(e){var p,g;console.log("� CALCULATION FUNCTION CALLED for quotation:",e.id),console.log("�💰 Calculating quotation totals for ID:",e.id),console.log("📊 Full quotation object:",e),console.log("📊 Input quotation data:",{foodResources:e.foodResources,accomResources:e.accomResources,numberOfDays:e.numberOfDays,mobDemob:e.mobDemob,workingCost:e.workingCost,totalRent:e.totalRent,riskFactor:e.riskFactor,usage:e.usage,extraCharge:e.extraCharge,mobDemobCost:e.mobDemobCost,foodAccomCost:e.foodAccomCost,usageLoadFactor:e.usageLoadFactor,riskAdjustment:e.riskAdjustment,gstAmount:e.gstAmount});const t=e.workingCost||e.totalRent||0,n=e.foodAccomCost??((e.foodResources||0)*2500+(e.accomResources||0)*4e3)*(e.numberOfDays||1);console.log("🍽️ Food & Accom calculation:",{fromDatabase:e.foodAccomCost,finalValue:n,foodResources:e.foodResources||0,accomResources:e.accomResources||0,numberOfDays:e.numberOfDays||1,usingDatabaseValue:e.foodAccomCost!==void 0&&e.foodAccomCost!==null});const r=(e.siteDistance||0)*(e.runningCostPerKm||100),s=e.mobDemobCost??(e.mobDemob||0);console.log("🚚 Transport & Mob/Demob:",{siteDistance:e.siteDistance||0,runningCostPerKm:e.runningCostPerKm||100,transportCost:r,mobDemobFromDB:e.mobDemobCost,mobDemobFinal:s,usingDatabaseValue:e.mobDemobCost!==void 0&&e.mobDemobCost!==null});const i=e.riskAdjustment??(e.riskFactor==="high"?15e3:e.riskFactor==="medium"?8e3:0),o=e.usageLoadFactor??(e.usage==="heavy"?Math.round(t*.5):0);console.log("⚠️ Risk & Usage factors:",{riskFromDB:e.riskAdjustment,riskFinal:i,usageFromDB:e.usageLoadFactor,usageFinal:o,riskFactor:e.riskFactor,usage:e.usage,usingDatabaseRisk:e.riskAdjustment!==void 0&&e.riskAdjustment!==null,usingDatabaseUsage:e.usageLoadFactor!==void 0&&e.usageLoadFactor!==null});const l=e.extraCharge||0,c={incident1:5e3,incident2:1e4,incident3:15e3},u=(e.incidentalCharges||[]).reduce((y,b)=>y+(c[b]||0),0);let d=0;(p=e.otherFactors)!=null&&p.includes("rigger")&&(d+=4e4),(g=e.otherFactors)!=null&&g.includes("helper")&&(d+=12e3);const h=t+n+r+s+i+o+l+u+d,f=e.gstAmount??(e.includeGst?Math.round(h*.18):0),m=h+f;return console.log("💰 Final calculations:",{workingCost:t,foodAccomCost:n,transportCost:r,mobDemobCost:s,riskAdjustment:i,usageLoadFactor:o,extraCharges:l,incidentalCost:u,otherFactorsCost:d,subtotal:h,gstAmount:f,totalAmount:m,usingDatabaseValues:{foodAccom:e.foodAccomCost!==void 0&&e.foodAccomCost!==null,mobDemob:e.mobDemobCost!==void 0&&e.mobDemobCost!==null,risk:e.riskAdjustment!==void 0&&e.riskAdjustment!==null,usage:e.usageLoadFactor!==void 0&&e.usageLoadFactor!==null,gst:e.gstAmount!==void 0&&e.gstAmount!==null},databaseValues:{foodAccomCost:e.foodAccomCost,mobDemobCost:e.mobDemobCost,riskAdjustment:e.riskAdjustment,usageLoadFactor:e.usageLoadFactor,gstAmount:e.gstAmount}}),{workingCost:t,foodAccomCost:n,transportCost:r,mobDemobCost:s,riskAdjustment:i,usageLoadFactor:o,extraCharges:l,incidentalCost:u,otherFactorsCost:d,subtotal:h,gstAmount:f,totalAmount:m}}const UV=[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}],fE=({calculations:e,formData:t,additionalParams:n,showGst:r=!0})=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Working Cost"})]}),a.jsx("span",{className:"font-bold text-blue-900",children:Ve((e==null?void 0:e.workingCost)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Food & Accommodation"})]}),a.jsx("span",{className:"font-bold text-green-900",children:Ve((e==null?void 0:e.foodAccomCost)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-orange-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Mob/Demob Cost"})]}),a.jsx("span",{className:"font-bold text-orange-900",children:Ve((e==null?void 0:e.mobDemobCost)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sx,{className:"w-4 h-4 text-red-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Risk & Usage"})]}),a.jsx("span",{className:"font-bold text-red-900",children:Ve(((e==null?void 0:e.riskAdjustment)||0)+((e==null?void 0:e.usageLoadFactor)||0))})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nr,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Extra Commercial Charges"})]}),a.jsx("span",{className:"font-bold text-purple-900",children:Ve((e==null?void 0:e.extraCharges)||(t==null?void 0:t.extraCharge)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Incidental Charges"})]}),a.jsx("span",{className:"font-bold text-indigo-900",children:Ve((e==null?void 0:e.incidentalCost)||((t==null?void 0:t.incidentalCharges)||[]).reduce((s,i)=>{const o=UV.find(l=>l.value===i);return s+(o?o.amount:0)},0))})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-4 h-4 text-cyan-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Other Factors"})]}),a.jsx("span",{className:"font-bold text-cyan-900",children:Ve((e==null?void 0:e.otherFactorsCost)||(((t==null?void 0:t.otherFactors)||[]).includes("rigger")?(n==null?void 0:n.riggerAmount)||4e4:0)+(((t==null?void 0:t.otherFactors)||[]).includes("helper")?(n==null?void 0:n.helperAmount)||12e3:0))})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[a.jsx("span",{children:"Subtotal"}),a.jsx("span",{className:"font-semibold text-gray-900",children:Ve(((e==null?void 0:e.totalAmount)||0)-((e==null?void 0:e.gstAmount)||0))})]}),r&&((t==null?void 0:t.includeGst)||(e==null?void 0:e.gstAmount)>0)&&a.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[a.jsx("span",{children:"GST (18%)"}),a.jsx("span",{className:"font-semibold text-gray-900",children:Ve((e==null?void 0:e.gstAmount)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-300",children:[a.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Amount"}),a.jsx("span",{className:"text-2xl font-bold text-blue-600",children:Ve((e==null?void 0:e.totalAmount)||0)})]})]})})]}),$c=[{id:"customer_details",label:"Customer Details",description:"Customer name, contact information, and address",category:"Customer Information",icon:a.jsx(hi,{className:"w-4 h-4"}),defaultChecked:!0},{id:"company_info",label:"Company Information",description:"Company name and business details",category:"Customer Information",icon:a.jsx(XA,{className:"w-4 h-4"}),defaultChecked:!0},{id:"project_duration",label:"Project Duration",description:"Number of days and working hours",category:"Project Details",icon:a.jsx(Hn,{className:"w-4 h-4"}),defaultChecked:!0},{id:"site_location",label:"Site Location & Distance",description:"Work site location and distance from base",category:"Project Details",icon:a.jsx(Hd,{className:"w-4 h-4"}),defaultChecked:!0},{id:"shift_details",label:"Shift & Working Hours",description:"Shift type, day/night, and working schedule",category:"Project Details",icon:a.jsx(qn,{className:"w-4 h-4"}),defaultChecked:!0},{id:"equipment_list",label:"Equipment List",description:"Selected machines and equipment details",category:"Equipment Information",icon:a.jsx(Ut,{className:"w-4 h-4"}),defaultChecked:!0},{id:"equipment_rates",label:"Equipment Base Rates",description:"Base rental rates for each equipment",category:"Equipment Information",icon:a.jsx(nr,{className:"w-4 h-4"}),defaultChecked:!1},{id:"working_cost",label:"Working Cost",description:"Basic working cost calculation",category:"Cost Breakdown",icon:a.jsx(up,{className:"w-4 h-4"}),defaultChecked:!0},{id:"food_accommodation",label:"Food & Accommodation",description:"Food and accommodation charges",category:"Cost Breakdown",icon:a.jsx(en,{className:"w-4 h-4"}),defaultChecked:!0},{id:"mob_demob",label:"Mobilization/Demobilization",description:"Transportation and setup costs",category:"Cost Breakdown",icon:a.jsx(Ut,{className:"w-4 h-4"}),defaultChecked:!0},{id:"risk_usage",label:"Risk & Usage Factors",description:"Risk assessment and usage load factors",category:"Cost Breakdown",icon:a.jsx(sx,{className:"w-4 h-4"}),defaultChecked:!0},{id:"extra_charges",label:"Extra Commercial Charges",description:"Additional commercial charges",category:"Cost Breakdown",icon:a.jsx(nr,{className:"w-4 h-4"}),defaultChecked:!0},{id:"incidental_charges",label:"Incidental Charges",description:"Miscellaneous and incidental costs",category:"Cost Breakdown",icon:a.jsx(ws,{className:"w-4 h-4"}),defaultChecked:!0},{id:"other_factors",label:"Other Factors",description:"Rigger, helper, and other operational factors",category:"Cost Breakdown",icon:a.jsx(en,{className:"w-4 h-4"}),defaultChecked:!0},{id:"cost_summary",label:"Cost Summary",description:"Detailed breakdown of all costs",category:"Financial Summary",icon:a.jsx(up,{className:"w-4 h-4"}),defaultChecked:!0},{id:"gst_details",label:"GST Details",description:"GST calculation and total amount",category:"Financial Summary",icon:a.jsx(nr,{className:"w-4 h-4"}),defaultChecked:!0},{id:"total_amount",label:"Total Amount",description:"Final total amount including all charges",category:"Financial Summary",icon:a.jsx(nr,{className:"w-4 h-4"}),defaultChecked:!0},{id:"terms_conditions",label:"Terms & Conditions",description:"Payment terms and business conditions",category:"Terms & Conditions",icon:a.jsx(St,{className:"w-4 h-4"}),defaultChecked:!0},{id:"payment_terms",label:"Payment Terms",description:"Payment schedule and billing details",category:"Terms & Conditions",icon:a.jsx(nr,{className:"w-4 h-4"}),defaultChecked:!0}],mE=({isOpen:e,onClose:t,onPrint:n})=>{const[r,s]=x.useState($c.filter(d=>d.defaultChecked).map(d=>d.id)),i=d=>{s(h=>h.includes(d)?h.filter(f=>f!==d):[...h,d])},o=()=>{s($c.map(d=>d.id))},l=()=>{s([])},c=()=>{n(r),t()},u=$c.reduce((d,h)=>(d[h.category]||(d[h.category]=[]),d[h.category].push(h),d),{});return a.jsx(Ct,{isOpen:e,onClose:t,title:"Print Options",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Select the information you want to include in your quotation print:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:o,children:"Select All"}),a.jsx(q,{variant:"outline",size:"sm",onClick:l,children:"Deselect All"})]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:Object.entries(u).map(([d,h])=>a.jsxs(ce,{children:[a.jsx(ge,{className:"pb-3",children:a.jsx(xe,{className:"text-base font-medium text-gray-900",children:d})}),a.jsx(me,{className:"pt-0",children:a.jsx("div",{className:"space-y-3",children:h.map(f=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("input",{type:"checkbox",id:f.id,checked:r.includes(f.id),onChange:()=>i(f.id),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("label",{htmlFor:f.id,className:"flex items-center gap-2 cursor-pointer",children:[f.icon,a.jsx("span",{className:"text-sm font-medium text-gray-900",children:f.label})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.description})]})]},f.id))})})]},d))}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(St,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["Selected: ",r.length," of ",$c.length," options"]})]}),a.jsx("p",{className:"text-xs text-blue-700",children:"Your quotation will be generated with the selected information. You can always come back and modify these settings for future prints."})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx(q,{variant:"outline",onClick:t,children:"Cancel"}),a.jsxs(q,{onClick:c,disabled:r.length===0,className:"bg-blue-600 hover:bg-blue-700",children:["Generate PDF (",r.length," items)"]})]})]})})};function WV(e,t){let n=e;return t.includes("customer_details")||(n=n.replace(/<div[^>]*id=["']customer-details["'][^>]*>[\s\S]*?<\/div>/gi,"")),n}const HV={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},machineType:"mobile_crane",orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},selectedMachines:[{id:"sample-equipment",machineType:"mobile_crane",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500},baseRate:4e3,runningCostPerKm:100,quantity:1}],foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"medium",extraCharge:5e3,incidentalCharges:["incident1","incident2"],otherFactorsCharge:2e3,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:96e4,workingCost:96e4,mobDemobCost:15e3,foodAccomCost:39e4,usageLoadFactor:0,riskAdjustment:8e3,gstAmount:243e3,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",otherFactors:["rigger","area"],dealType:"credit",sundayWorking:"no"};function qV({template:e,quotation:t,onDownloadPDF:n,onSendEmail:r,className:s=""}){const[i,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(""),[m,p]=x.useState(!1),[g,y]=x.useState({show:!1,title:""}),b=t||HV;x.useEffect(()=>{(async()=>{var E;if(!e){d("Template is required");return}if(!e.content&&!e.elements){d("Template content is required");return}try{p(!0),d(null),console.log("Template preview received template:",e),console.log("Template preview received quotation:",t);const D=await ml(b,e);console.log("Generated merged content length:",(D==null?void 0:D.length)||0),console.log("Generated merged content preview:",D?D.substring(0,200):"empty"),console.log("Template structure:",{id:e.id,name:e.name,hasContent:!!e.content,hasElements:!!e.elements,elementsCount:((E=e.elements)==null?void 0:E.length)||0}),D&&D.trim()?f(D):(console.warn("Cannot merge template - missing template or content"),f('<div style="padding: 20px;">Template content could not be loaded</div>'))}catch(D){console.error("Error merging template:",D),d("Failed to merge template with quotation data"),f('<div style="padding: 20px; color: red;">Error generating preview</div>')}finally{p(!1)}})()},[e,t]);const v=(C,E="success")=>{y({show:!0,title:C,variant:E}),setTimeout(()=>y({show:!1,title:""}),3e3)},S=[{key:"customer_name",label:"Customer Name",category:"Customer"},{key:"equipment_name",label:"Equipment Name",category:"Equipment"},{key:"project_duration",label:"Project Duration",category:"Project"},{key:"total_amount",label:"Total Amount",category:"Financial"}].reduce((C,E)=>(C[E.category]||(C[E.category]=[]),C[E.category].push(E),C),{}),j=()=>{if(!h){v("No content to copy","error");return}navigator.clipboard.writeText(h).then(()=>{v("Content copied to clipboard","success")}).catch(()=>{v("Failed to copy content","error")})},k=()=>{c(!0)},N=C=>{v(`Generating PDF with ${C.length} selected options`,"success");const E=WV(h,C);console.log("Filtered content for PDF:",E),n&&n()};return u?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 sm:p-4",children:a.jsxs("p",{className:"text-xs sm:text-sm text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",u]})}):a.jsxs("div",{className:`space-y-4 sm:space-y-6 ${s}`,children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:a.jsxs("p",{className:"text-xs sm:text-sm text-blue-800",children:[a.jsx("strong",{children:"Preview Mode:"})," ",t?"Showing preview with actual quotation data.":"Showing preview with sample data. Actual values will be used when generating the quotation."]})}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[a.jsx("div",{className:"flex-1",children:a.jsxs(ce,{children:[a.jsx(ge,{className:"p-3 sm:p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[a.jsx(xe,{className:"text-base sm:text-lg",children:"Quotation Preview"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs(q,{variant:"outline",size:"xs",onClick:k,className:"flex items-center gap-1 w-full sm:w-auto",children:[a.jsx(Wd,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Download PDF"]}),r&&a.jsxs(q,{variant:"outline",size:"xs",onClick:r,className:"flex items-center gap-1 w-full sm:w-auto",children:[a.jsx(fo,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Send Email"]})]})]})}),a.jsxs(me,{className:"p-3 sm:p-6",children:[u?a.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-md p-3 sm:p-4 text-red-800 text-xs sm:text-sm mb-3 sm:mb-4",children:[a.jsxs("p",{className:"font-medium",children:["Error: ",u]}),a.jsx("p",{className:"mt-1",children:"Please try refreshing the page or select a different template."})]}):null,m?a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[a.jsx(rt,{className:"w-6 sm:w-8 h-6 sm:h-8 animate-spin mb-3 sm:mb-4"}),a.jsx("p",{className:"text-xs sm:text-sm",children:"Preparing preview..."})]}):h?a.jsx("div",{className:"prose max-w-none border rounded-md p-3 sm:p-4 text-xs sm:text-sm overflow-x-auto",dangerouslySetInnerHTML:{__html:h}}):a.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500 py-8 sm:py-16 border border-dashed rounded-md",children:[a.jsx(St,{className:"w-6 sm:w-8 h-6 sm:h-8 mb-3 sm:mb-4 text-gray-300"}),a.jsx("p",{className:"text-xs sm:text-sm",children:"No content available"})]}),e&&!e.content&&!e.elements&&!m&&a.jsxs("div",{className:"mt-3 sm:mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-3 sm:p-4 text-yellow-800 text-xs sm:text-sm",children:[a.jsx("p",{className:"font-medium",children:"Warning: Template has no content"}),a.jsx("p",{className:"mt-1",children:"This template appears to be empty. Please edit the template to add content."})]})]})]})}),a.jsxs("div",{className:"w-full md:w-80 bg-white rounded-lg shadow p-6 mt-6 md:mt-0",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Quotation Summary"}),a.jsx(fE,{calculations:(()=>{console.log("🔍 TemplatePreview: Which quotation are we using?"),console.log("📋 quotation prop passed to TemplatePreview:",t),console.log("📋 previewQuotation (quotation || SAMPLE_QUOTATION):",b),console.log("📋 Using sample data?",!t);const C=VV(b);return console.log("🧮 TemplatePreview calculations result:",C),console.log("📋 Preview quotation data used for calculation:",{foodResources:b.foodResources,accomResources:b.accomResources,numberOfDays:b.numberOfDays,mobDemob:b.mobDemob,extraCharge:b.extraCharge,workingCost:b.workingCost,totalRent:b.totalRent}),C})(),formData:{extraCharge:b.extraCharge||0,incidentalCharges:b.incidentalCharges||[],otherFactors:b.otherFactors||[],includeGst:b.includeGst},additionalParams:{riggerAmount:4e4,helperAmount:12e3}})]})]}),a.jsxs(ce,{children:[a.jsx(ge,{className:"p-3 sm:p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[a.jsxs(xe,{className:"flex items-center gap-2 text-base sm:text-lg",children:[a.jsx(St,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Template: ",e.name||"Untitled Template"]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs(q,{variant:"outline",size:"xs",onClick:()=>o(!i),className:"flex items-center gap-1 w-full sm:w-auto",children:[a.jsx(Vu,{className:"w-3 h-3 sm:w-4 sm:h-4"}),i?"Hide":"Show"," Placeholders"]}),a.jsx(q,{variant:"outline",size:"xs",onClick:j,disabled:!h,className:"w-full sm:w-auto",children:"Copy Content"})]})]})}),e.description&&a.jsx(me,{className:"px-3 sm:px-6",children:a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:e.description})})]}),i&&a.jsxs(ce,{children:[a.jsx(ge,{className:"p-3 sm:p-6",children:a.jsx(xe,{className:"text-base sm:text-lg",children:"Available Placeholders"})}),a.jsxs(me,{className:"p-3 sm:p-6",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(S).map(([C,E])=>a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm sm:text-base",children:C}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:E.map(D=>a.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded cursor-pointer hover:bg-gray-200 transition-colors truncate",title:D.description,onClick:()=>{navigator.clipboard.writeText(`{{${D.key}}}`),v(`Copied {{${D.key}}}`,"success")},children:`{{${D.key}}}`},D.key))})]},C))}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4",children:"Click on any placeholder to copy it to your clipboard."})]})]}),g.show&&a.jsx(dt,{title:g.title,variant:g.variant,isVisible:g.show,onClose:()=>y({show:!1,title:""})}),a.jsx(mE,{isOpen:l,onClose:()=>c(!1),onPrint:N})]})}const Kw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},pE=async()=>{try{const e=await fetch("/api/config/quotation",{method:"GET",headers:Ce()});if(!e.ok)throw new Error(`Failed to fetch quotation config: ${e.status}`);return(await e.json()).data||Kw}catch(e){return console.error("Error fetching quotation config:",e),Kw}},gE=async e=>{try{const t=await fetch("/api/config/quotation",{method:"PUT",headers:Ce(),body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to update quotation config")}return(await t.json()).data}catch(t){throw console.error("Error updating quotation config:",t),t}},xE=async e=>{try{const t=await fetch(`/api/config/${e}`,{method:"GET",headers:Ce()});if(!t.ok)throw new Error(`Failed to fetch ${e} config: ${t.status}`);return(await t.json()).data||{}}catch(t){return console.error(`Error fetching ${e} config:`,t),{}}},yE=async(e,t)=>{try{const n=await fetch(`/api/config/${e}`,{method:"PUT",headers:Ce(),body:JSON.stringify(t)});if(!n.ok){const s=await n.json();throw new Error(s.message||`Failed to update ${e} config`)}return(await n.json()).data}catch(n){throw console.error(`Error updating ${e} config:`,n),n}},vE=async()=>xE("resourceRates"),bE=async e=>yE("resourceRates",e),wE=async()=>xE("additionalParams"),jE=async e=>yE("additionalParams",e),GV=async()=>{try{const e=await fetch("/api/config/defaultTemplate",{method:"GET",headers:Ce()});if(!e.ok)throw new Error(`Failed to fetch template config: ${e.status}`);return(await e.json()).data||{defaultTemplateId:null,defaultTemplate:null}}catch(e){return console.error("Error fetching default template:",e),{defaultTemplateId:null,defaultTemplate:null}}},YV=async e=>{try{const t=await fetch(`/api/templates/${e}`,{method:"GET",headers:Ce()});if(!t.ok)throw new Error(`Failed to fetch template: ${t.status}`);return(await t.json()).data||null}catch(t){return console.error("Error fetching template:",t),null}},QV=[{value:"all",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}];function KV(){const{user:e}=qe(),t=Mn(),[n,r]=x.useState([]),[s,i]=x.useState([]),[o,l]=x.useState([]),[c,u]=x.useState(""),[d,h]=x.useState("all"),[f,m]=x.useState(!0),[p,g]=x.useState(null),[y,b]=x.useState(null),[v,w]=x.useState(null),[S,j]=x.useState(!1),[k,N]=x.useState(!1),[C,E]=x.useState(""),[D,$]=x.useState(!1),[B,F]=x.useState(!1),[T,A]=x.useState({show:!1,title:""}),[z,M]=x.useState(null);x.useEffect(()=>{P()},[]),x.useEffect(()=>{H()},[n,c,d]);const P=async()=>{try{m(!0),g(null),console.log("QuotationManagement: Starting to fetch data...");const{getCustomers:R}=await Qw(async()=>{const{getCustomers:ye}=await Promise.resolve().then(()=>OL);return{getCustomers:ye}},void 0);let Q=[],J=[],K=[];try{Q=await Mz(),console.log("QuotationManagement: Fetched quotations:",(Q==null?void 0:Q.length)||0)}catch(ye){console.error("Error fetching quotations:",ye),G("Warning: Could not load quotations","warning")}try{J=await nh(),console.log("QuotationManagement: Fetched deals:",(J==null?void 0:J.length)||0)}catch(ye){console.error("Error fetching deals:",ye),G("Warning: Could not load deals.","warning"),J=[]}try{K=await R(),console.log("QuotationManagement: Fetched customers:",(K==null?void 0:K.length)||0)}catch(ye){console.error("Error fetching customers:",ye),G("Warning: Could not load customers","warning")}const ae=new Map;K.forEach(ye=>{ae.set(ye.id,ye)}),Q.length>0&&console.log("Sample quotation data:",{id:Q[0].id,customerId:Q[0].customerId,customerName:Q[0].customerName,customerContact:Q[0].customerContact,selectedEquipment:Q[0].selectedEquipment}),K.length>0&&console.log("Sample customer data:",{id:K[0].id,name:K[0].name});const ne=Q.map(ye=>{const je={...ye},tt=ae.get(ye.customerId);return tt?(console.log(`Found matching customer for quotation ${ye.id}: ${tt.name}`),je.customerName=je.customerName||tt.name,je.customerContact=je.customerContact||{},je.customerContact.name||(je.customerContact.name=tt.contactName),je.customerContact.company||(je.customerContact.company=tt.name),je.customerContact.email||(je.customerContact.email=tt.email),je.customerContact.phone||(je.customerContact.phone=tt.phone),je.customerContact.address||(je.customerContact.address=tt.address)):console.log(`No matching customer found for quotation ${ye.id} with customerId ${ye.customerId}`),je.customerName=je.customerName||"Unknown Customer",je.customerContact=je.customerContact||{},je.customerContact.name=je.customerContact.name||"Contact Not Available",je.customerContact.company=je.customerContact.company||"No Company",je});r(ne);const De=J.filter(ye=>ye.stage==="qualification"||ye.stage==="proposal");i(De),await I()}catch(R){console.error("Error fetching data:",R),g("Failed to load quotations. Please try again."),G("Error fetching data","error")}finally{m(!1)}},I=async()=>{try{const R=await GV();if(R&&R.defaultTemplateId){const J=await YV(R.defaultTemplateId);if(J){console.log("Loaded template from config:",J),w(J);return}}try{const K=await(await Qw(()=>import("./templateService-PAmnneSw.js"),[])).getTemplates();if(K&&K.length>0){const ae=K.find(ne=>ne.isDefault)||K[0];console.log("Loaded template from templateService:",ae),w(ae);return}}catch(J){console.error("Error loading templates from service:",J)}const Q={id:"fallback-template",name:"Default Template",description:"Standard quotation template",content:`<div style="font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 15px;">
          <div style="text-align: center; margin-bottom: 15px;">
            <h1 style="color: #0052CC; margin: 0; font-size: 22px; font-weight: 600;">ASP CRANES</h1>
            <h2 style="color: #42526E; margin: 2px 0; font-size: 16px; font-weight: 500;">QUOTATION</h2>
            <hr style="border: none; height: 1px; background: #0052CC; margin: 8px 0 0 0;">
          </div>
          <div style="margin-bottom: 15px;">
            <p><strong>Equipment:</strong> {{equipment_name}}</p>
            <p><strong>Duration:</strong> {{project_duration}}</p>
            <p><strong>Total Amount:</strong> {{total_amount}}</p>
          </div>
        </div>`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};console.log("Using fallback template"),w(Q)}catch(R){console.error("Error loading default template:",R);const Q={id:"emergency-template",name:"Basic Template",description:"Basic quotation template",content:'<div style="padding: 20px; font-family: Arial;">Basic quotation for {{equipment_name}}</div>',createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isDefault:!0};w(Q)}},H=()=>{let R=[...n];c&&(R=R.filter(Q=>{var J,K,ae;return(((J=Q.customerContact)==null?void 0:J.name)||Q.customerName||"").toLowerCase().includes(c.toLowerCase())||(((K=Q.customerContact)==null?void 0:K.company)||"").toLowerCase().includes(c.toLowerCase())||(Q.machineType||"").toLowerCase().includes(c.toLowerCase())||Q.selectedMachines&&Q.selectedMachines.some(ne=>(ne.name||"").toLowerCase().includes(c.toLowerCase()))||(((ae=Q.selectedEquipment)==null?void 0:ae.name)||"").toLowerCase().includes(c.toLowerCase())})),d!=="all"&&(R=R.filter(Q=>Q.status===d)),l(R)},G=(R,Q="success",J)=>{A({show:!0,title:R,description:J,variant:Q}),setTimeout(()=>{A({show:!1,title:""})},5e3)},ee=()=>{if(!C){G("Please select a deal","warning");return}console.log("[handleProceedWithDeal] Navigating to /quotations/create?dealId="+C),t(`/quotations/create?dealId=${C}`),N(!1),E("")},ie=async R=>{try{M(R.id),console.log("Editing quotation:",R);const Q=R.dealId||R.leadId;if(!Q){G("Invalid quotation data","error","Missing deal ID");return}const[J,K]=await Promise.all([Wk(R.id),yo(Q)]);if(!K){G("Associated deal not found","error","The deal associated with this quotation no longer exists");return}if(!J){G("Quotation not found","error","The quotation could not be found");return}console.log("Navigating to:",`/quotations/create?dealId=${Q}&quotationId=${R.id}`),t(`/quotations/create?dealId=${Q}&quotationId=${R.id}`,{state:{quotation:J,deal:K}})}catch(Q){console.error("Error preparing quotation edit:",Q),G("Error preparing quotation edit","error")}finally{M(null)}},[V,X]=x.useState(!1),[U,O]=x.useState(null),W=R=>{O(R),X(!0)},Y=R=>{U&&oe(U,R),X(!1),O(null)},oe=async(R,Q)=>{var J;try{if($(!0),console.log("Selected options for PDF:",Q),!v){G("No default template configured","warning","Please set a default template in Configuration settings.");return}const K=ml(R,v),ae=window.open("","_blank");if(!ae){G("Popup blocked","error","Please allow popups to download PDF.");return}ae.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
          <title>Quotation - ${((J=R.customerContact)==null?void 0:J.name)||"Customer"}</title>
          <style>
            @media print {
              body { margin: 0; padding: 20px; }
              @page { size: A4; margin: 20mm; }
            }
          </style>
        </head>
        <body>
          ${K}
        </body>
        </html>
      `),await new Promise(ne=>setTimeout(ne,1e3)),ae.document.close(),ae.print(),ae.close(),G("PDF generated successfully","success")}catch(K){console.error("Error generating PDF:",K),G("Failed to generate PDF","error")}finally{$(!1)}},_=async R=>{var Q,J,K;try{if(F(!0),!v){G("No default template configured","warning","Please set a default template in Configuration settings.");return}const ae=ml(R,v);let ne="Equipment";R.selectedMachines&&R.selectedMachines.length>1?ne=`${R.selectedMachines.length} machines (${R.selectedMachines.map(Nh=>Nh.name).join(", ")})`:R.selectedMachines&&R.selectedMachines.length===1?ne=R.selectedMachines[0].name:(Q=R.selectedEquipment)!=null&&Q.name?ne=R.selectedEquipment.name:R.machineType&&(ne=R.machineType);const De=`Quotation from ASP Cranes - ${R.id.slice(0,8).toUpperCase()}`,ye=((J=R.customerContact)==null?void 0:J.name)||R.customerName||"Customer",je=((K=R.customerContact)==null?void 0:K.email)||"",tt=`Dear ${ye},

Please find your quotation details for ${ne} below:

${ae}

Best regards,
ASP Cranes Team`,Lr=`mailto:${je}?subject=${encodeURIComponent(De)}&body=${encodeURIComponent(tt)}`;window.open(Lr),G("Email prepared successfully","success","Your email client should open with the quotation details.")}catch(ae){console.error("Error sending to customer:",ae),G("Error preparing email","error")}finally{F(!1)}},L=x.useMemo(()=>s.length===0?[{value:"",label:"No deals available"}]:s.map(R=>{var Q,J;return{value:R.id,label:`${((Q=R.customer)==null?void 0:Q.name)||"Unnamed"} - ${((J=R.customer)==null?void 0:J.company)||"No Company"} (${Ve(R.value)})`}}),[s]);return!e||e.role!=="sales_agent"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsx("div",{className:"flex flex-col min-h-screen",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8 max-w-7xl",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Quotation Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create, manage, and send quotations to customers"})]}),"          ",a.jsx(q,{onClick:()=>N(!0),className:"w-full sm:w-auto",leftIcon:a.jsx(Mr,{className:"w-4 h-4"}),variant:"accent",children:"Create New Quotation"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4 mb-6",children:[a.jsx("div",{className:"flex-1",children:a.jsx(ke,{placeholder:"Search by customer, company or equipment...",value:c,onChange:R=>u(R.target.value),leftIcon:a.jsx(cr,{className:"w-4 h-4"}),disabled:f})}),a.jsx("div",{className:"w-full sm:w-48",children:a.jsx(Te,{options:QV,value:d,onChange:h,leftIcon:a.jsx(aM,{className:"w-4 h-4"}),disabled:f})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Quotation History"})}),a.jsx(me,{className:"px-0 sm:px-6",children:f?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(rt,{className:"w-8 h-8 animate-spin text-primary-600"})}):p?a.jsxs("div",{className:"text-center py-8 text-red-500",children:[a.jsx(wi,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),a.jsx("p",{className:"text-lg font-medium",children:p}),a.jsx(q,{variant:"outline",size:"sm",onClick:P,className:"mt-4",children:"Try Again"})]}):o.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(St,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),a.jsx("p",{className:"text-lg font-medium",children:"No quotations found"}),a.jsx("p",{className:"text-sm",children:"Create a new quotation to get started."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Equipment"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Duration"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Total Rent"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{scope:"col",className:"px-2 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(R=>{var Q,J,K,ae;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:a.jsxs("div",{className:"flex items-start flex-col",children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-900",children:((Q=R.customerContact)==null?void 0:Q.name)||R.customerName||"Customer"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:((J=R.customerContact)==null?void 0:J.company)||R.customerName||"No Company"}),a.jsxs("div",{className:"text-xs text-gray-400",children:["ID: ",R.customerId?R.customerId.substring(0,8):"None"]}),a.jsx("div",{className:"text-xs text-gray-500 sm:hidden mt-1",children:R.selectedMachines&&R.selectedMachines.length>0?R.selectedMachines.length===1?R.selectedMachines[0].name:`${R.selectedMachines.length} machines`:((K=R.selectedEquipment)==null?void 0:K.name)||R.machineType||"No equipment data"}),a.jsx("div",{className:"text-xs font-medium text-gray-800 sm:hidden mt-1",children:Ve(R.totalRent)})]})}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell",children:R.selectedMachines&&R.selectedMachines.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:R.selectedMachines.map(ne=>ne.name).join(", ")}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[R.selectedMachines.length," machine",R.selectedMachines.length>1?"s":""]})]}):(ae=R.selectedEquipment)!=null&&ae.name?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:R.selectedEquipment.name}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment"})]}):R.machineType?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-900",children:R.machineType}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Equipment Type"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"No equipment data"}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-400",children:"Type not specified"})]})}),a.jsxs("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden md:table-cell",children:[a.jsxs("div",{className:"text-xs sm:text-sm text-gray-900",children:[R.numberOfDays," days"]}),a.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[R.workingHours," hrs/day"]})]}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 hidden sm:table-cell text-xs sm:text-sm text-gray-900",children:Ve(R.totalRent)}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4",children:a.jsx(Hl,{status:R.status})}),a.jsx("td",{className:"px-2 sm:px-6 py-3 sm:py-4 text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx(q,{variant:"ghost",size:"xs",onClick:()=>ie(R),title:"Edit Quotation",disabled:f||z===R.id,children:z===R.id?a.jsx(rt,{size:14,className:"animate-spin"}):a.jsx(To,{size:14})}),a.jsx(q,{variant:"ghost",size:"xs",onClick:()=>{b(R),j(!0)},title:"Preview Quotation",disabled:!v||f,children:a.jsx(Bu,{size:14})}),a.jsx(q,{variant:"ghost",size:"xs",onClick:()=>W(R),disabled:D||!v||f,title:"Download PDF",children:D?a.jsx(rt,{size:14,className:"animate-spin"}):a.jsx(Wd,{size:14})}),a.jsx(q,{variant:"ghost",size:"xs",onClick:()=>_(R),disabled:B||!v||f,title:"Send to Customer",children:B?a.jsx(rt,{size:14,className:"animate-spin"}):a.jsx(fo,{size:14})})]})})]},R.id)})})]})})})]}),a.jsx(Ct,{isOpen:k,onClose:()=>{N(!1),E("")},title:"Create New Quotation",size:"lg",children:a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2 sm:mb-4",children:"Select a Qualified Deal"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4",children:"Choose from qualified deals to create a quotation. Only deals in qualification or proposal stage are shown."}),"              ",a.jsx(Te,{options:f?[{value:"",label:"Loading deals..."}]:[{value:"",label:"Select a Deal"},...L.filter(R=>R.value!=="")],value:C,onChange:E,label:"Available Deals",disabled:f,required:!0}),C&&a.jsx("div",{className:"mt-3 sm:mt-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(()=>{const R=s.find(Q=>Q.id===C);return R?a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm sm:text-base font-medium text-blue-900",children:"Selected Deal Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Customer:"}),a.jsx("p",{className:"text-blue-800",children:R.customer.name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Company:"}),a.jsx("p",{className:"text-blue-800",children:R.customer.company})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Value:"}),a.jsx("p",{className:"text-blue-800",children:Ve(R.value)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700 font-medium",children:"Stage:"}),a.jsx("p",{className:"text-blue-800 capitalize",children:R.stage})]})]})]}):null})()})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 border-t",children:[a.jsx(q,{variant:"outline",onClick:()=>{N(!1),E("")},disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),a.jsxs(q,{onClick:ee,disabled:!C||f,className:"w-full sm:w-auto flex items-center justify-center gap-2",variant:"accent",children:[f?a.jsx(rt,{className:"w-4 h-4 animate-spin"}):a.jsx(Mr,{className:"w-4 h-4"}),"Create Quotation"]})]})]})}),a.jsx(Ct,{isOpen:S,onClose:()=>j(!1),title:"Quotation Preview",size:"full",children:y&&v&&a.jsx("div",{className:"flex flex-col md:flex-row gap-8",children:a.jsx("div",{className:"flex-1",children:a.jsx(qV,{quotation:y,template:v,onDownloadPDF:()=>oe(y),onSendEmail:()=>_(y)})})})}),T.show&&a.jsx(dt,{title:T.title,variant:T.variant,isVisible:T.show,onClose:()=>A({show:!1,title:""})}),a.jsx(mE,{isOpen:V,onClose:()=>X(!1),onPrint:Y})]})})}const Xw={orderTypeLimits:{micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}},Jw={foodRate:2500,accommodationRate:4e3,transportRate:0},zf={riggerAmount:4e4,helperAmount:12e3,incidentalOptions:[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}],usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}},XV=5*60*1e3,JV=YC((e,t)=>{let n=[];const r=s=>{n.forEach(i=>i(s))};return{quotationConfig:null,resourceRatesConfig:null,additionalParamsConfig:null,isLoading:!1,errors:{},lastFetchTimes:{},fetchAllConfigs:async()=>{const{fetchQuotationConfig:s,fetchResourceRatesConfig:i,fetchAdditionalParamsConfig:o}=t();e({isLoading:!0,errors:{}});try{await Promise.all([s(),i(),o()])}catch(l){console.error("Error fetching configurations:",l)}finally{e({isLoading:!1})}},fetchQuotationConfig:async()=>{try{const s=await pE();e(i=>({quotationConfig:s||Xw,lastFetchTimes:{...i.lastFetchTimes,quotation:Date.now()},errors:{...i.errors,quotation:""}}))}catch(s){console.error("Error fetching quotation config:",s),e(i=>({quotationConfig:Xw,errors:{...i.errors,quotation:"Failed to fetch quotation configuration"}}))}},fetchResourceRatesConfig:async()=>{try{const s=await vE();e(i=>({resourceRatesConfig:s||Jw,lastFetchTimes:{...i.lastFetchTimes,resourceRates:Date.now()},errors:{...i.errors,resourceRates:""}}))}catch(s){console.error("Error fetching resource rates config:",s),e(i=>({resourceRatesConfig:Jw,errors:{...i.errors,resourceRates:"Failed to fetch resource rates configuration"}}))}},fetchAdditionalParamsConfig:async()=>{try{const s=await wE();e(i=>({additionalParamsConfig:{...zf,...s},lastFetchTimes:{...i.lastFetchTimes,additionalParams:Date.now()},errors:{...i.errors,additionalParams:""}}))}catch(s){console.error("Error fetching additional params config:",s),e(i=>({additionalParamsConfig:zf,errors:{...i.errors,additionalParams:"Failed to fetch additional parameters configuration"}}))}},updateQuotationConfig:async s=>{try{const i=await gE({orderTypeLimits:s});e(o=>({quotationConfig:i,lastFetchTimes:{...o.lastFetchTimes,quotation:Date.now()},errors:{...o.errors,quotation:""}})),r("quotation")}catch(i){throw console.error("Error updating quotation config:",i),e(o=>({errors:{...o.errors,quotation:"Failed to update quotation configuration"}})),i}},updateResourceRatesConfig:async s=>{try{const i=await bE(s);e(o=>({resourceRatesConfig:i,lastFetchTimes:{...o.lastFetchTimes,resourceRates:Date.now()},errors:{...o.errors,resourceRates:""}})),r("resourceRates")}catch(i){throw console.error("Error updating resource rates config:",i),e(o=>({errors:{...o.errors,resourceRates:"Failed to update resource rates configuration"}})),i}},updateAdditionalParamsConfig:async s=>{try{const i=await jE(s);e(o=>({additionalParamsConfig:{...zf,...i},lastFetchTimes:{...o.lastFetchTimes,additionalParams:Date.now()},errors:{...o.errors,additionalParams:""}})),r("additionalParams")}catch(i){throw console.error("Error updating additional params config:",i),e(o=>({errors:{...o.errors,additionalParams:"Failed to update additional parameters configuration"}})),i}},invalidateConfig:s=>{e(i=>{const o={...i.lastFetchTimes};return delete o[s],{lastFetchTimes:o}})},isConfigStale:(s,i=XV)=>{const{lastFetchTimes:o}=t(),l=o[s];return l?Date.now()-l>i:!0},subscribeToConfigChanges:s=>(n.push(s),()=>{n=n.filter(i=>i!==s)})}}),ZV=()=>{const{quotationConfig:e,resourceRatesConfig:t,additionalParamsConfig:n,isLoading:r,errors:s,fetchAllConfigs:i,fetchQuotationConfig:o,fetchResourceRatesConfig:l,fetchAdditionalParamsConfig:c,subscribeToConfigChanges:u,isConfigStale:d}=JV(),h=x.useCallback(async()=>{await i()},[i]),f=x.useCallback(async m=>{switch(m){case"quotation":await o();break;case"resourceRates":await l();break;case"additionalParams":await c();break}},[o,l,c]);return x.useEffect(()=>((async()=>{(!e||d("quotation"))&&await o(),(!t||d("resourceRates"))&&await l(),(!n||d("additionalParams"))&&await c()})(),u(g=>{console.log(`Configuration changed: ${g}. Quotation components will use updated values.`),window.dispatchEvent(new CustomEvent("configurationChanged",{detail:{configType:g}}))})),[e,t,n,o,l,c,u,d]),{quotationConfig:e,resourceRates:t,additionalParams:n,isLoading:r,errors:s,refreshConfigurations:h,refreshSpecificConfig:f}},Bf=(e,t)=>{x.useEffect(()=>{const n=r=>{t(r.detail)};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}},[e,t])},eU=[{value:"",label:"Select machine type..."},{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],tU=[{value:"single",label:"Single Shift"},{value:"double",label:"Double Shift"}],nU=[{value:"day",label:"Day"},{value:"night",label:"Night"}],rU=[{value:"normal",label:"Normal"},{value:"heavy",label:"Heavy"}],Zw=[{value:"no_advance",label:"No Advance"},{value:"credit",label:"Credit"},{value:"long_credit",label:"Long Credit"}],sU=[{value:"high",label:"High Risk"},{value:"medium",label:"Medium Risk"},{value:"low",label:"Low Risk"}],iU=[{value:"area",label:"Area"},{value:"condition",label:"Condition"},{value:"customer_reputation",label:"Customer Reputation"},{value:"rigger",label:"Rigger"},{value:"helper",label:"Helper"}],e1=[{value:"incident1",label:"Incident 1 - ₹5,000",amount:5e3},{value:"incident2",label:"Incident 2 - ₹10,000",amount:1e4},{value:"incident3",label:"Incident 3 - ₹15,000",amount:15e3}];function oU(){var T,A,z,M,P,I,H,G,ee,ie,V,X;const{user:e}=qe(),t=Mn(),[n]=BA(),r=lr(),s=n.get("dealId")||"",i=n.get("quotationId"),{quotationConfig:o,resourceRates:l,additionalParams:c}=ZV(),[u,d]=x.useState(null),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(0),[w,S]=x.useState({show:!1,title:""}),[j,k]=x.useState({machineType:"",selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[],orderType:"micro",numberOfDays:0,workingHours:8,foodResources:0,accomResources:0,siteDistance:0,usage:"normal",riskFactor:"low",extraCharge:0,incidentalCharges:[],otherFactorsCharge:0,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:0,mobRelaxation:0,runningCostPerKm:0,version:1,createdBy:(e==null?void 0:e.id)||"",status:"draft",otherFactors:[],dealType:Zw[0].value,sundayWorking:"no"}),[N,C]=x.useState({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});Bf("resourceRatesUpdated",()=>{console.log("Resource rates updated, recalculating quotation..."),$()}),Bf("additionalParamsUpdated",()=>{console.log("Additional parameters updated, recalculating quotation..."),$()}),Bf("quotationConfigUpdated",U=>{if(console.log("Quotation configuration updated, checking order type...",U),j.numberOfDays>0){const O=D(j.numberOfDays);O!==j.orderType&&k(W=>({...W,orderType:O}))}$()}),x.useEffect(()=>{E()},[s,i]),x.useEffect(()=>{$()},[j,b]),x.useEffect(()=>{j.workingHours!==void 0&&$()},[j.workingHours]),x.useEffect(()=>{var U;if(j.orderType&&((U=j.selectedEquipment)!=null&&U.id)&&Array.isArray(h)&&h.length>0){const O=h.find(W=>W.id===j.selectedEquipment.id);if(O!=null&&O.baseRates){const W=O.baseRates[j.orderType];v(W)}}j.selectedMachines.length>0&&Array.isArray(h)&&h.length>0&&k(O=>({...O,selectedMachines:O.selectedMachines.map(W=>{const Y=h.find(oe=>oe.id===W.id);return Y!=null&&Y.baseRates?{...W,baseRate:Y.baseRates[j.orderType]||W.baseRate}:W})}))},[j.orderType,h.length]),x.useEffect(()=>{j.machineType?(async()=>{try{const O=await QL(j.machineType);f(Array.isArray(O)?O:[])}catch(O){console.error("Error fetching equipment:",O),f([])}})():f([])},[j.machineType]);const E=async()=>{var U,O,W,Y,oe,_,L,R;try{p(!0),console.log("[QuotationCreation] Fetching data with dealId:",s,"quotationId:",i);const Q=r.state;let J=null,K=null;if(Q&&(Q.quotation&&(J=Q.quotation,console.log("[QuotationCreation] Found quotation in navigation state:",J)),Q.deal&&(K=Q.deal,console.log("[QuotationCreation] Found deal in navigation state:",K),d(K))),!K&&s)try{K=await yo(s),console.log("[QuotationCreation] Fetched deal data:",K),d(K)}catch(ne){console.error("[QuotationCreation] Error fetching deal by ID:",ne),B("Warning: Could not load deal details. You can still create a quotation.","warning"),d({id:s,customer:{name:"Unknown Customer",email:"",phone:"",company:"Unknown Company",address:"",designation:""},title:"Unknown Deal",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()})}else K||d({id:"new",customer:{name:"New Customer",email:"",phone:"",company:"",address:"",designation:""},title:"New Quotation",description:"",value:0,stage:"qualification",leadId:"",customerId:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),assignedTo:"",probability:0,expectedCloseDate:new Date().toISOString()});const ae=await _x();if(console.log("Fetched equipment data:",ae),f(ae),i){let ne=J;if(!ne)try{console.log("[QuotationCreation] Fetching existing quotation from API:",i),ne=await Wk(i)}catch(De){console.error("[QuotationCreation] Error fetching quotation:",De),B("Error loading quotation data","error")}if(ne){console.log("[QuotationCreation] Loading quotation data for ID:",ne.id);const De={...j,machineType:ne.machineType||"",selectedEquipment:ne.selectedEquipment||j.selectedEquipment,selectedMachines:ne.selectedMachines||[],orderType:ne.orderType||"micro",numberOfDays:ne.numberOfDays||0,workingHours:ne.workingHours||8,foodResources:ne.foodResources||0,accomResources:ne.accomResources||0,siteDistance:ne.siteDistance||0,usage:ne.usage||"normal",riskFactor:ne.riskFactor||"low",extraCharge:ne.extraCharge||0,incidentalCharges:ne.incidentalCharges||[],otherFactorsCharge:ne.otherFactorsCharge||0,billing:ne.billing||"gst",includeGst:ne.includeGst!==void 0?ne.includeGst:!0,shift:ne.shift||"single",dayNight:ne.dayNight||"day",mobDemob:ne.mobDemob||0,mobRelaxation:ne.mobRelaxation||0,runningCostPerKm:ne.runningCostPerKm||0,otherFactors:ne.otherFactors||[],dealType:ne.dealType||Zw[0].value,sundayWorking:ne.sundayWorking||"no",version:ne.version||1,status:ne.status||"draft",customerName:ne.customerName||((U=K==null?void 0:K.customer)==null?void 0:U.name)||"",customerContact:ne.customerContact||{name:((O=K==null?void 0:K.customer)==null?void 0:O.name)||"",email:((W=K==null?void 0:K.customer)==null?void 0:W.email)||"",phone:((Y=K==null?void 0:K.customer)==null?void 0:Y.phone)||"",company:((oe=K==null?void 0:K.customer)==null?void 0:oe.company)||"",address:((_=K==null?void 0:K.customer)==null?void 0:_.address)||"",designation:((L=K==null?void 0:K.customer)==null?void 0:L.designation)||""}};if(console.log("[QuotationCreation] Form data populated with",Object.keys(De).length,"fields"),k(De),ne.calculations&&(console.log("[QuotationCreation] Setting calculations from loaded quotation:",ne.calculations),C(ne.calculations)),(R=ne.selectedEquipment)!=null&&R.id&&ae){const ye=ae.find(je=>je.id===ne.selectedEquipment.id);if(ye!=null&&ye.baseRates){const je=ye.baseRates[ne.orderType||"micro"];v(je)}}if(setTimeout(()=>{console.log("[QuotationCreation] Forcing recalculation after data load"),$()},100),!K&&ne.dealId)try{const ye=await yo(ne.dealId);ye&&(console.log("[QuotationCreation] Loaded deal from quotation:",ye),d(ye))}catch(ye){console.warn("[QuotationCreation] Could not load deal for quotation:",ye)}}else console.warn("[QuotationCreation] No quotation found with ID:",i),B("Quotation not found","warning")}else f(ae);console.log("Quotation config managed by centralized store")}catch(Q){console.error("Error fetching data:",Q),B("Error fetching data","error")}finally{p(!1)}},D=U=>{if(!(o!=null&&o.orderTypeLimits))return"micro";const O=o.orderTypeLimits;return U<=0?"micro":U>=O.yearly.minDays?"yearly":U>=O.monthly.minDays?"monthly":U>=O.small.minDays?"small":"micro"},$=()=>{console.log("Calculating quotation with working hours:",j.workingHours),console.log("FormData.numberOfDays:",j.numberOfDays),console.log("SelectedEquipmentBaseRate:",b),console.log("FormData.selectedMachines:",j.selectedMachines);const U=j.selectedMachines.length>0,O=b;if(!j.numberOfDays||!U&&!O){console.log("❌ Calculation stopped - missing days or equipment",{numberOfDays:j.numberOfDays,hasMachines:U,effectiveBaseRate:O}),C({baseRate:0,totalHours:0,workingCost:0,mobDemobCost:0,foodAccomCost:0,usageLoadFactor:0,extraCharges:0,riskAdjustment:0,gstAmount:0,totalAmount:0});return}const W=Number(j.numberOfDays),Y=Number(j.workingHours)||8,oe=W*Y;console.log("✅ Calculation inputs:",{numberOfDays:W,workingHours:Y,totalHours:oe,effectiveBaseRate:O,hasMachines:U,orderType:j.orderType});let _=0;U?_=j.selectedMachines.reduce((Fr,ur)=>{const As=ur.baseRate*ur.quantity;return j.orderType==="monthly"?Fr+As*Math.ceil(W/26):Fr+As*oe},0):j.orderType==="monthly"?_=O*Math.ceil(W/26):_=O*oe,console.log("💰 Working cost calculated:",_);const L=(l==null?void 0:l.foodRate)||0,R=(l==null?void 0:l.accommodationRate)||0,Q=(j.foodResources||0)*L*W,J=(j.accomResources||0)*R*W,K=Q+J;let ae=0;if(j.mobDemob>0)ae=j.mobDemob;else if(j.siteDistance>0){if(U)ae=j.selectedMachines.reduce((Fr,ur)=>{const As=j.siteDistance||0,kh=ur.runningCostPerKm||0,aT=As*2*kh+5e3;return Fr+aT*ur.quantity},0);else{const Fr=j.siteDistance||0,ur=j.runningCostPerKm||0;ae=Fr*2*ur+5e3}j.mobRelaxation>0&&(ae=ae*(1-j.mobRelaxation/100))}const ne=_;let De=0,ye=0;j.riskFactor==="high"?De=.15:j.riskFactor==="medium"?De=.1:De=.05,j.usage==="heavy"?ye=.1:ye=.05;const je=ne*De,tt=ne*ye,Lr=Number(j.extraCharge)||0,Nh=j.incidentalCharges.reduce((Fr,ur)=>{const As=e1.find(kh=>kh.value===ur);return Fr+(As?As.amount:0)},0),iT=(j.otherFactors.includes("rigger")?(c==null?void 0:c.riggerAmount)||4e4:0)+(j.otherFactors.includes("helper")?(c==null?void 0:c.helperAmount)||12e3:0),_y=_+K+ae+je+tt+Lr+Nh+iT,Ay=j.includeGst?_y*.18:0,oT=_y+Ay,My={baseRate:O,totalHours:oe,workingCost:_,mobDemobCost:ae,foodAccomCost:K,usageLoadFactor:tt,extraCharges:Lr,riskAdjustment:je,gstAmount:Ay,totalAmount:oT};console.log("🎯 Final calculations:",My),C(My)},B=(U,O="success",W)=>{S({show:!0,title:U,description:W,variant:O}),setTimeout(()=>S({show:!1,title:""}),5e3)},F=async U=>{var O,W,Y,oe,_,L,R,Q,J,K,ae,ne,De;if(U.preventDefault(),!j.numberOfDays||j.numberOfDays===0){B("Please enter the number of days","error");return}if(j.selectedMachines.length===0&&!j.selectedEquipment.id){B("Please select at least one machine","error");return}try{y(!0);const ye={...j,dealId:s||"new",customerName:j.customerName||((O=u==null?void 0:u.customer)==null?void 0:O.name)||"",customerContact:{name:((W=j.customerContact)==null?void 0:W.name)||((Y=u==null?void 0:u.customer)==null?void 0:Y.name)||"",email:((oe=j.customerContact)==null?void 0:oe.email)||((_=u==null?void 0:u.customer)==null?void 0:_.email)||"",phone:((L=j.customerContact)==null?void 0:L.phone)||((R=u==null?void 0:u.customer)==null?void 0:R.phone)||"",company:((Q=j.customerContact)==null?void 0:Q.company)||((J=u==null?void 0:u.customer)==null?void 0:J.company)||"",address:((K=j.customerContact)==null?void 0:K.address)||((ae=u==null?void 0:u.customer)==null?void 0:ae.address)||"",designation:((ne=j.customerContact)==null?void 0:ne.designation)||((De=u==null?void 0:u.customer)==null?void 0:De.designation)||""},calculations:N,totalAmount:N.totalAmount,totalCost:N.totalAmount,workingCost:N.workingCost,mobDemobCost:N.mobDemobCost,foodAccomCost:N.foodAccomCost,usageLoadFactor:N.usageLoadFactor,riskAdjustment:N.riskAdjustment,gstAmount:N.gstAmount,createdBy:(e==null?void 0:e.id)||"",updatedAt:new Date().toISOString()};i?(await _z(i,ye),B("Quotation updated successfully","success")):(await Az(ye),B("Quotation created successfully","success")),t("/quotations")}catch(ye){console.error("Error saving quotation:",ye),B("Error saving quotation","error")}finally{y(!1)}};return m?a.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading quotation form..."})]})}):a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsx("style",{children:`
          input[type="number"]::-webkit-inner-spin-button,
          input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
          }
          input[type="number"] {
            -moz-appearance: textfield;
          }
        `}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>t("/quotations"),leftIcon:a.jsx(IC,{size:16}),className:"self-start",children:"Back"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:i?"Edit Quotation":"Create Quotation"}),a.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:["For ",((T=u==null?void 0:u.customer)==null?void 0:T.name)||"New Customer"," - ",(u==null?void 0:u.title)||"New Quotation"]})]})]})}),a.jsxs("form",{onSubmit:F,className:"max-w-full mx-auto px-2 sm:px-4",children:[a.jsx(fd,{}),a.jsxs(ce,{className:"mb-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsx(ge,{className:"pb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(en,{className:"w-5 h-5 text-gray-500"}),a.jsx(xe,{className:"text-lg font-medium",children:"Customer Information"})]})}),a.jsx(me,{className:"pt-0",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 mb-1",children:"Customer"}),a.jsx("div",{className:"font-semibold text-gray-900",children:j.customerName||((A=u==null?void 0:u.customer)==null?void 0:A.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 mb-1",children:"Company"}),a.jsx("div",{className:"font-semibold text-gray-900",children:((z=j.customerContact)==null?void 0:z.company)||((M=u==null?void 0:u.customer)==null?void 0:M.company)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 mb-1",children:"Email"}),a.jsx("div",{className:"font-semibold text-gray-900 break-all",children:((P=j.customerContact)==null?void 0:P.email)||((I=u==null?void 0:u.customer)==null?void 0:I.email)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 mb-1",children:"Phone"}),a.jsx("div",{className:"font-semibold text-gray-900",children:((H=j.customerContact)==null?void 0:H.phone)||((G=u==null?void 0:u.customer)==null?void 0:G.phone)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 mb-1",children:"Designation"}),a.jsx("div",{className:"font-semibold text-gray-900",children:((ee=j.customerContact)==null?void 0:ee.designation)||((ie=u==null?void 0:u.customer)==null?void 0:ie.designation)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-600 mb-1",children:"Address"}),a.jsx("div",{className:"font-semibold text-gray-900",children:((V=j.customerContact)==null?void 0:V.address)||((X=u==null?void 0:u.customer)==null?void 0:X.address)||"N/A"})]})]})})]}),a.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs(ce,{className:"shadow-sm",children:[a.jsx(ge,{className:"pb-3",children:a.jsxs(xe,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(Hn,{className:"w-4 h-4 text-gray-500"}),"Duration"]})}),a.jsxs(me,{className:"pt-0 space-y-3",children:[a.jsx(fe,{type:"number",label:"Number of Days",value:j.numberOfDays||"",onChange:U=>{const O=U.target.value===""?0:Number(U.target.value),W=D(O);k(Y=>{const oe=O>0&&W!==Y.orderType;let _=[...Y.selectedMachines];return oe&&(_=Y.selectedMachines.map(L=>{var R;return{...L,baseRate:((R=L.baseRates)==null?void 0:R[W])||L.baseRate}})),{...Y,numberOfDays:O,orderType:O>0?W:Y.orderType,selectedMachines:_}})},required:!0,min:"1",placeholder:"Enter days"}),a.jsx(fe,{type:"number",label:"Working Hours/Day",value:j.workingHours||"",onChange:U=>{const O=Number(U.target.value)||8;k(W=>({...W,workingHours:O}))},min:"1",max:"24",placeholder:"8"})]})]}),a.jsxs(ce,{className:"shadow-sm",children:[a.jsx(ge,{className:"pb-3",children:a.jsxs(xe,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-gray-500"}),"Machine Selection"]})}),a.jsxs(me,{className:"pt-0 space-y-3",children:[a.jsx(Te,{label:"Machine Type",value:j.machineType,onChange:U=>k(O=>({...O,machineType:U,selectedEquipment:{id:"",equipmentId:"",name:"",baseRates:{micro:0,small:0,monthly:0,yearly:0}},selectedMachines:[]})),options:eU,required:!0}),j.machineType&&a.jsx(Te,{label:"Equipment",value:j.selectedEquipment.id,onChange:U=>{const O=h.find(W=>W.id===U);if(O){const W=O.baseRates[j.orderType];v(W),k(Y=>({...Y,selectedEquipment:{id:O.id,equipmentId:O.equipmentId,name:O.name,baseRates:O.baseRates},baseRate:W,runningCostPerKm:O.runningCostPerKm||0}))}},options:[{value:"",label:"Select equipment..."},...h.map(U=>({value:U.id,label:`${U.name} (${U.equipmentId})`}))],required:j.selectedMachines.length===0})]})]}),a.jsxs(ce,{className:"shadow-sm",children:[a.jsx(ge,{className:"pb-3",children:a.jsxs(xe,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(ws,{className:"w-4 h-4 text-gray-500"}),"Configuration"]})}),a.jsxs(me,{className:"pt-0 space-y-3",children:[a.jsx(Te,{label:"Shift Type",value:j.shift,onChange:U=>k(O=>({...O,shift:U})),options:tU}),a.jsx(Te,{label:"Time",value:j.dayNight,onChange:U=>k(O=>({...O,dayNight:U})),options:nU})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs(ce,{className:"shadow-sm",children:[a.jsx(ge,{className:"pb-3",children:a.jsxs(xe,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(en,{className:"w-4 h-4 text-gray-500"}),"Food & Accommodation"]})}),a.jsxs(me,{className:"pt-0 space-y-3",children:[a.jsx(fe,{type:"number",label:"Food Resources",value:j.foodResources||"",onChange:U=>{k(O=>({...O,foodResources:Number(U.target.value)||0}))},min:"0",placeholder:"Number of people"}),a.jsx(fe,{type:"number",label:"Accommodation Resources",value:j.accomResources||"",onChange:U=>{k(O=>({...O,accomResources:Number(U.target.value)||0}))},min:"0",placeholder:"Number of people"})]})]}),a.jsxs(ce,{className:"shadow-sm",children:[a.jsx(ge,{className:"pb-3",children:a.jsxs(xe,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-gray-500"}),"Transport & Site"]})}),a.jsxs(me,{className:"pt-0 space-y-3",children:[a.jsx(fe,{type:"number",label:"Site Distance (km)",value:j.siteDistance||"",onChange:U=>{k(O=>({...O,siteDistance:Number(U.target.value)||0}))},min:"0",placeholder:"Distance in km"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(Te,{label:"Usage",value:j.usage,onChange:U=>k(O=>({...O,usage:U})),options:rU}),a.jsx(Te,{label:"Risk Level",value:j.riskFactor,onChange:U=>k(O=>({...O,riskFactor:U})),options:sU})]})]})]})]}),a.jsxs(ce,{className:"shadow-sm mb-6",children:[a.jsx(ge,{className:"pb-3",children:a.jsxs(xe,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(nr,{className:"w-4 h-4 text-gray-500"}),"Additional Charges"]})}),a.jsx(me,{className:"pt-0",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(fe,{type:"number",label:"Extra Commercial Charges",value:j.extraCharge||"",onChange:U=>{k(O=>({...O,extraCharge:Number(U.target.value)||0}))},min:"0",placeholder:"₹0"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Incidental Charges"}),a.jsx("div",{className:"space-y-2",children:e1.map(U=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:j.incidentalCharges.includes(U.value),onChange:O=>{O.target.checked?k(W=>({...W,incidentalCharges:[...W.incidentalCharges,U.value]})):k(W=>({...W,incidentalCharges:W.incidentalCharges.filter(Y=>Y!==U.value)}))},className:"mr-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:U.label})]},U.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Factors"}),a.jsx("div",{className:"space-y-2",children:iU.map(U=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:j.otherFactors.includes(U.value),onChange:O=>{O.target.checked?k(W=>({...W,otherFactors:[...W.otherFactors,U.value]})):k(W=>({...W,otherFactors:W.otherFactors.filter(Y=>Y!==U.value)}))},className:"mr-2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-gray-700",children:[U.label,U.value==="rigger"&&" (₹40,000)",U.value==="helper"&&" (₹12,000)"]})]},U.value))})]})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>t("/quotations"),className:"sm:flex-1",children:"Cancel"}),a.jsx(q,{type:"submit",disabled:g||j.selectedMachines.length===0&&!j.selectedEquipment.id,className:"sm:flex-1 bg-primary-600 hover:bg-primary-700",leftIcon:g?a.jsx(qn,{className:"animate-spin"}):a.jsx(bi,{}),variant:"accent",children:g?"Saving...":i?"Update Quotation":"Create Quotation"}),j.selectedMachines.length===0&&!j.selectedEquipment.id&&a.jsx("div",{className:"text-xs text-center text-amber-600 col-span-2",children:"Please add at least one machine"})]})]}),a.jsx("div",{className:"w-full xl:w-[400px] flex-shrink-0",children:a.jsx("div",{className:"sticky top-6",children:a.jsxs(ce,{className:"shadow-xl border border-gray-200 bg-white",children:[a.jsx(ge,{className:"border-b border-gray-100 pb-4 bg-gradient-to-r from-blue-50 to-white",children:a.jsxs(xe,{className:"text-lg font-bold flex items-center gap-2 text-blue-800",children:[a.jsx(up,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{children:"Quotation Summary"})]})}),a.jsxs(me,{className:"pt-4",children:[a.jsx(fE,{calculations:N,formData:j,additionalParams:c}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors duration-200",children:[a.jsx("input",{type:"checkbox",checked:j.includeGst,onChange:U=>k(O=>({...O,includeGst:U.target.checked})),className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Include GST"}),a.jsx("div",{className:"text-sm text-gray-600",children:"GST will be calculated at 18% of the total amount"})]})]})})]})]})})})]})]}),w.show&&a.jsx(dt,{title:w.title,description:w.description,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function Gn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ze(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ut(e){Ze(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||md(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function t1(e,t){Ze(2,arguments);var n=ut(e),r=Gn(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function SE(e,t){Ze(2,arguments);var n=ut(e).getTime(),r=Gn(t);return new Date(n+r)}var aU=36e5;function CE(e,t){Ze(2,arguments);var n=Gn(t);return SE(e,n*aU)}var lU={};function Fo(){return lU}function cU(e,t){var n,r,s,i,o,l,c,u;Ze(1,arguments);var d=Fo(),h=Gn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ut(e),m=f.getDay(),p=(m<h?7:0)+m-h;return f.setDate(f.getDate()-p),f.setHours(0,0,0,0),f}function uU(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function n1(e){Ze(1,arguments);var t=ut(e);return t.setHours(0,0,0,0),t}function dU(e,t){Ze(2,arguments);var n=n1(e),r=n1(t);return n.getTime()===r.getTime()}function hU(e){return Ze(1,arguments),e instanceof Date||md(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function fU(e){if(Ze(1,arguments),!hU(e)&&typeof e!="number")return!1;var t=ut(e);return!isNaN(Number(t))}function mU(e,t){var n;Ze(1,arguments);var r=e||{},s=ut(r.start),i=ut(r.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var l=[],c=s;c.setHours(0,0,0,0);var u=Number((n=void 0)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)l.push(ut(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return l}function pU(e,t){var n,r,s,i,o,l,c,u;Ze(1,arguments);var d=Fo(),h=Gn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ut(e),m=f.getDay(),p=(m<h?-7:0)+6-(m-h);return f.setDate(f.getDate()+p),f.setHours(23,59,59,999),f}function gU(e,t){Ze(2,arguments);var n=Gn(t);return SE(e,-n)}var xU=864e5;function yU(e){Ze(1,arguments);var t=ut(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/xU)+1}function pd(e){Ze(1,arguments);var t=1,n=ut(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function NE(e){Ze(1,arguments);var t=ut(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=pd(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=pd(i);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function vU(e){Ze(1,arguments);var t=NE(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=pd(n);return r}var bU=6048e5;function wU(e){Ze(1,arguments);var t=ut(e),n=pd(t).getTime()-vU(t).getTime();return Math.round(n/bU)+1}function gd(e,t){var n,r,s,i,o,l,c,u;Ze(1,arguments);var d=Fo(),h=Gn((n=(r=(s=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=ut(e),m=f.getUTCDay(),p=(m<h?7:0)+m-h;return f.setUTCDate(f.getUTCDate()-p),f.setUTCHours(0,0,0,0),f}function kE(e,t){var n,r,s,i,o,l,c,u;Ze(1,arguments);var d=ut(e),h=d.getUTCFullYear(),f=Fo(),m=Gn((n=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,m),p.setUTCHours(0,0,0,0);var g=gd(p,t),y=new Date(0);y.setUTCFullYear(h,0,m),y.setUTCHours(0,0,0,0);var b=gd(y,t);return d.getTime()>=g.getTime()?h+1:d.getTime()>=b.getTime()?h:h-1}function jU(e,t){var n,r,s,i,o,l,c,u;Ze(1,arguments);var d=Fo(),h=Gn((n=(r=(s=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),f=kE(e,t),m=new Date(0);m.setUTCFullYear(f,0,h),m.setUTCHours(0,0,0,0);var p=gd(m,t);return p}var SU=6048e5;function CU(e,t){Ze(1,arguments);var n=ut(e),r=gd(n,t).getTime()-jU(n,t).getTime();return Math.round(r/SU)+1}function Ie(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Vr={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Ie(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Ie(r+1,2)},d:function(t,n){return Ie(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Ie(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Ie(t.getUTCHours(),n.length)},m:function(t,n){return Ie(t.getUTCMinutes(),n.length)},s:function(t,n){return Ie(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return Ie(i,n.length)}},_i={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NU={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return Vr.y(t,n)},Y:function(t,n,r,s){var i=kE(t,s),o=i>0?i:1-i;if(n==="YY"){var l=o%100;return Ie(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ie(o,n.length)},R:function(t,n){var r=NE(t);return Ie(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Ie(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ie(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ie(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Vr.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ie(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var i=CU(t,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Ie(i,n.length)},I:function(t,n,r){var s=wU(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ie(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Vr.d(t,n)},D:function(t,n,r){var s=yU(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ie(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Ie(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var i=t.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Ie(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Ie(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),i;switch(s===12?i=_i.noon:s===0?i=_i.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),i;switch(s>=17?i=_i.evening:s>=12?i=_i.afternoon:s>=4?i=_i.morning:i=_i.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Vr.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Vr.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ie(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ie(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Vr.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Vr.s(t,n)},S:function(t,n){return Vr.S(t,n)},X:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return s1(o);case"XXXX":case"XX":return qs(o);case"XXXXX":case"XXX":default:return qs(o,":")}},x:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"x":return s1(o);case"xxxx":case"xx":return qs(o);case"xxxxx":case"xxx":default:return qs(o,":")}},O:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+r1(o,":");case"OOOO":default:return"GMT"+qs(o,":")}},z:function(t,n,r,s){var i=s._originalDate||t,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+r1(o,":");case"zzzz":default:return"GMT"+qs(o,":")}},t:function(t,n,r,s){var i=s._originalDate||t,o=Math.floor(i.getTime()/1e3);return Ie(o,n.length)},T:function(t,n,r,s){var i=s._originalDate||t,o=i.getTime();return Ie(o,n.length)}};function r1(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=t;return n+String(s)+o+Ie(i,2)}function s1(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Ie(Math.abs(e)/60,2)}return qs(e,t)}function qs(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),i=Ie(Math.floor(s/60),2),o=Ie(s%60,2);return r+i+n+o}var i1=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},EE=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},kU=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return i1(t,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",i1(s,n)).replace("{{time}}",EE(i,n))},EU={p:EE,P:kU},DU=["D","DD"],TU=["YY","YYYY"];function PU(e){return DU.indexOf(e)!==-1}function _U(e){return TU.indexOf(e)!==-1}function o1(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var AU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MU=function(t,n,r){var s,i=AU[t];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Vf(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var IU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},RU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LU={date:Vf({formats:IU,defaultWidth:"full"}),time:Vf({formats:OU,defaultWidth:"full"}),dateTime:Vf({formats:RU,defaultWidth:"full"})},FU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$U=function(t,n,r,s){return FU[t]};function la(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var zU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},UU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},WU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},qU=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},GU={ordinalNumber:qU,era:la({values:zU,defaultWidth:"wide"}),quarter:la({values:BU,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:la({values:VU,defaultWidth:"wide"}),day:la({values:UU,defaultWidth:"wide"}),dayPeriod:la({values:WU,defaultWidth:"wide",formattingValues:HU,defaultFormattingWidth:"wide"})};function ca(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;var o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?QU(l,function(h){return h.test(o)}):YU(l,function(h){return h.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function YU(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function QU(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function KU(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(s.length);return{value:o,rest:l}}}var XU=/^(\d+)(th|st|nd|rd)?/i,JU=/\d+/i,ZU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},e8={any:[/^b/i,/^(a|c)/i]},t8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},n8={any:[/1/i,/2/i,/3/i,/4/i]},r8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},s8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},i8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},o8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},a8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},l8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},c8={ordinalNumber:KU({matchPattern:XU,parsePattern:JU,valueCallback:function(t){return parseInt(t,10)}}),era:ca({matchPatterns:ZU,defaultMatchWidth:"wide",parsePatterns:e8,defaultParseWidth:"any"}),quarter:ca({matchPatterns:t8,defaultMatchWidth:"wide",parsePatterns:n8,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:ca({matchPatterns:r8,defaultMatchWidth:"wide",parsePatterns:s8,defaultParseWidth:"any"}),day:ca({matchPatterns:i8,defaultMatchWidth:"wide",parsePatterns:o8,defaultParseWidth:"any"}),dayPeriod:ca({matchPatterns:a8,defaultMatchWidth:"any",parsePatterns:l8,defaultParseWidth:"any"})},u8={code:"en-US",formatDistance:MU,formatLong:LU,formatRelative:$U,localize:GU,match:c8,options:{weekStartsOn:0,firstWeekContainsDate:1}},d8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f8=/^'([^]*?)'?$/,m8=/''/g,p8=/[a-zA-Z]/;function gr(e,t,n){var r,s,i,o,l,c,u,d,h,f,m,p,g,y;Ze(2,arguments);var b=String(t),v=Fo(),w=(r=(s=void 0)!==null&&s!==void 0?s:v.locale)!==null&&r!==void 0?r:u8,S=Gn((i=(o=(l=(c=void 0)!==null&&c!==void 0?c:void 0)!==null&&l!==void 0?l:v.firstWeekContainsDate)!==null&&o!==void 0?o:(u=v.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=Gn((h=(f=(m=(p=void 0)!==null&&p!==void 0?p:void 0)!==null&&m!==void 0?m:v.weekStartsOn)!==null&&f!==void 0?f:(g=v.locale)===null||g===void 0||(y=g.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&h!==void 0?h:0);if(!(j>=0&&j<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var k=ut(e);if(!fU(k))throw new RangeError("Invalid time value");var N=uU(k),C=gU(k,N),E={firstWeekContainsDate:S,weekStartsOn:j,locale:w,_originalDate:k},D=b.match(h8).map(function($){var B=$[0];if(B==="p"||B==="P"){var F=EU[B];return F($,w.formatLong)}return $}).join("").match(d8).map(function($){if($==="''")return"'";var B=$[0];if(B==="'")return g8($);var F=NU[B];if(F)return _U($)&&o1($,t,String(e)),PU($)&&o1($,t,String(e)),F(C,$,w.localize,E);if(B.match(p8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return $}).join("");return D}function g8(e){var t=e.match(f8);return t?t[1].replace(m8,"'"):e}function x8(e,t){Ze(2,arguments);var n=ut(e).getTime(),r=ut(t.start).getTime(),s=ut(t.end).getTime();if(!(r<=s))throw new RangeError("Invalid interval");return n>=r&&n<=s}const a1=Array.from({length:15},(e,t)=>CE(new Date().setHours(6,0,0,0),t));function y8(){const{user:e}=qe(),[t,n]=x.useState("week"),[r,s]=x.useState(new Date),[i,o]=x.useState([]),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState(null),[j,k]=x.useState(null),[N,C]=x.useState([]),[E,D]=x.useState(!1),$=lr(),B=Mn(),[F,T]=x.useState({show:!1,title:""}),[A,z]=x.useState({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),[M,P]=x.useState("");x.useEffect(()=>{I();const O=new URLSearchParams($.search),W=O.get("dealId"),Y=O.get("action"),oe=O.get("customerName");if(W&&Y==="schedule"){if(S(W),oe){const _=decodeURIComponent(oe);k(_),T({show:!0,title:`Deal won with ${_}!`,variant:"success",description:"Please schedule a job for this customer using the form."})}H(W),B("/jobs",{replace:!0})}},[$]),x.useEffect(()=>{A.operatorId&&A.startDate&&A.endDate&&(X().some(Y=>Y.id===A.operatorId)||z(Y=>({...Y,operatorId:""})))},[A.startDate,A.endDate,i]);const I=async()=>{try{const[O,W,Y,oe,_]=await Promise.all([th(),R2(),Ul(),Vl(),nh()]);o(O),c(W),d(Y);const R=_.filter(J=>J.stage==="won").map(J=>J.leadId),Q=oe.filter(J=>J.status==="converted"&&R.includes(J.id));if(f(Q),w)try{const J=await yo(w);if(J){z(ne=>{var De;return{...ne,leadId:J.leadId||"",location:((De=J.customer)==null?void 0:De.address)||"",notes:J.description||""}});const K=new Date,ae=new Date;ae.setDate(K.getDate()+7),z(ne=>({...ne,startDate:K.toISOString().slice(0,16),endDate:ae.toISOString().slice(0,16)}))}}catch(J){console.error("Error fetching deal data:",J)}}catch(O){console.error("Error fetching data:",O),ie("Error fetching data","error")}finally{p(!1)}},H=async O=>{var W,Y,oe,_,L;try{const R=await yo(O);if(R){const Q=new Date,J=new Date;J.setDate(Q.getDate()+7);const K=Q.toISOString().slice(0,16),ae=J.toISOString().slice(0,16);S(O),(W=R.customer)!=null&&W.name&&k(R.customer.name),D(!0);try{const ne=await ld(R.leadId);if(ne&&ne.length>0){const De=[];ne.forEach(ye=>{if(ye.selectedEquipment&&ye.selectedEquipment.equipmentId){const je=l.find(tt=>tt.id===ye.selectedEquipment.equipmentId);je&&!De.some(tt=>tt.id===je.id)&&De.push(je)}ye.selectedMachines&&ye.selectedMachines.length>0&&ye.selectedMachines.forEach(je=>{if(je.equipmentId){const tt=l.find(Lr=>Lr.id===je.equipmentId);tt&&!De.some(Lr=>Lr.id===tt.id)&&De.push(tt)}})}),C(De),De.length>0?z({leadId:R.leadId,equipmentId:De[0].id,operatorId:"",startDate:K,endDate:ae,location:((Y=R.customer)==null?void 0:Y.address)||"",notes:R.description||""}):z({leadId:R.leadId,equipmentId:"",operatorId:"",startDate:K,endDate:ae,location:((oe=R.customer)==null?void 0:oe.address)||"",notes:R.description||""})}else z({leadId:R.leadId,equipmentId:"",operatorId:"",startDate:K,endDate:ae,location:((_=R.customer)==null?void 0:_.address)||"",notes:R.description||""})}catch(ne){console.error("Error fetching quotations:",ne),z({leadId:R.leadId,equipmentId:"",operatorId:"",startDate:K,endDate:ae,location:((L=R.customer)==null?void 0:L.address)||"",notes:R.description||""})}finally{D(!1)}y(!0)}else ie("Deal not found","error")}catch(R){console.error("Error fetching deal:",R),ie("Error fetching deal","error")}},G=async()=>{try{if(!A.leadId||!A.equipmentId||!A.operatorId||!A.startDate||!A.endDate||!A.location){ie("Please fill in all required fields","error");return}let O="";const W=h.find(Y=>Y.id===A.leadId);if(W)O=W.customerName;else if(j)O=j;else{ie("Customer information is missing","error");return}await I2({title:"Scheduled Job",leadId:A.leadId,customerId:(W==null?void 0:W.customerId)||"",customerName:O,equipmentIds:[A.equipmentId],operatorIds:[A.operatorId],scheduledStartDate:A.startDate,scheduledEndDate:A.endDate,location:A.location,status:"scheduled",notes:A.notes,dealId:w||void 0,createdBy:(e==null?void 0:e.id)||""}),await I(),y(!1),ee(),S(null),k(null),ie("Job scheduled successfully","success")}catch(O){console.error("Error creating job:",O),ie("Error creating job","error")}},ee=()=>{z({leadId:"",equipmentId:"",operatorId:"",startDate:"",endDate:"",location:"",notes:""}),C([])},ie=(O,W="success")=>{T({show:!0,title:O,variant:W}),setTimeout(()=>T({show:!1,title:""}),3e3)},V=(O,W,Y,oe)=>i.filter(L=>{const R=new Date(L.scheduledStartDate),Q=new Date(L.scheduledEndDate),J=new Date(Y),K=new Date(oe);return(L.equipmentIds.includes(O)||L.operatorIds.includes(W))&&L.status!=="completed"&&L.status!=="cancelled"&&(J>=R&&J<Q||K>R&&K<=Q||J<=R&&K>=Q)}),X=()=>{if(!A.startDate||!A.endDate)return u;const O=new Date(A.startDate),W=new Date(A.endDate);return u.filter(Y=>i.filter(_=>{const L=new Date(_.scheduledStartDate),R=new Date(_.scheduledEndDate);return _.operatorIds.includes(Y.id)&&_.status!=="completed"&&_.status!=="cancelled"&&(O>=L&&O<R||W>L&&W<=R||O<=L&&W>=R)}).length===0)},U=()=>{const O=cU(r,{weekStartsOn:1}),W=pU(r,{weekStartsOn:1}),Y=mU({start:O,end:W});return a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-4",children:[a.jsxs("div",{className:"sticky left-0 bg-white z-10",children:[a.jsx("div",{className:"h-12"}),a1.map((oe,_)=>a.jsx("div",{className:"h-20 border-b border-gray-100 flex items-center justify-end pr-2 text-sm text-gray-900",children:gr(oe,"h:mm a")},_))]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("div",{className:"grid grid-cols-7 min-w-[900px]",children:[Y.map((oe,_)=>a.jsx("div",{className:"h-12 flex items-center justify-center border-b border-gray-200 font-medium",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm text-gray-900",children:gr(oe,"EEE")}),a.jsx("div",{className:"text-xs text-gray-700",children:gr(oe,"MMM d")})]})},_)),a1.map((oe,_)=>a.jsx(se.Fragment,{children:Y.map((L,R)=>{const Q=new Date(L.setHours(oe.getHours(),oe.getMinutes())),J=i.filter(K=>{const ae=new Date(K.scheduledStartDate),ne=new Date(K.scheduledEndDate);return(!M||K.operatorIds.includes(M))&&dU(Q,ae)&&x8(Q,{start:ae,end:ne})});return a.jsx("div",{className:`border-b border-r border-gray-100 relative ${_===0?"border-t":""} ${R===0?"border-l":""}`,style:{minHeight:`${Math.max(80,J.length*44+8)}px`},onClick:()=>{y(!0),z(K=>({...K,startDate:Q.toISOString().slice(0,16),endDate:CE(Q,2).toISOString().slice(0,16)}))},children:J.map((K,ae)=>a.jsxs("div",{className:"absolute inset-x-0 mx-1 bg-primary-100 border border-primary-200 rounded-md p-2 cursor-pointer hover:bg-primary-200 transition-colors",style:{top:`${4+ae*44}px`,minHeight:"40px",zIndex:10+ae,right:ae>0?`${ae*8}px`:"4px"},onClick:ne=>{ne.stopPropagation(),v(K)},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-sm truncate",children:K.customerName}),a.jsx(Hl,{status:K.status,className:"ml-2"})]}),a.jsxs("div",{className:"text-xs text-black mt-1",children:[gr(new Date(K.scheduledStartDate),"h:mm a")," - ",gr(new Date(K.scheduledEndDate),"h:mm a")]})]},K.id))},`${_}-${R}`)})},_))]})})]})})};return!e||e.role!=="operations_manager"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):m?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-900",children:"Loading job scheduling data..."})]}):a.jsxs("div",{className:"space-y-6 font-sans",children:[a.jsxs("div",{className:"flex flex-wrap items-center mb-2 justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:()=>s(O=>t1(O,-7)),children:a.jsx(nM,{className:"h-4 w-4"})}),a.jsx("h2",{className:"text-lg font-semibold font-sans",children:gr(r,"MMMM yyyy")}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>s(O=>t1(O,7)),children:a.jsx(rM,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-1 justify-end min-w-0",children:[a.jsx(Te,{options:[{value:"week",label:"Week View"},{value:"month",label:"Month View"}],value:t,onChange:O=>n(O),className:"w-24 min-w-0"}),a.jsx(Te,{label:"Operator",options:[{value:"",label:"All Operators"},...u.map(O=>({value:O.id,label:O.name}))],value:M,onChange:P,className:"w-32 min-w-0"}),a.jsx(q,{size:"lg",className:"ml-2 font-bold px-6 py-2",onClick:()=>{h.length===0?T({show:!0,title:"No Won Deals Available",variant:"warning",description:"You need to have at least one won deal before scheduling a job."}):y(!0)},leftIcon:a.jsx(Mr,{size:20}),children:"New Job"})]})]}),a.jsx(ce,{children:a.jsxs(me,{className:"p-6",children:[a.jsx("div",{className:"mb-4",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Job Schedule"})}),m?a.jsx("div",{className:"text-center py-4",children:"Loading schedule..."}):h.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-sans",children:"No Won Deals Yet"}),a.jsx("p",{className:"text-gray-700 font-sans",children:'Jobs can only be scheduled for deals that have been marked as "won". Return to the Deals page and move a deal to the "won" stage first.'})]}):U()]})}),a.jsxs(Ct,{isOpen:g,onClose:()=>{y(!1),ee()},title:w?`Schedule Job for Won Deal: ${j||""}`:"Schedule Job for Won Deal",size:"lg",children:[a.jsxs("div",{className:"space-y-6",children:[w&&a.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-md mb-4",children:[a.jsx("h4",{className:"font-medium mb-2 text-green-800",children:"Creating Job from Won Deal"}),a.jsxs("p",{className:"text-green-700",children:[a.jsx("span",{className:"font-medium",children:"Customer:"})," ",j||"Unknown customer"]}),a.jsx("p",{className:"text-green-700 text-sm mt-2",children:"Please select equipment, operators, and schedule dates for this job."})]}),a.jsx(Te,{label:"Select Customer (Won Deals)",options:[{value:"",label:"-- Select a customer with a won deal --"},...Array.isArray(h)?h.map(O=>({value:O.id,label:`${O.customerName} - Won Deal`})):[]],value:A.leadId,onChange:O=>{z(W=>({...W,leadId:O})),O?(async()=>{D(!0);try{const Y=await ld(O);if(Y&&Y.length>0){const oe=[];Y.forEach(_=>{if(_.selectedEquipment&&_.selectedEquipment.equipmentId){const L=l.find(R=>R.id===_.selectedEquipment.equipmentId);L&&!oe.some(R=>R.id===L.id)&&oe.push(L)}_.selectedMachines&&_.selectedMachines.length>0&&_.selectedMachines.forEach(L=>{if(L.equipmentId){const R=l.find(Q=>Q.id===L.equipmentId);R&&!oe.some(Q=>Q.id===R.id)&&oe.push(R)}})}),C(oe),oe.length>0&&z(_=>({..._,equipmentId:oe[0].id}))}}catch(Y){console.error("Error loading equipment for lead:",Y)}finally{D(!1)}})():(C([]),z(W=>({...W,equipmentId:""})))},required:!0,className:"text-black"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Te,{label:"Equipment",options:N.length>0&&w?[{value:"",label:"-- Select deal-specific equipment --"},...Array.isArray(N)?N.map(O=>({value:O.id,label:`${O.name} (From Deal)`})):[]]:[{value:"",label:"-- Select equipment --"},...Array.isArray(l)?l.map(O=>({value:O.id,label:O.name})):[]],value:A.equipmentId,onChange:O=>z(W=>({...W,equipmentId:O})),required:!0,className:"text-black"}),E?a.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Loading equipment from quotations..."}):N.length>0?a.jsxs("p",{className:"mt-1 text-xs text-green-600",children:[N.length," equipment item",N.length!==1?"s":""," from deal quotation",N.length!==1?"s":""]}):A.leadId?a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"No specific equipment found in deal quotations"}):null]}),a.jsx(Te,{label:"Operator",options:[{value:"",label:"-- Select operator --"},...X().map(O=>({value:O.id,label:O.name}))],value:A.operatorId,onChange:O=>z(W=>({...W,operatorId:O})),required:!0,className:"text-black"}),A.startDate&&A.endDate&&a.jsx("p",{className:"mt-1 text-xs text-gray-600",children:(()=>{const O=X(),W=u.length,Y=W-O.length;return Y===0?`All ${W} operators are available`:O.length===0?"No operators available for this time slot":`${O.length} of ${W} operators available (${Y} busy)`})()})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ke,{type:"datetime-local",label:"Start Date & Time",value:A.startDate,onChange:O=>z(W=>({...W,startDate:O.target.value})),required:!0,className:"text-black"}),a.jsx(ke,{type:"datetime-local",label:"End Date & Time",value:A.endDate,onChange:O=>z(W=>({...W,endDate:O.target.value})),required:!0,className:"text-black"})]}),a.jsx(ke,{label:"Location",value:A.location,onChange:O=>z(W=>({...W,location:O.target.value})),required:!0,className:"text-black"}),a.jsx(Kt,{label:"Notes",value:A.notes,onChange:O=>z(W=>({...W,notes:O.target.value})),rows:4,className:"text-black"}),A.equipmentId&&A.operatorId&&A.startDate&&A.endDate&&a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[a.jsx("h4",{className:"font-medium mb-2",children:"Availability Check"}),(()=>{const O=V(A.equipmentId,A.operatorId,A.startDate,A.endDate);return O.length>0?a.jsxs("div",{className:"text-error-600",children:[a.jsx("p",{children:"Conflicts found:"}),a.jsx("ul",{className:"list-disc list-inside text-sm",children:O.map(W=>a.jsxs("li",{children:[W.customerName," - ",gr(new Date(W.scheduledStartDate),"MMM d, h:mm a")]},W.id))})]}):a.jsx("p",{className:"text-success-600",children:"Equipment and operator are available for the selected time slot."})})()]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(q,{variant:"outline",onClick:()=>{y(!1),ee()},children:"Cancel"}),a.jsx(q,{onClick:G,variant:"accent",children:"Schedule Job"})]})]}),a.jsx(Ct,{isOpen:!!b,onClose:()=>v(null),title:"Job Details",size:"lg",children:b&&a.jsx(v8,{selectedJob:b})}),F.show&&a.jsx(dt,{title:F.title,description:F.description,variant:F.variant,isVisible:F.show,duration:3e3,onClose:()=>T({show:!1,title:""})})]})}function v8({selectedJob:e}){const[t,n]=se.useState(""),[r,s]=se.useState("");return se.useEffect(()=>{async function i(){try{const o=await vb.getJobEquipment(e.id);if(!o||o.length===0){n("No equipment assigned");return}const l=[];for(const c of o){const u=await O2(c.id);u&&u.name&&l.push(u.name)}n(l.length>0?l.join(", "):"No equipment assigned")}catch(o){console.error("Error fetching equipment names:",o),n("Error loading equipment")}}i()},[e.id]),se.useEffect(()=>{async function i(){try{const o=await vb.getJobOperators(e.id);if(!o||o.length===0){s("No operator assigned");return}const l=[];for(const c of o){const d=(await Ul()).find(h=>h.id===c.id);d&&d.name&&l.push(d.name)}s(l.length>0?l.join(", "):"No operator assigned")}catch(o){console.error("Error fetching operator names:",o),s("Error loading operators")}}i()},[e.id]),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Customer"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.customerName,disabled:!0,readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Status"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.status,disabled:!0,readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Equipment"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:t,disabled:!0,readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Operator"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:r,disabled:!0,readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Start Date"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:gr(new Date(e.scheduledStartDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"End Date"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:gr(new Date(e.scheduledEndDate),"MMM d, yyyy h:mm a"),disabled:!0,readOnly:!0})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Location"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.location,disabled:!0,readOnly:!0})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h4",{className:"text-sm font-medium text-black",children:"Notes"}),a.jsx("input",{type:"text",className:"mt-1 text-black bg-gray-100 border border-gray-300 rounded px-2 py-1 w-full",value:e.notes||"No notes",disabled:!0,readOnly:!0})]})]})})}const b8=[{id:"road_access",label:"Road Access",description:"Accessibility for crane transport"},{id:"height_limits",label:"Height Limits",description:"Overhead restrictions"},{id:"crane_setup",label:"Crane Setup Area",description:"Space available for crane positioning"},{id:"power_lines",label:"Power Lines",description:"Proximity to electrical infrastructure"},{id:"surface_type",label:"Surface Type",description:"Ground conditions and stability"},{id:"other",label:"Other",description:"Additional site-specific constraints"}];function w8(){const{user:e}=qe(),[t,n]=x.useState(""),[r,s]=x.useState(""),[i,o]=x.useState(""),[l,c]=x.useState(""),[u,d]=x.useState([]),[h,f]=x.useState([]),[m,p]=x.useState(""),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState([]),[j,k]=x.useState(!0),[N,C]=x.useState({show:!1,title:""}),E=x.useRef(null);x.useEffect(()=>{(async()=>{try{const H=await C2();S(H),k(!1)}catch(H){console.error("Error fetching site assessments:",H),M("Error loading site assessments","error"),k(!1)}})()},[]);const D=I=>{const ee=Array.from(I.target.files||[]).filter(ie=>{const V=["image/jpeg","image/png","image/webp","video/mp4","video/quicktime"].includes(ie.type),X=ie.size<=10*1024*1024;return!V||!X?(M("Invalid file",`${ie.name} is not supported. Please upload images (JPEG, PNG) or videos (MP4) under 10MB.`,"error"),!1):!0}).map(ie=>({id:Math.random().toString(36).substring(2,9),file:ie,preview:URL.createObjectURL(ie),annotations:[]}));d(ie=>[...ie,...ee])},$=I=>{I.preventDefault();const H=Array.from(I.dataTransfer.files),G=E.current;if(G){const ee=new DataTransfer;H.forEach(V=>ee.items.add(V)),G.files=ee.files;const ie=new Event("change",{bubbles:!0});G.dispatchEvent(ie)}},B=I=>{I.preventDefault()},F=I=>{d(H=>{const G=H.filter(ee=>ee.id!==I);return H.forEach(ee=>{ee.id===I&&URL.revokeObjectURL(ee.preview)}),G})},T=I=>{f(H=>H.find(ee=>ee.id===I.id)?H.filter(ee=>ee.id!==I.id):[...H,{...I}])},A=(I,H)=>{f(G=>G.map(ee=>ee.id===I?{...ee,notes:H}:ee))},z=async()=>{if(!m.match(/^\+?[\d\s-]{10,}$/)){M("Invalid phone number","Please enter a valid phone number","error");return}try{await new Promise(I=>setTimeout(I,1e3)),M("Assessment link sent",`A remote assessment link has been sent to ${m}`,"success"),p("")}catch{M("Error sending link","Please try again later","error")}},M=(I,H,G="success")=>{C({show:!0,title:I,description:H,variant:G}),setTimeout(()=>C({show:!1,title:""}),3e3)},P=async()=>{if(!e){M("Error","You need to be logged in to submit a site assessment","error");return}if(!t){M("Missing title","Please provide a title for the site assessment","warning");return}if(!i){M("Missing location","Please provide the site location","warning");return}if(u.length===0){M("Missing files","Please upload at least one site photo or video","warning");return}try{const I=u.filter(X=>X.file.type.startsWith("image/")).map(X=>`mock-url-${X.id}`),H=u.filter(X=>X.file.type.startsWith("video/")).map(X=>`mock-url-${X.id}`),G=h.map(X=>X.id),ee=h.filter(X=>X.notes).map(X=>`${X.label}: ${X.notes}`).join(`
`),ie={title:t,description:r,customerId:l||"unknown",location:i,constraints:G,notes:ee,images:I,videos:H,createdBy:e.id},V=await N2(ie);S(X=>[...X,V]),n(""),s(""),c(""),o(""),d([]),f([]),p(""),M("Site assessment submitted successfully",void 0,"success")}catch(I){console.error("Error submitting site assessment:",I),M("Error submitting assessment","Please try again later","error")}};return se.useEffect(()=>()=>{u.forEach(I=>{URL.revokeObjectURL(I.preview)})},[]),!e||e.role!=="sales_agent"&&e.role!=="operator"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Upload Media"})}),a.jsxs(me,{children:[a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",onDrop:$,onDragOver:B,children:[a.jsx("input",{ref:E,type:"file",className:"hidden",multiple:!0,accept:"image/jpeg,image/png,image/webp,video/mp4,video/quicktime",onChange:D}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx(VC,{className:"h-12 w-12 text-gray-400"})}),a.jsxs("div",{children:[a.jsx(q,{variant:"outline",onClick:()=>{var I;return(I=E.current)==null?void 0:I.click()},children:"Choose Files"}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"or drag and drop files here"})]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Supported formats: JPEG, PNG, MP4 (max 10MB)"})]})]}),u.length>0&&a.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 gap-4",children:u.map(I=>a.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[I.file.type.startsWith("image/")?a.jsx("img",{src:I.preview,alt:"Preview",className:"w-full h-32 object-cover"}):a.jsx("video",{src:I.preview,className:"w-full h-32 object-cover"}),a.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[I.file.type.startsWith("image/")&&a.jsx(q,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>{v(I),y(!0)},children:a.jsx(ev,{size:16})}),a.jsx(q,{variant:"ghost",size:"sm",className:"text-white hover:text-white hover:bg-black/20",onClick:()=>F(I.id),children:a.jsx(js,{size:16})})]}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-1 truncate",children:I.file.name})]},I.id))})]})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Site Constraints"})}),a.jsx(me,{children:a.jsx("div",{className:"space-y-4",children:b8.map(I=>{var H;return a.jsx("div",{className:`p-4 rounded-lg border transition-colors ${h.some(G=>G.id===I.id)?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 transition-colors ${h.some(G=>G.id===I.id)?"border-primary-500 bg-primary-500":"border-gray-300"}`,onClick:()=>T(I),children:h.some(G=>G.id===I.id)&&a.jsx(eM,{className:"text-white h-4 w-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"font-medium text-gray-900",children:I.label}),I.description&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:I.description}),h.some(G=>G.id===I.id)&&a.jsx(Kt,{className:"mt-3",placeholder:"Add notes about this constraint...",value:((H=h.find(G=>G.id===I.id))==null?void 0:H.notes)||"",onChange:G=>A(I.id,G.target.value),rows:2})]})]})},I.id)})})})]})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Remote Site Assessment"})}),a.jsx(me,{children:a.jsxs("div",{className:"max-w-md",children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ke,{type:"tel",placeholder:"Enter phone number",value:m,onChange:I=>p(I.target.value)}),a.jsx(q,{onClick:z,leftIcon:a.jsx(fo,{size:16}),children:"Send Link"})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Send a link to conduct remote site assessment via video call"})]})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Site Details"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),a.jsx(ke,{value:t,onChange:I=>n(I.target.value),placeholder:"Site assessment title",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer ID"}),a.jsx(ke,{value:l,onChange:I=>c(I.target.value),placeholder:"Enter customer ID if available"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),a.jsx(ke,{value:i,onChange:I=>o(I.target.value),placeholder:"Enter site address/location",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx(Kt,{value:r,onChange:I=>s(I.target.value),placeholder:"Additional details about the site",rows:3})]})]})})]}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsxs(q,{onClick:P,className:"flex items-center gap-2",children:[a.jsx(fo,{size:16}),"Submit Assessment"]})}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Assessment Summary"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Media (",u.length,")"]}),u.length>0?a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(I=>a.jsxs("div",{className:"text-sm text-gray-600 bg-gray-100 rounded-full px-3 py-1 flex items-center gap-2",children:[I.file.type.startsWith("image/")?a.jsx(ZA,{size:14}):a.jsx(ev,{size:14}),a.jsx("span",{className:"truncate max-w-[200px]",children:I.file.name})]},I.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No media uploaded yet"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Tagged Constraints (",h.length,")"]}),h.length>0?a.jsx("div",{className:"space-y-3",children:h.map(I=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[a.jsx(BC,{size:14}),I.label]}),I.notes&&a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:I.notes})]},I.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No constraints tagged yet"})]})]})})]}),a.jsx(Px,{children:g&&b&&a.jsx(Kr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:a.jsxs(Kr.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-lg shadow-modal max-w-4xl w-full max-h-[90vh] overflow-hidden",children:["              ",a.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Image Annotation"}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{y(!1),v(null)},children:a.jsx(wi,{size:20})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:b.preview,alt:"Annotation",className:"max-w-full h-auto"})}),a.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>{y(!1),v(null)},children:"Cancel"}),a.jsx(q,{onClick:()=>{y(!1),v(null),M("Annotations saved",void 0,"success")},children:"Save Annotations"})]})]})]})})}),N.show&&a.jsx(dt,{title:N.title,description:N.description,variant:N.variant,isVisible:N.show,onClose:()=>C({show:!1,title:""})})]})}const j8=[{id:"ppe",label:"PPE Used Correctly",checked:!0},{id:"site_clearance",label:"Site Clearance Verified",checked:!0},{id:"emergency_contacts",label:"Emergency Contact Shared",checked:!0},{id:"equipment_check",label:"Equipment Pre-Check Complete",checked:!0},{id:"hazards_identified",label:"Hazards Identified & Marked",checked:!0},{id:"communication",label:"Communication Protocol Established",checked:!0}];function S8(){const{id:e}=DC(),{user:t}=qe(),[n,r]=x.useState(null),[s,i]=x.useState(!0),[o,l]=x.useState(j8),[c,u]=x.useState(""),[d,h]=x.useState(!1),[f,m]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState(null),[v,w]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&S()},[e]);const S=async()=>{try{const D={id:e,title:`Crane Rental - ${e}`,leadId:"lead_123",customerId:"cust_123",customerName:"ABC Construction Ltd.",equipmentIds:["eq_001"],operatorIds:["op_001"],status:"completed",scheduledStartDate:new Date().toISOString(),scheduledEndDate:new Date(Date.now()+288e5).toISOString(),location:"Mumbai Construction Site",createdBy:"user_123",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r(D),b({rating:4.5,comments:"Great service, very professional team. Equipment arrived on time.",submittedAt:new Date().toISOString()})}catch(D){console.error("Error fetching job details:",D),E("Error fetching job details","error")}finally{i(!1)}},j=D=>{l($=>$.map(B=>B.id===D?{...B,checked:!B.checked}:B))},k=async()=>{try{await new Promise(D=>setTimeout(D,1e3)),E("Feedback request sent successfully","success")}catch{E("Error sending feedback request","error")}},N=async()=>{if(!f||!p){E("Please fill in all discount request fields","error");return}try{await new Promise(D=>setTimeout(D,1e3)),E("Discount request submitted for approval","success")}catch{E("Error submitting discount request","error")}},C=()=>{E("Summary downloaded successfully","success")},E=(D,$="success")=>{w({show:!0,title:D,variant:$}),setTimeout(()=>w({show:!1,title:""}),3e3)};return!t||t.role!=="admin"&&t.role!=="operations_manager"&&t.role!=="sales_agent"&&t.role!=="support"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):s?a.jsx("div",{className:"p-6 text-center",children:"Loading job summary..."}):!n&&!e?a.jsx("div",{className:"p-6 text-center text-gray-500",children:"Select a job to view its summary and feedback"}):n?a.jsxs("div",{className:"space-y-6 p-6",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Job Summary & Feedback"}),a.jsxs("p",{className:"text-gray-500 mt-1",children:["Job #",e]})]}),a.jsx(q,{variant:"outline",leftIcon:a.jsx(Wd,{size:16}),onClick:C,children:"Download Summary"})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Job Details"})}),a.jsx(me,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Customer"}),a.jsx("p",{className:"mt-1 text-lg",children:n.customerName})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(Hd,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:n.location})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Equipment"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(Ut,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Tower Crane TC-80"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Operator"}),a.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a.jsx(hi,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Mike Operator"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Duration"}),a.jsxs("div",{className:"mt-1 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hn,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:new Date(n.scheduledStartDate).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"h-5 w-5 text-gray-400"}),a.jsxs("span",{children:[new Date(n.scheduledStartDate).toLocaleTimeString()," - ",new Date(n.scheduledEndDate).toLocaleTimeString()]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-100 text-success-800",children:"Completed"})})]})]})]})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Safety Observations"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(D=>a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("button",{className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${D.checked?"border-success-500 bg-success-500":"border-gray-300"}`,onClick:()=>j(D.id),children:D.checked&&a.jsx(ms,{className:"text-white h-4 w-4"})}),a.jsx("span",{className:"text-gray-700",children:D.label})]},D.id))}),a.jsx(Kt,{label:"Safety Notes",value:c,onChange:D=>u(D.target.value),placeholder:"Enter any additional safety observations...",rows:4})]})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(xe,{children:"Customer Feedback"}),a.jsx(q,{variant:"outline",leftIcon:a.jsx(fo,{size:16}),onClick:k,children:"Request Feedback"})]})}),a.jsx(me,{children:y?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex",children:[1,2,3,4,5].map(D=>a.jsx("svg",{className:`h-5 w-5 ${D<=y.rating?"text-warning-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},D))}),a.jsx("span",{className:"text-lg font-medium",children:y.rating})]}),a.jsx("p",{className:"text-gray-600",children:y.comments}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted on ",new Date(y.submittedAt).toLocaleDateString()]})]}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No feedback received yet"})})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Discount Request"})}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"jobFeedback-requestDiscount",checked:d,onChange:D=>h(D.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("label",{htmlFor:"requestDiscount",className:"text-sm text-gray-700",children:"Request discount approval"})]}),d&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(Kt,{label:"Reason for Discount",value:f,onChange:D=>m(D.target.value),placeholder:"Explain why a discount is being requested...",rows:3}),a.jsx("div",{className:"w-48",children:a.jsx(ke,{type:"number",label:"Discount Percentage",value:p,onChange:D=>g(D.target.value),min:"0",max:"100",placeholder:"Enter %"})}),a.jsx("div",{className:"flex justify-end",children:a.jsx(q,{onClick:N,children:"Submit for Approval"})})]})]})})]}),v.show&&a.jsx(dt,{title:v.title,variant:v.variant,isVisible:v.show,onClose:()=>w({show:!1,title:""})})]}):a.jsx("div",{className:"p-6 text-center text-gray-500",children:"Job not found"})}const C8=async()=>{try{return await On.get("/equipment")}catch(e){return console.error("Failed to fetch equipment:",e),[]}},N8=async e=>{try{return await On.post("/equipment",e)}catch(t){throw console.error("Failed to create equipment:",t),new Error(t.message||"Failed to create equipment")}},k8=async(e,t)=>{try{return await On.put(`/equipment/${e}`,t)}catch(n){return console.error(`Failed to update equipment ${e}:`,n),null}},E8=async e=>{try{return await On.delete(`/equipment/${e}`),!0}catch(t){return console.error(`Failed to delete equipment ${e}:`,t),!1}},Uf=e=>{var t,n,r,s;return{...e,name:e.name||"",category:e.category||"mobile_crane",manufacturingDate:e.manufacturingDate||"",registrationDate:e.registrationDate||"",maxLiftingCapacity:e.maxLiftingCapacity||0,unladenWeight:e.unladenWeight||0,baseRates:{micro:((t=e.baseRates)==null?void 0:t.micro)||0,small:((n=e.baseRates)==null?void 0:n.small)||0,monthly:((r=e.baseRates)==null?void 0:r.monthly)||0,yearly:((s=e.baseRates)==null?void 0:s.yearly)||0},runningCostPerKm:e.runningCostPerKm||0,description:e.description||"",status:e.status||"available",createdAt:e.createdAt||new Date().toISOString(),updatedAt:e.updatedAt||new Date().toISOString(),runningCost:e.runningCost||0,_source:e._source,_mockFlag:e._mockFlag}},Wf=[{value:"available",label:"Available"},{value:"in_use",label:"In Use"},{value:"maintenance",label:"Maintenance"}],Hf=[{value:"mobile_crane",label:"Mobile Crane"},{value:"tower_crane",label:"Tower Crane"},{value:"crawler_crane",label:"Crawler Crane"},{value:"pick_and_carry_crane",label:"Pick & Carry Crane"}],D8=[{value:"micro",label:"Micro"},{value:"small",label:"Small"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}];function T8(){const{user:e}=qe(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,o]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!0),[m,p]=x.useState(!1),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState({show:!1,title:""}),[j,k]=x.useState({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"});x.useEffect(()=>{N()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const N=async()=>{try{let T=await C8();T=T.map(Uf),n(T),console.log("Successfully connected to equipment API"),f(!1)}catch(T){console.error("Error fetching equipment:",T),F("Error fetching equipment","error"),f(!1)}},C=()=>{let T=[...t];i&&(T=T.filter(A=>A.name.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(T=T.filter(A=>A.status===l)),u!=="all"&&(T=T.filter(A=>A.category===u)),s(T)},E=()=>{if(!j.name||!j.manufacturingDate||!j.registrationDate||!j.maxLiftingCapacity||!j.unladenWeight||!j.runningCostPerKm||!j.baseRates.micro||!j.baseRates.small||!j.baseRates.monthly||!j.baseRates.yearly)return F("Please fill in all required fields","error"),!1;const T=/^\d{4}-\d{2}$/;return!T.test(j.manufacturingDate)||!T.test(j.registrationDate)?(F("Please enter valid dates in YYYY-MM format","error"),!1):isNaN(Number(j.maxLiftingCapacity))||isNaN(Number(j.unladenWeight))||isNaN(Number(j.runningCostPerKm))||isNaN(Number(j.baseRates.micro))||isNaN(Number(j.baseRates.small))||isNaN(Number(j.baseRates.monthly))||isNaN(Number(j.baseRates.yearly))?(F("Please enter valid numbers for numeric fields","error"),!1):!0},D=async T=>{if(T.preventDefault(),!!E())try{const A={...j,equipmentId:(b==null?void 0:b.equipmentId)||`EQ${String(Math.floor(1e3+Math.random()*9e3)).padStart(4,"0")}`,maxLiftingCapacity:Number(j.maxLiftingCapacity),unladenWeight:Number(j.unladenWeight),baseRates:{micro:Number(j.baseRates.micro),small:Number(j.baseRates.small),monthly:Number(j.baseRates.monthly),yearly:Number(j.baseRates.yearly)},runningCost:Number(j.runningCostPerKm),runningCostPerKm:Number(j.runningCostPerKm)};if(console.log("Form submission data:",A),b){console.log(`Updating equipment ${b.id}`,A);let z=await k8(b.id,A);z?(console.log("Update successful:",z),z=Uf(z),n(M=>M.map(P=>P.id===b.id?z:P)),F("Equipment updated successfully","success")):F("Failed to update equipment","error")}else{console.log("Creating new equipment",A);let z=await N8(A);z=Uf(z),console.log("Creation successful:",z),n(M=>[...M,z]),F("Equipment added successfully","success")}setTimeout(()=>{N()},500),p(!1),B()}catch(A){console.error("Error saving equipment:",A),F("Error saving equipment","error")}},$=async()=>{if(b)try{await E8(b.id),n(T=>T.filter(A=>A.id!==b.id)),y(!1),v(null),F("Equipment deleted successfully","success")}catch{F("Error deleting equipment","error")}},B=()=>{k({name:"",category:"mobile_crane",manufacturingDate:"",registrationDate:"",maxLiftingCapacity:"",unladenWeight:"",baseRates:{micro:"",small:"",monthly:"",yearly:""},runningCostPerKm:"",description:"",status:"available"}),v(null)},F=(T,A="success")=>{S({show:!0,title:T,variant:A}),setTimeout(()=>S({show:!1,title:""}),3e3)};return!e||e.role!=="operations_manager"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(fe,{placeholder:"Search equipment...",value:i,onChange:T=>o(T.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx(Te,{value:u,onChange:T=>d(T),options:[{value:"all",label:"All Categories"},...Hf],className:"w-full sm:w-48"}),a.jsx(Te,{value:l,onChange:T=>c(T),options:[{value:"all",label:"All Status"},...Wf],className:"w-full sm:w-48"})]})]}),a.jsx(q,{onClick:()=>{B(),p(!0)},leftIcon:a.jsx(Mr,{className:"w-4 h-4"}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Equipment"})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Equipment Inventory"})}),a.jsx(me,{children:h?a.jsx("div",{className:"text-center py-4",children:"Loading equipment..."}):r.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No equipment found. Add new equipment to get started."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equipment Details"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specifications"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sm:px-6",children:"Rates"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(T=>{var A,z;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:T.name}),a.jsx("div",{className:"text-sm text-gray-500",children:T.equipmentId}),T.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:T.description})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(pl,{variant:"secondary",className:"w-full justify-center",children:(A=Hf.find(M=>M.value===T.category))==null?void 0:A.label}),a.jsx(pl,{variant:T.status==="available"?"success":T.status==="in_use"?"warning":"error",className:"w-full justify-center",children:(z=Wf.find(M=>M.value===T.status))==null?void 0:z.label})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),a.jsxs("span",{className:"text-gray-900",children:["Mfg: ",T.manufacturingDate||"N/A"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(NM,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-900",children:T.maxLiftingCapacity?`${T.maxLiftingCapacity} tons max lift`:"N/A"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-gray-900",children:T.unladenWeight?`${T.unladenWeight} tons unladen`:"N/A"})]}),T.registrationDate&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hn,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),a.jsxs("span",{className:"text-gray-900",children:["Reg: ",T.registrationDate]})]})]})}),a.jsx("td",{className:"px-6 py-4 min-w-[300px]",children:a.jsxs("div",{className:"text-sm",children:["                          ",a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("div",{className:"font-medium text-gray-900 mb-3",children:"Base Rates"}),a.jsx("div",{className:"space-y-2.5",children:D8.map(M=>a.jsxs("div",{className:"grid grid-cols-[100px,1fr] items-baseline",children:[a.jsx("span",{className:"text-gray-600",children:M.label}),a.jsxs("div",{className:"flex items-baseline gap-1.5",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"₹"}),a.jsx("span",{className:"text-gray-900 font-medium",children:T.baseRates&&T.baseRates[M.value]!==void 0?Ve(T.baseRates[M.value]):"N/A"}),a.jsx("span",{className:"text-gray-500 text-sm",children:M.value==="monthly"||M.value==="yearly"?a.jsxs("div",{children:["per",a.jsx("br",{}),"month"]}):"per hour"})]})]},M.value))})]}),"                            ",a.jsxs("div",{className:"mt-3 flex items-center gap-2 text-gray-600",children:[a.jsx(Ut,{className:"h-4 w-4"}),a.jsx("span",{children:"Running:"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-gray-400",children:"₹"}),a.jsx("span",{className:"text-gray-900",children:T.runningCostPerKm!==void 0?Ve(T.runningCostPerKm):"N/A"}),a.jsx("span",{className:"text-gray-500",children:"/km"})]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{v(T),k({name:T.name||"",category:T.category||"mobile_crane",manufacturingDate:T.manufacturingDate||"",registrationDate:T.registrationDate||"",maxLiftingCapacity:T.maxLiftingCapacity!==void 0?String(T.maxLiftingCapacity):"",unladenWeight:T.unladenWeight!==void 0?String(T.unladenWeight):"",baseRates:{micro:T.baseRates&&T.baseRates.micro!==void 0?String(T.baseRates.micro):"",small:T.baseRates&&T.baseRates.small!==void 0?String(T.baseRates.small):"",monthly:T.baseRates&&T.baseRates.monthly!==void 0?String(T.baseRates.monthly):"",yearly:T.baseRates&&T.baseRates.yearly!==void 0?String(T.baseRates.yearly):""},runningCostPerKm:T.runningCostPerKm!==void 0?String(T.runningCostPerKm):"",description:T.description||"",status:T.status||"available"}),p(!0)},children:a.jsx(To,{className:"h-4 w-4"})}),a.jsx(q,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{v(T),y(!0)},children:a.jsx(js,{className:"h-4 w-4"})})]})})]},T.id)})})]})})})]}),a.jsx(Ct,{title:b?"Edit Equipment":"Add Equipment",isOpen:m,onClose:()=>{p(!1),B()},size:"lg",children:a.jsxs("form",{onSubmit:D,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsx(fe,{label:"Name",value:j.name,onChange:T=>k({...j,name:T.target.value}),required:!0}),a.jsx(fe,{label:"Max Lifting Capacity (tons)",type:"number",value:j.maxLiftingCapacity,onChange:T=>k({...j,maxLiftingCapacity:T.target.value}),required:!0}),a.jsx(Te,{label:"Category",value:j.category,onChange:T=>k({...j,category:T}),options:Hf,className:"w-full"}),a.jsx(fe,{label:"Unladen Weight (tons)",type:"number",value:j.unladenWeight,onChange:T=>k({...j,unladenWeight:T.target.value}),required:!0}),a.jsx(fe,{label:"Manufacturing Date (YYYY-MM)",value:j.manufacturingDate,onChange:T=>k({...j,manufacturingDate:T.target.value}),placeholder:"YYYY-MM",required:!0}),a.jsx(fe,{label:"Running Cost (₹/km)",type:"number",value:j.runningCostPerKm,onChange:T=>k({...j,runningCostPerKm:T.target.value}),required:!0}),a.jsx(fe,{label:"Registration Date (YYYY-MM)",value:j.registrationDate,onChange:T=>k({...j,registrationDate:T.target.value}),placeholder:"YYYY-MM",required:!0}),a.jsx(Te,{label:"Status",value:j.status,onChange:T=>k({...j,status:T}),options:Wf,className:"w-full"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"text-base font-medium text-gray-900",children:"Base Rates"}),a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsx(fe,{label:"Micro Rate (₹ per hour)",type:"number",value:j.baseRates.micro,onChange:T=>k({...j,baseRates:{...j.baseRates,micro:T.target.value}}),required:!0}),a.jsx(fe,{label:"Small Rate (₹ per hour)",type:"number",value:j.baseRates.small,onChange:T=>k({...j,baseRates:{...j.baseRates,small:T.target.value}}),required:!0}),a.jsx(fe,{label:"Monthly Rate (₹ per month)",type:"number",value:j.baseRates.monthly,onChange:T=>k({...j,baseRates:{...j.baseRates,monthly:T.target.value}}),required:!0}),a.jsx(fe,{label:"Yearly Rate (₹ per month)",type:"number",value:j.baseRates.yearly,onChange:T=>k({...j,baseRates:{...j.baseRates,yearly:T.target.value}}),required:!0})]})]}),a.jsx(Kt,{label:"Description",value:j.description,onChange:T=>k({...j,description:T.target.value}),rows:3}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>{p(!1),B()},children:"Cancel"}),a.jsx(q,{type:"submit",variant:"accent",children:b?"Update Equipment":"Add Equipment"})]})]})}),a.jsx(Ct,{title:"Delete Equipment",isOpen:g,onClose:()=>{y(!1),v(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this equipment? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>{y(!1),v(null)},children:"Cancel"}),a.jsx(q,{variant:"destructive",onClick:$,children:"Delete Equipment"})]})]})}),a.jsx(dt,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const qf=[{value:"lifting",label:"Lifting Service"},{value:"transport",label:"Transport Service"},{value:"attachment",label:"Attachment Rental"},{value:"operator",label:"Operator Assistance"},{value:"consultation",label:"Technical Consultation"}],P8=[{value:"hour",label:"Per Hour"},{value:"day",label:"Per Day"},{value:"shift",label:"Per Shift"}];function _8(){const{user:e}=qe(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,o]=x.useState(""),[l,c]=x.useState("all"),[u,d]=x.useState("all"),[h,f]=x.useState(!1),[m,p]=x.useState(!1),[g,y]=x.useState(null),[b,v]=x.useState(!0),[w,S]=x.useState({show:!1,title:""}),j=(F,T="success",A)=>{S({show:!0,title:F,variant:T,description:A}),setTimeout(()=>S({show:!1,title:""}),3e3)},[k,N]=x.useState({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0});x.useEffect(()=>{(async()=>{try{v(!0);const T=await k2();n(T),v(!1)}catch(T){console.error("Error fetching services:",T),j("Error fetching services","error"),v(!1)}})()},[]),x.useEffect(()=>{C()},[t,i,l,u]);const C=()=>{let F=[...t];i&&(F=F.filter(T=>T.name.toLowerCase().includes(i.toLowerCase())||T.description.toLowerCase().includes(i.toLowerCase()))),l!=="all"&&(F=F.filter(T=>T.type===l)),u!=="all"&&(F=F.filter(T=>u==="active"?T.isActive:!T.isActive)),s(F)},E=async F=>{if(F.preventDefault(),!k.name||!k.type||!k.baseRate||!k.unit){j("Please fill in all required fields","error");return}try{const T={name:k.name,type:k.type,baseRate:parseFloat(k.baseRate),unit:k.unit,description:k.description,isActive:k.isActive};if(g){const A=await D2(g.id,T);n(z=>z.map(M=>M.id===g.id?A:M)),j("Service updated successfully","success")}else{const A=await E2(T);n(z=>[...z,A]),j("Service added successfully","success")}f(!1),$()}catch{j("Error saving service","error")}},D=async()=>{if(g)try{await T2(g.id),n(F=>F.filter(T=>T.id!==g.id)),p(!1),y(null),j("Service deleted successfully","success")}catch(F){console.error("Error deleting service:",F),j("Error deleting service","error")}},$=()=>{N({name:"",type:"",baseRate:"",unit:"hour",description:"",isActive:!0}),y(null)},B=async F=>{try{const T=await P2(F.id);n(A=>A.map(z=>z.id===F.id?T:z)),j(`Service ${F.isActive?"deactivated":"activated"}`,"success")}catch(T){console.error("Error toggling service status:",T),j("Error updating service status","error")}};return!e||e.role!=="operations_manager"&&e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(fe,{placeholder:"Search services...",value:i,onChange:F=>o(F.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx(Te,{options:[{value:"all",label:"All Types"},...qf],value:l,onChange:c,className:"w-40"}),a.jsx(Te,{options:[{value:"all",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],value:u,onChange:F=>d(F),className:"w-40"})]})]}),a.jsx(q,{onClick:()=>{$(),f(!0)},leftIcon:a.jsx(Mr,{size:16}),children:"Add Service"})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Services Catalog"})}),"        ",a.jsx(me,{children:b?a.jsx("div",{className:"text-center py-4",children:"Loading services..."}):r.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No services found. Add new services to get started."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(F=>{var T;return a.jsx(ce,{variant:"bordered",className:"h-full",children:a.jsxs(me,{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:F.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(BC,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-500",children:(T=qf.find(A=>A.value===F.type))==null?void 0:T.label})]})]}),a.jsx(q,{variant:F.isActive?"default":"ghost",size:"sm",onClick:()=>B(F),children:F.isActive?a.jsx(ms,{className:"h-4 w-4"}):a.jsx(Ll,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:F.description}),a.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-1 text-primary-600",children:[a.jsx(nr,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:Ve(F.baseRate)})]}),a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(qn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Per ",F.unit]})]})]})]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{y(F),N({name:F.name,type:F.type,baseRate:F.baseRate.toString(),unit:F.unit,description:F.description||"",isActive:F.isActive}),f(!0)},children:a.jsx(To,{className:"h-4 w-4"})}),a.jsx(q,{variant:"destructive",size:"sm",onClick:()=>{y(F),p(!0)},children:a.jsx(js,{className:"h-4 w-4"})})]})]})},F.id)})})})]}),a.jsx(Ct,{isOpen:h,onClose:()=>{f(!1),$()},title:g?"Edit Service":"Add New Service",size:"lg",children:a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsx(fe,{label:"Service Name",value:k.name,onChange:F=>N(T=>({...T,name:F.target.value})),required:!0}),a.jsx(Te,{label:"Service Type",options:qf,value:k.type,onChange:F=>N(T=>({...T,type:F})),required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(fe,{label:"Base Rate",type:"number",min:"0",step:"0.01",value:k.baseRate,onChange:F=>N(T=>({...T,baseRate:F.target.value})),required:!0}),a.jsx(Te,{label:"Rate Unit",options:P8,value:k.unit,onChange:F=>N(T=>({...T,unit:F})),required:!0})]}),a.jsx(Kt,{label:"Description",value:k.description,onChange:F=>N(T=>({...T,description:F.target.value})),rows:3}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"servicesMgmt-isActive",checked:k.isActive,onChange:F=>N(T=>({...T,isActive:F.target.checked})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"Service is active and available for booking"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>{f(!1),$()},children:"Cancel"}),a.jsx(q,{type:"submit",children:g?"Update Service":"Add Service"})]})]})}),a.jsx(Ct,{isOpen:m,onClose:()=>{p(!1),y(null)},title:"Delete Service",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this service? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>{p(!1),y(null)},children:"Cancel"}),a.jsx(q,{variant:"destructive",onClick:D,children:"Delete"})]})]})}),w.show&&a.jsx(dt,{title:w.title,variant:w.variant,isVisible:w.show,onClose:()=>S({show:!1,title:""})})]})}const A8=async()=>await On.get("/users"),M8=async e=>await On.post("/users",e),l1=async(e,t)=>await On.put(`/users/${e}`,t),I8=async e=>{await On.delete(`/users/${e}`)},Gf=[{value:"admin",label:"Administrator"},{value:"sales_agent",label:"Sales Agent"},{value:"operations_manager",label:"Operations Manager"},{value:"operator",label:"Operator"},{value:"support",label:"Support"}],O8=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],ua=10,Yf=e=>{const t=e.split("").reduce((o,l)=>o+l.charCodeAt(0),0),n=["2563EB","10B981","F59E0B","8B5CF6","EC4899","6B7280"],r=t%n.length,s=n[r];return`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=${s}&color=fff&size=128`};function R8(){const{user:e}=qe(),[t,n]=x.useState([]),[r,s]=x.useState([]),[i,o]=x.useState(1),[l,c]=x.useState(""),[u,d]=x.useState("all"),[h,f]=x.useState("all"),[m,p]=x.useState(!0),[g,y]=x.useState(!1),[b,v]=x.useState(!1),[w,S]=x.useState(null),[j,k]=x.useState({show:!1,title:""}),[N,C]=x.useState({name:"",email:"",password:"",role:"operator",status:"active"});x.useEffect(()=>{(async()=>{try{if(p(!0),!e){D("Authentication Required","You need to log in to view users","warning"),p(!1);return}try{const I=(await A8()).map(H=>({id:H.id,name:H.name,email:H.email,role:H.role,status:H.status==="active"?"active":"inactive"}));n(I),s(I)}catch(P){console.error("Error fetching users:",P),P.message&&P.message.includes("Authentication required")?D("Authentication Error","You need to log in to view users","error"):D("Error loading users",P.message||"Please try again later","error");const I=[{id:"1",name:"Admin User",email:"admin@example.com",role:"admin",status:"active"},{id:"2",name:"Sales Agent",email:"sales@example.com",role:"sales_agent",status:"active"}];n(I),s(I)}}finally{p(!1)}})()},[]),x.useEffect(()=>{E()},[t,l,u,h]);const E=()=>{let M=[...t];if(l){const P=l.toLowerCase();M=M.filter(I=>I&&typeof I.name=="string"&&typeof I.email=="string"&&(I.name.toLowerCase().includes(P)||I.email.toLowerCase().includes(P)))}u!=="all"&&(M=M.filter(P=>P.role===u)),h!=="all"&&(M=M.filter(P=>P.status===h)),s(M),o(1)},D=(M,P,I="success")=>{k({show:!0,title:M,description:P,variant:I}),setTimeout(()=>k({show:!1,title:""}),3e3)},$=async M=>{const P=M.status==="active"?"inactive":"active";try{await l1(M.id,{}),n(I=>I.map(H=>H.id===M.id?{...H,status:P}:H)),D(`User ${M.status==="active"?"deactivated":"activated"}`,"success")}catch(I){console.error("Error toggling user status:",I),D("Error updating user status","error")}},B=async M=>{if(M.preventDefault(),!N.name||!N.email||!N.role){D("Please fill in all required fields","error");return}if(!w&&!N.password){D("Password is required for new users","error");return}try{if(w){const P={...w,name:N.name,email:N.email,role:N.role,status:N.status};await l1(w.id,{name:N.name,email:N.email,role:N.role,isActive:N.status==="active"}),n(I=>I.map(H=>H.id===w.id?P:H)),D("User updated successfully","success")}else try{const P=await M8({email:N.email,name:N.name,role:N.role,isActive:N.status==="active"}),I={id:P.id,name:P.name,email:P.email,role:P.role,status:P.isActive?"active":"inactive",avatar:Yf(N.name)};n(H=>[...H,I]),D("User added successfully","success")}catch(P){D(`Error creating user account: ${P.message||"Unknown error"}`,"error");return}y(!1),T()}catch(P){D(`Error saving user: ${P.message||"Unknown error"}`,"error")}},F=async()=>{if(w)try{await I8(w.id),n(M=>M.filter(P=>P.id!==w.id)),v(!1),S(null),D("User deleted successfully","success")}catch(M){console.error("Error deleting user:",M),D("Error deleting user","error")}},T=()=>{C({name:"",email:"",password:"",role:"operator",status:"active"}),S(null)},A=Math.ceil(r.length/ua),z=r.slice((i-1)*ua,i*ua);return!e||e.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(fe,{placeholder:"Search users...",value:l,onChange:M=>c(M.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx(Te,{options:[{value:"all",label:"All Roles"},...Gf],value:u,onChange:M=>d(M),className:"w-full sm:w-40"}),a.jsx(Te,{options:[{value:"all",label:"All Status"},...O8],value:h,onChange:M=>f(M),className:"w-full sm:w-40"})]})]}),a.jsx(q,{onClick:()=>{T(),y(!0)},leftIcon:a.jsx(CM,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add User"})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"User Management"})}),a.jsx(me,{children:m?a.jsx("div",{className:"text-center py-4",children:"Loading users..."}):z.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:"No users found matching your filters."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(M=>{var P;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["                          ",a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:M.avatar||Yf(M.name),alt:M.name,className:"h-10 w-10 rounded-full object-cover",onError:I=>{const H=I.target;H.onerror=null,H.src=Yf(M.name)}}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"font-medium text-gray-900",children:M.name}),a.jsx("div",{className:"text-sm text-gray-500",children:M.email})]})]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(P=Gf.find(I=>I.value===M.role))==null?void 0:P.label})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${M.status==="active"?"bg-success-100 text-success-800":"bg-gray-100 text-gray-800"}`,children:M.status==="active"?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>$(M),children:M.status==="active"?a.jsx(Ll,{size:16}):a.jsx(ms,{size:16})}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{S(M),C({name:M.name,email:M.email,password:"",role:M.role,status:M.status}),y(!0)},children:a.jsx(To,{size:16})}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{S(M),v(!0)},children:a.jsx(js,{size:16})})]})})]},M.id)})})]})}),A>1&&a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*ua+1," to"," ",Math.min(i*ua,r.length)," of"," ",r.length," users"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:()=>o(M=>Math.max(1,M-1)),disabled:i===1,children:"Previous"}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>o(M=>Math.min(A,M+1)),disabled:i===A,children:"Next"})]})]})]})})]}),"      ",a.jsx(Ct,{isOpen:g,onClose:()=>{y(!1),T()},title:w?"Edit User":"Add New User",size:"lg",children:a.jsxs("form",{onSubmit:B,className:"space-y-6",children:[a.jsx(fd,{}),a.jsx(fe,{label:"Full Name",value:N.name,onChange:M=>C(P=>({...P,name:M.target.value})),required:!0}),"          ",a.jsx(fe,{label:"Email Address",type:"email",value:N.email,onChange:M=>C(P=>({...P,email:M.target.value})),required:!0}),a.jsx(fe,{label:"Password",type:"password",value:N.password||"",onChange:M=>C(P=>({...P,password:M.target.value})),required:!w,placeholder:w?"Leave blank to keep current password":""}),a.jsx(Te,{label:"Role",options:Gf,value:N.role,onChange:M=>C(P=>({...P,role:M})),required:!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"userMgmt-isActive",checked:N.status==="active",onChange:M=>C(P=>({...P,status:M.target.checked?"active":"inactive"})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),a.jsx("label",{htmlFor:"isActive",className:"text-sm text-gray-700",children:"User is active"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>{y(!1),T()},children:"Cancel"}),a.jsx(q,{type:"submit",variant:"accent",children:w?"Update User":"Add User"})]})]})}),"      ",a.jsx(Ct,{isOpen:b,onClose:()=>{v(!1),S(null)},title:"Delete User",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-error-50 text-error-700 rounded-lg",children:[a.jsx(vi,{className:"h-5 w-5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:"Are you sure you want to delete this user? This action cannot be undone."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>{v(!1),S(null)},children:"Cancel"}),a.jsx(q,{variant:"destructive",onClick:F,children:"Delete User"})]})]})}),j.show&&a.jsx(dt,{title:j.title,variant:j.variant,isVisible:j.show,onClose:()=>k({show:!1,title:""})})]})}function Ai({children:e,title:t,defaultExpanded:n=!1,icon:r,className:s="",onToggle:i}){const[o,l]=x.useState(n),c=()=>{const u=!o;l(u),i==null||i(u)};return a.jsxs(ce,{className:`shadow-sm hover:shadow-md transition-all duration-200 ${s}`,children:[a.jsx(ge,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200 p-3 sm:p-4 md:p-5",onClick:c,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[r&&a.jsx("div",{className:"text-gray-500 flex-shrink-0",children:r}),a.jsx(xe,{className:"text-base sm:text-lg font-medium",children:t})]}),a.jsx("div",{className:`transform transition-transform duration-200 flex-shrink-0 ${o?"rotate-180":""}`,children:a.jsx(tM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400"})})]})}),a.jsx("div",{className:`transition-all duration-300 overflow-hidden ${o?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,style:{transform:"translateZ(0)"},children:a.jsx(me,{className:"p-3 sm:p-4 pt-0 sm:pt-0",children:e})})]})}function L8(){const[e,t]=x.useState(!0),[n,r]=x.useState(!1),[s,i]=x.useState({micro:{minDays:1,maxDays:10},small:{minDays:11,maxDays:25},monthly:{minDays:26,maxDays:365},yearly:{minDays:366,maxDays:3650}}),[o,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await pE();i(f.orderTypeLimits)}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{r(!0);const f=["micro","small","monthly","yearly"];let m=!0,p=0;for(const g of f){const y=s[g];if(y.minDays<=p){u(`${g.charAt(0).toUpperCase()+g.slice(1)} minimum days must be greater than previous maximum`,"error"),m=!1;break}if(y.maxDays<=y.minDays){u(`${g.charAt(0).toUpperCase()+g.slice(1)} maximum days must be greater than minimum days`,"error"),m=!1;break}p=y.maxDays}if(!m)return;await gE({orderTypeLimits:s}),u("Configuration saved successfully")}catch{u("Error saving configuration","error")}finally{r(!1)}},h=(f,m,p)=>{const g=parseInt(p)||0;i(y=>({...y,[f]:{...y[f],[m]:g}}))};return e?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:["micro","small","monthly","yearly"].map(f=>a.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 bg-white shadow-sm space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold capitalize text-gray-900",children:[f," Order"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx(ke,{type:"number",label:"Minimum Days",value:s[f].minDays,onChange:m=>h(f,"minDays",m.target.value),min:"1"})}),a.jsx("div",{children:a.jsx(ke,{type:"number",label:"Maximum Days",value:s[f].maxDays,onChange:m=>h(f,"maxDays",m.target.value),min:s[f].minDays+1})})]})]},f))}),a.jsx("div",{className:"flex justify-end",children:a.jsx(q,{onClick:d,disabled:n,leftIcon:n?a.jsx(rt,{className:"animate-spin"}):a.jsx(bi,{}),children:n?"Saving...":"Save Changes"})}),o.show&&a.jsx(dt,{title:o.title,variant:o.variant,isVisible:o.show,onClose:()=>l({show:!1,title:""})})]})}function F8(){const[e,t]=x.useState(!0),[n,r]=x.useState(!1),[s,i]=x.useState({foodRatePerMonth:2500,accommodationRatePerMonth:4e3}),[o,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const h=await vE();i({foodRatePerMonth:h.foodRatePerMonth,accommodationRatePerMonth:h.accommodationRatePerMonth})}catch{u("Error loading configuration","error")}finally{t(!1)}},u=(h,f="success")=>{l({show:!0,title:h,variant:f}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{if(r(!0),s.foodRatePerMonth<=0||s.accommodationRatePerMonth<=0){u("Rates must be greater than 0","error");return}await bE(s),u("Rates updated successfully")}catch{u("Error saving rates","error")}finally{r(!1)}};return e?a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(en,{className:"h-5 w-5 text-primary-500"}),a.jsx("h3",{className:"font-medium text-gray-900",children:"Food Allowance"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),a.jsx(ke,{type:"number",value:s.foodRatePerMonth,onChange:h=>i(f=>({...f,foodRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),a.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(s.foodRatePerMonth/26).toFixed(2),"/day"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow duration-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(en,{className:"h-5 w-5 text-primary-500"}),a.jsx("h3",{className:"font-medium text-gray-900",children:"Accommodation Allowance"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Rate"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),a.jsx(ke,{type:"number",value:s.accommodationRatePerMonth,onChange:h=>i(f=>({...f,accommodationRatePerMonth:Number(h.target.value)})),className:"pl-7",min:"0"})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Daily Rate:"}),a.jsxs("span",{className:"font-medium text-gray-900",children:["₹",(s.accommodationRatePerMonth/26).toFixed(2),"/day"]})]})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(q,{onClick:d,disabled:n,leftIcon:n?a.jsx(rt,{className:"animate-spin"}):a.jsx(bi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),o.show&&a.jsx(dt,{title:o.title,variant:o.variant,isVisible:o.show,onClose:()=>l({show:!1,title:""})})]})}function $8(){const[e,t]=x.useState(!0),[n,r]=x.useState(!1),[s,i]=x.useState({usageFactors:{normal:1,medium:1.2,heavy:1.5},riskFactors:{low:0,medium:8e3,high:15e3},shiftFactors:{single:1,double:1.8},dayNightFactors:{day:1,night:1.3}}),[o,l]=x.useState({show:!1,title:""});x.useEffect(()=>{c()},[]);const c=async()=>{try{t(!0);const f=await wE(),m={...s,...f,usageFactors:{...s.usageFactors,...(f==null?void 0:f.usageFactors)||{}}};i(m)}catch{u("Error loading configuration, using defaults","warning")}finally{t(!1)}},u=(f,m="success")=>{l({show:!0,title:f,variant:m}),setTimeout(()=>l({show:!1,title:""}),3e3)},d=async()=>{try{r(!0),await jE(s),u("Parameters updated successfully")}catch{u("Error saving parameters","error")}finally{r(!1)}};if(e)return a.jsx("div",{className:"flex items-center justify-center h-48",children:a.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})});const h=({value:f,onChange:m,label:p,isPercentage:g=!1})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p}),a.jsxs("div",{className:"relative mt-1",children:[!g&&a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"₹"})}),a.jsx(ke,{type:"number",value:f,onChange:y=>m(Number(y.target.value)),className:g?"pr-8":"pl-7",min:"0"}),g&&a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx(yM,{className:"h-4 w-4 text-gray-400"})})]})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ax,{className:"h-5 w-5 text-primary-500"}),a.jsx(xe,{children:"Usage Rates"})]})}),"          ",a.jsxs(me,{className:"space-y-4",children:[a.jsx(h,{label:"Normal Usage Factor",value:s.usageFactors.normal,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,normal:f}})),isPercentage:!0}),a.jsx(h,{label:"Medium Usage Factor",value:s.usageFactors.medium,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,medium:f}})),isPercentage:!0}),a.jsx(h,{label:"Heavy Usage Factor",value:s.usageFactors.heavy,onChange:f=>i(m=>({...m,usageFactors:{...m.usageFactors,heavy:f}})),isPercentage:!0})]})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sx,{className:"h-5 w-5 text-primary-500"}),a.jsx(xe,{children:"Risk Factors"})]})}),a.jsxs(me,{className:"space-y-4",children:[a.jsx(h,{label:"Low Risk",value:s.riskFactors.low,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,low:f}})),isPercentage:!0}),a.jsx(h,{label:"Medium Risk",value:s.riskFactors.medium,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,medium:f}})),isPercentage:!0}),a.jsx(h,{label:"High Risk",value:s.riskFactors.high,onChange:f=>i(m=>({...m,riskFactors:{...m.riskFactors,high:f}})),isPercentage:!0})]})]}),"        ",a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qn,{className:"h-5 w-5 text-primary-500"}),a.jsx(xe,{children:"Shift Factors"})]})}),a.jsxs(me,{className:"space-y-4",children:[a.jsx(h,{label:"Single Shift",value:s.shiftFactors.single,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,single:f}})),isPercentage:!0}),a.jsx(h,{label:"Double Shift",value:s.shiftFactors.double,onChange:f=>i(m=>({...m,shiftFactors:{...m.shiftFactors,double:f}})),isPercentage:!0})]})]}),"        ",a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mM,{className:"h-5 w-5 text-primary-500"}),a.jsx(xe,{children:"Day/Night Factors"})]})}),a.jsxs(me,{className:"space-y-4",children:[a.jsx(h,{label:"Day Factor",value:s.dayNightFactors.day,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,day:f}})),isPercentage:!0}),a.jsx(h,{label:"Night Factor",value:s.dayNightFactors.night,onChange:f=>i(m=>({...m,dayNightFactors:{...m.dayNightFactors,night:f}})),isPercentage:!0})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(q,{onClick:d,disabled:n,leftIcon:n?a.jsx(rt,{className:"animate-spin"}):a.jsx(bi,{}),className:"w-full sm:w-auto",children:n?"Saving Changes...":"Save Changes"})}),o.show&&a.jsx(dt,{title:o.title,variant:o.variant,isVisible:o.show,onClose:()=>l({show:!1,title:""})})]})}const ZQ={getTemplates:DE,getTemplateById:V8,createTemplate:z8,updateTemplate:Hp,deleteTemplate:B8};async function z8(e){const n=await fetch("http://103.224.243.242:3001/api/templates",{method:"POST",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok)throw new Error("Failed to create template");const r=await n.json();return r.data||r}async function Hp(e,t){const r=await fetch(`http://103.224.243.242:3001/api/templates/${e}`,{method:"PATCH",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!r.ok)throw new Error("Failed to update template");const s=await r.json();return s.data||s}async function B8(e){if(!(await fetch(`http://103.224.243.242:3001/api/templates/${e}`,{method:"DELETE",headers:Ce(),credentials:"include"})).ok)throw new Error("Failed to delete template")}async function V8(e){const n=await fetch(`http://103.224.243.242:3001/api/templates/${e}`,{method:"GET",headers:Ce(),credentials:"include"});if(!n.ok)throw new Error("Failed to fetch template by ID");const r=await n.json();return r.data||r}async function DE(){try{const t=await fetch("http://103.224.243.242:3001/api/templates",{method:"GET",headers:Ce(),credentials:"include"});if(!t.ok)throw console.error("Failed to fetch templates:",t.status,t.statusText),new Error(`Failed to fetch templates: ${t.status}`);const n=await t.json();return Array.isArray(n)?n:Array.isArray(n.data)?n.data:[]}catch(e){throw console.error("Error in getTemplates:",e),e}}const c1={id:"sample-quotation",leadId:"sample-lead",customerId:"sample-customer",customerName:"Sample Company Ltd.",customerContact:{name:"John Smith",email:"john.smith@samplecompany.com",phone:"+91 98765 43210",company:"Sample Company Ltd.",address:"123 Business Park, Tech City, State - 400001",designation:"Procurement Manager"},orderType:"monthly",numberOfDays:30,workingHours:8,selectedEquipment:{id:"sample-equipment",equipmentId:"crane-001",name:"50T Mobile Crane",baseRates:{micro:5e3,small:4500,monthly:4e3,yearly:3500}},foodResources:2,accomResources:2,siteDistance:50,usage:"normal",riskFactor:"low",extraCharge:5e3,incidentalCharges:["10000"],otherFactorsCharge:2e3,billing:"gst",includeGst:!0,shift:"single",dayNight:"day",mobDemob:15e3,mobRelaxation:5e3,runningCostPerKm:100,totalRent:15e4,version:1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system",status:"draft",machineType:"mobile",dealType:"rental",sundayWorking:"no",otherFactors:[]};function U8({onSave:e}){var w,S;const[t,n]=x.useState([]),[r,s]=x.useState(""),[i,o]=x.useState(null),[l,c]=x.useState(!0),[u,d]=x.useState(!1),[h,f]=x.useState({show:!1,title:""}),[m,p]=x.useState("");x.useEffect(()=>{async function j(){if(i&&c1)try{const k=ml(c1,i);p(k)}catch{p('<div style="color:red">Error generating preview</div>')}else p("")}j()},[i]),x.useEffect(()=>{g()},[]),x.useEffect(()=>{if(r){const j=t.find(k=>k.id===r);o(j||null)}else o(null)},[r,t]);const g=async()=>{try{c(!0);const j=await DE();n(j);const k=j.find(N=>N.isDefault);k&&s(k.id)}catch(j){console.error("Error loading templates and config:",j),y("Error loading configuration","error")}finally{c(!1)}},y=(j,k="success")=>{f({show:!0,title:j,variant:k}),setTimeout(()=>f({show:!1,title:""}),3e3)},b=async()=>{try{d(!0);const j=t.find(k=>k.isDefault);if(j&&j.id!==r&&await Hp(j.id,{isDefault:!1}),r){const k=t.find(N=>N.id===r);k&&await Hp(k.id,{isDefault:!0})}await g(),y("Default template configuration saved successfully"),e==null||e()}catch(j){console.error("Error saving default template config:",j),y("Error saving configuration","error")}finally{d(!1)}},v=[{value:"",label:"No default template selected"},...t.map(j=>({value:j.id,label:j.name}))];return l?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(rt,{className:"w-6 h-6 animate-spin text-primary-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"h-5 w-5 text-primary-500"}),a.jsx(xe,{children:"Default Quotation Template"})]})}),a.jsxs(me,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Default Template"}),a.jsx(Te,{options:v,value:r,onChange:s,className:"w-full max-w-md"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This template will be used as the default when creating new quotations."})]}),r&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(St,{className:"h-5 w-5 text-blue-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Selected Template"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(w=t.find(j=>j.id===r))==null?void 0:w.name}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:(S=t.find(j=>j.id===r))==null?void 0:S.description})]})]})}),t.length===0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(rt,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"No Templates Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Create quotation templates first to set a default template."})]})]})})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:a.jsx(q,{onClick:b,disabled:u||t.length===0,leftIcon:u?a.jsx(rt,{className:"animate-spin"}):a.jsx(bi,{}),className:"w-full sm:w-auto",children:u?"Saving Configuration...":"Save Configuration"})})]})]}),i&&a.jsxs(ce,{children:[a.jsx(ge,{children:a.jsx(xe,{children:"Template Preview"})}),a.jsx(me,{children:a.jsx("div",{className:"bg-white border rounded-lg p-6 shadow-sm max-h-[800px] overflow-y-auto",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:m}})})})]}),h.show&&a.jsx(dt,{title:h.title,variant:h.variant,isVisible:h.show,onClose:()=>f({show:!1,title:""})})]})}const W8=()=>{const[e,t]=x.useState({host:"localhost",port:5432,database:"asp_crm",user:"postgres",password:"",ssl:!1}),[n,r]=x.useState(!0),[s,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState("untested"),[d,h]=x.useState({show:!1,title:""}),f=(b,v="success")=>{h({show:!0,title:b,variant:v}),setTimeout(()=>h({show:!1,title:""}),v==="success"?5e3:3e3)};x.useEffect(()=>{m()},[]);const m=async()=>{r(!0);try{const b=await fetch("/api/dbconfig",{method:"GET",headers:ou()});if(!b.ok)throw new Error("Failed to fetch database configuration");const v=await b.json();v.success&&v.data&&t({host:v.data.host||"localhost",port:v.data.port||5432,database:v.data.database||"asp_crm",user:v.data.user||"postgres",password:"",ssl:v.data.ssl||!1})}catch(b){console.error("Failed to fetch database config:",b),f("Failed to load database configuration","error")}finally{r(!1)}},p=b=>{const{name:v,value:w,type:S,checked:j}=b.target;t(k=>({...k,[v]:S==="checkbox"?j:S==="number"?parseInt(w)||0:w}))},g=async()=>{l(!0);try{const b=await fetch("/api/dbconfig",{method:"PUT",headers:ou(),body:JSON.stringify(e)}),v=await b.json();if(b.ok&&v.success)f("Database configuration saved successfully. Please restart the server for changes to take effect.","success"),u("untested");else throw new Error(v.message||"Unknown error")}catch(b){console.error("Failed to save database config:",b),f(`Failed to save database configuration: ${b instanceof Error?b.message:"Unknown error"}`,"error")}finally{l(!1)}},y=async()=>{var b,v;i(!0),u("untested");try{const w=await fetch("/api/dbconfig/test",{method:"POST",headers:ou(),body:JSON.stringify(e)}),S=await w.json();w.ok&&S.success?(u("success"),f(`Connection successful! PostgreSQL ${((v=(b=S.data)==null?void 0:b.version)==null?void 0:v.split(" ")[1])||"server"} is running.`,"success")):(u("failed"),f(`Connection failed: ${S.message||"Unknown error"}`,"error"))}catch(w){console.error("Connection test error:",w),u("failed"),f("Connection test failed. See console for details.","error")}finally{i(!1)}};return n?a.jsx("div",{className:"p-4 text-center",children:"Loading database configuration..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Database Connection Settings"}),a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Configure the PostgreSQL database connection parameters. Changes will take effect after server restart."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Host"}),a.jsx(ke,{name:"host",value:e.host,onChange:p,placeholder:"localhost",leftIcon:a.jsx(jM,{className:"h-4 w-4"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port"}),a.jsx(ke,{name:"port",type:"number",value:e.port,onChange:p,placeholder:"5432"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Database Name"}),a.jsx(ke,{name:"database",value:e.database,onChange:p,placeholder:"asp_crm",leftIcon:a.jsx(no,{className:"h-4 w-4"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx(ke,{name:"user",value:e.user,onChange:p,placeholder:"postgres"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx(ke,{name:"password",type:"password",value:e.password||"",onChange:p,placeholder:"Leave blank to keep existing password"})]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[a.jsx("input",{type:"checkbox",id:"dbConfig-ssl",name:"ssl",checked:e.ssl,onChange:p,className:"h-4 w-4 text-blue-600 rounded"}),a.jsx("label",{htmlFor:"dbConfig-ssl",className:"text-sm text-gray-700",children:"Enable SSL/TLS"})]})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[a.jsx(q,{variant:"outline",onClick:y,disabled:s,leftIcon:s?a.jsx(rt,{className:"h-4 w-4 animate-spin"}):void 0,rightIcon:c==="success"?a.jsx(RC,{className:"h-4 w-4 text-green-500"}):void 0,children:s?"Testing...":"Test Connection"}),a.jsx(q,{onClick:g,disabled:o,leftIcon:o?a.jsx(rt,{className:"h-4 w-4 animate-spin"}):a.jsx(bi,{className:"h-4 w-4"}),children:o?"Saving...":"Save Configuration"})]}),d.show&&a.jsx(dt,{title:d.title,variant:d.variant,onClose:()=>h({show:!1,title:""})})]})};function H8(){const{user:e}=qe();return!e||e.role!=="admin"&&e.role!=="operations_manager"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Configuration"}),a.jsx(ws,{className:"h-6 w-6 text-gray-400"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ai,{icon:a.jsx(St,{className:"h-5 w-5"}),title:"Default Quotation Template",defaultExpanded:!0,children:a.jsx(U8,{})}),a.jsx(Ai,{icon:a.jsx(Hn,{className:"h-5 w-5"}),title:"Quotation Order Type Settings",defaultExpanded:!1,children:a.jsx(L8,{})}),a.jsx(Ai,{icon:a.jsx(St,{className:"h-5 w-5"}),title:"Quotation Form",defaultExpanded:!1,children:a.jsx("div",{className:"text-sm text-gray-500 p-4",children:"Configure quotation form settings and defaults here."})}),a.jsx(Ai,{icon:a.jsx(en,{className:"h-5 w-5"}),title:"Resource Rates",defaultExpanded:!1,children:a.jsx(F8,{})}),a.jsx(Ai,{icon:a.jsx(ax,{className:"h-5 w-5"}),title:"Additional Parameters",defaultExpanded:!1,children:a.jsx($8,{})}),a.jsx(Ai,{icon:a.jsx(no,{className:"h-5 w-5"}),title:"Database Connection",defaultExpanded:!1,children:a.jsx(W8,{})})]})]})}function q8(){const{user:e}=qe(),[t,n]=x.useState([]),[r,s]=x.useState(""),[i,o]=x.useState(!1),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(!0),[m,p]=x.useState({show:!1,title:""}),[g,y]=x.useState({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""});x.useEffect(()=>{b()},[]);const b=async()=>{try{const N=await dE();N&&Array.isArray(N)?n(N):j("Error fetching customers: Invalid data format","error")}catch{j("Error fetching customers","error")}finally{f(!1)}},v=async N=>{if(N.preventDefault(),!g.name||!g.companyName||!g.contactName||!g.email||!g.phone||!g.address||!g.type){j("Please fill in all required fields","error");return}try{if(u){const C=await TV(u.id,g);C&&n(E=>E.map(D=>D.id===u.id?C:D)),j("Customer updated successfully","success")}else{const C=await hE(g);n(E=>[...E,C]),j("Customer added successfully","success")}o(!1),S()}catch{j("Error saving customer","error")}},w=async()=>{if(u)try{await PV(u.id),n(N=>N.filter(C=>C.id!==u.id)),c(!1),d(null),j("Customer deleted successfully","success")}catch{j("Error deleting customer","error")}},S=()=>{y({name:"",companyName:"",contactName:"",email:"",phone:"",address:"",type:"other",designation:"",notes:""}),d(null)},j=(N,C="success")=>{p({show:!0,title:N,variant:C}),setTimeout(()=>p({show:!1,title:""}),3e3)},k=t.filter(N=>N&&typeof N.name=="string"&&typeof N.email=="string"&&(N.name.toLowerCase().includes(r.toLowerCase())||N.email.toLowerCase().includes(r.toLowerCase())||N.companyName&&typeof N.companyName=="string"&&N.companyName.toLowerCase().includes(r.toLowerCase())));return!e||e.role!=="admin"&&e.role!=="sales_agent"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1 max-w-md relative",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx(fe,{placeholder:"Search customers...",value:r,onChange:N=>s(N.target.value),className:"pl-10 w-full"})]}),a.jsx(q,{onClick:()=>{S(),o(!0)},leftIcon:a.jsx(Mr,{size:16}),variant:"accent",className:"w-full sm:w-auto flex-shrink-0",children:"Add Customer"})]}),a.jsx(ce,{children:a.jsx(me,{children:h?a.jsx("div",{className:"text-center py-8",children:"Loading customers..."}):k.length===0?a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No customers found. Add new customers to get started."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Designation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(N=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.contactName}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.companyName}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.designation||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.type}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.phone}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.address}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>{d(N),y({name:N.name,companyName:N.companyName,contactName:N.contactName,email:N.email,phone:N.phone,address:N.address,type:N.type,designation:N.designation||"",notes:N.notes||""}),o(!0)},title:"Edit Customer",children:a.jsx(To,{className:"h-4 w-4"})}),a.jsx(q,{variant:"ghost",size:"sm",className:"text-error-600 hover:text-error-700 hover:bg-error-50",onClick:()=>{d(N),c(!0)},title:"Delete Customer",children:a.jsx(js,{className:"h-4 w-4"})})]})})]},N.id))})]})})})}),a.jsx(Ct,{isOpen:i,onClose:()=>{o(!1),S()},title:u?"Edit Customer":"Add New Customer",size:"lg",children:a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[a.jsx(fe,{label:"Customer Name",value:g.name,onChange:N=>y(C=>({...C,name:N.target.value})),required:!0}),a.jsx(fe,{label:"Company Name",value:g.companyName,onChange:N=>y(C=>({...C,companyName:N.target.value})),required:!0}),a.jsx(fe,{label:"Contact Name",value:g.contactName,onChange:N=>y(C=>({...C,contactName:N.target.value})),required:!0}),a.jsx(fe,{label:"Designation",value:g.designation,onChange:N=>y(C=>({...C,designation:N.target.value}))}),a.jsx(fe,{label:"Type",value:g.type,onChange:N=>y(C=>({...C,type:N.target.value})),required:!0}),a.jsx(fe,{label:"Email",type:"email",value:g.email,onChange:N=>y(C=>({...C,email:N.target.value})),required:!0}),a.jsx(fe,{label:"Phone",value:g.phone,onChange:N=>y(C=>({...C,phone:N.target.value})),required:!0}),a.jsx(fe,{label:"Address",value:g.address,onChange:N=>y(C=>({...C,address:N.target.value})),required:!0}),a.jsx(fe,{label:"Notes",value:g.notes,onChange:N=>y(C=>({...C,notes:N.target.value}))}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:()=>{o(!1),S()},children:"Cancel"}),a.jsx(q,{type:"submit",variant:"accent",children:u?"Update Customer":"Add Customer"})]})]})}),a.jsx(Ct,{isOpen:l,onClose:()=>{c(!1),d(null)},title:"Delete Customer",size:"sm",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this customer? This action cannot be undone."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>{c(!1),d(null)},children:"Cancel"}),a.jsx(q,{variant:"destructive",onClick:w,children:"Delete"})]})]})}),m.show&&a.jsx(dt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]})}function Ft(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var G8=typeof Symbol=="function"&&Symbol.observable||"@@observable",u1=G8,d1=()=>Math.random().toString(36).substring(7).split("").join("."),Y8={INIT:`@@redux/INIT${d1()}`,REPLACE:`@@redux/REPLACE${d1()}`},h1=Y8;function Q8(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function TE(e,t,n){if(typeof e!="function")throw new Error(Ft(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ft(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ft(1));return n(TE)(e,t)}let r=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((y,b)=>{o.set(b,y)}))}function d(){if(c)throw new Error(Ft(3));return s}function h(y){if(typeof y!="function")throw new Error(Ft(4));if(c)throw new Error(Ft(5));let b=!0;u();const v=l++;return o.set(v,y),function(){if(b){if(c)throw new Error(Ft(6));b=!1,u(),o.delete(v),i=null}}}function f(y){if(!Q8(y))throw new Error(Ft(7));if(typeof y.type>"u")throw new Error(Ft(8));if(typeof y.type!="string")throw new Error(Ft(17));if(c)throw new Error(Ft(9));try{c=!0,s=r(s,y)}finally{c=!1}return(i=o).forEach(v=>{v()}),y}function m(y){if(typeof y!="function")throw new Error(Ft(10));r=y,f({type:h1.REPLACE})}function p(){const y=h;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(Ft(11));function v(){const S=b;S.next&&S.next(d())}return v(),{unsubscribe:y(v)}},[u1](){return this}}}return f({type:h1.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[u1]:p}}function f1(e,t){return function(...n){return t(e.apply(this,n))}}function m1(e,t){if(typeof e=="function")return f1(e,t);if(typeof e!="object"||e===null)throw new Error(Ft(16));const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=f1(s,t))}return n}function PE(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function K8(...e){return t=>(n,r)=>{const s=t(n,r);let i=()=>{throw new Error(Ft(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=PE(...l)(s.dispatch),{...s,dispatch:i}}}var X8={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=x;function J8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Z8=typeof Object.is=="function"?Object.is:J8,eW=Ql.useSyncExternalStore,tW=Ql.useRef,nW=Ql.useEffect,rW=Ql.useMemo,sW=Ql.useDebugValue;X8.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var i=tW(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=rW(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),s!==void 0&&o.hasValue){var p=o.value;if(s(p,m))return h=p}return h=m}if(p=h,Z8(d,m))return p;var g=r(m);return s!==void 0&&s(p,g)?(d=m,p):(d=m,h=g)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,s]);var l=eW(e,i[0],i[1]);return nW(function(){o.hasValue=!0,o.value=l},[l]),sW(l),l};var iW=x.version.startsWith("19"),oW=Symbol.for(iW?"react.transitional.element":"react.element"),aW=Symbol.for("react.portal"),lW=Symbol.for("react.fragment"),cW=Symbol.for("react.strict_mode"),uW=Symbol.for("react.profiler"),dW=Symbol.for("react.consumer"),hW=Symbol.for("react.context"),_E=Symbol.for("react.forward_ref"),fW=Symbol.for("react.suspense"),mW=Symbol.for("react.suspense_list"),ry=Symbol.for("react.memo"),pW=Symbol.for("react.lazy"),gW=_E,xW=ry;function yW(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case oW:switch(e=e.type,e){case lW:case uW:case cW:case fW:case mW:return e;default:switch(e=e&&e.$$typeof,e){case hW:case _E:case pW:case ry:return e;case dW:return e;default:return t}}case aW:return t}}}function vW(e){return yW(e)===ry}function bW(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:i,areStatePropsEqual:o}){let l=!1,c,u,d,h,f;function m(v,w){return c=v,u=w,d=e(c,u),h=t(r,u),f=n(d,h,u),l=!0,f}function p(){return d=e(c,u),t.dependsOnOwnProps&&(h=t(r,u)),f=n(d,h,u),f}function g(){return e.dependsOnOwnProps&&(d=e(c,u)),t.dependsOnOwnProps&&(h=t(r,u)),f=n(d,h,u),f}function y(){const v=e(c,u),w=!o(v,d);return d=v,w&&(f=n(d,h,u)),f}function b(v,w){const S=!i(w,u),j=!s(v,c,w,u);return c=v,u=w,S&&j?p():S?g():j?y():f}return function(w,S){return l?b(w,S):m(w,S)}}function wW(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...s}){const i=t(e,s),o=n(e,s),l=r(e,s);return bW(i,o,l,e,s)}function jW(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...i)=>t(s(...i)))}return n}function qp(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function p1(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function AE(e,t){return function(r,{displayName:s}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=p1(e);let u=i(l,c);return typeof u=="function"&&(i.mapToProps=u,i.dependsOnOwnProps=p1(u),u=i(l,c)),u},i}}function sy(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function SW(e){return e&&typeof e=="object"?qp(t=>jW(e,t)):e?typeof e=="function"?AE(e):sy(e,"mapDispatchToProps"):qp(t=>({dispatch:t}))}function CW(e){return e?typeof e=="function"?AE(e):sy(e,"mapStateToProps"):qp(()=>({}))}function NW(e,t,n){return{...n,...e,...t}}function kW(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let i=!1,o;return function(c,u,d){const h=e(c,u,d);return i?s(h,o)||(o=h):(i=!0,o=h),o}}}function EW(e){return e?typeof e=="function"?kW(e):sy(e,"mergeProps"):()=>NW}function DW(e){e()}function TW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){DW(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!r||e===null||(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var g1={notify(){},get:()=>[]};function ME(e,t){let n,r=g1,s=0,i=!1;function o(g){d();const y=r.subscribe(g);let b=!1;return()=>{b||(b=!0,y(),h())}}function l(){r.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=TW())}function h(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=g1)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>r};return p}var PW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_W=PW(),AW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",MW=AW(),IW=()=>_W||MW?x.useLayoutEffect:x.useEffect,xd=IW();function x1(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Qf(e,t){if(x1(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!x1(e[n[s]],t[n[s]]))return!1;return!0}var OW={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},RW={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},LW={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},IE={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FW={[gW]:LW,[xW]:IE};function y1(e){return vW(e)?IE:FW[e.$$typeof]||OW}var $W=Object.defineProperty,zW=Object.getOwnPropertyNames,v1=Object.getOwnPropertySymbols,BW=Object.getOwnPropertyDescriptor,VW=Object.getPrototypeOf,b1=Object.prototype;function Gp(e,t){if(typeof t!="string"){if(b1){const i=VW(t);i&&i!==b1&&Gp(e,i)}let n=zW(t);v1&&(n=n.concat(v1(t)));const r=y1(e),s=y1(t);for(let i=0;i<n.length;++i){const o=n[i];if(!RW[o]&&!(s&&s[o])&&!(r&&r[o])){const l=BW(t,o);try{$W(e,o,l)}catch{}}}}return e}var Kf=Symbol.for("react-redux-context"),Xf=typeof globalThis<"u"?globalThis:{};function UW(){if(!x.createContext)return{};const e=Xf[Kf]??(Xf[Kf]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var OE=UW(),WW=[null,null];function HW(e,t,n){xd(()=>e(...t),n)}function qW(e,t,n,r,s,i){e.current=r,n.current=!1,s.current&&(s.current=null,i())}function GW(e,t,n,r,s,i,o,l,c,u,d){if(!e)return()=>{};let h=!1,f=null;const m=()=>{if(h||!l.current)return;const g=t.getState();let y,b;try{y=r(g,s.current)}catch(v){b=v,f=v}b||(f=null),y===i.current?o.current||u():(i.current=y,c.current=y,o.current=!0,d())};return n.onStateChange=m,n.trySubscribe(),m(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function YW(e,t){return e===t}function QW(e,t,n,{pure:r,areStatesEqual:s=YW,areOwnPropsEqual:i=Qf,areStatePropsEqual:o=Qf,areMergedPropsEqual:l=Qf,forwardRef:c=!1,context:u=OE}={}){const d=u,h=CW(e),f=SW(t),m=EW(n),p=!!e;return y=>{const b=y.displayName||y.name||"Component",v=`Connect(${b})`,w={shouldHandleStateChanges:p,displayName:v,wrappedComponentName:b,WrappedComponent:y,initMapStateToProps:h,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:s,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:l};function S(N){const[C,E,D]=x.useMemo(()=>{const{reactReduxForwardedRef:L,...R}=N;return[N.context,L,R]},[N]),$=x.useMemo(()=>{let L=d;return C!=null&&C.Consumer,L},[C,d]),B=x.useContext($),F=!!N.store&&!!N.store.getState&&!!N.store.dispatch,T=!!B&&!!B.store,A=F?N.store:B.store,z=T?B.getServerState:A.getState,M=x.useMemo(()=>wW(A.dispatch,w),[A]),[P,I]=x.useMemo(()=>{if(!p)return WW;const L=ME(A,F?void 0:B.subscription),R=L.notifyNestedSubs.bind(L);return[L,R]},[A,F,B]),H=x.useMemo(()=>F?B:{...B,subscription:P},[F,B,P]),G=x.useRef(void 0),ee=x.useRef(D),ie=x.useRef(void 0),V=x.useRef(!1),X=x.useRef(!1),U=x.useRef(void 0);xd(()=>(X.current=!0,()=>{X.current=!1}),[]);const O=x.useMemo(()=>()=>ie.current&&D===ee.current?ie.current:M(A.getState(),D),[A,D]),W=x.useMemo(()=>R=>P?GW(p,A,P,M,ee,G,V,X,ie,I,R):()=>{},[P]);HW(qW,[ee,G,V,D,ie,I]);let Y;try{Y=x.useSyncExternalStore(W,O,z?()=>M(z(),D):O)}catch(L){throw U.current&&(L.message+=`
The error may be correlated with this previous error:
${U.current.stack}

`),L}xd(()=>{U.current=void 0,ie.current=void 0,G.current=Y});const oe=x.useMemo(()=>x.createElement(y,{...Y,ref:E}),[E,y,Y]);return x.useMemo(()=>p?x.createElement($.Provider,{value:H},oe):oe,[$,oe,H])}const k=x.memo(S);if(k.WrappedComponent=y,k.displayName=S.displayName=v,c){const C=x.forwardRef(function(D,$){return x.createElement(k,{...D,reactReduxForwardedRef:$})});return C.displayName=v,C.WrappedComponent=y,Gp(C,y)}return Gp(k,y)}}var RE=QW;function KW(e){const{children:t,context:n,serverState:r,store:s}=e,i=x.useMemo(()=>{const c=ME(s);return{store:s,subscription:c,getServerState:r?()=>r:void 0}},[s,r]),o=x.useMemo(()=>s.getState(),[s]);xd(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||OE;return x.createElement(l.Provider,{value:i},t)}var XW=KW,JW="Invariant failed";function ZW(e,t){throw new Error(JW)}var Bn=function(t){var n=t.top,r=t.right,s=t.bottom,i=t.left,o=r-i,l=s-n,c={top:n,right:r,bottom:s,left:i,width:o,height:l,x:i,y:n,center:{x:(r+i)/2,y:(s+n)/2}};return c},iy=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},w1=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},eH=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Jf={top:0,right:0,bottom:0,left:0},oy=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?Jf:r,i=t.border,o=i===void 0?Jf:i,l=t.padding,c=l===void 0?Jf:l,u=Bn(iy(n,s)),d=Bn(w1(n,o)),h=Bn(w1(d,c));return{marginBox:u,borderBox:Bn(n),paddingBox:d,contentBox:h,margin:s,border:o,padding:c}},yn=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&ZW(),s},tH=function(){return{x:window.pageXOffset,y:window.pageYOffset}},yd=function(t,n){var r=t.borderBox,s=t.border,i=t.margin,o=t.padding,l=eH(r,n);return oy({borderBox:l,border:s,margin:i,padding:o})},vd=function(t,n){return n===void 0&&(n=tH()),yd(t,n)},LE=function(t,n){var r={top:yn(n.marginTop),right:yn(n.marginRight),bottom:yn(n.marginBottom),left:yn(n.marginLeft)},s={top:yn(n.paddingTop),right:yn(n.paddingRight),bottom:yn(n.paddingBottom),left:yn(n.paddingLeft)},i={top:yn(n.borderTopWidth),right:yn(n.borderRightWidth),bottom:yn(n.borderBottomWidth),left:yn(n.borderLeftWidth)};return oy({borderBox:t,margin:r,padding:s,border:i})},FE=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return LE(n,r)},Cl=function(t){var n=[],r=null,s=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function bd(){return bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bd.apply(null,arguments)}function $E(e,t){}$E.bind(null,"warn");$E.bind(null,"error");function xs(){}function nH(e,t){return{...e,...t}}function kn(e,t,n){const r=t.map(s=>{const i=nH(n,s.options);return e.addEventListener(s.eventName,s.fn,i),function(){e.removeEventListener(s.eventName,s.fn,i)}});return function(){r.forEach(i=>{i()})}}const rH="Invariant failed";class wd extends Error{}wd.prototype.toString=function(){return this.message};function re(e,t){throw new wd(rH)}class sH extends se.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=xs,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof wd&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=kn(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof wd){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const iH=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,jd=e=>e+1,oH=e=>`
  You have lifted an item in position ${jd(e.source.index)}
`,zE=(e,t)=>{const n=e.droppableId===t.droppableId,r=jd(e.index),s=jd(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},BE=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,aH=e=>{const t=e.destination;if(t)return zE(e.source,t);const n=e.combine;return n?BE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},j1=e=>`
  The item has returned to its starting position
  of ${jd(e.index)}
`,lH=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${j1(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${zE(e.source,t)}
    `:n?`
      You have dropped the item.
      ${BE(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${j1(e.source)}
  `},mu={dragHandleUsageInstructions:iH,onDragStart:oH,onDragUpdate:aH,onDragEnd:lH};function cH(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function VE(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!cH(e[n],t[n]))return!1;return!0}function Pe(e,t){const n=x.useState(()=>({inputs:t,result:e()}))[0],r=x.useRef(!0),s=x.useRef(n),o=r.current||!!(t&&s.current.inputs&&VE(t,s.current.inputs))?s.current:{inputs:t,result:e()};return x.useEffect(()=>{r.current=!1,s.current=o},[o]),o.result}function pe(e,t){return Pe(()=>e,t)}const vt={x:0,y:0},wt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),an=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ys=(e,t)=>e.x===t.x&&e.y===t.y,$o=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),pi=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Nl=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),S1=(e,t)=>Math.min(...t.map(n=>Nl(e,n))),UE=e=>t=>({x:e(t.x),y:e(t.y)});var uH=(e,t)=>{const n=Bn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Kl=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),C1=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],dH={top:0,right:0,bottom:0,left:0},hH=(e,t)=>t?Kl(e,t.scroll.diff.displacement):e,fH=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,mH=(e,t)=>t&&t.shouldClipSubject?uH(t.pageMarginBox,e):Bn(e);var wo=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=hH(e.marginBox,r),i=fH(s,n,t),o=mH(i,r);return{page:e,withPlaceholder:t,active:o}},ay=(e,t)=>{e.frame||re();const n=e.frame,r=an(t,n.scroll.initial),s=$o(r),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},o=wo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function yt(e,t=VE){let n=null;function r(...s){if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;const i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}const WE=yt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),HE=yt(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),fh=yt(e=>Object.values(e)),pH=yt(e=>Object.values(e));var zo=yt((e,t)=>pH(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function ly(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function mh(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var ph=yt((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),gH=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!ly(s))return null;function o(m){const p={type:"COMBINE",combine:{draggableId:m,droppableId:n.descriptor.id}};return{...s,at:p}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?o(c):null;const u=ph(t,r);if(!c){if(!u.length)return null;const m=u[u.length-1];return o(m.descriptor.id)}const d=u.findIndex(m=>m.descriptor.id===c);d===-1&&re();const h=d-1;if(h<0)return null;const f=u[h];return o(f.descriptor.id)},Bo=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const qE={point:vt,value:0},kl={invisible:{},visible:{},all:[]},xH={displaced:kl,displacedBy:qE,at:null};var Dn=(e,t)=>n=>e<=n&&n<=t,GE=e=>{const t=Dn(e.top,e.bottom),n=Dn(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const i=t(r.top)||t(r.bottom),o=n(r.left)||n(r.right);if(i&&o)return!0;const c=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right;return c&&u?!0:c&&o||u&&i}},yH=e=>{const t=Dn(e.top,e.bottom),n=Dn(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const cy={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},YE={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var vH=e=>t=>{const n=Dn(t.top,t.bottom),r=Dn(t.left,t.right);return s=>e===cy?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const bH=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:vt;return Kl(e,n)},wH=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,jH=(e,t,n)=>n(t)(e),uy=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const i=r?bH(e,t):e;return wH(i,t,s)&&jH(i,n,s)},SH=e=>uy({...e,isVisibleThroughFrameFn:GE}),QE=e=>uy({...e,isVisibleThroughFrameFn:yH}),CH=e=>uy({...e,isVisibleThroughFrameFn:vH(e.destination.axis)}),NH=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const i=s[e];return i?i.shouldAnimate:!0};function kH(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Bn(iy(n,r))}function El({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:i}){return e.reduce(function(l,c){const u=kH(c,n),d=c.descriptor.id;if(l.all.push(d),!SH({target:u,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const f=NH(d,i,s),m={draggableId:d,shouldAnimate:f};return l.visible[d]=m,l},{all:[],visible:{},invisible:{}})}function EH(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function N1({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=EH(e,{inHomeList:t});return{displaced:kl,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Sd({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:i,index:o,forceShouldAnimate:l}){const c=Bo(e,n);if(o==null)return N1({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const u=t.find(p=>p.descriptor.index===o);if(!u)return N1({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const d=ph(e,t),h=t.indexOf(u),f=d.slice(h);return{displaced:El({afterDragging:f,destination:n,displacedBy:s,last:i,viewport:r.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function ks(e,t){return!!t.effected[e]}var DH=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const i=r.draggableId,l=n[i].descriptor.index;return ks(i,s)?e?l:l-1:e?l+1:l},TH=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,i=e?s+1:s-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<o||i>c?null:i},PH=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:i,previousImpact:o,viewport:l,afterCritical:c})=>{const u=o.at;if(u||re(),u.type==="REORDER"){const h=TH({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:i});return h==null?null:Sd({draggable:n,insideDestination:i,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})}const d=DH({isMovingForward:e,destination:s,displaced:o.displaced,draggables:r,combine:u.combine,afterCritical:c});return d==null?null:Sd({draggable:n,insideDestination:i,destination:s,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:d})},_H=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return ks(n,t)?s?vt:$o(r.point):s?r.point:vt},AH=({afterCritical:e,impact:t,draggables:n})=>{const r=mh(t);r||re();const s=r.draggableId,i=n[s].page.borderBox.center,o=_H({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return wt(i,o)};const KE=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,MH=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,dy=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,k1=({axis:e,moveRelativeTo:t,isMoving:n})=>pi(e.line,t.marginBox[e.end]+KE(e,n),dy(e,t.marginBox,n)),E1=({axis:e,moveRelativeTo:t,isMoving:n})=>pi(e.line,t.marginBox[e.start]-MH(e,n),dy(e,t.marginBox,n)),IH=({axis:e,moveInto:t,isMoving:n})=>pi(e.line,t.contentBox[e.start]+KE(e,n),dy(e,t.contentBox,n));var OH=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const i=zo(r.descriptor.id,n),o=t.page,l=r.axis;if(!i.length)return IH({axis:l,moveInto:r.page,isMoving:o});const{displaced:c,displacedBy:u}=e,d=c.all[0];if(d){const f=n[d];if(ks(d,s))return E1({axis:l,moveRelativeTo:f.page,isMoving:o});const m=yd(f.page,u.point);return E1({axis:l,moveRelativeTo:m,isMoving:o})}const h=i[i.length-1];if(h.descriptor.id===t.descriptor.id)return o.borderBox.center;if(ks(h.descriptor.id,s)){const f=yd(h.page,$o(s.displacedBy.point));return k1({axis:l,moveRelativeTo:f,isMoving:o})}return k1({axis:l,moveRelativeTo:h.page,isMoving:o})},Yp=(e,t)=>{const n=e.frame;return n?wt(t,n.scroll.diff.displacement):t};const RH=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?OH({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):AH({impact:e,draggables:r,afterCritical:s})};var gh=e=>{const t=RH(e),n=e.droppable;return n?Yp(n,t):t},XE=(e,t)=>{const n=an(t,e.scroll.initial),r=$o(n);return{frame:Bn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function D1(e,t){return e.map(n=>t[n])}function LH(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var FH=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const i=XE(t,wt(t.scroll.current,s)),o=n.frame?ay(n,wt(n.frame.scroll.current,s)):n,l=e.displaced,c=El({afterDragging:D1(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),u=El({afterDragging:D1(l.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),d={},h={},f=[l,c,u];return l.all.forEach(p=>{const g=LH(p,f);if(g){h[p]=g;return}d[p]=!0}),{...e,displaced:{all:l.all,invisible:d,visible:h}}},$H=(e,t)=>wt(e.scroll.diff.displacement,t),hy=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=$H(n,e),s=an(r,t.page.borderBox.center);return wt(t.client.borderBox.center,s)},JE=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:i=!1})=>{const o=an(n,e.page.borderBox.center),c={target:Kl(e.page.borderBox,o),destination:t,withDroppableDisplacement:s,viewport:r};return i?CH(c):QE(c)},zH=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const u=zo(n.descriptor.id,r),d=Bo(t,n),h=gH({isMovingForward:e,draggable:t,destination:n,insideDestination:u,previousImpact:s})||PH({isMovingForward:e,isInHomeList:d,draggable:t,draggables:r,destination:n,insideDestination:u,previousImpact:s,viewport:i,afterCritical:c});if(!h)return null;const f=gh({impact:h,draggable:t,droppable:n,draggables:r,afterCritical:c});if(JE({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:hy({pageBorderBoxCenter:f,draggable:t,viewport:i}),impact:h,scrollJumpRequest:null};const p=an(f,o),g=FH({impact:h,viewport:i,destination:n,draggables:r,maxScrollChange:p});return{clientSelection:l,impact:g,scrollJumpRequest:p}};const Rt=e=>{const t=e.subject.active;return t||re(),t};var BH=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,l=Dn(i[o.start],i[o.end]),c=fh(r).filter(d=>d!==n).filter(d=>d.isEnabled).filter(d=>!!d.subject.active).filter(d=>GE(s.frame)(Rt(d))).filter(d=>{const h=Rt(d);return e?i[o.crossAxisEnd]<h[o.crossAxisEnd]:h[o.crossAxisStart]<i[o.crossAxisStart]}).filter(d=>{const h=Rt(d),f=Dn(h[o.start],h[o.end]);return l(h[o.start])||l(h[o.end])||f(i[o.start])||f(i[o.end])}).sort((d,h)=>{const f=Rt(d)[o.crossAxisStart],m=Rt(h)[o.crossAxisStart];return e?f-m:m-f}).filter((d,h,f)=>Rt(d)[o.crossAxisStart]===Rt(f[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(d=>Dn(Rt(d)[o.start],Rt(d)[o.end])(t[o.line]));return u.length===1?u[0]:u.length>1?u.sort((d,h)=>Rt(d)[o.start]-Rt(h)[o.start])[0]:c.sort((d,h)=>{const f=S1(t,C1(Rt(d))),m=S1(t,C1(Rt(h)));return f!==m?f-m:Rt(d)[o.start]-Rt(h)[o.start]})[0]};const T1=(e,t)=>{const n=e.page.borderBox.center;return ks(e.descriptor.id,t)?an(n,t.displacedBy.point):n},VH=(e,t)=>{const n=e.page.borderBox;return ks(e.descriptor.id,t)?Kl(n,$o(t.displacedBy.point)):n};var UH=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(o=>QE({target:VH(o,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const c=Nl(e,Yp(n,T1(o,s))),u=Nl(e,Yp(n,T1(l,s)));return c<u?-1:u<c?1:o.descriptor.index-l.descriptor.index})[0]||null,Xl=yt(function(t,n){const r=n[t.line];return{value:r,point:pi(t.line,r)}});const WH=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return pi(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],c=zo(e.descriptor.id,n).reduce((u,d)=>u+d.client.marginBox[r.size],0)+t[r.line]-s;return c<=0?null:pi(r.line,c)},ZE=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),eD=(e,t,n)=>{const r=e.frame;Bo(t,e)&&re(),e.subject.withPlaceholder&&re();const s=Xl(e.axis,t.displaceBy).point,i=WH(e,s,n),o={placeholderSize:s,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const d=wo({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:d}}const l=i?wt(r.scroll.max,i):r.scroll.max,c=ZE(r,l),u=wo({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},HH=e=>{const t=e.subject.withPlaceholder;t||re();const n=e.frame;if(!n){const o=wo({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const r=t.oldFrameMaxScroll;r||re();const s=ZE(n,r),i=wo({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:i,frame:s}};var qH=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:i,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const h={displaced:kl,displacedBy:qE,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},f=gh({impact:h,draggable:r,droppable:i,draggables:s,afterCritical:l}),m=Bo(r,i)?i:eD(i,r,s);return JE({draggable:r,destination:m,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?h:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],u=(()=>{const h=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?h:h+1})(),d=Xl(i.axis,r.displaceBy);return Sd({draggable:r,insideDestination:n,destination:i,viewport:o,displacedBy:d,last:kl,index:u})},GH=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:i,viewport:o,afterCritical:l})=>{const c=BH({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:i,viewport:o});if(!c)return null;const u=zo(c.descriptor.id,s),d=UH({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:u,afterCritical:l}),h=qH({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:s,moveRelativeTo:d,insideDestination:u,viewport:o,afterCritical:l});if(!h)return null;const f=gh({impact:h,draggable:n,droppable:c,draggables:s,afterCritical:l});return{clientSelection:hy({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null}},cn=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const YH=(e,t)=>{const n=cn(e);return n?t[n]:null};var QH=({state:e,type:t})=>{const n=YH(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],i=n||s,o=i.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],d=e.current.page.borderBoxCenter,{draggables:h,droppables:f}=e.dimensions;return l?zH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:i,draggables:h,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):GH({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:i,draggables:h,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function Gs(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function tD(e){const t=Dn(e.top,e.bottom),n=Dn(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function KH(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function XH({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(i=>{const o=i.axis,l=pi(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:Nl(r,l)}}).sort((i,o)=>o.distance-i.distance);return s[0]?s[0].id:null}function JH({pageBorderBox:e,draggable:t,droppables:n}){const r=fh(n).filter(s=>{if(!s.isEnabled)return!1;const i=s.subject.active;if(!i||!KH(e,i))return!1;if(tD(i)(e.center))return!0;const o=s.axis,l=i.center[o.crossAxisLine],c=e[o.crossAxisStart],u=e[o.crossAxisEnd],d=Dn(i[o.crossAxisStart],i[o.crossAxisEnd]),h=d(c),f=d(u);return!h&&!f?!0:h?c<l:u>l});return r.length?r.length===1?r[0].descriptor.id:XH({pageBorderBox:e,draggable:t,candidates:r}):null}const nD=(e,t)=>Bn(Kl(e,t));var ZH=(e,t)=>{const n=e.frame;return n?nD(t,n.scroll.diff.value):t};function rD({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function e7({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var t7=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:i,afterCritical:o})=>{const l=n.axis,c=Xl(n.axis,t.displaceBy),u=c.value,d=e[l.start],h=e[l.end],m=ph(t,r).find(g=>{const y=g.descriptor.id,b=g.page.borderBox.center[l.line],v=ks(y,o),w=rD({displaced:s,id:y});return v?w?h<=b:d<b-u:w?h<=b+u:d<b})||null,p=e7({draggable:t,closest:m,inHomeList:Bo(t,n)});return Sd({draggable:t,insideDestination:r,destination:n,viewport:i,last:s,displacedBy:c,index:p})};const n7=4;var r7=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:i})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=Xl(r.axis,e.displaceBy),c=l.value,u=t[o.start],d=t[o.end],f=ph(e,s).find(p=>{const g=p.descriptor.id,y=p.page.borderBox,v=y[o.size]/n7,w=ks(g,i),S=rD({displaced:n.displaced,id:g});return w?S?d>y[o.start]+v&&d<y[o.end]-v:u>y[o.start]-c+v&&u<y[o.end]-c-v:S?d>y[o.start]+c+v&&d<y[o.end]+c-v:u>y[o.start]+v&&u<y[o.end]-v});return f?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:f.descriptor.id,droppableId:r.descriptor.id}}}:null},sD=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:i,afterCritical:o})=>{const l=nD(t.page.borderBox,e),c=JH({pageBorderBox:l,draggable:t,droppables:r});if(!c)return xH;const u=r[c],d=zo(u.descriptor.id,n),h=ZH(u,l);return r7({pageBorderBoxWithDroppableScroll:h,draggable:t,previousImpact:s,destination:u,insideDestination:d,afterCritical:o})||t7({pageBorderBoxWithDroppableScroll:h,draggable:t,destination:u,insideDestination:d,last:s.displaced,viewport:i,afterCritical:o})},fy=(e,t)=>({...e,[t.descriptor.id]:t});const s7=({previousImpact:e,impact:t,droppables:n})=>{const r=cn(e),s=cn(t);if(!r||r===s)return n;const i=n[r];if(!i.subject.withPlaceholder)return n;const o=HH(i);return fy(n,o)};var i7=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const i=s7({previousImpact:r,impact:s,droppables:n}),o=cn(s);if(!o)return i;const l=n[o];if(Bo(e,l)||l.subject.withPlaceholder)return i;const c=eD(l,e,t);return fy(i,c)},Ua=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:i})=>{const o=r||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,u=an(c,e.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:wt(e.initial.client.borderBoxCenter,u)},h={selection:wt(d.selection,o.scroll.current),borderBoxCenter:wt(d.borderBoxCenter,o.scroll.current),offset:wt(d.offset,o.scroll.diff.value)},f={client:d,page:h};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:f};const m=l.draggables[e.critical.draggable.id],p=s||sD({pageOffset:h.offset,draggable:m,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),g=i7({draggable:m,impact:p,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:f,dimensions:{draggables:l.draggables,droppables:g},impact:p,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function o7(e,t){return e.map(n=>t[n])}var iD=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const i=e.displaced,o=o7(i.all,n),l=El({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:i});return{...e,displaced:l}},oD=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:i})=>{const o=gh({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i});return hy({pageBorderBoxCenter:o,draggable:t,viewport:s})},aD=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&re();const r=e.impact,s=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:l}=i,c=o[e.critical.draggable.id],u=cn(r);u||re();const d=l[u],h=iD({impact:r,viewport:s,destination:d,draggables:o}),f=oD({impact:h,draggable:c,droppable:d,draggables:o,viewport:s,afterCritical:e.afterCritical});return Ua({impact:h,clientSelection:f,state:e,dimensions:i,viewport:s})},a7=e=>({index:e.index,droppableId:e.droppableId}),lD=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=Xl(t.axis,e.displaceBy),i=zo(t.descriptor.id,n),o=i.indexOf(e);o===-1&&re();const l=i.slice(o+1),c=l.reduce((f,m)=>(f[m.descriptor.id]=!0,f),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:El({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:a7(e.descriptor)}},afterCritical:u}},l7=(e,t)=>({draggables:e.draggables,droppables:fy(e.droppables,t)}),c7=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=yd(e.client,t),s=vd(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},u7=e=>{const t=e.frame;return t||re(),t},d7=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const i=s.descriptor.droppableId,o=t[i],c=u7(o).scroll.diff.value,u=wt(r,c);return c7({draggable:s,offset:u,initialWindowScroll:n.scroll.initial})})},h7=({state:e,published:t})=>{const n=t.modified.map(b=>{const v=e.dimensions.droppables[b.droppableId];return ay(v,b.scroll)}),r={...e.dimensions.droppables,...WE(n)},s=HE(d7({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),i={...e.dimensions.draggables,...s};t.removals.forEach(b=>{delete i[b]});const o={droppables:r,draggables:i},l=cn(e.impact),c=l?o.droppables[l]:null,u=o.draggables[e.critical.draggable.id],d=o.droppables[e.critical.droppable.id],{impact:h,afterCritical:f}=lD({draggable:u,home:d,draggables:i,viewport:e.viewport}),m=c&&c.isCombineEnabled?e.impact:h,p=sD({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:m,viewport:e.viewport,afterCritical:f}),g={...e,phase:"DRAGGING",impact:p,onLiftImpact:h,dimensions:o,afterCritical:f,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Qp=e=>e.movementMode==="SNAP",Zf=(e,t,n)=>{const r=l7(e.dimensions,t);return!Qp(e)||n?Ua({state:e,dimensions:r}):aD({state:e,dimensions:r})};function em(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const P1={phase:"IDLE",completed:null,shouldFlush:!1};var f7=(e=P1,t)=>{if(t.type==="FLUSH")return{...P1,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&re();const{critical:n,clientSelection:r,viewport:s,dimensions:i,movementMode:o}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],u={selection:r,borderBoxCenter:l.client.borderBox.center,offset:vt},d={client:u,page:{selection:wt(u.selection,s.scroll.initial),borderBoxCenter:wt(u.selection,s.scroll.initial),offset:wt(u.selection,s.scroll.diff.value)}},h=fh(i.droppables).every(g=>!g.isFixedOnPage),{impact:f,afterCritical:m}=lD({draggable:l,home:c,draggables:i.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:d,current:d,isWindowScrollAllowed:h,impact:f,afterCritical:m,onLiftImpact:f,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&re(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||re(),h7({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Gs(e)||re();const{client:n}=t.payload;return ys(n,e.current.client.selection)?e:Ua({state:e,clientSelection:n,impact:Qp(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return em(e);Gs(e)||re();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const i=ay(s,r);return Zf(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gs(e)||re();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||re(),s.isEnabled===r&&re();const i={...s,isEnabled:r};return Zf(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Gs(e)||re();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||re(),s.isCombineEnabled===r&&re();const i={...s,isCombineEnabled:r};return Zf(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Gs(e)||re(),e.isWindowScrollAllowed||re();const n=t.payload.newScroll;if(ys(e.viewport.scroll.current,n))return em(e);const r=XE(e.viewport,n);return Qp(e)?aD({state:e,viewport:r}):Ua({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Gs(e))return e;const n=t.payload.maxScroll;if(ys(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&re();const n=QH({state:e,type:t.type});return n?Ua({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&re(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||re(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Me(e,t){return e instanceof Object&&"type"in e&&e.type===t}const m7=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),p7=e=>({type:"LIFT",payload:e}),g7=e=>({type:"INITIAL_PUBLISH",payload:e}),x7=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),y7=()=>({type:"COLLECTION_STARTING",payload:null}),v7=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),b7=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),w7=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),cD=e=>({type:"MOVE",payload:e}),j7=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),S7=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),C7=()=>({type:"MOVE_UP",payload:null}),N7=()=>({type:"MOVE_DOWN",payload:null}),k7=()=>({type:"MOVE_RIGHT",payload:null}),E7=()=>({type:"MOVE_LEFT",payload:null}),my=()=>({type:"FLUSH",payload:null}),D7=e=>({type:"DROP_ANIMATE",payload:e}),py=e=>({type:"DROP_COMPLETE",payload:e}),uD=e=>({type:"DROP",payload:e}),T7=e=>({type:"DROP_PENDING",payload:e}),dD=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var P7=e=>({getState:t,dispatch:n})=>r=>s=>{if(!Me(s,"LIFT")){r(s);return}const{id:i,clientSelection:o,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&n(py({completed:c.completed})),t().phase!=="IDLE"&&re(),n(my()),n(m7({draggableId:i,movementMode:l}));const d={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:h,dimensions:f,viewport:m}=e.startPublishing(d);n(g7({critical:h,dimensions:f,clientSelection:o,movementMode:l,viewport:m}))},_7=e=>()=>t=>n=>{Me(n,"INITIAL_PUBLISH")&&e.dragging(),Me(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Me(n,"FLUSH")||Me(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const gy={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Dl={opacity:{drop:0,combining:.7},scale:{drop:.75}},hD={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fs=`${hD.outOfTheWay}s ${gy.outOfTheWay}`,Wa={fluid:`opacity ${Fs}`,snap:`transform ${Fs}, opacity ${Fs}`,drop:e=>{const t=`${e}s ${gy.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Fs}`,placeholder:`height ${Fs}, width ${Fs}, margin ${Fs}`},_1=e=>ys(e,vt)?void 0:`translate(${e.x}px, ${e.y}px)`,Kp={moveTo:_1,drop:(e,t)=>{const n=_1(e);if(n)return t?`${n} scale(${Dl.scale.drop})`:n}},{minDropTime:Xp,maxDropTime:fD}=hD,A7=fD-Xp,A1=1500,M7=.6;var I7=({current:e,destination:t,reason:n})=>{const r=Nl(e,t);if(r<=0)return Xp;if(r>=A1)return fD;const s=r/A1,i=Xp+A7*s,o=n==="CANCEL"?i*M7:i;return Number(o.toFixed(2))},O7=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:i,droppables:o}=n,l=cn(e),c=l?o[l]:null,u=o[t.descriptor.droppableId],d=oD({impact:e,draggable:t,draggables:i,afterCritical:s,droppable:c||u,viewport:r});return an(d,t.client.borderBox.center)},R7=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:iD({draggables:e,impact:i,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:kl},didDropInsideDroppable:!0};const L7=({getState:e,dispatch:t})=>n=>r=>{if(!Me(r,"DROP")){n(r);return}const s=e(),i=r.payload.reason;if(s.phase==="COLLECTING"){t(T7({reason:i}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&re(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||re();const l=s.critical,c=s.dimensions,u=c.draggables[s.critical.draggable.id],{impact:d,didDropInsideDroppable:h}=R7({reason:i,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),f=h?ly(d):null,m=h?mh(d):null,p={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:u.descriptor.id,type:u.descriptor.type,source:p,reason:i,mode:s.movementMode,destination:f,combine:m},y=O7({impact:d,draggable:u,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),b={critical:s.critical,afterCritical:s.afterCritical,result:g,impact:d};if(!(!ys(s.current.client.offset,y)||!!g.combine)){t(py({completed:b}));return}const w=I7({current:s.current.client.offset,destination:y,reason:i});t(D7({newHomeClientOffset:y,dropDuration:w,completed:b}))};var mD=()=>({x:window.pageXOffset,y:window.pageYOffset});function F7(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function $7({onWindowScroll:e}){function t(){e(mD())}const n=Cl(t),r=F7(n);let s=xs;function i(){return s!==xs}function o(){i()&&re(),s=kn(window,[r])}function l(){i()||re(),n.cancel(),s(),s=xs}return{start:o,stop:l,isActive:i}}const z7=e=>Me(e,"DROP_COMPLETE")||Me(e,"DROP_ANIMATE")||Me(e,"FLUSH"),B7=e=>{const t=$7({onWindowScroll:n=>{e.dispatch(j7({newScroll:n}))}});return n=>r=>{!t.isActive()&&Me(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&z7(r)&&t.stop(),n(r)}};var V7=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return s.wasCalled=()=>t,s},U7=()=>{const e=[],t=s=>{const i=e.findIndex(l=>l.timerId===s);i===-1&&re();const[o]=e.splice(i,1);o.callback()};return{add:s=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:s};e.push(o)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const W7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,H7=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,q7=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},da=(e,t)=>{t()},zc=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function tm(e,t,n,r){if(!e){n(r(t));return}const s=V7(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var G7=(e,t)=>{const n=U7();let r=null;const s=(h,f)=>{r&&re(),da("onBeforeCapture",()=>{const m=e().onBeforeCapture;m&&m({draggableId:h,mode:f})})},i=(h,f)=>{r&&re(),da("onBeforeDragStart",()=>{const m=e().onBeforeDragStart;m&&m(zc(h,f))})},o=(h,f)=>{r&&re();const m=zc(h,f);r={mode:f,lastCritical:h,lastLocation:m.source,lastCombine:null},n.add(()=>{da("onDragStart",()=>tm(e().onDragStart,m,t,mu.onDragStart))})},l=(h,f)=>{const m=ly(f),p=mh(f);r||re();const g=!q7(h,r.lastCritical);g&&(r.lastCritical=h);const y=!W7(r.lastLocation,m);y&&(r.lastLocation=m);const b=!H7(r.lastCombine,p);if(b&&(r.lastCombine=p),!g&&!y&&!b)return;const v={...zc(h,r.mode),combine:p,destination:m};n.add(()=>{da("onDragUpdate",()=>tm(e().onDragUpdate,v,t,mu.onDragUpdate))})},c=()=>{r||re(),n.flush()},u=h=>{r||re(),r=null,da("onDragEnd",()=>tm(e().onDragEnd,h,t,mu.onDragEnd))};return{beforeCapture:s,beforeStart:i,start:o,update:l,flush:c,drop:u,abort:()=>{if(!r)return;const h={...zc(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};u(h)}}},Y7=(e,t)=>{const n=G7(e,t);return r=>s=>i=>{if(Me(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Me(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),s(i),n.start(l,i.payload.movementMode);return}if(Me(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),s(i),n.drop(l);return}if(s(i),Me(i,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const Q7=e=>t=>n=>{if(!Me(n,"DROP_ANIMATION_FINISHED")){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&re(),e.dispatch(py({completed:r.completed}))},K7=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>i=>{if((Me(i,"FLUSH")||Me(i,"DROP_COMPLETE")||Me(i,"DROP_ANIMATION_FINISHED"))&&r(),s(i),!Me(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(dD())}};n=requestAnimationFrame(()=>{n=null,t=kn(window,[o])})}};var X7=e=>()=>t=>n=>{(Me(n,"DROP_COMPLETE")||Me(n,"FLUSH")||Me(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},J7=e=>{let t=!1;return()=>n=>r=>{if(Me(r,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(Me(r,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Me(r,"DROP_COMPLETE")){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Z7=e=>Me(e,"DROP_COMPLETE")||Me(e,"DROP_ANIMATE")||Me(e,"FLUSH");var e9=e=>t=>n=>r=>{if(Z7(r)){e.stop(),n(r);return}if(Me(r,"INITIAL_PUBLISH")){n(r);const s=t.getState();s.phase!=="DRAGGING"&&re(),e.start(s);return}n(r),e.scroll(t.getState())};const t9=e=>t=>n=>{if(t(n),!Me(n,"PUBLISH_WHILE_DRAGGING"))return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(uD({reason:r.reason})))},n9=PE;var r9=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:i})=>TE(f7,n9(K8(_7(n),X7(e),P7(e),L7,Q7,K7,t9,e9(i),B7,J7(t),Y7(r,s))));const nm=()=>({additions:{},removals:{},modified:{}});function s9({registry:e,callbacks:t}){let n=nm(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:u,modified:d}=n,h=Object.keys(c).map(p=>e.draggable.getById(p).getDimension(vt)).sort((p,g)=>p.descriptor.index-g.descriptor.index),f=Object.keys(d).map(p=>{const y=e.droppable.getById(p).callbacks.getScrollWhileDragging();return{droppableId:p,scroll:y}}),m={additions:h,removals:Object.keys(u),modified:f};n=nm(),t.publish(m)}))};return{add:c=>{const u=c.descriptor.id;n.additions[u]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[u]&&delete n.removals[u],s()},remove:c=>{const u=c.descriptor;n.removals[u.id]=!0,n.modified[u.droppableId]=!0,n.additions[u.id]&&delete n.additions[u.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=nm())}}}var pD=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=an({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},gD=()=>{const e=document.documentElement;return e||re(),e},xD=()=>{const e=gD();return pD({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},i9=()=>{const e=mD(),t=xD(),n=e.y,r=e.x,s=gD(),i=s.clientWidth,o=s.clientHeight,l=r+i,c=n+o;return{frame:Bn({top:n,left:r,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:vt,displacement:vt}}}},o9=({critical:e,scrollOptions:t,registry:n})=>{const r=i9(),s=r.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(d=>d.callbacks.getDimensionAndWatchScroll(s,t)),l=n.draggable.getAllByType(e.draggable.type).map(d=>d.getDimension(s));return{dimensions:{draggables:HE(l),droppables:WE(o)},critical:e,viewport:r}};function M1(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var a9=(e,t)=>{let n=null;const r=s9({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(f,m)=>{e.droppable.exists(f)||re(),n&&t.updateDroppableIsEnabled({id:f,isEnabled:m})},i=(f,m)=>{n&&(e.droppable.exists(f)||re(),t.updateDroppableIsCombineEnabled({id:f,isCombineEnabled:m}))},o=(f,m)=>{n&&(e.droppable.exists(f)||re(),t.updateDroppableScroll({id:f,newScroll:m}))},l=(f,m)=>{n&&e.droppable.getById(f).callbacks.scroll(m)},c=()=>{if(!n)return;r.stop();const f=n.critical.droppable;e.droppable.getAllByType(f.type).forEach(m=>m.callbacks.dragStopped()),n.unsubscribe(),n=null},u=f=>{n||re();const m=n.critical.draggable;f.type==="ADDITION"&&M1(e,m,f.value)&&r.add(f.value),f.type==="REMOVAL"&&M1(e,m,f.value)&&r.remove(f.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:f=>{n&&re();const m=e.draggable.getById(f.draggableId),p=e.droppable.getById(m.descriptor.droppableId),g={draggable:m.descriptor,droppable:p.descriptor},y=e.subscribe(u);return n={critical:g,unsubscribe:y},o9({critical:g,registry:e,scrollOptions:f.scrollOptions})},stopPublishing:c}},yD=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",l9=e=>{window.scrollBy(e.x,e.y)};const c9=yt(e=>fh(e).filter(t=>!(!t.isEnabled||!t.frame))),u9=(e,t)=>c9(t).find(r=>(r.frame||re(),tD(r.frame.pageMarginBox)(e)))||null;var d9=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return u9(e,n)};const Tl={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var h9=(e,t,n=()=>Tl)=>{const r=n(),s=e[t.size]*r.startFromPercentage,i=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:i}},vD=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},xy=1,f9=(e,t,n=()=>Tl)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return xy;const i=1-vD({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=r.maxPixelScroll*r.ease(i);return Math.ceil(o)},m9=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,i=r.durationDampening.stopDampeningAt,o=t,l=i,u=Date.now()-o;if(u>=i)return e;if(u<s)return xy;const d=vD({startOfRange:s,endOfRange:l,current:u}),h=e*r.ease(d);return Math.ceil(h)},I1=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const i=f9(e,t,s);return i===0?0:r?Math.max(m9(i,n,s),xy):i},O1=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=h9(e,r,i);return t[r.end]<t[r.start]?I1({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i}):-1*I1({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i})},p9=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const g9=UE(e=>e===0?0:e);var bD=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=O1({container:t,distanceToEdges:o,dragStartTime:e,axis:cy,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),c=O1({container:t,distanceToEdges:o,dragStartTime:e,axis:YE,shouldUseTimeDampening:s,getAutoScrollerOptions:i}),u=g9({x:c,y:l});if(ys(u,vt))return null;const d=p9({container:t,subject:n,proposedScroll:u});return d?ys(d,vt)?null:d:null};const x9=UE(e=>e===0?0:e>0?1:-1),yy=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=wt(t,r),i={x:e(s.x,n.x),y:e(s.y,n.y)};return ys(i,vt)?null:i}})(),wD=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=x9(n),i=yy({max:r,current:t,change:s});return!i||s.x!==0&&i.x===0||s.y!==0&&i.y===0},vy=(e,t)=>wD({current:e.scroll.current,max:e.scroll.max,change:t}),y9=(e,t)=>{if(!vy(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return yy({current:r,max:n,change:t})},by=(e,t)=>{const n=e.frame;return n?wD({current:n.scroll.current,max:n.scroll.max,change:t}):!1},v9=(e,t)=>{const n=e.frame;return!n||!by(e,t)?null:yy({current:n.scroll.current,max:n.scroll.max,change:t})};var b9=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=bD({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return o&&vy(e,o)?o:null},w9=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const l=bD({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:i});return l&&by(e,l)?l:null},R1=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const h=e.viewport,f=b9({dragStartTime:t,viewport:h,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(f){r(f);return}}const u=d9({center:o,destination:cn(e.impact),droppables:e.dimensions.droppables});if(!u)return;const d=w9({dragStartTime:t,droppable:u,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&s(u.descriptor.id,d)},j9=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Tl})=>{const r=Cl(e),s=Cl(t);let i=null;const o=u=>{i||re();const{shouldUseTimeDampening:d,dragStartTime:h}=i;R1({state:u,scrollWindow:r,scrollDroppable:s,dragStartTime:h,shouldUseTimeDampening:d,getAutoScrollerOptions:n})};return{start:u=>{i&&re();const d=Date.now();let h=!1;const f=()=>{h=!0};R1({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:f,scrollDroppable:f,getAutoScrollerOptions:n}),i={dragStartTime:d,shouldUseTimeDampening:h},h&&o(u)},stop:()=>{i&&(r.cancel(),s.cancel(),i=null)},scroll:o}},S9=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,c)=>{const u=wt(l.current.client.selection,c);e({client:u})},s=(l,c)=>{if(!by(l,c))return c;const u=v9(l,c);if(!u)return t(l.descriptor.id,c),null;const d=an(c,u);return t(l.descriptor.id,d),an(c,d)},i=(l,c,u)=>{if(!l||!vy(c,u))return u;const d=y9(c,u);if(!d)return n(u),null;const h=an(u,d);return n(h),an(u,h)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=cn(l.impact);u||re();const d=s(l.dimensions.droppables[u],c);if(!d)return;const h=l.viewport,f=i(l.isWindowScrollAllowed,h,d);f&&r(l,f)}},C9=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=j9({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),i=S9({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:s.start,stop:s.stop}};const jo="data-rfd",So=(()=>{const e=`${jo}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Jp=(()=>{const e=`${jo}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),N9=(()=>{const e=`${jo}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),L1={contextId:`${jo}-scroll-container-context-id`},k9=e=>t=>`[${t}="${e}"]`,ha=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),E9="pointer-events: none;";var D9=e=>{const t=k9(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(So.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:E9,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Wa.outOfTheWay};
    `;return{selector:t(Jp.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(N9.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ha(o,"always"),resting:ha(o,"resting"),dragging:ha(o,"dragging"),dropAnimating:ha(o,"dropAnimating"),userCancel:ha(o,"userCancel")}};const un=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?x.useLayoutEffect:x.useEffect,rm=()=>{const e=document.querySelector("head");return e||re(),e},F1=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function T9(e,t){const n=Pe(()=>D9(e),[e]),r=x.useRef(null),s=x.useRef(null),i=pe(yt(h=>{const f=s.current;f||re(),f.textContent=h}),[]),o=pe(h=>{const f=r.current;f||re(),f.textContent=h},[]);un(()=>{!r.current&&!s.current||re();const h=F1(t),f=F1(t);return r.current=h,s.current=f,h.setAttribute(`${jo}-always`,e),f.setAttribute(`${jo}-dynamic`,e),rm().appendChild(h),rm().appendChild(f),o(n.always),i(n.resting),()=>{const m=p=>{const g=p.current;g||re(),rm().removeChild(g),p.current=null};m(r),m(s)}},[t,o,i,n.always,n.resting,e]);const l=pe(()=>i(n.dragging),[i,n.dragging]),c=pe(h=>{if(h==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),u=pe(()=>{s.current&&i(n.resting)},[i,n.resting]);return Pe(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function jD(e,t){return Array.from(e.querySelectorAll(t))}var SD=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function xh(e){return e instanceof SD(e).HTMLElement}function P9(e,t){const n=`[${So.contextId}="${e}"]`,r=jD(document,n);if(!r.length)return null;const s=r.find(i=>i.getAttribute(So.draggableId)===t);return!s||!xh(s)?null:s}function _9(e){const t=x.useRef({}),n=x.useRef(null),r=x.useRef(null),s=x.useRef(!1),i=pe(function(f,m){const p={id:f,focus:m};return t.current[f]=p,function(){const y=t.current;y[f]!==p&&delete y[f]}},[]),o=pe(function(f){const m=P9(e,f);m&&m!==document.activeElement&&m.focus()},[e]),l=pe(function(f,m){n.current===f&&(n.current=m)},[]),c=pe(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const f=n.current;f&&o(f)}))},[o]),u=pe(function(f){n.current=null;const m=document.activeElement;m&&m.getAttribute(So.draggableId)===f&&(n.current=f)},[]);return un(()=>(s.current=!0,function(){s.current=!1;const f=r.current;f&&cancelAnimationFrame(f)}),[]),Pe(()=>({register:i,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,u,c,l])}function A9(){const e={draggables:{},droppables:{}},t=[];function n(h){return t.push(h),function(){const m=t.indexOf(h);m!==-1&&t.splice(m,1)}}function r(h){t.length&&t.forEach(f=>f(h))}function s(h){return e.draggables[h]||null}function i(h){const f=s(h);return f||re(),f}const o={register:h=>{e.draggables[h.descriptor.id]=h,r({type:"ADDITION",value:h})},update:(h,f)=>{const m=e.draggables[f.descriptor.id];m&&m.uniqueId===h.uniqueId&&(delete e.draggables[f.descriptor.id],e.draggables[h.descriptor.id]=h)},unregister:h=>{const f=h.descriptor.id,m=s(f);m&&h.uniqueId===m.uniqueId&&(delete e.draggables[f],e.droppables[h.descriptor.droppableId]&&r({type:"REMOVAL",value:h}))},getById:i,findById:s,exists:h=>!!s(h),getAllByType:h=>Object.values(e.draggables).filter(f=>f.descriptor.type===h)};function l(h){return e.droppables[h]||null}function c(h){const f=l(h);return f||re(),f}const u={register:h=>{e.droppables[h.descriptor.id]=h},unregister:h=>{const f=l(h.descriptor.id);f&&h.uniqueId===f.uniqueId&&delete e.droppables[h.descriptor.id]},getById:c,findById:l,exists:h=>!!l(h),getAllByType:h=>Object.values(e.droppables).filter(f=>f.descriptor.type===h)};function d(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:u,subscribe:n,clean:d}}function M9(){const e=Pe(A9,[]);return x.useEffect(()=>function(){e.clean()},[e]),e}var wy=se.createContext(null),Cd=()=>{const e=document.body;return e||re(),e};const I9={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},O9=e=>`rfd-announcement-${e}`;function R9(e){const t=Pe(()=>O9(e),[e]),n=x.useRef(null);return x.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),bd(i.style,I9),Cd().appendChild(i),function(){setTimeout(function(){const c=Cd();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),pe(s=>{const i=n.current;if(i){i.textContent=s;return}},[])}const L9={separator:"::"};function jy(e,t=L9){const n=se.useId();return Pe(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function F9({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function $9({contextId:e,text:t}){const n=jy("hidden-text",{separator:"-"}),r=Pe(()=>F9({contextId:e,uniqueId:n}),[n,e]);return x.useEffect(function(){const i=document.createElement("div");return i.id=r,i.textContent=t,i.style.display="none",Cd().appendChild(i),function(){const l=Cd();l.contains(i)&&l.removeChild(i)}},[r,t]),r}var yh=se.createContext(null);function CD(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),t}function z9(){let e=null;function t(){return!!e}function n(o){return o===e}function r(o){e&&re();const l={abandon:o};return e=l,l}function s(){e||re(),e=null}function i(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:i}}function Pl(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const B9=9,V9=13,Sy=27,ND=32,U9=33,W9=34,H9=35,q9=36,G9=37,Y9=38,Q9=39,K9=40,X9={[V9]:!0,[B9]:!0};var kD=e=>{X9[e.keyCode]&&e.preventDefault()};const vh=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})(),ED=0,$1=5;function J9(e,t){return Math.abs(t.x-e.x)>=$1||Math.abs(t.y-e.y)>=$1}const z1={type:"IDLE"};function Z9({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:i,clientX:o,clientY:l}=s;if(i!==ED)return;const c={x:o,y:l},u=n();if(u.type==="DRAGGING"){s.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&re();const d=u.point;if(!J9(d,c))return;s.preventDefault();const h=u.actions.fluidLift(c);r({type:"DRAGGING",actions:h})}},{eventName:"mouseup",fn:s=>{const i=n();if(i.type!=="DRAGGING"){e();return}s.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===Sy){s.preventDefault(),e();return}kD(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const i=n();if(i.type==="IDLE"&&re(),i.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:vh,fn:e}]}function eq(e){const t=x.useRef(z1),n=x.useRef(xs),r=Pe(()=>({eventName:"mousedown",fn:function(h){if(h.defaultPrevented||h.button!==ED||h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)return;const f=e.findClosestDraggableId(h);if(!f)return;const m=e.tryGetLock(f,o,{sourceEvent:h});if(!m)return;h.preventDefault();const p={x:h.clientX,y:h.clientY};n.current(),u(m,p)}}),[e]),s=Pe(()=>({eventName:"webkitmouseforcewillbegin",fn:d=>{if(d.defaultPrevented)return;const h=e.findClosestDraggableId(d);if(!h)return;const f=e.findOptionsForDraggable(h);f&&(f.shouldRespectForcePress||e.canGetLock(h)&&d.preventDefault())}}),[e]),i=pe(function(){const h={passive:!1,capture:!0};n.current=kn(window,[s,r],h)},[s,r]),o=pe(()=>{t.current.type!=="IDLE"&&(t.current=z1,n.current(),i())},[i]),l=pe(()=>{const d=t.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),c=pe(function(){const h={capture:!0,passive:!1},f=Z9({cancel:l,completed:o,getPhase:()=>t.current,setPhase:m=>{t.current=m}});n.current=kn(window,f,h)},[l,o]),u=pe(function(h,f){t.current.type!=="IDLE"&&re(),t.current={type:"PENDING",point:f,actions:h},c()},[c]);un(function(){return i(),function(){n.current()}},[i])}function tq(){}const nq={[W9]:!0,[U9]:!0,[q9]:!0,[H9]:!0};function rq(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===Sy){s.preventDefault(),n();return}if(s.keyCode===ND){s.preventDefault(),r();return}if(s.keyCode===K9){s.preventDefault(),e.moveDown();return}if(s.keyCode===Y9){s.preventDefault(),e.moveUp();return}if(s.keyCode===Q9){s.preventDefault(),e.moveRight();return}if(s.keyCode===G9){s.preventDefault(),e.moveLeft();return}if(nq[s.keyCode]){s.preventDefault();return}kD(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:vh,fn:n}]}function sq(e){const t=x.useRef(tq),n=Pe(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==ND)return;const o=e.findClosestDraggableId(i);if(!o)return;const l=e.tryGetLock(o,d,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const u=l.snapLift();t.current();function d(){c||re(),c=!1,t.current(),r()}t.current=kn(window,rq(u,d),{capture:!0,passive:!1})}}),[e]),r=pe(function(){const i={passive:!1,capture:!0};t.current=kn(window,[n],i)},[n]);un(function(){return r(),function(){t.current()}},[r])}const sm={type:"IDLE"},iq=120,oq=.15;function aq({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===Sy&&n.preventDefault(),e()}},{eventName:vh,fn:e}]}function lq({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:i,clientY:o}=r.touches[0],l={x:i,y:o};r.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&re();const i=r.touches[0];if(!i||!(i.force>=oq))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:vh,fn:e}]}function cq(e){const t=x.useRef(sm),n=x.useRef(xs),r=pe(function(){return t.current},[]),s=pe(function(m){t.current=m},[]),i=Pe(()=>({eventName:"touchstart",fn:function(m){if(m.defaultPrevented)return;const p=e.findClosestDraggableId(m);if(!p)return;const g=e.tryGetLock(p,l,{sourceEvent:m});if(!g)return;const y=m.touches[0],{clientX:b,clientY:v}=y,w={x:b,y:v};n.current(),h(g,w)}}),[e]),o=pe(function(){const m={capture:!0,passive:!1};n.current=kn(window,[i],m)},[i]),l=pe(()=>{const f=t.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),s(sm),n.current(),o())},[o,s]),c=pe(()=>{const f=t.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),u=pe(function(){const m={capture:!0,passive:!1},p={cancel:c,completed:l,getPhase:r},g=kn(window,lq(p),m),y=kn(window,aq(p),m);n.current=function(){g(),y()}},[c,r,l]),d=pe(function(){const m=r();m.type!=="PENDING"&&re();const p=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:p,hasMoved:!1})},[r,s]),h=pe(function(m,p){r().type!=="IDLE"&&re();const g=setTimeout(d,iq);s({type:"PENDING",point:p,actions:m,longPressTimerId:g}),u()},[u,r,s,d]);un(function(){return o(),function(){n.current();const p=r();p.type==="PENDING"&&(clearTimeout(p.longPressTimerId),s(sm))}},[r,o,s]),un(function(){return kn(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const uq=["input","button","textarea","select","option","optgroup","video","audio"];function DD(e,t){if(t==null)return!1;if(uq.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:DD(e,t.parentElement)}function dq(e,t){const n=t.target;return xh(n)?DD(e,n):!1}var hq=e=>Bn(e.getBoundingClientRect()).center;function fq(e){return e instanceof SD(e).Element}const mq=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function TD(e,t){return e==null?null:e[mq](t)?e:TD(e.parentElement,t)}function pq(e,t){return e.closest?e.closest(t):TD(e,t)}function gq(e){return`[${So.contextId}="${e}"]`}function xq(e,t){const n=t.target;if(!fq(n))return null;const r=gq(e),s=pq(n,r);return!s||!xh(s)?null:s}function yq(e,t){const n=xq(e,t);return n?n.getAttribute(So.draggableId):null}function vq(e,t){const n=`[${Jp.contextId}="${e}"]`,s=jD(document,n).find(i=>i.getAttribute(Jp.id)===t);return!s||!xh(s)?null:s}function bq(e){e.preventDefault()}function Bc({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function PD({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!yD(t.getState(),r))}function wq({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:i,sourceEvent:o}){if(!PD({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const c=r.draggable.getById(s),u=vq(t,c.descriptor.id);if(!u||o&&!c.options.canDragInteractiveElements&&dq(u,o))return null;const d=e.claim(i||xs);let h="PRE_DRAG";function f(){return c.options.shouldRespectForcePress}function m(){return e.isActive(d)}function p(j,k){Bc({expected:j,phase:h,isLockActive:m,shouldWarn:!0})&&n.dispatch(k())}const g=p.bind(null,"DRAGGING");function y(j){function k(){e.release(),h="COMPLETED"}h!=="PRE_DRAG"&&(k(),re()),n.dispatch(p7(j.liftActionArgs)),h="DRAGGING";function N(C,E={shouldBlockNextClick:!1}){if(j.cleanup(),E.shouldBlockNextClick){const D=kn(window,[{eventName:"click",fn:bq,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(D)}k(),n.dispatch(uD({reason:C}))}return{isActive:()=>Bc({expected:"DRAGGING",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,drop:C=>N("DROP",C),cancel:C=>N("CANCEL",C),...j.actions}}function b(j){const k=Cl(C=>{g(()=>cD({client:C}))});return{...y({liftActionArgs:{id:s,clientSelection:j,movementMode:"FLUID"},cleanup:()=>k.cancel(),actions:{move:k}}),move:k}}function v(){const j={moveUp:()=>g(C7),moveRight:()=>g(k7),moveDown:()=>g(N7),moveLeft:()=>g(E7)};return y({liftActionArgs:{id:s,clientSelection:hq(u),movementMode:"SNAP"},cleanup:xs,actions:j})}function w(){Bc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!0})&&e.release()}return{isActive:()=>Bc({expected:"PRE_DRAG",phase:h,isLockActive:m,shouldWarn:!1}),shouldRespectForcePress:f,fluidLift:b,snapLift:v,abort:w}}const jq=[eq,sq,cq];function Sq({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const i=[...s?jq:[],...r||[]],o=x.useState(()=>z9())[0],l=pe(function(y,b){Pl(y)&&!Pl(b)&&o.tryAbandon()},[o]);un(function(){let y=t.getState();return t.subscribe(()=>{const v=t.getState();l(y,v),y=v})},[o,t,l]),un(()=>o.tryAbandon,[o.tryAbandon]);const c=pe(g=>PD({lockAPI:o,registry:n,store:t,draggableId:g}),[o,n,t]),u=pe((g,y,b)=>wq({lockAPI:o,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:y||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,o,n,t]),d=pe(g=>yq(e,g),[e]),h=pe(g=>{const y=n.draggable.findById(g);return y?y.options:null},[n.draggable]),f=pe(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(my()))},[o,t]),m=pe(()=>o.isClaimed(),[o]),p=Pe(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:f,isLockClaimed:m}),[c,u,d,h,f,m]);for(let g=0;g<i.length;g++)i[g](p)}const Cq=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};Rl.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Nq=e=>({...Tl,...e.autoScrollerOptions,durationDampening:{...Tl.durationDampening,...e.autoScrollerOptions}});function fa(e){return e.current||re(),e.current}function kq(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:i}=e,o=x.useRef(null),l=CD(e),c=pe(()=>Cq(l.current),[l]),u=pe(()=>Nq(l.current),[l]),d=R9(t),h=$9({contextId:t,text:i}),f=T9(t,s),m=pe(D=>{fa(o).dispatch(D)},[]),p=Pe(()=>m1({publishWhileDragging:x7,updateDroppableScroll:v7,updateDroppableIsEnabled:b7,updateDroppableIsCombineEnabled:w7,collectionStarting:y7},m),[m]),g=M9(),y=Pe(()=>a9(g,p),[g,p]),b=Pe(()=>C9({scrollWindow:l9,scrollDroppable:y.scrollDroppable,getAutoScrollerOptions:u,...m1({move:cD},m)}),[y.scrollDroppable,m,u]),v=_9(t),w=Pe(()=>r9({announce:d,autoScroller:b,dimensionMarshal:y,focusMarshal:v,getResponders:c,styleMarshal:f}),[d,b,y,v,c,f]);o.current=w;const S=pe(()=>{const D=fa(o);D.getState().phase!=="IDLE"&&D.dispatch(my())},[]),j=pe(()=>{const D=fa(o).getState();return D.phase==="DROP_ANIMATING"?!0:D.phase==="IDLE"?!1:D.isDragging},[]),k=Pe(()=>({isDragging:j,tryAbort:S}),[j,S]);n(k);const N=pe(D=>yD(fa(o).getState(),D),[]),C=pe(()=>Gs(fa(o).getState()),[]),E=Pe(()=>({marshal:y,focus:v,contextId:t,canLift:N,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:g}),[t,y,h,v,N,C,g]);return Sq({contextId:t,store:w,registry:g,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),x.useEffect(()=>S,[S]),se.createElement(yh.Provider,{value:E},se.createElement(XW,{context:wy,store:w},e.children))}function Eq(){return se.useId()}function Dq(e){const t=Eq(),n=e.dragHandleUsageInstructions||mu.dragHandleUsageInstructions;return se.createElement(sH,null,r=>se.createElement(kq,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const B1={dragging:5e3,dropAnimating:4500},Tq=(e,t)=>t?Wa.drop(t.duration):e?Wa.snap:Wa.fluid,Pq=(e,t)=>{if(e)return t?Dl.opacity.drop:Dl.opacity.combining},_q=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Aq(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:i}=e,o=!!s,l=_q(e),c=!!i,u=c?Kp.drop(r,o):Kp.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Tq(l,i),transform:u,opacity:Pq(o,c),zIndex:c?B1.dropAnimating:B1.dragging,pointerEvents:"none"}}function Mq(e){return{transform:Kp.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Iq(e){return e.type==="DRAGGING"?Aq(e):Mq(e)}function Oq(e,t,n=vt){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),i=LE(s,r),o=vd(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:r.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:o}}function Rq(e){const t=jy("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}=e,c=Pe(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}),[i,l,o]),u=pe(m=>{const p=s();return p||re(),Oq(n,p,m)},[n,s]),d=Pe(()=>({uniqueId:t,descriptor:n,options:c,getDimension:u}),[n,u,c,t]),h=x.useRef(d),f=x.useRef(!0);un(()=>(r.draggable.register(h.current),()=>r.draggable.unregister(h.current)),[r.draggable]),un(()=>{if(f.current){f.current=!1;return}const m=h.current;h.current=d,r.draggable.update(d,m)},[d,r.draggable])}var Cy=se.createContext(null);function Nd(e){const t=x.useContext(e);return t||re(),t}function Lq(e){e.preventDefault()}const Fq=e=>{const t=x.useRef(null),n=pe((k=null)=>{t.current=k},[]),r=pe(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:i,registry:o}=Nd(yh),{type:l,droppableId:c}=Nd(Cy),u=Pe(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:d,draggableId:h,isEnabled:f,shouldRespectForcePress:m,canDragInteractiveElements:p,isClone:g,mapped:y,dropAnimationFinished:b}=e;if(!g){const k=Pe(()=>({descriptor:u,registry:o,getDraggableRef:r,canDragInteractiveElements:p,shouldRespectForcePress:m,isEnabled:f}),[u,o,r,p,m,f]);Rq(k)}const v=Pe(()=>f?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":h,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:Lq}:null,[s,i,h,f]),w=pe(k=>{y.type==="DRAGGING"&&y.dropping&&k.propertyName==="transform"&&Rl.flushSync(b)},[b,y]),S=Pe(()=>{const k=Iq(y),N=y.type==="DRAGGING"&&y.dropping?w:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":h,style:k,onTransitionEnd:N},dragHandleProps:v}},[s,v,h,y,w,n]),j=Pe(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return se.createElement(se.Fragment,null,d(S,y.snapshot,j))};var _D=(e,t)=>e===t,AD=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const $q=e=>e.combine?e.combine.draggableId:null,zq=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function Bq(){const e=yt((s,i)=>({x:s,y:i})),t=yt((s,i,o=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null})),n=yt((s,i,o,l,c=null,u=null,d=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:i,offset:s,dimension:o,forceShouldAnimate:d,snapshot:t(i,l,c,u,null)}}));return(s,i)=>{if(Pl(s)){if(s.critical.draggable.id!==i.draggableId)return null;const o=s.current.client.offset,l=s.dimensions.draggables[i.draggableId],c=cn(s.impact),u=zq(s.impact),d=s.forceShouldAnimate;return n(e(o.x,o.y),s.movementMode,l,i.isClone,c,u,d)}if(s.phase==="DROP_ANIMATING"){const o=s.completed;if(o.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=s.dimensions.draggables[i.draggableId],u=o.result,d=u.mode,h=AD(u),f=$q(u),p={duration:s.dropDuration,curve:gy.drop,moveTo:s.newHomeClientOffset,opacity:f?Dl.opacity.drop:null,scale:f?Dl.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:p,draggingOver:h,combineWith:f,mode:d,forceShouldAnimate:null,snapshot:t(d,l,h,f,p)}}}return null}}function MD(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Vq={mapped:{type:"SECONDARY",offset:vt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:MD(null)}};function Uq(){const e=yt((o,l)=>({x:o,y:l})),t=yt(MD),n=yt((o,l=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),r=o=>o?n(vt,o,!0):null,s=(o,l,c,u)=>{const d=c.displaced.visible[o],h=!!(u.inVirtualList&&u.effected[o]),f=mh(c),m=f&&f.draggableId===o?l:null;if(!d){if(!h)return r(m);if(c.displaced.invisible[o])return null;const y=$o(u.displacedBy.point),b=e(y.x,y.y);return n(b,m,!0)}if(h)return r(m);const p=c.displacedBy.point,g=e(p.x,p.y);return n(g,m,d.shouldAnimate)};return(o,l)=>{if(Pl(o))return o.critical.draggable.id===l.draggableId?null:s(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const Wq=()=>{const e=Bq(),t=Uq();return(r,s)=>e(r,s)||t(r,s)||Vq},Hq={dropAnimationFinished:dD},qq=RE(Wq,Hq,null,{context:wy,areStatePropsEqual:_D})(Fq);function ID(e){return Nd(Cy).isUsingCloneFor===e.draggableId&&!e.isClone?null:se.createElement(qq,e)}function Gq(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return se.createElement(ID,bd({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const OD=e=>t=>e===t,Yq=OD("scroll"),Qq=OD("auto"),V1=(e,t)=>t(e.overflowX)||t(e.overflowY),Kq=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return V1(n,Yq)||V1(n,Qq)},Xq=()=>!1,RD=e=>e==null?null:e===document.body?Xq()?e:null:e===document.documentElement?null:Kq(e)?e:RD(e.parentElement);var Zp=e=>({x:e.scrollLeft,y:e.scrollTop});const LD=e=>e?window.getComputedStyle(e).position==="fixed"?!0:LD(e.parentElement):!1;var Jq=e=>{const t=RD(e),n=LD(e);return{closestScrollable:t,isFixedOnPage:n}},Zq=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:i,page:o,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:f,client:m}=l,p=pD({scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth,height:m.paddingBox.height,width:m.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:m,scrollSize:f,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:p,diff:{value:vt,displacement:vt}}}})(),u=s==="vertical"?cy:YE,d=wo({page:o,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:u,isEnabled:t,client:i,page:o,frame:c,subject:d}};const eG=(e,t)=>{const n=FE(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,o=s+t.scrollWidth,c=iy({top:r,right:o,bottom:i,left:s},n.border);return oy({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var tG=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:l})=>{const c=n.closestScrollable,u=eG(e,c),d=vd(u,r),h=(()=>{if(!c)return null;const m=FE(c),p={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:m,page:vd(m,r),scroll:Zp(c),scrollSize:p,shouldClipSubject:l}})();return Zq({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:s,client:u,page:d,closest:h})};const nG={passive:!1},rG={passive:!0};var U1=e=>e.shouldPublishImmediately?nG:rG;const Vc=e=>e&&e.env.closestScrollable||null;function sG(e){const t=x.useRef(null),n=Nd(yh),r=jy("droppable"),{registry:s,marshal:i}=n,o=CD(e),l=Pe(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=x.useRef(l),u=Pe(()=>yt((S,j)=>{t.current||re();const k={x:S,y:j};i.updateDroppableScroll(l.id,k)}),[l.id,i]),d=pe(()=>{const S=t.current;return!S||!S.env.closestScrollable?vt:Zp(S.env.closestScrollable)},[]),h=pe(()=>{const S=d();u(S.x,S.y)},[d,u]),f=Pe(()=>Cl(h),[h]),m=pe(()=>{const S=t.current,j=Vc(S);if(S&&j||re(),S.scrollOptions.shouldPublishImmediately){h();return}f()},[f,h]),p=pe((S,j)=>{t.current&&re();const k=o.current,N=k.getDroppableRef();N||re();const C=Jq(N),E={ref:N,descriptor:l,env:C,scrollOptions:j};t.current=E;const D=tG({ref:N,descriptor:l,env:C,windowScroll:S,direction:k.direction,isDropDisabled:k.isDropDisabled,isCombineEnabled:k.isCombineEnabled,shouldClipSubject:!k.ignoreContainerClipping}),$=C.closestScrollable;return $&&($.setAttribute(L1.contextId,n.contextId),$.addEventListener("scroll",m,U1(E.scrollOptions))),D},[n.contextId,l,m,o]),g=pe(()=>{const S=t.current,j=Vc(S);return S&&j||re(),Zp(j)},[]),y=pe(()=>{const S=t.current;S||re();const j=Vc(S);t.current=null,j&&(f.cancel(),j.removeAttribute(L1.contextId),j.removeEventListener("scroll",m,U1(S.scrollOptions)))},[m,f]),b=pe(S=>{const j=t.current;j||re();const k=Vc(j);k||re(),k.scrollTop+=S.y,k.scrollLeft+=S.x},[]),v=Pe(()=>({getDimensionAndWatchScroll:p,getScrollWhileDragging:g,dragStopped:y,scroll:b}),[y,p,g,b]),w=Pe(()=>({uniqueId:r,descriptor:l,callbacks:v}),[v,l,r]);un(()=>(c.current=w.descriptor,s.droppable.register(w),()=>{t.current&&y(),s.droppable.unregister(w)}),[v,l,y,w,i,s.droppable]),un(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),un(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function im(){}const W1={width:0,height:0,margin:dH},iG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?W1:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},oG=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=iG({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Wa.placeholder:null}},aG=e=>{const t=x.useRef(null),n=pe(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:i,contextId:o}=e,[l,c]=x.useState(e.animate==="open");x.useEffect(()=>l?r!=="open"?(n(),c(!1),im):t.current?im:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):im,[r,l,n]);const u=pe(h=>{h.propertyName==="height"&&(s(),r==="close"&&i())},[r,i,s]),d=oG({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return se.createElement(e.placeholder.tagName,{style:d,"data-rfd-placeholder-context-id":o,onTransitionEnd:u,ref:e.innerRef})};var lG=se.memo(aG);class cG extends se.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const uG=e=>{const t=x.useContext(yh);t||re();const{contextId:n,isMovementAllowed:r}=t,s=x.useRef(null),i=x.useRef(null),{children:o,droppableId:l,type:c,mode:u,direction:d,ignoreContainerClipping:h,isDropDisabled:f,isCombineEnabled:m,snapshot:p,useClone:g,updateViewportMaxScroll:y,getContainerForClone:b}=e,v=pe(()=>s.current,[]),w=pe(($=null)=>{s.current=$},[]);pe(()=>i.current,[]);const S=pe(($=null)=>{i.current=$},[]),j=pe(()=>{r()&&y({maxScroll:xD()})},[r,y]);sG({droppableId:l,type:c,mode:u,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:v});const k=Pe(()=>se.createElement(cG,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:$,data:B,animate:F})=>se.createElement(lG,{placeholder:B,onClose:$,innerRef:S,animate:F,contextId:n,onTransitionEnd:j})),[n,j,e.placeholder,e.shouldAnimatePlaceholder,S]),N=Pe(()=>({innerRef:w,placeholder:k,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,k,w]),C=g?g.dragging.draggableId:null,E=Pe(()=>({droppableId:l,type:c,isUsingCloneFor:C}),[l,C,c]);function D(){if(!g)return null;const{dragging:$,render:B}=g,F=se.createElement(ID,{draggableId:$.draggableId,index:$.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(T,A)=>B(T,A,$));return R_.createPortal(F,b())}return se.createElement(Cy.Provider,{value:E},o(N,p),D())};function dG(){return document.body||re(),document.body}const H1={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:dG},FD=e=>{let t={...e},n;for(n in H1)e[n]===void 0&&(t={...t,[n]:H1[n]});return t},om=(e,t)=>e===t.droppable.type,q1=(e,t)=>t.draggables[e.draggable.id],hG=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=yt(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),r=yt((i,o,l,c,u,d)=>{const h=u.descriptor.id;if(u.descriptor.droppableId===i){const p=d?{render:d,dragging:n(u.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?h:null,draggingFromThisWith:h,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:p}}if(!o)return t;if(!c)return e;const m={isDraggingOver:l,draggingOverWith:h,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return(i,o)=>{const l=FD(o),c=l.droppableId,u=l.type,d=!l.isDropDisabled,h=l.renderClone;if(Pl(i)){const f=i.critical;if(!om(u,f))return t;const m=q1(f,i.dimensions),p=cn(i.impact)===c;return r(c,d,p,p,m,h)}if(i.phase==="DROP_ANIMATING"){const f=i.completed;if(!om(u,f.critical))return t;const m=q1(f.critical,i.dimensions);return r(c,d,AD(f.result)===c,cn(f.impact)===c,m,h)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const f=i.completed;if(!om(u,f.critical))return t;const m=cn(f.impact)===c,p=!!(f.impact.at&&f.impact.at.type==="COMBINE"),g=f.critical.droppable.id===c;return m?p?e:t:g?e:t}return t}},fG={updateViewportMaxScroll:S7},mG=RE(hG,fG,(e,t,n)=>({...FD(n),...e,...t}),{context:wy,areStatePropsEqual:_D})(uG),am=[{id:"qualification",label:"Qualification",color:"bg-blue-50"},{id:"proposal",label:"Proposal",color:"bg-yellow-50"},{id:"negotiation",label:"Negotiation",color:"bg-purple-50"},{id:"won",label:"Won",color:"bg-green-50"},{id:"lost",label:"Lost",color:"bg-red-50"}];function pG(){const{user:e}=qe(),[t,n]=x.useState([]),[r,s]=x.useState(!0),[i,o]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(null),[h,f]=x.useState({show:!1,title:""}),m=Mn();x.useEffect(()=>{p()},[]);const p=async()=>{try{s(!0),d(null);const C=await nh(),D=($=>Array.isArray($)?$:$&&typeof $=="object"&&$.data&&Array.isArray($.data)||$&&typeof $=="object"&&$.success&&Array.isArray($.data)?$.data:[])(C);console.log("🧪 Debug deals response:",{originalResponse:C,extractedData:D,isArray:Array.isArray(D),length:Array.isArray(D)?D.length:"not array"}),!D||D.length===0?console.log("No deals returned from API or empty array"):console.log(`Successfully fetched ${D.length} deals`),n(D),h.show&&h.variant==="error"&&f({show:!1,title:""})}catch(C){console.error("Error fetching deals:",C),d(C instanceof Error?C:new Error("Unknown error fetching deals"));let E="Please check your network connection and ensure the server is running.";C instanceof Error&&(E+=` Error details: ${C.message}`),y("Error fetching deals","error",E),n([])}finally{s(!1)}},g=()=>{f({show:!1,title:""}),localStorage.removeItem("jwt-token"),setTimeout(()=>{window.location.reload()},500)},y=(C,E="success",D)=>{f({show:!0,title:C,variant:E,description:D}),setTimeout(()=>f({show:!1,title:""}),5e3)},b=async C=>{var P,I;if(o(!1),console.log("Drag end event:",C),!C.destination){console.log("No destination provided in drag result");return}if(C.source.droppableId===C.destination.droppableId&&C.source.index===C.destination.index){console.log("Card dropped in the same location, no update needed");return}const{draggableId:E,destination:D,source:$}=C,B=D.droppableId,F=$.droppableId;console.log(`Moving deal ${E} from ${F} to ${B}`);const T=`Moving deal to ${((P=am.find(H=>H.id===B))==null?void 0:P.label)||B}...`;y(T,"warning");const A=[...t];if(!t.find(H=>H.id===E)){console.error(`Deal with ID ${E} not found`),y("Error updating deal","error","Could not find the deal in the current view");return}const M=t.map(H=>H.id===E?{...H,stage:B}:H);n(M);try{console.log(`Calling API to update deal ${E} to stage ${B}`);const H=await L2(E,B);if(H&&typeof H=="object"&&H.id){console.log("Deal updated successfully:",H);const G={...H,customer:H.customer||{name:"Unknown Customer",email:"",phone:"",company:"",address:""}};n(V=>V.map(X=>X.id===E?G:X));const ee=((I=am.find(V=>V.id===B))==null?void 0:I.label)||B,ie=G.title||"Deal";y(`Deal moved to ${ee}`,"success",`"${ie}" has been successfully moved to the ${ee} stage.`),B==="won"&&w(G)}else console.error("Server returned null for updated deal"),n(A),y("Failed to update deal stage","error","Deal not found on the server or could not be updated")}catch(H){console.error("Error updating deal stage:",H),console.error("Error details:",{dealId:E,newStage:B,errorMessage:H instanceof Error?H.message:"Unknown error",errorStack:H instanceof Error?H.stack:void 0}),n(A);const G=H instanceof Error?`Error: ${H.message}`:"An unknown error occurred while updating the deal";y("Error updating deal stage","error",G)}},v=()=>{o(!0),h.show&&f({show:!1,title:""})},w=C=>{var D;const E=((D=C.customer)==null?void 0:D.name)||"Customer";y("Schedule a job for this deal","success",`You've won the deal with ${E}! You'll be redirected to schedule a job.`),setTimeout(()=>{m(`/jobs?dealId=${C.id}&action=schedule&customerName=${encodeURIComponent(E)}`)},1500)},S=Array.isArray(t)?t.filter(C=>{var $;const E=C.title||"",D=(($=C.customer)==null?void 0:$.name)||"";return E.toLowerCase().includes(l.toLowerCase())||D.toLowerCase().includes(l.toLowerCase())}):[],j=C=>S.filter(E=>E.stage===C),k=C=>j(C).reduce((E,D)=>E+D.value,0);if(!e||e.role!=="sales_agent"&&e.role!=="admin")return a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."});const N=({deal:C,provided:E,snapshot:D})=>{var $,B;return a.jsxs("div",{ref:E.innerRef,...E.draggableProps,...E.dragHandleProps,style:{...E.draggableProps.style,opacity:D.isDragging?.8:1},className:`p-3 bg-white rounded-md shadow border 
        ${D.isDragging?"border-blue-400 ring-2 ring-blue-200":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm line-clamp-2",children:C.title||`Deal for ${(($=C.customer)==null?void 0:$.name)||"Customer"}`}),a.jsx("div",{className:"flex space-x-1",children:a.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6",children:a.jsx(pM,{className:"h-3 w-3"})})})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[a.jsx(ix,{className:"h-3 w-3 mr-1"}),a.jsx("span",{className:"line-clamp-1",children:((B=C.customer)==null?void 0:B.name)||"Unknown Customer"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"font-bold text-base text-primary-800",children:Ve(C.value)}),a.jsxs("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-600",children:[C.probability||50,"%"]})]})]})};return a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-full",children:[h.show&&a.jsx(dt,{title:h.title,description:h.description,variant:h.variant,isVisible:h.show,duration:5e3,onClose:()=>f({show:!1,title:""})}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deals Pipeline"}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs(q,{variant:"outline",size:"sm",onClick:p,disabled:r,className:"flex items-center gap-1",children:[a.jsx(rt,{className:`w-4 h-4 ${r?"animate-spin":""}`}),r?"Loading...":"Refresh"]}),a.jsxs("div",{className:"relative flex-grow",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(cr,{className:"w-4 h-4 text-gray-500"})}),a.jsx(ke,{type:"text",placeholder:"Search deals...",value:l,onChange:C=>c(C.target.value),className:"pl-10 w-full"})]})]})]}),u&&!r&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx(vi,{className:"h-5 w-5 text-red-500 mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"There was an error loading the deals"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("p",{children:u.message})}),a.jsxs("div",{className:"mt-4",children:[a.jsx(q,{onClick:p,variant:"outline",size:"sm",className:"mr-2",children:"Retry"}),a.jsx(q,{onClick:g,variant:"destructive",size:"sm",children:"Reset & Reload Page"})]})]})]})}),r?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(rt,{className:"h-8 w-8 animate-spin text-primary-600 mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Loading deals..."})]})}):a.jsx(Dq,{onDragEnd:b,onDragStart:v,children:a.jsx("div",{className:"overflow-x-auto pb-6",children:a.jsx("div",{className:"flex space-x-4 min-w-[800px] lg:min-w-full",children:am.map(C=>a.jsxs("div",{className:`rounded-lg ${C.color} p-3 sm:p-4 flex-1 min-w-[240px]`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[a.jsx("h3",{className:"font-medium text-sm sm:text-base text-gray-900",children:C.label}),a.jsx(pl,{variant:"outline",className:"text-xs",children:Ve(k(C.id))})]}),a.jsx(mG,{droppableId:C.id,children:E=>a.jsxs("div",{ref:E.innerRef,...E.droppableProps,className:"space-y-2 sm:space-y-3 min-h-[300px] sm:min-h-[500px]",children:[j(C.id).map((D,$)=>a.jsx(Gq,{draggableId:D.id,index:$,isDragDisabled:i&&D.stage!==C.id,children:(B,F)=>a.jsx(N,{deal:D,provided:B,snapshot:F})},D.id)),E.placeholder,j(C.id).length===0&&!i&&a.jsx("div",{className:"py-4 px-2 text-center text-gray-400 text-xs",children:"No deals in this stage"})]})})]},C.id))})})})]})}const gG=[{value:"qualification",label:"Qualification"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function xG(){const{id:e}=DC(),t=Mn(),{user:n}=qe(),[r,s]=x.useState(null),[i,o]=x.useState(!0),[l,c]=x.useState([]),[u,d]=x.useState([]),[h,f]=x.useState(!1),[m,p]=x.useState({show:!1,title:""});x.useEffect(()=>{e&&g()},[e]),x.useEffect(()=>{r!=null&&r.leadId&&y(r.leadId)},[r]);const g=async()=>{try{o(!0);const w=await yo(e);if(!w){v("Deal not found","error"),t("/deals");return}s(w)}catch(w){console.error("Error fetching deal:",w),v("Error fetching deal details","error")}finally{o(!1)}},y=async w=>{try{f(!0);const S=await ld(w);c(S);const j=[];S.forEach(k=>{if(k.selectedMachines&&k.selectedMachines.length>0)k.selectedMachines.forEach(N=>{j.some(C=>C.id===N.id)||j.push(N)});else if(k.selectedEquipment&&k.selectedEquipment.id){const N={id:k.selectedEquipment.id,machineType:k.machineType,equipmentId:k.selectedEquipment.equipmentId,name:k.selectedEquipment.name,baseRates:k.selectedEquipment.baseRates,baseRate:k.selectedEquipment.baseRates[k.orderType],runningCostPerKm:k.runningCostPerKm,quantity:1};j.some(C=>C.id===N.id)||j.push(N)}}),d(j)}catch(S){console.error("Error fetching deal equipment:",S)}finally{f(!1)}},b=async w=>{if(r)try{const S=await L2(r.id,w);S&&(s(S),v(`Deal stage updated to ${w}`,"success"))}catch(S){console.error("Error updating deal stage:",S),v("Error updating deal stage","error")}},v=(w,S="success")=>{p({show:!0,title:w,variant:S}),setTimeout(()=>p({show:!1,title:""}),3e3)};return!n||n.role!=="sales_agent"&&n.role!=="admin"?a.jsx("div",{className:"p-4 text-center text-gray-500",children:"You don't have permission to access this page."}):i?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(rt,{className:"h-8 w-8 animate-spin text-primary-600"})}):r?a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-4 sm:space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsxs(q,{variant:"ghost",onClick:()=>t("/deals"),size:"sm",className:"p-1 sm:p-2",children:[a.jsx(IC,{size:16,className:"sm:mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Back to Deals"})]}),a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Deal Details"})]})}),a.jsx("div",{className:"sm:hidden",children:a.jsx(ce,{children:a.jsx(me,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-700 font-medium",children:"Value"}),a.jsx("div",{className:"text-lg font-bold text-primary-700",children:Ve(r.value)})]}),a.jsx(q,{className:"text-xs",size:"sm",onClick:()=>t(`/quotations/create?dealId=${r.id}`),variant:"accent",children:"Create Quotation"})]})})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{className:"p-4 sm:p-6",children:a.jsx(xe,{children:"Deal Information"})}),a.jsxs(me,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:r.title}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r.description})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Deal Value"}),a.jsx("div",{className:"mt-1 text-base sm:text-lg font-semibold text-gray-900",children:Ve(r.value)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Stage"}),a.jsx("div",{className:"mt-1",children:a.jsx(Te,{value:r.stage,onChange:w=>b(w),options:gG,className:"w-full sm:w-[200px] text-sm"})})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Created On"}),a.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(r.createdAt).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Expected Close Date"}),a.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:new Date(r.expectedCloseDate).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Probability"}),a.jsxs("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:[r.probability,"%"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Assigned To"}),a.jsx("div",{className:"mt-1 text-sm sm:text-base text-gray-900",children:r.assignedTo})]})]})]})]}),a.jsxs(ce,{children:[a.jsx(ge,{className:"p-4 sm:p-6",children:a.jsx(xe,{children:"Notes"})}),a.jsx(me,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:a.jsx("p",{className:"text-sm text-gray-600",children:r.notes||"No notes available."})})]})]}),a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs(ce,{children:[a.jsx(ge,{className:"p-4 sm:p-6",children:a.jsx(xe,{children:"Customer Information"})}),a.jsxs(me,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm sm:text-base",children:r.customer.name}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:r.customer.designation})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ix,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-gray-600 break-words",children:r.customer.company})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(hM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-gray-600 break-all",children:r.customer.email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-gray-600",children:r.customer.phone})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Hd,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-400 flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"text-sm text-gray-600",children:r.customer.address})]})]})]}),"          ",a.jsxs(ce,{className:"mb-4",children:[a.jsx(ge,{className:"p-4 sm:p-6",children:a.jsxs(xe,{className:"flex items-center",children:[a.jsx(xM,{className:"h-5 w-5 mr-2 text-primary-600"}),"Equipment Information"]})}),a.jsx(me,{className:"px-4 pb-4 sm:px-6 sm:pb-6",children:h?a.jsx("div",{className:"flex justify-center items-center py-4",children:a.jsx(rt,{className:"h-5 w-5 animate-spin text-primary-600"})}):u.length>0?a.jsx("div",{className:"space-y-2",children:u.map(w=>a.jsxs("div",{className:"p-3 border rounded-md bg-gray-50",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm",children:w.name}),a.jsx("p",{className:"text-xs text-gray-500",children:w.machineType})]}),a.jsx("div",{className:"text-sm text-right",children:a.jsxs("span",{className:"font-medium",children:["Qty: ",w.quantity]})})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-600 flex justify-between",children:[a.jsxs("div",{children:["Base Rate: ",Ve(w.baseRate)]}),a.jsxs("div",{children:["Cost/Km: ",Ve(w.runningCostPerKm)]})]})]},w.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"No equipment information available for this deal."})})]}),a.jsxs(ce,{className:"hidden sm:block",children:[a.jsx(ge,{className:"p-4 sm:p-6",children:a.jsx(xe,{children:"Actions"})}),a.jsx(me,{className:"px-4 pb-4 sm:px-6 sm:pb-6 space-y-4",children:a.jsx(q,{className:"w-full",onClick:()=>t(`/quotations/create?dealId=${r.id}`),variant:"accent",children:"Create Quotation"})})]})]})]}),m.show&&a.jsx(dt,{title:m.title,variant:m.variant,isVisible:m.show,onClose:()=>p({show:!1,title:""})})]}):a.jsx("div",{className:"text-center py-8 text-gray-500",children:"Deal not found."})}const $D=x.createContext({dragDropManager:void 0});function vn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var G1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Y1=function(){return Math.random().toString(36).substring(7).split("").join(".")},Q1={INIT:"@@redux/INIT"+Y1(),REPLACE:"@@redux/REPLACE"+Y1()};function yG(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zD(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(vn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(vn(1));return n(zD)(e,t)}if(typeof e!="function")throw new Error(vn(2));var s=e,i=t,o=[],l=o,c=!1;function u(){l===o&&(l=o.slice())}function d(){if(c)throw new Error(vn(3));return i}function h(g){if(typeof g!="function")throw new Error(vn(4));if(c)throw new Error(vn(5));var y=!0;return u(),l.push(g),function(){if(y){if(c)throw new Error(vn(6));y=!1,u();var v=l.indexOf(g);l.splice(v,1),o=null}}}function f(g){if(!yG(g))throw new Error(vn(7));if(typeof g.type>"u")throw new Error(vn(8));if(c)throw new Error(vn(9));try{c=!0,i=s(i,g)}finally{c=!1}for(var y=o=l,b=0;b<y.length;b++){var v=y[b];v()}return g}function m(g){if(typeof g!="function")throw new Error(vn(10));s=g,f({type:Q1.REPLACE})}function p(){var g,y=h;return g={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(vn(11));function w(){v.next&&v.next(d())}w();var S=y(w);return{unsubscribe:S}}},g[G1]=function(){return this},g}return f({type:Q1.INIT}),r={dispatch:f,subscribe:h,getState:d,replaceReducer:m},r[G1]=p,r}function be(e,t,...n){if(vG()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let r;if(t===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;r=new Error(t.replace(/%s/g,function(){return n[s++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function vG(){return typeof process<"u"&&!0}function bG(e,t,n){return t.split(".").reduce((r,s)=>r&&r[s]?r[s]:n||null,e)}function wG(e,t){return e.filter(n=>n!==t)}function BD(e){return typeof e=="object"}function jG(e,t){const n=new Map,r=i=>{n.set(i,n.has(i)?n.get(i)+1:1)};e.forEach(r),t.forEach(r);const s=[];return n.forEach((i,o)=>{i===1&&s.push(o)}),s}function SG(e,t){return e.filter(n=>t.indexOf(n)>-1)}const Ny="dnd-core/INIT_COORDS",bh="dnd-core/BEGIN_DRAG",ky="dnd-core/PUBLISH_DRAG_SOURCE",wh="dnd-core/HOVER",jh="dnd-core/DROP",Sh="dnd-core/END_DRAG";function K1(e,t){return{type:Ny,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const CG={type:Ny,payload:{clientOffset:null,sourceClientOffset:null}};function NG(e){return function(n=[],r={publishSource:!0}){const{publishSource:s=!0,clientOffset:i,getSourceClientOffset:o}=r,l=e.getMonitor(),c=e.getRegistry();e.dispatch(K1(i)),kG(n,l,c);const u=TG(n,l);if(u==null){e.dispatch(CG);return}let d=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");EG(o),d=o(u)}e.dispatch(K1(i,d));const f=c.getSource(u).beginDrag(l,u);if(f==null)return;DG(f),c.pinSource(u);const m=c.getSourceType(u);return{type:bh,payload:{itemType:m,item:f,sourceId:u,clientOffset:i||null,sourceClientOffset:d||null,isSourcePublic:!!s}}}}function kG(e,t,n){be(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(r){be(n.getSource(r),"Expected sourceIds to be registered.")})}function EG(e){be(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function DG(e){be(BD(e),"Item must be an object.")}function TG(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function PG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _G(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){PG(e,s,n[s])})}return e}function AG(e){return function(n={}){const r=e.getMonitor(),s=e.getRegistry();MG(r),RG(r).forEach((o,l)=>{const c=IG(o,l,s,r),u={type:jh,payload:{dropResult:_G({},n,c)}};e.dispatch(u)})}}function MG(e){be(e.isDragging(),"Cannot call drop while not dragging."),be(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function IG(e,t,n,r){const s=n.getTarget(e);let i=s?s.drop(r,e):void 0;return OG(i),typeof i>"u"&&(i=t===0?{}:r.getDropResult()),i}function OG(e){be(typeof e>"u"||BD(e),"Drop result must either be an object or undefined.")}function RG(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function LG(e){return function(){const n=e.getMonitor(),r=e.getRegistry();FG(n);const s=n.getSourceId();return s!=null&&(r.getSource(s,!0).endDrag(n,s),r.unpinSource()),{type:Sh}}}function FG(e){be(e.isDragging(),"Cannot call endDrag while not dragging.")}function eg(e,t){return t===null?e===null:Array.isArray(e)?e.some(n=>n===t):e===t}function $G(e){return function(n,{clientOffset:r}={}){zG(n);const s=n.slice(0),i=e.getMonitor(),o=e.getRegistry(),l=i.getItemType();return VG(s,o,l),BG(s,i,o),UG(s,i,o),{type:wh,payload:{targetIds:s,clientOffset:r||null}}}}function zG(e){be(Array.isArray(e),"Expected targetIds to be an array.")}function BG(e,t,n){be(t.isDragging(),"Cannot call hover while not dragging."),be(!t.didDrop(),"Cannot call hover after drop.");for(let r=0;r<e.length;r++){const s=e[r];be(e.lastIndexOf(s)===r,"Expected targetIds to be unique in the passed array.");const i=n.getTarget(s);be(i,"Expected targetIds to be registered.")}}function VG(e,t,n){for(let r=e.length-1;r>=0;r--){const s=e[r],i=t.getTargetType(s);eg(i,n)||e.splice(r,1)}}function UG(e,t,n){e.forEach(function(r){n.getTarget(r).hover(t,r)})}function WG(e){return function(){if(e.getMonitor().isDragging())return{type:ky}}}function HG(e){return{beginDrag:NG(e),publishDragSource:WG(e),hover:$G(e),drop:AG(e),endDrag:LG(e)}}class qG{receiveBackend(t){this.backend=t}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const t=this,{dispatch:n}=this.store;function r(i){return(...o)=>{const l=i.apply(t,o);typeof l<"u"&&n(l)}}const s=HG(this);return Object.keys(s).reduce((i,o)=>{const l=s[o];return i[o]=r(l),i},{})}dispatch(t){this.store.dispatch(t)}constructor(t,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=t,this.monitor=n,t.subscribe(this.handleRefCountChange)}}function GG(e,t){return{x:e.x+t.x,y:e.y+t.y}}function VD(e,t){return{x:e.x-t.x,y:e.y-t.y}}function YG(e){const{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return!t||!n||!r?null:VD(GG(t,r),n)}function QG(e){const{clientOffset:t,initialClientOffset:n}=e;return!t||!n?null:VD(t,n)}const Ha=[],Ey=[];Ha.__IS_NONE__=!0;Ey.__IS_ALL__=!0;function KG(e,t){return e===Ha?!1:e===Ey||typeof t>"u"?!0:SG(t,e).length>0}class XG{subscribeToStateChange(t,n={}){const{handlerIds:r}=n;be(typeof t=="function","listener must be a function."),be(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),l=o.stateId;try{l===s||l===s+1&&!KG(o.dirtyHandlerIds,r)||t()}finally{s=l}};return this.store.subscribe(i)}subscribeToOffsetChange(t){be(typeof t=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const s=this.store.getState().dragOffset;s!==n&&(n=s,t())};return this.store.subscribe(r)}canDragSource(t){if(!t)return!1;const n=this.registry.getSource(t);return be(n,`Expected to find a valid source. sourceId=${t}`),this.isDragging()?!1:n.canDrag(this,t)}canDropOnTarget(t){if(!t)return!1;const n=this.registry.getTarget(t);if(be(n,`Expected to find a valid target. targetId=${t}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(t),s=this.getItemType();return eg(r,s)&&n.canDrop(this,t)}isDragging(){return!!this.getItemType()}isDraggingSource(t){if(!t)return!1;const n=this.registry.getSource(t,!0);if(be(n,`Expected to find a valid source. sourceId=${t}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(t),s=this.getItemType();return r!==s?!1:n.isDragging(this,t)}isOverTarget(t,n={shallow:!1}){if(!t)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const s=this.registry.getTargetType(t),i=this.getItemType();if(i&&!eg(s,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const l=o.indexOf(t);return r?l===o.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return YG(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return QG(this.store.getState().dragOffset)}constructor(t,n){this.store=t,this.registry=n}}const X1=typeof global<"u"?global:self,UD=X1.MutationObserver||X1.WebKitMutationObserver;function WD(e){return function(){const n=setTimeout(s,0),r=setInterval(s,50);function s(){clearTimeout(n),clearInterval(r),e()}}}function JG(e){let t=1;const n=new UD(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}const ZG=typeof UD=="function"?JG:WD;class eY{enqueueTask(t){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:t}=this;for(;this.index<t.length;){const n=this.index;if(this.index++,t[n].call(),this.index>this.capacity){for(let r=0,s=t.length-this.index;r<s;r++)t[r]=t[r+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=ZG(this.flush),this.requestErrorThrow=WD(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class tY{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,n){this.onError=t,this.release=n,this.task=null}}class nY{create(t){const n=this.freeTasks,r=n.length?n.pop():new tY(this.onError,s=>n[n.length]=s);return r.task=t,r}constructor(t){this.onError=t,this.freeTasks=[]}}const HD=new eY,rY=new nY(HD.registerPendingError);function sY(e){HD.enqueueTask(rY.create(e))}const Dy="dnd-core/ADD_SOURCE",Ty="dnd-core/ADD_TARGET",Py="dnd-core/REMOVE_SOURCE",Ch="dnd-core/REMOVE_TARGET";function iY(e){return{type:Dy,payload:{sourceId:e}}}function oY(e){return{type:Ty,payload:{targetId:e}}}function aY(e){return{type:Py,payload:{sourceId:e}}}function lY(e){return{type:Ch,payload:{targetId:e}}}function cY(e){be(typeof e.canDrag=="function","Expected canDrag to be a function."),be(typeof e.beginDrag=="function","Expected beginDrag to be a function."),be(typeof e.endDrag=="function","Expected endDrag to be a function.")}function uY(e){be(typeof e.canDrop=="function","Expected canDrop to be a function."),be(typeof e.hover=="function","Expected hover to be a function."),be(typeof e.drop=="function","Expected beginDrag to be a function.")}function tg(e,t){if(t&&Array.isArray(e)){e.forEach(n=>tg(n,!1));return}be(typeof e=="string"||typeof e=="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Sn;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Sn||(Sn={}));let dY=0;function hY(){return dY++}function fY(e){const t=hY().toString();switch(e){case Sn.SOURCE:return`S${t}`;case Sn.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function J1(e){switch(e[0]){case"S":return Sn.SOURCE;case"T":return Sn.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Z1(e,t){const n=e.entries();let r=!1;do{const{done:s,value:[,i]}=n.next();if(i===t)return!0;r=!!s}while(!r);return!1}class mY{addSource(t,n){tg(t),cY(n);const r=this.addHandler(Sn.SOURCE,t,n);return this.store.dispatch(iY(r)),r}addTarget(t,n){tg(t,!0),uY(n);const r=this.addHandler(Sn.TARGET,t,n);return this.store.dispatch(oY(r)),r}containsHandler(t){return Z1(this.dragSources,t)||Z1(this.dropTargets,t)}getSource(t,n=!1){return be(this.isSourceId(t),"Expected a valid source ID."),n&&t===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(t)}getTarget(t){return be(this.isTargetId(t),"Expected a valid target ID."),this.dropTargets.get(t)}getSourceType(t){return be(this.isSourceId(t),"Expected a valid source ID."),this.types.get(t)}getTargetType(t){return be(this.isTargetId(t),"Expected a valid target ID."),this.types.get(t)}isSourceId(t){return J1(t)===Sn.SOURCE}isTargetId(t){return J1(t)===Sn.TARGET}removeSource(t){be(this.getSource(t),"Expected an existing source."),this.store.dispatch(aY(t)),sY(()=>{this.dragSources.delete(t),this.types.delete(t)})}removeTarget(t){be(this.getTarget(t),"Expected an existing target."),this.store.dispatch(lY(t)),this.dropTargets.delete(t),this.types.delete(t)}pinSource(t){const n=this.getSource(t);be(n,"Expected an existing source."),this.pinnedSourceId=t,this.pinnedSource=n}unpinSource(){be(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(t,n,r){const s=fY(t);return this.types.set(s,n),t===Sn.SOURCE?this.dragSources.set(s,r):t===Sn.TARGET&&this.dropTargets.set(s,r),s}constructor(t){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}}const pY=(e,t)=>e===t;function gY(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function xY(e,t,n=pY){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function yY(e=Ha,t){switch(t.type){case wh:break;case Dy:case Ty:case Ch:case Py:return Ha;case bh:case ky:case Sh:case jh:default:return Ey}const{targetIds:n=[],prevTargetIds:r=[]}=t.payload,s=jG(n,r);if(!(s.length>0||!xY(n,r)))return Ha;const o=r[r.length-1],l=n[n.length-1];return o!==l&&(o&&s.push(o),l&&s.push(l)),s}function vY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){vY(e,s,n[s])})}return e}const ej={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function wY(e=ej,t){const{payload:n}=t;switch(t.type){case Ny:case bh:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case wh:return gY(e.clientOffset,n.clientOffset)?e:bY({},e,{clientOffset:n.clientOffset});case Sh:case jh:return ej;default:return e}}function jY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){jY(e,s,n[s])})}return e}const SY={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function CY(e=SY,t){const{payload:n}=t;switch(t.type){case bh:return Mi({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case ky:return Mi({},e,{isSourcePublic:!0});case wh:return Mi({},e,{targetIds:n.targetIds});case Ch:return e.targetIds.indexOf(n.targetId)===-1?e:Mi({},e,{targetIds:wG(e.targetIds,n.targetId)});case jh:return Mi({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Sh:return Mi({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function NY(e=0,t){switch(t.type){case Dy:case Ty:return e+1;case Py:case Ch:return e-1;default:return e}}function kY(e=0){return e+1}function EY(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){EY(e,s,n[s])})}return e}function TY(e={},t){return{dirtyHandlerIds:yY(e.dirtyHandlerIds,{type:t.type,payload:DY({},t.payload,{prevTargetIds:bG(e,"dragOperation.targetIds",[])})}),dragOffset:wY(e.dragOffset,t),refCount:NY(e.refCount,t),dragOperation:CY(e.dragOperation,t),stateId:kY(e.stateId)}}function PY(e,t=void 0,n={},r=!1){const s=_Y(r),i=new XG(s,new mY(s)),o=new qG(s,i),l=e(o,t,n);return o.receiveBackend(l),o}function _Y(e){const t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return zD(TY,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}function AY(e,t){if(e==null)return{};var n=MY(e,t),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function MY(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}let tj=0;const pu=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var IY=x.memo(function(t){var{children:n}=t,r=AY(t,["children"]);const[s,i]=OY(r);return x.useEffect(()=>{if(i){const o=qD();return++tj,()=>{--tj===0&&(o[pu]=null)}}},[]),a.jsx($D.Provider,{value:s,children:n})});function OY(e){if("manager"in e)return[{dragDropManager:e.manager},!1];const t=RY(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}function RY(e,t=qD(),n,r){const s=t;return s[pu]||(s[pu]={dragDropManager:PY(e,t,n,r)}),s[pu]}function qD(){return typeof global<"u"?global:window}var LY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const FY=kd(LY),gi=typeof window<"u"?x.useLayoutEffect:x.useEffect;function $Y(e,t,n){const[r,s]=x.useState(()=>t(e)),i=x.useCallback(()=>{const o=t(e);FY(r,o)||(s(o),n&&n())},[r,e,n]);return gi(i),[r,i]}function zY(e,t,n){const[r,s]=$Y(e,t,n);return gi(function(){const o=e.getHandlerId();if(o!=null)return e.subscribeToStateChange(s,{handlerIds:[o]})},[e,s]),r}function GD(e,t,n){return zY(t,e||(()=>({})),()=>n.reconnect())}function YD(e,t){const n=[];return typeof e!="function"&&n.push(e),x.useMemo(()=>typeof e=="function"?e():e,n)}function BY(e){return x.useMemo(()=>e.hooks.dragSource(),[e])}function VY(e){return x.useMemo(()=>e.hooks.dragPreview(),[e])}let lm=!1,cm=!1;class UY{receiveHandlerId(t){this.sourceId=t}getHandlerId(){return this.sourceId}canDrag(){be(!lm,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return lm=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{lm=!1}}isDragging(){if(!this.sourceId)return!1;be(!cm,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return cm=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{cm=!1}}subscribeToStateChange(t,n){return this.internalMonitor.subscribeToStateChange(t,n)}isDraggingSource(t){return this.internalMonitor.isDraggingSource(t)}isOverTarget(t,n){return this.internalMonitor.isOverTarget(t,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(t){return this.internalMonitor.subscribeToOffsetChange(t)}canDragSource(t){return this.internalMonitor.canDragSource(t)}canDropOnTarget(t){return this.internalMonitor.canDropOnTarget(t)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.sourceId=null,this.internalMonitor=t.getMonitor()}}let um=!1;class WY{receiveHandlerId(t){this.targetId=t}getHandlerId(){return this.targetId}subscribeToStateChange(t,n){return this.internalMonitor.subscribeToStateChange(t,n)}canDrop(){if(!this.targetId)return!1;be(!um,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return um=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{um=!1}}isOver(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(t){this.targetId=null,this.internalMonitor=t.getMonitor()}}function HY(e,t,n){const r=n.getRegistry(),s=r.addTarget(e,t);return[s,()=>r.removeTarget(s)]}function qY(e,t,n){const r=n.getRegistry(),s=r.addSource(e,t);return[s,()=>r.removeSource(s)]}function ng(e,t,n,r){let s;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;const l=Object.prototype.hasOwnProperty.bind(t);for(let c=0;c<i.length;c++){const u=i[c];if(!l(u))return!1;const d=e[u],h=t[u];if(s=void 0,s===!1||s===void 0&&d!==h)return!1}return!0}function rg(e){return e!==null&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function GY(e){if(typeof e.type=="string")return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function YY(e){return(t=null,n=null)=>{if(!x.isValidElement(t)){const i=t;return e(i,n),i}const r=t;return GY(r),QY(r,n?i=>e(i,n):e)}}function QD(e){const t={};return Object.keys(e).forEach(n=>{const r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{const s=YY(r);t[n]=()=>s}}),t}function nj(e,t){typeof e=="function"?e(t):e.current=t}function QY(e,t){const n=e.ref;return be(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?x.cloneElement(e,{ref:r=>{nj(n,r),nj(t,r)}}):x.cloneElement(e,{ref:t})}class KY{receiveHandlerId(t){this.handlerId!==t&&(this.handlerId=t,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(t){this.dragSourceOptionsInternal=t}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(t){this.dragPreviewOptionsInternal=t}reconnect(){const t=this.reconnectDragSource();this.reconnectDragPreview(t)}reconnectDragSource(){const t=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?t?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions)),n):(this.lastConnectedDragSource=t,n):n}reconnectDragPreview(t=!1){const n=this.dragPreview,r=t||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ng(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ng(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(t){this.hooks=QD({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,rg(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,rg(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}}class XY{get connectTarget(){return this.dropTarget}reconnect(){const t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(t){t!==this.handlerId&&(this.handlerId=t,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(t){this.dropTargetOptionsInternal=t}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ng(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(t){this.hooks=QD({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,rg(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}}function Vo(){const{dragDropManager:e}=x.useContext($D);return be(e!=null,"Expected drag drop context"),e}function JY(e,t){const n=Vo(),r=x.useMemo(()=>new KY(n.getBackend()),[n]);return gi(()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource()),[r,e]),gi(()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,t]),r}function ZY(){const e=Vo();return x.useMemo(()=>new UY(e),[e])}class eQ{beginDrag(){const t=this.spec,n=this.monitor;let r=null;return typeof t.item=="object"?r=t.item:typeof t.item=="function"?r=t.item(n):r={},r??null}canDrag(){const t=this.spec,n=this.monitor;return typeof t.canDrag=="boolean"?t.canDrag:typeof t.canDrag=="function"?t.canDrag(n):!0}isDragging(t,n){const r=this.spec,s=this.monitor,{isDragging:i}=r;return i?i(s):n===t.getSourceId()}endDrag(){const t=this.spec,n=this.monitor,r=this.connector,{end:s}=t;s&&s(n.getItem(),n),r.reconnect()}constructor(t,n,r){this.spec=t,this.monitor=n,this.connector=r}}function tQ(e,t,n){const r=x.useMemo(()=>new eQ(e,t,n),[t,n]);return x.useEffect(()=>{r.spec=e},[e]),r}function nQ(e){return x.useMemo(()=>{const t=e.type;return be(t!=null,"spec.type must be defined"),t},[e])}function rQ(e,t,n){const r=Vo(),s=tQ(e,t,n),i=nQ(e);gi(function(){if(i!=null){const[l,c]=qY(i,s,r);return t.receiveHandlerId(l),n.receiveHandlerId(l),c}},[r,t,n,s,i])}function sQ(e,t){const n=YD(e);be(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=ZY(),s=JY(n.options,n.previewOptions);return rQ(n,r,s),[GD(n.collect,r,s),BY(s),VY(s)]}function iQ(e){return x.useMemo(()=>e.hooks.dropTarget(),[e])}function oQ(e){const t=Vo(),n=x.useMemo(()=>new XY(t.getBackend()),[t]);return gi(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}function aQ(){const e=Vo();return x.useMemo(()=>new WY(e),[e])}function lQ(e){const{accept:t}=e;return x.useMemo(()=>(be(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}class cQ{canDrop(){const t=this.spec,n=this.monitor;return t.canDrop?t.canDrop(n.getItem(),n):!0}hover(){const t=this.spec,n=this.monitor;t.hover&&t.hover(n.getItem(),n)}drop(){const t=this.spec,n=this.monitor;if(t.drop)return t.drop(n.getItem(),n)}constructor(t,n){this.spec=t,this.monitor=n}}function uQ(e,t){const n=x.useMemo(()=>new cQ(e,t),[t]);return x.useEffect(()=>{n.spec=e},[e]),n}function dQ(e,t,n){const r=Vo(),s=uQ(e,t),i=lQ(e);gi(function(){const[l,c]=HY(i,s,r);return t.receiveHandlerId(l),n.receiveHandlerId(l),c},[r,t,s,n,i.map(o=>o.toString()).join("|")])}function hQ(e,t){const n=YD(e),r=aQ(),s=oQ(n.options);return dQ(n,r,s),[GD(n.collect,r,s),iQ(s)]}function KD(e){let t=null;return()=>(t==null&&(t=e()),t)}function fQ(e,t){return e.filter(n=>n!==t)}function mQ(e,t){const n=new Set,r=i=>n.add(i);e.forEach(r),t.forEach(r);const s=[];return n.forEach(i=>s.push(i)),s}class pQ{enter(t){const n=this.entered.length,r=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(t));return this.entered=mQ(this.entered.filter(r),[t]),n===0&&this.entered.length>0}leave(t){const n=this.entered.length;return this.entered=fQ(this.entered.filter(this.isNodeInDocument),t),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(t){this.entered=[],this.isNodeInDocument=t}}class gQ{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(t=>{Object.defineProperty(this.item,t,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${t}" until the drop event.`),null}})})}loadDataTransfer(t){if(t){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const s=this.config.exposeProperties[r];s!=null&&(n[r]={value:s(t,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(t,n){return n===t.getSourceId()}endDrag(){}constructor(t){this.config=t,this.item={},this.initializeExposedProperties()}}const XD="__NATIVE_FILE__",JD="__NATIVE_URL__",ZD="__NATIVE_TEXT__",eT="__NATIVE_HTML__",rj=Object.freeze(Object.defineProperty({__proto__:null,FILE:XD,HTML:eT,TEXT:ZD,URL:JD},Symbol.toStringTag,{value:"Module"}));function dm(e,t,n){const r=t.reduce((s,i)=>s||e.getData(i),"");return r??n}const sg={[XD]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[eT]:{exposeProperties:{html:(e,t)=>dm(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[JD]:{exposeProperties:{urls:(e,t)=>dm(e,t,"").split(`
`),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[ZD]:{exposeProperties:{text:(e,t)=>dm(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function xQ(e,t){const n=sg[e];if(!n)throw new Error(`native type ${e} has no configuration`);const r=new gQ(n);return r.loadDataTransfer(t),r}function hm(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(sg).filter(n=>{const r=sg[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(s=>t.indexOf(s)>-1):!1})[0]||null}const yQ=KD(()=>/firefox/i.test(navigator.userAgent)),tT=KD(()=>!!window.safari);class sj{interpolate(t){const{xs:n,ys:r,c1s:s,c2s:i,c3s:o}=this;let l=n.length-1;if(t===n[l])return r[l];let c=0,u=o.length-1,d;for(;c<=u;){d=Math.floor(.5*(c+u));const m=n[d];if(m<t)c=d+1;else if(m>t)u=d-1;else return r[d]}l=Math.max(0,u);const h=t-n[l],f=h*h;return r[l]+s[l]*h+i[l]*f+o[l]*h*f}constructor(t,n){const{length:r}=t,s=[];for(let m=0;m<r;m++)s.push(m);s.sort((m,p)=>t[m]<t[p]?-1:1);const i=[],o=[];let l,c;for(let m=0;m<r-1;m++)l=t[m+1]-t[m],c=n[m+1]-n[m],i.push(l),o.push(c/l);const u=[o[0]];for(let m=0;m<i.length-1;m++){const p=o[m],g=o[m+1];if(p*g<=0)u.push(0);else{l=i[m];const y=i[m+1],b=l+y;u.push(3*b/((b+y)/p+(b+l)/g))}}u.push(o[o.length-1]);const d=[],h=[];let f;for(let m=0;m<u.length-1;m++){f=o[m];const p=u[m],g=1/i[m],y=p+u[m+1]-f-f;d.push((f-p-y)*g),h.push(y*g*g)}this.xs=t,this.ys=n,this.c1s=u,this.c2s=d,this.c3s=h}}const vQ=1;function nT(e){const t=e.nodeType===vQ?e:e.parentElement;if(!t)return null;const{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Uc(e){return{x:e.clientX,y:e.clientY}}function bQ(e){var t;return e.nodeName==="IMG"&&(yQ()||!(!((t=document.documentElement)===null||t===void 0)&&t.contains(e)))}function wQ(e,t,n,r){let s=e?t.width:n,i=e?t.height:r;return tT()&&e&&(i/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:i}}function jQ(e,t,n,r,s){const i=bQ(t),l=nT(i?e:t),c={x:n.x-l.x,y:n.y-l.y},{offsetWidth:u,offsetHeight:d}=e,{anchorX:h,anchorY:f}=r,{dragPreviewWidth:m,dragPreviewHeight:p}=wQ(i,t,u,d),g=()=>{let k=new sj([0,.5,1],[c.y,c.y/d*p,c.y+p-d]).interpolate(f);return tT()&&i&&(k+=(window.devicePixelRatio-1)*p),k},y=()=>new sj([0,.5,1],[c.x,c.x/u*m,c.x+m-u]).interpolate(h),{offsetX:b,offsetY:v}=s,w=b===0||b,S=v===0||v;return{x:w?b:y(),y:S?v:g()}}class SQ{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var t;return!((t=this.globalContext)===null||t===void 0)&&t.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}constructor(t,n){this.ownerDocument=null,this.globalContext=t,this.optionsArgs=n}}function CQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ij(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable}))),r.forEach(function(s){CQ(e,s,n[s])})}return e}class NQ{profile(){var t,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}teardown(){const t=this.rootElement;if(t!==void 0&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(t,n,r){return this.sourcePreviewNodeOptions.set(t,r),this.sourcePreviewNodes.set(t,n),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDragSource(t,n,r){this.sourceNodes.set(t,n),this.sourceNodeOptions.set(t,r);const s=o=>this.handleDragStart(o,t),i=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",s),n.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(t),this.sourceNodeOptions.delete(t),n.removeEventListener("dragstart",s),n.removeEventListener("selectstart",i),n.setAttribute("draggable","false")}}connectDropTarget(t,n){const r=o=>this.handleDragEnter(o,t),s=o=>this.handleDragOver(o,t),i=o=>this.handleDrop(o,t);return n.addEventListener("dragenter",r),n.addEventListener("dragover",s),n.addEventListener("drop",i),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",s),n.removeEventListener("drop",i)}}addEventListeners(t){t.addEventListener&&(t.addEventListener("dragstart",this.handleTopDragStart),t.addEventListener("dragstart",this.handleTopDragStartCapture,!0),t.addEventListener("dragend",this.handleTopDragEndCapture,!0),t.addEventListener("dragenter",this.handleTopDragEnter),t.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.addEventListener("dragover",this.handleTopDragOver),t.addEventListener("dragover",this.handleTopDragOverCapture,!0),t.addEventListener("drop",this.handleTopDrop),t.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(t){t.removeEventListener&&(t.removeEventListener("dragstart",this.handleTopDragStart),t.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),t.removeEventListener("dragend",this.handleTopDragEndCapture,!0),t.removeEventListener("dragenter",this.handleTopDragEnter),t.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),t.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),t.removeEventListener("dragover",this.handleTopDragOver),t.removeEventListener("dragover",this.handleTopDragOverCapture,!0),t.removeEventListener("drop",this.handleTopDrop),t.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const t=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(t);return ij({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const t=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(t);return ij({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const t=this.monitor.getItemType();return Object.keys(rj).some(n=>rj[n]===t)}beginDragNativeItem(t,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=xQ(t,n),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(t){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(t,n){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(t,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(t,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(t,n){this.dropTargetIds.unshift(n)}constructor(t,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const i=this.sourceNodes.get(s);return i&&nT(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=Uc(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:l}=s,c=hm(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const d=this.monitor.getSourceId(),h=this.sourceNodes.get(d),f=this.sourcePreviewNodes.get(d)||h;if(f){const{anchorX:m,anchorY:p,offsetX:g,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),w=jQ(h,f,o,{anchorX:m,anchorY:p},{offsetX:g,offsetY:y});l.setDragImage(f,w.x,w.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:l}=s,c=hm(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Uc(s)}),i.some(l=>this.monitor.canDropOnTarget(l))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=Uc(s),this.scheduleHover(i),(i||[]).some(l=>this.monitor.canDropOnTarget(l))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;s.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}else hm(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Uc(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const i=s.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(s.preventDefault(),i.dragDrop()))},this.options=new SQ(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new pQ(this.isNodeInDocument)}}const kQ=function(t,n,r){return new NQ(t,n,r)},oj={company_name:"ASP Cranes & Heavy Equipment Pvt. Ltd.",company_address:"123 Industrial Area, Mumbai, Maharashtra 400001",customer_name:"ABC Construction Pvt. Ltd.",customer_address:"456 Project Site, Pune, Maharashtra 411001",quotation_number:"QT-2025-001",quotation_date:new Date().toLocaleDateString("en-IN"),total_amount:"₹7,85,000"};function EQ({isOpen:e,onClose:t,elements:n,templateName:r="Template Preview"}){if(console.log("🖥️ TemplatePreviewModal render:",{isOpen:e,elementsCount:n==null?void 0:n.length,templateName:r}),console.log("📊 Elements to preview:",n==null?void 0:n.map(c=>({id:c.id,type:c.type}))),!e)return null;const s=c=>{let u=c;return Object.entries(oj).forEach(([d,h])=>{u=u.replace(new RegExp(`{{${d}}}`,"g"),h)}),u},i=(c,u)=>{var h,f,m,p,g,y,b;const d={fontSize:((h=c.style)==null?void 0:h.fontSize)||"14px",fontWeight:((f=c.style)==null?void 0:f.fontWeight)||"normal",color:((m=c.style)==null?void 0:m.color)||"#000000",backgroundColor:((p=c.style)==null?void 0:p.backgroundColor)||"transparent",padding:((g=c.style)==null?void 0:g.padding)||"8px",margin:((y=c.style)==null?void 0:y.margin)||"0px",textAlign:((b=c.style)==null?void 0:b.textAlign)||"left"};switch(c.type){case"header":return a.jsx("div",{className:"text-center p-6 bg-blue-50 border-b-2 border-blue-200",children:a.jsx("h1",{className:"text-3xl font-bold",style:d,children:s(c.content||"Company Header")})},u);case"text":return a.jsx("div",{style:d,className:"mb-4",children:s(c.content||"Text content")},u);case"field":return a.jsx("div",{style:d,className:"mb-2",children:a.jsx("strong",{children:s(c.content||"{{field_name}}")})},u);case"table":return a.jsx("div",{className:"mb-6 overflow-hidden rounded-lg border border-gray-300",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold",children:"Equipment"}),a.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold",children:"Capacity"}),a.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold",children:"Duration"}),a.jsx("th",{className:"border border-gray-300 p-3 text-left font-semibold",children:"Rate"})]})}),a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 p-3",children:"Mobile Crane"}),a.jsx("td",{className:"border border-gray-300 p-3",children:"100MT"}),a.jsx("td",{className:"border border-gray-300 p-3",children:"1 Month"}),a.jsx("td",{className:"border border-gray-300 p-3",children:"₹7,85,000"})]}),a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("td",{className:"border border-gray-300 p-3",children:"Operator Services"}),a.jsx("td",{className:"border border-gray-300 p-3",children:"Certified"}),a.jsx("td",{className:"border border-gray-300 p-3",children:"1 Month"}),a.jsx("td",{className:"border border-gray-300 p-3",children:"₹45,000"})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-300 p-3 font-semibold",colSpan:3,children:"Total"}),a.jsx("td",{className:"border border-gray-300 p-3 font-semibold",children:"₹8,30,000"})]})]})]})},u);case"image":return a.jsx("div",{className:"mb-4 text-center",children:a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded p-6 bg-gray-50",children:a.jsxs("div",{className:"text-gray-500",children:["📷 ",c.content||"Company Logo"]})})},u);case"terms":return a.jsxs("div",{className:"mb-6 bg-gray-50 border border-gray-200 rounded p-4",style:d,children:[a.jsx("h3",{className:"font-semibold mb-3 text-lg",children:"Terms & Conditions"}),a.jsx("div",{className:"text-sm leading-relaxed",children:c.content?s(c.content):a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{children:"1. Payment terms: 30% advance, 70% on delivery"}),a.jsx("p",{children:"2. Delivery timeline: 15-20 business days"}),a.jsx("p",{children:"3. Warranty: 12 months comprehensive warranty"}),a.jsx("p",{children:"4. Installation and commissioning included"}),a.jsx("p",{children:"5. All prices are exclusive of GST"})]})})]},u);case"spacer":const v=c.content||"20px";return a.jsx("div",{style:{height:v},className:"mb-2"},u);default:return a.jsx("div",{children:"Unknown element type"},u)}},o=()=>{window.print()},l=()=>{alert("Download functionality would generate a PDF here")};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] w-full mx-4 flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Template Preview"}),a.jsx("p",{className:"text-sm text-gray-600",children:r})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(q,{variant:"ghost",size:"sm",onClick:l,className:"flex items-center gap-2",children:[a.jsx(Wd,{size:16}),"Download PDF"]}),a.jsxs(q,{variant:"ghost",size:"sm",onClick:o,className:"flex items-center gap-2",children:[a.jsx(wM,{size:16}),"Print"]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:t,className:"p-2",children:a.jsx(wi,{size:20})})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[a.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"QUOTATION"}),a.jsx("p",{className:"text-blue-100",children:"Professional Equipment Rental Services"})]}),a.jsx("div",{className:"p-6",children:n.length>0?n.map((c,u)=>i(c,u)):a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx("p",{children:"No elements to preview"}),a.jsx("p",{className:"text-sm",children:"Add elements to your template to see the preview"})]})}),a.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50 rounded-b-lg",children:a.jsxs("div",{className:"text-center text-sm text-gray-600",children:[a.jsx("p",{children:"Generated by ASP Cranes CRM System"}),a.jsxs("p",{children:["Date: ",new Date().toLocaleDateString("en-IN")," | Quotation: ",oj.quotation_number]})]})})]})})]})})}const rT={PALETTE_ITEM:"palette_item"},DQ=[{type:"header",label:"Header Section",icon:ru,description:"Company logo and title",defaultContent:"Company Header",category:"layout"},{type:"text",label:"Text Block",icon:ru,description:"Add custom text content",defaultContent:"Your text content here",category:"content"},{type:"field",label:"Dynamic Field",icon:no,description:"Insert quotation data",defaultContent:"{{customer_name}}",category:"data"},{type:"calculation",label:"Calculation Field",icon:no,description:"Auto-calculated values",defaultContent:"{{total_amount}}",category:"data"},{type:"conditional",label:"Conditional Block",icon:no,description:"Show/hide based on conditions",defaultContent:"Content shown if condition is met",category:"logic"},{type:"loop",label:"Repeating Section",icon:Ia,description:"Loop through equipment items",defaultContent:"Repeating content for each item",category:"logic"},{type:"table",label:"Data Table",icon:Ia,description:"Display equipment and pricing",defaultContent:"Equipment Table",category:"data"},{type:"signature",label:"Signature Block",icon:ru,description:"Signature and approval area",defaultContent:"Authorized Signature",category:"content"},{type:"terms",label:"Terms & Conditions",icon:St,description:"Legal terms and conditions",defaultContent:`TERMS AND CONDITIONS

1. SCOPE OF WORK
   - Equipment will be provided as per specifications mentioned in the quotation
   - Services include transportation, installation, and operation as agreed
   - Any additional work will be charged separately

2. PAYMENT TERMS
   - 30% advance payment before commencement of work
   - 40% payment upon delivery and installation
   - 30% payment upon completion of work
   - Payment to be made within 30 days of invoice date

3. LIABILITY
   - Company liability limited to equipment malfunction due to manufacturing defects
   - Client responsible for site safety and security
   - Insurance coverage as per applicable regulations

4. CANCELLATION
   - 48 hours notice required for cancellation
   - Cancellation charges may apply as per company policy
   - Advance payments are non-refundable after work commencement

5. FORCE MAJEURE
   - Company not liable for delays due to circumstances beyond control
   - Includes natural disasters, strikes, government regulations, etc.

For complete terms and conditions, please contact our office.`,category:"content"},{type:"image",label:"Image/Logo",icon:ox,description:"Company logo or images",defaultContent:"Image Placeholder",category:"content"},{type:"spacer",label:"Spacer",icon:dp,description:"Add vertical spacing",defaultContent:"",category:"layout"},{type:"qr_code",label:"QR Code",icon:Ia,description:"Generate QR code",defaultContent:"QR Code for quotation",category:"content"},{type:"barcode",label:"Barcode",icon:dp,description:"Generate barcode",defaultContent:"Quotation barcode",category:"content"}],sT=[{category:"Company",value:"{{company_name}}",label:"Company Name",description:"Your company name"},{category:"Company",value:"{{company_address}}",label:"Company Address",description:"Full company address"},{category:"Company",value:"{{company_phone}}",label:"Company Phone",description:"Primary contact number"},{category:"Company",value:"{{company_email}}",label:"Company Email",description:"Primary email address"},{category:"Company",value:"{{company_website}}",label:"Company Website",description:"Company website URL"},{category:"Company",value:"{{company_gst}}",label:"Company GST",description:"GST registration number"},{category:"Company",value:"{{company_pan}}",label:"Company PAN",description:"PAN card number"},{category:"Customer",value:"{{customer_name}}",label:"Customer Name",description:"Customer/client name"},{category:"Customer",value:"{{customer_address}}",label:"Customer Address",description:"Customer address"},{category:"Customer",value:"{{customer_phone}}",label:"Customer Phone",description:"Customer contact number"},{category:"Customer",value:"{{customer_email}}",label:"Customer Email",description:"Customer email address"},{category:"Customer",value:"{{customer_gst}}",label:"Customer GST",description:"Customer GST number"},{category:"Customer",value:"{{customer_contact_person}}",label:"Contact Person",description:"Primary contact person"},{category:"Quotation",value:"{{quotation_number}}",label:"Quotation Number",description:"Unique quotation ID"},{category:"Quotation",value:"{{quotation_date}}",label:"Quotation Date",description:"Date of quotation"},{category:"Quotation",value:"{{quotation_validity}}",label:"Quotation Validity",description:"Valid until date"},{category:"Quotation",value:"{{quotation_ref}}",label:"Reference Number",description:"Reference or PO number"},{category:"Quotation",value:"{{quotation_subject}}",label:"Subject",description:"Quotation subject/title"},{category:"Financial",value:"{{subtotal_amount}}",label:"Subtotal Amount",description:"Amount before tax"},{category:"Financial",value:"{{gst_amount}}",label:"GST Amount",description:"Total GST amount"},{category:"Financial",value:"{{discount_amount}}",label:"Discount Amount",description:"Total discount given"},{category:"Financial",value:"{{total_amount}}",label:"Total Amount",description:"Final total amount"},{category:"Financial",value:"{{total_amount_words}}",label:"Amount in Words",description:"Total amount in words"},{category:"Financial",value:"{{advance_amount}}",label:"Advance Amount",description:"Advance payment required"},{category:"Project",value:"{{project_name}}",label:"Project Name",description:"Name of the project"},{category:"Project",value:"{{project_location}}",label:"Project Location",description:"Work site location"},{category:"Project",value:"{{project_duration}}",label:"Project Duration",description:"Total project duration"},{category:"Project",value:"{{start_date}}",label:"Start Date",description:"Project start date"},{category:"Project",value:"{{end_date}}",label:"End Date",description:"Project end date"},{category:"Calculations",value:"{{working_cost}}",label:"Working Cost",description:"Total working cost"},{category:"Calculations",value:"{{mob_demob_cost}}",label:"Mobilization Cost",description:"Mobilization/demobilization cost"},{category:"Calculations",value:"{{food_accom_cost}}",label:"Food & Accommodation",description:"Food and accommodation cost"},{category:"Calculations",value:"{{fuel_cost}}",label:"Fuel Cost",description:"Total fuel cost"},{category:"Calculations",value:"{{operator_cost}}",label:"Operator Cost",description:"Operator charges"},{category:"Calculations",value:"{{transport_cost}}",label:"Transport Cost",description:"Transportation charges"},{category:"Calculations",value:"{{number_of_days}}",label:"Number of Days",description:"Total working days"},{category:"DateTime",value:"{{current_date}}",label:"Current Date",description:"Today's date"},{category:"DateTime",value:"{{current_time}}",label:"Current Time",description:"Current time"},{category:"DateTime",value:"{{created_date}}",label:"Created Date",description:"Quotation creation date"},{category:"DateTime",value:"{{last_modified}}",label:"Last Modified",description:"Last modification date"},{category:"User",value:"{{created_by}}",label:"Created By",description:"User who created quotation"},{category:"User",value:"{{sales_person}}",label:"Sales Person",description:"Assigned sales person"},{category:"User",value:"{{manager}}",label:"Manager",description:"Reporting manager"}],TQ=[{id:"professional",name:"Professional Blue",description:"Clean blue theme for corporate quotations",colors:{primary:"#2563eb",secondary:"#64748b",accent:"#f1f5f9",text:"#1e293b",background:"#ffffff"},fonts:{heading:"font-bold text-lg",body:"font-normal text-sm",small:"font-normal text-xs"}},{id:"modern",name:"Modern Orange",description:"Contemporary orange theme with clean lines",colors:{primary:"#ea580c",secondary:"#78716c",accent:"#fef7ed",text:"#292524",background:"#ffffff"},fonts:{heading:"font-bold text-lg",body:"font-normal text-sm",small:"font-normal text-xs"}},{id:"elegant",name:"Elegant Black",description:"Sophisticated black and gold theme",colors:{primary:"#1f2937",secondary:"#d97706",accent:"#f9fafb",text:"#111827",background:"#ffffff"},fonts:{heading:"font-bold text-lg",body:"font-normal text-sm",small:"font-normal text-xs"}}],PQ=[{id:"company_header",name:"Company Header Block",description:"Complete company header with logo and details",elements:[{type:"header",content:"{{company_name}}",style:{fontSize:"24px",fontWeight:"bold",textAlign:"center",margin:"20px 0"}},{type:"text",content:"{{company_address}} | Phone: {{company_phone}} | Email: {{company_email}}",style:{fontSize:"12px",textAlign:"center",color:"#666666"}}]},{id:"quotation_details",name:"Quotation Details Block",description:"Standard quotation information section",elements:[{type:"text",content:"QUOTATION",style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",margin:"20px 0"}},{type:"field",content:"Quotation No: {{quotation_number}}"},{type:"field",content:"Date: {{quotation_date}}"},{type:"field",content:"Valid Until: {{quotation_validity}}"}]},{id:"customer_details",name:"Customer Details Block",description:"Customer information section",elements:[{type:"text",content:"BILL TO:",style:{fontWeight:"bold",margin:"15px 0 5px 0"}},{type:"field",content:"{{customer_name}}"},{type:"field",content:"{{customer_address}}"},{type:"field",content:"Phone: {{customer_phone}}"}]}],aj=sT;function _Q({item:e}){const[{isDragging:t},n]=sQ(()=>({type:rT.PALETTE_ITEM,item:{elementType:e.type,defaultContent:e.defaultContent},collect:i=>({isDragging:i.isDragging()})})),r=e.icon,s={content:"border-blue-200 bg-blue-50 hover:border-blue-300",data:"border-green-200 bg-green-50 hover:border-green-300",layout:"border-purple-200 bg-purple-50 hover:border-purple-300",logic:"border-orange-200 bg-orange-50 hover:border-orange-300"};return a.jsx("div",{ref:n,className:`
        cursor-move p-3 border rounded-lg shadow-sm
        hover:shadow-md transition-all duration-200
        ${t?"opacity-50":"opacity-100"}
        ${s[e.category]||"border-gray-200 bg-white hover:border-gray-300"}
      `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(r,{size:20,className:"text-gray-700"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:e.label}),a.jsx("div",{className:"text-xs text-gray-500",children:e.description})]})]})})}function AQ({onInsertVariable:e}){const[t,n]=x.useState("Company"),[r,s]=x.useState(""),i=[...new Set(aj.map(l=>l.category))],o=aj.filter(l=>{const c=t==="All"||l.category===t,u=r===""||l.label.toLowerCase().includes(r.toLowerCase())||l.description.toLowerCase().includes(r.toLowerCase());return c&&u});return a.jsxs("div",{className:"h-full bg-white border-l border-gray-200 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Insert Variables"}),a.jsx(ke,{value:r,onChange:l=>s(l.target.value),placeholder:"Search variables...",className:"mb-3"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:["All",...i].map(l=>a.jsx("button",{onClick:()=>n(l),className:`px-2 py-1 text-xs rounded transition-colors ${t===l?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:l},l))})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:o.map((l,c)=>a.jsxs("div",{onClick:()=>e(l.value),className:"p-2 rounded cursor-pointer hover:bg-gray-50 border-b border-gray-100",children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:l.label}),a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:l.description}),a.jsx("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded",children:l.value})]},c))})]})}function MQ({onApplyTheme:e}){return a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Template Themes"}),a.jsx("div",{className:"space-y-2",children:TQ.map(t=>a.jsxs("div",{onClick:()=>e(t),className:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:t.colors.primary}}),a.jsx("div",{className:"font-medium text-sm",children:t.name})]}),a.jsx("div",{className:"text-xs text-gray-500",children:t.description}),a.jsx("div",{className:"flex gap-1 mt-2",children:Object.values(t.colors).slice(0,4).map((n,r)=>a.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:n}},r))})]},t.id))})]})}function IQ({onInsertTemplate:e}){return a.jsxs("div",{className:"p-4 bg-white border-b border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Quick Templates"}),a.jsx("div",{className:"space-y-2",children:PQ.map(t=>a.jsxs("div",{onClick:()=>e(t),className:"p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-green-300 hover:bg-green-50 transition-colors",children:[a.jsx("div",{className:"font-medium text-sm text-gray-900",children:t.name}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.description}),a.jsxs("div",{className:"text-xs text-blue-600 mt-2",children:[t.elements.length," elements"]})]},t.id))})]})}function OQ({element:e,onUpdate:t,onClose:n}){var j,k,N,C,E,D,$,B,F,T,A,z,M,P,I,H,G,ee,ie;const[r,s]=x.useState(e),[i,o]=x.useState(!1),[l,c]=x.useState("content"),u=(V,X)=>{s(U=>({...U,style:{...U.style,[V]:X}})),o(!0)},d=V=>{s(X=>({...X,content:V})),o(!0)},h=(V,X)=>{s(U=>({...U,config:{...U.config,[V]:X}})),o(!0)},f=V=>{const X=new FileReader;X.onload=U=>{var W;const O=(W=U.target)==null?void 0:W.result;s(Y=>({...Y,config:{...Y.config,src:O,uploadedFile:V}})),o(!0)},X.readAsDataURL(V)},m=()=>{var U;const V=((U=r.config)==null?void 0:U.columns)||["Column 1","Column 2","Column 3"],X=new Array(V.length).fill("");s(O=>{var W;return{...O,config:{...O.config,rows:[...((W=O.config)==null?void 0:W.rows)||[],X]}}}),o(!0)},p=()=>{var U,O;const V=((U=r.config)==null?void 0:U.columns)||[],X=((O=r.config)==null?void 0:O.rows)||[];s(W=>({...W,config:{...W.config,columns:[...V,`Column ${V.length+1}`],rows:X.map(Y=>[...Y,""])}})),o(!0)},g=(V,X,U)=>{var W;const O=[...((W=r.config)==null?void 0:W.rows)||[]];O[V][X]=U,s(Y=>({...Y,config:{...Y.config,rows:O}})),o(!0)},y=(V,X)=>{var O;const U=[...((O=r.config)==null?void 0:O.columns)||[]];U[V]=X,s(W=>({...W,config:{...W.config,columns:U}})),o(!0)},b=V=>{var X,U,O,W;if((((U=(X=r.config)==null?void 0:X.rows)==null?void 0:U.length)||0)>1){const Y=((W=(O=r.config)==null?void 0:O.rows)==null?void 0:W.filter((oe,_)=>_!==V))||[];s(oe=>({...oe,config:{...oe.config,rows:Y}})),o(!0)}},v=V=>{var X,U,O,W,Y,oe;if((((U=(X=r.config)==null?void 0:X.columns)==null?void 0:U.length)||0)>1){const _=((W=(O=r.config)==null?void 0:O.columns)==null?void 0:W.filter((R,Q)=>Q!==V))||[],L=((oe=(Y=r.config)==null?void 0:Y.rows)==null?void 0:oe.map(R=>R.filter((Q,J)=>J!==V)))||[];s(R=>({...R,config:{...R.config,columns:_,rows:L}})),o(!0)}},w=()=>{t(r),o(!1)},S=()=>{s(e),o(!1)};return a.jsxs("div",{className:"bg-white shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Edit Element"}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:r.type})})]}),a.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"content",label:"Content"},{id:"style",label:"Style"},{id:"advanced",label:"Advanced"}].map(V=>a.jsx("button",{onClick:()=>c(V.id),className:`flex-1 px-4 py-2 text-sm font-medium ${l===V.id?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-600 hover:text-gray-900"}`,children:V.label},V.id))}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l==="content"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),r.type==="field"?a.jsxs("select",{value:r.content,onChange:V=>d(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"",children:"Select a field..."}),sT.map((V,X)=>a.jsxs("option",{value:V.value,children:[V.label," - ",V.value]},X))]}):a.jsx(Kt,{value:r.content||"",onChange:V=>d(V.target.value),rows:r.type==="terms"?10:3,className:"w-full",placeholder:"Enter content..."})]}),r.type==="conditional"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition"}),a.jsx(ke,{value:((j=r.config)==null?void 0:j.condition)||"",onChange:V=>h("condition",V.target.value),placeholder:"e.g., {{total_amount}} > 10000",className:"w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Show this content only when condition is true"})]}),r.type==="loop"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loop Over"}),a.jsxs("select",{value:((k=r.config)==null?void 0:k.loopSource)||"",onChange:V=>h("loopSource",V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"",children:"Select data source..."}),a.jsx("option",{value:"equipment_items",children:"Equipment Items"}),a.jsx("option",{value:"services",children:"Services"}),a.jsx("option",{value:"additional_costs",children:"Additional Costs"})]})]}),r.type==="table"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Table Structure"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:p,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"+ Column"}),a.jsx("button",{onClick:m,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"+ Row"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Headers"}),(((N=r.config)==null?void 0:N.columns)||[]).map((V,X)=>{var U,O;return a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx(ke,{value:V,onChange:W=>y(X,W.target.value),placeholder:`Column ${X+1}`,className:"flex-1 text-sm"}),a.jsx("button",{onClick:()=>v(X),disabled:(((O=(U=r.config)==null?void 0:U.columns)==null?void 0:O.length)||0)<=1,className:"px-2 py-1 text-red-600 hover:text-red-700 disabled:opacity-50",children:"×"})]},X)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Data Rows"}),(((C=r.config)==null?void 0:C.rows)||[]).map((V,X)=>{var U,O;return a.jsxs("div",{className:"border border-gray-200 rounded p-2 mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("span",{className:"text-xs font-medium",children:["Row ",X+1]}),a.jsx("button",{onClick:()=>b(X),disabled:(((O=(U=r.config)==null?void 0:U.rows)==null?void 0:O.length)||0)<=1,className:"text-xs text-red-600 hover:text-red-700 disabled:opacity-50",children:"Remove"})]}),V.map((W,Y)=>{var oe,_;return a.jsx(ke,{value:W,onChange:L=>g(X,Y,L.target.value),placeholder:`${((_=(oe=r.config)==null?void 0:oe.columns)==null?void 0:_[Y])||`Column ${Y+1}`}`,className:"mb-1 text-sm"},Y)})]},X)})]})]}),r.type==="image"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),a.jsx("input",{type:"file",accept:"image/*",onChange:V=>{var X;return((X=V.target.files)==null?void 0:X[0])&&f(V.target.files[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),((E=r.config)==null?void 0:E.src)&&a.jsx("img",{src:r.config.src,alt:"Preview",className:"mt-2 max-w-full h-20 object-contain border border-gray-200 rounded"})]})]}),l==="style"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Typography"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Font Size"}),a.jsxs("select",{value:((D=r.style)==null?void 0:D.fontSize)||"14px",onChange:V=>u("fontSize",V.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"10px",children:"10px"}),a.jsx("option",{value:"12px",children:"12px"}),a.jsx("option",{value:"14px",children:"14px"}),a.jsx("option",{value:"16px",children:"16px"}),a.jsx("option",{value:"18px",children:"18px"}),a.jsx("option",{value:"20px",children:"20px"}),a.jsx("option",{value:"24px",children:"24px"}),a.jsx("option",{value:"28px",children:"28px"}),a.jsx("option",{value:"32px",children:"32px"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Font Weight"}),a.jsxs("select",{value:(($=r.style)==null?void 0:$.fontWeight)||"normal",onChange:V=>u("fontWeight",V.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"bold",children:"Bold"}),a.jsx("option",{value:"lighter",children:"Light"}),a.jsx("option",{value:"bolder",children:"Extra Bold"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Alignment"}),a.jsx("div",{className:"flex gap-1",children:[{value:"left",icon:qA},{value:"center",icon:HA},{value:"right",icon:GA}].map(({value:V,icon:X})=>{var U;return a.jsx("button",{onClick:()=>u("textAlign",V),className:`p-2 border rounded ${((U=r.style)==null?void 0:U.textAlign)===V?"bg-blue-100 border-blue-300":"bg-white border-gray-300 hover:bg-gray-50"}`,children:a.jsx(X,{size:16})},V)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Colors"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Text Color"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:((B=r.style)==null?void 0:B.color)||"#000000",onChange:V=>u("color",V.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),a.jsx(ke,{value:((F=r.style)==null?void 0:F.color)||"#000000",onChange:V=>u("color",V.target.value),className:"flex-1 text-xs",placeholder:"#000000"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Background"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:((T=r.style)==null?void 0:T.backgroundColor)||"#ffffff",onChange:V=>u("backgroundColor",V.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),a.jsx(ke,{value:((A=r.style)==null?void 0:A.backgroundColor)||"#ffffff",onChange:V=>u("backgroundColor",V.target.value),className:"flex-1 text-xs",placeholder:"#ffffff"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Spacing"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Padding"}),a.jsx(ke,{value:((z=r.style)==null?void 0:z.padding)||"8px",onChange:V=>u("padding",V.target.value),className:"w-full text-xs",placeholder:"8px"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Margin"}),a.jsx(ke,{value:((M=r.style)==null?void 0:M.margin)||"4px 0",onChange:V=>u("margin",V.target.value),className:"w-full text-xs",placeholder:"4px 0"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Borders"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Border"}),a.jsx(ke,{value:((P=r.style)==null?void 0:P.border)||"",onChange:V=>u("border",V.target.value),className:"w-full text-xs",placeholder:"1px solid #ddd"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Border Radius"}),a.jsx(ke,{value:((I=r.style)==null?void 0:I.borderRadius)||"",onChange:V=>u("borderRadius",V.target.value),className:"w-full text-xs",placeholder:"4px"})]})]})]})]}),l==="advanced"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CSS Classes"}),a.jsx(ke,{value:((H=r.config)==null?void 0:H.cssClasses)||"",onChange:V=>h("cssClasses",V.target.value),className:"w-full",placeholder:"custom-class another-class"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Space-separated CSS class names"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Attributes"}),a.jsx(Kt,{value:((G=r.config)==null?void 0:G.attributes)||"",onChange:V=>h("attributes",V.target.value),rows:3,className:"w-full",placeholder:'{"data-id": "custom-id", "title": "Custom title"}'}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JSON object with custom HTML attributes"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visibility Rules"}),a.jsx(Kt,{value:((ee=r.config)==null?void 0:ee.visibilityRules)||"",onChange:V=>h("visibilityRules",V.target.value),rows:2,className:"w-full",placeholder:"Show only if: {{field_name}} === 'value'"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Conditional visibility based on data values"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom CSS"}),a.jsx(Kt,{value:((ie=r.config)==null?void 0:ie.customCss)||"",onChange:V=>h("customCss",V.target.value),rows:4,className:"w-full font-mono text-xs",placeholder:`/* Custom CSS styles */\r
.custom-element {\r
  transform: rotate(45deg);\r
  transition: all 0.3s ease;\r
}`})]})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{onClick:w,disabled:!i,className:"flex-1 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",children:"Apply Changes"}),a.jsx(q,{onClick:S,disabled:!i,variant:"ghost",className:"flex-1",children:"Reset"})]})})]})}function RQ({element:e,index:t,onDelete:n,onUpdateElement:r,onMoveUp:s,onMoveDown:i,onEdit:o,isFirst:l,isLast:c}){var j,k,N,C,E,D,$,B;const[u,d]=x.useState(!1),[h,f]=x.useState("both"),[m,p]=x.useState({x:0,y:0,width:0,height:0}),g=se.useRef(null),y=(F,T="both")=>{var z;F.preventDefault(),F.stopPropagation(),d(!0),f(T);const A=(z=g.current)==null?void 0:z.getBoundingClientRect();A&&p({x:F.clientX,y:F.clientY,width:A.width,height:A.height})},b=F=>{if(!u||!g.current)return;const T=F.clientX-m.x,A=F.clientY-m.y;let z=m.width,M=m.height;(h==="both"||h==="width")&&(z=Math.max(100,m.width+T)),(h==="both"||h==="height")&&(M=Math.max(100,m.height+A)),(h==="both"||h==="width")&&(g.current.style.width=`${z}px`),(h==="both"||h==="height")&&(g.current.style.height=`${M}px`)},v=()=>{if(!u||!g.current)return;d(!1);const F=g.current.style.width,T=g.current.style.height;r(t,{style:{...e.style,width:F,height:T}})};se.useEffect(()=>{if(u)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",v)}},[u,m]);const w={fontSize:((j=e.style)==null?void 0:j.fontSize)||"14px",fontWeight:((k=e.style)==null?void 0:k.fontWeight)||"normal",color:(N=e.style)!=null&&N.color&&((C=e.style)==null?void 0:C.color)!=="#ffffff"?e.style.color:"#222",backgroundColor:((E=e.style)==null?void 0:E.backgroundColor)||"#fff",padding:((D=e.style)==null?void 0:D.padding)||"8px",margin:(($=e.style)==null?void 0:$.margin)||"0px",textAlign:((B=e.style)==null?void 0:B.textAlign)||"left"},S=()=>{var F,T,A,z,M,P,I,H,G,ee,ie,V,X,U,O,W;switch(e.type){case"header":return a.jsx("div",{className:"text-center p-4 bg-blue-50 border border-blue-200 rounded",children:a.jsx("h1",{className:"text-2xl font-bold",style:w,children:e.content||"Company Header"})});case"text":return a.jsx("div",{style:w,className:"whitespace-pre-wrap",children:e.content||"Text content"});case"field":return a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2",style:w,children:a.jsx("span",{className:"text-yellow-700",children:e.content||"{{field_name}}"})});case"table":const Y=((F=e.config)==null?void 0:F.columns)||["Column 1","Column 2","Column 3"],oe=((T=e.config)==null?void 0:T.rows)||[["Sample Data 1","Sample Data 2","Sample Data 3"]],_=((A=e.config)==null?void 0:A.showHeader)!==!1;return a.jsx("div",{className:"border border-gray-300 rounded overflow-hidden",style:{width:((z=e.style)==null?void 0:z.width)||"auto",maxWidth:((M=e.style)==null?void 0:M.maxWidth)||"100%"},children:a.jsxs("table",{className:"w-full",style:e.style,children:[_&&a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:Y.map((L,R)=>{var Q,J,K,ae;return a.jsx("th",{className:"border border-gray-300 p-2 text-left font-medium text-gray-900",style:{width:((J=(Q=e.config)==null?void 0:Q.columnWidths)==null?void 0:J[R])||"auto",fontSize:((K=e.style)==null?void 0:K.fontSize)||"14px",color:((ae=e.style)==null?void 0:ae.color)||"#1f2937"},children:L},R)})})}),a.jsx("tbody",{children:oe.map((L,R)=>a.jsx("tr",{className:R%2===0?"bg-white":"bg-gray-50",children:L.map((Q,J)=>{var K,ae,ne,De,ye;return a.jsx("td",{className:"border border-gray-300 p-2 text-gray-700",style:{width:((ae=(K=e.config)==null?void 0:K.columnWidths)==null?void 0:ae[J])||"auto",fontSize:((ne=e.style)==null?void 0:ne.fontSize)||"14px",color:((De=e.style)==null?void 0:De.color)||"#374151",textAlign:((ye=e.style)==null?void 0:ye.textAlign)||"left"},children:Q||"-"},J)})},R))})]})});case"image":return(P=e.config)!=null&&P.src?a.jsxs("div",{ref:g,className:"relative border border-gray-300 rounded group/image bg-white",style:{width:((I=e.style)==null?void 0:I.width)||"150px",height:((H=e.style)==null?void 0:H.height)||"80px",maxWidth:((G=e.style)==null?void 0:G.maxWidth)||"300px",textAlign:((ee=e.style)==null?void 0:ee.textAlign)||"center",minWidth:"80px",minHeight:"40px"},children:[a.jsx("img",{src:e.config.src,alt:e.config.alt||"Uploaded image",className:"w-full h-full object-contain",style:{aspectRatio:e.config.aspectRatio||"auto"}}),a.jsx("div",{className:"absolute inset-0 border-2 border-transparent group-hover/image:border-blue-400 transition-all",children:a.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover/image:opacity-100 transition-opacity",children:[a.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-blue-600 border-4 border-white cursor-nw-resize hover:bg-blue-700 shadow-xl rounded-full flex items-center justify-center z-50",onMouseDown:L=>y(L,"both"),title:"Drag to resize",children:a.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),a.jsx("div",{className:"absolute -right-2 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-blue-600 border-2 border-white cursor-e-resize hover:bg-blue-700 shadow-lg rounded-r z-40",onMouseDown:L=>y(L,"width"),title:"Resize width",children:a.jsx("div",{className:"h-3 w-1 bg-white mx-auto mt-1.5 rounded"})}),a.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-8 h-4 bg-blue-600 border-2 border-white cursor-n-resize hover:bg-blue-700 shadow-lg rounded-b z-40",onMouseDown:L=>y(L,"height"),title:"Resize height",children:a.jsx("div",{className:"w-3 h-1 bg-white mx-auto mt-1 rounded"})}),a.jsxs("div",{className:"absolute -top-8 left-0 bg-blue-600 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",children:[((ie=e.style)==null?void 0:ie.width)||"150px"," × ",((V=e.style)==null?void 0:V.height)||"80px"]})]})})]}):a.jsxs("div",{ref:g,className:"relative border-2 border-dashed border-gray-400 rounded p-4 text-center bg-gray-50 group/image",style:{width:((X=e.style)==null?void 0:X.width)||"150px",height:((U=e.style)==null?void 0:U.height)||"80px",maxWidth:"300px",minHeight:"60px",minWidth:"100px"},children:[a.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[a.jsx(ox,{size:24,className:"text-gray-400 mb-1"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Upload Image"}),a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Logo / Company Image"})]}),a.jsxs("div",{className:"absolute inset-0 opacity-0 group-hover/image:opacity-100 transition-opacity",children:[a.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 bg-blue-600 border-2 border-white cursor-nw-resize hover:bg-blue-700 shadow-lg rounded-full flex items-center justify-center z-50",onMouseDown:L=>y(L,"both"),title:"Drag to resize",children:a.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})}),a.jsxs("div",{className:"absolute -top-6 left-0 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:[((O=e.style)==null?void 0:O.width)||"150px"," × ",((W=e.style)==null?void 0:W.height)||"80px"]})]})]});case"terms":return a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded p-4",style:w,children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Terms & Conditions"}),a.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed",children:e.content||"Terms and conditions content will appear here..."})]});case"spacer":return a.jsx("div",{className:"border-2 border-dashed border-gray-300 bg-gray-50",style:{height:e.content||"20px"},children:a.jsxs("div",{className:"text-center text-xs text-gray-400 leading-5",children:["Spacer (",e.content||"20px",")"]})});default:return a.jsx("div",{children:"Unknown element type"})}};return a.jsxs("div",{className:"group relative border border-gray-200 rounded-lg p-2 mb-2 hover:border-blue-300 hover:shadow-sm transition-all duration-200",children:[a.jsxs("div",{className:"absolute top-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white rounded shadow-lg border border-gray-300 p-1",children:[a.jsx("button",{onClick:()=>o(e,t),className:"p-1 h-6 w-6 rounded hover:bg-blue-50 transition-colors",style:{color:"#374151",backgroundColor:"white",border:"1px solid #d1d5db",display:"flex",alignItems:"center",justifyContent:"center"},title:"Edit Element",children:a.jsx(ws,{size:12,color:"#374151"})}),a.jsx("button",{onClick:()=>s(t),disabled:l,className:"p-1 h-6 w-6 rounded hover:bg-green-50 transition-colors disabled:opacity-50",style:{color:l?"#9ca3af":"#374151",backgroundColor:"white",border:"1px solid #d1d5db",display:"flex",alignItems:"center",justifyContent:"center"},title:"Move Up",children:a.jsx(KA,{size:12,color:l?"#9ca3af":"#374151"})}),a.jsx("button",{onClick:()=>i(t),disabled:c,className:"p-1 h-6 w-6 rounded hover:bg-green-50 transition-colors disabled:opacity-50",style:{color:c?"#9ca3af":"#374151",backgroundColor:"white",border:"1px solid #d1d5db",display:"flex",alignItems:"center",justifyContent:"center"},title:"Move Down",children:a.jsx(YA,{size:12,color:c?"#9ca3af":"#374151"})}),a.jsx("button",{onClick:()=>n(t),className:"p-1 h-6 w-6 rounded hover:bg-red-50 transition-colors",style:{color:"#dc2626",backgroundColor:"white",border:"1px solid #d1d5db",display:"flex",alignItems:"center",justifyContent:"center"},title:"Delete Element",children:a.jsx(js,{size:12,color:"#dc2626"})})]}),a.jsx("div",{className:"pointer-events-none",children:S()}),a.jsx("div",{className:"absolute left-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity cursor-move p-1",children:a.jsx(gM,{size:12,className:"text-gray-600 hover:text-gray-800"})})]})}function LQ({elements:e,onElementsChange:t,onEditElement:n}){const r=x.useRef(e);r.current=e;const[{isOver:s},i]=hQ(()=>({accept:rT.PALETTE_ITEM,drop:d=>{const h=p=>{switch(p){case"table":return{columns:["Sr.","Description of Equipment/Service","Capacity/Specification","Duration","Rate (₹)","Amount (₹)"],rows:[["1","{{item_name}}","{{item_capacity}}","{{item_duration}}","{{item_rate}}","{{item_amount}}"],["2","Mobile Crane with Operator","100MT Hydraulic","1 Month","7,85,000","7,85,000"],["3","Transportation & Mobilization","To & From Site","1 Trip","25,000","25,000"]],showHeader:!0,columnWidths:["8%","35%","20%","12%","12%","13%"]};case"image":return{src:"",alt:"Company Logo",aspectRatio:"16/9",position:"center"};case"header":return{showLogo:!0,showCompanyInfo:!0,layout:"left-right"};default:return{}}},f={id:`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:d.elementType,content:d.defaultContent||"",style:{fontSize:d.elementType==="header"?"18px":d.elementType==="table"?"12px":"14px",fontWeight:d.elementType==="header"?"bold":"normal",color:"#000000",backgroundColor:"transparent",padding:d.elementType==="table"?"4px":"8px",margin:"4px 0",textAlign:d.elementType==="header"?"center":"left",width:d.elementType==="image"?"120px":"auto",height:d.elementType==="image"?"60px":"auto",maxWidth:"100%"},config:h(d.elementType)};console.log("🔥 ADDING NEW ELEMENT"),console.log("📊 Current elements before add:",r.current.map(p=>({id:p.id,type:p.type,content:(p.content||"").substring(0,20)+"..."}))),console.log("➕ New element being added:",{id:f.id,type:f.type,content:f.content});const m=[...r.current,f];console.log("📋 Final elements array:",m.map(p=>({id:p.id,type:p.type}))),t(m)},collect:d=>({isOver:d.isOver()})})),o=d=>{t(r.current.filter((h,f)=>f!==d))},l=(d,h)=>{var m;console.log("handleElementUpdate called:",{index:d,updates:h,currentElement:(m=r.current[d])==null?void 0:m.id});const f=[...r.current];f[d]={...f[d],...h},console.log("Updated element:",f[d]),t(f)},c=d=>{if(d>0){const h=[...r.current];[h[d],h[d-1]]=[h[d-1],h[d]],t(h)}},u=d=>{if(d<r.current.length-1){const h=[...r.current];[h[d],h[d+1]]=[h[d+1],h[d]],t(h)}};return a.jsx("div",{ref:i,className:`
        min-h-96 p-4 border-2 border-dashed rounded-lg
        ${s?"border-blue-400 bg-blue-50":"border-gray-300 bg-gray-50"}
        transition-colors duration-200
      `,children:e.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ru,{size:48,className:"mx-auto text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"Start Building Your Template"}),a.jsx("p",{className:"text-gray-500",children:"Drag elements from the palette to create your quotation template"})]}):a.jsx("div",{className:"space-y-2",children:e.map((d,h)=>a.jsx(RQ,{element:d,index:h,onDelete:o,onUpdateElement:l,onMoveUp:c,onMoveDown:u,onEdit:n,isFirst:h===0,isLast:h===e.length-1},d.id))})})}function FQ({template:e,onSave:t,onCancel:n}){var T;const[r,s]=x.useState((e==null?void 0:e.name)||""),[i,o]=x.useState((e==null?void 0:e.description)||""),[l,c]=x.useState([]),[u,d]=x.useState(!1),[h,f]=x.useState(null),[m,p]=x.useState(!1),[g,y]=x.useState(!1),[b,v]=x.useState(null),[w,S]=x.useState("elements");x.useEffect(()=>{console.log("Elements state changed:",l.map(A=>{var z;return{id:A.id,type:A.type,content:((z=A.content)==null?void 0:z.substring(0,20))+"...",configKeys:Object.keys(A.config||{})}}))},[l]),x.useEffect(()=>{if(console.log("🚨 TEMPLATE USEEFFECT TRIGGERED"),console.log("📄 Template prop:",e),console.log("🔄 Current elements before template load:",l.map(A=>({id:A.id,type:A.type}))),console.log("🎯 Elements length:",l.length),e&&e.elements&&e.elements.length>0){console.log("✅ Loading template with elements:",e),s(e.name),o(e.description||"");const A=e.elements.map(z=>({...z,style:{fontSize:"14px",fontWeight:"normal",color:"#000000",backgroundColor:"transparent",padding:"8px",margin:"4px 0",textAlign:"left",...z.style||{}}}));console.log("📋 Setting elements from template:",A.map(z=>({id:z.id,type:z.type}))),c(A)}else e?(console.log("⚠️ Template provided but no elements, setting name/description only"),s(e.name),o(e.description||"")):console.log("❌ No template provided, keeping current state")},[e==null?void 0:e.id,e==null?void 0:e.name,(T=e==null?void 0:e.elements)==null?void 0:T.length]);const j=A=>{const z={id:`element-${Date.now()}`,type:"field",content:A,style:{fontSize:"14px",fontWeight:"normal",color:"#000000",backgroundColor:"transparent",padding:"8px",margin:"4px 0",textAlign:"left"}};c(M=>[...M,z])},k=A=>{c(z=>z.map(M=>({...M,style:{...M.style,color:A.colors.text,backgroundColor:M.type==="header"?A.colors.accent:"transparent"}})))},N=A=>{const z=A.elements.map((M,P)=>({id:`template-${Date.now()}-${P}`,type:M.type,content:M.content,style:{fontSize:"14px",fontWeight:"normal",color:"#000000",backgroundColor:"transparent",padding:"8px",margin:"4px 0",textAlign:"left",...M.style||{}}}));c(M=>[...M,...z])},C=async()=>{if(!r.trim()){v("Please enter a template name"),setTimeout(()=>v(null),3e3);return}if(l.length===0){v("Please add at least one element to the template"),setTimeout(()=>v(null),3e3);return}d(!0);try{const A={name:r.trim(),description:i.trim(),elements:l.map(z=>({id:z.id,type:z.type,content:z.content,fieldType:z.fieldType,style:z.style,config:z.config})),tags:(e==null?void 0:e.tags)||[],usage_count:(e==null?void 0:e.usage_count)||0,createdBy:(e==null?void 0:e.createdBy)||"current-user",version:(e==null?void 0:e.version)||1,isDefault:(e==null?void 0:e.isDefault)||!1,isActive:(e==null?void 0:e.isActive)!==!1,category:(e==null?void 0:e.category)||"general",styles:(e==null?void 0:e.styles)||{},layout:(e==null?void 0:e.layout)||{},thumbnail:e==null?void 0:e.thumbnail,content:(e==null?void 0:e.content)||""};await t(A),y(!0),setTimeout(()=>y(!1),3e3),console.log("✅ Template saved successfully")}catch(A){console.error("❌ Error saving template:",A),v("Failed to save template. Please try again."),setTimeout(()=>v(null),5e3)}finally{d(!1)}},E=()=>{if(console.log("🔍 Preview button clicked"),console.log("📊 Current elements:",l.map(A=>({id:A.id,type:A.type}))),console.log("🏷️ Template name:",r),console.log("🎭 Show preview state:",m),l.length===0){console.log("❌ No elements to preview"),v("Please add elements to preview the template"),setTimeout(()=>v(null),3e3);return}console.log("✅ Opening preview modal"),p(!0)},D=(A,z)=>{f({element:A,index:z})},$=A=>{if(h){const z=[...l];z[h.index]={...z[h.index],...A},c(z),console.log("🎨 Element updated:",A)}},B=()=>{f(null)},F=x.useCallback(A=>{console.log("🎬 handleElementsChange called"),console.log("📥 Incoming elements:",A.map(z=>({id:z.id,type:z.type}))),c(A)},[]);return a.jsx(IY,{backend:kQ,children:a.jsxs("div",{className:"flex flex-col lg:flex-row h-screen bg-gray-100",children:[g&&a.jsx("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",children:"✅ Template saved successfully!"}),a.jsxs("div",{className:"w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col lg:h-full max-h-screen",children:[a.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"elements",label:"Elements",icon:Ia},{id:"variables",label:"Variables",icon:no},{id:"themes",label:"Themes",icon:ws},{id:"templates",label:"Templates",icon:St}].map(A=>{const z=A.icon;return a.jsxs("button",{onClick:()=>S(A.id),className:`flex-1 px-3 py-2 text-xs font-medium transition-colors ${w===A.id?"bg-blue-50 text-blue-700 border-b-2 border-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx(z,{size:16,className:"mx-auto mb-1"}),a.jsx("div",{children:A.label})]},A.id)})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[w==="elements"&&a.jsx("div",{className:"p-4 h-full overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Template Elements"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Drag elements to the canvas to build your template"}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:["All","content","data","layout","logic"].map(A=>a.jsx("button",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-600 hover:bg-gray-200",children:A.charAt(0).toUpperCase()+A.slice(1)},A))})}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:DQ.map(A=>a.jsx(_Q,{item:A},A.type))})]})}),w==="variables"&&a.jsx(AQ,{onInsertVariable:j}),w==="themes"&&a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsx(MQ,{onApplyTheme:k})}),w==="templates"&&a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsx(IQ,{onInsertTemplate:N})})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(ke,{value:r,onChange:A=>s(A.target.value),placeholder:"Template Name",className:"text-lg font-semibold mb-2"}),a.jsx(ke,{value:i,onChange:A=>o(A.target.value),placeholder:"Template Description (optional)",className:"text-sm"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(q,{variant:"ghost",onClick:E,disabled:l.length===0,title:"Preview template with sample data",className:"text-gray-700 hover:text-gray-900 hover:bg-gray-100 disabled:text-gray-400",children:[a.jsx(Bu,{size:16,className:"mr-2"}),"Preview"]}),a.jsxs(q,{onClick:C,disabled:u||!r.trim()||l.length===0,title:"Save template to database",className:"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-gray-400",children:[a.jsx(bi,{size:16,className:"mr-2"}),u?"Saving...":"Save Template"]}),a.jsx(q,{variant:"ghost",onClick:n,className:"text-gray-700 hover:text-gray-900 hover:bg-gray-100",children:"Cancel"})]})]})}),a.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:a.jsx(LQ,{elements:l,onElementsChange:F,onEditElement:D})})]}),h&&a.jsxs("div",{className:"fixed inset-0 lg:relative lg:inset-auto lg:w-80 lg:flex-shrink-0 z-30",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 lg:hidden",onClick:B}),a.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-80 lg:relative lg:w-full",children:a.jsx(OQ,{element:h.element,onUpdate:$,onClose:B})})]}),g&&a.jsx("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg z-50",children:"✅ Template saved successfully!"}),b&&a.jsxs("div",{className:"fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md shadow-lg z-50",children:["❌ ",b]}),a.jsx(EQ,{isOpen:m,onClose:()=>p(!1),elements:l,templateName:r})]})})}async function $Q(e={}){const t="http://103.224.243.242:3001/api",n=new URLSearchParams;e.search&&n.set("search",e.search),e.category&&n.set("category",e.category),e.isActive!==void 0&&n.set("isActive",String(e.isActive)),e.limit&&n.set("limit",String(e.limit)),e.offset&&n.set("offset",String(e.offset)),e.sortBy&&n.set("sortBy",e.sortBy),e.sortOrder&&n.set("sortOrder",e.sortOrder);const r=await fetch(`${t}/templates/modern?${n.toString()}`,{method:"GET",headers:Ce(),credentials:"include"});if(!r.ok)throw new Error(`Failed to fetch modern templates: ${r.status} ${r.statusText}`);return await r.json()}async function lj(e){const t="http://103.224.243.242:3001/api";if(!e.name||!e.name.trim())throw new Error("Template name is required");if(!e.elements||!Array.isArray(e.elements))throw new Error("Template elements must be an array");const n=await fetch(`${t}/templates/modern`,{method:"POST",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!n.ok){const s=await n.json().catch(()=>({}));throw new Error(s.message||"Failed to create modern template")}return(await n.json()).data}async function zQ(e,t,n){const r="http://103.224.243.242:3001/api",s={...t},i=await fetch(`${r}/templates/modern/${e}`,{method:"PATCH",headers:{...Ce(),"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!i.ok){const l=await i.json().catch(()=>({}));throw i.status===409?new Error("Template was modified by another user. Please refresh and try again."):new Error(l.message||"Failed to update modern template")}return(await i.json()).data}async function BQ(e){const n=await fetch(`http://103.224.243.242:3001/api/templates/modern/${e}`,{method:"DELETE",headers:Ce(),credentials:"include"});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||"Failed to delete modern template")}}const VQ=()=>{const[e,t]=x.useState([]),[n,r]=x.useState(!0),[s,i]=x.useState(""),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState("grid"),[f,m]=x.useState("all"),[p,g]=x.useState({show:!1,title:""});x.useEffect(()=>{y()},[]);const y=async()=>{try{r(!0);const E=await $Q();t(E.data||E)}catch(E){console.error("Error fetching templates:",E),k("Error loading templates","error")}finally{r(!1)}},b=()=>{l(null),u(!0)},v=E=>{l(E),u(!0)},w=async E=>{if(window.confirm("Are you sure you want to delete this template?"))try{await BQ(E),t(D=>D.filter($=>$.id!==E)),k("Template deleted successfully","success")}catch(D){console.error("Error deleting template:",D),k("Error deleting template","error")}},S=async E=>{try{const D=await lj({...E,name:`${E.name} (Copy)`,createdBy:"Current User",usage_count:0,isDefault:!1});t($=>[D,...$]),k("Template duplicated successfully","success")}catch(D){console.error("Error duplicating template:",D),k("Error duplicating template","error")}},j=E=>{console.log("Preview template:",E)},k=(E,D="success")=>{g({show:!0,title:E,variant:D}),setTimeout(()=>g({show:!1,title:""}),3e3)},N=e.filter(E=>{var B,F;const D=E.name.toLowerCase().includes(s.toLowerCase())||((B=E.description)==null?void 0:B.toLowerCase().includes(s.toLowerCase())),$=f==="all"||((F=E.tags)==null?void 0:F.includes(f));return D&&$}),C=["all",...new Set(e.flatMap(E=>E.tags||[]))];return c?a.jsx(FQ,{template:o||void 0,onSave:async E=>{try{o?(await zQ(o.id,E),k("Template updated successfully","success")):(await lj({...E,createdBy:"Current User"}),k("Template created successfully","success")),u(!1),y()}catch(D){console.error("Error saving template:",D),k("Error saving template","error")}},onCancel:()=>u(!1)}):a.jsxs("div",{className:"container mx-auto py-6 px-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Template Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage quotation templates"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(q,{variant:"ghost",leftIcon:a.jsx(VC,{}),children:"Import"}),a.jsx(q,{onClick:b,leftIcon:a.jsx(Mr,{}),className:"bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800",children:"Create Template"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(cr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ke,{placeholder:"Search templates...",value:s,onChange:E=>i(E.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("select",{value:f,onChange:E=>m(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:C.map(E=>a.jsx("option",{value:E,children:E==="all"?"All Categories":E.charAt(0).toUpperCase()+E.slice(1)},E))}),a.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[a.jsx(q,{variant:d==="grid"?"accent":"ghost",size:"sm",onClick:()=>h("grid"),className:"rounded-none",children:a.jsx(Ia,{className:"h-4 w-4"})}),a.jsx(q,{variant:d==="list"?"accent":"ghost",size:"sm",onClick:()=>h("list"),className:"rounded-none",children:a.jsx(uM,{className:"h-4 w-4"})})]})]})]}),n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):a.jsx("div",{className:d==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:N.map(E=>a.jsx(ce,{className:`group hover:shadow-lg transition-all duration-200 ${E.isDefault?"ring-2 ring-primary-200":""} ${d==="list"?"flex-row":""}`,children:d==="grid"?a.jsxs(a.Fragment,{children:[a.jsxs(ge,{className:"pb-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"h-5 w-5 text-primary-600"}),E.isDefault&&a.jsx(rv,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>j(E),children:a.jsx(Bu,{className:"h-3 w-3"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>v(E),children:a.jsx(nv,{className:"h-3 w-3"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>S(E),children:a.jsx(Z0,{className:"h-3 w-3"})}),!E.isDefault&&a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>w(E.id),className:"text-red-600 hover:text-red-700",children:a.jsx(js,{className:"h-3 w-3"})})]})]}),a.jsx(xe,{className:"text-lg",children:E.name}),E.description&&a.jsx("p",{className:"text-sm text-gray-600",children:E.description})]}),a.jsx(me,{children:a.jsxs("div",{className:"space-y-3",children:[E.tags&&E.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:E.tags.map(D=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:D},D))}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(hi,{className:"h-3 w-3"}),a.jsx("span",{children:E.createdBy})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(qn,{className:"h-3 w-3"}),a.jsx("span",{children:new Date(E.updatedAt).toLocaleDateString()})]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Used ",E.usage_count||0," times"]})]})})]}):a.jsxs("div",{className:"flex items-center justify-between p-4 w-full",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"h-5 w-5 text-primary-600"}),E.isDefault&&a.jsx(rv,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:E.name}),a.jsx("p",{className:"text-sm text-gray-600",children:E.description}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[a.jsxs("span",{children:["By ",E.createdBy]}),a.jsxs("span",{children:["Updated ",new Date(E.updatedAt).toLocaleDateString()]}),a.jsxs("span",{children:["Used ",E.usage_count||0," times"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>j(E),children:a.jsx(Bu,{className:"h-4 w-4"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>v(E),children:a.jsx(nv,{className:"h-4 w-4"})}),a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>S(E),children:a.jsx(Z0,{className:"h-4 w-4"})}),!E.isDefault&&a.jsx(q,{size:"sm",variant:"ghost",onClick:()=>w(E.id),className:"text-red-600 hover:text-red-700",children:a.jsx(js,{className:"h-4 w-4"})})]})]})},E.id))}),N.length===0&&!n&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(St,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),a.jsx("p",{className:"text-gray-600 mb-2",children:s||f!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first template."}),a.jsx("p",{className:"text-gray-500 mb-4",children:"You can create a new template from here. Click the button below to get started."}),!s&&f==="all"&&a.jsx(q,{onClick:b,leftIcon:a.jsx(Mr,{}),children:"Create Your First Template"})]}),p.show&&a.jsx(dt,{title:p.title,variant:p.variant,isVisible:p.show,onClose:()=>g({show:!1,title:""})})]})},UQ=({children:e})=>{const{isAuthenticated:t,user:n,setUser:r}=qe();return x.useEffect(()=>{(async()=>{try{if(!t&&!n){const i=await KC();i&&r(i)}}catch(i){console.error("Error checking authentication status:",i)}})()},[t,n,r]),a.jsx(a.Fragment,{children:e})};function Lt({children:e,redirectTo:t="/login",allowedRoles:n}){const{user:r,isAuthenticated:s,setUser:i}=qe(),[o,l]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const u=await KC();u?(!r||r.id!==u.id)&&i(u):(localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed"))}catch(u){console.error("Error verifying token:",u),localStorage.removeItem("jwt-token"),localStorage.removeItem("user"),localStorage.removeItem("explicit-login-performed")}finally{l(!1)}})()},[r,i]),o?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):(console.log(`🔒 Protected Route Check - Authenticated: ${s}, User: ${(r==null?void 0:r.name)||"none"}`),!s||!r?(console.log(`❌ Route protection failed - redirecting to ${t}`),a.jsx(zn,{to:t,replace:!0})):n&&!n.includes(r.role)?(console.log(`❌ Role protection failed - user has ${r.role} but needs one of [${n.join(",")}]`),a.jsx(zn,{to:"/dashboard",replace:!0})):(console.log("✅ Route protection passed - rendering protected content"),e?a.jsx(a.Fragment,{children:e}):a.jsx(MC,{})))}function WQ(){const{user:e,isAuthenticated:t}=qe();if(console.log("🎯 DashboardRouter called"),console.log("🔍 Authentication state:",{isAuthenticated:t}),console.log("👤 User object:",JSON.stringify(e,null,2)),console.log("🏷️ User role:",e==null?void 0:e.role),!t||!e)return console.log("❌ DashboardRouter: Not authenticated, redirecting to login"),a.jsx(zn,{to:"/login",replace:!0});if(!e.role)return console.error("❌ DashboardRouter: User authenticated but role is undefined!"),console.error("📊 Full user object:",e),console.log("🔄 Fallback: Showing AdminDashboard due to missing role"),a.jsx(Pf,{});switch(console.log("✅ DashboardRouter: User role is",e.role),e.role){case"admin":return console.log("📊 Rendering AdminDashboard"),a.jsx(Pf,{});case"sales_agent":return console.log("📊 Rendering SalesAgentDashboard"),a.jsx(Rz,{});case"operations_manager":return console.log("📊 Rendering OperationsManagerDashboard"),a.jsx(zz,{});case"operator":return console.log("📊 Rendering OperatorDashboard"),a.jsx(Vz,{});default:return console.log("❌ Unknown user role:",e.role,"showing AdminDashboard as fallback"),a.jsx(Pf,{})}}function HQ(){const e=window.location.pathname==="/"||window.location.pathname==="";if(console.log("🔍 AppContent - Current pathname:",window.location.pathname),console.log("🔍 AppContent - Is root URL:",e),e)return console.log("📍 Redirecting from root to /login"),a.jsx(zn,{to:"/login",replace:!0});const t=a.jsx("div",{className:"fixed inset-0 bg-white flex min-h-screen items-center justify-center z-50 loading-screen",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-600 border-t-transparent mb-4"}),a.jsx("p",{className:"text-lg text-gray-700 font-medium",children:"Loading ASP Cranes CRM..."}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please wait while we prepare your dashboard"})]})});return a.jsx(x.Suspense,{fallback:t,children:a.jsxs(TA,{children:[a.jsx(Ge,{path:"/blank-check.html",element:a.jsx(zn,{to:"/blank-check.html",replace:!0})}),a.jsx(Ge,{path:"/api-test.html",element:a.jsx(zn,{to:"/api-test.html",replace:!0})}),a.jsx(Ge,{path:"/login",element:a.jsx(fI,{})}),a.jsx(Ge,{element:a.jsx(Lt,{}),children:a.jsxs(Ge,{path:"/",element:a.jsx(FL,{}),children:[a.jsx(Ge,{index:!0,element:a.jsx(zn,{to:"/dashboard",replace:!0})}),a.jsx(Ge,{path:"dashboard",element:a.jsx(WQ,{})}),a.jsx(Ge,{path:"admin/users",element:a.jsx(Lt,{allowedRoles:["admin"],children:a.jsx(R8,{})})}),a.jsx(Ge,{path:"admin/config",element:a.jsx(Lt,{allowedRoles:["admin"],children:a.jsx(H8,{})})}),a.jsx(Ge,{path:"admin/equipment",element:a.jsx(Lt,{allowedRoles:["admin","operations_manager"],children:a.jsx(T8,{})})}),a.jsx(Ge,{path:"admin/services",element:a.jsx(Lt,{allowedRoles:["admin","operations_manager"],children:a.jsx(_8,{})})}),a.jsx(Ge,{path:"admin/templates",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent"],children:a.jsx(VQ,{})})}),a.jsx(Ge,{path:"leads",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(LV,{})})}),a.jsx(Ge,{path:"customers",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(q8,{})})}),a.jsx(Ge,{path:"deals",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(pG,{})})}),a.jsx(Ge,{path:"deals/:id",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(xG,{})})}),a.jsx(Ge,{path:"quotations",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent","operations_manager"],children:a.jsx(KV,{})})}),a.jsx(Ge,{path:"quotations/create",element:a.jsx(Lt,{allowedRoles:["admin","sales_agent"],children:a.jsx(oU,{})})}),a.jsx(Ge,{path:"jobs",element:a.jsx(Lt,{allowedRoles:["admin","operations_manager","operator"],children:a.jsx(y8,{})})}),a.jsx(Ge,{path:"site-assessments",element:a.jsx(Lt,{allowedRoles:["admin","operations_manager","operator"],children:a.jsx(w8,{})})}),a.jsx(Ge,{path:"job-summary",element:a.jsx(Lt,{allowedRoles:["admin","operations_manager","operator"],children:a.jsx(S8,{})})}),a.jsx(Ge,{path:"*",element:a.jsx(zn,{to:"/dashboard",replace:!0})})]})})]})})}function qQ(){return a.jsx(LA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(UQ,{children:a.jsx(_M,{children:a.jsxs(a.Fragment,{children:[a.jsx(HQ,{}),a.jsx(TM,{}),a.jsx($V,{})]})})})})}console.log("🚀 Starting ASP Cranes CRM...");console.log("🔍 Current URL:",window.location.href);console.log("💾 localStorage contents:",{"jwt-token":localStorage.getItem("jwt-token")?"Present":"Missing","explicit-login-performed":localStorage.getItem("explicit-login-performed"),"auth-storage":localStorage.getItem("auth-storage")?"Present":"Missing"});console.log("🔄 Auth store hydration temporarily disabled for debugging");document.body.classList.contains("dark")||document.body.classList.add("dark");const fm=document.getElementById("root");if(!fm)console.error("❌ Failed to find root element"),document.body.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">Error: Root element not found</div>';else{console.log("✅ Root element found, creating React app...");try{wC(fm).render(a.jsx(x.StrictMode,{children:a.jsx(x.Suspense,{fallback:a.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-16 w-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading ASP Cranes CRM..."})]})}),children:a.jsx(qQ,{})})})),console.log("🎉 React application rendered successfully")}catch(e){console.error("❌ React render error:",e),fm.innerHTML='<div style="padding: 20px; font-family: Arial; color: red;">React render error: '+e+"</div>"}}export{V8 as a,z8 as c,B8 as d,DE as g,ZQ as t,Hp as u};
